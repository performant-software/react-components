"use strict";(self.webpackChunk_performant_software_storybook=self.webpackChunk_performant_software_storybook||[]).push([[6491],{"./src/semantic-ui/BibliographyForm.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>BibliographyForm_stories});var react=__webpack_require__("../../node_modules/react/index.js"),Form=__webpack_require__("../../node_modules/semantic-ui-react/dist/es/collections/Form/Form.js"),BibliographyForm=__webpack_require__("../semantic-ui/src/components/BibliographyForm.js"),index_all=__webpack_require__("../../node_modules/underscore/modules/index-all.js"),i18n=__webpack_require__("../shared/src/i18n/i18n.js");function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var DEFAULT_OPTIONS={emptyValues:["",null,void 0,[],{}],ignoreHtml:!0,ignoreWhitespace:!0},HTML_REGEX=/(<([^>]+)>)/gi,WHITESPACE_REGEX=/\s\s+/g;const utils_Object_isEqual=function isEqual(a,b){var userOptions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},options=index_all.default.defaults(userOptions,DEFAULT_OPTIONS);if(a===b||index_all.default.contains(options.emptyValues,a)&&index_all.default.contains(options.emptyValues,b))return!0;if(index_all.default.isString(a)&&index_all.default.isString(b)){var aString=a,bString=b;if(options.ignoreWhitespace&&(aString=a.replace(WHITESPACE_REGEX," "),bString=b.replace(WHITESPACE_REGEX," ")),options.ignoreHtml&&(aString=aString.replace(HTML_REGEX,""),bString=bString.replace(HTML_REGEX,"")),aString===bString)return!0}if(index_all.default.isFunction(a)&&index_all.default.isFunction(b)&&a.toString()===b.toString())return!0;if(null!==a&&"object"===_typeof(a)&&null!==b&&"object"===_typeof(b)){var aKeys=index_all.default.keys(a),bKeys=index_all.default.keys(b);if(aKeys.length!==bKeys.length)return!1;var equal=!0;return index_all.default.each(index_all.default.keys(a),(function(key){index_all.default.has(b,key)&&isEqual(a[key],b[key])||(equal=!1)})),!!equal}return!1};var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function EditContainer_typeof(obj){return EditContainer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},EditContainer_typeof(obj)}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function _possibleConstructorReturn(self,call){if(call&&("object"===EditContainer_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}(this,result)}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var _Default$parameters,_Default$parameters2;function BibliographyForm_stories_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function BibliographyForm_stories_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?BibliographyForm_stories_ownKeys(Object(source),!0).forEach((function(key){BibliographyForm_stories_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):BibliographyForm_stories_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function BibliographyForm_stories_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var BibliographyFormComponent=function useEditContainer(WrappedComponent){return function(_Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(_class,_Component);var _super=_createSuper(_class);function _class(props){var _this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,_class),_this=_super.call(this,props);var item=index_all.default.defaults(props.item||{},props.defaults||{});return _this.state={item,loading:!1,originalItem:item,saving:!1,validationErrors:[]},_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(_class,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.props.onInitialize&&this.props.item&&this.props.item.id&&this.setState({loading:!0},(function(){_this2.props.onInitialize&&_this2.props.item&&_this2.props.onInitialize(_this2.props.item.id).then((function(item){return _this2.setState({item,originalItem:item,loading:!1})}))}))}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){prevProps.item!==this.props.item&&this.setState({item:this.props.item,originalItem:this.props.item})}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.onSetState({saving:!1})}},{key:"isChild",value:function isChild(a,b){return a.uid&&b.uid&&a.uid===b.uid||a.id&&b.id&&a.id===b.id}},{key:"isRequired",value:function isRequired(prop){return this.props.required&&index_all.default.contains(this.props.required,prop)}},{key:"isError",value:function isError(prop){return index_all.default.has(this.state.validationErrors,prop)}},{key:"onClearValidationError",value:function onClearValidationError(){for(var _len=arguments.length,keys=new Array(_len),_key=0;_key<_len;_key++)keys[_key]=arguments[_key];this.setState((function(state){return{validationErrors:index_all.default.omit(state.validationErrors,keys)}}))}},{key:"onClose",value:function onClose(){this.props.onClose()}},{key:"onCreateChildAssociation",value:function onCreateChildAssociation(association,child){this.setState((function(state){return{item:_objectSpread(_objectSpread({},state.item),{},_defineProperty({},association,[].concat(_toConsumableArray(state.item[association]||[]),[child])))}}))}},{key:"onDeleteChildAssociation",value:function onDeleteChildAssociation(association,child){return child.id?this.onMarkChildAssociationForDelete(association,child):this.onRemoveChildAssociation(association,child)}},{key:"onError",value:function onError(_ref){var _this3=this,_ref$response=_ref.response,_ref$response$data$er=_ref$response.data.errors,errors=void 0===_ref$response$data$er?{}:_ref$response$data$er,status=_ref$response.status,validationErrors={};index_all.default.each(Object.keys(errors),(function(key){var fieldErrors=errors[key],value=_this3.state.item[key];index_all.default.each(fieldErrors,(function(error){"has already been taken"===error?index_all.default.extend(validationErrors,_defineProperty({},key,i18n.Z.t("EditContainer.errors.unique",{key,value}))):"can't be blank"===error?index_all.default.extend(validationErrors,_defineProperty({},key,i18n.Z.t("EditContainer.errors.required",{key}))):_this3.props.resolveValidationError&&index_all.default.extend(validationErrors,_this3.props.resolveValidationError({key,error,status,item:_this3.state.item}))}))})),400===status&&index_all.default.isEmpty(validationErrors)?index_all.default.extend(validationErrors,{error:i18n.Z.t("EditContainer.errors.general")}):500===status&&index_all.default.isEmpty(validationErrors)&&index_all.default.extend(validationErrors,{error:i18n.Z.t("EditContainer.errors.system")}),this.setState({saving:!1,validationErrors})}},{key:"onMarkChildAssociationForDelete",value:function onMarkChildAssociationForDelete(association,child){this.setState((function(state){return{item:_objectSpread(_objectSpread({},state.item),{},_defineProperty({},association,index_all.default.map(state.item[association]||[],(function(c){return c.id===child.id?_objectSpread(_objectSpread({},c),{},{_destroy:!0}):c}))))}}))}},{key:"onMultiAddChildAssociations",value:function onMultiAddChildAssociations(association,children){var _this4=this,items=this.state.item[association];index_all.default.each(children,this.onSaveChildAssociation.bind(this,association));var childrenToRemove=index_all.default.filter(items,(function(item){return!index_all.default.find(children,_this4.isChild.bind(_this4,item))}));index_all.default.each(childrenToRemove,this.onDeleteChildAssociation.bind(this,association))}},{key:"onRemoveChildAssociation",value:function onRemoveChildAssociation(association,child){var _this5=this;this.setState((function(state){return{item:_objectSpread(_objectSpread({},state.item),{},_defineProperty({},association,index_all.default.filter(state.item[association]||[],(function(c){return!(_this5.isChild(c,child)||utils_Object_isEqual(c,child))}))))}}))}},{key:"onReset",value:function onReset(){var item=this.props.defaults||{};this.setState({item,originalItem:item})}},{key:"onSave",value:function onSave(){var _this6=this;this.validateForm()&&this.setState({saving:!0},(function(){_this6.props.onSave(_this6.state.item).catch(_this6.onError.bind(_this6)).finally((function(){return _this6.setState({saving:!1})}))}))}},{key:"onSaveChildAssociation",value:function onSaveChildAssociation(association,child){var children=this.state.item[association]||[];return index_all.default.find(children,this.isChild.bind(this,child))?this.onUpdateChildAssociation(association,child):this.onCreateChildAssociation(association,child)}},{key:"onUpdateChildAssociation",value:function onUpdateChildAssociation(association,child){var _this7=this;this.setState((function(state){return{item:_objectSpread(_objectSpread({},state.item),{},_defineProperty({},association,index_all.default.map(state.item[association]||[],(function(c){return _this7.isChild(child,c)?child:c}))))}}))}},{key:"onAssociationInputChange",value:function onAssociationInputChange(idKey,valueKey){var record=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.setState((function(state){var _objectSpread6;return{item:_objectSpread(_objectSpread({},state.item),{},(_objectSpread6={},_defineProperty(_objectSpread6,idKey,record.id||""),_defineProperty(_objectSpread6,valueKey,record||{}),_objectSpread6)),validationErrors:index_all.default.omit(state.validationErrors,idKey)}}))}},{key:"onCheckboxInputChange",value:function onCheckboxInputChange(key){this.setState((function(state){return{item:_objectSpread(_objectSpread({},state.item),{},_defineProperty({},key,!state.item[key]))}}))}},{key:"onSetState",value:function onSetState(props){this.setState((function(state){return{item:_objectSpread(_objectSpread({},state.item),props),validationErrors:index_all.default.omit(state.validationErrors,index_all.default.keys(props))}}))}},{key:"onTextInputChange",value:function onTextInputChange(key,e,_ref2){var value=_ref2.value;this.setState((function(state){return{item:_objectSpread(_objectSpread({},state.item),{},_defineProperty({},key,value)),validationErrors:index_all.default.omit(state.validationErrors,key)}}))}},{key:"render",value:function render(){return(0,jsx_runtime.jsx)(WrappedComponent,_objectSpread(_objectSpread({},this.props),{},{dirty:!(!this.state.item.id||utils_Object_isEqual(this.state.item,this.state.originalItem)),errors:index_all.default.values(this.state.validationErrors),isError:this.isError.bind(this),isRequired:this.isRequired.bind(this),item:this.state.item,loading:this.state.loading,onAssociationInputChange:this.onAssociationInputChange.bind(this),onCheckboxInputChange:this.onCheckboxInputChange.bind(this),onClearValidationError:this.onClearValidationError.bind(this),onDeleteChildAssociation:this.onDeleteChildAssociation.bind(this),onMultiAddChildAssociations:this.onMultiAddChildAssociations.bind(this),onReset:this.onReset.bind(this),onSave:this.onSave.bind(this),onSaveChildAssociation:this.onSaveChildAssociation.bind(this),onTextInputChange:this.onTextInputChange.bind(this),onSetState:this.onSetState.bind(this),saving:this.state.saving}))}},{key:"validateForm",value:function validateForm(){var _this8=this,validationErrors=[];this.props.validate&&index_all.default.extend(validationErrors,this.props.validate(this.state.item));var required=this.props.required||[];return index_all.default.each(required,(function(key){var value=_this8.state.item[key];(index_all.default.isNumber(value)?index_all.default.isEmpty(value.toString()):index_all.default.isEmpty(value))&&index_all.default.extend(validationErrors,_defineProperty({},key,i18n.Z.t("EditContainer.errors.required",{key})))})),this.setState({validationErrors}),0===index_all.default.keys(validationErrors).length}}]),_class}(react.Component)}(BibliographyForm.Z);const BibliographyForm_stories={title:"Components/Semantic UI/BibliographyForm",component:BibliographyForm.Z};var Default=function Default(){return(0,jsx_runtime.jsx)(Form.Z,{children:(0,jsx_runtime.jsx)(BibliographyFormComponent,{item:{itemType:"book"}})})};Default.displayName="Default",Default.parameters=BibliographyForm_stories_objectSpread(BibliographyForm_stories_objectSpread({},Default.parameters),{},{docs:BibliographyForm_stories_objectSpread(BibliographyForm_stories_objectSpread({},null===(_Default$parameters=Default.parameters)||void 0===_Default$parameters?void 0:_Default$parameters.docs),{},{source:BibliographyForm_stories_objectSpread({originalSource:"() => <Form>\n    <BibliographyFormComponent item={{\n    itemType: 'book'\n  }} />\n  </Form>"},null===(_Default$parameters2=Default.parameters)||void 0===_Default$parameters2||null===(_Default$parameters2=_Default$parameters2.docs)||void 0===_Default$parameters2?void 0:_Default$parameters2.source)})});var __namedExportsOrder=["Default"]},"../shared/src/i18n/i18n.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>i18n_i18n});var i18next=__webpack_require__("../../node_modules/i18next/dist/esm/i18next.js");var resources={en:{translation:JSON.parse('{"Citation":{"labels":{"untitled":"Untitled"}},"Common":{"buttons":{"add":"Add","cancel":"Cancel","clear":"Clear","edit":"Edit","ok":"OK","save":"Save"},"errors":{"title":"Oops!"},"messages":{"error":{"header":"Oops!"},"loading":"Loading","save":{"content":"Your changes have been saved.","header":"Success!"}}},"EditContainer":{"errors":{"general":"Something went wrong while saving the record. Please make sure all required fields are filled out.","required":"The {{key}} field is required.","system":"A system error occurred while saving the record. Please contact your system administrator.","unique":"A record with the {{key}} \\"{{value}}\\" already exists."}}}')}},i18n=i18next.default.createInstance();i18n.init({debug:!0,fallbackLng:"en",lng:"en",interpolation:{escapeValue:!1},resources});const i18n_i18n=i18n}}]);