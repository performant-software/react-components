import{r as y,j as t}from"./iframe-BPWyo1ml.js";import{B as o}from"./Button-4UTl3zWh.js";import{_ as h}from"./index-default-B8-H6N8J.js";import{o as S}from"./index.es27-qSesx2Cv.js";import{o as f}from"./index.es34-NGGuPWEW.js";import{G as l}from"./Grid-4l2-TXFZ.js";import{M as g}from"./Message-BYGMVLVX.js";import{H as b}from"./Header-HTMCEQYc.js";import{I as v}from"./Icon-jme1Xn38.js";import{I as C}from"./Input-CCAhbxsm.js";import{M as m}from"./Modal-C7r7-T10.js";import{_ as d}from"./index-default-C0I3bBxV.js";import{i}from"./i18n-DkobdbHY.js";import{E as w}from"./EditModal-DaDhkIIe.js";import{N as T}from"./NestedAccordion-BQM_80p6.js";import{S as x}from"./SelectizeHeader-DtSa4NoR.js";import{T as _}from"./Toaster-BtymTRI2.js";import{w as k}from"./withTranslation-B5tZ4Zk7.js";import{A as j}from"./AddModal-C1ev6d2N.js";import{A as M}from"./Api-DGMTLhRm.js";import"./extends-CCbyfPlC.js";import"./inheritsLoose-1HkgTRWY.js";import"./setPrototypeOf-DgZC2w_0.js";import"./getElementType-_MvlUdE4.js";import"./Label-BoodK5V_.js";import"./ModernAutoControlledComponent-YfVkZAu6.js";import"./assertThisInitialized-B9jnkVVz.js";import"./includes-DPOpDRSZ.js";import"./toFinite-TVPM6KGA.js";import"./forEach-DkM9CNVk.js";import"./Dimmer-Cc_1Rffq.js";import"./Portal-CMKTsJj1.js";import"./keyboardKey-D0kxxHqZ.js";import"./map-PCFjh3mh.js";import"./index-1knMejfY.js";import"./_baseSet-CdjV8XzC.js";import"./_baseAssignValue-B_GkWFP9.js";import"./_arrayReduce-CrxnWFSq.js";import"./isEmpty-BuKxTBqx.js";import"./index-O73er_T2.js";import"./i18next-eNuDfwAU.js";import"./index.es3-Dl2cgxD2.js";import"./index.es32-BPmKt0WH.js";import"./Loader-D2fDqbKe.js";import"./Accordion-CWfit9Pq.js";import"./without-elm7P8Lj.js";import"./isArrayLikeObject-Bjky3Eyc.js";import"./Segment-nU24hujV.js";import"./Transition-B0lefbC1.js";import"./filter-B8Ew4z8i.js";import"./context-BSJ9nZoN.js";class u extends y.Component{static defaultProps;constructor(e){super(e),this.state={items:[],modalAdd:!1,saved:!1,searchQuery:"",selectedItem:null,selectedItems:e.selectedItems}}componentDidUpdate(e){this.props.open&&!e.open&&this.onSearch(),this.props.selectedItems!==e.selectedItems&&this.setState({selectedItems:this.props.selectedItems})}isSelected(e){return!!d.findWhere(this.state.selectedItems,{id:e.id})}onItemClick(e){this.props.isSelectable&&!this.props.isSelectable(e)||this.setState(a=>{let n;return this.isSelected(e)?n=d.filter(a.selectedItems,r=>r.id!==e.id):this.props.multiple?n=[...a.selectedItems,e]:n=[e],{selectedItems:n}})}onItemSelection(e){this.state.selectedItem===e?this.setState({selectedItem:null},this.onItemClick.bind(this,e)):this.setState({selectedItem:e})}onItemToggle(e){e.loaded||this.onSearch(e.id).then(()=>{this.setState(a=>({items:d.map(a.items,n=>n.id===e.id?{...n,loaded:!0}:n)}))})}onSearch(e=null){return this.props.onSearch(e,this.state.searchQuery).then(({data:a})=>{const n=a[this.props.collectionName];this.setState(r=>e?{items:[...r.items||[],...n]}:{items:n})})}onSearchChange(e,{value:a}){this.setState({searchQuery:a})}render(){return t.jsx(S.Consumer,{children:e=>t.jsxs(m,{className:"accordion-selector",mountNode:e,open:this.props.open,size:"small",children:[t.jsx(m.Header,{children:t.jsxs(l,{columns:2,verticalAlign:"middle",children:[t.jsx(l.Column,{textAlign:"left",width:7,children:t.jsx(b,{content:this.props.title?this.props.title:i.t("AccordionSelector.title")})}),t.jsxs(l.Column,{textAlign:"right",width:9,children:[t.jsx(C,{"aria-label":"Search",autoFocus:!0,icon:"search",onKeyDown:f.clearSearchTimer.bind(this),onKeyUp:f.setSearchTimer.bind(this,this.onSearch.bind(this)),onChange:this.onSearchChange.bind(this),size:"mini",type:"text",value:this.state.searchQuery}),this.renderAddButton()]})]})}),t.jsxs(m.Content,{children:[t.jsx(x,{isSelected:a=>this.state.selectedItem===a,items:this.state.selectedItems,onItemClick:this.onItemSelection.bind(this),renderItem:this.props.renderItem.bind(this)}),t.jsx(T,{getChildItems:this.props.getChildItems.bind(this,this.state.items),onItemClick:this.onItemClick.bind(this),onItemToggle:this.onItemToggle.bind(this),renderItem:this.props.renderItem.bind(this),renderRight:this.renderRight.bind(this),rootItems:this.props.getRootItems(this.state.items),showToggle:this.props.showToggle.bind(this)}),this.renderAddModal(),this.state.saved&&t.jsxs(_,{onDismiss:()=>this.setState({saved:!1}),type:_.MessageTypes.positive,children:[t.jsx(g.Header,{content:i.t("Common.messages.save.header")}),t.jsx(g.Content,{content:i.t("Common.messages.save.content")})]})]}),t.jsxs(m.Actions,{children:[t.jsx(o,{onClick:this.props.onSave.bind(this,this.state.selectedItems),primary:!0,size:"medium",type:"submit",children:i.t("Common.buttons.save")}),t.jsx(o,{basic:!0,onClick:this.props.onClose.bind(this),size:"medium",type:"button",children:i.t("Common.buttons.cancel")})]})]})})}renderAddButton(){return this.props.modal?t.jsx(o,{basic:!0,className:"add-button",content:i.t("Common.buttons.add"),icon:"plus",onClick:()=>this.setState({modalAdd:!0})}):null}renderAddModal(){if(!(this.state.modalAdd&&this.props.modal))return null;const{component:e,props:a,onSave:n}=this.props.modal;return t.jsx(w,{component:e,onClose:()=>this.setState({modalAdd:!1,selectedItem:null}),onSave:r=>n(r).then(A=>this.setState({modalAdd:!1,saved:!0,searchQuery:"",selectedItems:[A]},this.onSearch.bind(this))),...a})}renderRight(e){return this.isSelected(e)?t.jsx(v,{color:"green",name:"check"}):null}}u.defaultProps={isSelectable:void 0,modal:void 0,multiple:!1,open:!1,selectedItems:[],title:void 0};const I=k()(u);u.__docgenInfo={description:"",methods:[{name:"isSelected",docblock:`Returns true if the passed item is selected.

@param item

@returns {boolean}`,modifiers:[],params:[{name:"item",optional:!1}],returns:{type:{name:"boolean"}},description:"Returns true if the passed item is selected."},{name:"onItemClick",docblock:`Toggles selection for the passed item.

@param item`,modifiers:[],params:[{name:"item",optional:!1}],returns:null,description:"Toggles selection for the passed item."},{name:"onItemSelection",docblock:`Toggles selection for the passed item.

@param item`,modifiers:[],params:[{name:"item",optional:!1}],returns:null,description:"Toggles selection for the passed item."},{name:"onItemToggle",docblock:`Lazy-loads the children for the passed item.

@param item`,modifiers:[],params:[{name:"item",optional:!1}],returns:null,description:"Lazy-loads the children for the passed item."},{name:"onSearch",docblock:`Executes the search.

@param parentId

@returns {*}`,modifiers:[],params:[{name:"parentId",optional:!0}],returns:{type:{name:"mixed"}},description:"Executes the search."},{name:"onSearchChange",docblock:`Sets the search query value on the state.

@param e
@param value`,modifiers:[],params:[{name:"e",optional:!1},{name:"{ value }",optional:!1}],returns:null,description:"Sets the search query value on the state."},{name:"renderAddButton",docblock:`Renders the add button.

@returns {null|*}`,modifiers:[],params:[],returns:{type:{name:"union",elements:[{name:"mixed"}]}},description:"Renders the add button."},{name:"renderAddModal",docblock:`Renders the add modal.

@returns {null|*}`,modifiers:[],params:[],returns:{type:{name:"union",elements:[{name:"mixed"}]}},description:"Renders the add modal."},{name:"renderRight",docblock:`Renders the right column for the passed item.

@param item

@returns {null|*}`,modifiers:[],params:[{name:"item",optional:!1}],returns:{type:{name:"union",elements:[{name:"mixed"}]}},description:"Renders the right column for the passed item."}],displayName:"AccordionSelector",props:{collectionName:{required:!0,flowType:{name:"string"},description:""},getChildItems:{required:!0,flowType:{name:"signature",type:"function",raw:"(items: Array<any>, item: any) => Array<any>",signature:{arguments:[{name:"items",type:{name:"Array",elements:[{name:"any"}],raw:"Array<any>"}},{name:"item",type:{name:"any"}}],return:{name:"Array",elements:[{name:"any"}],raw:"Array<any>"}}},description:""},getRootItems:{required:!0,flowType:{name:"signature",type:"function",raw:"(items: Array<any>) => Array<any>",signature:{arguments:[{name:"items",type:{name:"Array",elements:[{name:"any"}],raw:"Array<any>"}}],return:{name:"Array",elements:[{name:"any"}],raw:"Array<any>"}}},description:""},isSelectable:{required:!1,flowType:{name:"signature",type:"function",raw:"(item: any) => boolean",signature:{arguments:[{name:"item",type:{name:"any"}}],return:{name:"boolean"}}},description:"",defaultValue:{value:"undefined",computed:!0}},modal:{required:!1,flowType:{name:"signature",type:"object",raw:`{
  component: ComponentType<{}>,
  onSave: (item: any) => Promise<any>,
  props: any,
  state: any,
}`,signature:{properties:[{key:"component",value:{name:"ComponentType",elements:[{name:"signature",type:"object",raw:"{}",signature:{properties:[]}}],raw:"ComponentType<{}>",required:!0}},{key:"onSave",value:{name:"signature",type:"function",raw:"(item: any) => Promise<any>",signature:{arguments:[{name:"item",type:{name:"any"}}],return:{name:"Promise",elements:[{name:"any"}],raw:"Promise<any>"}},required:!0}},{key:"props",value:{name:"any",required:!0}},{key:"state",value:{name:"any",required:!0}}]}},description:"",defaultValue:{value:"undefined",computed:!0}},multiple:{required:!1,flowType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onClose:{required:!0,flowType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onSave:{required:!0,flowType:{name:"signature",type:"function",raw:"(selectedItems: Array<any>) => void",signature:{arguments:[{name:"selectedItems",type:{name:"Array",elements:[{name:"any"}],raw:"Array<any>"}}],return:{name:"void"}}},description:""},onSearch:{required:!0,flowType:{name:"signature",type:"function",raw:"(parentId: ?number, search: ?string) => any",signature:{arguments:[{name:"parentId",type:{name:"number",nullable:!0}},{name:"search",type:{name:"string",nullable:!0}}],return:{name:"any"}}},description:""},open:{required:!1,flowType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},renderItem:{required:!0,flowType:{name:"signature",type:"function",raw:"(item: any) => string | Element<any>",signature:{arguments:[{name:"item",type:{name:"any"}}],return:{name:"union",raw:"string | Element<any>",elements:[{name:"string"},{name:"Element",elements:[{name:"any"}],raw:"Element<any>"}]}}},description:""},selectedItems:{required:!1,flowType:{name:"Array",elements:[{name:"any"}],raw:"Array<any>"},description:"",defaultValue:{value:"[]",computed:!1}},showToggle:{required:!0,flowType:{name:"signature",type:"function",raw:"(item: any) => boolean",signature:{arguments:[{name:"item",type:{name:"any"}}],return:{name:"boolean"}}},description:""},title:{required:!1,flowType:{name:"string"},description:"",defaultValue:{value:"undefined",computed:!0}}}};const{action:c}=__STORYBOOK_MODULE_ACTIONS__,je={title:"Components/Semantic UI/AccordionSelector",component:I},R=[{id:1,first_name:"Liuka",last_name:"Cadwallader",title:"Database Administrator III",manager_id:null},{id:2,first_name:"Ray",last_name:"O'Sheerin",title:"Analog Circuit Design manager",manager_id:1},{id:3,first_name:"Marian",last_name:"Bassick",title:"Executive Secretary",manager_id:1},{id:4,first_name:"Maridel",last_name:"Cerman",title:"Technical Writer",manager_id:1},{id:5,first_name:"Reggie",last_name:"Keeton",title:"Administrative Assistant II",manager_id:1},{id:6,first_name:"Lev",last_name:"Twidle",title:"Senior Sales Associate",manager_id:1},{id:7,first_name:"Rees",last_name:"Scanlon",title:"Accountant IV",manager_id:5},{id:8,first_name:"Bondie",last_name:"Dreier",title:"GIS Technical Architect",manager_id:2},{id:9,first_name:"Modesty",last_name:"Aspy",title:"Administrative Officer",manager_id:4},{id:10,first_name:"Michal",last_name:"Luckham",title:"VP Marketing",manager_id:2},{id:11,first_name:"Clarie",last_name:"Ogley",title:"Cost Accountant",manager_id:2},{id:12,first_name:"Lidia",last_name:"Hammell",title:"Graphic Designer",manager_id:5},{id:13,first_name:"Rutherford",last_name:"De Matteis",title:"Assistant Manager",manager_id:3},{id:14,first_name:"Damaris",last_name:"Balls",title:"Software Engineer IV",manager_id:1},{id:15,first_name:"Marjy",last_name:"Tarrant",title:"Social Worker",manager_id:1},{id:16,first_name:"Arty",last_name:"Antunez",title:"Environmental Specialist",manager_id:4},{id:17,first_name:"Lemuel",last_name:"Huison",title:"Assistant Manager",manager_id:4},{id:18,first_name:"Kessiah",last_name:"Kuhnt",title:"Editor",manager_id:4},{id:19,first_name:"Gisele",last_name:"Coffey",title:"Payment Adjustment Coordinator",manager_id:4},{id:20,first_name:"Dorothee",last_name:"Pandey",title:"Help Desk Technician",manager_id:2},{id:21,first_name:"Irena",last_name:"Doog",title:"Payment Adjustment Coordinator",manager_id:5},{id:22,first_name:"Audre",last_name:"Sloper",title:"Recruiter",manager_id:3},{id:23,first_name:"Allie",last_name:"Byrch",title:"Media Manager III",manager_id:1},{id:24,first_name:"Eben",last_name:"Boddis",title:"Web Designer I",manager_id:3},{id:25,first_name:"Diane",last_name:"Gilbart",title:"Electrical Engineer",manager_id:3},{id:26,first_name:"Hewitt",last_name:"Kirgan",title:"Office Assistant IV",manager_id:5},{id:27,first_name:"Chadd",last_name:"Gartside",title:"Chief Design Engineer",manager_id:4},{id:28,first_name:"Lauryn",last_name:"Henriques",title:"Assistant Media Planner",manager_id:1},{id:29,first_name:"Cloris",last_name:"Tuiller",title:"Assistant Media Planner",manager_id:5},{id:30,first_name:"Nealson",last_name:"Patterson",title:"Accounting Assistant III",manager_id:4},{id:31,first_name:"Anstice",last_name:"Leveridge",title:"Budget/Accounting Analyst II",manager_id:2},{id:32,first_name:"Tobie",last_name:"Venus",title:"Tax Accountant",manager_id:1},{id:33,first_name:"Kerstin",last_name:"Fletham",title:"Research Nurse",manager_id:5},{id:34,first_name:"Mirabelle",last_name:"Eisenberg",title:"Internal Auditor",manager_id:2},{id:35,first_name:"Phillipp",last_name:"Mallia",title:"Senior Sales Associate",manager_id:4},{id:36,first_name:"Aurore",last_name:"Whysall",title:"Budget/Accounting Analyst II",manager_id:1},{id:37,first_name:"Hastie",last_name:"Cahalan",title:"Human Resources Assistant I",manager_id:5},{id:38,first_name:"Jim",last_name:"Chestle",title:"Analyst Programmer",manager_id:3},{id:39,first_name:"Nerti",last_name:"Witchell",title:"Statistician II",manager_id:2},{id:40,first_name:"Nerita",last_name:"Spincke",title:"Staff Accountant I",manager_id:5},{id:41,first_name:"Cathrin",last_name:"Bickerdike",title:"Financial Analyst",manager_id:3},{id:42,first_name:"Morten",last_name:"Eixenberger",title:"Associate Professor",manager_id:5},{id:43,first_name:"Alvie",last_name:"Toomey",title:"Staff Accountant I",manager_id:2},{id:44,first_name:"Lynne",last_name:"Lowndsbrough",title:"Analog Circuit Design manager",manager_id:3},{id:45,first_name:"Jdavie",last_name:"Zorzi",title:"Clinical Specialist",manager_id:1},{id:46,first_name:"Bibbye",last_name:"Watsam",title:"Data Coordiator",manager_id:5},{id:47,first_name:"Charmaine",last_name:"Hurd",title:"Business Systems Development Analyst",manager_id:2},{id:48,first_name:"Milzie",last_name:"Shorter",title:"Health Coach IV",manager_id:3},{id:49,first_name:"Walsh",last_name:"Vesque",title:"Nurse Practicioner",manager_id:1},{id:50,first_name:"Shelia",last_name:"Davidow",title:"GIS Technical Architect",manager_id:1}],s=()=>{const[p,e]=y.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(o,{content:"Open",onClick:()=>e(!0)}),t.jsx(I,{collectionName:"items",getChildItems:(a,n)=>h.where(a,{manager_id:n.id}),getRootItems:a=>h.where(a,{manager_id:null}),isSelectable:()=>!0,modal:{component:j,onSave:()=>(c("add save")(),Promise.resolve({}))},onClose:()=>{c("close")(),e(!1)},onSave:()=>(c("save")(),e(!1),Promise.resolve()),onSearch:(a,n)=>M.onNestedLoad({items:R,parentKey:"manager_id",parentId:a,search:n}),open:p,renderItem:a=>`${a.first_name} ${a.last_name} (${a.title})`,showToggle:()=>!0})]})};s.__docgenInfo={description:"",methods:[],displayName:"Default"};s.parameters={...s.parameters,docs:{...s.parameters?.docs,source:{originalSource:`() => {
  const [visible, setVisible] = useState(false);
  return <>
      <Button content='Open' onClick={() => setVisible(true)} />
      <AccordionSelector collectionName='items' getChildItems={(items, item) => _.where(items, {
      manager_id: item.id
    })} getRootItems={items => _.where(items, {
      manager_id: null
    })} isSelectable={() => true} modal={{
      component: AddModal,
      onSave: () => {
        action('add save')();
        return Promise.resolve({});
      }
    }} onClose={() => {
      action('close')();
      setVisible(false);
    }} onSave={() => {
      action('save')();
      setVisible(false);
      return Promise.resolve();
    }} onSearch={(parentId, search) => Api.onNestedLoad({
      items: data,
      parentKey: 'manager_id',
      parentId,
      search
    })} open={visible} renderItem={item => \`\${item.first_name} \${item.last_name} (\${item.title})\`} showToggle={() => true} />
    </>;
}`,...s.parameters?.docs?.source}}};const Me=["Default"];export{s as Default,Me as __namedExportsOrder,je as default};
