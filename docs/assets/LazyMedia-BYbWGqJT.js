import{j as i}from"./jsx-runtime-BTCK_S7S.js";import{r as n}from"./index-CBqU2yxZ.js";import{I as h}from"./Icon-2tEtgK8g.js";import{_ as g}from"./index-default-C_maRo4o.js";import{F as x}from"./FileInputButton-qbfOXRVs.js";import{i as b}from"./i18n-C8zWlANG.js";import{L as j}from"./LazyAudio-BiEA90M2.js";import{L}from"./LazyDocument-DOVXXgOt.js";import{L as U}from"./LazyImage-BiB2Uvja.js";import{L as C}from"./LazyVideo-DYSkHXXp.js";import{T as q}from"./Trans-Bk6mzQm0.js";const o={audio:"audio",image:"image",pdf:"application/pdf",video:"video"},M=["image/png","image/jpeg","image/gif","image/webp","image/bmp","video/m4v","video/mp4"],p=e=>{const[d,f]=n.useState(e.contentType||""),[c,y]=n.useState(e.name),[l,w]=n.useState(e.preview),[r,s]=n.useState(e.src),u=n.useMemo(()=>{let a;return c&&(a=c.split(".").pop(),a=a&&a.toUpperCase()),a},[c]),v=n.useCallback(a=>{const t=g.first(a);f(t.type),y(t.name),w(null),g.contains(M,t.type)||t.type.startsWith(o.audio)||t.type===o.pdf?s(URL.createObjectURL(t)):s(null),e.onUpload(t)},[e.onUpload]),m=n.useCallback(()=>i.jsxs(i.Fragment,{children:[e.onUpload&&i.jsx(x,{color:"orange",content:b.t("Common.buttons.upload"),icon:"cloud upload",onSelection:v}),e.children]})),T=n.useCallback(()=>d.startsWith(o.image)?i.jsx(U,{dimmable:e.dimmable,download:e.downloadUrl,preview:l,src:r,size:e.size,children:m()}):d.startsWith(o.video)?i.jsx(C,{dimmable:e.dimmable,download:e.downloadUrl,preview:l,src:r,size:e.size,children:m()}):d.startsWith(o.audio)?i.jsx(j,{dimmable:e.dimmable,download:e.downloadUrl,preview:l,src:r,size:e.size,children:m()}):i.jsx(L,{dimmable:e.dimmable,download:e.downloadUrl,pdf:d===o.pdf,preview:l,src:r,size:e.size,children:m()}),[d,l,r,e.dimmable,e.downloadUrl,e.size]),z=n.useCallback(()=>u?i.jsxs("div",{children:[i.jsx(h,{name:"info circle"}),i.jsx("span",{children:i.jsx(q,{components:{bold:i.jsx("strong",{})},default:"Your <bold>{{type}}</bold> has been received",i18n:b,i18nKey:"LazyMedia.messages.uploaded",values:{type:u}})})]}):null,[u]);return n.useEffect(()=>{e.contentType&&f(e.contentType),e.name&&y(e.name),e.preview&&w(e.preview),e.src?s(e.src):s(null)},[e.contentType,e.name,e.preview,e.src]),i.jsxs("div",{className:"lazy-media",children:[T(),z()]})};p.defaultProps={dimmable:!0,size:"medium"};p.__docgenInfo={description:"",methods:[],displayName:"LazyMedia",props:{children:{required:!1,flowType:{name:"Node"},description:""},contentType:{required:!0,flowType:{name:"string"},description:""},dimmable:{required:!1,flowType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},downloadUrl:{required:!1,flowType:{name:"string"},description:""},name:{required:!1,flowType:{name:"string"},description:""},onUpload:{required:!0,flowType:{name:"signature",type:"function",raw:"(file: File) => void",signature:{arguments:[{name:"file",type:{name:"File"}}],return:{name:"void"}}},description:""},preview:{required:!1,flowType:{name:"string"},description:""},size:{required:!1,flowType:{name:"string"},description:"",defaultValue:{value:"'medium'",computed:!1}},src:{required:!1,flowType:{name:"string"},description:""}}};export{p as L};
