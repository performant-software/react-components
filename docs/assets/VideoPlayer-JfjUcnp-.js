import{R as m,r as u,j as c}from"./iframe-DjZg4LCJ.js";import{i as P,o as R}from"./index.es28-DFmwjNuL.js";import{M as T}from"./Message-B3z4-ae0.js";import{_ as w}from"./extends-CCbyfPlC.js";import{_ as C}from"./inheritsLoose-1HkgTRWY.js";import{c as $,b as I,g as N,a as A,i as g,an as S}from"./getElementType-CAZyNRJI.js";import{M as _}from"./ModernAutoControlledComponent-BMzS269y.js";import{I as k}from"./Icon-tpspPEMM.js";import{M as E}from"./Modal-AR-Mrjw_.js";import{_ as U}from"./index-default-C0I3bBxV.js";import{i as x}from"./i18n-DkobdbHY.js";import{R as V}from"./Portal-ryYdJBeB.js";var v=function(a){C(l,a);function l(){for(var r,e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return r=a.call.apply(a,[this].concat(t))||this,r.handleClick=function(n){var i=r.props.onClick,s=r.state.active;i&&i(n,w({},r.props,{active:!0})),s||r.setState({active:!0})},r}var d=l.prototype;return d.getSrc=function(){var e=this.props,t=e.autoplay,o=t===void 0?!0:t,n=e.brandedUI,i=n===void 0?!1:n,s=e.color,p=s===void 0?"#444444":s,f=e.hd,y=f===void 0?!0:f,h=e.id,b=e.source,q=e.url;return b==="youtube"?["//www.youtube.com/embed/"+h,"?autohide=true","&amp;autoplay="+o,"&amp;color="+encodeURIComponent(p),"&amp;hq="+y,"&amp;jsapi=false","&amp;modestbranding="+i,"&amp;rel="+(i?0:1)].join(""):b==="vimeo"?["//player.vimeo.com/video/"+h,"?api=false","&amp;autoplay="+o,"&amp;byline=false","&amp;color="+encodeURIComponent(p),"&amp;portrait=false","&amp;title=false"].join(""):q},d.render=function(){var e=this.props,t=e.aspectRatio,o=e.className,n=e.icon,i=e.placeholder,s=this.state.active,p=$("ui",t,I(s,"active"),"embed",o),f=N(l,this.props),y=A(l,this.props),h=n!==void 0?n:"video play";return m.createElement(y,w({},f,{className:p,onClick:this.handleClick}),k.create(h,{autoGenerateKey:!1}),i&&m.createElement("img",{className:"placeholder",src:i}),this.renderEmbed())},d.renderEmbed=function(){var e=this.props,t=e.children,o=e.content,n=e.iframe,i=e.source,s=this.state.active;return s?g(t)?g(o)?m.createElement("div",{className:"embed"},S(g(n)?this.getSrc():n,{defaultProps:{allowFullScreen:!1,frameBorder:0,height:"100%",scrolling:"no",src:this.getSrc(),title:"Embedded content from "+i+".",width:"100%"},autoGenerateKey:!1})):m.createElement("div",{className:"embed"},o):m.createElement("div",{className:"embed"},t):null},l}(_);v.handledProps=["active","as","aspectRatio","autoplay","brandedUI","children","className","color","content","defaultActive","hd","icon","id","iframe","onClick","placeholder","source","url"];v.propTypes={};v.autoControlledProps=["active"];const M=a=>{const[l,d]=u.useState(),r=u.useMemo(()=>{const e=new Blob([l],{type:"text/plain"});return URL.createObjectURL(e)},[l]);return u.useEffect(()=>{fetch(a.src).then(e=>e.text()).then(d)},[a.src]),r?P.jsx("track",{...a,src:r}):null},j=a=>{const[l,d]=u.useState(!1),r=u.useRef();return u.useEffect(()=>{if(r&&r.current&&a.placeholderAlt){const e=r.current.querySelector(".placeholder");e&&e.setAttribute("alt",a.placeholderAlt)}},[r,a.placeholderAlt]),c.jsx(R.Consumer,{children:e=>c.jsx(E,{centered:!1,className:"video-player",closeIcon:!0,mountNode:e,onClose:a.onClose.bind(void 0),open:a.open,size:a.size,children:c.jsxs(E.Content,{children:[l&&c.jsx(T,{content:x.t("VideoPlayer.errors.path.content",{path:a.video}),header:x.t("VideoPlayer.errors.path.header"),icon:"exclamation circle"}),a.embedded&&c.jsx(V,{innerRef:r,children:c.jsx(v,{active:a.autoPlay,icon:a.icon,iframe:a.autoPlay?{allow:"autoplay"}:void 0,placeholder:a.placeholder,url:`${a.video}${a.autoPlay?"?autoplay=true":""}`})}),!a.embedded&&c.jsx("video",{autoPlay:a.autoPlay,controls:!0,onError:()=>d(!0),src:a.video,children:U.map(a.transcriptions,t=>c.jsx(M,{default:t.default,kind:"captions",label:t.label,srcLang:t.language,src:t.src},t.language))})]})})})};j.defaultProps={autoPlay:!1,embedded:!1,icon:"right circle arrow",size:"small"};j.__docgenInfo={description:"",methods:[],displayName:"VideoPlayer",props:{autoPlay:{required:!1,flowType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},embedded:{required:!1,flowType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},icon:{required:!1,flowType:{name:"union",raw:"string | Element<any>",elements:[{name:"string"},{name:"Element",elements:[{name:"any"}],raw:"Element<any>"}]},description:"",defaultValue:{value:"'right circle arrow'",computed:!1}},onClose:{required:!0,flowType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},open:{required:!0,flowType:{name:"boolean"},description:""},placeholder:{required:!1,flowType:{name:"string",nullable:!0},description:""},placeholderAlt:{required:!1,flowType:{name:"string"},description:""},size:{required:!1,flowType:{name:"string"},description:"",defaultValue:{value:"'small'",computed:!1}},transcriptions:{required:!1,flowType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  default?: boolean,
  label: string,
  language: string,
  src: string
}`,signature:{properties:[{key:"default",value:{name:"boolean",required:!1}},{key:"label",value:{name:"string",required:!0}},{key:"language",value:{name:"string",required:!0}},{key:"src",value:{name:"string",required:!0}}]}}],raw:"Array<Transcription>"},description:""},video:{required:!0,flowType:{name:"string"},description:""}}};export{j as V};
