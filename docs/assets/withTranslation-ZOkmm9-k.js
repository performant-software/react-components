import{_ as F}from"./defineProperty-BYUWwell.js";import{g as z}from"./_commonjsHelpers-BosuxZz1.js";import{r as K}from"./slicedToArray-w19uMldN.js";import{_ as M}from"./objectWithoutProperties--RY0eV0u.js";import{r as o}from"./index-CBqU2yxZ.js";import{I as U,R as $,w as D,g as q,h as J,l as T,a as L,b as W}from"./utils-C_6BAdFC.js";var Y=K();const C=z(Y);function _(a,t){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),n.push.apply(n,r)}return n}function x(a){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(r){F(a,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(n,r))})}return a}var B=function(t,n){var r=o.useRef();return o.useEffect(function(){r.current=n?r.current:t},[t,n]),r.current};function G(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.i18n,r=o.useContext(U)||{},s=r.i18n,h=r.defaultNS,e=n||s||L();if(e&&!e.reportNamespaces&&(e.reportNamespaces=new $),!e){D("You will need to pass in an i18next instance by using initReactI18next");var f=function(l){return Array.isArray(l)?l[l.length-1]:l},u=[f,{},!1];return u.t=f,u.i18n={},u.ready=!1,u}e.options.react&&e.options.react.wait!==void 0&&D("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var d=x(x(x({},q()),e.options.react),t),v=d.useSuspense,O=d.keyPrefix,i=a||h||e.options&&e.options.defaultNS;i=typeof i=="string"?[i]:i||["translation"],e.reportNamespaces.addUsedNamespaces&&e.reportNamespaces.addUsedNamespaces(i);var m=(e.isInitialized||e.initializedStoreOnce)&&i.every(function(p){return J(p,e,d)});function c(){return e.getFixedT(null,d.nsMode==="fallback"?i:i[0],O)}var k=o.useState(c),R=C(k,2),E=R[0],g=R[1],j=i.join(),I=B(j),w=o.useRef(!0);o.useEffect(function(){var p=d.bindI18n,l=d.bindI18nStore;w.current=!0,!m&&!v&&T(e,i,function(){w.current&&g(c)}),m&&I&&I!==j&&w.current&&g(c);function b(){w.current&&g(c)}return p&&e&&e.on(p,b),l&&e&&e.store.on(l,b),function(){w.current=!1,p&&e&&p.split(" ").forEach(function(S){return e.off(S,b)}),l&&e&&l.split(" ").forEach(function(S){return e.store.off(S,b)})}},[e,j]);var N=o.useRef(!0);o.useEffect(function(){w.current&&!N.current&&g(c),N.current=!1},[e,O]);var y=[E,e,m];if(y.t=E,y.i18n=e,y.ready=m,m||!m&&!v)return y;throw new Promise(function(p){T(e,i,function(){p()})})}var H=["forwardedRef"];function A(a,t){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),n.push.apply(n,r)}return n}function P(a){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?A(Object(n),!0).forEach(function(r){F(a,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(n,r))})}return a}function te(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function(r){function s(e){var f=e.forwardedRef,u=M(e,H),d=G(a,P(P({},u),{},{keyPrefix:t.keyPrefix})),v=C(d,3),O=v[0],i=v[1],m=v[2],c=P(P({},u),{},{t:O,i18n:i,tReady:m});return t.withRef&&f?c.ref=f:!t.withRef&&f&&(c.forwardedRef=f),o.createElement(r,c)}s.displayName="withI18nextTranslation(".concat(W(r),")"),s.WrappedComponent=r;var h=function(f,u){return o.createElement(s,Object.assign({},f,{forwardedRef:u}))};return t.withRef?o.forwardRef(h):s}}export{te as w};
