import{R as u,r as d,j as c}from"./iframe-vd5jUnmh.js";import{H as f,q as j}from"./index-CgIZ2imf.js";import{_ as $}from"./index-default-B8-H6N8J.js";import{M as I}from"./MediaGallery-C5AwSidP.js";import{R as L}from"./RelatedList-CAsKU1Ju.js";const N=(e,t="none")=>{if(!e)return null;if(typeof e=="string")return[e];if(!e[t]){const r=Object.getOwnPropertyNames(e);if(r.length>0)return e[r[0]]}return!e[t]||!Array.isArray(e[t])?null:e[t]},k=(e,t="none",r=", ")=>{const a=N(e,t);return Array.isArray(a)?a.join(`${r}`):a};function T(e,t){const r=Object.keys(e).filter(n=>t.includes(n)?null:n),a=new Object;return r.forEach(n=>{a[n]=e[n]}),a}const R=209,H={colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:`hsl(${R} 100% 38.2%)`,accentMuted:`hsl(${R} 80% 61.8%)`,accentAlt:`hsl(${R} 80% 30%)`,secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},F={xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"},{styled:s,css:V,keyframes:B,createTheme:G}=j({theme:H,media:F});s("span",{});const P=(e,t="200,",r="full")=>{Array.isArray(e)&&(e=e[0]);const{id:a,service:n}=e;let o;if(!n)return a;if(Array.isArray(e.service)&&e.service.length>0&&(o=n[0]),o){if(o["@id"])return`${o["@id"]}/${r}/${t}/0/default.jpg`;if(o.id)return`${o.id}/${r}/${t}/0/default.jpg`}},A=s("img",{objectFit:"cover"}),C=e=>{const t=d.useRef(null),{contentResource:r,altAsLabel:a,region:n="full"}=e;let o;a&&(o=k(a));const b=T(e,["contentResource","altAsLabel"]),{type:m,id:l,width:g=200,height:w=200,duration:p}=r;d.useEffect(()=>{if(!l&&!t.current||["Image"].includes(m)||!l.includes("m3u8"))return;const i=new f;return t.current&&(i.attachMedia(t.current),i.on(f.Events.MEDIA_ATTACHED,function(){i.loadSource(l)})),i.on(f.Events.ERROR,function(h,x){if(x.fatal)switch(x.type){case f.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${h} network error encountered, try to recover`),i.startLoad();break;case f.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${h} media error encountered, try to recover`),i.recoverMediaError();break;default:i.destroy();break}}),()=>{i&&(i.detachMedia(),i.destroy())}},[l,m]);const y=d.useCallback(()=>{if(!t.current)return;let i=0,h=30;if(p&&(h=p),!l.split("#t=")&&p&&(i=p*.1),l.split("#t=").pop()){const E=l.split("#t=").pop();E&&(i=parseInt(E.split(",")[0]))}const x=t.current;x.autoplay=!0,x.currentTime=i,setTimeout(()=>y(),h*1e3)},[p,l]);d.useEffect(()=>y(),[y]);const v=P(r,`${g},${w}`,n);switch(m){case"Image":return u.createElement(A,{as:"img",alt:o,css:{width:g,height:w},key:l,src:v,...b});case"Video":return u.createElement(A,{as:"video",css:{width:g,height:w},disablePictureInPicture:!0,key:l,loop:!0,muted:!0,onPause:y,ref:t,src:l});default:return console.warn(`Resource type: ${m} is not valid or not yet supported in Primitives.`),u.createElement(u.Fragment,null)}};s("a",{});d.createContext(void 0);s("span",{});s("span",{});s("dl",{});s("li",{});s("ul",{});s("li",{});s("ul",{});s("dl",{});s("li",{});s("ul",{});const _=e=>{const{thumbnail:t,region:r}=e,a=T(e,["thumbnail"]);return u.createElement(u.Fragment,null,t&&t.map(n=>u.createElement(C,{contentResource:n,key:n.id,region:r,...a})))},q=80,O=80,M=e=>{const[t,r]=d.useState(),a=d.useCallback(({id:n,label:{en:o},thumbnail:b})=>c.jsxs("div",{className:"flex flex-col",children:[c.jsx(_,{"aria-label":o,className:"rounded shadow cursor-pointer",onClick:()=>r(n),thumbnail:$.map(b,m=>({...m,width:e.thumbnailWidth,height:e.thumbnailHeight}))}),c.jsx("div",{className:"text-sm whitespace-nowrap",children:o})]}),[e.thumbnailHeight,e.thumbnailWidth]);return c.jsxs(c.Fragment,{children:[c.jsx(L,{className:e.className,collectionName:"items",emptyMessage:e.emptyMessage,itemsPerRow:e.itemsPerRow,onLoad:e.onLoad,moreLabel:e.moreLabel,renderItem:a}),t&&c.jsx(I,{manifestUrl:t,onClose:()=>r(null)})]})};M.defaultProps={thumbnailHeight:q,thumbnailWidth:O};M.__docgenInfo={description:"This component renders the related Core Data media records as well as a gallery viewer.",methods:[],displayName:"RelatedMedia",props:{className:{required:!1,flowType:{name:"string"},description:"Name of the class(es) to apply to the <ul> element."},emptyMessage:{required:!1,flowType:{name:"string"},description:"A message to display when no records are returned from the API."},itemsPerRow:{required:!1,flowType:{name:"number"},description:"Number of items to display in each row of the grid."},moreLabel:{required:!0,flowType:{name:"string"},description:'The label to display on the "Show More" button.'},onLoad:{required:!0,flowType:{name:"signature",type:"function",raw:"() => any",signature:{arguments:[],return:{name:"any"}}},description:"Callback fired when the component is mounted to fetch the data."},thumbnailHeight:{required:!1,flowType:{name:"number"},description:"Media thumbnail height.",defaultValue:{value:"80",computed:!1}},thumbnailWidth:{required:!1,flowType:{name:"number"},description:"Media thumbnail width.",defaultValue:{value:"80",computed:!1}}}};export{M as R};
