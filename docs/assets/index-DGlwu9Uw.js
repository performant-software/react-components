import{r as i}from"./index-C0dDX-lL.js";import{r as V}from"./index-DOYXiIEK.js";import{j as E}from"./jsx-runtime-D9TvR9R2.js";function y(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function z(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function x(...e){return t=>e.forEach(n=>z(n,t))}function S(...e){return i.useCallback(x(...e),e)}var N=i.forwardRef((e,t)=>{const{children:n,...r}=e,s=i.Children.toArray(n),o=s.find(K);if(o){const c=o.props.children,a=s.map(f=>f===o?i.Children.count(c)>1?i.Children.only(null):i.isValidElement(c)?c.props.children:null:f);return E.jsx(m,{...r,ref:t,children:i.isValidElement(c)?i.cloneElement(c,void 0,a):null})}return E.jsx(m,{...r,ref:t,children:n})});N.displayName="Slot";var m=i.forwardRef((e,t)=>{const{children:n,...r}=e;if(i.isValidElement(n)){const s=Y(n);return i.cloneElement(n,{...X(r,n.props),ref:t?x(t,s):s})}return i.Children.count(n)>1?i.Children.only(null):null});m.displayName="SlotClone";var M=({children:e})=>E.jsx(E.Fragment,{children:e});function K(e){return i.isValidElement(e)&&e.type===M}function X(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...a)=>{o(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function Y(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Z=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],T=Z.reduce((e,t)=>{const n=i.forwardRef((r,s)=>{const{asChild:o,...c}=r,a=o?N:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(a,{...c,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function $(e,t){e&&V.flushSync(()=>e.dispatchEvent(t))}function C(e){const t=i.useRef(e);return i.useEffect(()=>{t.current=e}),i.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function q(e,t=globalThis==null?void 0:globalThis.document){const n=C(e);i.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var G="DismissableLayer",b="dismissableLayer.update",J="dismissableLayer.pointerDownOutside",Q="dismissableLayer.focusOutside",R,W=i.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),H=i.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:c,onDismiss:a,...f}=e,l=i.useContext(W),[d,A]=i.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,j]=i.useState({}),F=S(t,u=>A(u)),P=Array.from(l.layers),[k]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),I=P.indexOf(k),D=d?P.indexOf(d):-1,_=l.layersWithOutsidePointerEventsDisabled.size>0,g=D>=I,U=ne(u=>{const v=u.target,O=[...l.branches].some(h=>h.contains(v));!g||O||(s==null||s(u),c==null||c(u),u.defaultPrevented||a==null||a())},p),w=re(u=>{const v=u.target;[...l.branches].some(h=>h.contains(v))||(o==null||o(u),c==null||c(u),u.defaultPrevented||a==null||a())},p);return q(u=>{D===l.layers.size-1&&(r==null||r(u),!u.defaultPrevented&&a&&(u.preventDefault(),a()))},p),i.useEffect(()=>{if(d)return n&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(R=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(d)),l.layers.add(d),L(),()=>{n&&l.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=R)}},[d,p,n,l]),i.useEffect(()=>()=>{d&&(l.layers.delete(d),l.layersWithOutsidePointerEventsDisabled.delete(d),L())},[d,l]),i.useEffect(()=>{const u=()=>j({});return document.addEventListener(b,u),()=>document.removeEventListener(b,u)},[]),E.jsx(T.div,{...f,ref:F,style:{pointerEvents:_?g?"auto":"none":void 0,...e.style},onFocusCapture:y(e.onFocusCapture,w.onFocusCapture),onBlurCapture:y(e.onBlurCapture,w.onBlurCapture),onPointerDownCapture:y(e.onPointerDownCapture,U.onPointerDownCapture)})});H.displayName=G;var ee="DismissableLayerBranch",te=i.forwardRef((e,t)=>{const n=i.useContext(W),r=i.useRef(null),s=S(t,r);return i.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),E.jsx(T.div,{...e,ref:s})});te.displayName=ee;function ne(e,t=globalThis==null?void 0:globalThis.document){const n=C(e),r=i.useRef(!1),s=i.useRef(()=>{});return i.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let f=function(){B(J,n,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=f,t.addEventListener("click",s.current,{once:!0})):f()}else t.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function re(e,t=globalThis==null?void 0:globalThis.document){const n=C(e),r=i.useRef(!1);return i.useEffect(()=>{const s=o=>{o.target&&!r.current&&B(Q,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function L(){const e=new CustomEvent(b);document.dispatchEvent(e)}function B(e,t,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?$(s,o):s.dispatchEvent(o)}export{H as D};
