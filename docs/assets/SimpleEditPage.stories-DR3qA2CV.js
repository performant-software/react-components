import{j as r}from"./jsx-runtime-D9TvR9R2.js";import{a as A}from"./chunk-WFFRPTHA-B2vgThZf.js";import{r as l,R as S}from"./index-C0dDX-lL.js";import{F as j}from"./Form-cOZUQdvM.js";import"./index.es34-DPdoOAcA.js";import{m as z}from"./index.es25-xvj8T6Jl.js";import{G as h}from"./Grid-gE1yEjqh.js";import{M as v}from"./Menu-UzpVjXjU.js";import{M as R}from"./Message-BUccNRJp.js";import{B as N}from"./Button-Dcib8V--.js";import{_ as B}from"./extends-CCbyfPlC.js";import{_ as H}from"./inheritsLoose-1HkgTRWY.js";import{_ as k,m as $,o as V,n as U}from"./getElementType-C_4y_n4F.js";import{b as w,a as y,i as E,R as G}from"./Portal-CKYxdKwP.js";import{_ as x}from"./index-default-C_maRo4o.js";import{i as g}from"./i18n-C9xJ7SCg.js";import{T as I}from"./Toaster-tYXYYhON.js";import"./preview-errors-CzpZmerH.js";import"./index-CKJfshIT.js";import"./v4-D8aEg3BZ.js";import"./_commonjsHelpers-BosuxZz1.js";import"./Label-BqnFaqey.js";import"./ModernAutoControlledComponent-CBEnGjal.js";import"./assertThisInitialized-B9jnkVVz.js";import"./Icon-BGzIEILD.js";import"./includes-BAV9TYTx.js";import"./toFinite-DWd2HYc9.js";import"./forEach-Bj9nU5MO.js";import"./Dimmer-kmE_IUk6.js";import"./Checkbox-Bi1MrC0t.js";import"./_baseSet-N8oZ1kqS.js";import"./_baseAssignValue-oMV-Qdk1.js";import"./Dropdown-CChVlGq2.js";import"./map-Dr4OE-Ab.js";import"./without-5b9zAUWg.js";import"./isArrayLikeObject-BDKOwBZt.js";import"./isEmpty-D4udnfVx.js";import"./deburr-ClVont3z.js";import"./index-C2Sldg7a.js";import"./_arrayReduce-CrxnWFSq.js";import"./keyboardKey-OMDgGVm3.js";import"./filter-BXgalVMq.js";import"./Input-CEHVpxQU.js";import"./index-DOYXiIEK.js";import"./iframe-YvMIoTGN.js";import"../sb-preview/runtime.js";import"./setPrototypeOf-DgZC2w_0.js";import"./objectWithoutPropertiesLoose-1QL-frMM.js";import"./i18next-CwS9wMM1.js";import"./toPropertyKey-BcUJYDQU.js";import"./defineProperty-DcNpp85p.js";import"./inherits-CWPG5jll.js";import"./createClass-CV9nCQMI.js";import"./getPrototypeOf-BYVhAdwF.js";import"./Transition-Bkcp4SUV.js";var T=function(o){H(m,o);function m(){for(var t,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t=o.call.apply(o,[this].concat(s))||this,t.state={active:!0,sticky:!1},t.stickyRef=l.createRef(),t.triggerRef=l.createRef(),t.addListeners=function(e){var i=w(e)?e.current:e;i&&(y.sub("resize",t.handleUpdate,{target:i}),y.sub("scroll",t.handleUpdate,{target:i}))},t.removeListeners=function(e){var i=w(e)?e.current:e;i&&(y.unsub("resize",t.handleUpdate,{target:i}),y.unsub("scroll",t.handleUpdate,{target:i}))},t.update=function(e){var i=t.state.pushing;if(t.ticking=!1,t.assignRects(),i)return t.didReachStartingPoint()?t.stickToContextTop(e):t.didTouchScreenBottom()?t.stickToScreenBottom(e):t.stickToContextBottom(e);if(t.isOversized()){if(t.contextRect.top>0)return t.stickToContextTop(e);if(t.contextRect.bottom<window.innerHeight)return t.stickToContextBottom(e)}return t.didTouchScreenTop()?t.didReachContextBottom()?t.stickToContextBottom(e):t.stickToScreenTop(e):t.stickToContextTop(e)},t.handleUpdate=function(e){t.ticking||(t.ticking=!0,t.frameId=requestAnimationFrame(function(){return t.update(e)}))},t.assignRects=function(){var e=t.props.context,i=w(e)?e.current:e||document.body;t.triggerRect=t.triggerRef.current.getBoundingClientRect(),t.contextRect=i.getBoundingClientRect(),t.stickyRect=t.stickyRef.current.getBoundingClientRect()},t.didReachContextBottom=function(){var e=t.props.offset;return t.stickyRect.height+e>=t.contextRect.bottom},t.didReachStartingPoint=function(){return t.stickyRect.top<=t.triggerRect.top},t.didTouchScreenTop=function(){return t.triggerRect.top<t.props.offset},t.didTouchScreenBottom=function(){var e=t.props.bottomOffset;return t.contextRect.bottom+e>window.innerHeight},t.isOversized=function(){return t.stickyRect.height>window.innerHeight},t.pushing=function(e){var i=t.props.pushing;i&&t.setState({pushing:e})},t.stick=function(e,i){t.setState({bound:i,sticky:!0}),k(t.props,"onStick",e,t.props)},t.unstick=function(e,i){t.setState({bound:i,sticky:!1}),k(t.props,"onUnstick",e,t.props)},t.stickToContextBottom=function(e){k(t.props,"onBottom",e,t.props),t.stick(e,!0),t.pushing(!0)},t.stickToContextTop=function(e){k(t.props,"onTop",e,t.props),t.unstick(e,!1),t.pushing(!1)},t.stickToScreenBottom=function(e){var i=t.props.bottomOffset;t.stick(e,!1),t.setState({bottom:i,top:null})},t.stickToScreenTop=function(e){var i=t.props.offset;t.stick(e,!1),t.setState({top:i,bottom:null})},t}var f=m.prototype;return f.componentDidMount=function(){if(E()){var n=this.state.active;n&&(this.handleUpdate(),this.addListeners(this.props.scrollContext))}},m.getDerivedStateFromProps=function(n,s){return s.active!==n.active&&!n.active?{active:n.active,sticky:!1}:{active:n.active}},f.componentDidUpdate=function(n,s){if(s.active===this.state.active){n.scrollContext!==this.props.scrollContext&&(this.removeListeners(n.scrollContext),this.addListeners(this.props.scrollContext));return}if(this.state.active){this.handleUpdate(),this.addListeners(this.props.scrollContext);return}this.removeListeners(n.scrollContext)},f.componentWillUnmount=function(){if(E()){var n=this.state.active;n&&(this.removeListeners(this.props.scrollContext),cancelAnimationFrame(this.frameId))}},f.computeStyle=function(){var n=this.props.styleElement,s=this.state,a=s.bottom,e=s.bound,i=s.sticky,u=s.top;return i?B({bottom:e?0:a,top:e?void 0:u,width:this.triggerRect.width},n):n},f.render=function(){var n=this.props,s=n.children,a=n.className,e=this.state,i=e.bottom,u=e.bound,p=e.sticky,c=$(m,this.props),d=V(m,this.props),F=U(p&&"ui",p&&"stuck-container",p&&(u?"bound-container":"fixed-container"),a),q=U("ui",p&&(u?"bound bottom":"fixed"),p&&!u&&(i===null?"top":"bottom"),"sticky"),L=p&&this.stickyRect?{height:this.stickyRect.height}:{};return S.createElement(d,B({},c,{className:F}),S.createElement("div",{ref:this.triggerRef,style:L}),S.createElement("div",{className:q,ref:this.stickyRef,style:this.computeStyle()},s))},m}(l.Component);T.handledProps=["active","as","bottomOffset","children","className","context","offset","onBottom","onStick","onTop","onUnstick","pushing","scrollContext","styleElement"];T.propTypes={};T.defaultProps={active:!0,bottomOffset:0,offset:0,scrollContext:E()?window:null};const C=o=>{const[m,f]=l.useState(),[t,n]=l.useState(!1),s=l.useRef(),a=z.findByType(o.children,C.Tab),e=l.useMemo(()=>x.find(a,c=>c.key===m),[m,a]),i=l.useMemo(()=>{const c=["simple-edit-page"];return o.className&&c.push(o.className),c.join(" ")},[o.className]),u=l.useCallback(c=>{const{key:d}=c;f(d),o.onTabClick&&o.onTabClick(d)},[o.onTabClick]),p=l.useCallback(()=>{const c=r.jsxs(v,{...o.menuProps,children:[(a==null?void 0:a.length)>1&&x.map(a,d=>r.jsx(v.Item,{active:d.key===m,disabled:o.loading||o.saving,name:d.props.name,onClick:()=>u(d)},d.key)),r.jsx(v.Menu,{position:"right",children:r.jsxs(v.Item,{className:"button-container",children:[o.editable&&r.jsx(N,{content:g.t("Common.buttons.save"),disabled:o.loading||o.saving,onClick:o.onSave,primary:!0}),r.jsx(N,{basic:!0,content:g.t("Common.buttons.cancel"),disabled:o.loading||o.saving,onClick:o.onCancel})]})})]});return o.stickyMenu?r.jsx(T,{context:s,offset:20,children:c}):c});return l.useEffect(()=>{let c;o.defaultTab?c={key:o.defaultTab}:c=x.first(a),c&&u(c),o.saved&&n(!0)},[]),r.jsxs(h,{className:i,children:[r.jsx(h.Row,{children:r.jsx(h.Column,{children:p()})}),r.jsx(h.Row,{children:r.jsx(h.Column,{children:r.jsx(G,{innerRef:s,children:r.jsxs("div",{children:[r.jsxs(j,{error:!x.isEmpty(o.errors),loading:o.loading||o.saving,noValidate:!0,children:[r.jsx(R,{error:!0,header:g.t("Common.errors.save"),list:o.errors}),e&&e.props.children]}),t&&r.jsxs(I,{onDismiss:()=>n(!1),type:I.MessageTypes.positive,children:[r.jsx(R.Header,{content:g.t("Common.messages.save.header")}),r.jsx(R.Content,{content:g.t("Common.messages.save.content")})]})]})})})})]})};C.defaultProps={editable:!0,menuProps:{pointing:!0,secondary:!0}};const O=o=>o.children;O.displayName="Tab";const W=Object.assign(C,{Tab:O}),P=W;C.__docgenInfo={description:"This component can be used to render the layout for a form/page with edit capabilities. Use in conjunction with the\n`withEditPage` higher-order component for a fully fledged record editing environment.",methods:[],displayName:"SimpleEditPage",props:{className:{required:!1,flowType:{name:"string"},description:"Additional class attribute to apply to the root DOM element."},defaultTab:{required:!1,flowType:{name:"string"},description:"Sets the default visible tab. If no value is provided, the first tab will be visible."},editable:{required:!1,flowType:{name:"boolean"},description:"If `false`, the save button will be hidden.",defaultValue:{value:"true",computed:!1}},menuProps:{required:!1,flowType:{name:"MenuProps"},description:"Props to provide to the Semantic UI `Menu` component.",defaultValue:{value:`{
  pointing: true,
  secondary: true
}`,computed:!1}},onCancel:{required:!0,flowType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:'Callback fired when the "Cancel" button is clicked.'},onTabClick:{required:!1,flowType:{name:"signature",type:"function",raw:"(tab: string) => void",signature:{arguments:[{name:"tab",type:{name:"string"}}],return:{name:"void"}}},description:`Callback fired when a tab is clicked.

@param tab`},saved:{required:!1,flowType:{name:"boolean"},description:"If `true`, the saved toaster will display when the component is mounted."},stickyMenu:{required:!1,flowType:{name:"boolean"},description:'If `true`, the tabs menu will "stick" to the top of the window.'}}};const Kt={title:"Components/Semantic UI/SimpleEditPage",component:P},b=()=>r.jsx(P,{menuProps:{text:!0},onCancel:A("cancel"),children:r.jsxs(P.Tab,{children:[r.jsx(j.Input,{autoFocus:!0,label:"Name"}),r.jsx(j.Input,{label:"Address"})]},"default")});b.__docgenInfo={description:"",methods:[],displayName:"Default"};var M,_,D;b.parameters={...b.parameters,docs:{...(M=b.parameters)==null?void 0:M.docs,source:{originalSource:`() => <SimpleEditPage menuProps={{
  text: true
}} onCancel={action('cancel')}>
    <SimpleEditPage.Tab key='default'>
      <Form.Input autoFocus label='Name' />
      <Form.Input label='Address' />
    </SimpleEditPage.Tab>
  </SimpleEditPage>`,...(D=(_=b.parameters)==null?void 0:_.docs)==null?void 0:D.source}}};const Qt=["Default"];export{b as Default,Qt as __namedExportsOrder,Kt as default};
