import{_ as E}from"./extends-CCbyfPlC.js";import{r as n}from"./index-C0dDX-lL.js";import{a as g,$ as T,c as S,d as y}from"./index-BbtE80dZ.js";import{$ as I}from"./index-CW-4Sh1t.js";import{r as _}from"./index-DOYXiIEK.js";function w(e){const t=n.useRef({value:e,previous:e});return n.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}const C=globalThis!=null&&globalThis.document?n.useLayoutEffect:()=>{};function z(e){const[t,o]=n.useState(void 0);return C(()=>{if(e){o({width:e.offsetWidth,height:e.offsetHeight});const c=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let f,u;if("borderBoxSize"in i){const s=i.borderBoxSize,r=Array.isArray(s)?s[0]:s;f=r.inlineSize,u=r.blockSize}else f=e.offsetWidth,u=e.offsetHeight;o({width:f,height:u})});return c.observe(e,{box:"border-box"}),()=>c.unobserve(e)}else o(void 0)},[e]),t}function U(e,t){return n.useReducer((o,c)=>{const a=t[o][c];return a??o},e)}const P=e=>{const{present:t,children:o}=e,c=L(t),a=typeof o=="function"?o({present:c.isPresent}):n.Children.only(o),i=g(c.ref,a.ref);return typeof o=="function"||c.isPresent?n.cloneElement(a,{ref:i}):null};P.displayName="Presence";function L(e){const[t,o]=n.useState(),c=n.useRef({}),a=n.useRef(e),i=n.useRef("none"),f=e?"mounted":"unmounted",[u,s]=U(f,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return n.useEffect(()=>{const r=N(c.current);i.current=u==="mounted"?r:"none"},[u]),C(()=>{const r=c.current,b=a.current;if(b!==e){const $=i.current,p=N(r);e?s("MOUNT"):p==="none"||(r==null?void 0:r.display)==="none"?s("UNMOUNT"):s(b&&$!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,s]),C(()=>{if(t){const r=d=>{const p=N(c.current).includes(d.animationName);d.target===t&&p&&_.flushSync(()=>s("ANIMATION_END"))},b=d=>{d.target===t&&(i.current=N(c.current))};return t.addEventListener("animationstart",b),t.addEventListener("animationcancel",r),t.addEventListener("animationend",r),()=>{t.removeEventListener("animationstart",b),t.removeEventListener("animationcancel",r),t.removeEventListener("animationend",r)}}else s("ANIMATION_END")},[t,s]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:n.useCallback(r=>{r&&(c.current=getComputedStyle(r)),o(r)},[])}}function N(e){return(e==null?void 0:e.animationName)||"none"}const M="Checkbox",[D,V]=T(M),[B,q]=D(M),H=n.forwardRef((e,t)=>{const{__scopeCheckbox:o,name:c,checked:a,defaultChecked:i,required:f,disabled:u,value:s="on",onCheckedChange:r,...b}=e,[d,$]=n.useState(null),p=g(t,l=>$(l)),x=n.useRef(!1),A=d?!!d.closest("form"):!0,[h=!1,k]=I({prop:a,defaultProp:i,onChange:r}),R=n.useRef(h);return n.useEffect(()=>{const l=d==null?void 0:d.form;if(l){const v=()=>k(R.current);return l.addEventListener("reset",v),()=>l.removeEventListener("reset",v)}},[d,k]),n.createElement(B,{scope:o,state:h,disabled:u},n.createElement(S.button,E({type:"button",role:"checkbox","aria-checked":m(h)?"mixed":h,"aria-required":f,"data-state":O(h),"data-disabled":u?"":void 0,disabled:u,value:s},b,{ref:p,onKeyDown:y(e.onKeyDown,l=>{l.key==="Enter"&&l.preventDefault()}),onClick:y(e.onClick,l=>{k(v=>m(v)?!0:!v),A&&(x.current=l.isPropagationStopped(),x.current||l.stopPropagation())})})),A&&n.createElement(X,{control:d,bubbles:!x.current,name:c,value:s,checked:h,required:f,disabled:u,style:{transform:"translateX(-100%)"}}))}),K="CheckboxIndicator",W=n.forwardRef((e,t)=>{const{__scopeCheckbox:o,forceMount:c,...a}=e,i=q(K,o);return n.createElement(P,{present:c||m(i.state)||i.state===!0},n.createElement(S.span,E({"data-state":O(i.state),"data-disabled":i.disabled?"":void 0},a,{ref:t,style:{pointerEvents:"none",...e.style}})))}),X=e=>{const{control:t,checked:o,bubbles:c=!0,...a}=e,i=n.useRef(null),f=w(o),u=z(t);return n.useEffect(()=>{const s=i.current,r=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(r,"checked").set;if(f!==o&&d){const $=new Event("click",{bubbles:c});s.indeterminate=m(o),d.call(s,m(o)?!1:o),s.dispatchEvent($)}},[f,o,c]),n.createElement("input",E({type:"checkbox","aria-hidden":!0,defaultChecked:m(o)?!1:o},a,{tabIndex:-1,ref:i,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function m(e){return e==="indeterminate"}function O(e){return m(e)?"indeterminate":e?"checked":"unchecked"}const Y=H,Z=W;export{Y as $,Z as a};
