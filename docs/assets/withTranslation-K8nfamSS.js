import{_ as A}from"./defineProperty-DcNpp85p.js";import{_ as C}from"./slicedToArray-DCh25bEK.js";import{_ as z}from"./objectWithoutProperties--RY0eV0u.js";import{r as o}from"./index-C0dDX-lL.js";import{I as K,R as M,w as _,g as U,h as $,l as D,a as J,b as L}from"./utils-Dtgl4Pf8.js";function T(a,t){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),n.push.apply(n,r)}return n}function x(a){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T(Object(n),!0).forEach(function(r){A(a,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(n,r))})}return a}var W=function(t,n){var r=o.useRef();return o.useEffect(function(){r.current=n?r.current:t},[t,n]),r.current};function Y(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.i18n,r=o.useContext(K)||{},s=r.i18n,h=r.defaultNS,e=n||s||J();if(e&&!e.reportNamespaces&&(e.reportNamespaces=new M),!e){_("You will need to pass in an i18next instance by using initReactI18next");var f=function(l){return Array.isArray(l)?l[l.length-1]:l},u=[f,{},!1];return u.t=f,u.i18n={},u.ready=!1,u}e.options.react&&e.options.react.wait!==void 0&&_("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var d=x(x(x({},U()),e.options.react),t),v=d.useSuspense,y=d.keyPrefix,i=a||h||e.options&&e.options.defaultNS;i=typeof i=="string"?[i]:i||["translation"],e.reportNamespaces.addUsedNamespaces&&e.reportNamespaces.addUsedNamespaces(i);var m=(e.isInitialized||e.initializedStoreOnce)&&i.every(function(p){return $(p,e,d)});function c(){return e.getFixedT(null,d.nsMode==="fallback"?i:i[0],y)}var k=o.useState(c),R=C(k,2),E=R[0],b=R[1],j=i.join(),I=W(j),w=o.useRef(!0);o.useEffect(function(){var p=d.bindI18n,l=d.bindI18nStore;w.current=!0,!m&&!v&&D(e,i,function(){w.current&&b(c)}),m&&I&&I!==j&&w.current&&b(c);function g(){w.current&&b(c)}return p&&e&&e.on(p,g),l&&e&&e.store.on(l,g),function(){w.current=!1,p&&e&&p.split(" ").forEach(function(S){return e.off(S,g)}),l&&e&&l.split(" ").forEach(function(S){return e.store.off(S,g)})}},[e,j]);var N=o.useRef(!0);o.useEffect(function(){w.current&&!N.current&&b(c),N.current=!1},[e,y]);var O=[E,e,m];if(O.t=E,O.i18n=e,O.ready=m,m||!m&&!v)return O;throw new Promise(function(p){D(e,i,function(){p()})})}var q=["forwardedRef"];function F(a,t){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),n.push.apply(n,r)}return n}function P(a){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?F(Object(n),!0).forEach(function(r){A(a,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(n,r))})}return a}function X(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function(r){function s(e){var f=e.forwardedRef,u=z(e,q),d=Y(a,P(P({},u),{},{keyPrefix:t.keyPrefix})),v=C(d,3),y=v[0],i=v[1],m=v[2],c=P(P({},u),{},{t:y,i18n:i,tReady:m});return t.withRef&&f?c.ref=f:!t.withRef&&f&&(c.forwardedRef=f),o.createElement(r,c)}s.displayName="withI18nextTranslation(".concat(L(r),")"),s.WrappedComponent=r;var h=function(f,u){return o.createElement(s,Object.assign({},f,{forwardedRef:u}))};return t.withRef?o.forwardRef(h):s}}export{X as w};
