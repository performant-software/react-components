import{j as a}from"./jsx-runtime-D9TvR9R2.js";import{r as d}from"./index-C0dDX-lL.js";import{d as C}from"./index-BtSbvt4P.js";import{F as u}from"./Form-WfNl3YLh.js";import{v as F}from"./index.es98-Bt7McBiy.js";import{d as w}from"./index.es30-BLbcNbkX.js";import"./index-DOYXiIEK.js";import{_ as g}from"./index-default-C_maRo4o.js";import{U as D}from"./UserDefinedFields-CLVNJku_.js";import"./_commonjsHelpers-BosuxZz1.js";import"./mapValues-BQxZ7nrE.js";import"./pickBy-JNbKYqv1.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./isPlainObject-BoCILj_Q.js";import"./index-Cw1G72V2.js";import"./index-CKJfshIT.js";import"./tiny-invariant.cjs-DxxScMW_.js";import"./___vite-browser-external_commonjs-proxy-DRaEfepn.js";import"./preview-errors-CzpZmerH.js";import"./debounce-DmjZtjd2.js";import"./extends-CCbyfPlC.js";import"./inheritsLoose-1HkgTRWY.js";import"./setPrototypeOf-DgZC2w_0.js";import"./getElementType-BSRayMAs.js";import"./Button-CJhT71wt.js";import"./Icon-C_3d7-zE.js";import"./Label-aEFd48OX.js";import"./ModernAutoControlledComponent-C211dBIC.js";import"./assertThisInitialized-B9jnkVVz.js";import"./includes-Cc_HXDPA.js";import"./toFinite-C3oJXAtX.js";import"./forEach-CLeEMxs1.js";import"./Dimmer-DP3fvqlo.js";import"./Portal-B8DXQ6EK.js";import"./keyboardKey-OMDgGVm3.js";import"./objectWithoutPropertiesLoose-1QL-frMM.js";import"./map-DWKMCCtW.js";import"./Checkbox-B3tsCUtI.js";import"./_baseSet-BllfnHSO.js";import"./_baseAssignValue-UQlBDUKN.js";import"./Dropdown-DwNow7wJ.js";import"./without-Duh6Zu7H.js";import"./isArrayLikeObject-Bl_bAmop.js";import"./isEmpty-CY-Bv0TY.js";import"./deburr-CNLr_JRW.js";import"./index-mbjjMjCk.js";import"./_arrayReduce-CrxnWFSq.js";import"./filter-B6f9p5im.js";import"./Input-Bwh_HEb3.js";import"./index.es3-xdXs6Ttq.js";import"./index.es2-Cws1kAus.js";import"./index.es25-DQCJ81LM.js";import"./useDrop-Bls-awrw.js";import"./DndContext-BcAF8WvB.js";import"./redux-CpmcZR8k.js";import"./objectSpread2-Cl-ctlOG.js";import"./defineProperty-DcNpp85p.js";import"./toPropertyKey-BcUJYDQU.js";import"./index.es22-xvj8T6Jl.js";import"./iframe-BwLlYkVh.js";import"../sb-preview/runtime.js";import"./index.es12-CjfpCj_A.js";const p={boolean:"Boolean",date:"Date",number:"Number",richText:"RichText",select:"Select",string:"String",text:"Text"},x=r=>{const[c,b]=d.useState(r.fields||[]),y=d.useCallback(e=>`user_defined[${e.uuid}]`,[]),i=d.useCallback(e=>r.isError(y(e)),[y,r.isError]),m=d.useCallback((e,o)=>{r.onChange({...r.data,[e.uuid]:o}),r.onClearValidationError&&r.onClearValidationError(y(e))},[y,r.data,r.onChange,r.onClearValidationError]),q=d.useCallback(e=>{let o;const s=r.data&&r.data[e.uuid];return e.data_type===p.string&&(o=a.jsx(u.Input,{error:i(e),label:e.column_name,required:e.required,onChange:(t,{value:n})=>m(e,n),value:s})),e.data_type===p.number&&(o=a.jsx(u.Input,{error:i(e),label:e.column_name,required:e.required,onChange:(t,{value:n})=>m(e,n),value:s,type:"number"})),e.data_type===p.select&&(o=a.jsx(u.Dropdown,{clearable:!0,error:i(e),label:e.column_name,multiple:e.allow_multiple,required:e.required,options:g.map(e.options,t=>({key:t,value:t,text:t})),onChange:(t,{value:n})=>m(e,n),selectOnBlur:!1,selection:!0,value:s})),e.data_type===p.text&&(o=a.jsx(u.TextArea,{error:i(e),label:e.column_name,required:e.required,onChange:(t,{value:n})=>m(e,n),value:s})),e.data_type===p.date&&(o=a.jsx(u.Input,{error:i(e),label:e.column_name,required:e.required,children:a.jsx(F,{onChange:t=>m(e,t&&t.toISOString()),value:s&&new Date(s)})})),e.data_type===p.boolean&&(o=a.jsx(u.Checkbox,{checked:!!s,error:i(e),label:e.column_name,onChange:(t,{checked:n})=>m(e,n)})),e.data_type===p.richText&&(o=a.jsx(u.Input,{error:i(e),label:e.column_name,required:e.required,children:a.jsx(w,{onChange:t=>m(e,t),value:s})})),o},[r.data,i,m]);return d.useEffect(()=>{if(!g.isEmpty(c))return;const e={defineable_id:r.defineableId,defineable_type:r.defineableType,per_page:0,required:r.required,sort_by:"order",table_name:r.tableName};D.fetchAll(e).then(({data:o})=>b(o.user_defined_fields))},[]),a.jsx(a.Fragment,{children:g.map(c,q.bind(void 0))})};x.__docgenInfo={description:"",methods:[],displayName:"UserDefinedFieldsForm",props:{data:{required:!0,flowType:{name:"any"},description:""},defineableId:{required:!1,flowType:{name:"number"},description:""},defineableType:{required:!1,flowType:{name:"string"},description:""},fields:{required:!1,flowType:{name:"Array"},description:""},isError:{required:!0,flowType:{name:"signature",type:"function",raw:"(key: string) => boolean",signature:{arguments:[{name:"key",type:{name:"string"}}],return:{name:"boolean"}}},description:""},onChange:{required:!0,flowType:{name:"signature",type:"function",raw:"(obj: any) => void",signature:{arguments:[{name:"obj",type:{name:"any"}}],return:{name:"void"}}},description:""},onClearValidationError:{required:!0,flowType:{name:"signature",type:"function",raw:"(...keys: Array<string>) => void",signature:{arguments:[{name:"keys",type:{name:"Array",elements:[{name:"string"}],raw:"Array<string>"},rest:!0}],return:{name:"void"}}},description:""},required:{required:!1,flowType:{name:"boolean"},description:""},tableName:{required:!1,flowType:{name:"string"},description:""}}};const Ae={title:"Components/User Defined Fields/UserDefinedFieldsForm",decorators:[C.withKnobs]},l=()=>{const[r,c]=d.useState({"First name":"Bob","Last name":"Smith"});return a.jsx(u,{children:a.jsx(x,{data:r,isError:()=>!1,onChange:b=>c(b)})})};l.__docgenInfo={description:"",methods:[],displayName:"Default"};var _,f,h;l.parameters={...l.parameters,docs:{...(_=l.parameters)==null?void 0:_.docs,source:{originalSource:`() => {
  const [data, setData] = useState({
    'First name': 'Bob',
    'Last name': 'Smith'
  });
  return <Form>
      <UserDefinedFieldsForm data={data} isError={() => false} onChange={value => setData(value)} />
    </Form>;
}`,...(h=(f=l.parameters)==null?void 0:f.docs)==null?void 0:h.source}}};const Ne=["Default"];export{l as Default,Ne as __namedExportsOrder,Ae as default};
