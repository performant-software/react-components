import{j as i}from"./jsx-runtime-BTCK_S7S.js";import{r as t}from"./index-CBqU2yxZ.js";import{I as U}from"./Icon-2tEtgK8g.js";import{_ as z}from"./index-default-C_maRo4o.js";import{F as C}from"./FileInputButton-qbfOXRVs.js";import{i as p}from"./i18n-DOVQ27W-.js";import{L as q}from"./LazyAudio-CfbDpiV_.js";import{L as S}from"./LazyDocument-Ckbg1rJ1.js";import{L as M}from"./LazyImage-Cns5j5dr.js";import{L as B}from"./LazyVideo-tjxMw6Uu.js";import{T as F}from"./Trans-BENHr9Q7.js";const o={audio:"audio",image:"image",pdf:"application/pdf",video:"video"},I=["image/png","image/jpeg","image/gif","image/webp","image/bmp","video/m4v","video/mp4"],T=e=>{const[l,b]=t.useState(e.contentType||""),[c,w]=t.useState(e.name),[s,g]=t.useState(e.preview),[r,m]=t.useState(e.src),[d,L]=t.useState(e.downloadUrl),[f,v]=t.useState(null),y=t.useMemo(()=>{let n;return c&&(n=c.split(".").pop(),n=n&&n.toUpperCase()),n},[c]),h=t.useCallback(n=>{const a=z.first(n);b(a.type),w(a.name),g(null),L(null),z.contains(I,a.type)||a.type.startsWith(o.audio)||a.type===o.pdf?(m(URL.createObjectURL(a)),v(p.t("LazyMedia.buttons.preview"))):(m(null),v(null)),e.onUpload(a)},[e.onUpload]),u=t.useCallback(()=>i.jsxs(i.Fragment,{children:[e.onUpload&&i.jsx(C,{color:"orange",content:p.t("Common.buttons.upload"),icon:"cloud upload",onSelection:h}),e.children]})),x=t.useCallback(()=>l.startsWith(o.image)?i.jsx(M,{dimmable:e.dimmable,download:d,preview:s,src:r,size:e.size,viewButtonLabel:f,children:u()}):l.startsWith(o.video)?i.jsx(B,{dimmable:e.dimmable,download:d,playButtonLabel:f,preview:s,src:r,size:e.size,children:u()}):l.startsWith(o.audio)?i.jsx(q,{dimmable:e.dimmable,download:d,playButtonLabel:f,preview:s,src:r,size:e.size,children:u()}):i.jsx(S,{dimmable:e.dimmable,download:d,pdf:l===o.pdf,preview:s,src:r,size:e.size,children:u()}),[l,s,r,e.dimmable,d,e.size]),j=t.useCallback(()=>y?i.jsxs("div",{children:[i.jsx(U,{name:"info circle"}),i.jsx("span",{children:i.jsx(F,{components:{bold:i.jsx("strong",{})},default:"Your <bold>{{type}}</bold> has been received",i18n:p,i18nKey:"LazyMedia.messages.uploaded",values:{type:y}})})]}):null,[y]);return t.useEffect(()=>{e.contentType&&b(e.contentType),e.name&&w(e.name),e.preview&&g(e.preview),e.src?m(e.src):m(null)},[e.contentType,e.name,e.preview,e.src]),i.jsxs("div",{className:"lazy-media",children:[x(),j()]})};T.defaultProps={dimmable:!0,size:"medium"};T.__docgenInfo={description:"",methods:[],displayName:"LazyMedia",props:{children:{required:!1,flowType:{name:"Node"},description:""},contentType:{required:!0,flowType:{name:"string"},description:""},dimmable:{required:!1,flowType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},downloadUrl:{required:!1,flowType:{name:"string"},description:""},name:{required:!1,flowType:{name:"string"},description:""},onUpload:{required:!0,flowType:{name:"signature",type:"function",raw:"(file: File) => void",signature:{arguments:[{name:"file",type:{name:"File"}}],return:{name:"void"}}},description:""},preview:{required:!1,flowType:{name:"string"},description:""},size:{required:!1,flowType:{name:"string"},description:"",defaultValue:{value:"'medium'",computed:!1}},src:{required:!1,flowType:{name:"string"},description:""}}};export{T as L};
