import{j as b}from"./jsx-runtime-BTCK_S7S.js";import{r as d,R as u}from"./index-CBqU2yxZ.js";import{q as j,H as g}from"./index-BhufOjrY.js";import{_ as q}from"./index-default-C_maRo4o.js";import{M}from"./MediaGallery-BzH5BEf-.js";const _=(e,t="none")=>{if(!e)return null;if(typeof e=="string")return[e];if(!e[t]){const r=Object.getOwnPropertyNames(e);if(r.length>0)return e[r[0]]}return!e[t]||!Array.isArray(e[t])?null:e[t]},$=(e,t="none",r=", ")=>{const a=_(e,t);return Array.isArray(a)?a.join(`${r}`):a};function E(e,t){const r=Object.keys(e).filter(n=>t.includes(n)?null:n),a=new Object;return r.forEach(n=>{a[n]=e[n]}),a}const w=209,I={colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:`hsl(${w} 100% 38.2%)`,accentMuted:`hsl(${w} 80% 61.8%)`,accentAlt:`hsl(${w} 80% 30%)`,secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},F={xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"},{styled:o,css:z,keyframes:G,createTheme:V}=j({theme:I,media:F});o("span",{});const H=(e,t="200,",r="full")=>{Array.isArray(e)&&(e=e[0]);const{id:a,service:n}=e;let l;if(!n)return a;if(Array.isArray(e.service)&&e.service.length>0&&(l=n[0]),l){if(l["@id"])return`${l["@id"]}/${r}/${t}/0/default.jpg`;if(l.id)return`${l.id}/${r}/${t}/0/default.jpg`}},A=o("img",{objectFit:"cover"}),O=e=>{const t=d.useRef(null),{contentResource:r,altAsLabel:a,region:n="full"}=e;let l;a&&(l=$(a));const R=E(e,["contentResource","altAsLabel"]),{type:y,id:s,width:h=200,height:f=200,duration:c}=r;d.useEffect(()=>{if(!s&&!t.current||["Image"].includes(y)||!s.includes("m3u8"))return;const i=new g;return t.current&&(i.attachMedia(t.current),i.on(g.Events.MEDIA_ATTACHED,function(){i.loadSource(s)})),i.on(g.Events.ERROR,function(p,m){if(m.fatal)switch(m.type){case g.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${p} network error encountered, try to recover`),i.startLoad();break;case g.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${p} media error encountered, try to recover`),i.recoverMediaError();break;default:i.destroy();break}}),()=>{i&&(i.detachMedia(),i.destroy())}},[s,y]);const x=d.useCallback(()=>{if(!t.current)return;let i=0,p=30;if(c&&(p=c),!s.split("#t=")&&c&&(i=c*.1),s.split("#t=").pop()){const k=s.split("#t=").pop();k&&(i=parseInt(k.split(",")[0]))}const m=t.current;m.autoplay=!0,m.currentTime=i,setTimeout(()=>x(),p*1e3)},[c,s]);d.useEffect(()=>x(),[x]);const T=H(r,`${h},${f}`,n);switch(y){case"Image":return u.createElement(A,{as:"img",alt:l,css:{width:h,height:f},key:s,src:T,...R});case"Video":return u.createElement(A,{as:"video",css:{width:h,height:f},disablePictureInPicture:!0,key:s,loop:!0,muted:!0,onPause:x,ref:t,src:s});default:return console.warn(`Resource type: ${y} is not valid or not yet supported in Primitives.`),u.createElement(u.Fragment,null)}};o("a",{});d.createContext(void 0);o("span",{});o("span",{});o("dl",{});o("li",{});o("ul",{});o("dl",{});o("li",{});o("ul",{});const D=e=>{const{thumbnail:t,region:r}=e,a=E(e,["thumbnail"]);return u.createElement(u.Fragment,null,t&&t.map(n=>u.createElement(O,{contentResource:n,key:n.id,region:r,...a})))},P=80,C=80,v=e=>{var a;const[t,r]=d.useState();return b.jsxs("div",{className:"p-3 pb-4 grid grid-cols-3 gap-1",children:[q.map((a=e.data)==null?void 0:a.items,n=>b.jsx(D,{className:"rounded shadow cursor-pointer",onClick:()=>r(n.body),thumbnail:[{id:n.body.content_thumbnail_url,type:"Image",width:e.thumbnailWidth,height:e.thumbnailHeight}]},n.body.id)),b.jsx(M,{defaultItem:t,onClose:()=>r(void 0)})]})};v.defaultProps={thumbnailHeight:P,thumbnailWidth:C};const B=v;v.__docgenInfo={description:"This component renders the related Core Data media records as well as a gallery viewer.",methods:[],displayName:"RelatedMedia",props:{data:{required:!0,flowType:{name:"signature",type:"object",raw:`{
  '@context': 'http://www.w3.org/ns/anno.jsonld';
  id: string;
  type: 'AnnotationPage';
  partOf: {
    id: string;
    label: string;
    total: number;
  };
  items: Annotation<T>[];
}`,signature:{properties:[{key:"@context",value:{name:"literal",value:"'http://www.w3.org/ns/anno.jsonld'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"literal",value:"'AnnotationPage'",required:!0}},{key:"partOf",value:{name:"signature",type:"object",raw:`{
  id: string;
  label: string;
  total: number;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"total",value:{name:"number",required:!0}}]},required:!0}},{key:"items",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string,
  record_id: string,
  uuid: string,
  title: string,
  user_defined: {
    [key: string]: UserDefinedField
  }
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"record_id",value:{name:"string",required:!0}},{key:"uuid",value:{name:"string",required:!0}},{key:"title",value:{name:"string",required:!0}},{key:"user_defined",value:{name:"signature",type:"object",raw:`{
  [key: string]: UserDefinedField
}`,signature:{properties:[{key:{name:"string"},value:{name:"signature",type:"object",raw:`{
  label: string,
  value: string
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}}]},required:!0}}]},required:!0}}]}}],raw:"Annotation<T>[]",required:!0}}]}},description:"The annotation page containing the media content to render."},thumbnailHeight:{required:!1,flowType:{name:"number"},description:"Media thumbnail height.",defaultValue:{value:"80",computed:!1}},thumbnailWidth:{required:!1,flowType:{name:"number"},description:"Media thumbnail width.",defaultValue:{value:"80",computed:!1}}}};export{B as R};
