import{r as l,R as S,j as s}from"./iframe-isOIMYbo.js";import{F as j}from"./Form-BaAofpBB.js";import"./index.es28-DwD6OMJQ.js";import{m as F}from"./index.es26--ozRl-4W.js";import{G as h}from"./Grid-DcCEaZI6.js";import{M as v}from"./Menu-BQbSIL22.js";import{M as R}from"./Message-FpdRftPp.js";import{B as N}from"./Button-CqXa-wVP.js";import{_ as B}from"./extends-CCbyfPlC.js";import{_ as L}from"./inheritsLoose-1HkgTRWY.js";import{m as k,g as q,a as A,c as U}from"./getElementType-CsHk5kPH.js";import{e as y}from"./index-DWrsd_AA.js";import{a as w,i as E,R as z}from"./Portal-Cx1eItx_.js";import{_ as x}from"./index-default-C0I3bBxV.js";import{i as g}from"./i18n-DkobdbHY.js";import{T as I}from"./Toaster-BQZ4tLLp.js";import"./Label-vg6cGd_Q.js";import"./ModernAutoControlledComponent-BtLuXh9U.js";import"./assertThisInitialized-B9jnkVVz.js";import"./Icon-DBxUlxMw.js";import"./includes-CdyQs4Ym.js";import"./toFinite-DGZNaitu.js";import"./forEach-MpIg6X8D.js";import"./Dimmer-DT1p3J3k.js";import"./Checkbox-DzQdh1Bw.js";import"./_baseSet-XjsS9Dyu.js";import"./_baseAssignValue-CF-CCvL5.js";import"./Dropdown-D3HCXA6v.js";import"./map-YoLMybS-.js";import"./without-rpscruk7.js";import"./isArrayLikeObject-iQZW--Wo.js";import"./isEmpty-UXTvYtPv.js";import"./deburr-Cyfgcr56.js";import"./index-CfsjdyXR.js";import"./_arrayReduce-CrxnWFSq.js";import"./keyboardKey-B58FVVIx.js";import"./filter-BQSKLcgn.js";import"./Input-kw8FuSsH.js";import"./setPrototypeOf-DgZC2w_0.js";import"./i18next-eNuDfwAU.js";import"./Transition-CntWQsHm.js";var T=function(o){L(u,o);function u(){for(var t,i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return t=o.call.apply(o,[this].concat(r))||this,t.state={active:!0,sticky:!1},t.stickyRef=l.createRef(),t.triggerRef=l.createRef(),t.addListeners=function(e){var n=w(e)?e.current:e;n&&(y.sub("resize",t.handleUpdate,{target:n}),y.sub("scroll",t.handleUpdate,{target:n}))},t.removeListeners=function(e){var n=w(e)?e.current:e;n&&(y.unsub("resize",t.handleUpdate,{target:n}),y.unsub("scroll",t.handleUpdate,{target:n}))},t.update=function(e){var n=t.state.pushing;if(t.ticking=!1,t.assignRects(),n)return t.didReachStartingPoint()?t.stickToContextTop(e):t.didTouchScreenBottom()?t.stickToScreenBottom(e):t.stickToContextBottom(e);if(t.isOversized()){if(t.contextRect.top>0)return t.stickToContextTop(e);if(t.contextRect.bottom<window.innerHeight)return t.stickToContextBottom(e)}return t.didTouchScreenTop()?t.didReachContextBottom()?t.stickToContextBottom(e):t.stickToScreenTop(e):t.stickToContextTop(e)},t.handleUpdate=function(e){t.ticking||(t.ticking=!0,t.frameId=requestAnimationFrame(function(){return t.update(e)}))},t.assignRects=function(){var e=t.props.context,n=w(e)?e.current:e||document.body;t.triggerRect=t.triggerRef.current.getBoundingClientRect(),t.contextRect=n.getBoundingClientRect(),t.stickyRect=t.stickyRef.current.getBoundingClientRect()},t.didReachContextBottom=function(){var e=t.props.offset;return t.stickyRect.height+e>=t.contextRect.bottom},t.didReachStartingPoint=function(){return t.stickyRect.top<=t.triggerRect.top},t.didTouchScreenTop=function(){return t.triggerRect.top<t.props.offset},t.didTouchScreenBottom=function(){var e=t.props.bottomOffset;return t.contextRect.bottom+e>window.innerHeight},t.isOversized=function(){return t.stickyRect.height>window.innerHeight},t.pushing=function(e){var n=t.props.pushing;n&&t.setState({pushing:e})},t.stick=function(e,n){t.setState({bound:n,sticky:!0}),k(t.props,"onStick",e,t.props)},t.unstick=function(e,n){t.setState({bound:n,sticky:!1}),k(t.props,"onUnstick",e,t.props)},t.stickToContextBottom=function(e){k(t.props,"onBottom",e,t.props),t.stick(e,!0),t.pushing(!0)},t.stickToContextTop=function(e){k(t.props,"onTop",e,t.props),t.unstick(e,!1),t.pushing(!1)},t.stickToScreenBottom=function(e){var n=t.props.bottomOffset;t.stick(e,!1),t.setState({bottom:n,top:null})},t.stickToScreenTop=function(e){var n=t.props.offset;t.stick(e,!1),t.setState({top:n,bottom:null})},t}var f=u.prototype;return f.componentDidMount=function(){if(E()){var i=this.state.active;i&&(this.handleUpdate(),this.addListeners(this.props.scrollContext))}},u.getDerivedStateFromProps=function(i,r){return r.active!==i.active&&!i.active?{active:i.active,sticky:!1}:{active:i.active}},f.componentDidUpdate=function(i,r){if(r.active===this.state.active){i.scrollContext!==this.props.scrollContext&&(this.removeListeners(i.scrollContext),this.addListeners(this.props.scrollContext));return}if(this.state.active){this.handleUpdate(),this.addListeners(this.props.scrollContext);return}this.removeListeners(i.scrollContext)},f.componentWillUnmount=function(){if(E()){var i=this.state.active;i&&(this.removeListeners(this.props.scrollContext),cancelAnimationFrame(this.frameId))}},f.computeStyle=function(){var i=this.props.styleElement,r=this.state,c=r.bottom,e=r.bound,n=r.sticky,m=r.top;return n?B({bottom:e?0:c,top:e?void 0:m,width:this.triggerRect.width},i):i},f.render=function(){var i=this.props,r=i.children,c=i.className,e=this.state,n=e.bottom,m=e.bound,p=e.sticky,a=q(u,this.props),d=A(u,this.props),M=U(p&&"ui",p&&"stuck-container",p&&(m?"bound-container":"fixed-container"),c),O=U("ui",p&&(m?"bound bottom":"fixed"),p&&!m&&(n===null?"top":"bottom"),"sticky"),D=p&&this.stickyRect?{height:this.stickyRect.height}:{};return S.createElement(d,B({},a,{className:M}),S.createElement("div",{ref:this.triggerRef,style:D}),S.createElement("div",{className:O,ref:this.stickyRef,style:this.computeStyle()},r))},u}(l.Component);T.handledProps=["active","as","bottomOffset","children","className","context","offset","onBottom","onStick","onTop","onUnstick","pushing","scrollContext","styleElement"];T.propTypes={};T.defaultProps={active:!0,bottomOffset:0,offset:0,scrollContext:E()?window:null};const C=o=>{const[u,f]=l.useState(),[t,i]=l.useState(!1),r=l.useRef(),c=F.findByType(o.children,C.Tab),e=l.useMemo(()=>x.find(c,a=>a.key===u),[u,c]),n=l.useMemo(()=>{const a=["simple-edit-page"];return o.className&&a.push(o.className),a.join(" ")},[o.className]),m=l.useCallback(a=>{const{key:d}=a;f(d),o.onTabClick&&o.onTabClick(d)},[o.onTabClick]),p=l.useCallback(()=>{const a=s.jsxs(v,{...o.menuProps,children:[c?.length>1&&x.map(c,d=>s.jsx(v.Item,{active:d.key===u,disabled:o.loading||o.saving,name:d.props.name,onClick:()=>m(d)},d.key)),s.jsx(v.Menu,{position:"right",children:s.jsxs(v.Item,{className:"button-container",children:[o.editable&&s.jsx(N,{content:g.t("Common.buttons.save"),disabled:o.loading||o.saving,onClick:o.onSave,primary:!0}),s.jsx(N,{basic:!0,content:g.t("Common.buttons.cancel"),disabled:o.loading||o.saving,onClick:o.onCancel})]})})]});return o.stickyMenu?s.jsx(T,{context:r,offset:20,children:a}):a});return l.useEffect(()=>{let a;o.defaultTab?a={key:o.defaultTab}:a=x.first(c),a&&m(a),o.saved&&i(!0)},[]),s.jsxs(h,{className:n,children:[s.jsx(h.Row,{children:s.jsx(h.Column,{children:p()})}),s.jsx(h.Row,{children:s.jsx(h.Column,{children:s.jsx(z,{innerRef:r,children:s.jsxs("div",{children:[s.jsxs(j,{error:!x.isEmpty(o.errors),loading:o.loading||o.saving,noValidate:!0,children:[s.jsx(R,{error:!0,header:g.t("Common.errors.save"),list:o.errors}),e&&e.props.children]}),t&&s.jsxs(I,{onDismiss:()=>i(!1),type:I.MessageTypes.positive,children:[s.jsx(R.Header,{content:g.t("Common.messages.save.header")}),s.jsx(R.Content,{content:g.t("Common.messages.save.content")})]})]})})})})]})};C.defaultProps={editable:!0,menuProps:{pointing:!0,secondary:!0}};const _=o=>o.children;_.displayName="Tab";const P=Object.assign(C,{Tab:_});C.__docgenInfo={description:"This component can be used to render the layout for a form/page with edit capabilities. Use in conjunction with the\n`withEditPage` higher-order component for a fully fledged record editing environment.",methods:[],displayName:"SimpleEditPage",props:{className:{required:!1,flowType:{name:"string"},description:"Additional class attribute to apply to the root DOM element."},defaultTab:{required:!1,flowType:{name:"string"},description:"Sets the default visible tab. If no value is provided, the first tab will be visible."},editable:{required:!1,flowType:{name:"boolean"},description:"If `false`, the save button will be hidden.",defaultValue:{value:"true",computed:!1}},menuProps:{required:!1,flowType:{name:"MenuProps"},description:"Props to provide to the Semantic UI `Menu` component.",defaultValue:{value:`{
  pointing: true,
  secondary: true
}`,computed:!1}},onCancel:{required:!0,flowType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:'Callback fired when the "Cancel" button is clicked.'},onTabClick:{required:!1,flowType:{name:"signature",type:"function",raw:"(tab: string) => void",signature:{arguments:[{name:"tab",type:{name:"string"}}],return:{name:"void"}}},description:`Callback fired when a tab is clicked.

@param tab`},saved:{required:!1,flowType:{name:"boolean"},description:"If `true`, the saved toaster will display when the component is mounted."},stickyMenu:{required:!1,flowType:{name:"boolean"},description:'If `true`, the tabs menu will "stick" to the top of the window.'}}};const{action:H}=__STORYBOOK_MODULE_ACTIONS__,Bt={title:"Components/Semantic UI/SimpleEditPage",component:P},b=()=>s.jsx(P,{menuProps:{text:!0},onCancel:H("cancel"),children:s.jsxs(P.Tab,{children:[s.jsx(j.Input,{autoFocus:!0,label:"Name"}),s.jsx(j.Input,{label:"Address"})]},"default")});b.__docgenInfo={description:"",methods:[],displayName:"Default"};b.parameters={...b.parameters,docs:{...b.parameters?.docs,source:{originalSource:`() => <SimpleEditPage menuProps={{
  text: true
}} onCancel={action('cancel')}>
    <SimpleEditPage.Tab key='default'>
      <Form.Input autoFocus label='Name' />
      <Form.Input label='Address' />
    </SimpleEditPage.Tab>
  </SimpleEditPage>`,...b.parameters?.docs?.source}}};const Ut=["Default"];export{b as Default,Ut as __namedExportsOrder,Bt as default};
