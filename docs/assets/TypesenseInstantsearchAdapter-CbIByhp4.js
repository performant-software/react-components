import{c as p,g as hr}from"./_commonjsHelpers-BosuxZz1.js";import{b as zt,r as dr}from"./defineProperty-CGC-R-Bs.js";import{r as oe,a as ue}from"./createClass-CyHhwgEe.js";import{b as pr}from"./index-B7gOQl76.js";import{r as vr}from"./___vite-browser-external_commonjs-proxy-DRaEfepn.js";import{r as Jt}from"./slicedToArray-w19uMldN.js";import{r as yr}from"./toConsumableArray-DevfzeUX.js";var Qt={},Xt={exports:{}};(function(v){function _(y){return y&&y.__esModule?y:{default:y}}v.exports=_,v.exports.__esModule=!0,v.exports.default=v.exports})(Xt);var se=Xt.exports,Be={exports:{}},Ye;function _r(){return Ye||(Ye=1,function(v){var _=zt().default;function y(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */v.exports=y=function(){return h},v.exports.__esModule=!0,v.exports.default=v.exports;var b,h={},l=Object.prototype,o=l.hasOwnProperty,s=Object.defineProperty||function(O,S,R){O[S]=R.value},t=typeof Symbol=="function"?Symbol:{},e=t.iterator||"@@iterator",u=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function c(O,S,R){return Object.defineProperty(O,S,{value:R,enumerable:!0,configurable:!0,writable:!0}),O[S]}try{c({},"")}catch{c=function(R,P,T){return R[P]=T}}function i(O,S,R,P){var T=S&&S.prototype instanceof C?S:C,A=Object.create(T.prototype),H=new $(P||[]);return s(A,"_invoke",{value:I(O,R,H)}),A}function a(O,S,R){try{return{type:"normal",arg:O.call(S,R)}}catch(P){return{type:"throw",arg:P}}}h.wrap=i;var n="suspendedStart",f="suspendedYield",d="executing",m="completed",g={};function C(){}function w(){}function E(){}var q={};c(q,e,function(){return this});var k=Object.getPrototypeOf,N=k&&k(k(z([])));N&&N!==l&&o.call(N,e)&&(q=N);var D=E.prototype=C.prototype=Object.create(q);function j(O){["next","throw","return"].forEach(function(S){c(O,S,function(R){return this._invoke(S,R)})})}function M(O,S){function R(T,A,H,F){var U=a(O[T],O,A);if(U.type!=="throw"){var K=U.arg,W=K.value;return W&&_(W)=="object"&&o.call(W,"__await")?S.resolve(W.__await).then(function(J){R("next",J,H,F)},function(J){R("throw",J,H,F)}):S.resolve(W).then(function(J){K.value=J,H(K)},function(J){return R("throw",J,H,F)})}F(U.arg)}var P;s(this,"_invoke",{value:function(A,H){function F(){return new S(function(U,K){R(A,H,U,K)})}return P=P?P.then(F,F):F()}})}function I(O,S,R){var P=n;return function(T,A){if(P===d)throw new Error("Generator is already running");if(P===m){if(T==="throw")throw A;return{value:b,done:!0}}for(R.method=T,R.arg=A;;){var H=R.delegate;if(H){var F=G(H,R);if(F){if(F===g)continue;return F}}if(R.method==="next")R.sent=R._sent=R.arg;else if(R.method==="throw"){if(P===n)throw P=m,R.arg;R.dispatchException(R.arg)}else R.method==="return"&&R.abrupt("return",R.arg);P=d;var U=a(O,S,R);if(U.type==="normal"){if(P=R.done?m:f,U.arg===g)continue;return{value:U.arg,done:R.done}}U.type==="throw"&&(P=m,R.method="throw",R.arg=U.arg)}}}function G(O,S){var R=S.method,P=O.iterator[R];if(P===b)return S.delegate=null,R==="throw"&&O.iterator.return&&(S.method="return",S.arg=b,G(O,S),S.method==="throw")||R!=="return"&&(S.method="throw",S.arg=new TypeError("The iterator does not provide a '"+R+"' method")),g;var T=a(P,O.iterator,S.arg);if(T.type==="throw")return S.method="throw",S.arg=T.arg,S.delegate=null,g;var A=T.arg;return A?A.done?(S[O.resultName]=A.value,S.next=O.nextLoc,S.method!=="return"&&(S.method="next",S.arg=b),S.delegate=null,g):A:(S.method="throw",S.arg=new TypeError("iterator result is not an object"),S.delegate=null,g)}function B(O){var S={tryLoc:O[0]};1 in O&&(S.catchLoc=O[1]),2 in O&&(S.finallyLoc=O[2],S.afterLoc=O[3]),this.tryEntries.push(S)}function x(O){var S=O.completion||{};S.type="normal",delete S.arg,O.completion=S}function $(O){this.tryEntries=[{tryLoc:"root"}],O.forEach(B,this),this.reset(!0)}function z(O){if(O||O===""){var S=O[e];if(S)return S.call(O);if(typeof O.next=="function")return O;if(!isNaN(O.length)){var R=-1,P=function T(){for(;++R<O.length;)if(o.call(O,R))return T.value=O[R],T.done=!1,T;return T.value=b,T.done=!0,T};return P.next=P}}throw new TypeError(_(O)+" is not iterable")}return w.prototype=E,s(D,"constructor",{value:E,configurable:!0}),s(E,"constructor",{value:w,configurable:!0}),w.displayName=c(E,r,"GeneratorFunction"),h.isGeneratorFunction=function(O){var S=typeof O=="function"&&O.constructor;return!!S&&(S===w||(S.displayName||S.name)==="GeneratorFunction")},h.mark=function(O){return Object.setPrototypeOf?Object.setPrototypeOf(O,E):(O.__proto__=E,c(O,r,"GeneratorFunction")),O.prototype=Object.create(D),O},h.awrap=function(O){return{__await:O}},j(M.prototype),c(M.prototype,u,function(){return this}),h.AsyncIterator=M,h.async=function(O,S,R,P,T){T===void 0&&(T=Promise);var A=new M(i(O,S,R,P),T);return h.isGeneratorFunction(S)?A:A.next().then(function(H){return H.done?H.value:A.next()})},j(D),c(D,r,"Generator"),c(D,e,function(){return this}),c(D,"toString",function(){return"[object Generator]"}),h.keys=function(O){var S=Object(O),R=[];for(var P in S)R.push(P);return R.reverse(),function T(){for(;R.length;){var A=R.pop();if(A in S)return T.value=A,T.done=!1,T}return T.done=!0,T}},h.values=z,$.prototype={constructor:$,reset:function(S){if(this.prev=0,this.next=0,this.sent=this._sent=b,this.done=!1,this.delegate=null,this.method="next",this.arg=b,this.tryEntries.forEach(x),!S)for(var R in this)R.charAt(0)==="t"&&o.call(this,R)&&!isNaN(+R.slice(1))&&(this[R]=b)},stop:function(){this.done=!0;var S=this.tryEntries[0].completion;if(S.type==="throw")throw S.arg;return this.rval},dispatchException:function(S){if(this.done)throw S;var R=this;function P(K,W){return H.type="throw",H.arg=S,R.next=K,W&&(R.method="next",R.arg=b),!!W}for(var T=this.tryEntries.length-1;T>=0;--T){var A=this.tryEntries[T],H=A.completion;if(A.tryLoc==="root")return P("end");if(A.tryLoc<=this.prev){var F=o.call(A,"catchLoc"),U=o.call(A,"finallyLoc");if(F&&U){if(this.prev<A.catchLoc)return P(A.catchLoc,!0);if(this.prev<A.finallyLoc)return P(A.finallyLoc)}else if(F){if(this.prev<A.catchLoc)return P(A.catchLoc,!0)}else{if(!U)throw new Error("try statement without catch or finally");if(this.prev<A.finallyLoc)return P(A.finallyLoc)}}}},abrupt:function(S,R){for(var P=this.tryEntries.length-1;P>=0;--P){var T=this.tryEntries[P];if(T.tryLoc<=this.prev&&o.call(T,"finallyLoc")&&this.prev<T.finallyLoc){var A=T;break}}A&&(S==="break"||S==="continue")&&A.tryLoc<=R&&R<=A.finallyLoc&&(A=null);var H=A?A.completion:{};return H.type=S,H.arg=R,A?(this.method="next",this.next=A.finallyLoc,g):this.complete(H)},complete:function(S,R){if(S.type==="throw")throw S.arg;return S.type==="break"||S.type==="continue"?this.next=S.arg:S.type==="return"?(this.rval=this.arg=S.arg,this.method="return",this.next="end"):S.type==="normal"&&R&&(this.next=R),g},finish:function(S){for(var R=this.tryEntries.length-1;R>=0;--R){var P=this.tryEntries[R];if(P.finallyLoc===S)return this.complete(P.completion,P.afterLoc),x(P),g}},catch:function(S){for(var R=this.tryEntries.length-1;R>=0;--R){var P=this.tryEntries[R];if(P.tryLoc===S){var T=P.completion;if(T.type==="throw"){var A=T.arg;x(P)}return A}}throw new Error("illegal catch attempt")},delegateYield:function(S,R,P){return this.delegate={iterator:z(S),resultName:R,nextLoc:P},this.method==="next"&&(this.arg=b),g}},h}v.exports=y,v.exports.__esModule=!0,v.exports.default=v.exports}(Be)),Be.exports}var ze,Ze;function Yt(){if(Ze)return ze;Ze=1;var v=_r()();ze=v;try{regeneratorRuntime=v}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=v:Function("r","regeneratorRuntime = r")(v)}return ze}var Je={exports:{}},Ve;function Zt(){return Ve||(Ve=1,function(v){function _(b,h,l,o,s,t,e){try{var u=b[t](e),r=u.value}catch(c){l(c);return}u.done?h(r):Promise.resolve(r).then(o,s)}function y(b){return function(){var h=this,l=arguments;return new Promise(function(o,s){var t=b.apply(h,l);function e(r){_(t,o,s,e,u,"next",r)}function u(r){_(t,o,s,e,u,"throw",r)}e(void 0)})}}v.exports=y,v.exports.__esModule=!0,v.exports.default=v.exports}(Je)),Je.exports}var Z={},et;function gr(){if(et)return Z;et=1;var v=se;Object.defineProperty(Z,"__esModule",{value:!0}),Z.Configuration=void 0;var _=v(oe()),y=v(ue()),b=function(){function h(){var l,o,s,t,e,u,r,c,i,a,n,f,d,m=this,g,C,w,E,q,k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,_.default)(this,h),this.server=k.server||{nodes:[{host:"localhost",port:"8108",path:"",protocol:"http"}]},this.server.cacheSearchResultsForSeconds=(l=this.server.cacheSearchResultsForSeconds)!==null&&l!==void 0?l:2*60,this.additionalSearchParameters=(o=k.additionalSearchParameters)!==null&&o!==void 0?o:{},this.additionalSearchParameters.query_by=(s=(t=this.additionalSearchParameters.queryBy)!==null&&t!==void 0?t:this.additionalSearchParameters.query_by)!==null&&s!==void 0?s:"",this.additionalSearchParameters.preset=(e=(u=this.additionalSearchParameters.preset)!==null&&u!==void 0?u:this.additionalSearchParameters.preset)!==null&&e!==void 0?e:"",this.additionalSearchParameters.sort_by=(r=(c=this.additionalSearchParameters.sortBy)!==null&&c!==void 0?c:this.additionalSearchParameters.sort_by)!==null&&r!==void 0?r:"",this.additionalSearchParameters.highlight_full_fields=(i=(a=this.additionalSearchParameters.highlightFullFields)!==null&&a!==void 0?a:this.additionalSearchParameters.highlight_full_fields)!==null&&i!==void 0?i:this.additionalSearchParameters.query_by,this.geoLocationField=(n=k.geoLocationField)!==null&&n!==void 0?n:"_geoloc",this.facetableFieldsWithSpecialCharacters=(f=k.facetableFieldsWithSpecialCharacters)!==null&&f!==void 0?f:[],this.collectionSpecificSearchParameters=(d=k.collectionSpecificSearchParameters)!==null&&d!==void 0?d:{},Object.keys(this.collectionSpecificSearchParameters).forEach(function(N){var D,j,M,I,G,B,x=m.collectionSpecificSearchParameters[N];x.query_by=(D=x.queryBy)!==null&&D!==void 0?D:x.query_by,x.preset=(j=x.preset)!==null&&j!==void 0?j:x.preset,x.sort_by=(M=x.sortBy)!==null&&M!==void 0?M:x.sort_by,x.highlight_full_fields=(I=(G=(B=x.highlightFullFields)!==null&&B!==void 0?B:x.highlight_full_fields)!==null&&G!==void 0?G:m.additionalSearchParameters.highlight_full_fields)!==null&&I!==void 0?I:x.query_by,Object.keys(x).forEach(function($){return x[$]===void 0?delete x[$]:{}})}),this.renderingContent=k.renderingContent,this.flattenGroupedHits=(g=k.flattenGroupedHits)!==null&&g!==void 0?g:!0,this.facetByOptions=(C=k.facetByOptions)!==null&&C!==void 0?C:{},this.filterByOptions=(w=k.filterByOptions)!==null&&w!==void 0?w:{},this.collectionSpecificFacetByOptions=(E=k.collectionSpecificFacetByOptions)!==null&&E!==void 0?E:{},this.collectionSpecificFilterByOptions=(q=k.collectionSpecificFilterByOptions)!==null&&q!==void 0?q:{}}return(0,y.default)(h,[{key:"validate",value:function(){if((this.additionalSearchParameters.queryBy||Object.values(this.collectionSpecificSearchParameters).some(function(o){return o.queryBy}))&&console.warn("[typesense-instantsearch-adapter] Please use snake_cased versions of parameters in additionalSearchParameters instead of camelCased parameters. For example: Use query_by instead of queryBy. camelCased parameters will be deprecated in a future version. We're making this change so that parameter names are identical to the ones sent to Typesense (which are all snake_cased), and to also keep the types for these parameters in sync with the types defined in typesense-js."),this.additionalSearchParameters.query_by.length===0&&this.additionalSearchParameters.preset.length===0&&(Object.keys(this.collectionSpecificSearchParameters).length===0||Object.values(this.collectionSpecificSearchParameters).some(function(o){return(o.query_by||"").length===0&&(o.preset||"").length===0})))throw new Error("[typesense-instantsearch-adapter] Missing parameter: One of additionalSearchParameters.query_by or additionalSearchParameters.preset needs to be set, or all collectionSpecificSearchParameters need to have either .query_by or .preset set.")}}]),h}();return Z.Configuration=b,Z}var X={},le={},fe={},Qe={exports:{}},tt;function br(){return tt||(tt=1,function(v){(function(_,y){v.exports?v.exports=y():_.log=y()})(p,function(){var _=function(){},y="undefined",b=typeof window!==y&&typeof window.navigator!==y&&/Trident\/|MSIE /.test(window.navigator.userAgent),h=["trace","debug","info","warn","error"],l={},o=null;function s(n,f){var d=n[f];if(typeof d.bind=="function")return d.bind(n);try{return Function.prototype.bind.call(d,n)}catch{return function(){return Function.prototype.apply.apply(d,[n,arguments])}}}function t(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function e(n){return n==="debug"&&(n="log"),typeof console===y?!1:n==="trace"&&b?t:console[n]!==void 0?s(console,n):console.log!==void 0?s(console,"log"):_}function u(){for(var n=this.getLevel(),f=0;f<h.length;f++){var d=h[f];this[d]=f<n?_:this.methodFactory(d,n,this.name)}if(this.log=this.debug,typeof console===y&&n<this.levels.SILENT)return"No console available for logging"}function r(n){return function(){typeof console!==y&&(u.call(this),this[n].apply(this,arguments))}}function c(n,f,d){return e(n)||r.apply(this,arguments)}function i(n,f){var d=this,m,g,C,w="loglevel";typeof n=="string"?w+=":"+n:typeof n=="symbol"&&(w=void 0);function E(j){var M=(h[j]||"silent").toUpperCase();if(!(typeof window===y||!w)){try{window.localStorage[w]=M;return}catch{}try{window.document.cookie=encodeURIComponent(w)+"="+M+";"}catch{}}}function q(){var j;if(!(typeof window===y||!w)){try{j=window.localStorage[w]}catch{}if(typeof j===y)try{var M=window.document.cookie,I=encodeURIComponent(w),G=M.indexOf(I+"=");G!==-1&&(j=/^([^;]+)/.exec(M.slice(G+I.length+1))[1])}catch{}return d.levels[j]===void 0&&(j=void 0),j}}function k(){if(!(typeof window===y||!w)){try{window.localStorage.removeItem(w)}catch{}try{window.document.cookie=encodeURIComponent(w)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function N(j){var M=j;if(typeof M=="string"&&d.levels[M.toUpperCase()]!==void 0&&(M=d.levels[M.toUpperCase()]),typeof M=="number"&&M>=0&&M<=d.levels.SILENT)return M;throw new TypeError("log.setLevel() called with invalid level: "+j)}d.name=n,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=f||c,d.getLevel=function(){return C??g??m},d.setLevel=function(j,M){return C=N(j),M!==!1&&E(C),u.call(d)},d.setDefaultLevel=function(j){g=N(j),q()||d.setLevel(j,!1)},d.resetLevel=function(){C=null,k(),u.call(d)},d.enableAll=function(j){d.setLevel(d.levels.TRACE,j)},d.disableAll=function(j){d.setLevel(d.levels.SILENT,j)},d.rebuild=function(){if(o!==d&&(m=N(o.getLevel())),u.call(d),o===d)for(var j in l)l[j].rebuild()},m=N(o?o.getLevel():"WARN");var D=q();D!=null&&(C=N(D)),u.call(d)}o=new i,o.getLogger=function(f){if(typeof f!="symbol"&&typeof f!="string"||f==="")throw new TypeError("You must supply a name when creating a logger.");var d=l[f];return d||(d=l[f]=new i(f,o.methodFactory)),d};var a=typeof window!==y?window.log:void 0;return o.noConflict=function(){return typeof window!==y&&window.log===o&&(window.log=a),o},o.getLoggers=function(){return l},o.default=o,o})}(Qe)),Qe.exports}var L={},he={},de={},rt;function Q(){if(rt)return de;rt=1;var v=p&&p.__extends||function(){var y=function(b,h){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(l[s]=o[s])},y(b,h)};return function(b,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");y(b,h);function l(){this.constructor=b}b.prototype=h===null?Object.create(h):(l.prototype=h.prototype,new l)}}();Object.defineProperty(de,"__esModule",{value:!0});var _=function(y){v(b,y);function b(h){var l=this.constructor,o=y.call(this,h)||this;return o.name=l.name,Object.setPrototypeOf(o,l.prototype),o}return b}(Error);return de.default=_,de}var nt;function wr(){if(nt)return he;nt=1;var v=p&&p.__extends||function(){var h=function(l,o){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,t){s.__proto__=t}||function(s,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])},h(l,o)};return function(l,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");h(l,o);function s(){this.constructor=l}l.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),_=p&&p.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(he,"__esModule",{value:!0});var y=_(Q()),b=function(h){v(l,h);function l(){return h!==null&&h.apply(this,arguments)||this}return l}(y.default);return he.default=b,he}var pe={},it;function mr(){if(it)return pe;it=1;var v=p&&p.__extends||function(){var h=function(l,o){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,t){s.__proto__=t}||function(s,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])},h(l,o)};return function(l,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");h(l,o);function s(){this.constructor=l}l.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),_=p&&p.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(pe,"__esModule",{value:!0});var y=_(Q()),b=function(h){v(l,h);function l(){return h!==null&&h.apply(this,arguments)||this}return l}(y.default);return pe.default=b,pe}var ve={},at;function Sr(){if(at)return ve;at=1;var v=p&&p.__extends||function(){var h=function(l,o){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,t){s.__proto__=t}||function(s,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])},h(l,o)};return function(l,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");h(l,o);function s(){this.constructor=l}l.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),_=p&&p.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(ve,"__esModule",{value:!0});var y=_(Q()),b=function(h){v(l,h);function l(){return h!==null&&h.apply(this,arguments)||this}return l}(y.default);return ve.default=b,ve}var ye={},ot;function Rr(){if(ot)return ye;ot=1;var v=p&&p.__extends||function(){var h=function(l,o){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,t){s.__proto__=t}||function(s,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])},h(l,o)};return function(l,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");h(l,o);function s(){this.constructor=l}l.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),_=p&&p.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(ye,"__esModule",{value:!0});var y=_(Q()),b=function(h){v(l,h);function l(){return h!==null&&h.apply(this,arguments)||this}return l}(y.default);return ye.default=b,ye}var _e={},ut;function Cr(){if(ut)return _e;ut=1;var v=p&&p.__extends||function(){var h=function(l,o){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,t){s.__proto__=t}||function(s,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])},h(l,o)};return function(l,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");h(l,o);function s(){this.constructor=l}l.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),_=p&&p.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(_e,"__esModule",{value:!0});var y=_(Q()),b=function(h){v(l,h);function l(){return h!==null&&h.apply(this,arguments)||this}return l}(y.default);return _e.default=b,_e}var ge={},st;function Or(){if(st)return ge;st=1;var v=p&&p.__extends||function(){var h=function(l,o){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,t){s.__proto__=t}||function(s,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])},h(l,o)};return function(l,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");h(l,o);function s(){this.constructor=l}l.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),_=p&&p.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(ge,"__esModule",{value:!0});var y=_(Q()),b=function(h){v(l,h);function l(){return h!==null&&h.apply(this,arguments)||this}return l}(y.default);return ge.default=b,ge}var be={},ct;function Er(){if(ct)return be;ct=1;var v=p&&p.__extends||function(){var h=function(l,o){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,t){s.__proto__=t}||function(s,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])},h(l,o)};return function(l,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");h(l,o);function s(){this.constructor=l}l.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),_=p&&p.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(be,"__esModule",{value:!0});var y=_(Q()),b=function(h){v(l,h);function l(){return h!==null&&h.apply(this,arguments)||this}return l}(y.default);return be.default=b,be}var we={},lt;function Pr(){if(lt)return we;lt=1;var v=p&&p.__extends||function(){var h=function(l,o){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,t){s.__proto__=t}||function(s,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])},h(l,o)};return function(l,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");h(l,o);function s(){this.constructor=l}l.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),_=p&&p.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(we,"__esModule",{value:!0});var y=_(Q()),b=function(h){v(l,h);function l(){return h!==null&&h.apply(this,arguments)||this}return l}(y.default);return we.default=b,we}var me={},ft;function xr(){if(ft)return me;ft=1;var v=p&&p.__extends||function(){var h=function(l,o){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,t){s.__proto__=t}||function(s,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])},h(l,o)};return function(l,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");h(l,o);function s(){this.constructor=l}l.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),_=p&&p.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(me,"__esModule",{value:!0});var y=_(Q()),b=function(h){v(l,h);function l(o,s){var t=h.call(this,o)||this;return t.importResults=s,t}return l}(y.default);return me.default=b,me}var ht;function ce(){if(ht)return L;ht=1;var v=p&&p.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(L,"__esModule",{value:!0}),L.ImportError=L.TypesenseError=L.ServerError=L.RequestUnauthorized=L.RequestMalformed=L.ObjectUnprocessable=L.ObjectNotFound=L.ObjectAlreadyExists=L.MissingConfigurationError=L.HTTPError=void 0;var _=v(wr());L.HTTPError=_.default;var y=v(mr());L.MissingConfigurationError=y.default;var b=v(Sr());L.ObjectAlreadyExists=b.default;var h=v(Rr());L.ObjectNotFound=h.default;var l=v(Cr());L.ObjectUnprocessable=l.default;var o=v(Or());L.RequestMalformed=o.default;var s=v(Er());L.RequestUnauthorized=s.default;var t=v(Pr());L.ServerError=t.default;var e=v(xr());L.ImportError=e.default;var u=v(Q());return L.TypesenseError=u.default,L}var dt;function Vt(){if(dt)return fe;dt=1;var v=p&&p.__assign||function(){return v=Object.assign||function(s){for(var t,e=1,u=arguments.length;e<u;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},v.apply(this,arguments)},_=p&&p.__createBinding||(Object.create?function(s,t,e,u){u===void 0&&(u=e);var r=Object.getOwnPropertyDescriptor(t,e);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(s,u,r)}:function(s,t,e,u){u===void 0&&(u=e),s[u]=t[e]}),y=p&&p.__setModuleDefault||(Object.create?function(s,t){Object.defineProperty(s,"default",{enumerable:!0,value:t})}:function(s,t){s.default=t}),b=p&&p.__importStar||function(s){if(s&&s.__esModule)return s;var t={};if(s!=null)for(var e in s)e!=="default"&&Object.prototype.hasOwnProperty.call(s,e)&&_(t,s,e);return y(t,s),t};Object.defineProperty(fe,"__esModule",{value:!0});var h=b(br()),l=ce(),o=function(){function s(t){var e=this;this.nodes=t.nodes||[],this.nodes=this.nodes.map(function(u){return e.setDefaultPathInNode(u)}).map(function(u){return e.setDefaultPortInNode(u)}).map(function(u){return v({},u)}),t.randomizeNodes==null&&(t.randomizeNodes=!0),t.randomizeNodes===!0&&this.shuffleArray(this.nodes),this.nearestNode=t.nearestNode,this.nearestNode=this.setDefaultPathInNode(this.nearestNode),this.nearestNode=this.setDefaultPortInNode(this.nearestNode),this.connectionTimeoutSeconds=t.connectionTimeoutSeconds||t.timeoutSeconds||5,this.healthcheckIntervalSeconds=t.healthcheckIntervalSeconds||60,this.numRetries=t.numRetries||this.nodes.length+(this.nearestNode==null?0:1)||3,this.retryIntervalSeconds=t.retryIntervalSeconds||.1,this.apiKey=t.apiKey,this.sendApiKeyAsQueryParam=t.sendApiKeyAsQueryParam,this.cacheSearchResultsForSeconds=t.cacheSearchResultsForSeconds||0,this.useServerSideSearchCache=t.useServerSideSearchCache||!1,this.logger=t.logger||h,this.logLevel=t.logLevel||"warn",this.logger.setLevel(this.logLevel),this.additionalHeaders=t.additionalHeaders,this.showDeprecationWarnings(t),this.validate()}return s.prototype.validate=function(){if(this.nodes==null||this.nodes.length===0||this.validateNodes())throw new l.MissingConfigurationError("Ensure that nodes[].protocol, nodes[].host and nodes[].port are set");if(this.nearestNode!=null&&this.isNodeMissingAnyParameters(this.nearestNode))throw new l.MissingConfigurationError("Ensure that nearestNodes.protocol, nearestNodes.host and nearestNodes.port are set");if(this.apiKey==null)throw new l.MissingConfigurationError("Ensure that apiKey is set");return!0},s.prototype.validateNodes=function(){var t=this;return this.nodes.some(function(e){return t.isNodeMissingAnyParameters(e)})},s.prototype.isNodeMissingAnyParameters=function(t){return!["protocol","host","port","path"].every(function(e){return t.hasOwnProperty(e)})&&t.url==null},s.prototype.setDefaultPathInNode=function(t){return t!=null&&!t.hasOwnProperty("path")&&(t.path=""),t},s.prototype.setDefaultPortInNode=function(t){if(t!=null&&!t.hasOwnProperty("port")&&t.hasOwnProperty("protocol"))switch(t.protocol){case"https":t.port=443;break;case"http":t.port=80;break}return t},s.prototype.showDeprecationWarnings=function(t){t.timeoutSeconds&&this.logger.warn("Deprecation warning: timeoutSeconds is now renamed to connectionTimeoutSeconds"),t.masterNode&&this.logger.warn("Deprecation warning: masterNode is now consolidated to nodes, starting with Typesense Server v0.12"),t.readReplicaNodes&&this.logger.warn("Deprecation warning: readReplicaNodes is now consolidated to nodes, starting with Typesense Server v0.12")},s.prototype.shuffleArray=function(t){for(var e,u=t.length-1;u>0;u--){var r=Math.floor(Math.random()*(u+1));e=[t[r],t[u]],t[u]=e[0],t[r]=e[1]}},s}();return fe.default=o,fe}var Se={},pt;function er(){if(pt)return Se;pt=1;var v=p&&p.__awaiter||function(u,r,c,i){function a(n){return n instanceof c?n:new c(function(f){f(n)})}return new(c||(c=Promise))(function(n,f){function d(C){try{g(i.next(C))}catch(w){f(w)}}function m(C){try{g(i.throw(C))}catch(w){f(w)}}function g(C){C.done?n(C.value):a(C.value).then(d,m)}g((i=i.apply(u,r||[])).next())})},_=p&&p.__generator||function(u,r){var c={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,a,n,f;return f={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function d(g){return function(C){return m([g,C])}}function m(g){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(n=g[0]&2?a.return:g[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,g[1])).done)return n;switch(a=0,n&&(g=[g[0]&2,n.value]),g[0]){case 0:case 1:n=g;break;case 4:return c.label++,{value:g[1],done:!1};case 5:c.label++,a=g[1],g=[0];continue;case 7:g=c.ops.pop(),c.trys.pop();continue;default:if(n=c.trys,!(n=n.length>0&&n[n.length-1])&&(g[0]===6||g[0]===2)){c=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){c.label=g[1];break}if(g[0]===6&&c.label<n[1]){c.label=n[1],n=g;break}if(n&&c.label<n[2]){c.label=n[2],c.ops.push(g);break}n[2]&&c.ops.pop(),c.trys.pop();continue}g=r.call(u,c)}catch(C){g=[6,C],a=0}finally{i=n=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},y=p&&p.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Se,"__esModule",{value:!0});var b=y(pr),h=ce(),l=y(Q()),o="X-TYPESENSE-API-KEY",s=!0,t=!1,e=function(){function u(r){this.configuration=r,this.apiKey=this.configuration.apiKey,this.nodes=this.configuration.nodes==null?this.configuration.nodes:JSON.parse(JSON.stringify(this.configuration.nodes)),this.nearestNode=this.configuration.nearestNode==null?this.configuration.nearestNode:JSON.parse(JSON.stringify(this.configuration.nearestNode)),this.connectionTimeoutSeconds=this.configuration.connectionTimeoutSeconds,this.healthcheckIntervalSeconds=this.configuration.healthcheckIntervalSeconds,this.numRetriesPerRequest=this.configuration.numRetries,this.retryIntervalSeconds=this.configuration.retryIntervalSeconds,this.sendApiKeyAsQueryParam=this.configuration.sendApiKeyAsQueryParam,this.additionalUserHeaders=this.configuration.additionalHeaders,this.logger=this.configuration.logger,this.initializeMetadataForNodes(),this.currentNodeIndex=-1}return u.prototype.get=function(r,c,i){c===void 0&&(c={});var a=i===void 0?{}:i,n=a.abortSignal,f=n===void 0?null:n,d=a.responseType,m=d===void 0?void 0:d;return v(this,void 0,void 0,function(){return _(this,function(g){return[2,this.performRequest("get",r,{queryParameters:c,abortSignal:f,responseType:m})]})})},u.prototype.delete=function(r,c){return c===void 0&&(c={}),v(this,void 0,void 0,function(){return _(this,function(i){return[2,this.performRequest("delete",r,{queryParameters:c})]})})},u.prototype.post=function(r,c,i,a){return c===void 0&&(c={}),i===void 0&&(i={}),a===void 0&&(a={}),v(this,void 0,void 0,function(){return _(this,function(n){return[2,this.performRequest("post",r,{queryParameters:i,bodyParameters:c,additionalHeaders:a})]})})},u.prototype.put=function(r,c,i){return c===void 0&&(c={}),i===void 0&&(i={}),v(this,void 0,void 0,function(){return _(this,function(a){return[2,this.performRequest("put",r,{queryParameters:i,bodyParameters:c})]})})},u.prototype.patch=function(r,c,i){return c===void 0&&(c={}),i===void 0&&(i={}),v(this,void 0,void 0,function(){return _(this,function(a){return[2,this.performRequest("patch",r,{queryParameters:i,bodyParameters:c})]})})},u.prototype.performRequest=function(r,c,i){var a,n,f,d=i.queryParameters,m=d===void 0?null:d,g=i.bodyParameters,C=g===void 0?null:g,w=i.additionalHeaders,E=w===void 0?{}:w,q=i.abortSignal,k=q===void 0?null:q,N=i.responseType,D=N===void 0?void 0:N,j=i.skipConnectionTimeout,M=j===void 0?!1:j;return v(this,void 0,void 0,function(){var I,G,B,x,$,z;return _(this,function(O){switch(O.label){case 0:this.configuration.validate(),I=Date.now(),this.logger.debug("Request #".concat(I,": Performing ").concat(r.toUpperCase()," request: ").concat(c)),B=function(S){var R,P,T,A,H,F,U;return _(this,function(K){switch(K.label){case 0:if(R=x.getNextNode(I),x.logger.debug("Request #".concat(I,": Attempting ").concat(r.toUpperCase()," request Try #").concat(S," to Node ").concat(R.index)),k&&k.aborted)return[2,{value:Promise.reject(new Error("Request aborted by caller."))}];P=void 0,K.label=1;case 1:return K.trys.push([1,3,5,6]),T={method:r,url:x.uriFor(c,R),headers:Object.assign({},x.defaultHeaders(),E,x.additionalUserHeaders),maxContentLength:1/0,maxBodyLength:1/0,responseType:D,validateStatus:function(W){return W>0},transformResponse:[function(W,J){var Xe=W;return J!==void 0&&typeof W=="string"&&J["content-type"]&&J["content-type"].startsWith("application/json")&&(Xe=JSON.parse(W)),Xe}]},M!==!0&&(T.timeout=x.connectionTimeoutSeconds*1e3),m&&Object.keys(m).length!==0&&(T.params=m),x.sendApiKeyAsQueryParam&&(T.params=T.params||{},T.params["x-typesense-api-key"]=x.apiKey),C&&(typeof C=="string"&&C.length!==0||typeof C=="object"&&Object.keys(C).length!==0)&&(T.data=C),k&&(A=b.default.CancelToken,H=A.source(),P=function(){return H.cancel()},k.addEventListener("abort",P),T.cancelToken=H.token),[4,(0,b.default)(T)];case 2:if(F=K.sent(),F.status>=1&&F.status<=499&&x.setNodeHealthcheck(R,s),x.logger.debug("Request #".concat(I,": Request to Node ").concat(R.index," was made. Response Code was ").concat(F.status,".")),F.status>=200&&F.status<300)return[2,{value:Promise.resolve(F.data)}];if(F.status<500)return[2,{value:Promise.reject(x.customErrorForResponse(F,(a=F.data)===null||a===void 0?void 0:a.message))}];throw x.customErrorForResponse(F,(n=F.data)===null||n===void 0?void 0:n.message);case 3:return U=K.sent(),x.setNodeHealthcheck(R,t),G=U,x.logger.warn("Request #".concat(I,": Request to Node ").concat(R.index,' failed due to "').concat(U.code," ").concat(U.message).concat(U.response==null?"":" - "+JSON.stringify((f=U.response)===null||f===void 0?void 0:f.data),'"')),x.logger.warn("Request #".concat(I,": Sleeping for ").concat(x.retryIntervalSeconds,"s and then retrying request...")),[4,x.timer(x.retryIntervalSeconds)];case 4:return K.sent(),[3,6];case 5:return k&&P&&k.removeEventListener("abort",P),[7];case 6:return[2]}})},x=this,$=1,O.label=1;case 1:return $<=this.numRetriesPerRequest+1?[5,B($)]:[3,4];case 2:if(z=O.sent(),typeof z=="object")return[2,z.value];O.label=3;case 3:return $++,[3,1];case 4:return this.logger.debug("Request #".concat(I,": No retries left. Raising last error")),[2,Promise.reject(G)]}})})},u.prototype.getNextNode=function(r){if(r===void 0&&(r=0),this.nearestNode!=null){if(this.logger.debug("Request #".concat(r,": Nodes Health: Node ").concat(this.nearestNode.index," is ").concat(this.nearestNode.isHealthy===!0?"Healthy":"Unhealthy")),this.nearestNode.isHealthy===!0||this.nodeDueForHealthcheck(this.nearestNode,r))return this.logger.debug("Request #".concat(r,": Updated current node to Node ").concat(this.nearestNode.index)),this.nearestNode;this.logger.debug("Request #".concat(r,": Falling back to individual nodes"))}this.logger.debug("Request #".concat(r,": Nodes Health: ").concat(this.nodes.map(function(a){return"Node ".concat(a.index," is ").concat(a.isHealthy===!0?"Healthy":"Unhealthy")}).join(" || ")));for(var c=this.nodes[0],i=0;i<=this.nodes.length;i++)if(this.currentNodeIndex=(this.currentNodeIndex+1)%this.nodes.length,c=this.nodes[this.currentNodeIndex],c.isHealthy===!0||this.nodeDueForHealthcheck(c,r))return this.logger.debug("Request #".concat(r,": Updated current node to Node ").concat(c.index)),c;return this.logger.debug("Request #".concat(r,": No healthy nodes were found. Returning the next node, Node ").concat(c.index)),c},u.prototype.nodeDueForHealthcheck=function(r,c){c===void 0&&(c=0);var i=Date.now()-r.lastAccessTimestamp>this.healthcheckIntervalSeconds*1e3;return i&&this.logger.debug("Request #".concat(c,": Node ").concat(r.index," has exceeded healtcheckIntervalSeconds of ").concat(this.healthcheckIntervalSeconds,". Adding it back into rotation.")),i},u.prototype.initializeMetadataForNodes=function(){var r=this;this.nearestNode!=null&&(this.nearestNode.index="nearestNode",this.setNodeHealthcheck(this.nearestNode,s)),this.nodes.forEach(function(c,i){c.index=i,r.setNodeHealthcheck(c,s)})},u.prototype.setNodeHealthcheck=function(r,c){r.isHealthy=c,r.lastAccessTimestamp=Date.now()},u.prototype.uriFor=function(r,c){return c.url!=null?"".concat(c.url).concat(r):"".concat(c.protocol,"://").concat(c.host,":").concat(c.port).concat(c.path).concat(r)},u.prototype.defaultHeaders=function(){var r={};return this.sendApiKeyAsQueryParam||(r[o]=this.apiKey),r["Content-Type"]="application/json",r},u.prototype.timer=function(r){return v(this,void 0,void 0,function(){return _(this,function(c){return[2,new Promise(function(i){return setTimeout(i,r*1e3)})]})})},u.prototype.customErrorForResponse=function(r,c){var i="Request failed with HTTP code ".concat(r.status);typeof c=="string"&&c.trim()!==""&&(i+=" | Server said: ".concat(c));var a=new l.default(i);return r.status===400?a=new h.RequestMalformed(i):r.status===401?a=new h.RequestUnauthorized(i):r.status===404?a=new h.ObjectNotFound(i):r.status===409?a=new h.ObjectAlreadyExists(i):r.status===422?a=new h.ObjectUnprocessable(i):r.status>=500&&r.status<=599?a=new h.ServerError(i):a=new h.HTTPError(i),a.httpStatus=r.status,a},u}();return Se.default=e,Se}var Re={},vt;function Y(){if(vt)return Re;vt=1;var v=p&&p.__awaiter||function(h,l,o,s){function t(e){return e instanceof o?e:new o(function(u){u(e)})}return new(o||(o=Promise))(function(e,u){function r(a){try{i(s.next(a))}catch(n){u(n)}}function c(a){try{i(s.throw(a))}catch(n){u(n)}}function i(a){a.done?e(a.value):t(a.value).then(r,c)}i((s=s.apply(h,l||[])).next())})},_=p&&p.__generator||function(h,l){var o={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},s,t,e,u;return u={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function r(i){return function(a){return c([i,a])}}function c(i){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,t&&(e=i[0]&2?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[i[0]&2,e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(e=o.trys,!(e=e.length>0&&e[e.length-1])&&(i[0]===6||i[0]===2)){o=0;continue}if(i[0]===3&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(i[0]===6&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=l.call(h,o)}catch(a){i=[6,a],t=0}finally{s=e=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(Re,"__esModule",{value:!0});var y="/collections",b=function(){function h(l){this.apiCall=l}return h.prototype.create=function(l,o){return o===void 0&&(o={}),v(this,void 0,void 0,function(){return _(this,function(s){return[2,this.apiCall.post(y,l,o)]})})},h.prototype.retrieve=function(){return v(this,void 0,void 0,function(){return _(this,function(l){return[2,this.apiCall.get(y)]})})},Object.defineProperty(h,"RESOURCEPATH",{get:function(){return y},enumerable:!1,configurable:!0}),h}();return Re.default=b,Re}var Ce={},Oe={},V={},Ee={},yt;function tr(){if(yt)return Ee;yt=1;var v=p&&p.__awaiter||function(o,s,t,e){function u(r){return r instanceof t?r:new t(function(c){c(r)})}return new(t||(t=Promise))(function(r,c){function i(f){try{n(e.next(f))}catch(d){c(d)}}function a(f){try{n(e.throw(f))}catch(d){c(d)}}function n(f){f.done?r(f.value):u(f.value).then(i,a)}n((e=e.apply(o,s||[])).next())})},_=p&&p.__generator||function(o,s){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},e,u,r,c;return c={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function i(n){return function(f){return a([n,f])}}function a(n){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,u&&(r=n[0]&2?u.return:n[0]?u.throw||((r=u.return)&&r.call(u),0):u.next)&&!(r=r.call(u,n[1])).done)return r;switch(u=0,r&&(n=[n[0]&2,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,u=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!r||n[1]>r[0]&&n[1]<r[3])){t.label=n[1];break}if(n[0]===6&&t.label<r[1]){t.label=r[1],r=n;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(n);break}r[2]&&t.ops.pop(),t.trys.pop();continue}n=s.call(o,t)}catch(f){n=[6,f],u=0}finally{e=r=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},y=p&&p.__spreadArray||function(o,s,t){if(t||arguments.length===2)for(var e=0,u=s.length,r;e<u;e++)(r||!(e in s))&&(r||(r=Array.prototype.slice.call(s,0,e)),r[e]=s[e]);return o.concat(r||Array.prototype.slice.call(s))};Object.defineProperty(Ee,"__esModule",{value:!0});var b=2*60,h=100,l=function(){function o(){this.responseCache=new Map,this.responsePromiseCache=new Map}return o.prototype.clearCache=function(){this.responseCache=new Map,this.responsePromiseCache=new Map},o.prototype.perform=function(s,t,e,u){return v(this,void 0,void 0,function(){var r,c,i,a,n,f,d,m,C,g,C,w,E,q,N,k,N;return _(this,function(D){switch(D.label){case 0:if(r=u.cacheResponseForSeconds,c=r===void 0?b:r,i=u.maxSize,a=i===void 0?h:i,n=c<=0||a<=0,n)return[2,t.call.apply(t,y([s],e,!1))];if(f=JSON.stringify(e),d=this.responseCache.get(f),m=Date.now(),d){if(C=m-d.requestTimestamp<c*1e3,C)return this.responseCache.delete(f),this.responseCache.set(f,d),[2,Promise.resolve(d.response)];this.responseCache.delete(f)}if(g=this.responsePromiseCache.get(f),g){if(C=m-g.requestTimestamp<c*1e3,C)return this.responsePromiseCache.delete(f),this.responsePromiseCache.set(f,g),[2,g.responsePromise];this.responsePromiseCache.delete(f)}return w=t.call.apply(t,y([s],e,!1)),this.responsePromiseCache.set(f,{requestTimestamp:m,responsePromise:w}),[4,w];case 1:return E=D.sent(),this.responseCache.set(f,{requestTimestamp:m,response:E}),q=this.responseCache.size>a,q&&(N=this.responseCache.keys().next().value,this.responseCache.delete(N)),k=this.responsePromiseCache.size>a,k&&(N=this.responsePromiseCache.keys().next().value,this.responsePromiseCache.delete(N)),[2,E]}})})},o}();return Ee.default=l,Ee}var _t;function rr(){if(_t)return V;_t=1;var v=p&&p.__awaiter||function(s,t,e,u){function r(c){return c instanceof e?c:new e(function(i){i(c)})}return new(e||(e=Promise))(function(c,i){function a(d){try{f(u.next(d))}catch(m){i(m)}}function n(d){try{f(u.throw(d))}catch(m){i(m)}}function f(d){d.done?c(d.value):r(d.value).then(a,n)}f((u=u.apply(s,t||[])).next())})},_=p&&p.__generator||function(s,t){var e={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},u,r,c,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(f){return function(d){return n([f,d])}}function n(f){if(u)throw new TypeError("Generator is already executing.");for(;e;)try{if(u=1,r&&(c=f[0]&2?r.return:f[0]?r.throw||((c=r.return)&&c.call(r),0):r.next)&&!(c=c.call(r,f[1])).done)return c;switch(r=0,c&&(f=[f[0]&2,c.value]),f[0]){case 0:case 1:c=f;break;case 4:return e.label++,{value:f[1],done:!1};case 5:e.label++,r=f[1],f=[0];continue;case 7:f=e.ops.pop(),e.trys.pop();continue;default:if(c=e.trys,!(c=c.length>0&&c[c.length-1])&&(f[0]===6||f[0]===2)){e=0;continue}if(f[0]===3&&(!c||f[1]>c[0]&&f[1]<c[3])){e.label=f[1];break}if(f[0]===6&&e.label<c[1]){e.label=c[1],c=f;break}if(c&&e.label<c[2]){e.label=c[2],e.ops.push(f);break}c[2]&&e.ops.pop(),e.trys.pop();continue}f=t.call(s,e)}catch(d){f=[6,d],r=0}finally{u=c=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},y=p&&p.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(V,"__esModule",{value:!0}),V.SearchOnlyDocuments=void 0;var b=y(tr()),h=y(Y()),l="/documents",o=function(){function s(t,e,u){this.collectionName=t,this.apiCall=e,this.configuration=u,this.requestWithCache=new b.default}return s.prototype.clearCache=function(){this.requestWithCache.clearCache()},s.prototype.search=function(t,e){var u=e===void 0?{}:e,r=u.cacheSearchResultsForSeconds,c=r===void 0?this.configuration.cacheSearchResultsForSeconds:r,i=u.abortSignal,a=i===void 0?null:i;return v(this,void 0,void 0,function(){var n,f,d;return _(this,function(m){n={},this.configuration.useServerSideSearchCache===!0&&(n.use_cache=!0);for(f in t)Array.isArray(t[f])&&(n[f]=t[f].join(","));return d=Object.assign({},t,n),[2,this.requestWithCache.perform(this.apiCall,this.apiCall.get,[this.endpointPath("search"),d,{abortSignal:a}],{cacheResponseForSeconds:c})]})})},s.prototype.endpointPath=function(t){return"".concat(h.default.RESOURCEPATH,"/").concat(this.collectionName).concat(l).concat(t===void 0?"":"/"+t)},Object.defineProperty(s,"RESOURCEPATH",{get:function(){return l},enumerable:!1,configurable:!0}),s}();return V.SearchOnlyDocuments=o,V}var gt;function nr(){if(gt)return Oe;gt=1;var v=p&&p.__extends||function(){var o=function(s,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,u){e.__proto__=u}||function(e,u){for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r])},o(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");o(s,t);function e(){this.constructor=s}s.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_=p&&p.__awaiter||function(o,s,t,e){function u(r){return r instanceof t?r:new t(function(c){c(r)})}return new(t||(t=Promise))(function(r,c){function i(f){try{n(e.next(f))}catch(d){c(d)}}function a(f){try{n(e.throw(f))}catch(d){c(d)}}function n(f){f.done?r(f.value):u(f.value).then(i,a)}n((e=e.apply(o,s||[])).next())})},y=p&&p.__generator||function(o,s){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},e,u,r,c;return c={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function i(n){return function(f){return a([n,f])}}function a(n){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,u&&(r=n[0]&2?u.return:n[0]?u.throw||((r=u.return)&&r.call(u),0):u.next)&&!(r=r.call(u,n[1])).done)return r;switch(u=0,r&&(n=[n[0]&2,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,u=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!r||n[1]>r[0]&&n[1]<r[3])){t.label=n[1];break}if(n[0]===6&&t.label<r[1]){t.label=r[1],r=n;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(n);break}r[2]&&t.ops.pop(),t.trys.pop();continue}n=s.call(o,t)}catch(f){n=[6,f],u=0}finally{e=r=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}};Object.defineProperty(Oe,"__esModule",{value:!0});var b=ce(),h=rr(),l=function(o){v(s,o);function s(t,e,u){return o.call(this,t,e,u)||this}return s.prototype.create=function(t,e){return e===void 0&&(e={}),_(this,void 0,void 0,function(){return y(this,function(u){if(!t)throw new Error("No document provided");return[2,this.apiCall.post(this.endpointPath(),t,e)]})})},s.prototype.upsert=function(t,e){return e===void 0&&(e={}),_(this,void 0,void 0,function(){return y(this,function(u){if(!t)throw new Error("No document provided");return[2,this.apiCall.post(this.endpointPath(),t,Object.assign({},e,{action:"upsert"}))]})})},s.prototype.update=function(t,e){return e===void 0&&(e={}),_(this,void 0,void 0,function(){return y(this,function(u){if(!t)throw new Error("No document provided");return e.filter_by!=null?[2,this.apiCall.patch(this.endpointPath(),t,Object.assign({},e))]:[2,this.apiCall.post(this.endpointPath(),t,Object.assign({},e,{action:"update"}))]})})},s.prototype.delete=function(t){return t===void 0&&(t={}),_(this,void 0,void 0,function(){return y(this,function(e){return typeof t=="string"?[2,this.apiCall.delete(this.endpointPath(t),t)]:[2,this.apiCall.delete(this.endpointPath(),t)]})})},s.prototype.createMany=function(t,e){return e===void 0&&(e={}),_(this,void 0,void 0,function(){return y(this,function(u){return this.configuration.logger.warn("createMany is deprecated and will be removed in a future version. Use import instead, which now takes both an array of documents or a JSONL string of documents"),[2,this.import(t,e)]})})},s.prototype.import=function(t,e){return e===void 0&&(e={}),_(this,void 0,void 0,function(){var u,r,c,i;return y(this,function(a){switch(a.label){case 0:if(Array.isArray(t))try{u=t.map(function(n){return JSON.stringify(n)}).join(`
`)}catch(n){throw RangeError instanceof n&&(n!=null&&n.includes("Too many properties to enumerate"))?new Error("".concat(n,`
          It looks like you have reached a Node.js limit that restricts the number of keys in an Object: https://stackoverflow.com/questions/9282869/are-there-limits-to-the-number-of-properties-in-a-javascript-object

          Please try reducing the number of keys in your document, or using CURL to import your data.
          `)):new Error(n)}else u=t;return[4,this.apiCall.performRequest("post",this.endpointPath("import"),{queryParameters:e,bodyParameters:u,additionalHeaders:{"Content-Type":"text/plain"},skipConnectionTimeout:!0})];case 1:if(r=a.sent(),Array.isArray(t)){if(c=r.split(`
`).map(function(n){return JSON.parse(n)}),i=c.filter(function(n){return n.success===!1}),i.length>0)throw new b.ImportError("".concat(c.length-i.length," documents imported successfully, ").concat(i.length," documents failed during import. Use `error.importResults` from the raised exception to get a detailed error reason for each document."),c);return[2,c]}else return[2,r]}})})},s.prototype.export=function(t){return t===void 0&&(t={}),_(this,void 0,void 0,function(){return y(this,function(e){return[2,this.apiCall.get(this.endpointPath("export"),t)]})})},s.prototype.exportStream=function(t){return t===void 0&&(t={}),_(this,void 0,void 0,function(){return y(this,function(e){return[2,this.apiCall.get(this.endpointPath("export"),t,{responseType:"stream"})]})})},s}(h.SearchOnlyDocuments);return Oe.default=l,Oe}var Pe={},bt;function ir(){if(bt)return Pe;bt=1;var v=p&&p.__awaiter||function(o,s,t,e){function u(r){return r instanceof t?r:new t(function(c){c(r)})}return new(t||(t=Promise))(function(r,c){function i(f){try{n(e.next(f))}catch(d){c(d)}}function a(f){try{n(e.throw(f))}catch(d){c(d)}}function n(f){f.done?r(f.value):u(f.value).then(i,a)}n((e=e.apply(o,s||[])).next())})},_=p&&p.__generator||function(o,s){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},e,u,r,c;return c={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function i(n){return function(f){return a([n,f])}}function a(n){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,u&&(r=n[0]&2?u.return:n[0]?u.throw||((r=u.return)&&r.call(u),0):u.next)&&!(r=r.call(u,n[1])).done)return r;switch(u=0,r&&(n=[n[0]&2,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,u=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!r||n[1]>r[0]&&n[1]<r[3])){t.label=n[1];break}if(n[0]===6&&t.label<r[1]){t.label=r[1],r=n;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(n);break}r[2]&&t.ops.pop(),t.trys.pop();continue}n=s.call(o,t)}catch(f){n=[6,f],u=0}finally{e=r=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},y=p&&p.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Pe,"__esModule",{value:!0});var b=y(Y()),h="/overrides",l=function(){function o(s,t){this.collectionName=s,this.apiCall=t}return o.prototype.upsert=function(s,t){return v(this,void 0,void 0,function(){return _(this,function(e){return[2,this.apiCall.put(this.endpointPath(s),t)]})})},o.prototype.retrieve=function(){return v(this,void 0,void 0,function(){return _(this,function(s){return[2,this.apiCall.get(this.endpointPath())]})})},o.prototype.endpointPath=function(s){return"".concat(b.default.RESOURCEPATH,"/").concat(this.collectionName).concat(o.RESOURCEPATH).concat(s===void 0?"":"/"+s)},Object.defineProperty(o,"RESOURCEPATH",{get:function(){return h},enumerable:!1,configurable:!0}),o}();return Pe.default=l,Pe}var xe={},wt;function Tr(){if(wt)return xe;wt=1;var v=p&&p.__awaiter||function(o,s,t,e){function u(r){return r instanceof t?r:new t(function(c){c(r)})}return new(t||(t=Promise))(function(r,c){function i(f){try{n(e.next(f))}catch(d){c(d)}}function a(f){try{n(e.throw(f))}catch(d){c(d)}}function n(f){f.done?r(f.value):u(f.value).then(i,a)}n((e=e.apply(o,s||[])).next())})},_=p&&p.__generator||function(o,s){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},e,u,r,c;return c={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function i(n){return function(f){return a([n,f])}}function a(n){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,u&&(r=n[0]&2?u.return:n[0]?u.throw||((r=u.return)&&r.call(u),0):u.next)&&!(r=r.call(u,n[1])).done)return r;switch(u=0,r&&(n=[n[0]&2,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,u=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!r||n[1]>r[0]&&n[1]<r[3])){t.label=n[1];break}if(n[0]===6&&t.label<r[1]){t.label=r[1],r=n;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(n);break}r[2]&&t.ops.pop(),t.trys.pop();continue}n=s.call(o,t)}catch(f){n=[6,f],u=0}finally{e=r=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},y=p&&p.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(xe,"__esModule",{value:!0});var b=y(Y()),h=y(ir()),l=function(){function o(s,t,e){this.collectionName=s,this.overrideId=t,this.apiCall=e}return o.prototype.retrieve=function(){return v(this,void 0,void 0,function(){return _(this,function(s){return[2,this.apiCall.get(this.endpointPath())]})})},o.prototype.delete=function(){return v(this,void 0,void 0,function(){return _(this,function(s){return[2,this.apiCall.delete(this.endpointPath())]})})},o.prototype.endpointPath=function(){return"".concat(b.default.RESOURCEPATH,"/").concat(this.collectionName).concat(h.default.RESOURCEPATH,"/").concat(this.overrideId)},o}();return xe.default=l,xe}var Te={},mt;function ar(){if(mt)return Te;mt=1;var v=p&&p.__awaiter||function(o,s,t,e){function u(r){return r instanceof t?r:new t(function(c){c(r)})}return new(t||(t=Promise))(function(r,c){function i(f){try{n(e.next(f))}catch(d){c(d)}}function a(f){try{n(e.throw(f))}catch(d){c(d)}}function n(f){f.done?r(f.value):u(f.value).then(i,a)}n((e=e.apply(o,s||[])).next())})},_=p&&p.__generator||function(o,s){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},e,u,r,c;return c={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function i(n){return function(f){return a([n,f])}}function a(n){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,u&&(r=n[0]&2?u.return:n[0]?u.throw||((r=u.return)&&r.call(u),0):u.next)&&!(r=r.call(u,n[1])).done)return r;switch(u=0,r&&(n=[n[0]&2,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,u=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!r||n[1]>r[0]&&n[1]<r[3])){t.label=n[1];break}if(n[0]===6&&t.label<r[1]){t.label=r[1],r=n;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(n);break}r[2]&&t.ops.pop(),t.trys.pop();continue}n=s.call(o,t)}catch(f){n=[6,f],u=0}finally{e=r=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},y=p&&p.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Te,"__esModule",{value:!0});var b=y(Y()),h="/synonyms",l=function(){function o(s,t){this.collectionName=s,this.apiCall=t}return o.prototype.upsert=function(s,t){return v(this,void 0,void 0,function(){return _(this,function(e){return[2,this.apiCall.put(this.endpointPath(s),t)]})})},o.prototype.retrieve=function(){return v(this,void 0,void 0,function(){return _(this,function(s){return[2,this.apiCall.get(this.endpointPath())]})})},o.prototype.endpointPath=function(s){return"".concat(b.default.RESOURCEPATH,"/").concat(this.collectionName).concat(o.RESOURCEPATH).concat(s===void 0?"":"/"+s)},Object.defineProperty(o,"RESOURCEPATH",{get:function(){return h},enumerable:!1,configurable:!0}),o}();return Te.default=l,Te}var Ae={},St;function Ar(){if(St)return Ae;St=1;var v=p&&p.__awaiter||function(o,s,t,e){function u(r){return r instanceof t?r:new t(function(c){c(r)})}return new(t||(t=Promise))(function(r,c){function i(f){try{n(e.next(f))}catch(d){c(d)}}function a(f){try{n(e.throw(f))}catch(d){c(d)}}function n(f){f.done?r(f.value):u(f.value).then(i,a)}n((e=e.apply(o,s||[])).next())})},_=p&&p.__generator||function(o,s){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},e,u,r,c;return c={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function i(n){return function(f){return a([n,f])}}function a(n){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,u&&(r=n[0]&2?u.return:n[0]?u.throw||((r=u.return)&&r.call(u),0):u.next)&&!(r=r.call(u,n[1])).done)return r;switch(u=0,r&&(n=[n[0]&2,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,u=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!r||n[1]>r[0]&&n[1]<r[3])){t.label=n[1];break}if(n[0]===6&&t.label<r[1]){t.label=r[1],r=n;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(n);break}r[2]&&t.ops.pop(),t.trys.pop();continue}n=s.call(o,t)}catch(f){n=[6,f],u=0}finally{e=r=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},y=p&&p.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ae,"__esModule",{value:!0});var b=y(Y()),h=y(ar()),l=function(){function o(s,t,e){this.collectionName=s,this.synonymId=t,this.apiCall=e}return o.prototype.retrieve=function(){return v(this,void 0,void 0,function(){return _(this,function(s){return[2,this.apiCall.get(this.endpointPath())]})})},o.prototype.delete=function(){return v(this,void 0,void 0,function(){return _(this,function(s){return[2,this.apiCall.delete(this.endpointPath())]})})},o.prototype.endpointPath=function(){return"".concat(b.default.RESOURCEPATH,"/").concat(this.collectionName).concat(h.default.RESOURCEPATH,"/").concat(this.synonymId)},o}();return Ae.default=l,Ae}var ee={},Rt;function jr(){if(Rt)return ee;Rt=1;var v=p&&p.__awaiter||function(o,s,t,e){function u(r){return r instanceof t?r:new t(function(c){c(r)})}return new(t||(t=Promise))(function(r,c){function i(f){try{n(e.next(f))}catch(d){c(d)}}function a(f){try{n(e.throw(f))}catch(d){c(d)}}function n(f){f.done?r(f.value):u(f.value).then(i,a)}n((e=e.apply(o,s||[])).next())})},_=p&&p.__generator||function(o,s){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},e,u,r,c;return c={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function i(n){return function(f){return a([n,f])}}function a(n){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,u&&(r=n[0]&2?u.return:n[0]?u.throw||((r=u.return)&&r.call(u),0):u.next)&&!(r=r.call(u,n[1])).done)return r;switch(u=0,r&&(n=[n[0]&2,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,u=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!r||n[1]>r[0]&&n[1]<r[3])){t.label=n[1];break}if(n[0]===6&&t.label<r[1]){t.label=r[1],r=n;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(n);break}r[2]&&t.ops.pop(),t.trys.pop();continue}n=s.call(o,t)}catch(f){n=[6,f],u=0}finally{e=r=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},y=p&&p.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(ee,"__esModule",{value:!0}),ee.Document=void 0;var b=y(Y()),h=y(nr()),l=function(){function o(s,t,e){this.collectionName=s,this.documentId=t,this.apiCall=e}return o.prototype.retrieve=function(){return v(this,void 0,void 0,function(){return _(this,function(s){return[2,this.apiCall.get(this.endpointPath())]})})},o.prototype.delete=function(){return v(this,void 0,void 0,function(){return _(this,function(s){return[2,this.apiCall.delete(this.endpointPath())]})})},o.prototype.update=function(s,t){return t===void 0&&(t={}),v(this,void 0,void 0,function(){return _(this,function(e){return[2,this.apiCall.patch(this.endpointPath(),s,t)]})})},o.prototype.endpointPath=function(){return"".concat(b.default.RESOURCEPATH,"/").concat(this.collectionName).concat(h.default.RESOURCEPATH,"/").concat(this.documentId)},o}();return ee.Document=l,ee}var Ct;function kr(){if(Ct)return Ce;Ct=1;var v=p&&p.__awaiter||function(c,i,a,n){function f(d){return d instanceof a?d:new a(function(m){m(d)})}return new(a||(a=Promise))(function(d,m){function g(E){try{w(n.next(E))}catch(q){m(q)}}function C(E){try{w(n.throw(E))}catch(q){m(q)}}function w(E){E.done?d(E.value):f(E.value).then(g,C)}w((n=n.apply(c,i||[])).next())})},_=p&&p.__generator||function(c,i){var a={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},n,f,d,m;return m={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function g(w){return function(E){return C([w,E])}}function C(w){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,f&&(d=w[0]&2?f.return:w[0]?f.throw||((d=f.return)&&d.call(f),0):f.next)&&!(d=d.call(f,w[1])).done)return d;switch(f=0,d&&(w=[w[0]&2,d.value]),w[0]){case 0:case 1:d=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,f=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(d=a.trys,!(d=d.length>0&&d[d.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!d||w[1]>d[0]&&w[1]<d[3])){a.label=w[1];break}if(w[0]===6&&a.label<d[1]){a.label=d[1],d=w;break}if(d&&a.label<d[2]){a.label=d[2],a.ops.push(w);break}d[2]&&a.ops.pop(),a.trys.pop();continue}w=i.call(c,a)}catch(E){w=[6,E],f=0}finally{n=d=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},y=p&&p.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Ce,"__esModule",{value:!0});var b=y(Y()),h=y(nr()),l=ce(),o=y(ir()),s=y(Tr()),t=y(ar()),e=y(Ar()),u=jr(),r=function(){function c(i,a,n){this.name=i,this.apiCall=a,this.configuration=n,this.individualDocuments={},this.individualOverrides={},this.individualSynonyms={},this.name=i,this.apiCall=a,this.configuration=n,this._documents=new h.default(this.name,this.apiCall,this.configuration),this._overrides=new o.default(this.name,this.apiCall),this._synonyms=new t.default(this.name,this.apiCall)}return c.prototype.retrieve=function(){return v(this,void 0,void 0,function(){return _(this,function(i){return[2,this.apiCall.get(this.endpointPath())]})})},c.prototype.update=function(i){return v(this,void 0,void 0,function(){return _(this,function(a){return[2,this.apiCall.patch(this.endpointPath(),i)]})})},c.prototype.delete=function(){return v(this,void 0,void 0,function(){return _(this,function(i){return[2,this.apiCall.delete(this.endpointPath())]})})},c.prototype.exists=function(){return v(this,void 0,void 0,function(){var i;return _(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.retrieve()];case 1:return a.sent(),[2,!0];case 2:if(i=a.sent(),i instanceof l.ObjectNotFound)return[2,!1];throw i;case 3:return[2]}})})},c.prototype.documents=function(i){return i?(this.individualDocuments[i]===void 0&&(this.individualDocuments[i]=new u.Document(this.name,i,this.apiCall)),this.individualDocuments[i]):this._documents},c.prototype.overrides=function(i){return i===void 0?this._overrides:(this.individualOverrides[i]===void 0&&(this.individualOverrides[i]=new s.default(this.name,i,this.apiCall)),this.individualOverrides[i])},c.prototype.synonyms=function(i){return i===void 0?this._synonyms:(this.individualSynonyms[i]===void 0&&(this.individualSynonyms[i]=new e.default(this.name,i,this.apiCall)),this.individualSynonyms[i])},c.prototype.endpointPath=function(){return"".concat(b.default.RESOURCEPATH,"/").concat(this.name)},c}();return Ce.default=r,Ce}var je={},Ot;function or(){if(Ot)return je;Ot=1;var v=p&&p.__awaiter||function(h,l,o,s){function t(e){return e instanceof o?e:new o(function(u){u(e)})}return new(o||(o=Promise))(function(e,u){function r(a){try{i(s.next(a))}catch(n){u(n)}}function c(a){try{i(s.throw(a))}catch(n){u(n)}}function i(a){a.done?e(a.value):t(a.value).then(r,c)}i((s=s.apply(h,l||[])).next())})},_=p&&p.__generator||function(h,l){var o={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},s,t,e,u;return u={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function r(i){return function(a){return c([i,a])}}function c(i){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,t&&(e=i[0]&2?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[i[0]&2,e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(e=o.trys,!(e=e.length>0&&e[e.length-1])&&(i[0]===6||i[0]===2)){o=0;continue}if(i[0]===3&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(i[0]===6&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=l.call(h,o)}catch(a){i=[6,a],t=0}finally{s=e=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(je,"__esModule",{value:!0});var y="/aliases",b=function(){function h(l){this.apiCall=l}return h.prototype.upsert=function(l,o){return v(this,void 0,void 0,function(){return _(this,function(s){return[2,this.apiCall.put(this.endpointPath(l),o)]})})},h.prototype.retrieve=function(){return v(this,void 0,void 0,function(){return _(this,function(l){return[2,this.apiCall.get(y)]})})},h.prototype.endpointPath=function(l){return"".concat(h.RESOURCEPATH,"/").concat(l)},Object.defineProperty(h,"RESOURCEPATH",{get:function(){return y},enumerable:!1,configurable:!0}),h}();return je.default=b,je}var ke={},Et;function qr(){if(Et)return ke;Et=1;var v=p&&p.__awaiter||function(l,o,s,t){function e(u){return u instanceof s?u:new s(function(r){r(u)})}return new(s||(s=Promise))(function(u,r){function c(n){try{a(t.next(n))}catch(f){r(f)}}function i(n){try{a(t.throw(n))}catch(f){r(f)}}function a(n){n.done?u(n.value):e(n.value).then(c,i)}a((t=t.apply(l,o||[])).next())})},_=p&&p.__generator||function(l,o){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},t,e,u,r;return r={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function c(a){return function(n){return i([a,n])}}function i(a){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,e&&(u=a[0]&2?e.return:a[0]?e.throw||((u=e.return)&&u.call(e),0):e.next)&&!(u=u.call(e,a[1])).done)return u;switch(e=0,u&&(a=[a[0]&2,u.value]),a[0]){case 0:case 1:u=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,e=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(a[0]===6||a[0]===2)){s=0;continue}if(a[0]===3&&(!u||a[1]>u[0]&&a[1]<u[3])){s.label=a[1];break}if(a[0]===6&&s.label<u[1]){s.label=u[1],u=a;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(a);break}u[2]&&s.ops.pop(),s.trys.pop();continue}a=o.call(l,s)}catch(n){a=[6,n],e=0}finally{t=u=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},y=p&&p.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(ke,"__esModule",{value:!0});var b=y(or()),h=function(){function l(o,s){this.name=o,this.apiCall=s}return l.prototype.retrieve=function(){return v(this,void 0,void 0,function(){return _(this,function(o){return[2,this.apiCall.get(this.endpointPath())]})})},l.prototype.delete=function(){return v(this,void 0,void 0,function(){return _(this,function(o){return[2,this.apiCall.delete(this.endpointPath())]})})},l.prototype.endpointPath=function(){return"".concat(b.default.RESOURCEPATH,"/").concat(this.name)},l}();return ke.default=h,ke}var qe={},Pt;function ur(){if(Pt)return qe;Pt=1;var v=p&&p.__awaiter||function(l,o,s,t){function e(u){return u instanceof s?u:new s(function(r){r(u)})}return new(s||(s=Promise))(function(u,r){function c(n){try{a(t.next(n))}catch(f){r(f)}}function i(n){try{a(t.throw(n))}catch(f){r(f)}}function a(n){n.done?u(n.value):e(n.value).then(c,i)}a((t=t.apply(l,o||[])).next())})},_=p&&p.__generator||function(l,o){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},t,e,u,r;return r={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function c(a){return function(n){return i([a,n])}}function i(a){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,e&&(u=a[0]&2?e.return:a[0]?e.throw||((u=e.return)&&u.call(e),0):e.next)&&!(u=u.call(e,a[1])).done)return u;switch(e=0,u&&(a=[a[0]&2,u.value]),a[0]){case 0:case 1:u=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,e=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(a[0]===6||a[0]===2)){s=0;continue}if(a[0]===3&&(!u||a[1]>u[0]&&a[1]<u[3])){s.label=a[1];break}if(a[0]===6&&s.label<u[1]){s.label=u[1],u=a;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(a);break}u[2]&&s.ops.pop(),s.trys.pop();continue}a=o.call(l,s)}catch(n){a=[6,n],e=0}finally{t=u=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(qe,"__esModule",{value:!0});var y=vr,b="/keys",h=function(){function l(o){this.apiCall=o,this.apiCall=o}return l.prototype.create=function(o){return v(this,void 0,void 0,function(){return _(this,function(s){return[2,this.apiCall.post(l.RESOURCEPATH,o)]})})},l.prototype.retrieve=function(){return v(this,void 0,void 0,function(){return _(this,function(o){return[2,this.apiCall.get(b)]})})},l.prototype.generateScopedSearchKey=function(o,s){var t=JSON.stringify(s),e=Buffer.from((0,y.createHmac)("sha256",o).update(t).digest("base64")),u=o.substr(0,4),r="".concat(e).concat(u).concat(t);return Buffer.from(r).toString("base64")},Object.defineProperty(l,"RESOURCEPATH",{get:function(){return b},enumerable:!1,configurable:!0}),l}();return qe.default=h,qe}var Me={},xt;function Mr(){if(xt)return Me;xt=1;var v=p&&p.__awaiter||function(l,o,s,t){function e(u){return u instanceof s?u:new s(function(r){r(u)})}return new(s||(s=Promise))(function(u,r){function c(n){try{a(t.next(n))}catch(f){r(f)}}function i(n){try{a(t.throw(n))}catch(f){r(f)}}function a(n){n.done?u(n.value):e(n.value).then(c,i)}a((t=t.apply(l,o||[])).next())})},_=p&&p.__generator||function(l,o){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},t,e,u,r;return r={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function c(a){return function(n){return i([a,n])}}function i(a){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,e&&(u=a[0]&2?e.return:a[0]?e.throw||((u=e.return)&&u.call(e),0):e.next)&&!(u=u.call(e,a[1])).done)return u;switch(e=0,u&&(a=[a[0]&2,u.value]),a[0]){case 0:case 1:u=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,e=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(a[0]===6||a[0]===2)){s=0;continue}if(a[0]===3&&(!u||a[1]>u[0]&&a[1]<u[3])){s.label=a[1];break}if(a[0]===6&&s.label<u[1]){s.label=u[1],u=a;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(a);break}u[2]&&s.ops.pop(),s.trys.pop();continue}a=o.call(l,s)}catch(n){a=[6,n],e=0}finally{t=u=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},y=p&&p.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Me,"__esModule",{value:!0});var b=y(ur()),h=function(){function l(o,s){this.id=o,this.apiCall=s}return l.prototype.retrieve=function(){return v(this,void 0,void 0,function(){return _(this,function(o){return[2,this.apiCall.get(this.endpointPath())]})})},l.prototype.delete=function(){return v(this,void 0,void 0,function(){return _(this,function(o){return[2,this.apiCall.delete(this.endpointPath())]})})},l.prototype.endpointPath=function(){return"".concat(b.default.RESOURCEPATH,"/").concat(this.id)},l}();return Me.default=h,Me}var Ne={},Tt;function Nr(){if(Tt)return Ne;Tt=1;var v=p&&p.__awaiter||function(h,l,o,s){function t(e){return e instanceof o?e:new o(function(u){u(e)})}return new(o||(o=Promise))(function(e,u){function r(a){try{i(s.next(a))}catch(n){u(n)}}function c(a){try{i(s.throw(a))}catch(n){u(n)}}function i(a){a.done?e(a.value):t(a.value).then(r,c)}i((s=s.apply(h,l||[])).next())})},_=p&&p.__generator||function(h,l){var o={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},s,t,e,u;return u={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function r(i){return function(a){return c([i,a])}}function c(i){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,t&&(e=i[0]&2?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[i[0]&2,e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(e=o.trys,!(e=e.length>0&&e[e.length-1])&&(i[0]===6||i[0]===2)){o=0;continue}if(i[0]===3&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(i[0]===6&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=l.call(h,o)}catch(a){i=[6,a],t=0}finally{s=e=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(Ne,"__esModule",{value:!0});var y="/debug",b=function(){function h(l){this.apiCall=l}return h.prototype.retrieve=function(){return v(this,void 0,void 0,function(){return _(this,function(l){return[2,this.apiCall.get(y)]})})},h}();return Ne.default=b,Ne}var Fe={},At;function Fr(){if(At)return Fe;At=1;var v=p&&p.__awaiter||function(h,l,o,s){function t(e){return e instanceof o?e:new o(function(u){u(e)})}return new(o||(o=Promise))(function(e,u){function r(a){try{i(s.next(a))}catch(n){u(n)}}function c(a){try{i(s.throw(a))}catch(n){u(n)}}function i(a){a.done?e(a.value):t(a.value).then(r,c)}i((s=s.apply(h,l||[])).next())})},_=p&&p.__generator||function(h,l){var o={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},s,t,e,u;return u={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function r(i){return function(a){return c([i,a])}}function c(i){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,t&&(e=i[0]&2?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[i[0]&2,e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(e=o.trys,!(e=e.length>0&&e[e.length-1])&&(i[0]===6||i[0]===2)){o=0;continue}if(i[0]===3&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(i[0]===6&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=l.call(h,o)}catch(a){i=[6,a],t=0}finally{s=e=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(Fe,"__esModule",{value:!0});var y="/metrics.json",b=function(){function h(l){this.apiCall=l}return h.prototype.retrieve=function(){return v(this,void 0,void 0,function(){return _(this,function(l){return[2,this.apiCall.get(y)]})})},h}();return Fe.default=b,Fe}var De={},jt;function Dr(){if(jt)return De;jt=1;var v=p&&p.__awaiter||function(h,l,o,s){function t(e){return e instanceof o?e:new o(function(u){u(e)})}return new(o||(o=Promise))(function(e,u){function r(a){try{i(s.next(a))}catch(n){u(n)}}function c(a){try{i(s.throw(a))}catch(n){u(n)}}function i(a){a.done?e(a.value):t(a.value).then(r,c)}i((s=s.apply(h,l||[])).next())})},_=p&&p.__generator||function(h,l){var o={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},s,t,e,u;return u={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function r(i){return function(a){return c([i,a])}}function c(i){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,t&&(e=i[0]&2?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[i[0]&2,e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(e=o.trys,!(e=e.length>0&&e[e.length-1])&&(i[0]===6||i[0]===2)){o=0;continue}if(i[0]===3&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(i[0]===6&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=l.call(h,o)}catch(a){i=[6,a],t=0}finally{s=e=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(De,"__esModule",{value:!0});var y="/health",b=function(){function h(l){this.apiCall=l}return h.prototype.retrieve=function(){return v(this,void 0,void 0,function(){return _(this,function(l){return[2,this.apiCall.get(y)]})})},h}();return De.default=b,De}var He={},kt;function Hr(){if(kt)return He;kt=1;var v=p&&p.__awaiter||function(h,l,o,s){function t(e){return e instanceof o?e:new o(function(u){u(e)})}return new(o||(o=Promise))(function(e,u){function r(a){try{i(s.next(a))}catch(n){u(n)}}function c(a){try{i(s.throw(a))}catch(n){u(n)}}function i(a){a.done?e(a.value):t(a.value).then(r,c)}i((s=s.apply(h,l||[])).next())})},_=p&&p.__generator||function(h,l){var o={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},s,t,e,u;return u={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function r(i){return function(a){return c([i,a])}}function c(i){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,t&&(e=i[0]&2?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[i[0]&2,e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(e=o.trys,!(e=e.length>0&&e[e.length-1])&&(i[0]===6||i[0]===2)){o=0;continue}if(i[0]===3&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(i[0]===6&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=l.call(h,o)}catch(a){i=[6,a],t=0}finally{s=e=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(He,"__esModule",{value:!0});var y="/operations",b=function(){function h(l){this.apiCall=l}return h.prototype.perform=function(l,o){return o===void 0&&(o={}),v(this,void 0,void 0,function(){return _(this,function(s){return[2,this.apiCall.post("".concat(y,"/").concat(l),{},o)]})})},h}();return He.default=b,He}var Ie={},qt;function sr(){if(qt)return Ie;qt=1;var v=p&&p.__awaiter||function(o,s,t,e){function u(r){return r instanceof t?r:new t(function(c){c(r)})}return new(t||(t=Promise))(function(r,c){function i(f){try{n(e.next(f))}catch(d){c(d)}}function a(f){try{n(e.throw(f))}catch(d){c(d)}}function n(f){f.done?r(f.value):u(f.value).then(i,a)}n((e=e.apply(o,s||[])).next())})},_=p&&p.__generator||function(o,s){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},e,u,r,c;return c={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function i(n){return function(f){return a([n,f])}}function a(n){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,u&&(r=n[0]&2?u.return:n[0]?u.throw||((r=u.return)&&r.call(u),0):u.next)&&!(r=r.call(u,n[1])).done)return r;switch(u=0,r&&(n=[n[0]&2,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,u=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!r||n[1]>r[0]&&n[1]<r[3])){t.label=n[1];break}if(n[0]===6&&t.label<r[1]){t.label=r[1],r=n;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(n);break}r[2]&&t.ops.pop(),t.trys.pop();continue}n=s.call(o,t)}catch(f){n=[6,f],u=0}finally{e=r=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},y=p&&p.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ie,"__esModule",{value:!0});var b=y(tr()),h="/multi_search",l=function(){function o(s,t,e){e===void 0&&(e=!1),this.apiCall=s,this.configuration=t,this.useTextContentType=e,this.requestWithCache=new b.default}return o.prototype.clearCache=function(){this.requestWithCache.clearCache()},o.prototype.perform=function(s,t,e){t===void 0&&(t={});var u=e===void 0?{}:e,r=u.cacheSearchResultsForSeconds,c=r===void 0?this.configuration.cacheSearchResultsForSeconds:r;return v(this,void 0,void 0,function(){var i,a,n;return _(this,function(f){return i={},this.useTextContentType&&(i["content-type"]="text/plain"),a={},this.configuration.useServerSideSearchCache===!0&&(a.use_cache=!0),n=Object.assign({},t,a),[2,this.requestWithCache.perform(this.apiCall,this.apiCall.post,[h,s,n,i],{cacheResponseForSeconds:c})]})})},o}();return Ie.default=l,Ie}var Le={},Mt;function cr(){if(Mt)return Le;Mt=1;var v=p&&p.__awaiter||function(h,l,o,s){function t(e){return e instanceof o?e:new o(function(u){u(e)})}return new(o||(o=Promise))(function(e,u){function r(a){try{i(s.next(a))}catch(n){u(n)}}function c(a){try{i(s.throw(a))}catch(n){u(n)}}function i(a){a.done?e(a.value):t(a.value).then(r,c)}i((s=s.apply(h,l||[])).next())})},_=p&&p.__generator||function(h,l){var o={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},s,t,e,u;return u={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function r(i){return function(a){return c([i,a])}}function c(i){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,t&&(e=i[0]&2?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[i[0]&2,e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(e=o.trys,!(e=e.length>0&&e[e.length-1])&&(i[0]===6||i[0]===2)){o=0;continue}if(i[0]===3&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(i[0]===6&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=l.call(h,o)}catch(a){i=[6,a],t=0}finally{s=e=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(Le,"__esModule",{value:!0});var y="/presets",b=function(){function h(l){this.apiCall=l}return h.prototype.upsert=function(l,o){return v(this,void 0,void 0,function(){return _(this,function(s){return[2,this.apiCall.put(this.endpointPath(l),o)]})})},h.prototype.retrieve=function(){return v(this,void 0,void 0,function(){return _(this,function(l){return[2,this.apiCall.get(this.endpointPath())]})})},h.prototype.endpointPath=function(l){return"".concat(h.RESOURCEPATH).concat(l===void 0?"":"/"+l)},Object.defineProperty(h,"RESOURCEPATH",{get:function(){return y},enumerable:!1,configurable:!0}),h}();return Le.default=b,Le}var Ue={},Nt;function Ir(){if(Nt)return Ue;Nt=1;var v=p&&p.__awaiter||function(l,o,s,t){function e(u){return u instanceof s?u:new s(function(r){r(u)})}return new(s||(s=Promise))(function(u,r){function c(n){try{a(t.next(n))}catch(f){r(f)}}function i(n){try{a(t.throw(n))}catch(f){r(f)}}function a(n){n.done?u(n.value):e(n.value).then(c,i)}a((t=t.apply(l,o||[])).next())})},_=p&&p.__generator||function(l,o){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},t,e,u,r;return r={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function c(a){return function(n){return i([a,n])}}function i(a){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,e&&(u=a[0]&2?e.return:a[0]?e.throw||((u=e.return)&&u.call(e),0):e.next)&&!(u=u.call(e,a[1])).done)return u;switch(e=0,u&&(a=[a[0]&2,u.value]),a[0]){case 0:case 1:u=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,e=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(a[0]===6||a[0]===2)){s=0;continue}if(a[0]===3&&(!u||a[1]>u[0]&&a[1]<u[3])){s.label=a[1];break}if(a[0]===6&&s.label<u[1]){s.label=u[1],u=a;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(a);break}u[2]&&s.ops.pop(),s.trys.pop();continue}a=o.call(l,s)}catch(n){a=[6,n],e=0}finally{t=u=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},y=p&&p.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ue,"__esModule",{value:!0});var b=y(cr()),h=function(){function l(o,s){this.presetId=o,this.apiCall=s}return l.prototype.retrieve=function(){return v(this,void 0,void 0,function(){return _(this,function(o){return[2,this.apiCall.get(this.endpointPath())]})})},l.prototype.delete=function(){return v(this,void 0,void 0,function(){return _(this,function(o){return[2,this.apiCall.delete(this.endpointPath())]})})},l.prototype.endpointPath=function(){return"".concat(b.default.RESOURCEPATH,"/").concat(this.presetId)},l}();return Ue.default=h,Ue}var $e={},Ge={},Ft;function lr(){if(Ft)return Ge;Ft=1;var v=p&&p.__awaiter||function(h,l,o,s){function t(e){return e instanceof o?e:new o(function(u){u(e)})}return new(o||(o=Promise))(function(e,u){function r(a){try{i(s.next(a))}catch(n){u(n)}}function c(a){try{i(s.throw(a))}catch(n){u(n)}}function i(a){a.done?e(a.value):t(a.value).then(r,c)}i((s=s.apply(h,l||[])).next())})},_=p&&p.__generator||function(h,l){var o={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},s,t,e,u;return u={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function r(i){return function(a){return c([i,a])}}function c(i){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,t&&(e=i[0]&2?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[i[0]&2,e.value]),i[0]){case 0:case 1:e=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(e=o.trys,!(e=e.length>0&&e[e.length-1])&&(i[0]===6||i[0]===2)){o=0;continue}if(i[0]===3&&(!e||i[1]>e[0]&&i[1]<e[3])){o.label=i[1];break}if(i[0]===6&&o.label<e[1]){o.label=e[1],e=i;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(i);break}e[2]&&o.ops.pop(),o.trys.pop();continue}i=l.call(h,o)}catch(a){i=[6,a],t=0}finally{s=e=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(Ge,"__esModule",{value:!0});var y="/analytics/rules",b=function(){function h(l){this.apiCall=l,this.apiCall=l}return h.prototype.upsert=function(l,o){return v(this,void 0,void 0,function(){return _(this,function(s){return[2,this.apiCall.put(this.endpointPath(l),o)]})})},h.prototype.retrieve=function(){return v(this,void 0,void 0,function(){return _(this,function(l){return[2,this.apiCall.get(this.endpointPath())]})})},h.prototype.endpointPath=function(l){return"".concat(h.RESOURCEPATH).concat(l===void 0?"":"/"+l)},Object.defineProperty(h,"RESOURCEPATH",{get:function(){return y},enumerable:!1,configurable:!0}),h}();return Ge.default=b,Ge}var Ke={},Dt;function Lr(){if(Dt)return Ke;Dt=1;var v=p&&p.__awaiter||function(l,o,s,t){function e(u){return u instanceof s?u:new s(function(r){r(u)})}return new(s||(s=Promise))(function(u,r){function c(n){try{a(t.next(n))}catch(f){r(f)}}function i(n){try{a(t.throw(n))}catch(f){r(f)}}function a(n){n.done?u(n.value):e(n.value).then(c,i)}a((t=t.apply(l,o||[])).next())})},_=p&&p.__generator||function(l,o){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},t,e,u,r;return r={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function c(a){return function(n){return i([a,n])}}function i(a){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,e&&(u=a[0]&2?e.return:a[0]?e.throw||((u=e.return)&&u.call(e),0):e.next)&&!(u=u.call(e,a[1])).done)return u;switch(e=0,u&&(a=[a[0]&2,u.value]),a[0]){case 0:case 1:u=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,e=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(a[0]===6||a[0]===2)){s=0;continue}if(a[0]===3&&(!u||a[1]>u[0]&&a[1]<u[3])){s.label=a[1];break}if(a[0]===6&&s.label<u[1]){s.label=u[1],u=a;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(a);break}u[2]&&s.ops.pop(),s.trys.pop();continue}a=o.call(l,s)}catch(n){a=[6,n],e=0}finally{t=u=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},y=p&&p.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ke,"__esModule",{value:!0});var b=y(lr()),h=function(){function l(o,s){this.name=o,this.apiCall=s}return l.prototype.retrieve=function(){return v(this,void 0,void 0,function(){return _(this,function(o){return[2,this.apiCall.get(this.endpointPath())]})})},l.prototype.delete=function(){return v(this,void 0,void 0,function(){return _(this,function(o){return[2,this.apiCall.delete(this.endpointPath())]})})},l.prototype.endpointPath=function(){return"".concat(b.default.RESOURCEPATH,"/").concat(this.name)},l}();return Ke.default=h,Ke}var Ht;function Ur(){if(Ht)return $e;Ht=1;var v=p&&p.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty($e,"__esModule",{value:!0});var _=v(lr()),y=v(Lr()),b="/analytics",h=function(){function l(o){this.apiCall=o,this.individualAnalyticsRules={},this.apiCall=o,this._analyticsRules=new _.default(this.apiCall)}return l.prototype.rules=function(o){return o===void 0?this._analyticsRules:(this.individualAnalyticsRules[o]===void 0&&(this.individualAnalyticsRules[o]=new y.default(o,this.apiCall)),this.individualAnalyticsRules[o])},Object.defineProperty(l,"RESOURCEPATH",{get:function(){return b},enumerable:!1,configurable:!0}),l}();return $e.default=h,$e}var It;function $r(){if(It)return le;It=1;var v=p&&p.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(le,"__esModule",{value:!0});var _=v(Vt()),y=v(er()),b=v(Y()),h=v(kr()),l=v(or()),o=v(qr()),s=v(ur()),t=v(Mr()),e=v(Nr()),u=v(Fr()),r=v(Dr()),c=v(Hr()),i=v(sr()),a=v(cr()),n=v(Ir()),f=v(Ur()),d=function(){function m(g){var C;g.sendApiKeyAsQueryParam=(C=g.sendApiKeyAsQueryParam)!==null&&C!==void 0?C:!1,this.configuration=new _.default(g),this.apiCall=new y.default(this.configuration),this.debug=new e.default(this.apiCall),this.metrics=new u.default(this.apiCall),this.health=new r.default(this.apiCall),this.operations=new c.default(this.apiCall),this.multiSearch=new i.default(this.apiCall,this.configuration),this._collections=new b.default(this.apiCall),this.individualCollections={},this._aliases=new l.default(this.apiCall),this.individualAliases={},this._keys=new s.default(this.apiCall),this.individualKeys={},this._presets=new a.default(this.apiCall),this.individualPresets={},this.analytics=new f.default(this.apiCall)}return m.prototype.collections=function(g){return g===void 0?this._collections:(this.individualCollections[g]===void 0&&(this.individualCollections[g]=new h.default(g,this.apiCall,this.configuration)),this.individualCollections[g])},m.prototype.aliases=function(g){return g===void 0?this._aliases:(this.individualAliases[g]===void 0&&(this.individualAliases[g]=new o.default(g,this.apiCall)),this.individualAliases[g])},m.prototype.keys=function(g){return g===void 0?this._keys:(this.individualKeys[g]===void 0&&(this.individualKeys[g]=new t.default(g,this.apiCall)),this.individualKeys[g])},m.prototype.presets=function(g){return g===void 0?this._presets:(this.individualPresets[g]===void 0&&(this.individualPresets[g]=new n.default(g,this.apiCall)),this.individualPresets[g])},m}();return le.default=d,le}var We={},te={},Lt;function Gr(){if(Lt)return te;Lt=1,Object.defineProperty(te,"__esModule",{value:!0}),te.SearchOnlyCollection=void 0;var v=rr(),_=function(){function y(b,h,l){this.name=b,this.apiCall=h,this.configuration=l,this._documents=new v.SearchOnlyDocuments(this.name,this.apiCall,this.configuration)}return y.prototype.documents=function(){return this._documents},y}();return te.SearchOnlyCollection=_,te}var Ut;function Kr(){if(Ut)return We;Ut=1;var v=p&&p.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(We,"__esModule",{value:!0});var _=v(Vt()),y=v(er()),b=v(sr()),h=Gr(),l=function(){function o(s){var t;s.sendApiKeyAsQueryParam=(t=s.sendApiKeyAsQueryParam)!==null&&t!==void 0?t:!0,s.sendApiKeyAsQueryParam===!0&&(s.apiKey||"").length>2e3&&(console.warn("[typesense] API Key is longer than 2000 characters which is over the allowed limit, so disabling sending it as a query parameter."),s.sendApiKeyAsQueryParam=!1),this.configuration=new _.default(s),this.apiCall=new y.default(this.configuration),this.multiSearch=new b.default(this.apiCall,this.configuration,!0),this.individualCollections={}}return o.prototype.clearCache=function(){this.multiSearch.clearCache(),Object.entries(this.individualCollections).forEach(function(s){s[0];var t=s[1];t.documents().clearCache()})},o.prototype.collections=function(s){if(s)return this.individualCollections[s]===void 0&&(this.individualCollections[s]=new h.SearchOnlyCollection(s,this.apiCall,this.configuration)),this.individualCollections[s];throw new Error("Typesense.SearchClient only supports search operations, so the collectionName that needs to be searched must be specified. Use Typesense.Client if you need to access the collection object.")},o}();return We.default=l,We}var $t;function Wr(){if($t)return X;$t=1;var v=p&&p.__createBinding||(Object.create?function(s,t,e,u){u===void 0&&(u=e);var r=Object.getOwnPropertyDescriptor(t,e);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(s,u,r)}:function(s,t,e,u){u===void 0&&(u=e),s[u]=t[e]}),_=p&&p.__setModuleDefault||(Object.create?function(s,t){Object.defineProperty(s,"default",{enumerable:!0,value:t})}:function(s,t){s.default=t}),y=p&&p.__importStar||function(s){if(s&&s.__esModule)return s;var t={};if(s!=null)for(var e in s)e!=="default"&&Object.prototype.hasOwnProperty.call(s,e)&&v(t,s,e);return _(t,s),t},b=p&&p.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(X,"__esModule",{value:!0}),X.Errors=X.SearchClient=X.Client=void 0;var h=b($r());X.Client=h.default;var l=b(Kr());X.SearchClient=l.default;var o=y(ce());return X.Errors=o,X.default={Client:h.default,SearchClient:l.default,Errors:o},X}var re={},Gt;function Br(){if(Gt)return re;Gt=1;var v=se;Object.defineProperty(re,"__esModule",{value:!0}),re.SearchRequestAdapter=void 0;var _=v(Yt()),y=v(Zt()),b=v(Jt()),h=v(oe()),l=v(ue()),o=function(){function s(t,e,u){(0,h.default)(this,s),this.instantsearchRequests=t,this.typesenseClient=e,this.configuration=u,this.additionalSearchParameters=u.additionalSearchParameters,this.collectionSpecificSearchParameters=u.collectionSpecificSearchParameters}return(0,l.default)(s,[{key:"_shouldUseExactMatchForField",value:function(e,u){var r,c;return!(((r=this.configuration.collectionSpecificFilterByOptions)===null||r===void 0||(r=r[u])===null||r===void 0||(r=r[e])===null||r===void 0?void 0:r.exactMatch)===!1||((c=this.configuration.filterByOptions)===null||c===void 0||(c=c[e])===null||c===void 0?void 0:c.exactMatch)===!1)}},{key:"_adaptFacetFilters",value:function(e,u){var r=this,c="";if(!e)return c;var i=e.map(function(a){if(Array.isArray(a)){var n={};a.forEach(function(x){var $=r._parseFacetFilter(x),z=$.fieldName,O=$.fieldValue;n[z]=n[z]||[],n[z].push(O)}),Object.keys(n).length>1&&console.error("[Typesense-Instantsearch-Adapter] Typesense does not support cross-field ORs at the moment. The adapter could not OR values between these fields: ".concat(Object.keys(n).join(",")));var f=Object.keys(n)[0],d=n[f],m=d.reduce(function(x,$){return $.startsWith("-")&&!r._isNumber($)?x[0].push($.substring(1)):x[1].push($),x},[[],[]]),g=(0,b.default)(m,2),C=g[0],w=g[1],E=[];if(w.length>0){var q=r._shouldUseExactMatchForField(f,u)?":=":":";E.push("".concat(f).concat(q,"[").concat(w.map(function(x){return r._escapeFacetValue(x)}).join(","),"]"))}if(C.length>0){var k=r._shouldUseExactMatchForField(f,u)?":!=":":!";E.push("".concat(f).concat(k,"[").concat(C.map(function(x){return r._escapeFacetValue(x)}).join(","),"]"))}var N=E.filter(function(x){return x}).join(" && ");return N}else{var D=r._parseFacetFilter(a),j=D.fieldName,M=D.fieldValue,I;if(M.startsWith("-")&&!r._isNumber(M)){var G=r._shouldUseExactMatchForField(j,u)?":!=":":!";I="".concat(j).concat(G,"[").concat(r._escapeFacetValue(M.substring(1)),"]")}else{var B=r._shouldUseExactMatchForField(j,u)?":=":":";I="".concat(j).concat(B,"[").concat(r._escapeFacetValue(M),"]")}return I}});return c=i.join(" && "),c}},{key:"_parseFacetFilter",value:function(e){var u,r,c,i,a;if(((u=this.configuration.facetableFieldsWithSpecialCharacters)===null||u===void 0?void 0:u.length)>0){var n=this.configuration.facetableFieldsWithSpecialCharacters.flat().map(function(f){return f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")});if(r=new RegExp("^(".concat(n.join("|"),"):(.*)$")),c=e.match(r),c!=null)return i="".concat(c[1]),a="".concat(c[2]),{fieldName:i,fieldValue:a}}return r=this.constructor.DEFAULT_FACET_FILTER_STRING_MATCHING_REGEX,c=e.match(r),c==null?console.error("[Typesense-Instantsearch-Adapter] Parsing failed for a facet filter `".concat(e,"` with the Regex `").concat(r,"`. If you have field names with special characters, be sure to add them to a parameter called `facetableFieldsWithSpecialCharacters` when instantiating the adapter.")):(i="".concat(c[1]).concat(c[2]),a="".concat(c[3])),{fieldName:i,fieldValue:a}}},{key:"_escapeFacetValue",value:function(e){return typeof e=="boolean"||e==="true"||e==="false"||this._isNumber(e)?e:"`".concat(e,"`")}},{key:"_isNumber",value:function(e){return Number.isInteger(e%1)||!!(e%1)}},{key:"_adaptNumericFilters",value:function(e){var u=this,r="";if(!e)return r;var c={};e.forEach(function(a){var n=u._parseNumericFilter(a),f=n.fieldName,d=n.operator,m=n.fieldValue;c[f]=c[f]||{},c[f][d]=m});var i=[];return Object.keys(c).forEach(function(a){c[a]["<="]!=null&&c[a][">="]!=null?i.push("".concat(a,":=[").concat(c[a][">="],"..").concat(c[a]["<="],"]")):c[a]["<="]!=null?i.push("".concat(a,":<=").concat(c[a]["<="])):c[a][">="]!=null?i.push("".concat(a,":>=").concat(c[a][">="])):c[a]["="]!=null?i.push("".concat(a,":=").concat(c[a]["="])):console.warn("[Typesense-Instantsearch-Adapter] Unsupported operator found ".concat(JSON.stringify(c[a])))}),r=i.join(" && "),r}},{key:"_parseNumericFilter",value:function(e){var u,r,c,i,a,n;if(((u=this.configuration.facetableFieldsWithSpecialCharacters)===null||u===void 0?void 0:u.length)>0){var f=this.configuration.facetableFieldsWithSpecialCharacters.map(function(w){return w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")});if(r=new RegExp("^(".concat(f.join("|"),")(<=|>=|>|<|=)(.*)$")),c=e.match(r),c!=null){var d=c,m=(0,b.default)(d,4);return i=m[1],a=m[2],n=m[3],{fieldName:i,operator:a,fieldValue:n}}}if(r=this.constructor.DEFAULT_NUMERIC_FILTER_STRING_MATCHING_REGEX,c=e.match(r),c==null)console.error("[Typesense-Instantsearch-Adapter] Parsing failed for a numeric filter `".concat(e,"` with the Regex `").concat(r,"`. If you have field names with special characters, be sure to add them to a parameter called `facetableFieldsWithSpecialCharacters` when instantiating the adapter."));else{var g=c,C=(0,b.default)(g,4);i=C[1],a=C[2],n=C[3]}return{fieldName:i,operator:a,fieldValue:n}}},{key:"_adaptGeoFilter",value:function(e){var u=e.insideBoundingBox,r=e.aroundRadius,c=e.aroundLatLng,i=e.insidePolygon;if(u){var a,n,f,d;if(Array.isArray(u)){var m=u.flat(),g=(0,b.default)(m,4);a=g[0],n=g[1],f=g[2],d=g[3]}else{var C=u.split(","),w=(0,b.default)(C,4);a=w[0],n=w[1],f=w[2],d=w[3]}return"".concat(this.configuration.geoLocationField,":(").concat(a,", ").concat(n,", ").concat(a,", ").concat(d,", ").concat(f,", ").concat(d,", ").concat(f,", ").concat(n,")")}if(c||r){if(!r||r==="all")throw new Error("[Typesense-Instantsearch-Adapter] In Typesense, geo-filtering around a lat/lng also requires a numerical radius. So the `aroundRadius` parameter is required when `aroundLatLng` is used. If you intend to just geo-sort around a lat/long, you want to use the sortBy InstantSearch widget (or a virtual sortBy custom widget).");var E="".concat(parseFloat(r)/1e3," km");return"".concat(this.configuration.geoLocationField,":(").concat(c,", ").concat(E,")")}if(i){var q=i;return Array.isArray(i)&&(q=i.flat().join(",")),"".concat(this.configuration.geoLocationField,":(").concat(q,")")}}},{key:"_adaptFilters",value:function(e,u){var r=[];return e.filters&&r.push(e.filters),r.push(this._adaptFacetFilters(e.facetFilters,u)),r.push(this._adaptNumericFilters(e.numericFilters)),r.push(this._adaptGeoFilter(e)),r.filter(function(c){return c&&c!==""}).join(" && ")}},{key:"_adaptIndexName",value:function(e){return e.match(this.constructor.INDEX_NAME_MATCHING_REGEX)[1]}},{key:"_adaptSortBy",value:function(e){return e.match(this.constructor.INDEX_NAME_MATCHING_REGEX)[3]}},{key:"_adaptFacetBy",value:function(e,u){var r=this;return[e].flat().map(function(c){var i;return(i=r.configuration.collectionSpecificFacetByOptions)!==null&&i!==void 0&&(i=i[u])!==null&&i!==void 0&&i[c]?"".concat(c).concat(r.configuration.collectionSpecificFacetByOptions[u][c]):r.configuration.facetByOptions[c]?"".concat(c).concat(r.configuration.facetByOptions[c]):c}).join(",")}},{key:"_buildSearchParameters",value:function(e){for(var u=e.params,r=e.indexName,c=this._adaptIndexName(r),i={},a=0,n=Object.entries(this.additionalSearchParameters);a<n.length;a++){var f=(0,b.default)(n[a],2),d=f[0],m=f[1];i[this._camelToSnakeCase(d)]=m}if(this.collectionSpecificSearchParameters[c])for(var g=0,C=Object.entries(this.collectionSpecificSearchParameters[c]);g<C.length;g++){var w=(0,b.default)(C[g],2),E=w[0],q=w[1];i[this._camelToSnakeCase(E)]=q}var k=Object.assign({},i),N=this._adaptSortBy(r);return Object.assign(k,{collection:c,q:u.query===""||u.query===void 0?"*":u.query,facet_by:i.facet_by||this._adaptFacetBy(u.facets,c),filter_by:this._adaptFilters(u,c)||i.filter_by,sort_by:N||i.sort_by,max_facet_values:u.maxValuesPerFacet,page:(u.page||0)+1}),u.hitsPerPage&&(k.per_page=u.hitsPerPage),u.facetQuery&&(k.facet_query="".concat(u.facetName,":").concat(u.facetQuery),k.per_page=0),u.typesenseVectorQuery&&(k.vector_query=u.typesenseVectorQuery),Object.fromEntries(Object.entries(k).filter(function(D){var j=(0,b.default)(D,2);j[0];var M=j[1];return M!=null&&M!==""}))}},{key:"_camelToSnakeCase",value:function(e){return e.split(/(?=[A-Z])/).join("_").toLowerCase()}},{key:"request",value:function(){var t=(0,y.default)(_.default.mark(function u(){var r=this,c;return _.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=this.instantsearchRequests.map(function(n){return r._buildSearchParameters(n)}),a.abrupt("return",this.typesenseClient.multiSearch.perform({searches:c}));case 2:case"end":return a.stop()}},u,this)}));function e(){return t.apply(this,arguments)}return e}()}],[{key:"INDEX_NAME_MATCHING_REGEX",get:function(){return new RegExp("^(.+?)(?=(/sort/(.*))|$)")}},{key:"DEFAULT_FACET_FILTER_STRING_MATCHING_REGEX",get:function(){return new RegExp("(.*)((?!:).):(?!:)(.*)")}},{key:"DEFAULT_NUMERIC_FILTER_STRING_MATCHING_REGEX",get:function(){return new RegExp("(.*?)(<=|>=|>|<|=)(.*)")}}]),s}();return re.SearchRequestAdapter=o,re}var ne={},ie={},Kt;function fr(){if(Kt)return ie;Kt=1,Object.defineProperty(ie,"__esModule",{value:!0}),ie.utils=void 0;var v={_adaptHighlightTag:function(y,b,h){return y.replace(new RegExp("<mark>","g"),b||"<mark>").replace(new RegExp("</mark>","g"),h||"</mark>")},_adaptNumberOfPages:function(){var y=this.typesenseResponse.found/this.typesenseResponse.request_params.per_page;return Number.isFinite(y)?Math.ceil(y):1}};return ie.utils=v,ie}var Wt;function zr(){if(Wt)return ne;Wt=1;var v=se;Object.defineProperty(ne,"__esModule",{value:!0}),ne.SearchResponseAdapter=void 0;var _=v(zt()),y=v(Jt()),b=v(yr()),h=v(dr()),l=v(oe()),o=v(ue()),s=fr();function t(r,c){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);c&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),i.push.apply(i,a)}return i}function e(r){for(var c=1;c<arguments.length;c++){var i=arguments[c]!=null?arguments[c]:{};c%2?t(Object(i),!0).forEach(function(a){(0,h.default)(r,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(i,a))})}return r}var u=function(){function r(c,i,a){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];(0,l.default)(this,r),this.typesenseResponse=c,this.instantsearchRequest=i,this.configuration=a,this.allTypesenseResponses=n}return(0,o.default)(r,[{key:"_adaptGroupedHits",value:function(i){var a=this,n=[];return n=i.map(function(f){var d=a._adaptHits(f.hits);return d.forEach(function(m){m.group_key=m._group_key=f.group_key,f.found&&(m._group_found=f.found)}),d}),this.configuration.flattenGroupedHits?n=n.flat():n=n.map(function(f){return e(e({},f[0]),{},{_grouped_hits:f})}),n}},{key:"_adaptHits",value:function(i){var a=this,n=[];return n=i.map(function(f){var d=e({},f.document);d.objectID=f.document.id,d._snippetResult=a._adaptHighlightResult(f,"snippet"),d._highlightResult=a._adaptHighlightResult(f,"value"),d._rawTypesenseHit=f,["text_match","geo_distance_meters","curated","text_match_info","hybrid_search_info","vector_distance"].forEach(function(g){Object.keys(f).includes(g)&&!Object.keys(d).includes(g)&&(d[g]=f[g])});var m=d[a.configuration.geoLocationField];return m&&(d._geoloc={lat:m[0],lng:m[1]}),d}),n}},{key:"_adaptHighlightResult",value:function(i,a){var n={};return i.highlight!=null&&this.isHighlightPost0240RCN32Format(i.highlight)?this.adaptHighlightObject(i,n,a):this.adaptHighlightsArray(i,n,a),n}},{key:"isHighlightPost0240RCN32Format",value:function(i){return i.full==null&&i.snippet==null}},{key:"adaptHighlightsArray",value:function(i,a,n){var f=this;Object.assign.apply(Object,[a].concat((0,b.default)(Object.entries(i.document).map(function(d){var m=(0,y.default)(d,2),g=m[0],C=m[1];return(0,h.default)({},g,{value:C,matchLevel:"none",matchedWords:[]})})))),i.highlights.forEach(function(d){a[d.field]={value:d[n]||d["".concat(n,"s")],matchLevel:"full",matchedWords:d.matched_tokens},d.indices&&(a[d.field].matchedIndices=d.indices)}),Object.entries(a).forEach(function(d){var m=(0,y.default)(d,2),g=m[0],C=m[1],w=g,E=C.value,q=C.matchLevel,k=C.matchedWords,N=C.matchedIndices;E==null?a[w]=f._adaptHighlightNullValue():Array.isArray(E)?(a[w]=[],i.document[w].forEach(function(D,j){N&&N.includes(j)?a[w].push({value:f._adaptHighlightTag("".concat(E[N.indexOf(j)]),f.instantsearchRequest.params.highlightPreTag,f.instantsearchRequest.params.highlightPostTag),matchLevel:q,matchedWords:k[j]}):(0,_.default)(D)==="object"?a[w].push(f._adaptHighlightInObjectValue(D,{},n)):a[w].push({value:"".concat(D),matchLevel:"none",matchedWords:[]})})):(0,_.default)(E)==="object"?a[w]=f._adaptHighlightInObjectValue(E,{},n):a[w].value=f._adaptHighlightTag("".concat(E),f.instantsearchRequest.params.highlightPreTag,f.instantsearchRequest.params.highlightPostTag)})}},{key:"adaptHighlightObject",value:function(i,a,n){Object.assign(a,this._adaptHighlightInObjectValue(i.document,i.highlight,n))}},{key:"_adaptHighlightInObjectValue",value:function(i,a,n){var f=this;return Object.assign.apply(Object,[{}].concat((0,b.default)(Object.entries(i).map(function(d){var m=(0,y.default)(d,2),g=m[0],C=m[1],w;if(C==null)w=f._adaptHighlightNullValue();else if(Array.isArray(C)){var E;w=f._adaptHighlightInArrayValue(C,(E=a==null?void 0:a[g])!==null&&E!==void 0?E:[],n)}else if((0,_.default)(C)==="object"){var q;w=f._adaptHighlightInObjectValue(C,(q=a==null?void 0:a[g])!==null&&q!==void 0?q:{},n)}else w=f._adaptHighlightInPrimitiveValue(C,a==null?void 0:a[g],n);return(0,h.default)({},g,w)}))))}},{key:"_adaptHighlightInArrayValue",value:function(i,a,n){var f=this;return i.map(function(d,m){var g;if(d==null)g=f._adaptHighlightNullValue();else if(Array.isArray(d)){var C;g=f._adaptHighlightInArrayValue(d,(C=a==null?void 0:a[m])!==null&&C!==void 0?C:[],n)}else if((0,_.default)(d)==="object"){var w;g=f._adaptHighlightInObjectValue(d,(w=a==null?void 0:a[m])!==null&&w!==void 0?w:{},n)}else g=f._adaptHighlightInPrimitiveValue(d,a==null?void 0:a[m],n);return g})}},{key:"_adaptHighlightInPrimitiveValue",value:function(i,a,n){if(a!=null){var f,d;return{value:this._adaptHighlightTag("".concat((f=(d=a[n])!==null&&d!==void 0?d:a.highlight)!==null&&f!==void 0?f:a.snippet),this.instantsearchRequest.params.highlightPreTag,this.instantsearchRequest.params.highlightPostTag),matchLevel:(a.matched_tokens||[]).length>0?"full":"none",matchedWords:a.matched_tokens||[]}}else return{value:this._adaptHighlightTag("".concat(i),this.instantsearchRequest.params.highlightPreTag,this.instantsearchRequest.params.highlightPostTag),matchLevel:"none",matchedWords:[]}}},{key:"_adaptHighlightNullValue",value:function(){return{value:"",matchLevel:"none",matchedWords:[]}}},{key:"_adaptFacets",value:function(i){var a={};return i.forEach(function(n){Object.assign(a,(0,h.default)({},n.field_name,Object.assign.apply(Object,[{}].concat((0,b.default)(n.counts.map(function(f){return(0,h.default)({},f.value,f.count)}))))))}),a}},{key:"_adaptFacetStats",value:function(i){var a={};return i.forEach(function(n){Object.keys(n.stats).length>0&&Object.assign(a,(0,h.default)({},n.field_name,n.stats))}),a}},{key:"_adaptRenderingContent",value:function(i){var a,n=Object.assign({},this.configuration.renderingContent);return((a=n.facetOrdering)===null||a===void 0||(a=a.facets)===null||a===void 0?void 0:a.order)==null&&(n.facetOrdering=n.facetOrdering||{},n.facetOrdering.facets=n.facetOrdering.facets||{},n.facetOrdering.facets.order=(0,b.default)(new Set(i.map(function(f){return f.field_name}).concat(this.allTypesenseResponses.map(function(f){return f.facet_counts||[]}).flat().map(function(f){return f.field_name}).filter(function(f){return f}))))),n}},{key:"adapt",value:function(){var i=this._adaptRenderingContent(this.typesenseResponse.facet_counts||[]),a=e({hits:this.typesenseResponse.grouped_hits?this._adaptGroupedHits(this.typesenseResponse.grouped_hits):this._adaptHits(this.typesenseResponse.hits),nbHits:this.typesenseResponse.found,page:this.typesenseResponse.page-1,nbPages:this._adaptNumberOfPages(),hitsPerPage:this.typesenseResponse.request_params.per_page,facets:this._adaptFacets(this.typesenseResponse.facet_counts||[]),facets_stats:this._adaptFacetStats(this.typesenseResponse.facet_counts||{}),query:this.typesenseResponse.request_params.q,processingTimeMS:this.typesenseResponse.search_time_ms},Object.keys(i).length>0?{renderingContent:i}:null);return a}}]),r}();return ne.SearchResponseAdapter=u,Object.assign(u.prototype,s.utils),ne}var ae={},Bt;function Jr(){if(Bt)return ae;Bt=1;var v=se;Object.defineProperty(ae,"__esModule",{value:!0}),ae.FacetSearchResponseAdapter=void 0;var _=v(oe()),y=v(ue()),b=fr(),h=function(){function l(o,s){(0,_.default)(this,l),this.typesenseResponse=o,this.instantsearchRequest=s}return(0,y.default)(l,[{key:"_adaptFacetHits",value:function(s){var t=this,e={},u=s.find(function(r){return r.field_name===t.instantsearchRequest.params.facetName});return e=u.counts.map(function(r){return{value:r.value,highlighted:t._adaptHighlightTag(r.highlighted,t.instantsearchRequest.params.highlightPreTag,t.instantsearchRequest.params.highlightPostTag),count:r.count}}),e}},{key:"adapt",value:function(){var s={facetHits:this._adaptFacetHits(this.typesenseResponse.facet_counts),exhaustiveFacetsCount:!0,processingTimeMS:this.typesenseResponse.search_time_ms};return s}}]),l}();return ae.FacetSearchResponseAdapter=h,Object.assign(h.prototype,b.utils),ae}(function(v){var _=se;Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var y=_(Yt()),b=_(Zt()),h=_(oe()),l=_(ue()),o=gr(),s=Wr(),t=Br(),e=zr(),u=Jr(),r=function(){function c(i){var a=this;(0,h.default)(this,c),this.updateConfiguration(i),this.searchClient={clearCache:function(){return a.clearCache()},search:function(f){return a.searchTypesenseAndAdapt(f)},searchForFacetValues:function(f){return a.searchTypesenseForFacetValuesAndAdapt(f)}}}return(0,l.default)(c,[{key:"searchTypesenseAndAdapt",value:function(){var i=(0,b.default)(y.default.mark(function n(f){var d=this,m,g;return y.default.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.prev=0,w.next=3,this._adaptAndPerformTypesenseRequest(f);case 3:return m=w.sent,g=m.results.map(function(E,q){d._validateTypesenseResult(E);var k=new e.SearchResponseAdapter(E,f[q],d.configuration,m.results);return k.adapt()}),w.abrupt("return",{results:g});case 8:throw w.prev=8,w.t0=w.catch(0),console.error(w.t0),w.t0;case 12:case"end":return w.stop()}},n,this,[[0,8]])}));function a(n){return i.apply(this,arguments)}return a}()},{key:"searchTypesenseForFacetValuesAndAdapt",value:function(){var i=(0,b.default)(y.default.mark(function n(f){var d=this,m,g;return y.default.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.prev=0,w.next=3,this._adaptAndPerformTypesenseRequest(f);case 3:return m=w.sent,g=m.results.map(function(E,q){d._validateTypesenseResult(E);var k=new u.FacetSearchResponseAdapter(E,f[q],d.configuration);return k.adapt()}),w.abrupt("return",g);case 8:throw w.prev=8,w.t0=w.catch(0),console.error(w.t0),w.t0;case 12:case"end":return w.stop()}},n,this,[[0,8]])}));function a(n){return i.apply(this,arguments)}return a}()},{key:"_adaptAndPerformTypesenseRequest",value:function(){var i=(0,b.default)(y.default.mark(function n(f){var d,m;return y.default.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return d=new t.SearchRequestAdapter(f,this.typesenseClient,this.configuration),C.next=3,d.request();case 3:return m=C.sent,C.abrupt("return",m);case 5:case"end":return C.stop()}},n,this)}));function a(n){return i.apply(this,arguments)}return a}()},{key:"clearCache",value:function(){return this.typesenseClient=new s.SearchClient(this.configuration.server),this.searchClient}},{key:"updateConfiguration",value:function(a){return this.configuration=new o.Configuration(a),this.configuration.validate(),this.typesenseClient=new s.SearchClient(this.configuration.server),!0}},{key:"_validateTypesenseResult",value:function(a){if(a.error)throw new Error("".concat(a.code," - ").concat(a.error));if(!a.hits&&!a.grouped_hits)throw new Error("Did not find any hits. ".concat(a.code," - ").concat(a.error))}}]),c}();v.default=r})(Qt);const rn=hr(Qt);export{rn as T};
