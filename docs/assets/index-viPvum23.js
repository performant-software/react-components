import{r as s,a as O,R as l}from"./index-CBqU2yxZ.js";import{r as h}from"./index-DZGZymok.js";import{c as E,d as b,$ as P,f as I}from"./index-BtRXy3hf.js";function g(e,t){return s.useReducer((c,n)=>{const i=t[c][n];return i??c},e)}const _=e=>{const{present:t,children:c}=e,n=U(t),i=typeof c=="function"?c({present:n.isPresent}):s.Children.only(c),d=E(n.ref,i.ref);return typeof c=="function"||n.isPresent?s.cloneElement(i,{ref:d}):null};_.displayName="Presence";function U(e){const[t,c]=s.useState(),n=s.useRef({}),i=s.useRef(e),d=s.useRef("none"),C=e?"mounted":"unmounted",[v,u]=g(C,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect(()=>{const o=x(n.current);d.current=v==="mounted"?o:"none"},[v]),b(()=>{const o=n.current,f=i.current;if(f!==e){const M=d.current,r=x(o);e?u("MOUNT"):r==="none"||(o==null?void 0:o.display)==="none"?u("UNMOUNT"):u(f&&M!==r?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,u]),b(()=>{if(t){const o=p=>{const r=x(n.current).includes(p.animationName);p.target===t&&r&&h.flushSync(()=>u("ANIMATION_END"))},f=p=>{p.target===t&&(d.current=x(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",o),t.addEventListener("animationend",o),()=>{t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",o),t.removeEventListener("animationend",o)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(v),ref:s.useCallback(o=>{o&&(n.current=getComputedStyle(o)),c(o)},[])}}function x(e){return(e==null?void 0:e.animationName)||"none"}const y=O.useId||(()=>{});let L=0;function V(e){const[t,c]=s.useState(y());return b(()=>{e||c(n=>n??String(L++))},[e]),e||(t?`radix-${t}`:"")}function j(e){const t=e+"CollectionProvider",[c,n]=P(t),[i,d]=c(t,{collectionRef:{current:null},itemMap:new Map}),C=r=>{const{scope:a,children:A}=r,m=l.useRef(null),$=l.useRef(new Map).current;return l.createElement(i,{scope:a,itemMap:$,collectionRef:m},A)},v=e+"CollectionSlot",u=l.forwardRef((r,a)=>{const{scope:A,children:m}=r,$=d(v,A),N=E(a,$.collectionRef);return l.createElement(I,{ref:N},m)}),o=e+"CollectionItemSlot",f="data-radix-collection-item",p=l.forwardRef((r,a)=>{const{scope:A,children:m,...$}=r,N=l.useRef(null),S=E(a,N),R=d(o,A);return l.useEffect(()=>(R.itemMap.set(N,{ref:N,...$}),()=>void R.itemMap.delete(N))),l.createElement(I,{[f]:"",ref:S},m)});function M(r){const a=d(e+"CollectionConsumer",r);return l.useCallback(()=>{const m=a.collectionRef.current;if(!m)return[];const $=Array.from(m.querySelectorAll(`[${f}]`));return Array.from(a.itemMap.values()).sort((R,T)=>$.indexOf(R.ref.current)-$.indexOf(T.ref.current))},[a.collectionRef,a.itemMap])}return[{Provider:C,Slot:u,ItemSlot:p},M,n]}const D=s.createContext(void 0);function z(e){const t=s.useContext(D);return e||t||"ltr"}export{_ as $,V as a,j as b,z as c};
