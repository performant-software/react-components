import{j as _}from"./jsx-runtime-BTCK_S7S.js";import{r as C}from"./index-CBqU2yxZ.js";import{D as te,c as re}from"./DndContext-B-2NJP7Z.js";function ne(n,r){return ue(n)||oe(n,r)||ie(n,r)||ae()}function ae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ie(n,r){if(n){if(typeof n=="string")return x(n,r);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return x(n,r)}}function x(n,r){(r==null||r>n.length)&&(r=n.length);for(var t=0,e=new Array(r);t<r;t++)e[t]=n[t];return e}function oe(n,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var t=[],e=!0,a=!1,i=void 0;try{for(var u=n[Symbol.iterator](),o;!(e=(o=u.next()).done)&&(t.push(o.value),!(r&&t.length===r));e=!0);}catch(s){a=!0,i=s}finally{try{!e&&u.return!=null&&u.return()}finally{if(a)throw i}}return t}}function ue(n){if(Array.isArray(n))return n}function se(n,r){if(n==null)return{};var t=fe(n,r),e,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(a=0;a<i.length;a++)e=i[a],!(r.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(n,e)&&(t[e]=n[e])}return t}function fe(n,r){if(n==null)return{};var t={},e=Object.keys(n),a,i;for(i=0;i<e.length;i++)a=e[i],!(r.indexOf(a)>=0)&&(t[a]=n[a]);return t}var L=0,Y=C.memo(function(n){var r=n.children,t=se(n,["children"]),e=le(t),a=ne(e,2),i=a[0],u=a[1];return C.useEffect(function(){return u&&L++,function(){if(u&&(L--,L===0)){var o=U();o[I]=null}}},[]),C.createElement(te.Provider,{value:i},r)});Y.displayName="DndProvider";function le(n){if("manager"in n){var r={dragDropManager:n.manager};return[r,!1]}var t=ce(n.backend,n.context,n.options,n.debugMode),e=!n.context;return[t,e]}var I=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");function ce(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:U(),t=arguments.length>2?arguments[2]:void 0,e=arguments.length>3?arguments[3]:void 0,a=r;return a[I]||(a[I]=re(n,r,t,e)),a[I]}function U(){return typeof global<"u"?global:window}function K(n){var r=null,t=function(){return r==null&&(r=n()),r};return t}function de(n,r){return n.filter(function(t){return t!==r})}function ve(n,r){var t=new Set,e=function(u){return t.add(u)};n.forEach(e),r.forEach(e);var a=[];return t.forEach(function(i){return a.push(i)}),a}function ge(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function j(n,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function he(n,r,t){return r&&j(n.prototype,r),t&&j(n,t),n}var pe=function(){function n(r){ge(this,n),this.entered=[],this.isNodeInDocument=r}return he(n,[{key:"enter",value:function(t){var e=this,a=this.entered.length,i=function(o){return e.isNodeInDocument(o)&&(!o.contains||o.contains(t))};return this.entered=ve(this.entered.filter(i),[t]),a===0&&this.entered.length>0}},{key:"leave",value:function(t){var e=this.entered.length;return this.entered=de(this.entered.filter(this.isNodeInDocument),t),e>0&&this.entered.length===0}},{key:"reset",value:function(){this.entered=[]}}]),n}(),V=K(function(){return/firefox/i.test(navigator.userAgent)}),G=K(function(){return!!window.safari});function me(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function M(n,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function De(n,r,t){return r&&M(n.prototype,r),t&&M(n,t),n}var A=function(){function n(r,t){me(this,n);for(var e=r.length,a=[],i=0;i<e;i++)a.push(i);a.sort(function(b,ee){return r[b]<r[ee]?-1:1});for(var u=[],o=[],s,f,c=0;c<e-1;c++)s=r[c+1]-r[c],f=t[c+1]-t[c],u.push(s),o.push(f/s);for(var l=[o[0]],d=0;d<u.length-1;d++){var v=o[d],h=o[d+1];if(v*h<=0)l.push(0);else{s=u[d];var m=u[d+1],y=s+m;l.push(3*y/((y+m)/v+(y+s)/h))}}l.push(o[o.length-1]);for(var T=[],D=[],g,p=0;p<l.length-1;p++){g=o[p];var E=l[p],w=1/u[p],O=E+l[p+1]-g-g;T.push((g-E-O)*w),D.push(O*w*w)}this.xs=r,this.ys=t,this.c1s=l,this.c2s=T,this.c3s=D}return De(n,[{key:"interpolate",value:function(t){var e=this.xs,a=this.ys,i=this.c1s,u=this.c2s,o=this.c3s,s=e.length-1;if(t===e[s])return a[s];for(var f=0,c=o.length-1,l;f<=c;){l=Math.floor(.5*(f+c));var d=e[l];if(d<t)f=l+1;else if(d>t)c=l-1;else return a[l]}s=Math.max(0,c);var v=t-e[s],h=v*v;return a[s]+i[s]*v+u[s]*h+o[s]*v*h}}]),n}(),ye=1;function q(n){var r=n.nodeType===ye?n:n.parentElement;if(!r)return null;var t=r.getBoundingClientRect(),e=t.top,a=t.left;return{x:a,y:e}}function N(n){return{x:n.clientX,y:n.clientY}}function Te(n){var r;return n.nodeName==="IMG"&&(V()||!(!((r=document.documentElement)===null||r===void 0)&&r.contains(n)))}function Ee(n,r,t,e){var a=n?r.width:t,i=n?r.height:e;return G()&&n&&(i/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:i}}function we(n,r,t,e,a){var i=Te(r),u=i?n:r,o=q(u),s={x:t.x-o.x,y:t.y-o.y},f=n.offsetWidth,c=n.offsetHeight,l=e.anchorX,d=e.anchorY,v=Ee(i,r,f,c),h=v.dragPreviewWidth,m=v.dragPreviewHeight,y=function(){var O=new A([0,.5,1],[s.y,s.y/c*m,s.y+m-c]),b=O.interpolate(d);return G()&&i&&(b+=(window.devicePixelRatio-1)*m),b},T=function(){var O=new A([0,.5,1],[s.x,s.x/f*h,s.x+h-f]);return O.interpolate(l)},D=a.offsetX,g=a.offsetY,p=D===0||D,E=g===0||g;return{x:p?D:T(),y:E?g:y()}}var J="__NATIVE_FILE__",Q="__NATIVE_URL__",Z="__NATIVE_TEXT__";const R=Object.freeze(Object.defineProperty({__proto__:null,FILE:J,TEXT:Z,URL:Q},Symbol.toStringTag,{value:"Module"}));function F(n,r,t){var e=r.reduce(function(a,i){return a||n.getData(i)},"");return e??t}var S;function P(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}var k=(S={},P(S,J,{exposeProperties:{files:function(r){return Array.prototype.slice.call(r.files)},items:function(r){return r.items}},matchesTypes:["Files"]}),P(S,Q,{exposeProperties:{urls:function(r,t){return F(r,t,"").split(`
`)}},matchesTypes:["Url","text/uri-list"]}),P(S,Z,{exposeProperties:{text:function(r,t){return F(r,t,"")}},matchesTypes:["Text","text/plain"]}),S);function Oe(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function X(n,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function Se(n,r,t){return r&&X(n.prototype,r),t&&X(n,t),n}var be=function(){function n(r){Oe(this,n),this.config=r,this.item={},this.initializeExposedProperties()}return Se(n,[{key:"initializeExposedProperties",value:function(){var t=this;Object.keys(this.config.exposeProperties).forEach(function(e){Object.defineProperty(t.item,e,{configurable:!0,enumerable:!0,get:function(){return console.warn(`Browser doesn't allow reading "`.concat(e,'" until the drop event.')),null}})})}},{key:"loadDataTransfer",value:function(t){var e=this;if(t){var a={};Object.keys(this.config.exposeProperties).forEach(function(i){a[i]={value:e.config.exposeProperties[i](t,e.config.matchesTypes),configurable:!0,enumerable:!0}}),Object.defineProperties(this.item,a)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(t,e){return e===t.getSourceId()}},{key:"endDrag",value:function(){}}]),n}();function Ne(n,r){var t=new be(k[n]);return t.loadDataTransfer(r),t}function H(n){if(!n)return null;var r=Array.prototype.slice.call(n.types||[]);return Object.keys(k).filter(function(t){var e=k[t].matchesTypes;return e.some(function(a){return r.indexOf(a)>-1})})[0]||null}function Ie(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function $(n,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function Ce(n,r,t){return r&&$(n.prototype,r),t&&$(n,t),n}var Le=function(){function n(r){Ie(this,n),this.globalContext=r}return Ce(n,[{key:"window",get:function(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}},{key:"document",get:function(){if(this.window)return this.window.document}}]),n}();function z(n,r){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);r&&(e=e.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,e)}return t}function B(n){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?z(Object(t),!0).forEach(function(e){Pe(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):z(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}function Pe(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}function ke(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function W(n,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function _e(n,r,t){return r&&W(n.prototype,r),t&&W(n,t),n}var xe=function(){function n(r,t){var e=this;ke(this,n),this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.getSourceClientOffset=function(a){var i=e.sourceNodes.get(a);return i&&q(i)||null},this.endDragNativeItem=function(){e.isDraggingNativeItem()&&(e.actions.endDrag(),e.currentNativeHandle&&e.registry.removeSource(e.currentNativeHandle),e.currentNativeHandle=null,e.currentNativeSource=null)},this.isNodeInDocument=function(a){return!!(a&&e.document&&e.document.body&&document.body.contains(a))},this.endDragIfSourceWasRemovedFromDOM=function(){var a=e.currentDragSourceNode;e.isNodeInDocument(a)||e.clearCurrentDragSourceNode()&&e.actions.endDrag()},this.handleTopDragStartCapture=function(){e.clearCurrentDragSourceNode(),e.dragStartSourceIds=[]},this.handleTopDragStart=function(a){if(!a.defaultPrevented){var i=e.dragStartSourceIds;e.dragStartSourceIds=null;var u=N(a);e.monitor.isDragging()&&e.actions.endDrag(),e.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:e.getSourceClientOffset,clientOffset:u});var o=a.dataTransfer,s=H(o);if(e.monitor.isDragging()){if(o&&typeof o.setDragImage=="function"){var f=e.monitor.getSourceId(),c=e.sourceNodes.get(f),l=e.sourcePreviewNodes.get(f)||c;if(l){var d=e.getCurrentSourcePreviewNodeOptions(),v=d.anchorX,h=d.anchorY,m=d.offsetX,y=d.offsetY,T={anchorX:v,anchorY:h},D={offsetX:m,offsetY:y},g=we(c,l,u,T,D);o.setDragImage(l,g.x,g.y)}}try{o==null||o.setData("application/json",{})}catch{}e.setCurrentDragSourceNode(a.target);var p=e.getCurrentSourcePreviewNodeOptions(),E=p.captureDraggingState;E?e.actions.publishDragSource():setTimeout(function(){return e.actions.publishDragSource()},0)}else if(s)e.beginDragNativeItem(s);else{if(o&&!o.types&&(a.target&&!a.target.hasAttribute||!a.target.hasAttribute("draggable")))return;a.preventDefault()}}},this.handleTopDragEndCapture=function(){e.clearCurrentDragSourceNode()&&e.actions.endDrag()},this.handleTopDragEnterCapture=function(a){e.dragEnterTargetIds=[];var i=e.enterLeaveCounter.enter(a.target);if(!(!i||e.monitor.isDragging())){var u=a.dataTransfer,o=H(u);o&&e.beginDragNativeItem(o,u)}},this.handleTopDragEnter=function(a){var i=e.dragEnterTargetIds;if(e.dragEnterTargetIds=[],!!e.monitor.isDragging()){e.altKeyPressed=a.altKey,V()||e.actions.hover(i,{clientOffset:N(a)});var u=i.some(function(o){return e.monitor.canDropOnTarget(o)});u&&(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=e.getCurrentDropEffect()))}},this.handleTopDragOverCapture=function(){e.dragOverTargetIds=[]},this.handleTopDragOver=function(a){var i=e.dragOverTargetIds;if(e.dragOverTargetIds=[],!e.monitor.isDragging()){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none");return}e.altKeyPressed=a.altKey,e.actions.hover(i||[],{clientOffset:N(a)});var u=(i||[]).some(function(o){return e.monitor.canDropOnTarget(o)});u?(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=e.getCurrentDropEffect())):e.isDraggingNativeItem()?a.preventDefault():(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=function(a){e.isDraggingNativeItem()&&a.preventDefault();var i=e.enterLeaveCounter.leave(a.target);i&&e.isDraggingNativeItem()&&e.endDragNativeItem()},this.handleTopDropCapture=function(a){if(e.dropTargetIds=[],a.preventDefault(),e.isDraggingNativeItem()){var i;(i=e.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}e.enterLeaveCounter.reset()},this.handleTopDrop=function(a){var i=e.dropTargetIds;e.dropTargetIds=[],e.actions.hover(i,{clientOffset:N(a)}),e.actions.drop({dropEffect:e.getCurrentDropEffect()}),e.isDraggingNativeItem()?e.endDragNativeItem():e.endDragIfSourceWasRemovedFromDOM()},this.handleSelectStart=function(a){var i=a.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(a.preventDefault(),i.dragDrop()))},this.options=new Le(t),this.actions=r.getActions(),this.monitor=r.getMonitor(),this.registry=r.getRegistry(),this.enterLeaveCounter=new pe(this.isNodeInDocument)}return _e(n,[{key:"profile",value:function(){var t,e;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)===null||t===void 0?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}},{key:"setup",value:function(){if(this.window!==void 0){if(this.window.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");this.window.__isReactDndBackendSetUp=!0,this.addEventListeners(this.window)}}},{key:"teardown",value:function(){this.window!==void 0&&(this.window.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.window),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&this.window.cancelAnimationFrame(this.asyncEndDragFrameId))}},{key:"connectDragPreview",value:function(t,e,a){var i=this;return this.sourcePreviewNodeOptions.set(t,a),this.sourcePreviewNodes.set(t,e),function(){i.sourcePreviewNodes.delete(t),i.sourcePreviewNodeOptions.delete(t)}}},{key:"connectDragSource",value:function(t,e,a){var i=this;this.sourceNodes.set(t,e),this.sourceNodeOptions.set(t,a);var u=function(f){return i.handleDragStart(f,t)},o=function(f){return i.handleSelectStart(f)};return e.setAttribute("draggable","true"),e.addEventListener("dragstart",u),e.addEventListener("selectstart",o),function(){i.sourceNodes.delete(t),i.sourceNodeOptions.delete(t),e.removeEventListener("dragstart",u),e.removeEventListener("selectstart",o),e.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(t,e){var a=this,i=function(f){return a.handleDragEnter(f,t)},u=function(f){return a.handleDragOver(f,t)},o=function(f){return a.handleDrop(f,t)};return e.addEventListener("dragenter",i),e.addEventListener("dragover",u),e.addEventListener("drop",o),function(){e.removeEventListener("dragenter",i),e.removeEventListener("dragover",u),e.removeEventListener("drop",o)}}},{key:"addEventListeners",value:function(t){t.addEventListener&&(t.addEventListener("dragstart",this.handleTopDragStart),t.addEventListener("dragstart",this.handleTopDragStartCapture,!0),t.addEventListener("dragend",this.handleTopDragEndCapture,!0),t.addEventListener("dragenter",this.handleTopDragEnter),t.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.addEventListener("dragover",this.handleTopDragOver),t.addEventListener("dragover",this.handleTopDragOverCapture,!0),t.addEventListener("drop",this.handleTopDrop),t.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(t){t.removeEventListener&&(t.removeEventListener("dragstart",this.handleTopDragStart),t.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),t.removeEventListener("dragend",this.handleTopDragEndCapture,!0),t.removeEventListener("dragenter",this.handleTopDragEnter),t.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.removeEventListener("dragover",this.handleTopDragOver),t.removeEventListener("dragover",this.handleTopDragOverCapture,!0),t.removeEventListener("drop",this.handleTopDrop),t.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var t=this.monitor.getSourceId(),e=this.sourceNodeOptions.get(t);return B({dropEffect:this.altKeyPressed?"copy":"move"},e||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var t=this.monitor.getSourceId(),e=this.sourcePreviewNodeOptions.get(t);return B({anchorX:.5,anchorY:.5,captureDraggingState:!1},e||{})}},{key:"isDraggingNativeItem",value:function(){var t=this.monitor.getItemType();return Object.keys(R).some(function(e){return R[e]===t})}},{key:"beginDragNativeItem",value:function(t,e){this.clearCurrentDragSourceNode(),this.currentNativeSource=Ne(t,e),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(t){var e=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t;var a=1e3;this.mouseMoveTimeoutTimer=setTimeout(function(){return e.window&&e.window.addEventListener("mousemove",e.endDragIfSourceWasRemovedFromDOM,!0)},a)}},{key:"clearCurrentDragSourceNode",value:function(){return this.currentDragSourceNode?(this.currentDragSourceNode=null,this.window&&(this.window.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.window.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0):!1}},{key:"handleDragStart",value:function(t,e){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(e))}},{key:"handleDragEnter",value:function(t,e){this.dragEnterTargetIds.unshift(e)}},{key:"handleDragOver",value:function(t,e){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(e)}},{key:"handleDrop",value:function(t,e){this.dropTargetIds.unshift(e)}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}}]),n}(),je=function(r,t){return new xe(r,t)};const Me=(n,r=je)=>t=>_.jsx(Y,{backend:r,children:_.jsx(n,{...t})}),Xe=Me;export{Xe as u};
