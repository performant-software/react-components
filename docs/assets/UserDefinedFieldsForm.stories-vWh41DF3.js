import{j as n}from"./jsx-runtime-BTCK_S7S.js";import{r as l}from"./index-CBqU2yxZ.js";import{d as C}from"./index-BuPRY1M-.js";import{F as d}from"./Form-fErk-qk_.js";import{v as F,b as j}from"./index.es99-B_nU4ZFj.js";import{d as w}from"./index.es33-DmryshtJ.js";import"./index-DZGZymok.js";import{_}from"./index-default-C_maRo4o.js";import{U as T}from"./UserDefinedFields-AEgyutvE.js";import"./_commonjsHelpers-BosuxZz1.js";import"./mapValues-LQZI9uWW.js";import"./pickBy-Us6u5-To.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./isPlainObject-DCkRKKtx.js";import"./index-Cw1G72V2.js";import"./index-CKJfshIT.js";import"./tiny-invariant.cjs-DxxScMW_.js";import"./___vite-browser-external_commonjs-proxy-DRaEfepn.js";import"./preview-errors-CzpZmerH.js";import"./debounce-BkgZrIul.js";import"./extends-CCbyfPlC.js";import"./inheritsLoose-1HkgTRWY.js";import"./setPrototypeOf-DgZC2w_0.js";import"./getElementType-CckcRzoH.js";import"./Button-Blq7Z6RX.js";import"./Icon-2tEtgK8g.js";import"./Label-Cq1fb1cd.js";import"./ModernAutoControlledComponent-DJBWk5EW.js";import"./assertThisInitialized-B9jnkVVz.js";import"./includes-CQoJOerW.js";import"./toFinite-KQ8KevIC.js";import"./forEach-CXlln0XP.js";import"./Dimmer-D_gwaesu.js";import"./Portal-DvhHJPzU.js";import"./keyboardKey-OMDgGVm3.js";import"./objectWithoutPropertiesLoose-1QL-frMM.js";import"./map-B4PnIEPz.js";import"./Checkbox-C9uAfnsM.js";import"./_baseSet-6y0qliU9.js";import"./_baseAssignValue-izmKBXUH.js";import"./Dropdown-Di2cPjwR.js";import"./without-BP-mqg2K.js";import"./isArrayLikeObject-CbXKTyfk.js";import"./isEmpty-Cyb9hIKi.js";import"./deburr-CEfyoYOr.js";import"./index-BBpNyw-T.js";import"./_arrayReduce-CrxnWFSq.js";import"./filter-CVNi8iPS.js";import"./Input--hQVCRQV.js";import"./index.es3-B3n2BlTn.js";import"./index.es2-B_jU7gMc.js";import"./index.es27-SQskR_RA.js";import"./index.es11-idiWBoAT.js";import"./useDrop-BRQoWSA5.js";import"./DndContext-B-2NJP7Z.js";import"./redux-C8f_Y06i.js";import"./objectSpread2-N4c0DWqo.js";import"./defineProperty-CCxoMnQV.js";import"./toPropertyKey-hKuLU48H.js";import"./index.es24-BD0kU5QO.js";import"./iframe-C52gK9Gy.js";import"../sb-preview/runtime.js";import"./index.es14-DsDOH-DJ.js";class E{toData(r){return{id:r.id,accuracy:r.accuracy,description:r.description,end_date:r.endDate,range:r.range,start_date:r.startDate,_destroy:r._destroy}}toFuzzyDate(r){return r?{id:r.id,accuracy:r.accuracy,description:r.description,endDate:r.end_date,range:r.range,startDate:r.start_date,_destroy:r._destroy}:null}toPayload(r,g){const c=r[g];return c?{[g]:this.toData(c)}:null}}const b=new E,v={boolean:"Boolean",date:"Date",fuzzyDate:"FuzzyDate",number:"Number",richText:"RichText",select:"Select",string:"String",text:"Text"},k={DataTypes:v},{DataTypes:p}=k,f=t=>{const[r,g]=l.useState(t.fields||[]),c=l.useCallback(e=>`user_defined[${e.uuid}]`,[]),i=l.useCallback(e=>t.isError(c(e)),[c,t.isError]),s=l.useCallback((e,o)=>{t.onChange({...t.data,[e.uuid]:o}),t.onClearValidationError&&t.onClearValidationError(c(e))},[c,t.data,t.onChange,t.onClearValidationError]),q=l.useCallback(e=>{let o;const m=t.data&&t.data[e.uuid];return e.data_type===p.string&&(o=n.jsx(d.Input,{error:i(e),label:e.column_name,required:e.required,onChange:(a,{value:u})=>s(e,u),value:m})),e.data_type===p.number&&(o=n.jsx(d.Input,{error:i(e),label:e.column_name,required:e.required,onChange:(a,{value:u})=>s(e,u),value:m,type:"number"})),e.data_type===p.select&&(o=n.jsx(d.Dropdown,{clearable:!0,error:i(e),label:e.column_name,multiple:e.allow_multiple,required:e.required,options:_.map(e.options,a=>({key:a,value:a,text:a})),onChange:(a,{value:u})=>s(e,u),selectOnBlur:!1,selection:!0,value:m})),e.data_type===p.text&&(o=n.jsx(d.TextArea,{error:i(e),label:e.column_name,required:e.required,onChange:(a,{value:u})=>s(e,u),value:m})),e.data_type===p.date&&(o=n.jsx(d.Input,{error:i(e),label:e.column_name,required:e.required,children:n.jsx(F,{onChange:a=>s(e,a&&a.toISOString()),value:m&&new Date(m)})})),e.data_type===p.fuzzyDate&&(o=n.jsx(d.Input,{error:i(e),label:e.column_name,required:e.required,children:n.jsx(j,{centered:!1,date:b.toFuzzyDate(m)||{},onChange:a=>s(e,b.toData(a)),title:e.column_name})})),e.data_type===p.boolean&&(o=n.jsx(d.Checkbox,{checked:!!m,error:i(e),label:e.column_name,onChange:(a,{checked:u})=>s(e,u)})),e.data_type===p.richText&&(o=n.jsx(d.Input,{error:i(e),label:e.column_name,required:e.required,children:n.jsx(w,{onChange:a=>s(e,a),value:m})})),o},[t.data,i,s]);return l.useEffect(()=>{if(!_.isEmpty(r))return;const e={defineable_id:t.defineableId,defineable_type:t.defineableType,per_page:0,required:t.required,sort_by:"order",table_name:t.tableName};T.fetchAll(e).then(({data:o})=>g(o.user_defined_fields))},[]),n.jsx(n.Fragment,{children:_.map(r,q.bind(void 0))})};f.__docgenInfo={description:"",methods:[],displayName:"UserDefinedFieldsForm",props:{data:{required:!0,flowType:{name:"any"},description:""},defineableId:{required:!1,flowType:{name:"number"},description:""},defineableType:{required:!1,flowType:{name:"string"},description:""},fields:{required:!1,flowType:{name:"Array"},description:""},isError:{required:!0,flowType:{name:"signature",type:"function",raw:"(key: string) => boolean",signature:{arguments:[{name:"key",type:{name:"string"}}],return:{name:"boolean"}}},description:""},onChange:{required:!0,flowType:{name:"signature",type:"function",raw:"(obj: any) => void",signature:{arguments:[{name:"obj",type:{name:"any"}}],return:{name:"void"}}},description:""},onClearValidationError:{required:!0,flowType:{name:"signature",type:"function",raw:"(...keys: Array<string>) => void",signature:{arguments:[{name:"keys",type:{name:"Array",elements:[{name:"string"}],raw:"Array<string>"},rest:!0}],return:{name:"void"}}},description:""},required:{required:!1,flowType:{name:"boolean"},description:""},tableName:{required:!1,flowType:{name:"string"},description:""}}};const Ke={title:"Components/User Defined Fields/UserDefinedFieldsForm",decorators:[C.withKnobs]},y=()=>{const[t,r]=l.useState({});return n.jsx(d,{children:n.jsx(f,{data:t,isError:()=>!1,onChange:r})})};y.__docgenInfo={description:"",methods:[],displayName:"Default"};var h,D,x;y.parameters={...y.parameters,docs:{...(h=y.parameters)==null?void 0:h.docs,source:{originalSource:`() => {
  const [data, setData] = useState({});
  return <Form>
      <UserDefinedFieldsForm data={data} isError={() => false} onChange={setData} />
    </Form>;
}`,...(x=(D=y.parameters)==null?void 0:D.docs)==null?void 0:x.source}}};const Re=["Default"];export{y as Default,Re as __namedExportsOrder,Ke as default};
