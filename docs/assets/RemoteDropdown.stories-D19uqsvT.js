import{r as o,j as i}from"./iframe-FoyjJkLC.js";import{_ as c}from"./index-default-B8-H6N8J.js";import{A as h}from"./Api-DGMTLhRm.js";import"./index.es28-cvHwm1ao.js";import{o as g}from"./index.es35-NGGuPWEW.js";import{I as y}from"./Icon-QRCs_MGh.js";import{D as R}from"./Dropdown-DsjIv487.js";import{_ as d}from"./index-default-C0I3bBxV.js";import{i as S}from"./i18n-DkobdbHY.js";import"./extends-CCbyfPlC.js";import"./inheritsLoose-1HkgTRWY.js";import"./setPrototypeOf-DgZC2w_0.js";import"./getElementType-DMFQxvJl.js";import"./includes-X8sRVAnC.js";import"./toFinite-Cv0DjQlj.js";import"./map-B7VPJt9U.js";import"./without-B65ne6dp.js";import"./isArrayLikeObject-o8TpvWN0.js";import"./isEmpty-GD1DGAFF.js";import"./deburr-DDMYBnEi.js";import"./index-CFjv22fL.js";import"./_baseSet-D5kAKEMz.js";import"./_baseAssignValue-vjYrEBAw.js";import"./_arrayReduce-CrxnWFSq.js";import"./ModernAutoControlledComponent-BLgbTsFj.js";import"./assertThisInitialized-B9jnkVVz.js";import"./Portal-4bHDrQld.js";import"./keyboardKey-DN4ANEu9.js";import"./Label-CV3ai1CB.js";import"./forEach-t8Zrn7U4.js";import"./Dimmer-C7VJRKUP.js";import"./filter-QYVzOKpd.js";import"./i18next-eNuDfwAU.js";class r extends o.Component{static defaultProps;dropdown;constructor(e){super(e),this.state={loading:!1,options:[],page:1,pages:1,search:""},this.dropdown=o.createRef()}componentDidMount(){this.onReset()}componentDidUpdate(e){this.props.value!==e.value&&this.setState({page:1,pages:1,search:""},this.onSearch.bind(this))}getClassNames(){const e=["remote-dropdown"];return this.props.className&&e.push(this.props.className),e.join(" ")}getValues(){let e=[];const{value:t}=this.props;return t&&t.length&&(e=Array.isArray(t)?t:[t]),e}getOption(e){return{key:e,text:e,value:e}}getOptions(){const e=[...this.state.options];d.each(this.getValues(),a=>{d.findWhere(e,{value:a})||e.push(this.getOption(a))});const{search:t}=this.state;return this.props.allowAdditions&&t&&!d.findWhere(e,{text:t})&&e.push({key:"add",value:"add",text:this.renderAddOption(),onClick:this.onAddItem.bind(this)}),this.state.page<this.state.pages&&e.push({key:"more",value:"more",text:this.renderLoadMoreOption(),onClick:()=>this.setState(a=>({page:a.page+1}),this.onSearch.bind(this))}),e}getSearchOptions(){return d.filter(this.getOptions(),e=>!this.getValues().includes(e.value))}onAddItem(e){return this.props.onAddItem&&this.props.onAddItem(this.state.search).then(()=>{let t=this.state.search;this.props.multiple&&(t=[...this.props.value,this.state.search]),this.onOptionSelection(e,{value:t}),this.props.multiple||this.dropdown.current.close()})}onOptionSelection(e,{value:t}){this.props.onSelection(t)}onReset(){this.setState({options:d.map(this.getValues(),this.getOption.bind(this)),page:1,pages:1,search:""})}onSearch(){const{page:e,search:t}=this.state;this.setState({loading:!0},()=>{this.props.onLoad({page:e,search:t}).then(({data:a})=>{const s=d.map(a[this.props.collectionName],this.props.renderOption.bind(this)),{pages:A}=a.list;this.setState(O=>({loading:!1,options:[...e>1?O.options||[]:[],...s],page:e,pages:A}))})})}onSearchChange(e,{searchQuery:t}){this.setState({page:1,pages:1,search:t})}render(){return i.jsx(R,{className:this.getClassNames(),clearable:!0,fluid:this.props.fluid,loading:this.state.loading,multiple:this.props.multiple,onBlur:this.onReset.bind(this),onClose:this.onReset.bind(this),onChange:this.onOptionSelection.bind(this),onOpen:this.onSearch.bind(this),onSearchChange:this.onSearchChange.bind(this),options:this.getOptions(),placeholder:this.props.placeholder,ref:this.dropdown,scrolling:!0,search:()=>this.getSearchOptions(),searchInput:{"aria-label":"Search",className:"remote-dropdown-search-input",onKeyDown:g.clearSearchTimer.bind(this),onKeyUp:g.setSearchTimer.bind(this,this.onSearch.bind(this))},searchQuery:this.state.search,selectOnBlur:!1,selection:!0,value:this.props.value})}renderAddOption(){return i.jsxs("div",{className:"extra-option",children:[i.jsx(y,{name:"plus circle"}),`${S.t("RemoteDropdown.labels.add")} ${this.state.search}`]})}renderLoadMoreOption(){return i.jsxs("div",{className:"extra-option",children:[i.jsx(y,{name:"refresh"}),S.t("RemoteDropdown.labels.loadMore")]})}}r.defaultProps={allowAdditions:!1,className:"",fluid:!1,multiple:!1,onAddItem:void 0,placeholder:null};r.__docgenInfo={description:"",methods:[{name:"getClassNames",docblock:`Returns the dropdown class name(s).

@returns {string}`,modifiers:[],params:[],returns:{type:{name:"string"}},description:"Returns the dropdown class name(s)."},{name:"getValues",docblock:`Returns the dropdown value as an array.

@returns {[]}`,modifiers:[],params:[],returns:{type:{name:"tuple",elements:[]}},description:"Returns the dropdown value as an array."},{name:"getOption",docblock:`Returns the passed value as a dropdown option.

@param value

@returns {{text: *, value: *, key: *}}`,modifiers:[],params:[{name:"value",optional:!1,type:{name:"string"}}],returns:{},description:"Returns the passed value as a dropdown option."},{name:"getOptions",docblock:`Returns the complete list of dropdown options. If applicable, the "Add" and "Load more" options are added to the
end of the list.

@returns {*[]}`,modifiers:[],params:[],returns:{type:{name:"Array",elements:[{name:"mixed"}]}},description:`Returns the complete list of dropdown options. If applicable, the "Add" and "Load more" options are added to the
end of the list.`},{name:"getSearchOptions",docblock:`Returns the list of options to display for the search. This list will include the options that match the search
criteria with the current value(s) excluded.

@returns {*}`,modifiers:[],params:[],returns:{type:{name:"mixed"}},description:`Returns the list of options to display for the search. This list will include the options that match the search
criteria with the current value(s) excluded.`},{name:"onAddItem",docblock:`Adds the current search query as a new dropdown option.

@param e

@returns {*|Q.Promise<any>|Promise<R>|Promise<any>|void}`,modifiers:[],params:[{name:"e",optional:!1,type:{name:"Event",alias:"Event"}}],returns:{type:{name:"union",elements:[{name:"mixed"},{name:"Q.Promise",elements:[{name:"any"}]},{name:"Promise",elements:[{name:"R"}]},{name:"Promise",elements:[{name:"any"}]},{name:"void"}]}},description:"Adds the current search query as a new dropdown option."},{name:"onOptionSelection",docblock:`Selects the passed value.

@param e
@param value`,modifiers:[],params:[{name:"e",optional:!1,type:{name:"Event",alias:"Event"}},{name:"{ value }: any",optional:!1,type:{name:"any"}}],returns:null,description:"Selects the passed value."},{name:"onReset",docblock:"Resets the dropdown state.",modifiers:[],params:[],returns:null,description:"Resets the dropdown state."},{name:"onSearch",docblock:"Executes the search and sets the rendered options on the state.",modifiers:[],params:[],returns:null,description:"Executes the search and sets the rendered options on the state."},{name:"onSearchChange",docblock:`Sets the search on the state and re-sets the page counts.

@param e
@param searchQuery`,modifiers:[],params:[{name:"e",optional:!1,type:{name:"Event",alias:"Event"}},{name:"{ searchQuery }: any",optional:!1,type:{name:"any"}}],returns:null,description:"Sets the search on the state and re-sets the page counts."},{name:"renderAddOption",docblock:`Renders the "Add" dropdown option.

@returns {*}`,modifiers:[],params:[],returns:{type:{name:"mixed"}},description:'Renders the "Add" dropdown option.'},{name:"renderLoadMoreOption",docblock:`Renders the "Load more" dropdown option.

@returns {*}`,modifiers:[],params:[],returns:{type:{name:"mixed"}},description:'Renders the "Load more" dropdown option.'}],displayName:"RemoteDropdown",props:{allowAdditions:{required:!1,flowType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},className:{required:!1,flowType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},collectionName:{required:!0,flowType:{name:"string"},description:""},fluid:{required:!1,flowType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},multiple:{required:!1,flowType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onAddItem:{required:!1,flowType:{name:"signature",type:"function",raw:"(value: string) => Promise<any>",signature:{arguments:[{name:"value",type:{name:"string"}}],return:{name:"Promise",elements:[{name:"any"}],raw:"Promise<any>"}}},description:"",defaultValue:{value:"undefined",computed:!0}},onLoad:{required:!0,flowType:{name:"signature",type:"function",raw:"({ search: string, page: number}) => Promise<ApiResponse>",signature:{arguments:[{name:"",type:{name:"signature",type:"object",raw:"{ search: string, page: number}",signature:{properties:[{key:"search",value:{name:"string",required:!0}},{key:"page",value:{name:"number",required:!0}}]}}}],return:{name:"Promise",elements:[{name:"signature",type:"object",raw:`{
  data: {
    items: Array<any>,
    list: {
      pages: number
    }
  }
}`,signature:{properties:[{key:"data",value:{name:"signature",type:"object",raw:`{
  items: Array<any>,
  list: {
    pages: number
  }
}`,signature:{properties:[{key:"items",value:{name:"Array",elements:[{name:"any"}],raw:"Array<any>",required:!0}},{key:"list",value:{name:"signature",type:"object",raw:`{
  pages: number
}`,signature:{properties:[{key:"pages",value:{name:"number",required:!0}}]},required:!0}}]},required:!0}}]}}],raw:"Promise<ApiResponse>"}}},description:""},onSelection:{required:!0,flowType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{name:"value",type:{name:"string"}}],return:{name:"void"}}},description:""},placeholder:{required:!1,flowType:{name:"string"},description:"",defaultValue:{value:"null",computed:!1}},renderOption:{required:!0,flowType:{name:"signature",type:"function",raw:"(item: any) => Option",signature:{arguments:[{name:"item",type:{name:"any"}}],return:{name:"signature",type:"object",raw:`{
  key: string,
  value: string,
  text: any
}`,signature:{properties:[{key:"key",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}},{key:"text",value:{name:"any",required:!0}}]}}}},description:""},value:{required:!0,flowType:{name:"string"},description:""}}};const oe={title:"Components/Semantic UI/RemoteDropdown",component:r},v=(n,e,t)=>new Promise(a=>a(e([...n,{value:t}]))),f=n=>({key:n.value,value:n.value,text:n.value,description:n.description}),b=[{value:"Red",description:"Duis adipisicing ullamco aliqua dolore officiaDuis adipisicing ullamco aliqua dolore officiaDuis adipisicing ullamco aliqua dolore officiaDuis adipisicing ullamco aliqua dolore officiaDuis adipisicing ullamco aliqua dolore officia."},{value:"Blue",description:"Duis adipisicing ullamco aliqua dolore officia."},{value:"Orange"},{value:"Green"},{value:"Yellow"},{value:"Black"},{value:"White"},{value:"Purple"},{value:"Pink"}],l=()=>{const[n,e]=o.useState(b),[t,a]=o.useState("");return i.jsx(r,{collectionName:"items",onAddItem:v.bind(void 0,n,e),onLoad:s=>h.onLoad(c.extend(s,{items:n})),onSelection:a.bind(void 0),renderOption:f.bind(void 0),value:t})},p=()=>{const[n,e]=o.useState(b),[t,a]=o.useState("Red");return i.jsx(r,{collectionName:"items",onAddItem:v.bind(void 0,n,e),onLoad:s=>h.onLoad(c.extend(s,{items:n})),onSelection:a.bind(void 0),renderOption:f.bind(void 0),value:t})},w=[{value:"Coming Down the Mountain"},{value:"Me and you (io e te)"},{value:"Korengal"},{value:"Jacques Brel Is Alive and Well and Living in Paris"},{value:"Annie Get Your Gun"},{value:"Appleseed (Appurushîdo)"},{value:"Khroustaliov, My Car! (Khrustalyov, mashinu!)"},{value:"Overboard"},{value:"Friends of Eddie Coyle, The"},{value:"Meet the Parents"},{value:"Wedding Party, The (Die Bluthochzeit)"},{value:"Beats Rhymes & Life: The Travels of a Tribe Called Quest"},{value:"Northanger Abbey"},{value:"In Vanda's Room (No Quarto da Vanda)"},{value:"Asfalto"},{value:"An Apology to Elephants"},{value:"Cool Air"},{value:"Blue Umbrella, The"},{value:"Earth vs. the Spider"},{value:"Son of Lassie"},{value:"Presto"},{value:"Prisoner of Paradise"},{value:"2-Headed Shark Attack"},{value:"Shattered"},{value:"My Life and Times With Antonin Artaud (En compagnie d'Antonin Artaud)"},{value:"Hell in the Pacific"},{value:"Blades of Glory"},{value:"Lodger, The"},{value:"Anvil! The Story of Anvil"},{value:"Please Give"},{value:"Story of Three Loves, The"},{value:"Simpsons: The Longest Daycare, The"},{value:"Unsaid, The"},{value:"Wisegirls"},{value:"Enemy of the People, An"},{value:"Virus"},{value:"Blue Dahlia, The"},{value:"Clouds of May (Mayis sikintisi)"},{value:"Tracker, The"},{value:"Trailer Park Boys"},{value:"May 18 (Hwaryeohan hyuga)"},{value:"Where Eagles Dare"},{value:"Pocket Money"},{value:"Charlie Chan's Chance"},{value:"Cat Came Back, The"},{value:"Good Night, and Good Luck."},{value:"White Reindeer"},{value:"The Phantom of the Opera"},{value:"Digimon: The Movie"},{value:"Once Around"}],u=()=>{const[n,e]=o.useState(w),[t,a]=o.useState("");return i.jsx(r,{collectionName:"items",onAddItem:v.bind(void 0,n,e),onLoad:s=>h.onLoad(c.extend(s,{items:n})),onSelection:a.bind(void 0),renderOption:f.bind(void 0),value:t})},m=()=>{const[n,e]=o.useState(w),[t,a]=o.useState("");return i.jsx(r,{collectionName:"items",onAddItem:v.bind(void 0,n,e),onLoad:s=>h.onLoad(c.extend(s,{items:n,perPage:10})),onSelection:a.bind(void 0),renderOption:f.bind(void 0),value:t,style:{width:600}})};l.__docgenInfo={description:"",methods:[],displayName:"Default"};p.__docgenInfo={description:"",methods:[],displayName:"SelectedValue"};u.__docgenInfo={description:"",methods:[],displayName:"LargeList"};m.__docgenInfo={description:"",methods:[],displayName:"Pagination"};l.parameters={...l.parameters,docs:{...l.parameters?.docs,source:{originalSource:`() => {
  const [options, setOptions] = useState(colors);
  const [selectedValue, setSelectedValue] = useState('');
  return <RemoteDropdown collectionName='items' onAddItem={onAddItem.bind(this, options, setOptions)} onLoad={params => Api.onLoad(_.extend(params, {
    items: options
  }))} onSelection={setSelectedValue.bind(this)} renderOption={renderOption.bind(this)} value={selectedValue} />;
}`,...l.parameters?.docs?.source}}};p.parameters={...p.parameters,docs:{...p.parameters?.docs,source:{originalSource:`() => {
  const [options, setOptions] = useState(colors);
  const [selectedValue, setSelectedValue] = useState('Red');
  return <RemoteDropdown collectionName='items' onAddItem={onAddItem.bind(this, options, setOptions)} onLoad={params => Api.onLoad(_.extend(params, {
    items: options
  }))} onSelection={setSelectedValue.bind(this)} renderOption={renderOption.bind(this)} value={selectedValue} />;
}`,...p.parameters?.docs?.source}}};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:`() => {
  const [options, setOptions] = useState(movies);
  const [selectedValue, setSelectedValue] = useState('');
  return <RemoteDropdown collectionName='items' onAddItem={onAddItem.bind(this, options, setOptions)} onLoad={params => Api.onLoad(_.extend(params, {
    items: options
  }))} onSelection={setSelectedValue.bind(this)} renderOption={renderOption.bind(this)} value={selectedValue} />;
}`,...u.parameters?.docs?.source}}};m.parameters={...m.parameters,docs:{...m.parameters?.docs,source:{originalSource:`() => {
  const [options, setOptions] = useState(movies);
  const [selectedValue, setSelectedValue] = useState('');
  return <RemoteDropdown collectionName='items' onAddItem={onAddItem.bind(this, options, setOptions)} onLoad={params => Api.onLoad(_.extend(params, {
    items: options,
    perPage: 10
  }))} onSelection={setSelectedValue.bind(this)} renderOption={renderOption.bind(this)} value={selectedValue} style={{
    width: 600
  }} />;
}`,...m.parameters?.docs?.source}}};const se=["Default","SelectedValue","LargeList","Pagination"];export{l as Default,u as LargeList,m as Pagination,p as SelectedValue,se as __namedExportsOrder,oe as default};
