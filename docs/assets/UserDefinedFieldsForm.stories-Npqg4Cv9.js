import{r as y,j as n}from"./iframe-D2tDQHIu.js";import{F as l}from"./Form-82LA1gPL.js";import{v as f,A as C}from"./index.es99-Bw1moXYc.js";import{f as F}from"./index.es27-BqzRcxM3.js";import{_ as b,U as x}from"./UserDefinedFields-B8VUMHPj.js";import"./extends-CCbyfPlC.js";import"./inheritsLoose-1HkgTRWY.js";import"./setPrototypeOf-DgZC2w_0.js";import"./getElementType-TLbMidFA.js";import"./Button-e1g_PNPa.js";import"./Icon-BSWzGvLf.js";import"./Label-CmMRyCgB.js";import"./ModernAutoControlledComponent-CIi-16Zs.js";import"./assertThisInitialized-B9jnkVVz.js";import"./includes-ComNSsGh.js";import"./toFinite-Ch3-mxAi.js";import"./forEach-xROvcHNC.js";import"./Dimmer-Wnz_k9oJ.js";import"./Portal-BF3g11_x.js";import"./keyboardKey-UPAJnvsN.js";import"./map-q00LD5yS.js";import"./Checkbox-DNAhP8My.js";import"./_baseSet-KiE310VO.js";import"./_baseAssignValue-CihLrf3R.js";import"./Dropdown-29n6mrng.js";import"./without-CqD5ld8v.js";import"./isArrayLikeObject-GAfAHYyv.js";import"./isEmpty-4KKn6hcF.js";import"./deburr-ChK6Lkvo.js";import"./index-D8tE4-9w.js";import"./_arrayReduce-CrxnWFSq.js";import"./filter-DnFvB4UZ.js";import"./Input-R2TI-Tve.js";import"./index.es34-NGGuPWEW.js";import"./index.es32-CI3sAoKd.js";import"./index.es28-CSYMWsbM.js";import"./index.es12-B_RCGzPV.js";import"./index.es3-BBSLpI2q.js";import"./useDrop-TaNt96Kh.js";import"./index-CwwtuY6R.js";import"./index.es25-Cao7YWB7.js";import"./index.es15-BOYkuYTA.js";class j{toData(r){return{id:r.id,accuracy:r.accuracy,description:r.description,end_date:r.endDate,range:r.range,start_date:r.startDate,_destroy:r._destroy}}toFuzzyDate(r){return r?{id:r.id,accuracy:r.accuracy,description:r.description,endDate:r.end_date,range:r.range,startDate:r.start_date,_destroy:r._destroy}:null}toPayload(r,_){const p=r[_];return p?{[_]:this.toData(p)}:null}}const h=new j,w={boolean:"Boolean",date:"Date",fuzzyDate:"FuzzyDate",number:"Number",richText:"RichText",select:"Select",string:"String",text:"Text"},T={DataTypes:w},{DataTypes:c}=T,D=t=>{const[r,_]=y.useState(t.fields||[]),p=y.useCallback(e=>`user_defined[${e.uuid}]`,[]),s=y.useCallback(e=>t.isError(p(e)),[p,t.isError]),m=y.useCallback((e,o)=>{t.onChange({...t.data,[e.uuid]:o}),t.onClearValidationError&&t.onClearValidationError(p(e))},[p,t.data,t.onChange,t.onClearValidationError]),q=y.useCallback((e,o)=>{let u;const i=t.data&&t.data[e.uuid];return e.data_type===c.string&&(u=n.jsx(l.Input,{error:s(e),label:e.column_name,required:e.required,onChange:(a,{value:d})=>m(e,d),value:i||""},o)),e.data_type===c.number&&(u=n.jsx(l.Input,{error:s(e),label:e.column_name,required:e.required,onChange:(a,{value:d})=>m(e,d),value:i||0,type:"number"},o)),e.data_type===c.select&&(u=n.jsx(l.Dropdown,{clearable:!0,error:s(e),label:e.column_name,multiple:e.allow_multiple,required:e.required,options:b.map(e.options,a=>({key:a,value:a,text:a})),onChange:(a,{value:d})=>m(e,d),selectOnBlur:!1,selection:!0,value:e.allow_multiple?i||[]:i||""},o)),e.data_type===c.text&&(u=n.jsx(l.TextArea,{error:s(e),label:e.column_name,required:e.required,onChange:(a,{value:d})=>m(e,d),value:i||""},o)),e.data_type===c.date&&(u=n.jsx(l.Input,{error:s(e),label:e.column_name,required:e.required,children:n.jsx(f,{onChange:a=>m(e,a&&a.toISOString()),value:i&&new Date(i)})},o)),e.data_type===c.fuzzyDate&&(u=n.jsx(l.Input,{error:s(e),label:e.column_name,required:e.required,children:n.jsx(C,{centered:!1,date:h.toFuzzyDate(i)||{},onChange:a=>m(e,h.toData(a)),title:e.column_name})},o)),e.data_type===c.boolean&&(u=n.jsx(l.Checkbox,{checked:!!i,error:s(e),label:e.column_name,onChange:(a,{checked:d})=>m(e,d)},o)),e.data_type===c.richText&&(u=n.jsx(l.Input,{error:s(e),label:e.column_name,required:e.required,children:n.jsx(F,{onChange:a=>m(e,a),value:i})},o)),u},[t.data,s,m]);return y.useEffect(()=>{if(!b.isEmpty(r))return;const e={defineable_id:t.defineableId,defineable_type:t.defineableType,per_page:0,required:t.required,sort_by:"order",table_name:t.tableName};x.fetchAll(e).then(({data:o})=>_(o.user_defined_fields))},[]),n.jsx(n.Fragment,{children:b.map(r,q.bind(void 0))})};D.__docgenInfo={description:"",methods:[],displayName:"UserDefinedFieldsForm",props:{data:{required:!0,flowType:{name:"any"},description:""},defineableId:{required:!1,flowType:{name:"number"},description:""},defineableType:{required:!1,flowType:{name:"string"},description:""},fields:{required:!1,flowType:{name:"Array"},description:""},isError:{required:!0,flowType:{name:"signature",type:"function",raw:"(key: string) => boolean",signature:{arguments:[{name:"key",type:{name:"string"}}],return:{name:"boolean"}}},description:""},onChange:{required:!0,flowType:{name:"signature",type:"function",raw:"(obj: any) => void",signature:{arguments:[{name:"obj",type:{name:"any"}}],return:{name:"void"}}},description:""},onClearValidationError:{required:!0,flowType:{name:"signature",type:"function",raw:"(...keys: Array<string>) => void",signature:{arguments:[{name:"keys",type:{name:"Array",elements:[{name:"string"}],raw:"Array<string>"},rest:!0}],return:{name:"void"}}},description:""},required:{required:!1,flowType:{name:"boolean"},description:""},tableName:{required:!1,flowType:{name:"string"},description:""}}};const _e={title:"Components/User Defined Fields/UserDefinedFieldsForm",component:D},g=()=>{const[t,r]=y.useState({});return n.jsx(l,{children:n.jsx(D,{data:t,isError:()=>!1,onChange:r})})};g.__docgenInfo={description:"",methods:[],displayName:"Default"};g.parameters={...g.parameters,docs:{...g.parameters?.docs,source:{originalSource:`() => {
  const [data, setData] = useState({});
  return <Form>
      <UserDefinedFieldsForm data={data} isError={() => false} onChange={setData} />
    </Form>;
}`,...g.parameters?.docs?.source}}};const be=["Default"];export{g as Default,be as __namedExportsOrder,_e as default};
