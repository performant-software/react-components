import{r as t,j as n}from"./iframe-Dd51AVec.js";import{I as q}from"./Icon-Be-bmVif.js";import{_ as T}from"./index-default-C0I3bBxV.js";import{F as U}from"./FileInputButton-DEh1kKoH.js";import{i as g}from"./i18n-DkobdbHY.js";import{L as C}from"./LazyAudio-BFVzc_O_.js";import{L as k}from"./LazyDocument-DocZoKZr.js";import{L as S}from"./LazyImage-CYSIH2S2.js";import{L as M}from"./LazyVideo-BLk7Tavj.js";import{T as B}from"./Trans-CpDqBL1J.js";const r={audio:"audio",image:"image",pdf:"application/pdf",video:"video"},F=["image/png","image/jpeg","image/gif","image/webp","image/bmp","video/m4v","video/mp4"],z=e=>{const[l,p]=t.useState(e.contentType||""),[c,b]=t.useState(e.name),[s,w]=t.useState(e.preview),[o,m]=t.useState(e.src),[d,L]=t.useState(e.downloadUrl),[f,v]=t.useState(null),y=t.useMemo(()=>{let a;return c&&(a=c.split(".").pop(),a=a&&a.toUpperCase()),a},[c]),h=t.useCallback(a=>{const i=T.first(a);p(i.type),b(i.name),w(null),L(null),T.contains(F,i.type)||i.type.startsWith(r.audio)||i.type===r.pdf?(m(URL.createObjectURL(i)),v(g.t("LazyMedia.buttons.preview"))):(m(null),v(null)),e.onUpload(i)},[e.onUpload]),u=t.useCallback(()=>n.jsxs(n.Fragment,{children:[e.onUpload&&n.jsx(U,{color:"orange",content:g.t("Common.buttons.upload"),icon:"cloud upload",onSelection:h}),e.children]})),j=t.useCallback(()=>l.startsWith(r.image)?n.jsx(S,{dimmable:e.dimmable,download:d,preview:s,src:o,size:e.size,viewButtonLabel:f,children:u()}):l.startsWith(r.video)?n.jsx(M,{dimmable:e.dimmable,download:d,playButtonLabel:f,preview:s,src:o,size:e.size,transcriptions:e.transcriptions,children:u()}):l.startsWith(r.audio)?n.jsx(C,{dimmable:e.dimmable,download:d,playButtonLabel:f,preview:s,src:o,size:e.size,children:u()}):n.jsx(k,{dimmable:e.dimmable,download:d,pdf:l===r.pdf,preview:s,src:o,size:e.size,children:u()}),[l,s,o,e.dimmable,d,e.size]),x=t.useCallback(()=>y?n.jsxs("div",{children:[n.jsx(q,{name:"info circle"}),n.jsx("span",{children:n.jsx(B,{components:{bold:n.jsx("strong",{})},default:"Your <bold>{{type}}</bold> has been received",i18n:g,i18nKey:"LazyMedia.messages.uploaded",values:{type:y}})})]}):null,[y]);return t.useEffect(()=>{e.contentType&&p(e.contentType),e.name&&b(e.name),e.preview&&w(e.preview),e.src?m(e.src):m(null)},[e.contentType,e.name,e.preview,e.src]),n.jsxs("div",{className:"lazy-media",children:[j(),x()]})};z.defaultProps={dimmable:!0,size:"medium"};z.__docgenInfo={description:"",methods:[],displayName:"LazyMedia",props:{children:{required:!1,flowType:{name:"Node"},description:""},contentType:{required:!0,flowType:{name:"string"},description:""},dimmable:{required:!1,flowType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},downloadUrl:{required:!1,flowType:{name:"string"},description:""},name:{required:!1,flowType:{name:"string"},description:""},onUpload:{required:!0,flowType:{name:"signature",type:"function",raw:"(file: File) => void",signature:{arguments:[{name:"file",type:{name:"File"}}],return:{name:"void"}}},description:""},preview:{required:!1,flowType:{name:"string"},description:""},size:{required:!1,flowType:{name:"string"},description:"",defaultValue:{value:"'medium'",computed:!1}},src:{required:!1,flowType:{name:"string"},description:""},transcriptions:{required:!1,flowType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  default?: boolean,
  label: string,
  language: string,
  src: string
}`,signature:{properties:[{key:"default",value:{name:"boolean",required:!1}},{key:"label",value:{name:"string",required:!0}},{key:"language",value:{name:"string",required:!0}},{key:"src",value:{name:"string",required:!0}}]}}],raw:"Array<Transcription>"},description:""}}};export{z as L};
