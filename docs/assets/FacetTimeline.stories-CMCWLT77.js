import{j as M}from"./jsx-runtime-D9TvR9R2.js";import{r as p}from"./index-C0dDX-lL.js";import{E as sr}from"./EventDetails-CCfl6B8L.js";import{E as Ir}from"./EventsList-CWIr7lDY.js";import"./index.es33-CA9Q8eXe.js";import{T as Rr}from"./index.es11-CDIfCsDR.js";import{c as re}from"./clsx-B-dksMZM.js";import{_}from"./index-default-C_maRo4o.js";import{F as zr}from"./FacetSlider-BZbRwhQR.js";import{I as On}from"./Icon-CLXecEt2.js";import{u as Ar}from"./CoreData-37WkoVSV.js";import{i as Ln}from"./i18n-1SWpSAfC.js";import{M as lr}from"./Modal-BRKGPQXc.js";import{w as He}from"./CoreDataContextProvider-Btcnl27g.js";import{c as Wr}from"./createLucideIcon-DTDp3q8_.js";import"./_commonjsHelpers-BosuxZz1.js";import"./Event-qoMNT_Ut.js";import"./LoadAnimation-b0qjd8WL.js";import"./index-DOYXiIEK.js";import"./iframe-BMVya-aF.js";import"../sb-preview/runtime.js";import"./index-DphhVPUj.js";import"./floating-ui.react-dom-BUm7GwT3.js";import"./chevron-right-DnfwX419.js";import"./createLucideIcon-Cly0WHBx.js";import"./i18next-CwS9wMM1.js";import"./toPropertyKey-BcUJYDQU.js";import"./defineProperty-DcNpp85p.js";import"./inherits-CWPG5jll.js";import"./assertThisInitialized-B9jnkVVz.js";import"./setPrototypeOf-DgZC2w_0.js";import"./createClass-CV9nCQMI.js";import"./getPrototypeOf-BYVhAdwF.js";import"./component-Cj9xgufj.js";/**
 * @license lucide-react v0.362.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=Wr("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);function ln(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function Vr(e,n){return e==null||n==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function Vn(e){let n,t,r;e.length!==2?(n=ln,t=(u,l)=>ln(e(u),l),r=(u,l)=>e(u)-l):(n=e===ln||e===Vr?e:Zr,t=e,r=e);function o(u,l,s=0,c=u.length){if(s<c){if(n(l,l)!==0)return c;do{const f=s+c>>>1;t(u[f],l)<0?s=f+1:c=f}while(s<c)}return s}function i(u,l,s=0,c=u.length){if(s<c){if(n(l,l)!==0)return c;do{const f=s+c>>>1;t(u[f],l)<=0?s=f+1:c=f}while(s<c)}return s}function a(u,l,s=0,c=u.length){const f=o(u,l,s,c-1);return f>s&&r(u[f-1],l)>-r(u[f],l)?f-1:f}return{left:o,center:a,right:i}}function Zr(){return 0}function Br(e){return e===null?NaN:+e}const Xr=Vn(ln),Gr=Xr.right;Vn(Br).center;const Jr=Math.sqrt(50),Qr=Math.sqrt(10),Kr=Math.sqrt(2);function cn(e,n,t){const r=(n-e)/Math.max(0,t),o=Math.floor(Math.log10(r)),i=r/Math.pow(10,o),a=i>=Jr?10:i>=Qr?5:i>=Kr?2:1;let u,l,s;return o<0?(s=Math.pow(10,-o)/a,u=Math.round(e*s),l=Math.round(n*s),u/s<e&&++u,l/s>n&&--l,s=-s):(s=Math.pow(10,o)*a,u=Math.round(e/s),l=Math.round(n/s),u*s<e&&++u,l*s>n&&--l),l<u&&.5<=t&&t<2?cn(e,n,t*2):[u,l,s]}function ei(e,n,t){if(n=+n,e=+e,t=+t,!(t>0))return[];if(e===n)return[e];const r=n<e,[o,i,a]=r?cn(n,e,t):cn(e,n,t);if(!(i>=o))return[];const u=i-o+1,l=new Array(u);if(r)if(a<0)for(let s=0;s<u;++s)l[s]=(i-s)/-a;else for(let s=0;s<u;++s)l[s]=(i-s)*a;else if(a<0)for(let s=0;s<u;++s)l[s]=(o+s)/-a;else for(let s=0;s<u;++s)l[s]=(o+s)*a;return l}function qn(e,n,t){return n=+n,e=+e,t=+t,cn(e,n,t)[2]}function In(e,n,t){n=+n,e=+e,t=+t;const r=n<e,o=r?qn(n,e,t):qn(e,n,t);return(r?-1:1)*(o<0?1/-o:o)}function cr(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function Zn(e,n,t){e.prototype=n.prototype=t,t.constructor=e}function mr(e,n){var t=Object.create(e.prototype);for(var r in n)t[r]=n[r];return t}function Ke(){}var Xe=.7,mn=1/Xe,$e="\\s*([+-]?\\d+)\\s*",Ge="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ae="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ni=/^#([0-9a-f]{3,8})$/,ti=new RegExp(`^rgb\\(${$e},${$e},${$e}\\)$`),ri=new RegExp(`^rgb\\(${ae},${ae},${ae}\\)$`),ii=new RegExp(`^rgba\\(${$e},${$e},${$e},${Ge}\\)$`),ai=new RegExp(`^rgba\\(${ae},${ae},${ae},${Ge}\\)$`),oi=new RegExp(`^hsl\\(${Ge},${ae},${ae}\\)$`),ui=new RegExp(`^hsla\\(${Ge},${ae},${ae},${Ge}\\)$`),lt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Zn(Ke,Je,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ct,formatHex:ct,formatHex8:si,formatHsl:li,formatRgb:mt,toString:mt});function ct(){return this.rgb().formatHex()}function si(){return this.rgb().formatHex8()}function li(){return fr(this).formatHsl()}function mt(){return this.rgb().formatRgb()}function Je(e){var n,t;return e=(e+"").trim().toLowerCase(),(n=ni.exec(e))?(t=n[1].length,n=parseInt(n[1],16),t===6?ft(n):t===3?new B(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):t===8?tn(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):t===4?tn(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=ti.exec(e))?new B(n[1],n[2],n[3],1):(n=ri.exec(e))?new B(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=ii.exec(e))?tn(n[1],n[2],n[3],n[4]):(n=ai.exec(e))?tn(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=oi.exec(e))?dt(n[1],n[2]/100,n[3]/100,1):(n=ui.exec(e))?dt(n[1],n[2]/100,n[3]/100,n[4]):lt.hasOwnProperty(e)?ft(lt[e]):e==="transparent"?new B(NaN,NaN,NaN,0):null}function ft(e){return new B(e>>16&255,e>>8&255,e&255,1)}function tn(e,n,t,r){return r<=0&&(e=n=t=NaN),new B(e,n,t,r)}function ci(e){return e instanceof Ke||(e=Je(e)),e?(e=e.rgb(),new B(e.r,e.g,e.b,e.opacity)):new B}function Rn(e,n,t,r){return arguments.length===1?ci(e):new B(e,n,t,r??1)}function B(e,n,t,r){this.r=+e,this.g=+n,this.b=+t,this.opacity=+r}Zn(B,Rn,mr(Ke,{brighter(e){return e=e==null?mn:Math.pow(mn,e),new B(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Xe:Math.pow(Xe,e),new B(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new B(ye(this.r),ye(this.g),ye(this.b),fn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gt,formatHex:gt,formatHex8:mi,formatRgb:ht,toString:ht}));function gt(){return`#${de(this.r)}${de(this.g)}${de(this.b)}`}function mi(){return`#${de(this.r)}${de(this.g)}${de(this.b)}${de((isNaN(this.opacity)?1:this.opacity)*255)}`}function ht(){const e=fn(this.opacity);return`${e===1?"rgb(":"rgba("}${ye(this.r)}, ${ye(this.g)}, ${ye(this.b)}${e===1?")":`, ${e})`}`}function fn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ye(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function de(e){return e=ye(e),(e<16?"0":"")+e.toString(16)}function dt(e,n,t,r){return r<=0?e=n=t=NaN:t<=0||t>=1?e=n=NaN:n<=0&&(e=NaN),new ie(e,n,t,r)}function fr(e){if(e instanceof ie)return new ie(e.h,e.s,e.l,e.opacity);if(e instanceof Ke||(e=Je(e)),!e)return new ie;if(e instanceof ie)return e;e=e.rgb();var n=e.r/255,t=e.g/255,r=e.b/255,o=Math.min(n,t,r),i=Math.max(n,t,r),a=NaN,u=i-o,l=(i+o)/2;return u?(n===i?a=(t-r)/u+(t<r)*6:t===i?a=(r-n)/u+2:a=(n-t)/u+4,u/=l<.5?i+o:2-i-o,a*=60):u=l>0&&l<1?0:a,new ie(a,u,l,e.opacity)}function fi(e,n,t,r){return arguments.length===1?fr(e):new ie(e,n,t,r??1)}function ie(e,n,t,r){this.h=+e,this.s=+n,this.l=+t,this.opacity=+r}Zn(ie,fi,mr(Ke,{brighter(e){return e=e==null?mn:Math.pow(mn,e),new ie(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Xe:Math.pow(Xe,e),new ie(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*n,o=2*t-r;return new B(Cn(e>=240?e-240:e+120,o,r),Cn(e,o,r),Cn(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new ie(yt(this.h),rn(this.s),rn(this.l),fn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fn(this.opacity);return`${e===1?"hsl(":"hsla("}${yt(this.h)}, ${rn(this.s)*100}%, ${rn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function yt(e){return e=(e||0)%360,e<0?e+360:e}function rn(e){return Math.max(0,Math.min(1,e||0))}function Cn(e,n,t){return(e<60?n+(t-n)*e/60:e<180?t:e<240?n+(t-n)*(240-e)/60:n)*255}const Bn=e=>()=>e;function gi(e,n){return function(t){return e+t*n}}function hi(e,n,t){return e=Math.pow(e,t),n=Math.pow(n,t)-e,t=1/t,function(r){return Math.pow(e+r*n,t)}}function di(e){return(e=+e)==1?gr:function(n,t){return t-n?hi(n,t,e):Bn(isNaN(n)?t:n)}}function gr(e,n){var t=n-e;return t?gi(e,t):Bn(isNaN(e)?n:e)}const pt=function e(n){var t=di(n);function r(o,i){var a=t((o=Rn(o)).r,(i=Rn(i)).r),u=t(o.g,i.g),l=t(o.b,i.b),s=gr(o.opacity,i.opacity);return function(c){return o.r=a(c),o.g=u(c),o.b=l(c),o.opacity=s(c),o+""}}return r.gamma=e,r}(1);function yi(e,n){n||(n=[]);var t=e?Math.min(n.length,e.length):0,r=n.slice(),o;return function(i){for(o=0;o<t;++o)r[o]=e[o]*(1-i)+n[o]*i;return r}}function pi(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function vi(e,n){var t=n?n.length:0,r=e?Math.min(t,e.length):0,o=new Array(r),i=new Array(t),a;for(a=0;a<r;++a)o[a]=Xn(e[a],n[a]);for(;a<t;++a)i[a]=n[a];return function(u){for(a=0;a<r;++a)i[a]=o[a](u);return i}}function wi(e,n){var t=new Date;return e=+e,n=+n,function(r){return t.setTime(e*(1-r)+n*r),t}}function gn(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function Mi(e,n){var t={},r={},o;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(o in n)o in e?t[o]=Xn(e[o],n[o]):r[o]=n[o];return function(i){for(o in t)r[o]=t[o](i);return r}}var zn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Dn=new RegExp(zn.source,"g");function bi(e){return function(){return e}}function Ti(e){return function(n){return e(n)+""}}function xi(e,n){var t=zn.lastIndex=Dn.lastIndex=0,r,o,i,a=-1,u=[],l=[];for(e=e+"",n=n+"";(r=zn.exec(e))&&(o=Dn.exec(n));)(i=o.index)>t&&(i=n.slice(t,i),u[a]?u[a]+=i:u[++a]=i),(r=r[0])===(o=o[0])?u[a]?u[a]+=o:u[++a]=o:(u[++a]=null,l.push({i:a,x:gn(r,o)})),t=Dn.lastIndex;return t<n.length&&(i=n.slice(t),u[a]?u[a]+=i:u[++a]=i),u.length<2?l[0]?Ti(l[0].x):bi(n):(n=l.length,function(s){for(var c=0,f;c<n;++c)u[(f=l[c]).i]=f.x(s);return u.join("")})}function Xn(e,n){var t=typeof n,r;return n==null||t==="boolean"?Bn(n):(t==="number"?gn:t==="string"?(r=Je(n))?(n=r,pt):xi:n instanceof Je?pt:n instanceof Date?wi:pi(n)?yi:Array.isArray(n)?vi:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?Mi:gn)(e,n)}function Ci(e,n){return e=+e,n=+n,function(t){return Math.round(e*(1-t)+n*t)}}function Di(e){return function(){return e}}function ki(e){return+e}var vt=[0,1];function Ne(e){return e}function An(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:Di(isNaN(n)?NaN:.5)}function Ui(e,n){var t;return e>n&&(t=e,e=n,n=t),function(r){return Math.max(e,Math.min(n,r))}}function Ni(e,n,t){var r=e[0],o=e[1],i=n[0],a=n[1];return o<r?(r=An(o,r),i=t(a,i)):(r=An(r,o),i=t(i,a)),function(u){return i(r(u))}}function Si(e,n,t){var r=Math.min(e.length,n.length)-1,o=new Array(r),i=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++a<r;)o[a]=An(e[a],e[a+1]),i[a]=t(n[a],n[a+1]);return function(u){var l=Gr(e,u,1,r)-1;return i[l](o[l](u))}}function hr(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function $i(){var e=vt,n=vt,t=Xn,r,o,i,a=Ne,u,l,s;function c(){var h=Math.min(e.length,n.length);return a!==Ne&&(a=Ui(e[0],e[h-1])),u=h>2?Si:Ni,l=s=null,f}function f(h){return h==null||isNaN(h=+h)?i:(l||(l=u(e.map(r),n,t)))(r(a(h)))}return f.invert=function(h){return a(o((s||(s=u(n,e.map(r),gn)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,ki),c()):e.slice()},f.range=function(h){return arguments.length?(n=Array.from(h),c()):n.slice()},f.rangeRound=function(h){return n=Array.from(h),t=Ci,c()},f.clamp=function(h){return arguments.length?(a=h?!0:Ne,c()):a!==Ne},f.interpolate=function(h){return arguments.length?(t=h,c()):t},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,v){return r=h,o=v,c()}}function dr(){return $i()(Ne,Ne)}function Fi(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function hn(e,n){if((t=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var t,r=e.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+e.slice(t+1)]}function Fe(e){return e=hn(Math.abs(e)),e?e[1]:NaN}function Ei(e,n){return function(t,r){for(var o=t.length,i=[],a=0,u=e[0],l=0;o>0&&u>0&&(l+u+1>r&&(u=Math.max(1,r-l)),i.push(t.substring(o-=u,o+u)),!((l+=u+1)>r));)u=e[a=(a+1)%e.length];return i.reverse().join(n)}}function Yi(e){return function(n){return n.replace(/[0-9]/g,function(t){return e[+t]})}}var Hi=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function dn(e){if(!(n=Hi.exec(e)))throw new Error("invalid format: "+e);var n;return new Gn({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}dn.prototype=Gn.prototype;function Gn(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Gn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ji(e){e:for(var n=e.length,t=1,r=-1,o;t<n;++t)switch(e[t]){case".":r=o=t;break;case"0":r===0&&(r=t),o=t;break;default:if(!+e[t])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(o+1):e}var yr;function _i(e,n){var t=hn(e,n);if(!t)return e+"";var r=t[0],o=t[1],i=o-(yr=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,a=r.length;return i===a?r:i>a?r+new Array(i-a+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+hn(e,Math.max(0,n+i-1))[0]}function wt(e,n){var t=hn(e,n);if(!t)return e+"";var r=t[0],o=t[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}const Mt={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Fi,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>wt(e*100,n),r:wt,s:_i,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function bt(e){return e}var Tt=Array.prototype.map,xt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Oi(e){var n=e.grouping===void 0||e.thousands===void 0?bt:Ei(Tt.call(e.grouping,Number),e.thousands+""),t=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",o=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?bt:Yi(Tt.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function s(f){f=dn(f);var h=f.fill,v=f.align,U=f.sign,D=f.symbol,O=f.zero,$=f.width,X=f.comma,k=f.precision,I=f.trim,j=f.type;j==="n"?(X=!0,j="g"):Mt[j]||(k===void 0&&(k=12),I=!0,j="g"),(O||h==="0"&&v==="=")&&(O=!0,h="0",v="=");var w=D==="$"?t:D==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",H=D==="$"?r:/[%p]/.test(j)?a:"",P=Mt[j],ne=/[defgprs%]/.test(j);k=k===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function F(T){var V=w,L=H,g,d,b;if(j==="c")L=P(T)+L,T="";else{T=+T;var S=T<0||1/T<0;if(T=isNaN(T)?l:P(Math.abs(T),k),I&&(T=ji(T)),S&&+T==0&&U!=="+"&&(S=!1),V=(S?U==="("?U:u:U==="-"||U==="("?"":U)+V,L=(j==="s"?xt[8+yr/3]:"")+L+(S&&U==="("?")":""),ne){for(g=-1,d=T.length;++g<d;)if(b=T.charCodeAt(g),48>b||b>57){L=(b===46?o+T.slice(g+1):T.slice(g))+L,T=T.slice(0,g);break}}}X&&!O&&(T=n(T,1/0));var Y=V.length+T.length+L.length,q=Y<$?new Array($-Y+1).join(h):"";switch(X&&O&&(T=n(q+T,q.length?$-L.length:1/0),q=""),v){case"<":T=V+T+L+q;break;case"=":T=V+q+T+L;break;case"^":T=q.slice(0,Y=q.length>>1)+V+T+L+q.slice(Y);break;default:T=q+V+T+L;break}return i(T)}return F.toString=function(){return f+""},F}function c(f,h){var v=s((f=dn(f),f.type="f",f)),U=Math.max(-8,Math.min(8,Math.floor(Fe(h)/3)))*3,D=Math.pow(10,-U),O=xt[8+U/3];return function($){return v(D*$)+O}}return{format:s,formatPrefix:c}}var an,pr,vr;Li({thousands:",",grouping:[3],currency:["$",""]});function Li(e){return an=Oi(e),pr=an.format,vr=an.formatPrefix,an}function qi(e){return Math.max(0,-Fe(Math.abs(e)))}function Ii(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Fe(n)/3)))*3-Fe(Math.abs(e)))}function Ri(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,Fe(n)-Fe(e))+1}function zi(e,n,t,r){var o=In(e,n,t),i;switch(r=dn(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(n));return r.precision==null&&!isNaN(i=Ii(o,a))&&(r.precision=i),vr(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=Ri(o,Math.max(Math.abs(e),Math.abs(n))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=qi(o))&&(r.precision=i-(r.type==="%")*2);break}}return pr(r)}function Ai(e){var n=e.domain;return e.ticks=function(t){var r=n();return ei(r[0],r[r.length-1],t??10)},e.tickFormat=function(t,r){var o=n();return zi(o[0],o[o.length-1],t??10,r)},e.nice=function(t){t==null&&(t=10);var r=n(),o=0,i=r.length-1,a=r[o],u=r[i],l,s,c=10;for(u<a&&(s=a,a=u,u=s,s=o,o=i,i=s);c-- >0;){if(s=qn(a,u,t),s===l)return r[o]=a,r[i]=u,n(r);if(s>0)a=Math.floor(a/s)*s,u=Math.ceil(u/s)*s;else if(s<0)a=Math.ceil(a*s)/s,u=Math.floor(u*s)/s;else break;l=s}return e},e}function wr(){var e=dr();return e.copy=function(){return hr(e,wr())},cr.apply(e,arguments),Ai(e)}function Wi(e,n){e=e.slice();var t=0,r=e.length-1,o=e[t],i=e[r],a;return i<o&&(a=t,t=r,r=a,a=o,o=i,i=a),e[t]=n.floor(o),e[r]=n.ceil(i),e}const kn=new Date,Un=new Date;function R(e,n,t,r){function o(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return o.floor=i=>(e(i=new Date(+i)),i),o.ceil=i=>(e(i=new Date(i-1)),n(i,1),e(i),i),o.round=i=>{const a=o(i),u=o.ceil(i);return i-a<u-i?a:u},o.offset=(i,a)=>(n(i=new Date(+i),a==null?1:Math.floor(a)),i),o.range=(i,a,u)=>{const l=[];if(i=o.ceil(i),u=u==null?1:Math.floor(u),!(i<a)||!(u>0))return l;let s;do l.push(s=new Date(+i)),n(i,u),e(i);while(s<i&&i<a);return l},o.filter=i=>R(a=>{if(a>=a)for(;e(a),!i(a);)a.setTime(a-1)},(a,u)=>{if(a>=a)if(u<0)for(;++u<=0;)for(;n(a,-1),!i(a););else for(;--u>=0;)for(;n(a,1),!i(a););}),t&&(o.count=(i,a)=>(kn.setTime(+i),Un.setTime(+a),e(kn),e(Un),Math.floor(t(kn,Un))),o.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?o.filter(r?a=>r(a)%i===0:a=>o.count(0,a)%i===0):o)),o}const yn=R(()=>{},(e,n)=>{e.setTime(+e+n)},(e,n)=>n-e);yn.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?R(n=>{n.setTime(Math.floor(n/e)*e)},(n,t)=>{n.setTime(+n+t*e)},(n,t)=>(t-n)/e):yn);yn.range;const se=1e3,K=se*60,le=K*60,fe=le*24,Jn=fe*7,Ct=fe*30,Nn=fe*365,Se=R(e=>{e.setTime(e-e.getMilliseconds())},(e,n)=>{e.setTime(+e+n*se)},(e,n)=>(n-e)/se,e=>e.getUTCSeconds());Se.range;const Qn=R(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*se)},(e,n)=>{e.setTime(+e+n*K)},(e,n)=>(n-e)/K,e=>e.getMinutes());Qn.range;const Pi=R(e=>{e.setUTCSeconds(0,0)},(e,n)=>{e.setTime(+e+n*K)},(e,n)=>(n-e)/K,e=>e.getUTCMinutes());Pi.range;const Kn=R(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*se-e.getMinutes()*K)},(e,n)=>{e.setTime(+e+n*le)},(e,n)=>(n-e)/le,e=>e.getHours());Kn.range;const Vi=R(e=>{e.setUTCMinutes(0,0,0)},(e,n)=>{e.setTime(+e+n*le)},(e,n)=>(n-e)/le,e=>e.getUTCHours());Vi.range;const et=R(e=>e.setHours(0,0,0,0),(e,n)=>e.setDate(e.getDate()+n),(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*K)/fe,e=>e.getDate()-1);et.range;const Zi=R(e=>{e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n)},(e,n)=>(n-e)/fe,e=>e.getUTCDate()-1);Zi.range;const Bi=R(e=>{e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n)},(e,n)=>(n-e)/fe,e=>Math.floor(e/fe));Bi.range;function we(e){return R(n=>{n.setDate(n.getDate()-(n.getDay()+7-e)%7),n.setHours(0,0,0,0)},(n,t)=>{n.setDate(n.getDate()+t*7)},(n,t)=>(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*K)/Jn)}const nt=we(0),Xi=we(1),Gi=we(2),Ji=we(3),Qi=we(4),Ki=we(5),ea=we(6);nt.range;Xi.range;Gi.range;Ji.range;Qi.range;Ki.range;ea.range;function Me(e){return R(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-e)%7),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCDate(n.getUTCDate()+t*7)},(n,t)=>(t-n)/Jn)}const na=Me(0),ta=Me(1),ra=Me(2),ia=Me(3),aa=Me(4),oa=Me(5),ua=Me(6);na.range;ta.range;ra.range;ia.range;aa.range;oa.range;ua.range;const tt=R(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,n)=>{e.setMonth(e.getMonth()+n)},(e,n)=>n.getMonth()-e.getMonth()+(n.getFullYear()-e.getFullYear())*12,e=>e.getMonth());tt.range;const sa=R(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCMonth(e.getUTCMonth()+n)},(e,n)=>n.getUTCMonth()-e.getUTCMonth()+(n.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());sa.range;const bn=R(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n)},(e,n)=>n.getFullYear()-e.getFullYear(),e=>e.getFullYear());bn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:R(n=>{n.setFullYear(Math.floor(n.getFullYear()/e)*e),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,t)=>{n.setFullYear(n.getFullYear()+t*e)});bn.range;const Mr=R(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n)},(e,n)=>n.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Mr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:R(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/e)*e),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCFullYear(n.getUTCFullYear()+t*e)});Mr.range;function la(e,n,t,r,o,i){const a=[[Se,1,se],[Se,5,5*se],[Se,15,15*se],[Se,30,30*se],[i,1,K],[i,5,5*K],[i,15,15*K],[i,30,30*K],[o,1,le],[o,3,3*le],[o,6,6*le],[o,12,12*le],[r,1,fe],[r,2,2*fe],[t,1,Jn],[n,1,Ct],[n,3,3*Ct],[e,1,Nn]];function u(s,c,f){const h=c<s;h&&([s,c]=[c,s]);const v=f&&typeof f.range=="function"?f:l(s,c,f),U=v?v.range(s,+c+1):[];return h?U.reverse():U}function l(s,c,f){const h=Math.abs(c-s)/f,v=Vn(([,,O])=>O).right(a,h);if(v===a.length)return e.every(In(s/Nn,c/Nn,f));if(v===0)return yn.every(Math.max(In(s,c,f),1));const[U,D]=a[h/a[v-1][2]<a[v][2]/h?v-1:v];return U.every(D)}return[u,l]}const[ca,ma]=la(bn,tt,nt,et,Kn,Qn),Sn=new Date,$n=new Date;function oe(e,n,t,r){function o(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return o.floor=i=>(e(i=new Date(+i)),i),o.ceil=i=>(e(i=new Date(i-1)),n(i,1),e(i),i),o.round=i=>{const a=o(i),u=o.ceil(i);return i-a<u-i?a:u},o.offset=(i,a)=>(n(i=new Date(+i),a==null?1:Math.floor(a)),i),o.range=(i,a,u)=>{const l=[];if(i=o.ceil(i),u=u==null?1:Math.floor(u),!(i<a)||!(u>0))return l;let s;do l.push(s=new Date(+i)),n(i,u),e(i);while(s<i&&i<a);return l},o.filter=i=>oe(a=>{if(a>=a)for(;e(a),!i(a);)a.setTime(a-1)},(a,u)=>{if(a>=a)if(u<0)for(;++u<=0;)for(;n(a,-1),!i(a););else for(;--u>=0;)for(;n(a,1),!i(a););}),t&&(o.count=(i,a)=>(Sn.setTime(+i),$n.setTime(+a),e(Sn),e($n),Math.floor(t(Sn,$n))),o.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?o.filter(r?a=>r(a)%i===0:a=>o.count(0,a)%i===0):o)),o}const fa=1e3,rt=fa*60,ga=rt*60,Qe=ga*24,br=Qe*7,it=oe(e=>e.setHours(0,0,0,0),(e,n)=>e.setDate(e.getDate()+n),(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*rt)/Qe,e=>e.getDate()-1);it.range;const at=oe(e=>{e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n)},(e,n)=>(n-e)/Qe,e=>e.getUTCDate()-1);at.range;const ha=oe(e=>{e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n)},(e,n)=>(n-e)/Qe,e=>Math.floor(e/Qe));ha.range;function be(e){return oe(n=>{n.setDate(n.getDate()-(n.getDay()+7-e)%7),n.setHours(0,0,0,0)},(n,t)=>{n.setDate(n.getDate()+t*7)},(n,t)=>(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*rt)/br)}const Tr=be(0),pn=be(1),da=be(2),ya=be(3),Ee=be(4),pa=be(5),va=be(6);Tr.range;pn.range;da.range;ya.range;Ee.range;pa.range;va.range;function Te(e){return oe(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-e)%7),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCDate(n.getUTCDate()+t*7)},(n,t)=>(t-n)/br)}const xr=Te(0),vn=Te(1),wa=Te(2),Ma=Te(3),Ye=Te(4),ba=Te(5),Ta=Te(6);xr.range;vn.range;wa.range;Ma.range;Ye.range;ba.range;Ta.range;const pe=oe(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n)},(e,n)=>n.getFullYear()-e.getFullYear(),e=>e.getFullYear());pe.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:oe(n=>{n.setFullYear(Math.floor(n.getFullYear()/e)*e),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,t)=>{n.setFullYear(n.getFullYear()+t*e)});pe.range;const ve=oe(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n)},(e,n)=>n.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ve.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:oe(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/e)*e),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCFullYear(n.getUTCFullYear()+t*e)});ve.range;function Fn(e){if(0<=e.y&&e.y<100){var n=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return n.setFullYear(e.y),n}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function En(e){if(0<=e.y&&e.y<100){var n=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return n.setUTCFullYear(e.y),n}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Le(e,n,t){return{y:e,m:n,d:t,H:0,M:0,S:0,L:0}}function xa(e){var n=e.dateTime,t=e.date,r=e.time,o=e.periods,i=e.days,a=e.shortDays,u=e.months,l=e.shortMonths,s=qe(o),c=Ie(o),f=qe(i),h=Ie(i),v=qe(a),U=Ie(a),D=qe(u),O=Ie(u),$=qe(l),X=Ie(l),k={a:S,A:Y,b:q,B:te,c:null,d:$t,e:$t,f:Va,g:to,G:io,H:Aa,I:Wa,j:Pa,L:Cr,m:Za,M:Ba,p:W,q:Q,Q:Yt,s:Ht,S:Xa,u:Ga,U:Ja,V:Qa,w:Ka,W:eo,x:null,X:null,y:no,Y:ro,Z:ao,"%":Et},I={a:_e,A:ke,b:Oe,B:Tn,c:null,d:Ft,e:Ft,f:lo,g:Mo,G:To,H:oo,I:uo,j:so,L:kr,m:co,M:mo,p:xn,q:nn,Q:Yt,s:Ht,S:fo,u:go,U:ho,V:yo,w:po,W:vo,x:null,X:null,y:wo,Y:bo,Z:xo,"%":Et},j={a:F,A:T,b:V,B:L,c:g,d:Nt,e:Nt,f:qa,g:Ut,G:kt,H:St,I:St,j:ja,L:La,m:Ha,M:_a,p:ne,q:Ya,Q:Ra,s:za,S:Oa,u:Na,U:Sa,V:$a,w:Ua,W:Fa,x:d,X:b,y:Ut,Y:kt,Z:Ea,"%":Ia};k.x=w(t,k),k.X=w(r,k),k.c=w(n,k),I.x=w(t,I),I.X=w(r,I),I.c=w(n,I);function w(y,x){return function(C){var m=[],Z=-1,E=0,G=y.length,J,he,st;for(C instanceof Date||(C=new Date(+C));++Z<G;)y.charCodeAt(Z)===37&&(m.push(y.slice(E,Z)),(he=Dt[J=y.charAt(++Z)])!=null?J=y.charAt(++Z):he=J==="e"?" ":"0",(st=x[J])&&(J=st(C,he)),m.push(J),E=Z+1);return m.push(y.slice(E,Z)),m.join("")}}function H(y,x){return function(C){var m=Le(1900,void 0,1),Z=P(m,y,C+="",0),E,G;if(Z!=C.length)return null;if("Q"in m)return new Date(m.Q);if("s"in m)return new Date(m.s*1e3+("L"in m?m.L:0));if(x&&!("Z"in m)&&(m.Z=0),"p"in m&&(m.H=m.H%12+m.p*12),m.m===void 0&&(m.m="q"in m?m.q:0),"V"in m){if(m.V<1||m.V>53)return null;"w"in m||(m.w=1),"Z"in m?(E=En(Le(m.y,0,1)),G=E.getUTCDay(),E=G>4||G===0?vn.ceil(E):vn(E),E=at.offset(E,(m.V-1)*7),m.y=E.getUTCFullYear(),m.m=E.getUTCMonth(),m.d=E.getUTCDate()+(m.w+6)%7):(E=Fn(Le(m.y,0,1)),G=E.getDay(),E=G>4||G===0?pn.ceil(E):pn(E),E=it.offset(E,(m.V-1)*7),m.y=E.getFullYear(),m.m=E.getMonth(),m.d=E.getDate()+(m.w+6)%7)}else("W"in m||"U"in m)&&("w"in m||(m.w="u"in m?m.u%7:"W"in m?1:0),G="Z"in m?En(Le(m.y,0,1)).getUTCDay():Fn(Le(m.y,0,1)).getDay(),m.m=0,m.d="W"in m?(m.w+6)%7+m.W*7-(G+5)%7:m.w+m.U*7-(G+6)%7);return"Z"in m?(m.H+=m.Z/100|0,m.M+=m.Z%100,En(m)):Fn(m)}}function P(y,x,C,m){for(var Z=0,E=x.length,G=C.length,J,he;Z<E;){if(m>=G)return-1;if(J=x.charCodeAt(Z++),J===37){if(J=x.charAt(Z++),he=j[J in Dt?x.charAt(Z++):J],!he||(m=he(y,C,m))<0)return-1}else if(J!=C.charCodeAt(m++))return-1}return m}function ne(y,x,C){var m=s.exec(x.slice(C));return m?(y.p=c.get(m[0].toLowerCase()),C+m[0].length):-1}function F(y,x,C){var m=v.exec(x.slice(C));return m?(y.w=U.get(m[0].toLowerCase()),C+m[0].length):-1}function T(y,x,C){var m=f.exec(x.slice(C));return m?(y.w=h.get(m[0].toLowerCase()),C+m[0].length):-1}function V(y,x,C){var m=$.exec(x.slice(C));return m?(y.m=X.get(m[0].toLowerCase()),C+m[0].length):-1}function L(y,x,C){var m=D.exec(x.slice(C));return m?(y.m=O.get(m[0].toLowerCase()),C+m[0].length):-1}function g(y,x,C){return P(y,n,x,C)}function d(y,x,C){return P(y,t,x,C)}function b(y,x,C){return P(y,r,x,C)}function S(y){return a[y.getDay()]}function Y(y){return i[y.getDay()]}function q(y){return l[y.getMonth()]}function te(y){return u[y.getMonth()]}function W(y){return o[+(y.getHours()>=12)]}function Q(y){return 1+~~(y.getMonth()/3)}function _e(y){return a[y.getUTCDay()]}function ke(y){return i[y.getUTCDay()]}function Oe(y){return l[y.getUTCMonth()]}function Tn(y){return u[y.getUTCMonth()]}function xn(y){return o[+(y.getUTCHours()>=12)]}function nn(y){return 1+~~(y.getUTCMonth()/3)}return{format:function(y){var x=w(y+="",k);return x.toString=function(){return y},x},parse:function(y){var x=H(y+="",!1);return x.toString=function(){return y},x},utcFormat:function(y){var x=w(y+="",I);return x.toString=function(){return y},x},utcParse:function(y){var x=H(y+="",!0);return x.toString=function(){return y},x}}}var Dt={"-":"",_:" ",0:"0"},A=/^\s*\d+/,Ca=/^%/,Da=/[\\^$*+?|[\]().{}]/g;function N(e,n,t){var r=e<0?"-":"",o=(r?-e:e)+"",i=o.length;return r+(i<t?new Array(t-i+1).join(n)+o:o)}function ka(e){return e.replace(Da,"\\$&")}function qe(e){return new RegExp("^(?:"+e.map(ka).join("|")+")","i")}function Ie(e){return new Map(e.map((n,t)=>[n.toLowerCase(),t]))}function Ua(e,n,t){var r=A.exec(n.slice(t,t+1));return r?(e.w=+r[0],t+r[0].length):-1}function Na(e,n,t){var r=A.exec(n.slice(t,t+1));return r?(e.u=+r[0],t+r[0].length):-1}function Sa(e,n,t){var r=A.exec(n.slice(t,t+2));return r?(e.U=+r[0],t+r[0].length):-1}function $a(e,n,t){var r=A.exec(n.slice(t,t+2));return r?(e.V=+r[0],t+r[0].length):-1}function Fa(e,n,t){var r=A.exec(n.slice(t,t+2));return r?(e.W=+r[0],t+r[0].length):-1}function kt(e,n,t){var r=A.exec(n.slice(t,t+4));return r?(e.y=+r[0],t+r[0].length):-1}function Ut(e,n,t){var r=A.exec(n.slice(t,t+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function Ea(e,n,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(t,t+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function Ya(e,n,t){var r=A.exec(n.slice(t,t+1));return r?(e.q=r[0]*3-3,t+r[0].length):-1}function Ha(e,n,t){var r=A.exec(n.slice(t,t+2));return r?(e.m=r[0]-1,t+r[0].length):-1}function Nt(e,n,t){var r=A.exec(n.slice(t,t+2));return r?(e.d=+r[0],t+r[0].length):-1}function ja(e,n,t){var r=A.exec(n.slice(t,t+3));return r?(e.m=0,e.d=+r[0],t+r[0].length):-1}function St(e,n,t){var r=A.exec(n.slice(t,t+2));return r?(e.H=+r[0],t+r[0].length):-1}function _a(e,n,t){var r=A.exec(n.slice(t,t+2));return r?(e.M=+r[0],t+r[0].length):-1}function Oa(e,n,t){var r=A.exec(n.slice(t,t+2));return r?(e.S=+r[0],t+r[0].length):-1}function La(e,n,t){var r=A.exec(n.slice(t,t+3));return r?(e.L=+r[0],t+r[0].length):-1}function qa(e,n,t){var r=A.exec(n.slice(t,t+6));return r?(e.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function Ia(e,n,t){var r=Ca.exec(n.slice(t,t+1));return r?t+r[0].length:-1}function Ra(e,n,t){var r=A.exec(n.slice(t));return r?(e.Q=+r[0],t+r[0].length):-1}function za(e,n,t){var r=A.exec(n.slice(t));return r?(e.s=+r[0],t+r[0].length):-1}function $t(e,n){return N(e.getDate(),n,2)}function Aa(e,n){return N(e.getHours(),n,2)}function Wa(e,n){return N(e.getHours()%12||12,n,2)}function Pa(e,n){return N(1+it.count(pe(e),e),n,3)}function Cr(e,n){return N(e.getMilliseconds(),n,3)}function Va(e,n){return Cr(e,n)+"000"}function Za(e,n){return N(e.getMonth()+1,n,2)}function Ba(e,n){return N(e.getMinutes(),n,2)}function Xa(e,n){return N(e.getSeconds(),n,2)}function Ga(e){var n=e.getDay();return n===0?7:n}function Ja(e,n){return N(Tr.count(pe(e)-1,e),n,2)}function Dr(e){var n=e.getDay();return n>=4||n===0?Ee(e):Ee.ceil(e)}function Qa(e,n){return e=Dr(e),N(Ee.count(pe(e),e)+(pe(e).getDay()===4),n,2)}function Ka(e){return e.getDay()}function eo(e,n){return N(pn.count(pe(e)-1,e),n,2)}function no(e,n){return N(e.getFullYear()%100,n,2)}function to(e,n){return e=Dr(e),N(e.getFullYear()%100,n,2)}function ro(e,n){return N(e.getFullYear()%1e4,n,4)}function io(e,n){var t=e.getDay();return e=t>=4||t===0?Ee(e):Ee.ceil(e),N(e.getFullYear()%1e4,n,4)}function ao(e){var n=e.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+N(n/60|0,"0",2)+N(n%60,"0",2)}function Ft(e,n){return N(e.getUTCDate(),n,2)}function oo(e,n){return N(e.getUTCHours(),n,2)}function uo(e,n){return N(e.getUTCHours()%12||12,n,2)}function so(e,n){return N(1+at.count(ve(e),e),n,3)}function kr(e,n){return N(e.getUTCMilliseconds(),n,3)}function lo(e,n){return kr(e,n)+"000"}function co(e,n){return N(e.getUTCMonth()+1,n,2)}function mo(e,n){return N(e.getUTCMinutes(),n,2)}function fo(e,n){return N(e.getUTCSeconds(),n,2)}function go(e){var n=e.getUTCDay();return n===0?7:n}function ho(e,n){return N(xr.count(ve(e)-1,e),n,2)}function Ur(e){var n=e.getUTCDay();return n>=4||n===0?Ye(e):Ye.ceil(e)}function yo(e,n){return e=Ur(e),N(Ye.count(ve(e),e)+(ve(e).getUTCDay()===4),n,2)}function po(e){return e.getUTCDay()}function vo(e,n){return N(vn.count(ve(e)-1,e),n,2)}function wo(e,n){return N(e.getUTCFullYear()%100,n,2)}function Mo(e,n){return e=Ur(e),N(e.getUTCFullYear()%100,n,2)}function bo(e,n){return N(e.getUTCFullYear()%1e4,n,4)}function To(e,n){var t=e.getUTCDay();return e=t>=4||t===0?Ye(e):Ye.ceil(e),N(e.getUTCFullYear()%1e4,n,4)}function xo(){return"+0000"}function Et(){return"%"}function Yt(e){return+e}function Ht(e){return Math.floor(+e/1e3)}var Ue,Nr;Co({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Co(e){return Ue=xa(e),Nr=Ue.format,Ue.parse,Ue.utcFormat,Ue.utcParse,Ue}function Do(e){return new Date(e)}function ko(e){return e instanceof Date?+e:+new Date(+e)}function Sr(e,n,t,r,o,i,a,u,l,s){var c=dr(),f=c.invert,h=c.domain,v=s(".%L"),U=s(":%S"),D=s("%I:%M"),O=s("%I %p"),$=s("%a %d"),X=s("%b %d"),k=s("%B"),I=s("%Y");function j(w){return(l(w)<w?v:u(w)<w?U:a(w)<w?D:i(w)<w?O:r(w)<w?o(w)<w?$:X:t(w)<w?k:I)(w)}return c.invert=function(w){return new Date(f(w))},c.domain=function(w){return arguments.length?h(Array.from(w,ko)):h().map(Do)},c.ticks=function(w){var H=h();return e(H[0],H[H.length-1],w??10)},c.tickFormat=function(w,H){return H==null?j:s(H)},c.nice=function(w){var H=h();return(!w||typeof w.range!="function")&&(w=n(H[0],H[H.length-1],w??10)),w?h(Wi(H,w)):c},c.copy=function(){return hr(c,Sr(e,n,t,r,o,i,a,u,l,s))},c}function jt(){return cr.apply(Sr(ca,ma,bn,tt,nt,et,Kn,Qn,Se,Nr).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}const Yn=new Date,Hn=new Date;function z(e,n,t,r){function o(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return o.floor=i=>(e(i=new Date(+i)),i),o.ceil=i=>(e(i=new Date(i-1)),n(i,1),e(i),i),o.round=i=>{const a=o(i),u=o.ceil(i);return i-a<u-i?a:u},o.offset=(i,a)=>(n(i=new Date(+i),a==null?1:Math.floor(a)),i),o.range=(i,a,u)=>{const l=[];if(i=o.ceil(i),u=u==null?1:Math.floor(u),!(i<a)||!(u>0))return l;let s;do l.push(s=new Date(+i)),n(i,u),e(i);while(s<i&&i<a);return l},o.filter=i=>z(a=>{if(a>=a)for(;e(a),!i(a);)a.setTime(a-1)},(a,u)=>{if(a>=a)if(u<0)for(;++u<=0;)for(;n(a,-1),!i(a););else for(;--u>=0;)for(;n(a,1),!i(a););}),t&&(o.count=(i,a)=>(Yn.setTime(+i),Hn.setTime(+a),e(Yn),e(Hn),Math.floor(t(Yn,Hn))),o.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?o.filter(r?a=>r(a)%i===0:a=>o.count(0,a)%i===0):o)),o}const wn=z(()=>{},(e,n)=>{e.setTime(+e+n)},(e,n)=>n-e);wn.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?z(n=>{n.setTime(Math.floor(n/e)*e)},(n,t)=>{n.setTime(+n+t*e)},(n,t)=>(t-n)/e):wn);wn.range;const ce=1e3,ee=ce*60,me=ee*60,ge=me*24,ot=ge*7,_t=ge*30,jn=ge*365,ze=z(e=>{e.setTime(e-e.getMilliseconds())},(e,n)=>{e.setTime(+e+n*ce)},(e,n)=>(n-e)/ce,e=>e.getUTCSeconds());ze.range;const $r=z(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ce)},(e,n)=>{e.setTime(+e+n*ee)},(e,n)=>(n-e)/ee,e=>e.getMinutes());$r.range;const Uo=z(e=>{e.setUTCSeconds(0,0)},(e,n)=>{e.setTime(+e+n*ee)},(e,n)=>(n-e)/ee,e=>e.getUTCMinutes());Uo.range;const Fr=z(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ce-e.getMinutes()*ee)},(e,n)=>{e.setTime(+e+n*me)},(e,n)=>(n-e)/me,e=>e.getHours());Fr.range;const No=z(e=>{e.setUTCMinutes(0,0,0)},(e,n)=>{e.setTime(+e+n*me)},(e,n)=>(n-e)/me,e=>e.getUTCHours());No.range;const Er=z(e=>e.setHours(0,0,0,0),(e,n)=>e.setDate(e.getDate()+n),(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ee)/ge,e=>e.getDate()-1);Er.range;const So=z(e=>{e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n)},(e,n)=>(n-e)/ge,e=>e.getUTCDate()-1);So.range;const $o=z(e=>{e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n)},(e,n)=>(n-e)/ge,e=>Math.floor(e/ge));$o.range;function xe(e){return z(n=>{n.setDate(n.getDate()-(n.getDay()+7-e)%7),n.setHours(0,0,0,0)},(n,t)=>{n.setDate(n.getDate()+t*7)},(n,t)=>(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*ee)/ot)}const Yr=xe(0),Fo=xe(1),Eo=xe(2),Yo=xe(3),Ho=xe(4),jo=xe(5),_o=xe(6);Yr.range;Fo.range;Eo.range;Yo.range;Ho.range;jo.range;_o.range;function Ce(e){return z(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-e)%7),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCDate(n.getUTCDate()+t*7)},(n,t)=>(t-n)/ot)}const Oo=Ce(0),Lo=Ce(1),qo=Ce(2),Io=Ce(3),Ro=Ce(4),zo=Ce(5),Ao=Ce(6);Oo.range;Lo.range;qo.range;Io.range;Ro.range;zo.range;Ao.range;const Hr=z(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,n)=>{e.setMonth(e.getMonth()+n)},(e,n)=>n.getMonth()-e.getMonth()+(n.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Hr.range;const Wo=z(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCMonth(e.getUTCMonth()+n)},(e,n)=>n.getUTCMonth()-e.getUTCMonth()+(n.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Wo.range;const ut=z(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n)},(e,n)=>n.getFullYear()-e.getFullYear(),e=>e.getFullYear());ut.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:z(n=>{n.setFullYear(Math.floor(n.getFullYear()/e)*e),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,t)=>{n.setFullYear(n.getFullYear()+t*e)});ut.range;const jr=z(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n)},(e,n)=>n.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());jr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:z(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/e)*e),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCFullYear(n.getUTCFullYear()+t*e)});jr.range;function _n(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function Po(e,n){return e==null||n==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function Vo(e){let n,t,r;e.length!==2?(n=_n,t=(u,l)=>_n(e(u),l),r=(u,l)=>e(u)-l):(n=e===_n||e===Po?e:Zo,t=e,r=e);function o(u,l,s=0,c=u.length){if(s<c){if(n(l,l)!==0)return c;do{const f=s+c>>>1;t(u[f],l)<0?s=f+1:c=f}while(s<c)}return s}function i(u,l,s=0,c=u.length){if(s<c){if(n(l,l)!==0)return c;do{const f=s+c>>>1;t(u[f],l)<=0?s=f+1:c=f}while(s<c)}return s}function a(u,l,s=0,c=u.length){const f=o(u,l,s,c-1);return f>s&&r(u[f-1],l)>-r(u[f],l)?f-1:f}return{left:o,center:a,right:i}}function Zo(){return 0}const Bo=Math.sqrt(50),Xo=Math.sqrt(10),Go=Math.sqrt(2);function _r(e,n,t){const r=(n-e)/Math.max(0,t),o=Math.floor(Math.log10(r)),i=r/Math.pow(10,o),a=i>=Bo?10:i>=Xo?5:i>=Go?2:1;let u,l,s;return o<0?(s=Math.pow(10,-o)/a,u=Math.round(e*s),l=Math.round(n*s),u/s<e&&++u,l/s>n&&--l,s=-s):(s=Math.pow(10,o)*a,u=Math.round(e/s),l=Math.round(n/s),u*s<e&&++u,l*s>n&&--l),l<u&&.5<=t&&t<2?_r(e,n,t*2):[u,l,s]}function Ot(e,n,t){return n=+n,e=+e,t=+t,_r(e,n,t)[2]}function Lt(e,n,t){n=+n,e=+e,t=+t;const r=n<e,o=r?Ot(n,e,t):Ot(e,n,t);return(r?-1:1)*(o<0?1/-o:o)}function Jo(e,n,t,r,o,i){const a=[[ze,1,ce],[ze,5,5*ce],[ze,15,15*ce],[ze,30,30*ce],[i,1,ee],[i,5,5*ee],[i,15,15*ee],[i,30,30*ee],[o,1,me],[o,3,3*me],[o,6,6*me],[o,12,12*me],[r,1,ge],[r,2,2*ge],[t,1,ot],[n,1,_t],[n,3,3*_t],[e,1,jn]];function u(s,c,f){const h=c<s;h&&([s,c]=[c,s]);const v=f&&typeof f.range=="function"?f:l(s,c,f),U=v?v.range(s,+c+1):[];return h?U.reverse():U}function l(s,c,f){const h=Math.abs(c-s)/f,v=Vo(([,,O])=>O).right(a,h);if(v===a.length)return e.every(Lt(s/jn,c/jn,f));if(v===0)return wn.every(Math.max(Lt(s,c,f),1));const[U,D]=a[h/a[v-1][2]<a[v][2]/h?v-1:v];return U.every(D)}return[u,l]}const[Qo,Vu]=Jo(ut,Hr,Yr,Er,Fr,$r);function Ko(e){return n=>{e.forEach(t=>{typeof t=="function"?t(n):t!=null&&(t.current=n)})}}function qt(e,n){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>e(...r),n)}}function Wn({debounce:e,scroll:n,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const o=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[i,a]=p.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),u=p.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:i,orientationHandler:null}),l=e?typeof e=="number"?e:e.scroll:null,s=e?typeof e=="number"?e:e.resize:null,c=p.useRef(!1);p.useEffect(()=>(c.current=!0,()=>void(c.current=!1)));const[f,h,v]=p.useMemo(()=>{const $=()=>{if(!u.current.element)return;const{left:X,top:k,width:I,height:j,bottom:w,right:H,x:P,y:ne}=u.current.element.getBoundingClientRect(),F={left:X,top:k,width:I,height:j,bottom:w,right:H,x:P,y:ne};u.current.element instanceof HTMLElement&&r&&(F.height=u.current.element.offsetHeight,F.width=u.current.element.offsetWidth),Object.freeze(F),c.current&&!ru(u.current.lastBounds,F)&&a(u.current.lastBounds=F)};return[$,s?qt($,s):$,l?qt($,l):$]},[a,r,l,s]);function U(){u.current.scrollContainers&&(u.current.scrollContainers.forEach($=>$.removeEventListener("scroll",v,!0)),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null),u.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",u.current.orientationHandler))}function D(){u.current.element&&(u.current.resizeObserver=new o(v),u.current.resizeObserver.observe(u.current.element),n&&u.current.scrollContainers&&u.current.scrollContainers.forEach($=>$.addEventListener("scroll",v,{capture:!0,passive:!0})),u.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",u.current.orientationHandler))}const O=$=>{!$||$===u.current.element||(U(),u.current.element=$,u.current.scrollContainers=Or($),D())};return nu(v,!!n),eu(h),p.useEffect(()=>{U(),D()},[n,v,h]),p.useEffect(()=>U,[]),[O,i,f]}function eu(e){p.useEffect(()=>{const n=e;return window.addEventListener("resize",n),()=>void window.removeEventListener("resize",n)},[e])}function nu(e,n){p.useEffect(()=>{if(n){const t=e;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[e,n])}function Or(e){const n=[];if(!e||e===document.body)return n;const{overflow:t,overflowX:r,overflowY:o}=window.getComputedStyle(e);return[t,r,o].some(i=>i==="auto"||i==="scroll")&&n.push(e),[...n,...Or(e.parentElement)]}const tu=["x","y","top","bottom","left","right","width","height"],ru=(e,n)=>tu.every(t=>e[t]===n[t]),It=864e5,iu=24192e5,au=26784e5,Re=154,on=42,ue=4,Rt=ue*2,ou=1,un=8,zt=1,Pn=.5,uu=32,su=3e3,Mn=80,Lr=15,sn=1,At=2,lu=1.5,cu=e=>{var V,L;const[n,t]=p.useState(new Date(e.range.min,0,1)),[r,o]=p.useState(new Date(e.range.max,11,31)),[i,a]=Wn(),[u,l]=Wn(),s=p.useRef(),[c,f]=p.useState(!1),[h,v]=p.useState(sn);p.useEffect(()=>{v(sn)},[e.range]);const U=p.useMemo(()=>(l.width-uu)*h,[h,l]),D=p.useMemo(()=>({min:new Date(e.range.min,0,1),max:new Date(e.range.max,0,1)}),[e.range]);p.useEffect(()=>{var S;const g=l.width/2,b=a.width/2-g;(S=s.current)==null||S.scrollTo({left:b})},[h,l,a,s]);const O=p.useCallback(()=>{v(g=>g*At)},[v]),$=p.useCallback(()=>{v(g=>g===sn?g:g/At)},[v]),X=p.useCallback(g=>{var d;f(!0),(d=s.current)==null||d.setPointerCapture(g.pointerId)},[s.current]),k=p.useCallback(g=>{var d;f(!1),(d=s.current)==null||d.releasePointerCapture(g.pointerId)},[s.current]),I=p.useCallback(g=>{var d;(d=s.current)!=null&&d.hasPointerCapture(g.pointerId)&&(s.current.scrollLeft-=g.movementX*lu)},[s]),j=p.useMemo(()=>a.width<su,[a.width,h]),w=p.useMemo(()=>h>sn,[h]),H=p.useCallback((g,d)=>_.some(d,b=>b.yOffset===g.yOffset&&g.xOffset<b.xOffset+Re&&g.xOffset+Re>b.xOffset),[]),P=p.useMemo(()=>{let g=0;return _.chain(e.events).sortBy("date").reduce((d,b)=>{let Y=(b.date-D.min)/(D.max-D.min)*a.width,q=!1;Y+Re>a.width&&(q=!0,Y-=Re);let te=0;const W=l.height-a.height;for(;H({xOffset:Y,yOffset:te},d);){if(te+on*2>=W){te=g,g+on*2<W?g+=on:g=0;break}te+=on}return d.push({...b,xOffset:Y,yOffset:te,anchorRight:q}),d},[]).value()},[e.events,a,l.height,D]),ne=p.useCallback((g,d,b,S="major")=>{const Y=b,q=Math.floor(Y/Mn),te=jt().domain([g,d]).range([0,Y]),W=Qo(g,d,q).map(Q=>({value:Q,xOffset:te(Q)}));return W.length>0&&_.last(W).value.getTime()<d.getTime()&&W.push({value:d,xOffset:te(d),hideVal:!0}),S==="minor"?W.length>1?_.chain(W).map((Q,_e)=>{if(_e>0){const ke=[W[_e-1].value,Q.value];if(ke[1]-ke[0]<=au)return[];const Oe=[W[_e-1].xOffset,Q.xOffset],Tn=Oe[1]-Oe[0],xn=Math.floor(Tn/Lr),nn=jt().domain(ke).range(Oe).nice(),y=_.map(nn.ticks(xn),C=>({value:C,xOffset:nn(C)}));return _.filter(y,C=>!_.map(ke,m=>m.getTime()).includes(C.value.getTime()))}return[]}).flatten().uniq(!0,Q=>Q.value).value():[]:W},[]);p.useEffect(()=>{let g=D.min,d=D.max;const b=_.pluck(ne(D.min,D.max,a.width,Mn),"value");if((b==null?void 0:b.length)>1){const S=b[1]-b[0];if(D.min<_.first(b)){const Y=_.first(b);g=Math.min(D.min,Y.getTime()-It-S)}if(D.max>_.last(b)){const Y=_.last(b);d=Math.max(D.max,Y.getTime()+It+S)}}t(g),o(d)},[D.min,D.max,a.width]);const F=p.useMemo(()=>({major:a!=null&&a.width?ne(n,r,a.width,"major"):[],minor:a!=null&&a.width?ne(n,r,a.width,"minor"):[]}),[n,r,a.width]),T=p.useCallback((g,d)=>{var b;if(((b=F==null?void 0:F.major)==null?void 0:b.length)>1){const S=F.major[1].value-F.major[0].value;return!d||(d==null?void 0:d.getFullYear())!==g.getFullYear()?g.getFullYear():S>iu||d||(d==null?void 0:d.getMonth())!==g.getMonth()?g.toLocaleDateString(void 0,{month:"short"}):g.toLocaleDateString(void 0,{day:"numeric"})}return g.toString()},[F.major]);return M.jsxs("div",{className:re("grow","px-4","pt-6","pb-2","flex","flex-col","justify-end","overflow-x-scroll","select-none",c?"cursor-grabbing":"cursor-grab"),ref:Ko([u,s]),onPointerMove:I,onPointerUp:k,style:{scrollbarWidth:"none"},children:[M.jsxs("div",{className:"absolute top-5 right-5 z-30 flex flex-row",children:[M.jsx("button",{"aria-label":Ln.t("Timeline.zoomIn"),className:re("p-3","disabled:opacity-50","disabled:hover:bg-transparent","rounded-tl","rounded-bl",(V=e.classNames)==null?void 0:V.zoom),disabled:!j,type:"button",onClick:O,children:M.jsx(On,{name:"magnifying_glass_plus",size:19})}),M.jsx("button",{"aria-label":Ln.t("Timeline.zoomOut"),className:re("ml-[1px]","p-3","disabled:opacity-50","disabled:hover:bg-transparent","rounded-tr","rounded-br",(L=e.classNames)==null?void 0:L.zoom),disabled:!w,type:"button",onClick:$,children:M.jsx(On,{name:"magnifying_glass_minus",size:19})})]}),M.jsxs("div",{className:"h-full min-h-36 flex flex-col",style:{width:U},onPointerDown:X,children:[M.jsx("div",{className:"grow relative",children:_.map(P,g=>{var d;return M.jsxs("div",{className:"w-44 absolute",style:{left:`${g.xOffset}px`,bottom:`${g.yOffset+un}px`},children:[M.jsxs("svg",{className:re("absolute","top-[32px]"),height:g.yOffset+un+Rt,width:Rt,style:{left:`${g.anchorRight?Re+ou-ue:-ue}px`},children:[M.jsx("line",{x1:ue,x2:ue,y1:0,y2:g.yOffset+un+ue-zt,className:"stroke-neutral-300 stroke-[1px]",shapeRendering:"crispEdges"}),M.jsx("circle",{cx:ue,cy:g.yOffset+un+ue-zt,r:ue,className:re(((d=e.classNames)==null?void 0:d.marker)||"fill-neutral-500")})]}),M.jsx("button",{className:re("h-9","w-44","px-2","flex","items-center","bg-neutral-100","active:bg-neutral-300","outline","outline-1","outline-neutral-300","rounded-tl","rounded-tr","relative","z-10","hover:z-20","hover:bg-neutral-200","text-neutral-800",g.anchorRight?"rounded-bl":"rounded-br","mb-1"),onPointerDown:b=>b.stopPropagation(),onClick:()=>e.onClick(g),type:"button",children:M.jsx("span",{className:"truncate text-sm",children:g.name})})]},g.uuid)})}),M.jsx("div",{ref:i,className:"w-fill",children:F&&M.jsxs("svg",{className:"!overflow-visible w-fill",height:40,width:"100%",overflow:"visible",shapeRendering:"crispEdges",children:[_.last(F.major)&&M.jsx("line",{x1:"0",y1:"0",x2:_.last(F.major).xOffset+Pn,y2:"0",stroke:"currentColor"}),_.map(F.major,({value:g,xOffset:d,hideVal:b},S)=>!b&&M.jsxs("g",{transform:`translate(${d}, 0)`,children:[M.jsx("line",{y2:10,stroke:"currentColor"}),M.jsx("text",{className:"translate-y-8",style:{textAnchor:"middle"},fill:"currentColor",children:T(g,S!==0?F.major[S-1].value:null)},g)]},g)),_.map(F.minor,({xOffset:g},d)=>M.jsx("g",{transform:`translate(${g}, 0)`,children:M.jsx("line",{y2:5,stroke:"currentColor"})},d))]})})]})]})},qr=e=>{var F,T,V,L;const{range:n={},refine:t,start:r=[]}=e,o=Math.max(n.min,Number.isFinite(r[0])?r[0]:n.min),i=Math.min(n.max+1,Number.isFinite(r[1])?r[1]:n.max+1),[a,u]=p.useState(),[l,s]=p.useState(n.max+1),[c,f]=p.useState(n.min),[h,v]=p.useState([o,i]),U=Ar(),D=p.useRef(),{clearTimer:O,setTimer:$}=Rr(),[X,k]=Wn();p.useEffect(()=>{v(g=>{const d=[...g];return c>g[0]?d[0]=c:l<g[0]&&(d[0]=l),l<g[1]?d[1]=l:c>g[1]&&(d[1]=c),d})},[c,l]);const I=()=>{v([c,l])},j=p.useMemo(()=>[{className:"-mt-4",label:Ln.t("Timeline.resetRange"),icon:M.jsx(On,{name:"reset",className:"w-5 h-5"}),onClick:I,position:"right",disabled:h[0]===c&&h[1]===l}],[I,h]),w=p.useCallback(g=>{var b,S;const d=((b=g.start_date)==null?void 0:b.start_date)||((S=g.end_date)==null?void 0:S.start_date);return d&&new Date(d)},[]),H=p.useCallback(g=>{u(_.map(g.events,d=>({...d,date:w(d)})))},[]);p.useEffect(()=>{h&&(O(),$(()=>{u([]);const g={min_year:h[0],max_year:h[1]};U.fetchAll(g).then(H)}))},[H,l,c,h]),p.useEffect(()=>{e.onLoad&&e.onLoad(a)},[a,e.onLoad]),p.useEffect(()=>{v([o,i]),f(n.min),s(n.max+1)},[o,i,n.min,n.max]);const P=p.useCallback((g,d,b,S="major")=>{let Y=d-g;const q=b-Pn;if(q/Y<Mn)Y=Math.floor(q/(S==="minor"?Lr:Mn));else if(S==="minor")return[];const W=wr().domain([g,d]).range([Pn,q]);return W.ticks(Y).map(Q=>({value:Q,xOffset:W(Q)}))},[]),ne=p.useMemo(()=>({major:k!=null&&k.width?P(c,l,k.width,"major"):[],minor:k!=null&&k.width?P(c,l,k.width,"minor"):[]}),[c,l,k.width]);return p.useEffect(()=>{const g=n.max+1-n.min,d=_.pluck(P(n.min,n.max+1,k.width,"major"),"value");if((d==null?void 0:d.length)<g&&d.length>1){const b=d[1]-d[0],S=Math.min(n.min,_.first(d)-b),Y=Math.max(n.max+1,_.last(d)+b);f(S),s(Y),h[0]===n.min&&h[1]===n.max+1&&v([S,Y])}},[n.min,n.max,k.width]),M.jsxs("div",{className:re("h-full","flex","flex-col","relative",e.className),ref:D,children:[M.jsx(cu,{classNames:e.classNames,events:a,onClick:e.onClick,range:{min:h[0],max:h[1]}}),M.jsx(zr,{actions:[...j,...e.actions||[]],classNames:{...e.classNames,range:re("cursor-grab","active:cursor-grabbing","bg-slate-500","border","border-black",(F=e.classNames)==null?void 0:F.range),root:re("ml-14","mr-5",(T=e.classNames)==null?void 0:T.root),track:re("cursor-grab","active:cursor-grabbing","h-5","mb-4",(V=e.classNames)==null?void 0:V.track),thumb:re("opacity-0","w-[1px]",(L=e.classNames)==null?void 0:L.thumb)},hideStepButtons:!0,max:l,min:c,onValueChange:v,onValueCommit:t,position:"bottom",ticks:ne,ref:X,value:h})]})},De=qr;qr.__docgenInfo={description:"",methods:[],displayName:"FacetTimeline",props:{actions:{required:!1,flowType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  /**
   * Class name to apply to the button element.
   */
  className?: string,

  /**
   * (Optional) boolean to conditionally disable the action.
   */
  disabled?: boolean,

  /**
   * (Optional) icon to render inside the button element.
   */
  icon?: JSX.Element,

  /**
   * Button label.
   */
  label: string,

  /**
   * Position of the action relative to the slider.
   */
  position?: 'right' | 'bottom',

  /**
   * Callback fired when the button is clicked.
   */
  onClick: () => void
}`,signature:{properties:[{key:"className",value:{name:"string",required:!1},description:"Class name to apply to the button element."},{key:"disabled",value:{name:"boolean",required:!1},description:"(Optional) boolean to conditionally disable the action."},{key:"icon",value:{name:"JSX.Element",required:!1},description:"(Optional) icon to render inside the button element."},{key:"label",value:{name:"string",required:!0},description:"Button label."},{key:"position",value:{name:"union",raw:"'right' | 'bottom'",elements:[{name:"literal",value:"'right'"},{name:"literal",value:"'bottom'"}],required:!1},description:"Position of the action relative to the slider."},{key:"onClick",value:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}},required:!0},description:"Callback fired when the button is clicked."}]}}],raw:"Array<ActionType>"},description:"Custom actions to render with the FacetSlider."},className:{required:!1,flowType:{name:"string"},description:"Class name to apply to the root DOM element."},classNames:{required:!1,flowType:{name:"intersection",raw:`ClassNamesType & {
  marker?: string,
}`,elements:[{name:"signature",type:"object",raw:`{
  button: string,
  range: string,
  root: string,
  thumb: string,
  track: string,
  reset: string,
  zoom: string
}`,signature:{properties:[{key:"button",value:{name:"string",required:!0}},{key:"range",value:{name:"string",required:!0}},{key:"root",value:{name:"string",required:!0}},{key:"thumb",value:{name:"string",required:!0}},{key:"track",value:{name:"string",required:!0}},{key:"reset",value:{name:"string",required:!0}},{key:"zoom",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:`{
  marker?: string,
}`,signature:{properties:[{key:"marker",value:{name:"string",required:!1}}]}}]},description:"Class names to apply to the FacetSlider and Timeline components."},onClick:{required:!1,flowType:{name:"signature",type:"function",raw:"(event: EventType) => void",signature:{arguments:[{name:"event",type:{name:"signature",type:"object",raw:`{
  uuid: string,
  name: string,
  description: string,
  start_date: FuzzyDate,
  end_date: FuzzyDate
}`,signature:{properties:[{key:"uuid",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!0}},{key:"start_date",value:{name:"signature",type:"object",raw:`{
  accuracy: number,
  range: boolean,
  description: string,
  start_date: Date,
  end_date: Date
}`,signature:{properties:[{key:"accuracy",value:{name:"number",required:!0}},{key:"range",value:{name:"boolean",required:!0}},{key:"description",value:{name:"string",required:!0}},{key:"start_date",value:{name:"Date",required:!0}},{key:"end_date",value:{name:"Date",required:!0}}]},required:!0}},{key:"end_date",value:{name:"signature",type:"object",raw:`{
  accuracy: number,
  range: boolean,
  description: string,
  start_date: Date,
  end_date: Date
}`,signature:{properties:[{key:"accuracy",value:{name:"number",required:!0}},{key:"range",value:{name:"boolean",required:!0}},{key:"description",value:{name:"string",required:!0}},{key:"start_date",value:{name:"Date",required:!0}},{key:"end_date",value:{name:"Date",required:!0}}]},required:!0}}]}}}],return:{name:"void"}}},description:"Callback fired when the event popover is clicked."},onLoad:{required:!1,flowType:{name:"signature",type:"function",raw:"(events: Array<EventType>) => void",signature:{arguments:[{name:"events",type:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  uuid: string,
  name: string,
  description: string,
  start_date: FuzzyDate,
  end_date: FuzzyDate
}`,signature:{properties:[{key:"uuid",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!0}},{key:"start_date",value:{name:"signature",type:"object",raw:`{
  accuracy: number,
  range: boolean,
  description: string,
  start_date: Date,
  end_date: Date
}`,signature:{properties:[{key:"accuracy",value:{name:"number",required:!0}},{key:"range",value:{name:"boolean",required:!0}},{key:"description",value:{name:"string",required:!0}},{key:"start_date",value:{name:"Date",required:!0}},{key:"end_date",value:{name:"Date",required:!0}}]},required:!0}},{key:"end_date",value:{name:"signature",type:"object",raw:`{
  accuracy: number,
  range: boolean,
  description: string,
  start_date: Date,
  end_date: Date
}`,signature:{properties:[{key:"accuracy",value:{name:"number",required:!0}},{key:"range",value:{name:"boolean",required:!0}},{key:"description",value:{name:"string",required:!0}},{key:"start_date",value:{name:"Date",required:!0}},{key:"end_date",value:{name:"Date",required:!0}}]},required:!0}}]}}],raw:"Array<EventType>"}}],return:{name:"void"}}},description:"Callback fired when the events are loaded."},range:{required:!0,flowType:{name:"signature",type:"object",raw:`{
  max: number,
  min: number
}`,signature:{properties:[{key:"max",value:{name:"number",required:!0}},{key:"min",value:{name:"number",required:!0}}]}},description:"The absolute min/max values for the timeline range."},refine:{required:!0,flowType:{name:"signature",type:"function",raw:"(number | [number, number]) => void",signature:{arguments:[{name:"",type:{name:"union",raw:"number | [number, number]",elements:[{name:"number"},{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]}]}}],return:{name:"void"}}},description:`Callback fired when the slider value(s) are changed.

@param any`},start:{required:!0,flowType:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]},description:"The current value of the slider."}}};const Zu={title:"Components/Core Data/FacetTimeline",component:De},en={min:1768,max:1777},je=()=>{},Ae=He(()=>M.jsx(De,{range:en,refine:je})),We=He(()=>M.jsx("div",{className:"h-[400px] w-[800px]",children:M.jsx(De,{range:en,refine:je})})),mu={min:112,max:2025},Pe=He(()=>M.jsx("div",{className:"h-[500px]",children:M.jsx(De,{range:mu,refine:je})})),Ve=He(()=>M.jsx("div",{className:"h-[450px]",children:M.jsx(De,{className:"bg-gray-1000 text-white",classNames:{button:"px-4",range:"bg-white",thumb:"bg-white",track:"bg-gray-400",reset:"text-white",marker:"fill-gray-300",zoom:"bg-white text-black hover:bg-gray-200 disabled:hover:bg-white"},range:en,refine:je})})),Ze=He(()=>{const[e,n]=p.useState();return M.jsxs(M.Fragment,{children:[M.jsx(De,{onClick:t=>n(t),range:en,refine:je}),e&&M.jsx(lr,{onClose:()=>n(null),open:!0,children:M.jsx(sr,{id:e.uuid})})]})}),Be=He(()=>{const[e,n]=p.useState([]),[t,r]=p.useState(!1),[o,i]=p.useState(),a=p.useCallback(u=>o&&o.uuid===u.uuid,[o]);return M.jsxs(M.Fragment,{children:[M.jsx(De,{actions:[{label:"Show List",icon:M.jsx(Pr,{}),onClick:()=>r(!0)}],onLoad:n,range:en,refine:je}),t&&M.jsx(lr,{className:"z-40",onClose:()=>r(!1),open:!0,children:M.jsxs("div",{className:"flex gap-4",children:[M.jsx("div",{className:"basis-full h-[80vh] overflow-auto",children:M.jsx(Ir,{description:!0,events:e,isSelected:a,onClick:u=>i(u)})}),o&&M.jsx(sr,{className:"basis-full",id:o.uuid})]})})]})});Ae.__docgenInfo={description:"",methods:[],displayName:"Default"};We.__docgenInfo={description:"",methods:[],displayName:"FitBounds"};Pe.__docgenInfo={description:"",methods:[],displayName:"LargeRange"};Ve.__docgenInfo={description:"",methods:[],displayName:"Styled"};Ze.__docgenInfo={description:"",methods:[],displayName:"EventModal"};Be.__docgenInfo={description:"",methods:[],displayName:"ListView"};var Wt,Pt,Vt;Ae.parameters={...Ae.parameters,docs:{...(Wt=Ae.parameters)==null?void 0:Wt.docs,source:{originalSource:"withCoreDataContextProvider(() => <FacetTimeline range={range} refine={refine} />)",...(Vt=(Pt=Ae.parameters)==null?void 0:Pt.docs)==null?void 0:Vt.source}}};var Zt,Bt,Xt;We.parameters={...We.parameters,docs:{...(Zt=We.parameters)==null?void 0:Zt.docs,source:{originalSource:`withCoreDataContextProvider(() => <div className='h-[400px] w-[800px]'>
    <FacetTimeline range={range} refine={refine} />
  </div>)`,...(Xt=(Bt=We.parameters)==null?void 0:Bt.docs)==null?void 0:Xt.source}}};var Gt,Jt,Qt;Pe.parameters={...Pe.parameters,docs:{...(Gt=Pe.parameters)==null?void 0:Gt.docs,source:{originalSource:`withCoreDataContextProvider(() =>
// container with full height and negative margin to fill the storybook viewport
<div className='h-[500px]'>
    <FacetTimeline range={largeRange} refine={refine} />
  </div>)`,...(Qt=(Jt=Pe.parameters)==null?void 0:Jt.docs)==null?void 0:Qt.source}}};var Kt,er,nr;Ve.parameters={...Ve.parameters,docs:{...(Kt=Ve.parameters)==null?void 0:Kt.docs,source:{originalSource:`withCoreDataContextProvider(() => <div className='h-[450px]'>
    <FacetTimeline className='bg-gray-1000 text-white' classNames={{
    button: 'px-4',
    range: 'bg-white',
    thumb: 'bg-white',
    track: 'bg-gray-400',
    reset: 'text-white',
    marker: 'fill-gray-300',
    zoom: 'bg-white text-black hover:bg-gray-200 disabled:hover:bg-white'
  }} range={range} refine={refine} />
  </div>)`,...(nr=(er=Ve.parameters)==null?void 0:er.docs)==null?void 0:nr.source}}};var tr,rr,ir;Ze.parameters={...Ze.parameters,docs:{...(tr=Ze.parameters)==null?void 0:tr.docs,source:{originalSource:`withCoreDataContextProvider(() => {
  const [selectedEvent, setSelectedEvent] = useState();
  return <>
      <FacetTimeline onClick={event => setSelectedEvent(event)} range={range} refine={refine} />
      {selectedEvent && <Modal onClose={() => setSelectedEvent(null)} open>
          <EventDetails id={selectedEvent.uuid} />
        </Modal>}
    </>;
})`,...(ir=(rr=Ze.parameters)==null?void 0:rr.docs)==null?void 0:ir.source}}};var ar,or,ur;Be.parameters={...Be.parameters,docs:{...(ar=Be.parameters)==null?void 0:ar.docs,source:{originalSource:`withCoreDataContextProvider(() => {
  const [events, setEvents] = useState([]);
  const [listView, setListView] = useState(false);
  const [selectedEvent, setSelectedEvent] = useState();

  /**
   * Returns true if the passed event is currently selected.
   *
   * @type {unknown}
   */
  const isSelected = useCallback(event => selectedEvent && selectedEvent.uuid === event.uuid, [selectedEvent]);
  return <>
      <FacetTimeline actions={[{
      label: 'Show List',
      icon: <List />,
      onClick: () => setListView(true)
    }]} onLoad={setEvents} range={range} refine={refine} />
      {listView && <Modal className='z-40' onClose={() => setListView(false)} open>
          <div className='flex gap-4'>
            <div className='basis-full h-[80vh] overflow-auto'>
              <EventsList description events={events} isSelected={isSelected} onClick={event => setSelectedEvent(event)} />
            </div>
            {selectedEvent && <EventDetails className='basis-full' id={selectedEvent.uuid} />}
          </div>
        </Modal>}
    </>;
})`,...(ur=(or=Be.parameters)==null?void 0:or.docs)==null?void 0:ur.source}}};const Bu=["Default","FitBounds","LargeRange","Styled","EventModal","ListView"];export{Ae as Default,Ze as EventModal,We as FitBounds,Pe as LargeRange,Be as ListView,Ve as Styled,Bu as __namedExportsOrder,Zu as default};
