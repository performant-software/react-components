import{j as c}from"./jsx-runtime-BTCK_S7S.js";import{r as u,R as p}from"./index-CBqU2yxZ.js";import{q as $,H as h}from"./index-CAoC3wa_.js";import{_ as A}from"./index-default-C_maRo4o.js";import{L as k}from"./LoadAnimation-B5PEUokg.js";import{M as I}from"./MediaGallery-BBxBPVxq.js";import{u as H}from"./CoreData-DDlnFeUe.js";const L=(e,t="none")=>{if(!e)return null;if(typeof e=="string")return[e];if(!e[t]){const n=Object.getOwnPropertyNames(e);if(n.length>0)return e[n[0]]}return!e[t]||!Array.isArray(e[t])?null:e[t]},F=(e,t="none",n=", ")=>{const r=L(e,t);return Array.isArray(r)?r.join(`${n}`):r};function T(e,t){const n=Object.keys(e).filter(a=>t.includes(a)?null:a),r=new Object;return n.forEach(a=>{r[a]=e[a]}),r}const E=209,N={colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:`hsl(${E} 100% 38.2%)`,accentMuted:`hsl(${E} 80% 61.8%)`,accentAlt:`hsl(${E} 80% 30%)`,secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},_={xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"},{styled:l,css:J,keyframes:K,createTheme:Q}=$({theme:N,media:_});l("span",{});const O=(e,t="200,",n="full")=>{Array.isArray(e)&&(e=e[0]);const{id:r,service:a}=e;let o;if(!a)return r;if(Array.isArray(e.service)&&e.service.length>0&&(o=a[0]),o){if(o["@id"])return`${o["@id"]}/${n}/${t}/0/default.jpg`;if(o.id)return`${o.id}/${n}/${t}/0/default.jpg`}},M=l("img",{objectFit:"cover"}),C=e=>{const t=u.useRef(null),{contentResource:n,altAsLabel:r,region:a="full"}=e;let o;r&&(o=F(r));const g=T(e,["contentResource","altAsLabel"]),{type:d,id:i,width:b=200,height:w=200,duration:m}=n;u.useEffect(()=>{if(!i&&!t.current||["Image"].includes(d)||!i.includes("m3u8"))return;const s=new h;return t.current&&(s.attachMedia(t.current),s.on(h.Events.MEDIA_ATTACHED,function(){s.loadSource(i)})),s.on(h.Events.ERROR,function(x,f){if(f.fatal)switch(f.type){case h.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${x} network error encountered, try to recover`),s.startLoad();break;case h.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${x} media error encountered, try to recover`),s.recoverMediaError();break;default:s.destroy();break}}),()=>{s&&(s.detachMedia(),s.destroy())}},[i,d]);const y=u.useCallback(()=>{if(!t.current)return;let s=0,x=30;if(m&&(x=m),!i.split("#t=")&&m&&(s=m*.1),i.split("#t=").pop()){const v=i.split("#t=").pop();v&&(s=parseInt(v.split(",")[0]))}const f=t.current;f.autoplay=!0,f.currentTime=s,setTimeout(()=>y(),x*1e3)},[m,i]);u.useEffect(()=>y(),[y]);const j=O(n,`${b},${w}`,a);switch(d){case"Image":return p.createElement(M,{as:"img",alt:o,css:{width:b,height:w},key:i,src:j,...g});case"Video":return p.createElement(M,{as:"video",css:{width:b,height:w},disablePictureInPicture:!0,key:i,loop:!0,muted:!0,onPause:y,ref:t,src:i});default:return console.warn(`Resource type: ${d} is not valid or not yet supported in Primitives.`),p.createElement(p.Fragment,null)}};l("a",{});u.createContext(void 0);l("span",{});l("span",{});l("dl",{});l("li",{});l("ul",{});l("dl",{});l("li",{});l("ul",{});const D=e=>{const{thumbnail:t,region:n}=e,r=T(e,["thumbnail"]);return p.createElement(p.Fragment,null,t&&t.map(a=>p.createElement(C,{contentResource:a,key:a.id,region:n,...r})))},P=80,U=80,R=e=>{const[t,n]=u.useState(),{data:r,loading:a}=H(e.onLoad);return a?c.jsx(k,{}):A.isEmpty(r==null?void 0:r.items)&&e.emptyMessage?c.jsx("div",{className:"pt-6 pl-3 pr-6 pb-8 flex items-center justify-center text-muted/50 italic",children:e.emptyMessage}):c.jsxs("div",{className:"p-3 pb-4 grid grid-cols-3 gap-1",children:[A.map(r==null?void 0:r.items,({id:o,label:{en:g},thumbnail:d})=>c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx(D,{className:"rounded shadow cursor-pointer",onClick:()=>n(o),thumbnail:A.map(d,i=>({...i,width:e.thumbnailWidth,height:e.thumbnailHeight}))}),c.jsx("div",{className:"text-sm whitespace-nowrap",children:g})]},o)),c.jsx(I,{manifestUrl:t,onClose:()=>n(null)})]})};R.defaultProps={thumbnailHeight:P,thumbnailWidth:U};const Y=R;R.__docgenInfo={description:"This component renders the related Core Data media records as well as a gallery viewer.",methods:[],displayName:"RelatedMedia",props:{emptyMessage:{required:!1,flowType:{name:"string"},description:"A message to display when no records are returned from the API."},onLoad:{required:!0,flowType:{name:"signature",type:"function",raw:"() => any",signature:{arguments:[],return:{name:"any"}}},description:"Callback fired when the component is mounted to fetch the data."},thumbnailHeight:{required:!1,flowType:{name:"number"},description:"Media thumbnail height.",defaultValue:{value:"80",computed:!1}},thumbnailWidth:{required:!1,flowType:{name:"number"},description:"Media thumbnail width.",defaultValue:{value:"80",computed:!1}}}};export{Y as R};
