import{i as U,l as T}from"./index.es99-DKB1ZkNA.js";import{r as l,j as n}from"./iframe-BPWyo1ml.js";import{F as o}from"./Form-ClhUWp7q.js";import{M as y}from"./Modal-C7r7-T10.js";import{_ as c,U as x}from"./UserDefinedFields-JtrQpCtL.js";import{B as D}from"./Button-4UTl3zWh.js";import{I as _}from"./Input-CCAhbxsm.js";import{L as p}from"./Label-BoodK5V_.js";import{c as j}from"./i18next-eNuDfwAU.js";const k="times circle outline",q="check circle outline",w="red",O="green",Q=e=>{let a=k,d=w;return e.value&&(a=q,d=O),U.jsx(T,{color:d,name:a})},M={labels:{allowMultiple:"Allow multiple",dataType:"Data type",name:"Name",order:"Order",required:"Required",searchable:"Searchable",table:"Table"},title:{add:"Add User Defined Field",edit:"Edit User Defined Field"}},I={errors:{numeric:"{{name}} must be numeric"}},E={columns:{dataType:"Data type",name:"Name",order:"Order",required:"Required",table:"Table",uuid:"Identifier"}},R={columns:{dataType:"Data type",name:"Name",order:"Order",required:"Required",table:"Table",uuid:"Identifier"}},S={UserDefinedFieldModal:M,UserDefinedFields:I,UserDefinedFieldsEmbeddedList:E,UserDefinedFieldsList:R},A={en:{translation:S}},i=j();i.init({debug:!0,fallbackLng:"en",lng:"en",interpolation:{escapeValue:!1},resources:A});const v=e=>{const[a,d]=l.useState(c.map(e.options,t=>({value:t}))),f=l.useCallback(()=>{d(t=>[...t,{new:!0}])},[]),h=l.useCallback(t=>{d(r=>c.filter(r,(u,m)=>m!==t))},[]),b=l.useCallback(t=>{d(r=>c.map(r,(u,m)=>t!==m?u:{...u,new:!1}))},[a]),s=l.useCallback((t,r,{value:u})=>{d(m=>c.map(m,(g,F)=>F!==t?g:{...g,value:u}))},[]);return l.useEffect(()=>{const t=c.filter(a,r=>!r.new);e.onChange(c.pluck(t,"value"))},[a]),n.jsxs("div",{className:"user-defined-field-options",children:[n.jsx(D,{basic:!0,icon:"plus",onClick:f,type:"button"}),c.map(a,(t,r)=>n.jsxs(n.Fragment,{children:[t.new&&n.jsxs(p,{children:[n.jsx(_,{autoFocus:!0,onChange:s.bind(void 0,r),value:t.value}),n.jsx(D,{basic:!0,color:"green",icon:"checkmark",onClick:b.bind(void 0,r),type:"button",size:"tiny"})]}),!t.new&&n.jsx(p,{content:t.value,onRemove:h.bind(void 0,r)})]}))]})};v.__docgenInfo={description:"",methods:[],displayName:"UserDefinedFieldOptions",props:{options:{required:!0,flowType:{name:"Array",elements:[{name:"string"}],raw:"Array<string>"},description:""},onChange:{required:!0,flowType:{name:"signature",type:"function",raw:"(options: Array<string>) => void",signature:{arguments:[{name:"options",type:{name:"Array",elements:[{name:"string"}],raw:"Array<string>"}}],return:{name:"void"}}},description:""}}};const C={select:"Select"},N=e=>{const[a,d]=l.useState([]),[f,h]=l.useState([]),b=l.useCallback(s=>c.map(s,t=>({key:t,value:t,text:t})),[]);return l.useEffect(()=>{e.hideTable||x.fetchTables().then(({data:s})=>h(b(s.tables))),x.fetchDataTypes().then(({data:s})=>d(b(s.data_types)))},[]),n.jsxs(y,{as:o,centered:!1,open:!0,children:[n.jsx(y.Header,{content:e.item.id?i.t("UserDefinedFieldModal.title.edit"):i.t("UserDefinedFieldModal.title.add")}),n.jsxs(y.Content,{children:[!e.hideTable&&n.jsx(o.Dropdown,{clearable:!0,error:e.isError("table_name"),label:i.t("UserDefinedFieldModal.labels.table"),onChange:e.onTextInputChange.bind(void 0,"table_name"),options:f,required:e.isRequired("table_name"),selection:!0,selectOnBlur:!1,value:e.item.table_name||""}),n.jsx(o.Input,{error:e.isError("column_name"),label:i.t("UserDefinedFieldModal.labels.name"),onChange:e.onTextInputChange.bind(void 0,"column_name"),required:e.isRequired("column_name"),value:e.item.column_name||""}),n.jsx(o.Dropdown,{clearable:!0,error:e.isError("data_type"),label:i.t("UserDefinedFieldModal.labels.dataType"),onChange:e.onTextInputChange.bind(void 0,"data_type"),options:a,required:e.isRequired("data_type"),selection:!0,selectOnBlur:!1,value:e.item.data_type||""}),n.jsx(o.Input,{error:e.isError("order"),label:i.t("UserDefinedFieldModal.labels.order"),onChange:e.onTextInputChange.bind(void 0,"order"),required:e.isRequired("oder"),value:e.item.order||0,type:"number"}),n.jsxs(o.Group,{children:[n.jsx(o.Checkbox,{error:e.isError("required"),checked:e.item.required,label:i.t("UserDefinedFieldModal.labels.required"),onChange:e.onCheckboxInputChange.bind(void 0,"required")}),n.jsx(o.Checkbox,{error:e.isError("searchable"),checked:e.item.searchable,label:i.t("UserDefinedFieldModal.labels.searchable"),onChange:e.onCheckboxInputChange.bind(void 0,"searchable")}),e.item.data_type===C.select&&n.jsx(o.Checkbox,{error:e.isError("allow_multiple"),checked:e.item.allow_multiple,label:i.t("UserDefinedFieldModal.labels.allowMultiple"),onChange:e.onCheckboxInputChange.bind(void 0,"allow_multiple")})]}),e.item.data_type===C.select&&n.jsx(v,{options:e.item.options,onChange:s=>e.onSetState({options:s})})]}),e.children]})};N.__docgenInfo={description:"",methods:[],displayName:"UserDefinedFieldModal",props:{hideTable:{required:!1,flowType:{name:"boolean"},description:""}}};const L=e=>{const a={};return e.order||c.extend(a,{order:i.t("UserDefinedFields.errors.numeric",{name:"order"})}),a},W={validateUserDefinedField:L};export{Q as O,W as U,N as a,i};
