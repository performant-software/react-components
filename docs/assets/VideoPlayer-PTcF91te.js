import{j as c}from"./jsx-runtime-D9TvR9R2.js";import{m as P,c as R}from"./index.es34-DPdoOAcA.js";import{R as m,r as u}from"./index-C0dDX-lL.js";import{M as T}from"./Message-BUccNRJp.js";import{_ as w}from"./extends-CCbyfPlC.js";import{_ as C}from"./inheritsLoose-1HkgTRWY.js";import{n as $,u as I,m as N,o as A,p as g,V as S}from"./getElementType-C_4y_n4F.js";import{M as V}from"./ModernAutoControlledComponent-CBEnGjal.js";import{I as _}from"./Icon-BGzIEILD.js";import{M as E}from"./Modal-B0p4Zslq.js";import{_ as k}from"./index-default-C_maRo4o.js";import{i as x}from"./i18n-C9xJ7SCg.js";import{R as U}from"./Portal-CKYxdKwP.js";var v=function(r){C(l,r);function l(){for(var a,e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return a=r.call.apply(r,[this].concat(t))||this,a.handleClick=function(n){var i=a.props.onClick,s=a.state.active;i&&i(n,w({},a.props,{active:!0})),s||a.setState({active:!0})},a}var d=l.prototype;return d.getSrc=function(){var e=this.props,t=e.autoplay,o=t===void 0?!0:t,n=e.brandedUI,i=n===void 0?!1:n,s=e.color,p=s===void 0?"#444444":s,f=e.hd,y=f===void 0?!0:f,h=e.id,b=e.source,q=e.url;return b==="youtube"?["//www.youtube.com/embed/"+h,"?autohide=true","&amp;autoplay="+o,"&amp;color="+encodeURIComponent(p),"&amp;hq="+y,"&amp;jsapi=false","&amp;modestbranding="+i,"&amp;rel="+(i?0:1)].join(""):b==="vimeo"?["//player.vimeo.com/video/"+h,"?api=false","&amp;autoplay="+o,"&amp;byline=false","&amp;color="+encodeURIComponent(p),"&amp;portrait=false","&amp;title=false"].join(""):q},d.render=function(){var e=this.props,t=e.aspectRatio,o=e.className,n=e.icon,i=e.placeholder,s=this.state.active,p=$("ui",t,I(s,"active"),"embed",o),f=N(l,this.props),y=A(l,this.props),h=n!==void 0?n:"video play";return m.createElement(y,w({},f,{className:p,onClick:this.handleClick}),_.create(h,{autoGenerateKey:!1}),i&&m.createElement("img",{className:"placeholder",src:i}),this.renderEmbed())},d.renderEmbed=function(){var e=this.props,t=e.children,o=e.content,n=e.iframe,i=e.source,s=this.state.active;return s?g(t)?g(o)?m.createElement("div",{className:"embed"},S(g(n)?this.getSrc():n,{defaultProps:{allowFullScreen:!1,frameBorder:0,height:"100%",scrolling:"no",src:this.getSrc(),title:"Embedded content from "+i+".",width:"100%"},autoGenerateKey:!1})):m.createElement("div",{className:"embed"},o):m.createElement("div",{className:"embed"},t):null},l}(V);v.handledProps=["active","as","aspectRatio","autoplay","brandedUI","children","className","color","content","defaultActive","hd","icon","id","iframe","onClick","placeholder","source","url"];v.propTypes={};v.autoControlledProps=["active"];const M=r=>{const[l,d]=u.useState(),a=u.useMemo(()=>{const e=new Blob([l],{type:"text/plain"});return URL.createObjectURL(e)},[l]);return u.useEffect(()=>{fetch(r.src).then(e=>e.text()).then(d)},[r.src]),a?P.jsx("track",{...r,src:a}):null},j=r=>{const[l,d]=u.useState(!1),a=u.useRef();return u.useEffect(()=>{if(a&&a.current&&r.placeholderAlt){const e=a.current.querySelector(".placeholder");e&&e.setAttribute("alt",r.placeholderAlt)}},[a,r.placeholderAlt]),c.jsx(R.Consumer,{children:e=>c.jsx(E,{centered:!1,className:"video-player",closeIcon:!0,mountNode:e,onClose:r.onClose.bind(void 0),open:r.open,size:r.size,children:c.jsxs(E.Content,{children:[l&&c.jsx(T,{content:x.t("VideoPlayer.errors.path.content",{path:r.video}),header:x.t("VideoPlayer.errors.path.header"),icon:"exclamation circle"}),r.embedded&&c.jsx(U,{innerRef:a,children:c.jsx(v,{active:r.autoPlay,icon:r.icon,iframe:r.autoPlay?{allow:"autoplay"}:void 0,placeholder:r.placeholder,url:`${r.video}${r.autoPlay?"?autoplay=true":""}`})}),!r.embedded&&c.jsx("video",{autoPlay:r.autoPlay,controls:!0,onError:()=>d(!0),src:r.video,children:k.map(r.transcriptions,t=>c.jsx(M,{default:t.default,kind:"captions",label:t.label,srcLang:t.language,src:t.src},t.language))})]})})})};j.defaultProps={autoPlay:!1,embedded:!1,icon:"right circle arrow",size:"small"};j.__docgenInfo={description:"",methods:[],displayName:"VideoPlayer",props:{autoPlay:{required:!1,flowType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},embedded:{required:!1,flowType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},icon:{required:!1,flowType:{name:"union",raw:"string | Element<any>",elements:[{name:"string"},{name:"Element",elements:[{name:"any"}],raw:"Element<any>"}]},description:"",defaultValue:{value:"'right circle arrow'",computed:!1}},onClose:{required:!0,flowType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},open:{required:!0,flowType:{name:"boolean"},description:""},placeholder:{required:!1,flowType:{name:"string",nullable:!0},description:""},placeholderAlt:{required:!1,flowType:{name:"string"},description:""},size:{required:!1,flowType:{name:"string"},description:"",defaultValue:{value:"'small'",computed:!1}},transcriptions:{required:!1,flowType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  default?: boolean,
  label: string,
  language: string,
  src: string
}`,signature:{properties:[{key:"default",value:{name:"boolean",required:!1}},{key:"label",value:{name:"string",required:!0}},{key:"language",value:{name:"string",required:!0}},{key:"src",value:{name:"string",required:!0}}]}}],raw:"Array<Transcription>"},description:""},video:{required:!0,flowType:{name:"string"},description:""}}};export{j as V};
