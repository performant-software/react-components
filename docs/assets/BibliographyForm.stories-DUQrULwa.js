import{j as d}from"./jsx-runtime-D9TvR9R2.js";import{r as y}from"./index-C0dDX-lL.js";import{F as x}from"./Form-WfNl3YLh.js";import{B as A}from"./BibliographyForm-DOR4jOuR.js";import{_ as i}from"./index-default-C_maRo4o.js";import{i as h}from"./i18n-HVDXBJds.js";import"./_commonjsHelpers-BosuxZz1.js";import"./extends-CCbyfPlC.js";import"./inheritsLoose-1HkgTRWY.js";import"./setPrototypeOf-DgZC2w_0.js";import"./getElementType-BSRayMAs.js";import"./Button-CJhT71wt.js";import"./Icon-C_3d7-zE.js";import"./Label-aEFd48OX.js";import"./ModernAutoControlledComponent-C211dBIC.js";import"./assertThisInitialized-B9jnkVVz.js";import"./includes-Cc_HXDPA.js";import"./toFinite-C3oJXAtX.js";import"./forEach-CLeEMxs1.js";import"./Dimmer-DP3fvqlo.js";import"./Portal-B8DXQ6EK.js";import"./keyboardKey-OMDgGVm3.js";import"./index-DOYXiIEK.js";import"./objectWithoutPropertiesLoose-1QL-frMM.js";import"./map-DWKMCCtW.js";import"./Checkbox-B3tsCUtI.js";import"./_baseSet-BllfnHSO.js";import"./_baseAssignValue-UQlBDUKN.js";import"./Dropdown-DwNow7wJ.js";import"./without-Duh6Zu7H.js";import"./isArrayLikeObject-Bl_bAmop.js";import"./isEmpty-CY-Bv0TY.js";import"./deburr-CNLr_JRW.js";import"./index-mbjjMjCk.js";import"./_arrayReduce-CrxnWFSq.js";import"./filter-B6f9p5im.js";import"./Input-Bwh_HEb3.js";import"./Bibliography-isW7v-pd.js";import"./i18n-C9xJ7SCg.js";import"./i18next-CwS9wMM1.js";import"./toPropertyKey-BcUJYDQU.js";import"./defineProperty-DcNpp85p.js";import"./inherits-CWPG5jll.js";import"./createClass-CV9nCQMI.js";import"./getPrototypeOf-BYVhAdwF.js";const I=["",null,void 0,[],{}],R={emptyValues:I,ignoreHtml:!0,ignoreWhitespace:!0,removeEmptyValues:!1},f=/(<([^>]+)>)/gi,g=/\s\s+/g,F=(r,t)=>{const e=i.compact(t==null?void 0:t.split("."));let s=r;return i.each(e,o=>{i.isArray(s)?s=i.map(s,n=>i.get(n,o)):s=i.get(s,o)}),s},j=(r,t,e)=>{const s=t.split("."),o=i.clone(r);let n=o;for(let a=0;a<s.length;a+=1)a<s.length-1?i.isArray(n[s[a]])?n=i.map(n,m=>i.get(m,s[a])):n=i.get(n,s[a]):n[s[a]]=e;return o},V=r=>i.isObject(r)||i.isArray(r)?i.isEmpty(r):!r,b=(r,t,e={})=>{const s=i.defaults(e,R);if(r===t||i.contains(s.emptyValues,r)&&i.contains(s.emptyValues,t))return!0;if(i.isString(r)&&i.isString(t)){let o=r,n=t;if(s.ignoreWhitespace&&(o=r.replace(g," "),n=t.replace(g," ")),s.ignoreHtml&&(o=o.replace(f,""),n=n.replace(f,"")),o===n)return!0}if(i.isFunction(r)&&i.isFunction(t)&&r.toString()===t.toString())return!0;if(r!==null&&typeof r=="object"&&t!==null&&typeof t=="object"){let o=r,n=t;s.removeEmptyValues&&(o=i.omit(r,l=>i.contains(s.emptyValues,l)),n=i.omit(t,l=>i.contains(s.emptyValues,l)));const a=i.keys(o),m=i.keys(n);if(a.length!==m.length)return!1;let u=!0;return i.each(i.keys(o),l=>{i.has(n,l)&&b(o[l],n[l])||(u=!1)}),!!u}return!1},q=r=>!!r&&typeof r=="object"&&typeof r.then=="function",c=(r,t)=>i.isArray(r)?i.map(r,e=>c(e,t)):i.isObject(r)?i.mapObject(i.omit(r,t),e=>c(e,t)):r,E={getNestedValue:F,setNestedValue:j,isEmpty:V,isEqual:b,isPromise:q,without:c},_="can't be blank",D="has already been taken",O=r=>class extends y.Component{constructor(t){super(t);const e=i.defaults(t.item||{},t.defaults||{});this.state={item:e,loading:!1,originalItem:e,saving:!1,validationErrors:[]}}componentDidMount(){this.props.onInitialize&&this.props.item&&this.props.item.id&&this.setState({loading:!0},()=>{this.props.onInitialize&&this.props.item&&this.props.onInitialize(this.props.item.id).then(t=>this.setState({item:t,originalItem:t,loading:!1}))})}componentDidUpdate(t){t.item!==this.props.item&&this.setState({item:this.props.item,originalItem:this.props.item})}componentWillUnmount(){this.onSetState({saving:!1})}isChild(t,e){return t.uid&&e.uid&&t.uid===e.uid||t.id&&e.id&&t.id===e.id}isRequired(t){return this.props.required&&i.contains(this.props.required,t)}isError(t){return i.has(this.state.validationErrors,t)}onClearValidationError(...t){this.setState(e=>({validationErrors:i.omit(e.validationErrors,t)}))}onClose(){this.props.onClose()}onCreateChildAssociation(t,e){this.setState(s=>({item:{...s.item,[t]:[...s.item[t]||[],e]}}))}onDeleteChildAssociation(t,e){return e.id?this.onMarkChildAssociationForDelete(t,e):this.onRemoveChildAssociation(t,e)}onError({response:{data:{errors:t={}},status:e}}){const s={};i.each(Object.keys(t),o=>{const n=t[o],a=this.state.item[o];i.each(n,m=>{m===D?i.extend(s,{[o]:h.t("EditContainer.errors.unique",{key:o,value:a})}):m===_?i.extend(s,{[o]:h.t("EditContainer.errors.required",{key:o})}):this.props.resolveValidationError&&i.extend(s,this.props.resolveValidationError({key:o,error:m,status:e,item:this.state.item}))})}),e===400&&i.isEmpty(s)?i.extend(s,{error:h.t("EditContainer.errors.general")}):e===500&&i.isEmpty(s)&&i.extend(s,{error:h.t("EditContainer.errors.system")}),this.setState({saving:!1,validationErrors:s})}onMarkChildAssociationForDelete(t,e){this.setState(s=>({item:{...s.item,[t]:i.map(s.item[t]||[],o=>o.id===e.id?{...o,_destroy:!0}:o)}}))}onMultiAddChildAssociations(t,e){const s=this.state.item[t];i.each(e,this.onSaveChildAssociation.bind(this,t));const o=i.filter(s,n=>!i.find(e,this.isChild.bind(this,n)));i.each(o,this.onDeleteChildAssociation.bind(this,t))}onRemoveChildAssociation(t,e){this.setState(s=>({item:{...s.item,[t]:i.filter(s.item[t]||[],o=>!(this.isChild(o,e)||E.isEqual(o,e)))}}))}onReset(){const t=this.props.defaults||{};this.setState({item:t,originalItem:t})}onSave(){this.validateForm()&&this.setState({saving:!0},()=>{this.props.onSave(this.state.item).catch(this.onError.bind(this)).finally(()=>this.setState({saving:!1}))})}onSaveChildAssociation(t,e){const s=this.state.item[t]||[];return i.find(s,this.isChild.bind(this,e))?this.onUpdateChildAssociation(t,e):this.onCreateChildAssociation(t,e)}onUpdateChildAssociation(t,e){this.setState(s=>({item:{...s.item,[t]:i.map(s.item[t]||[],o=>this.isChild(e,o)?e:o)}}))}onAssociationInputChange(t,e,s={}){this.setState(o=>({item:{...o.item,[t]:s.id||"",[e]:s||{}},validationErrors:i.omit(o.validationErrors,t)}))}onCheckboxInputChange(t){this.setState(e=>({item:{...e.item,[t]:!e.item[t]}}))}onSetState(t){this.setState(e=>({item:{...e.item,...t},validationErrors:i.omit(e.validationErrors,i.keys(t))}))}onTextInputChange(t,e,{value:s}){this.setState(o=>({item:{...o.item,[t]:s},validationErrors:i.omit(o.validationErrors,t)}))}render(){return d.jsx(r,{...this.props,dirty:!!(this.state.item.id&&!E.isEqual(this.state.item,this.state.originalItem)),errors:i.values(this.state.validationErrors),isError:this.isError.bind(this),isRequired:this.isRequired.bind(this),item:this.state.item,loading:this.state.loading,onAssociationInputChange:this.onAssociationInputChange.bind(this),onCheckboxInputChange:this.onCheckboxInputChange.bind(this),onClearValidationError:this.onClearValidationError.bind(this),onDeleteChildAssociation:this.onDeleteChildAssociation.bind(this),onMultiAddChildAssociations:this.onMultiAddChildAssociations.bind(this),onReset:this.onReset.bind(this),onSave:this.onSave.bind(this),onSaveChildAssociation:this.onSaveChildAssociation.bind(this),onTextInputChange:this.onTextInputChange.bind(this),onSetState:this.onSetState.bind(this),saving:this.state.saving})}validateForm(){const t=[];this.props.validate&&i.extend(t,this.props.validate(this.state.item));const e=this.props.required||[];return i.each(e,s=>{const o=this.state.item[s];let n;i.isNumber(o)?n=i.isEmpty(o.toString()):n=i.isEmpty(o),n&&i.extend(t,{[s]:h.t("EditContainer.errors.required",{key:s})})}),this.setState({validationErrors:t}),i.keys(t).length===0}},T=O(A),Rt={title:"Components/Semantic UI/BibliographyForm",component:A},p=()=>d.jsx(x,{children:d.jsx(T,{item:{itemType:"book"}})});p.__docgenInfo={description:"",methods:[],displayName:"Default"};var C,S,v;p.parameters={...p.parameters,docs:{...(C=p.parameters)==null?void 0:C.docs,source:{originalSource:`() => <Form>
    <BibliographyFormComponent item={{
    itemType: 'book'
  }} />
  </Form>`,...(v=(S=p.parameters)==null?void 0:S.docs)==null?void 0:v.source}}};const Ft=["Default"];export{p as Default,Ft as __namedExportsOrder,Rt as default};
