import{j as n}from"./jsx-runtime-D9TvR9R2.js";import{r as t}from"./index-C0dDX-lL.js";import{I as q}from"./Icon-BGzIEILD.js";import{_ as T}from"./index-default-C_maRo4o.js";import{F as U}from"./FileInputButton-B2clpJES.js";import{i as p}from"./i18n-C9xJ7SCg.js";import{L as C}from"./LazyAudio-D7eQgEUA.js";import{L as k}from"./LazyDocument-BWWhV_qg.js";import{L as S}from"./LazyImage-PxbMbQrV.js";import{L as M}from"./LazyVideo-B-0FbGwm.js";import{T as B}from"./Trans-BYRLofKo.js";const r={audio:"audio",image:"image",pdf:"application/pdf",video:"video"},F=["image/png","image/jpeg","image/gif","image/webp","image/bmp","video/m4v","video/mp4"],z=e=>{const[l,g]=t.useState(e.contentType||""),[c,b]=t.useState(e.name),[s,w]=t.useState(e.preview),[o,m]=t.useState(e.src),[d,L]=t.useState(e.downloadUrl),[f,v]=t.useState(null),y=t.useMemo(()=>{let i;return c&&(i=c.split(".").pop(),i=i&&i.toUpperCase()),i},[c]),h=t.useCallback(i=>{const a=T.first(i);g(a.type),b(a.name),w(null),L(null),T.contains(F,a.type)||a.type.startsWith(r.audio)||a.type===r.pdf?(m(URL.createObjectURL(a)),v(p.t("LazyMedia.buttons.preview"))):(m(null),v(null)),e.onUpload(a)},[e.onUpload]),u=t.useCallback(()=>n.jsxs(n.Fragment,{children:[e.onUpload&&n.jsx(U,{color:"orange",content:p.t("Common.buttons.upload"),icon:"cloud upload",onSelection:h}),e.children]})),j=t.useCallback(()=>l.startsWith(r.image)?n.jsx(S,{dimmable:e.dimmable,download:d,preview:s,src:o,size:e.size,viewButtonLabel:f,children:u()}):l.startsWith(r.video)?n.jsx(M,{dimmable:e.dimmable,download:d,playButtonLabel:f,preview:s,src:o,size:e.size,transcriptions:e.transcriptions,children:u()}):l.startsWith(r.audio)?n.jsx(C,{dimmable:e.dimmable,download:d,playButtonLabel:f,preview:s,src:o,size:e.size,children:u()}):n.jsx(k,{dimmable:e.dimmable,download:d,pdf:l===r.pdf,preview:s,src:o,size:e.size,children:u()}),[l,s,o,e.dimmable,d,e.size]),x=t.useCallback(()=>y?n.jsxs("div",{children:[n.jsx(q,{name:"info circle"}),n.jsx("span",{children:n.jsx(B,{components:{bold:n.jsx("strong",{})},default:"Your <bold>{{type}}</bold> has been received",i18n:p,i18nKey:"LazyMedia.messages.uploaded",values:{type:y}})})]}):null,[y]);return t.useEffect(()=>{e.contentType&&g(e.contentType),e.name&&b(e.name),e.preview&&w(e.preview),e.src?m(e.src):m(null)},[e.contentType,e.name,e.preview,e.src]),n.jsxs("div",{className:"lazy-media",children:[j(),x()]})};z.defaultProps={dimmable:!0,size:"medium"};z.__docgenInfo={description:"",methods:[],displayName:"LazyMedia",props:{children:{required:!1,flowType:{name:"Node"},description:""},contentType:{required:!0,flowType:{name:"string"},description:""},dimmable:{required:!1,flowType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},downloadUrl:{required:!1,flowType:{name:"string"},description:""},name:{required:!1,flowType:{name:"string"},description:""},onUpload:{required:!0,flowType:{name:"signature",type:"function",raw:"(file: File) => void",signature:{arguments:[{name:"file",type:{name:"File"}}],return:{name:"void"}}},description:""},preview:{required:!1,flowType:{name:"string"},description:""},size:{required:!1,flowType:{name:"string"},description:"",defaultValue:{value:"'medium'",computed:!1}},src:{required:!1,flowType:{name:"string"},description:""},transcriptions:{required:!1,flowType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  default?: boolean,
  label: string,
  language: string,
  src: string
}`,signature:{properties:[{key:"default",value:{name:"boolean",required:!1}},{key:"label",value:{name:"string",required:!0}},{key:"language",value:{name:"string",required:!0}},{key:"src",value:{name:"string",required:!0}}]}}],raw:"Array<Transcription>"},description:""}}};export{z as L};
