import{j as jsxRuntimeExports}from"./jsx-runtime-D9TvR9R2.js";import{r as reactExports,R as React}from"./index-C0dDX-lL.js";import{c as clsx}from"./clsx-B-dksMZM.js";import{A as AccordionItemsList}from"./AccordionItemsList-DjnK9Mj0.js";import{I as Icon}from"./Icon-xn5eBWjd.js";import{L as LoadAnimation}from"./LoadAnimation-b0qjd8WL.js";import{R as RecordDetailBreadcrumbs}from"./RecordDetailBreadcrumbs-DBFpcMQI.js";import{_ as _$o}from"./index-default-C_maRo4o.js";import{B as Button}from"./Button-BVnVN7dx.js";import{i as i18n}from"./i18n-O47xwIR-.js";import{R as RecordDetailItem}from"./RecordDetailItem-D9wvyZCv.js";import{R as RecordDetailHeader}from"./RecordDetailHeader-CVB3-402.js";import{r as reactDomExports,O as O$u}from"./index-DOYXiIEK.js";import"./index.es33-5L37r3QP.js";import"./index.es11-CDXuY1qK.js";import"./peripleo-maplibre.es26-DiUCIHtK.js";import{a as action}from"./chunk-WFFRPTHA-B2vgThZf.js";import"./_commonjsHelpers-BosuxZz1.js";import"./index-BGIGw4h8.js";import"./extends-CCbyfPlC.js";import"./index-CIyLsbPd.js";import"./index-BmSdlTVd.js";import"./index-CMZE9jPC.js";import"./i18next-CwS9wMM1.js";import"./toPropertyKey-BcUJYDQU.js";import"./defineProperty-DcNpp85p.js";import"./inherits-CWPG5jll.js";import"./assertThisInitialized-B9jnkVVz.js";import"./setPrototypeOf-DgZC2w_0.js";import"./createClass-CV9nCQMI.js";import"./getPrototypeOf-BYVhAdwF.js";import"./RecordDetailTitle-DvlOSjGu.js";import"./iframe-DD13tmhX.js";import"../sb-preview/runtime.js";import"./peripleo-maplibre.es6-CTpa37IY.js";import"./preview-errors-CzpZmerH.js";import"./index-CKJfshIT.js";import"./v4-D8aEg3BZ.js";const RecordDetailContent=Kt=>{var $n,ln;const[Vt,Hr]=reactExports.useState(!1),[Wr,Yr]=reactExports.useState(!1),[Zr,en]=reactExports.useState(0),[tn,rn]=reactExports.useState(0),nn=reactExports.useRef(null),on=reactExports.useMemo(()=>new ResizeObserver(Hn=>{const{target:jn}=Hn[0];en(jn.scrollHeight),rn(jn.clientHeight)}),[]),an=reactExports.useCallback(Hn=>{Hn?(nn.current=Hn,on.observe(Hn)):nn.current=null},[on]);return reactExports.useEffect(()=>{nn.current&&Yr(Zr>tn||Vt)},[Zr,tn]),reactExports.useEffect(()=>()=>on.disconnect(),[]),jsxRuntimeExports.jsxs("div",{className:($n=Kt.classNames)==null?void 0:$n.root,children:[jsxRuntimeExports.jsxs("div",{className:clsx("flex","flex-col","relative",{"max-h-[250px]":!Vt}),children:[jsxRuntimeExports.jsxs("div",{className:"overflow-hidden",ref:an,children:[jsxRuntimeExports.jsx("ul",{className:(ln=Kt.classNames)==null?void 0:ln.items,children:_$o.map(Kt.items,(Hn,jn)=>jsxRuntimeExports.jsx(RecordDetailItem,{className:Hn.className,icon:Hn.icon,text:Hn.text},jn))}),Kt.children]}),Wr&&!Vt&&jsxRuntimeExports.jsx("div",{className:"absolute left-0 bottom-0 w-full h-[50px] bg-gradient-to-b from-white/50 to-white/100"})]}),Wr&&jsxRuntimeExports.jsx(Button,{className:"w-full justify-center mb-4",onClick:()=>Hr(Hn=>!Hn),rounded:!0,children:Vt?i18n.t("RecordDetailHeader.showLess"):i18n.t("RecordDetailHeader.showMore")})]})};RecordDetailContent.__docgenInfo={description:"",methods:[],displayName:"RecordDetailContent",props:{children:{required:!1,flowType:{name:"Node"},description:""},classNames:{required:!1,flowType:{name:"signature",type:"object",raw:`{
  root?: string,
  items?: string
}`,signature:{properties:[{key:"root",value:{name:"string",required:!1}},{key:"items",value:{name:"string",required:!1}}]}},description:""},items:{required:!0,flowType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  className?: string,
  icon?: string,
  text: string
}`,signature:{properties:[{key:"className",value:{name:"string",required:!1}},{key:"icon",value:{name:"string",required:!1}},{key:"text",value:{name:"string",required:!0}}]}}],raw:"Array<Item>"},description:""}}};const RecordDetailPanel=Kt=>{var Vt,Hr,Wr,Yr,Zr,en;return jsxRuntimeExports.jsxs("div",{className:clsx("relative","overflow-y-auto",(Vt=Kt.classNames)==null?void 0:Vt.root),children:[jsxRuntimeExports.jsxs("div",{className:clsx("sticky","inset-0","bg-white","z-[5]",{"shadow-[0px_1px_4px_0px_rgba(0,0,0,.15)]":Kt.relations&&Kt.relations.length}),children:[Kt.onClose&&jsxRuntimeExports.jsx("div",{"aria-label":"Close",className:"absolute top-6 right-6 z-10 cursor-pointer",onClick:Kt.onClose,onKeyDown:Kt.onClose,role:"button",tabIndex:"0",children:jsxRuntimeExports.jsx(Icon,{name:"close",size:24})}),(Kt.breadcrumbs||Kt.onGoBack)&&jsxRuntimeExports.jsx(RecordDetailBreadcrumbs,{history:Kt.breadcrumbs||[],onGoBack:Kt.onGoBack,className:"absolute top-6 left-6 pr-6 max-w-[calc(100%_-4.5em)] z-10"}),jsxRuntimeExports.jsx(RecordDetailHeader,{title:Kt.title,icon:Kt.icon,classNames:{root:clsx({"!pt-16":Kt.breadcrumbs||Kt.onGoBack},(Hr=Kt.classNames)==null?void 0:Hr.header),title:clsx((Wr=Kt.classNames)==null?void 0:Wr.title,{"pr-6":Kt.onClose}),items:(Yr=Kt.classNames)==null?void 0:Yr.items},detailPageUrl:Kt.detailPageUrl})]}),jsxRuntimeExports.jsx(RecordDetailContent,{classNames:{root:"py-4 px-8",items:(Zr=Kt.classNames)==null?void 0:Zr.items},items:Kt.detailItems,children:Kt.children}),Kt.loading&&jsxRuntimeExports.jsx("div",{className:"py-4 px-8",children:jsxRuntimeExports.jsx(LoadAnimation,{})}),!Kt.loading&&jsxRuntimeExports.jsx(AccordionItemsList,{className:clsx((en=Kt.classNames)==null?void 0:en.relatedRecords),items:Kt.relations,count:Kt.count})]})},RecordDetailPanel$1=RecordDetailPanel;RecordDetailPanel.__docgenInfo={description:"",methods:[],displayName:"RecordDetailPanel",props:{breadcrumbs:{required:!1,flowType:{name:"Array",elements:[{name:"string"}],raw:"Array<string>"},description:"A list of navigation breadcrumbs to be rendered above the title"},children:{required:!1,flowType:{name:"Node"},description:"Content to be rendered as the blurb"},classNames:{required:!1,flowType:{name:"signature",type:"object",raw:"{ header?: string, items?: string, relatedRecords?: string, root?: string, title?: string }",signature:{properties:[{key:"header",value:{name:"string",required:!1}},{key:"items",value:{name:"string",required:!1}},{key:"relatedRecords",value:{name:"string",required:!1}},{key:"root",value:{name:"string",required:!1}},{key:"title",value:{name:"string",required:!1}}]}},description:`Class names to apply to the root div, the header box, the title element,
the list element containing the detail items, and the accordion list containing related records`},count:{required:!1,flowType:{name:"Boolean"},description:"If true, the number of related records will be displayed for each type"},detailItems:{required:!1,flowType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ text: string, icon?: string, className?: string }",signature:{properties:[{key:"text",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!1}},{key:"className",value:{name:"string",required:!1}}]}}],raw:"Array<{ text: string, icon?: string, className?: string }>"},description:"List of detail fields to be rendered above the blurb"},detailPageUrl:{required:!1,flowType:{name:"string"},description:"If a URL for a record detail page is provided, will render a button that links to it"},icon:{required:!1,flowType:{name:"string"},description:"The icon to display before the header."},loading:{required:!1,flowType:{name:"Boolean"},description:"If true, displays a loading icon in place of the related records list"},onClose:{required:!1,flowType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"A function called when the `close` icon is clicked"},onGoBack:{required:!1,flowType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"A function called when the back arrow is clicked"},relations:{required:!1,flowType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  /**
   * When set to true, items will be displayed in a row rather than a column
   */
  horizontal?: boolean,

  /**
   * Icon to use in front of each list item. Defaults to none. Note this is overridden if a renderItem prop is provided
   */
  icon?: JSX.Element,

  /**
   * List of related items
   */
  items: Array<RelatedRecord>,

  /**
   * Optional render prop to render the title and count; defaults to \`\${title} (\${count})\`
   */
  renderTitle?: (title: String, count?: number | string) => JSX.Element,

  /**
   * Optional render prop to render each item in the list
  */
  renderItem?: (item: RelatedRecord) => JSX.Element,

  /**
   * The title of the related model
   */
  title: string,
}`,signature:{properties:[{key:"horizontal",value:{name:"boolean",required:!1},description:"When set to true, items will be displayed in a row rather than a column"},{key:"icon",value:{name:"JSX.Element",required:!1},description:"Icon to use in front of each list item. Defaults to none. Note this is overridden if a renderItem prop is provided"},{key:"items",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  /**
   * Optional data prop to pass other fields, e.g. if needed for rendering
  */
  data?: any,

  /**
    * Optional event fired when item is clicked. Will be overridden if a renderItem prop is provided in the parent list
  */
  onClick?: () => void,

  /**
   * The primary name of the record (will display as text of the list item by default)
   */
  name: string,
}`,signature:{properties:[{key:"data",value:{name:"any",required:!1},description:"Optional data prop to pass other fields, e.g. if needed for rendering"},{key:"onClick",value:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}},required:!1},description:"Optional event fired when item is clicked. Will be overridden if a renderItem prop is provided in the parent list"},{key:"name",value:{name:"string",required:!0},description:"The primary name of the record (will display as text of the list item by default)"}]}}],raw:"Array<RelatedRecord>",required:!0},description:"List of related items"},{key:"renderTitle",value:{name:"signature",type:"function",raw:"(title: String, count?: number | string) => JSX.Element",signature:{arguments:[{name:"title",type:{name:"String"}},{name:"count",type:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]}}],return:{name:"JSX.Element"}},required:!1},description:"Optional render prop to render the title and count; defaults to `${title} (${count})`"},{key:"renderItem",value:{name:"signature",type:"function",raw:"(item: RelatedRecord) => JSX.Element",signature:{arguments:[{name:"item",type:{name:"signature",type:"object",raw:`{
  /**
   * Optional data prop to pass other fields, e.g. if needed for rendering
  */
  data?: any,

  /**
    * Optional event fired when item is clicked. Will be overridden if a renderItem prop is provided in the parent list
  */
  onClick?: () => void,

  /**
   * The primary name of the record (will display as text of the list item by default)
   */
  name: string,
}`,signature:{properties:[{key:"data",value:{name:"any",required:!1},description:"Optional data prop to pass other fields, e.g. if needed for rendering"},{key:"onClick",value:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}},required:!1},description:"Optional event fired when item is clicked. Will be overridden if a renderItem prop is provided in the parent list"},{key:"name",value:{name:"string",required:!0},description:"The primary name of the record (will display as text of the list item by default)"}]}}}],return:{name:"JSX.Element"}},required:!1},description:"Optional render prop to render each item in the list"},{key:"title",value:{name:"string",required:!0},description:"The title of the related model"}]}}],raw:"Array<RelatedRecordsList>"},description:"An array of lists of related records for different model types"},title:{required:!0,flowType:{name:"string"},description:"The text of the header."}}};var e$1y={exports:{}},r$15={},p$J;function v$H(){if(p$J)return r$15;p$J=1;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kt=React,Vt=Symbol.for("react.element"),Hr=Symbol.for("react.fragment"),Wr=Object.prototype.hasOwnProperty,Yr=Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zr={key:!0,ref:!0,__self:!0,__source:!0};function en(tn,rn,nn){var on,an={},$n=null,ln=null;nn!==void 0&&($n=""+nn),rn.key!==void 0&&($n=""+rn.key),rn.ref!==void 0&&(ln=rn.ref);for(on in rn)Wr.call(rn,on)&&!Zr.hasOwnProperty(on)&&(an[on]=rn[on]);if(tn&&tn.defaultProps)for(on in rn=tn.defaultProps,rn)an[on]===void 0&&(an[on]=rn[on]);return{$$typeof:Vt,type:tn,key:$n,ref:ln,props:an,_owner:Yr.current}}return r$15.Fragment=Hr,r$15.jsx=en,r$15.jsxs=en,r$15}e$1y.exports=v$H();var m$K=e$1y.exports;function e$1x(){return e$1x=Object.assign?Object.assign.bind():function(Kt){for(var Vt=1;Vt<arguments.length;Vt++){var Hr=arguments[Vt];for(var Wr in Hr)Object.prototype.hasOwnProperty.call(Hr,Wr)&&(Kt[Wr]=Hr[Wr])}return Kt},e$1x.apply(this,arguments)}function P$n(Kt,Vt=[]){let Hr=[];function Wr(Zr,en){const tn=reactExports.createContext(en),rn=Hr.length;Hr=[...Hr,en];function nn(an){const{scope:$n,children:ln,...Hn}=an,jn=($n==null?void 0:$n[Kt][rn])||tn,zn=reactExports.useMemo(()=>Hn,Object.values(Hn));return reactExports.createElement(jn.Provider,{value:zn},ln)}function on(an,$n){const ln=($n==null?void 0:$n[Kt][rn])||tn,Hn=reactExports.useContext(ln);if(Hn)return Hn;if(en!==void 0)return en;throw new Error(`\`${an}\` must be used within \`${Zr}\``)}return nn.displayName=Zr+"Provider",[nn,on]}const Yr=()=>{const Zr=Hr.map(en=>reactExports.createContext(en));return function(en){const tn=(en==null?void 0:en[Kt])||Zr;return reactExports.useMemo(()=>({[`__scope${Kt}`]:{...en,[Kt]:tn}}),[en,tn])}};return Yr.scopeName=Kt,[Wr,h$G(Yr,...Vt)]}function h$G(...Kt){const Vt=Kt[0];if(Kt.length===1)return Vt;const Hr=()=>{const Wr=Kt.map(Yr=>({useScope:Yr(),scopeName:Yr.scopeName}));return function(Yr){const Zr=Wr.reduce((en,{useScope:tn,scopeName:rn})=>{const nn=tn(Yr)[`__scope${rn}`];return{...en,...nn}},{});return reactExports.useMemo(()=>({[`__scope${Vt.scopeName}`]:Zr}),[Zr])}};return Hr.scopeName=Vt.scopeName,Hr}function c$R(Kt,Vt){typeof Kt=="function"?Kt(Vt):Kt!=null&&(Kt.current=Vt)}function t$w(...Kt){return Vt=>Kt.forEach(Hr=>c$R(Hr,Vt))}function d$I(...Kt){return reactExports.useCallback(t$w(...Kt),Kt)}const b$r=reactExports.forwardRef((Kt,Vt)=>{const{children:Hr,...Wr}=Kt,Yr=reactExports.Children.toArray(Hr),Zr=Yr.find(x$w);if(Zr){const en=Zr.props.children,tn=Yr.map(rn=>rn===Zr?reactExports.Children.count(en)>1?reactExports.Children.only(null):reactExports.isValidElement(en)?en.props.children:null:rn);return reactExports.createElement(p$I,e$1x({},Wr,{ref:Vt}),reactExports.isValidElement(en)?reactExports.cloneElement(en,void 0,tn):null)}return reactExports.createElement(p$I,e$1x({},Wr,{ref:Vt}),Hr)});b$r.displayName="Slot";const p$I=reactExports.forwardRef((Kt,Vt)=>{const{children:Hr,...Wr}=Kt;return reactExports.isValidElement(Hr)?reactExports.cloneElement(Hr,{...v$G(Wr,Hr.props),ref:Vt?t$w(Vt,Hr.ref):Hr.ref}):reactExports.Children.count(Hr)>1?reactExports.Children.only(null):null});p$I.displayName="SlotClone";const S$t=({children:Kt})=>reactExports.createElement(reactExports.Fragment,null,Kt);function x$w(Kt){return reactExports.isValidElement(Kt)&&Kt.type===S$t}function v$G(Kt,Vt){const Hr={...Vt};for(const Wr in Vt){const Yr=Kt[Wr],Zr=Vt[Wr];/^on[A-Z]/.test(Wr)?Yr&&Zr?Hr[Wr]=(...en)=>{Zr(...en),Yr(...en)}:Yr&&(Hr[Wr]=Yr):Wr==="style"?Hr[Wr]={...Yr,...Zr}:Wr==="className"&&(Hr[Wr]=[Yr,Zr].filter(Boolean).join(" "))}return{...Kt,...Hr}}function N$n(Kt){const Vt=Kt+"CollectionProvider",[Hr,Wr]=P$n(Vt),[Yr,Zr]=Hr(Vt,{collectionRef:{current:null},itemMap:new Map}),en=ln=>{const{scope:Hn,children:jn}=ln,zn=React.useRef(null),Wn=React.useRef(new Map).current;return React.createElement(Yr,{scope:Hn,itemMap:Wn,collectionRef:zn},jn)},tn=Kt+"CollectionSlot",rn=React.forwardRef((ln,Hn)=>{const{scope:jn,children:zn}=ln,Wn=Zr(tn,jn),ei=d$I(Hn,Wn.collectionRef);return React.createElement(b$r,{ref:ei},zn)}),nn=Kt+"CollectionItemSlot",on="data-radix-collection-item",an=React.forwardRef((ln,Hn)=>{const{scope:jn,children:zn,...Wn}=ln,ei=React.useRef(null),$i=d$I(Hn,ei),Mi=Zr(nn,jn);return React.useEffect(()=>(Mi.itemMap.set(ei,{ref:ei,...Wn}),()=>void Mi.itemMap.delete(ei))),React.createElement(b$r,{[on]:"",ref:$i},zn)});function $n(ln){const Hn=Zr(Kt+"CollectionConsumer",ln);return React.useCallback(()=>{const jn=Hn.collectionRef.current;if(!jn)return[];const zn=Array.from(jn.querySelectorAll(`[${on}]`));return Array.from(Hn.itemMap.values()).sort((Wn,ei)=>zn.indexOf(Wn.ref.current)-zn.indexOf(ei.ref.current))},[Hn.collectionRef,Hn.itemMap])}return[{Provider:en,Slot:rn,ItemSlot:an},$n,Wr]}function o$1f(Kt,Vt,{checkForDefaultPrevented:Hr=!0}={}){return function(Wr){if(Kt==null||Kt(Wr),Hr===!1||!Wr.defaultPrevented)return Vt==null?void 0:Vt(Wr)}}function o$1e(Kt){const Vt=reactExports.useRef(Kt);return reactExports.useEffect(()=>{Vt.current=Kt}),reactExports.useMemo(()=>(...Hr)=>{var Wr;return(Wr=Vt.current)===null||Wr===void 0?void 0:Wr.call(Vt,...Hr)},[])}function g$F({prop:Kt,defaultProp:Vt,onChange:Hr=()=>{}}){const[Wr,Yr]=h$F({defaultProp:Vt,onChange:Hr}),Zr=Kt!==void 0,en=Zr?Kt:Wr,tn=o$1e(Hr),rn=reactExports.useCallback(nn=>{if(Zr){const on=typeof nn=="function"?nn(Kt):nn;on!==Kt&&tn(on)}else Yr(nn)},[Zr,Kt,Yr,tn]);return[en,rn]}function h$F({defaultProp:Kt,onChange:Vt}){const Hr=reactExports.useState(Kt),[Wr]=Hr,Yr=reactExports.useRef(Wr),Zr=o$1e(Vt);return reactExports.useEffect(()=>{Yr.current!==Wr&&(Zr(Wr),Yr.current=Wr)},[Wr,Yr,Zr]),Hr}const l$B=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],E$l=l$B.reduce((Kt,Vt)=>{const Hr=reactExports.forwardRef((Wr,Yr)=>{const{asChild:Zr,...en}=Wr,tn=Zr?b$r:Vt;return reactExports.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),reactExports.createElement(tn,e$1x({},en,{ref:Yr}))});return Hr.displayName=`Primitive.${Vt}`,{...Kt,[Vt]:Hr}},{});function b$q(Kt,Vt){Kt&&reactDomExports.flushSync(()=>Kt.dispatchEvent(Vt))}const e$1w=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{};function I$e(Kt,Vt){return reactExports.useReducer((Hr,Wr)=>Vt[Hr][Wr]??Hr,Kt)}const P$m=Kt=>{const{present:Vt,children:Hr}=Kt,Wr=S$s(Vt),Yr=typeof Hr=="function"?Hr({present:Wr.isPresent}):reactExports.Children.only(Hr),Zr=d$I(Wr.ref,Yr.ref);return typeof Hr=="function"||Wr.isPresent?reactExports.cloneElement(Yr,{ref:Zr}):null};P$m.displayName="Presence";function S$s(Kt){const[Vt,Hr]=reactExports.useState(),Wr=reactExports.useRef({}),Yr=reactExports.useRef(Kt),Zr=reactExports.useRef("none"),en=Kt?"mounted":"unmounted",[tn,rn]=I$e(en,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const nn=d$H(Wr.current);Zr.current=tn==="mounted"?nn:"none"},[tn]),e$1w(()=>{const nn=Wr.current,on=Yr.current;if(on!==Kt){const an=Zr.current,$n=d$H(nn);Kt?rn("MOUNT"):$n==="none"||(nn==null?void 0:nn.display)==="none"?rn("UNMOUNT"):rn(on&&an!==$n?"ANIMATION_OUT":"UNMOUNT"),Yr.current=Kt}},[Kt,rn]),e$1w(()=>{if(Vt){const nn=an=>{const $n=d$H(Wr.current).includes(an.animationName);an.target===Vt&&$n&&reactDomExports.flushSync(()=>rn("ANIMATION_END"))},on=an=>{an.target===Vt&&(Zr.current=d$H(Wr.current))};return Vt.addEventListener("animationstart",on),Vt.addEventListener("animationcancel",nn),Vt.addEventListener("animationend",nn),()=>{Vt.removeEventListener("animationstart",on),Vt.removeEventListener("animationcancel",nn),Vt.removeEventListener("animationend",nn)}}else rn("ANIMATION_END")},[Vt,rn]),{isPresent:["mounted","unmountSuspended"].includes(tn),ref:reactExports.useCallback(nn=>{nn&&(Wr.current=getComputedStyle(nn)),Hr(nn)},[])}}function d$H(Kt){return(Kt==null?void 0:Kt.animationName)||"none"}const u$P=reactExports.useId||(()=>{});let r$14=0;function s$C(Kt){const[Vt,Hr]=reactExports.useState(u$P());return e$1w(()=>{Kt||Hr(Wr=>Wr??String(r$14++))},[Kt]),Kt||(Vt?`radix-${Vt}`:"")}const N$m="Collapsible",[B$m,oe$c]=P$n(N$m),[G$i,g$E]=B$m(N$m),H$l="CollapsibleTrigger",j$o=reactExports.forwardRef((Kt,Vt)=>{const{__scopeCollapsible:Hr,...Wr}=Kt,Yr=g$E(H$l,Hr);return reactExports.createElement(E$l.button,e$1x({type:"button","aria-controls":Yr.contentId,"aria-expanded":Yr.open||!1,"data-state":h$E(Yr.open),"data-disabled":Yr.disabled?"":void 0,disabled:Yr.disabled},Wr,{ref:Vt,onClick:o$1f(Kt.onClick,Yr.onOpenToggle)}))}),O$t="CollapsibleContent",z$h=reactExports.forwardRef((Kt,Vt)=>{const{forceMount:Hr,...Wr}=Kt,Yr=g$E(O$t,Kt.__scopeCollapsible);return reactExports.createElement(P$m,{present:Hr||Yr.open},({present:Zr})=>reactExports.createElement(J$e,e$1x({},Wr,{ref:Vt,present:Zr})))}),J$e=reactExports.forwardRef((Kt,Vt)=>{const{__scopeCollapsible:Hr,present:Wr,children:Yr,...Zr}=Kt,en=g$E(O$t,Hr),[tn,rn]=reactExports.useState(Wr),nn=reactExports.useRef(null),on=d$I(Vt,nn),an=reactExports.useRef(0),$n=an.current,ln=reactExports.useRef(0),Hn=ln.current,jn=en.open||tn,zn=reactExports.useRef(jn),Wn=reactExports.useRef();return reactExports.useEffect(()=>{const ei=requestAnimationFrame(()=>zn.current=!1);return()=>cancelAnimationFrame(ei)},[]),e$1w(()=>{const ei=nn.current;if(ei){Wn.current=Wn.current||{transitionDuration:ei.style.transitionDuration,animationName:ei.style.animationName},ei.style.transitionDuration="0s",ei.style.animationName="none";const $i=ei.getBoundingClientRect();an.current=$i.height,ln.current=$i.width,zn.current||(ei.style.transitionDuration=Wn.current.transitionDuration,ei.style.animationName=Wn.current.animationName),rn(Wr)}},[en.open,Wr]),reactExports.createElement(E$l.div,e$1x({"data-state":h$E(en.open),"data-disabled":en.disabled?"":void 0,id:en.contentId,hidden:!jn},Zr,{ref:on,style:{"--radix-collapsible-content-height":$n?`${$n}px`:void 0,"--radix-collapsible-content-width":Hn?`${Hn}px`:void 0,...Kt.style}}),jn&&Yr)});function h$E(Kt){return Kt?"open":"closed"}const ae$a=j$o,se$b=z$h,r$13=reactExports.createContext(void 0);function i$L(Kt){const Vt=reactExports.useContext(r$13);return Kt||Vt||"ltr"}const $$8="Accordion",ee$8=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[S$r,oe$b,te$8]=N$n($$8),[A$i,he$9]=P$n($$8,[te$8,oe$c]);oe$c();const H$k=React.forwardRef((Kt,Vt)=>{const{type:Hr,...Wr}=Kt,Yr=Wr,Zr=Wr;return React.createElement(S$r.Provider,{scope:Kt.__scopeAccordion},Hr==="multiple"?React.createElement(ae$9,e$1x({},Zr,{ref:Vt})):React.createElement(ne$a,e$1x({},Yr,{ref:Vt})))});H$k.propTypes={type(Kt){const Vt=Kt.value||Kt.defaultValue;return Kt.type&&!["single","multiple"].includes(Kt.type)?new Error("Invalid prop `type` supplied to `Accordion`. Expected one of `single | multiple`."):Kt.type==="multiple"&&typeof Vt=="string"?new Error("Invalid prop `type` supplied to `Accordion`. Expected `single` when `defaultValue` or `value` is type `string`."):Kt.type==="single"&&Array.isArray(Vt)?new Error("Invalid prop `type` supplied to `Accordion`. Expected `multiple` when `defaultValue` or `value` is type `string[]`."):null}};const[K$c,re$8]=A$i($$8),[L$n,ce$a]=A$i($$8,{collapsible:!1}),ne$a=React.forwardRef((Kt,Vt)=>{const{value:Hr,defaultValue:Wr,onValueChange:Yr=()=>{},collapsible:Zr=!1,...en}=Kt,[tn,rn]=g$F({prop:Hr,defaultProp:Wr,onChange:Yr});return React.createElement(K$c,{scope:Kt.__scopeAccordion,value:tn?[tn]:[],onItemOpen:rn,onItemClose:React.useCallback(()=>Zr&&rn(""),[Zr,rn])},React.createElement(L$n,{scope:Kt.__scopeAccordion,collapsible:Zr},React.createElement(z$g,e$1x({},en,{ref:Vt}))))}),ae$9=React.forwardRef((Kt,Vt)=>{const{value:Hr,defaultValue:Wr,onValueChange:Yr=()=>{},...Zr}=Kt,[en=[],tn]=g$F({prop:Hr,defaultProp:Wr,onChange:Yr}),rn=React.useCallback(on=>tn((an=[])=>[...an,on]),[tn]),nn=React.useCallback(on=>tn((an=[])=>an.filter($n=>$n!==on)),[tn]);return React.createElement(K$c,{scope:Kt.__scopeAccordion,value:en,onItemOpen:rn,onItemClose:nn},React.createElement(L$n,{scope:Kt.__scopeAccordion,collapsible:!0},React.createElement(z$g,e$1x({},Zr,{ref:Vt}))))}),[ie$6,x$v]=A$i($$8),z$g=React.forwardRef((Kt,Vt)=>{const{__scopeAccordion:Hr,disabled:Wr,dir:Yr,orientation:Zr="vertical",...en}=Kt,tn=React.useRef(null),rn=d$I(tn,Vt),nn=oe$b(Hr),on=i$L(Yr)==="ltr",an=o$1f(Kt.onKeyDown,$n=>{var ln;if(!ee$8.includes($n.key))return;const Hn=$n.target,jn=nn().filter($s=>{var Ws;return!((Ws=$s.ref.current)!==null&&Ws!==void 0&&Ws.disabled)}),zn=jn.findIndex($s=>$s.ref.current===Hn),Wn=jn.length;if(zn===-1)return;$n.preventDefault();let ei=zn;const $i=0,Mi=Wn-1,Ni=()=>{ei=zn+1,ei>Mi&&(ei=$i)},Ts=()=>{ei=zn-1,ei<$i&&(ei=Mi)};switch($n.key){case"Home":ei=$i;break;case"End":ei=Mi;break;case"ArrowRight":Zr==="horizontal"&&(on?Ni():Ts());break;case"ArrowDown":Zr==="vertical"&&Ni();break;case"ArrowLeft":Zr==="horizontal"&&(on?Ts():Ni());break;case"ArrowUp":Zr==="vertical"&&Ts();break}const ps=ei%Wn;(ln=jn[ps].ref.current)===null||ln===void 0||ln.focus()});return React.createElement(ie$6,{scope:Hr,disabled:Wr,direction:Yr,orientation:Zr},React.createElement(S$r.Slot,{scope:Hr},React.createElement(E$l.div,e$1x({},en,{"data-orientation":Zr,ref:rn,onKeyDown:Wr?void 0:an}))))}),P$l="AccordionItem";A$i(P$l);function a$1h(Kt){var Vt,Hr,Wr="";if(typeof Kt=="string"||typeof Kt=="number")Wr+=Kt;else if(typeof Kt=="object")if(Array.isArray(Kt)){var Yr=Kt.length;for(Vt=0;Vt<Yr;Vt++)Kt[Vt]&&(Hr=a$1h(Kt[Vt]))&&(Wr&&(Wr+=" "),Wr+=Hr)}else for(Hr in Kt)Kt[Hr]&&(Wr&&(Wr+=" "),Wr+=Hr);return Wr}function i$K(){for(var Kt,Vt,Hr=0,Wr="",Yr=arguments.length;Hr<Yr;Hr++)(Kt=arguments[Hr])&&(Vt=a$1h(Kt))&&(Wr&&(Wr+=" "),Wr+=Vt);return Wr}var o$1d="1.13.6",a$1g=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},r$12=Array.prototype,e$1v=Object.prototype,i$J=typeof Symbol<"u"?Symbol.prototype:null,n$A=r$12.push,s$B=r$12.slice,l$A=e$1v.toString,p$H=e$1v.hasOwnProperty,t$v=typeof ArrayBuffer<"u",y$p=typeof DataView<"u",f$U=Array.isArray,u$O=Object.keys,b$p=Object.create,v$F=t$v&&ArrayBuffer.isView,g$D=isNaN,A$h=isFinite,c$Q=!{toString:null}.propertyIsEnumerable("toString"),O$s=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],S$q=Math.pow(2,53)-1;function s$A(Kt,Vt){return Vt=Vt==null?Kt.length-1:+Vt,function(){for(var Hr=Math.max(arguments.length-Vt,0),Wr=Array(Hr),Yr=0;Yr<Hr;Yr++)Wr[Yr]=arguments[Yr+Vt];switch(Vt){case 0:return Kt.call(this,Wr);case 1:return Kt.call(this,arguments[0],Wr);case 2:return Kt.call(this,arguments[0],arguments[1],Wr)}var Zr=Array(Vt+1);for(Yr=0;Yr<Vt;Yr++)Zr[Yr]=arguments[Yr];return Zr[Vt]=Wr,Kt.apply(this,Zr)}}function n$z(Kt){var Vt=typeof Kt;return Vt==="function"||Vt==="object"&&!!Kt}function u$N(Kt){return Kt===null}function n$y(Kt){return Kt===void 0}function r$11(Kt){return Kt===!0||Kt===!1||l$A.call(Kt)==="[object Boolean]"}function n$x(Kt){return!!(Kt&&Kt.nodeType===1)}function a$1f(Kt){var Vt="[object "+Kt+"]";return function(Hr){return l$A.call(Hr)===Vt}}const e$1u=a$1f("String"),t$u=a$1f("Number"),a$1e=a$1f("Date"),o$1c=a$1f("RegExp"),t$t=a$1f("Error"),e$1t=a$1f("Symbol"),f$T=a$1f("ArrayBuffer");var o$1b=a$1f("Function"),i$I=a$1g.document&&a$1g.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof i$I!="function"&&(o$1b=function(Kt){return typeof Kt=="function"||!1});const c$P=o$1b,a$1d=a$1f("Object");var p$G=y$p&&a$1d(new DataView(new ArrayBuffer(8))),i$H=typeof Map<"u"&&a$1d(new Map),f$S=a$1f("DataView");function o$1a(Kt){return Kt!=null&&c$P(Kt.getInt8)&&f$T(Kt.buffer)}const g$C=p$G?o$1a:f$S,e$1s=f$U||a$1f("Array");function n$w(Kt,Vt){return Kt!=null&&p$H.call(Kt,Vt)}var t$s=a$1f("Arguments");(function(){t$s(arguments)||(t$s=function(Kt){return n$w(Kt,"callee")})})();const o$19=t$s;function s$z(Kt){return!e$1t(Kt)&&A$h(Kt)&&!isNaN(parseFloat(Kt))}function N$l(Kt){return t$u(Kt)&&g$D(Kt)}function t$r(Kt){return function(){return Kt}}function u$M(Kt){return function(Vt){var Hr=Kt(Vt);return typeof Hr=="number"&&Hr>=0&&Hr<=S$q}}function t$q(Kt){return function(Vt){return Vt==null?void 0:Vt[Kt]}}const o$18=t$q("byteLength"),f$R=u$M(o$18);var s$y=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function f$Q(Kt){return v$F?v$F(Kt)&&!g$C(Kt):f$R(Kt)&&s$y.test(l$A.call(Kt))}const u$L=t$v?f$Q:t$r(!1),o$17=t$q("length");function e$1r(Kt){for(var Vt={},Hr=Kt.length,Wr=0;Wr<Hr;++Wr)Vt[Kt[Wr]]=!0;return{contains:function(Yr){return Vt[Yr]===!0},push:function(Yr){return Vt[Yr]=!0,Kt.push(Yr)}}}function l$z(Kt,Vt){Vt=e$1r(Vt);var Hr=O$s.length,Wr=Kt.constructor,Yr=c$P(Wr)&&Wr.prototype||e$1v,Zr="constructor";for(n$w(Kt,Zr)&&!Vt.contains(Zr)&&Vt.push(Zr);Hr--;)Zr=O$s[Hr],Zr in Kt&&Kt[Zr]!==Yr[Zr]&&!Vt.contains(Zr)&&Vt.push(Zr)}function c$O(Kt){if(!n$z(Kt))return[];if(u$O)return u$O(Kt);var Vt=[];for(var Hr in Kt)n$w(Kt,Hr)&&Vt.push(Hr);return c$Q&&l$z(Kt,Vt),Vt}function a$1c(Kt){if(Kt==null)return!0;var Vt=o$17(Kt);return typeof Vt=="number"&&(e$1s(Kt)||e$1u(Kt)||o$19(Kt))?Vt===0:o$17(c$O(Kt))===0}function i$G(Kt,Vt){var Hr=c$O(Vt),Wr=Hr.length;if(Kt==null)return!Wr;for(var Yr=Object(Kt),Zr=0;Zr<Wr;Zr++){var en=Hr[Zr];if(Vt[en]!==Yr[en]||!(en in Yr))return!1}return!0}function t$p(Kt){if(Kt instanceof t$p)return Kt;if(!(this instanceof t$p))return new t$p(Kt);this._wrapped=Kt}t$p.VERSION=o$1d;t$p.prototype.value=function(){return this._wrapped};t$p.prototype.valueOf=t$p.prototype.toJSON=t$p.prototype.value;t$p.prototype.toString=function(){return String(this._wrapped)};function i$F(Kt){return new Uint8Array(Kt.buffer||Kt,Kt.byteOffset||0,o$18(Kt))}var B$l="[object DataView]";function c$N(Kt,Vt,Hr,Wr){if(Kt===Vt)return Kt!==0||1/Kt===1/Vt;if(Kt==null||Vt==null)return!1;if(Kt!==Kt)return Vt!==Vt;var Yr=typeof Kt;return Yr!=="function"&&Yr!=="object"&&typeof Vt!="object"?!1:O$r(Kt,Vt,Hr,Wr)}function O$r(Kt,Vt,Hr,Wr){Kt instanceof t$p&&(Kt=Kt._wrapped),Vt instanceof t$p&&(Vt=Vt._wrapped);var Yr=l$A.call(Kt);if(Yr!==l$A.call(Vt))return!1;if(p$G&&Yr=="[object Object]"&&g$C(Kt)){if(!g$C(Vt))return!1;Yr=B$l}switch(Yr){case"[object RegExp]":case"[object String]":return""+Kt==""+Vt;case"[object Number]":return+Kt!=+Kt?+Vt!=+Vt:+Kt==0?1/+Kt===1/Vt:+Kt==+Vt;case"[object Date]":case"[object Boolean]":return+Kt==+Vt;case"[object Symbol]":return i$J.valueOf.call(Kt)===i$J.valueOf.call(Vt);case"[object ArrayBuffer]":case B$l:return O$r(i$F(Kt),i$F(Vt),Hr,Wr)}var Zr=Yr==="[object Array]";if(!Zr&&u$L(Kt)){var en=o$18(Kt);if(en!==o$18(Vt))return!1;if(Kt.buffer===Vt.buffer&&Kt.byteOffset===Vt.byteOffset)return!0;Zr=!0}if(!Zr){if(typeof Kt!="object"||typeof Vt!="object")return!1;var tn=Kt.constructor,rn=Vt.constructor;if(tn!==rn&&!(c$P(tn)&&tn instanceof tn&&c$P(rn)&&rn instanceof rn)&&"constructor"in Kt&&"constructor"in Vt)return!1}Hr=Hr||[],Wr=Wr||[];for(var nn=Hr.length;nn--;)if(Hr[nn]===Kt)return Wr[nn]===Vt;if(Hr.push(Kt),Wr.push(Vt),Zr){if(nn=Kt.length,nn!==Vt.length)return!1;for(;nn--;)if(!c$N(Kt[nn],Vt[nn],Hr,Wr))return!1}else{var on=c$O(Kt),an;if(nn=on.length,c$O(Vt).length!==nn)return!1;for(;nn--;)if(an=on[nn],!(n$w(Vt,an)&&c$N(Kt[an],Vt[an],Hr,Wr)))return!1}return Hr.pop(),Wr.pop(),!0}function z$f(Kt,Vt){return c$N(Kt,Vt)}function s$x(Kt){if(!n$z(Kt))return[];var Vt=[];for(var Hr in Kt)Vt.push(Hr);return c$Q&&l$z(Kt,Vt),Vt}function v$E(Kt){var Vt=o$17(Kt);return function(Hr){if(Hr==null)return!1;var Wr=s$x(Hr);if(o$17(Wr))return!1;for(var Yr=0;Yr<Vt;Yr++)if(!c$P(Hr[Kt[Yr]]))return!1;return Kt!==u$K||!c$P(Hr[t$o])}}var t$o="forEach",c$M="has",n$v=["clear","delete"],i$E=["get",c$M,"set"],d$G=n$v.concat(t$o,i$E),u$K=n$v.concat(i$E),M$s=["add"].concat(n$v,t$o,c$M);const a$1b=i$H?v$E(d$G):a$1f("Map"),m$J=i$H?v$E(u$K):a$1f("WeakMap"),f$P=i$H?v$E(M$s):a$1f("Set"),a$1a=a$1f("WeakSet");function s$w(Kt){for(var Vt=c$O(Kt),Hr=Vt.length,Wr=Array(Hr),Yr=0;Yr<Hr;Yr++)Wr[Yr]=Kt[Vt[Yr]];return Wr}function o$16(Kt){for(var Vt=c$O(Kt),Hr=Vt.length,Wr=Array(Hr),Yr=0;Yr<Hr;Yr++)Wr[Yr]=[Vt[Yr],Kt[Vt[Yr]]];return Wr}function s$v(Kt){for(var Vt={},Hr=c$O(Kt),Wr=0,Yr=Hr.length;Wr<Yr;Wr++)Vt[Kt[Hr[Wr]]]=Hr[Wr];return Vt}function f$O(Kt){var Vt=[];for(var Hr in Kt)c$P(Kt[Hr])&&Vt.push(Hr);return Vt.sort()}function c$L(Kt,Vt){return function(Hr){var Wr=arguments.length;if(Vt&&(Hr=Object(Hr)),Wr<2||Hr==null)return Hr;for(var Yr=1;Yr<Wr;Yr++)for(var Zr=arguments[Yr],en=Kt(Zr),tn=en.length,rn=0;rn<tn;rn++){var nn=en[rn];(!Vt||Hr[nn]===void 0)&&(Hr[nn]=Zr[nn])}return Hr}}const s$u=c$L(s$x),s$t=c$L(c$O),s$s=c$L(s$x,!0);function u$J(){return function(){}}function f$N(Kt){if(!n$z(Kt))return{};if(b$p)return b$p(Kt);var Vt=u$J();Vt.prototype=Kt;var Hr=new Vt;return Vt.prototype=null,Hr}function i$D(Kt,Vt){var Hr=f$N(Kt);return Vt&&s$t(Hr,Vt),Hr}function o$15(Kt){return n$z(Kt)?e$1s(Kt)?Kt.slice():s$u({},Kt):Kt}function e$1q(Kt,Vt){return Vt(Kt),Kt}function f$M(Kt){return e$1s(Kt)?Kt:[Kt]}t$p.toPath=f$M;function e$1p(Kt){return t$p.toPath(Kt)}function l$y(Kt,Vt){for(var Hr=Vt.length,Wr=0;Wr<Hr;Wr++){if(Kt==null)return;Kt=Kt[Vt[Wr]]}return Hr?Kt:void 0}function d$F(Kt,Vt,Hr){var Wr=l$y(Kt,e$1p(Vt));return n$y(Wr)?Hr:Wr}function s$r(Kt,Vt){Vt=e$1p(Vt);for(var Hr=Vt.length,Wr=0;Wr<Hr;Wr++){var Yr=Vt[Wr];if(!n$w(Kt,Yr))return!1;Kt=Kt[Yr]}return!!Hr}function e$1o(Kt){return Kt}function i$C(Kt){return Kt=s$t({},Kt),function(Vt){return i$G(Vt,Kt)}}function u$I(Kt){return Kt=e$1p(Kt),function(Vt){return l$y(Vt,Kt)}}function a$19(Kt,Vt,Hr){if(Vt===void 0)return Kt;switch(Hr??3){case 1:return function(Wr){return Kt.call(Vt,Wr)};case 3:return function(Wr,Yr,Zr){return Kt.call(Vt,Wr,Yr,Zr)};case 4:return function(Wr,Yr,Zr,en){return Kt.call(Vt,Wr,Yr,Zr,en)}}return function(){return Kt.apply(Vt,arguments)}}function x$u(Kt,Vt,Hr){return Kt==null?e$1o:c$P(Kt)?a$19(Kt,Vt,Hr):n$z(Kt)&&!e$1s(Kt)?i$C(Kt):u$I(Kt)}function a$18(Kt,Vt){return x$u(Kt,Vt,1/0)}t$p.iteratee=a$18;function n$u(Kt,Vt,Hr){return t$p.iteratee!==a$18?t$p.iteratee(Kt,Vt):x$u(Kt,Vt,Hr)}function k$m(Kt,Vt,Hr){Vt=n$u(Vt,Hr);for(var Wr=c$O(Kt),Yr=Wr.length,Zr={},en=0;en<Yr;en++){var tn=Wr[en];Zr[tn]=Vt(Kt[tn],tn,Kt)}return Zr}function o$14(){}function u$H(Kt){return Kt==null?o$14:function(Vt){return d$F(Kt,Vt)}}function c$K(Kt,Vt,Hr){var Wr=Array(Math.max(0,Kt));Vt=a$19(Vt,Hr,1);for(var Yr=0;Yr<Kt;Yr++)Wr[Yr]=Vt(Yr);return Wr}function t$n(Kt,Vt){return Vt==null&&(Vt=Kt,Kt=0),Kt+Math.floor(Math.random()*(Vt-Kt+1))}const e$1n=Date.now||function(){return new Date().getTime()};function n$t(Kt){var Vt=function(Zr){return Kt[Zr]},Hr="(?:"+c$O(Kt).join("|")+")",Wr=RegExp(Hr),Yr=RegExp(Hr,"g");return function(Zr){return Zr=Zr==null?"":""+Zr,Wr.test(Zr)?Zr.replace(Yr,Vt):Zr}}const t$m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},o$13=n$t(t$m),r$10=s$v(t$m),o$12=n$t(r$10),a$17=t$p.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var u$G=/(.)^/,b$o={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},j$n=/\\|'|\r|\n|\u2028|\u2029/g;function w$s(Kt){return"\\"+b$o[Kt]}var d$E=/^\s*(\w|\$)+\s*$/;function $$7(Kt,Vt,Hr){!Vt&&Hr&&(Vt=Hr),Vt=s$s({},Vt,t$p.templateSettings);var Wr=RegExp([(Vt.escape||u$G).source,(Vt.interpolate||u$G).source,(Vt.evaluate||u$G).source].join("|")+"|$","g"),Yr=0,Zr="__p+='";Kt.replace(Wr,function(nn,on,an,$n,ln){return Zr+=Kt.slice(Yr,ln).replace(j$n,w$s),Yr=ln+nn.length,on?Zr+=`'+
((__t=(`+on+`))==null?'':_.escape(__t))+
'`:an?Zr+=`'+
((__t=(`+an+`))==null?'':__t)+
'`:$n&&(Zr+=`';
`+$n+`
__p+='`),nn}),Zr+=`';
`;var en=Vt.variable;if(en){if(!d$E.test(en))throw new Error("variable is not a bare identifier: "+en)}else Zr=`with(obj||{}){
`+Zr+`}
`,en="obj";Zr=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+Zr+`return __p;
`;var tn;try{tn=new Function(en,"_",Zr)}catch(nn){throw nn.source=Zr,nn}var rn=function(nn){return tn.call(this,nn,t$p)};return rn.source="function("+en+`){
`+Zr+"}",rn}function d$D(Kt,Vt,Hr){Vt=e$1p(Vt);var Wr=Vt.length;if(!Wr)return c$P(Hr)?Hr.call(Kt):Hr;for(var Yr=0;Yr<Wr;Yr++){var Zr=Kt==null?void 0:Kt[Vt[Yr]];Zr===void 0&&(Zr=Hr,Yr=Wr),Kt=c$P(Zr)?Zr.call(Kt):Zr}return Kt}var r$$=0;function t$l(Kt){var Vt=++r$$+"";return Kt?Kt+Vt:Vt}function e$1m(Kt){var Vt=t$p(Kt);return Vt._chain=!0,Vt}function u$F(Kt,Vt,Hr,Wr,Yr){if(!(Wr instanceof Vt))return Kt.apply(Hr,Yr);var Zr=f$N(Kt.prototype),en=Kt.apply(Zr,Yr);return n$z(en)?en:Zr}var l$x=s$A(function(Kt,Vt){var Hr=l$x.placeholder,Wr=function(){for(var Yr=0,Zr=Vt.length,en=Array(Zr),tn=0;tn<Zr;tn++)en[tn]=Vt[tn]===Hr?arguments[Yr++]:Vt[tn];for(;Yr<arguments.length;)en.push(arguments[Yr++]);return u$F(Kt,Wr,this,this,en)};return Wr});l$x.placeholder=t$p;const a$16=s$A(function(Kt,Vt,Hr){if(!c$P(Kt))throw new TypeError("Bind must be called on a function");var Wr=s$A(function(Yr){return u$F(Kt,Wr,Vt,this,Hr.concat(Yr))});return Wr}),i$B=u$M(o$17);function x$t(Kt,Vt,Hr,Wr){if(Wr=Wr||[],!Vt&&Vt!==0)Vt=1/0;else if(Vt<=0)return Wr.concat(Kt);for(var Yr=Wr.length,Zr=0,en=o$17(Kt);Zr<en;Zr++){var tn=Kt[Zr];if(i$B(tn)&&(e$1s(tn)||o$19(tn)))if(Vt>1)x$t(tn,Vt-1,Hr,Wr),Yr=Wr.length;else for(var rn=0,nn=tn.length;rn<nn;)Wr[Yr++]=tn[rn++];else Hr||(Wr[Yr++]=tn)}return Wr}const s$q=s$A(function(Kt,Vt){Vt=x$t(Vt,!1,!1);var Hr=Vt.length;if(Hr<1)throw new Error("bindAll must be passed function names");for(;Hr--;){var Wr=Vt[Hr];Kt[Wr]=a$16(Kt[Wr],Kt)}return Kt});function o$11(Kt,Vt){var Hr=function(Wr){var Yr=Hr.cache,Zr=""+(Vt?Vt.apply(this,arguments):Wr);return n$w(Yr,Zr)||(Yr[Zr]=Kt.apply(this,arguments)),Yr[Zr]};return Hr.cache={},Hr}const o$10=s$A(function(Kt,Vt,Hr){return setTimeout(function(){return Kt.apply(null,Hr)},Vt)}),f$L=l$x(o$10,t$p,1);function g$B(Kt,Vt,Hr){var Wr,Yr,Zr,en,tn=0;Hr||(Hr={});var rn=function(){tn=Hr.leading===!1?0:e$1n(),Wr=null,en=Kt.apply(Yr,Zr),Wr||(Yr=Zr=null)},nn=function(){var on=e$1n();!tn&&Hr.leading===!1&&(tn=on);var an=Vt-(on-tn);return Yr=this,Zr=arguments,an<=0||an>Vt?(Wr&&(clearTimeout(Wr),Wr=null),tn=on,en=Kt.apply(Yr,Zr),Wr||(Yr=Zr=null)):!Wr&&Hr.trailing!==!1&&(Wr=setTimeout(rn,an)),en};return nn.cancel=function(){clearTimeout(Wr),tn=0,Wr=Yr=Zr=null},nn}function d$C(Kt,Vt,Hr){var Wr,Yr,Zr,en,tn,rn=function(){var on=e$1n()-Yr;Vt>on?Wr=setTimeout(rn,Vt-on):(Wr=null,Hr||(en=Kt.apply(tn,Zr)),Wr||(Zr=tn=null))},nn=s$A(function(on){return tn=this,Zr=on,Yr=e$1n(),Wr||(Wr=setTimeout(rn,Vt),Hr&&(en=Kt.apply(tn,Zr))),en});return nn.cancel=function(){clearTimeout(Wr),Wr=Zr=tn=null},nn}function p$F(Kt,Vt){return l$x(Vt,Kt)}function n$s(Kt){return function(){return!Kt.apply(this,arguments)}}function n$r(){var Kt=arguments,Vt=Kt.length-1;return function(){for(var Hr=Vt,Wr=Kt[Vt].apply(this,arguments);Hr--;)Wr=Kt[Hr].call(this,Wr);return Wr}}function r$_(Kt,Vt){return function(){if(--Kt<1)return Vt.apply(this,arguments)}}function t$k(Kt,Vt){var Hr;return function(){return--Kt>0&&(Hr=Vt.apply(this,arguments)),Kt<=1&&(Vt=null),Hr}}const a$15=l$x(t$k,2);function a$14(Kt,Vt,Hr){Vt=n$u(Vt,Hr);for(var Wr=c$O(Kt),Yr,Zr=0,en=Wr.length;Zr<en;Zr++)if(Yr=Wr[Zr],Vt(Kt[Yr],Yr,Kt))return Yr}function g$A(Kt){return function(Vt,Hr,Wr){Hr=n$u(Hr,Wr);for(var Yr=o$17(Vt),Zr=Kt>0?0:Yr-1;Zr>=0&&Zr<Yr;Zr+=Kt)if(Hr(Vt[Zr],Zr,Vt))return Zr;return-1}}const r$Z=g$A(1),d$B=g$A(-1);function a$13(Kt,Vt,Hr,Wr){Hr=n$u(Hr,Wr,1);for(var Yr=Hr(Vt),Zr=0,en=o$17(Kt);Zr<en;){var tn=Math.floor((Zr+en)/2);Hr(Kt[tn])<Yr?Zr=tn+1:en=tn}return Zr}function M$r(Kt,Vt,Hr){return function(Wr,Yr,Zr){var en=0,tn=o$17(Wr);if(typeof Zr=="number")Kt>0?en=Zr>=0?Zr:Math.max(Zr+tn,en):tn=Zr>=0?Math.min(Zr+1,tn):Zr+tn+1;else if(Hr&&Zr&&tn)return Zr=Hr(Wr,Yr),Wr[Zr]===Yr?Zr:-1;if(Yr!==Yr)return Zr=Vt(s$B.call(Wr,en,tn),N$l),Zr>=0?Zr+en:-1;for(Zr=Kt>0?en:tn-1;Zr>=0&&Zr<tn;Zr+=Kt)if(Wr[Zr]===Yr)return Zr;return-1}}const f$K=M$r(1,r$Z,a$13),n$q=M$r(-1,d$B);function y$o(Kt,Vt,Hr){var Wr=i$B(Kt)?r$Z:a$14,Yr=Wr(Kt,Vt,Hr);if(Yr!==void 0&&Yr!==-1)return Kt[Yr]}function m$I(Kt,Vt){return y$o(Kt,i$C(Vt))}function u$E(Kt,Vt,Hr){Vt=a$19(Vt,Hr);var Wr,Yr;if(i$B(Kt))for(Wr=0,Yr=Kt.length;Wr<Yr;Wr++)Vt(Kt[Wr],Wr,Kt);else{var Zr=c$O(Kt);for(Wr=0,Yr=Zr.length;Wr<Yr;Wr++)Vt(Kt[Zr[Wr]],Zr[Wr],Kt)}return Kt}function h$D(Kt,Vt,Hr){Vt=n$u(Vt,Hr);for(var Wr=!i$B(Kt)&&c$O(Kt),Yr=(Wr||Kt).length,Zr=Array(Yr),en=0;en<Yr;en++){var tn=Wr?Wr[en]:en;Zr[en]=Vt(Kt[tn],tn,Kt)}return Zr}function k$l(Kt){var Vt=function(Hr,Wr,Yr,Zr){var en=!i$B(Hr)&&c$O(Hr),tn=(en||Hr).length,rn=Kt>0?0:tn-1;for(Zr||(Yr=Hr[en?en[rn]:rn],rn+=Kt);rn>=0&&rn<tn;rn+=Kt){var nn=en?en[rn]:rn;Yr=Wr(Yr,Hr[nn],nn,Hr)}return Yr};return function(Hr,Wr,Yr,Zr){var en=arguments.length>=3;return Vt(Hr,a$19(Wr,Zr,4),Yr,en)}}const t$j=k$l(1),r$Y=k$l(-1);function l$w(Kt,Vt,Hr){var Wr=[];return Vt=n$u(Vt,Hr),u$E(Kt,function(Yr,Zr,en){Vt(Yr,Zr,en)&&Wr.push(Yr)}),Wr}function a$12(Kt,Vt,Hr){return l$w(Kt,n$s(n$u(Vt)),Hr)}function g$z(Kt,Vt,Hr){Vt=n$u(Vt,Hr);for(var Wr=!i$B(Kt)&&c$O(Kt),Yr=(Wr||Kt).length,Zr=0;Zr<Yr;Zr++){var en=Wr?Wr[Zr]:Zr;if(!Vt(Kt[en],en,Kt))return!1}return!0}function h$C(Kt,Vt,Hr){Vt=n$u(Vt,Hr);for(var Wr=!i$B(Kt)&&c$O(Kt),Yr=(Wr||Kt).length,Zr=0;Zr<Yr;Zr++){var en=Wr?Wr[Zr]:Zr;if(Vt(Kt[en],en,Kt))return!0}return!1}function u$D(Kt,Vt,Hr,Wr){return i$B(Kt)||(Kt=s$w(Kt)),(typeof Hr!="number"||Wr)&&(Hr=0),f$K(Kt,Vt,Hr)>=0}const k$k=s$A(function(Kt,Vt,Hr){var Wr,Yr;return c$P(Vt)?Yr=Vt:(Vt=e$1p(Vt),Wr=Vt.slice(0,-1),Vt=Vt[Vt.length-1]),h$D(Kt,function(Zr){var en=Yr;if(!en){if(Wr&&Wr.length&&(Zr=l$y(Zr,Wr)),Zr==null)return;en=Zr[Vt]}return en==null?en:en.apply(Zr,Hr)})});function f$J(Kt,Vt){return h$D(Kt,u$I(Vt))}function i$A(Kt,Vt){return l$w(Kt,i$C(Vt))}function g$y(Kt,Vt,Hr){var Wr=-1/0,Yr=-1/0,Zr,en;if(Vt==null||typeof Vt=="number"&&typeof Kt[0]!="object"&&Kt!=null){Kt=i$B(Kt)?Kt:s$w(Kt);for(var tn=0,rn=Kt.length;tn<rn;tn++)Zr=Kt[tn],Zr!=null&&Zr>Wr&&(Wr=Zr)}else Vt=n$u(Vt,Hr),u$E(Kt,function(nn,on,an){en=Vt(nn,on,an),(en>Yr||en===-1/0&&Wr===-1/0)&&(Wr=nn,Yr=en)});return Wr}function k$j(Kt,Vt,Hr){var Wr=1/0,Yr=1/0,Zr,en;if(Vt==null||typeof Vt=="number"&&typeof Kt[0]!="object"&&Kt!=null){Kt=i$B(Kt)?Kt:s$w(Kt);for(var tn=0,rn=Kt.length;tn<rn;tn++)Zr=Kt[tn],Zr!=null&&Zr<Wr&&(Wr=Zr)}else Vt=n$u(Vt,Hr),u$E(Kt,function(nn,on,an){en=Vt(nn,on,an),(en<Yr||en===1/0&&Wr===1/0)&&(Wr=nn,Yr=en)});return Wr}var a$11=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function A$g(Kt){return Kt?e$1s(Kt)?s$B.call(Kt):e$1u(Kt)?Kt.match(a$11):i$B(Kt)?h$D(Kt,e$1o):s$w(Kt):[]}function M$q(Kt,Vt,Hr){if(Vt==null||Hr)return i$B(Kt)||(Kt=s$w(Kt)),Kt[t$n(Kt.length-1)];var Wr=A$g(Kt),Yr=o$17(Wr);Vt=Math.max(Math.min(Vt,Yr),0);for(var Zr=Yr-1,en=0;en<Vt;en++){var tn=t$n(en,Zr),rn=Wr[en];Wr[en]=Wr[tn],Wr[tn]=rn}return Wr.slice(0,Vt)}function n$p(Kt){return M$q(Kt,1/0)}function x$s(Kt,Vt,Hr){var Wr=0;return Vt=n$u(Vt,Hr),f$J(h$D(Kt,function(Yr,Zr,en){return{value:Yr,index:Wr++,criteria:Vt(Yr,Zr,en)}}).sort(function(Yr,Zr){var en=Yr.criteria,tn=Zr.criteria;if(en!==tn){if(en>tn||en===void 0)return 1;if(en<tn||tn===void 0)return-1}return Yr.index-Zr.index}),"value")}function g$x(Kt,Vt){return function(Hr,Wr,Yr){var Zr=Vt?[[],[]]:{};return Wr=n$u(Wr,Yr),u$E(Hr,function(en,tn){var rn=Wr(en,tn,Hr);Kt(Zr,en,rn)}),Zr}}const n$o=g$x(function(Kt,Vt,Hr){n$w(Kt,Hr)?Kt[Hr].push(Vt):Kt[Hr]=[Vt]}),f$I=g$x(function(Kt,Vt,Hr){Kt[Hr]=Vt}),p$E=g$x(function(Kt,Vt,Hr){n$w(Kt,Hr)?Kt[Hr]++:Kt[Hr]=1}),i$z=g$x(function(Kt,Vt,Hr){Kt[Hr?0:1].push(Vt)},!0);function f$H(Kt){return Kt==null?0:i$B(Kt)?Kt.length:c$O(Kt).length}function u$C(Kt,Vt,Hr){return Vt in Hr}const z$e=s$A(function(Kt,Vt){var Hr={},Wr=Vt[0];if(Kt==null)return Hr;c$P(Wr)?(Vt.length>1&&(Wr=a$19(Wr,Vt[1])),Vt=s$x(Kt)):(Wr=u$C,Vt=x$t(Vt,!1,!1),Kt=Object(Kt));for(var Yr=0,Zr=Vt.length;Yr<Zr;Yr++){var en=Vt[Yr],tn=Kt[en];Wr(tn,en,Kt)&&(Hr[en]=tn)}return Hr}),F$h=s$A(function(Kt,Vt){var Hr=Vt[0],Wr;return c$P(Hr)?(Hr=n$s(Hr),Vt.length>1&&(Wr=Vt[1])):(Vt=h$D(x$t(Vt,!1,!1),String),Hr=function(Yr,Zr){return!u$D(Vt,Zr)}),z$e(Kt,Hr,Wr)});function a$10(Kt,Vt,Hr){return s$B.call(Kt,0,Math.max(0,Kt.length-(Vt==null||Hr?1:Vt)))}function u$B(Kt,Vt,Hr){return Kt==null||Kt.length<1?Vt==null||Hr?void 0:[]:Vt==null||Hr?Kt[0]:a$10(Kt,Kt.length-Vt)}function u$A(Kt,Vt,Hr){return s$B.call(Kt,Vt==null||Hr?1:Vt)}function f$G(Kt,Vt,Hr){return Kt==null||Kt.length<1?Vt==null||Hr?void 0:[]:Vt==null||Hr?Kt[Kt.length-1]:u$A(Kt,Math.max(0,Kt.length-Vt))}function e$1l(Kt){return l$w(Kt,Boolean)}function n$n(Kt,Vt){return x$t(Kt,Vt,!1)}const a$$=s$A(function(Kt,Vt){return Vt=x$t(Vt,!0,!0),l$w(Kt,function(Hr){return!u$D(Vt,Hr)})}),i$y=s$A(function(Kt,Vt){return a$$(Kt,Vt)});function w$r(Kt,Vt,Hr,Wr){r$11(Vt)||(Wr=Hr,Hr=Vt,Vt=!1),Hr!=null&&(Hr=n$u(Hr,Wr));for(var Yr=[],Zr=[],en=0,tn=o$17(Kt);en<tn;en++){var rn=Kt[en],nn=Hr?Hr(rn,en,Kt):rn;Vt&&!Hr?((!en||Zr!==nn)&&Yr.push(rn),Zr=nn):Hr?u$D(Zr,nn)||(Zr.push(nn),Yr.push(rn)):u$D(Yr,rn)||Yr.push(rn)}return Yr}const f$F=s$A(function(Kt){return w$r(x$t(Kt,!0,!0))});function v$D(Kt){for(var Vt=[],Hr=arguments.length,Wr=0,Yr=o$17(Kt);Wr<Yr;Wr++){var Zr=Kt[Wr];if(!u$D(Vt,Zr)){var en;for(en=1;en<Hr&&u$D(arguments[en],Zr);en++);en===Hr&&Vt.push(Zr)}}return Vt}function n$m(Kt){for(var Vt=Kt&&g$y(Kt,o$17).length||0,Hr=Array(Vt),Wr=0;Wr<Vt;Wr++)Hr[Wr]=f$J(Kt,Wr);return Hr}const p$D=s$A(n$m);function u$z(Kt,Vt){for(var Hr={},Wr=0,Yr=o$17(Kt);Wr<Yr;Wr++)Vt?Hr[Kt[Wr]]=Vt[Wr]:Hr[Kt[Wr][0]]=Kt[Wr][1];return Hr}function u$y(Kt,Vt,Hr){Vt==null&&(Vt=Kt||0,Kt=0),Hr||(Hr=Vt<Kt?-1:1);for(var Wr=Math.max(Math.ceil((Vt-Kt)/Hr),0),Yr=Array(Wr),Zr=0;Zr<Wr;Zr++,Kt+=Hr)Yr[Zr]=Kt;return Yr}function h$B(Kt,Vt){if(Vt==null||Vt<1)return[];for(var Hr=[],Wr=0,Yr=Kt.length;Wr<Yr;)Hr.push(s$B.call(Kt,Wr,Wr+=Vt));return Hr}function r$X(Kt,Vt){return Kt._chain?t$p(Vt).chain():Vt}function l$v(Kt){return u$E(f$O(Kt),function(Vt){var Hr=t$p[Vt]=Kt[Vt];t$p.prototype[Vt]=function(){var Wr=[this._wrapped];return n$A.apply(Wr,arguments),r$X(this,Hr.apply(t$p,Wr))}}),t$p}u$E(["pop","push","reverse","shift","sort","splice","unshift"],function(Kt){var Vt=r$12[Kt];t$p.prototype[Kt]=function(){var Hr=this._wrapped;return Hr!=null&&(Vt.apply(Hr,arguments),(Kt==="shift"||Kt==="splice")&&Hr.length===0&&delete Hr[0]),r$X(this,Hr)}});u$E(["concat","join","slice"],function(Kt){var Vt=r$12[Kt];t$p.prototype[Kt]=function(){var Hr=this._wrapped;return Hr!=null&&(Hr=Vt.apply(Hr,arguments)),r$X(this,Hr)}});const i$x=Object.freeze(Object.defineProperty({__proto__:null,VERSION:o$1d,after:r$_,all:g$z,allKeys:s$x,any:h$C,assign:s$t,before:t$k,bind:a$16,bindAll:s$q,chain:e$1m,chunk:h$B,clone:o$15,collect:h$D,compact:e$1l,compose:n$r,constant:t$r,contains:u$D,countBy:p$E,create:i$D,debounce:d$C,default:t$p,defaults:s$s,defer:f$L,delay:o$10,detect:y$o,difference:a$$,drop:u$A,each:u$E,escape:o$13,every:g$z,extend:s$u,extendOwn:s$t,filter:l$w,find:y$o,findIndex:r$Z,findKey:a$14,findLastIndex:d$B,findWhere:m$I,first:u$B,flatten:n$n,foldl:t$j,foldr:r$Y,forEach:u$E,functions:f$O,get:d$F,groupBy:n$o,has:s$r,head:u$B,identity:e$1o,include:u$D,includes:u$D,indexBy:f$I,indexOf:f$K,initial:a$10,inject:t$j,intersection:v$D,invert:s$v,invoke:k$k,isArguments:o$19,isArray:e$1s,isArrayBuffer:f$T,isBoolean:r$11,isDataView:g$C,isDate:a$1e,isElement:n$x,isEmpty:a$1c,isEqual:z$f,isError:t$t,isFinite:s$z,isFunction:c$P,isMap:a$1b,isMatch:i$G,isNaN:N$l,isNull:u$N,isNumber:t$u,isObject:n$z,isRegExp:o$1c,isSet:f$P,isString:e$1u,isSymbol:e$1t,isTypedArray:u$L,isUndefined:n$y,isWeakMap:m$J,isWeakSet:a$1a,iteratee:a$18,keys:c$O,last:f$G,lastIndexOf:n$q,map:h$D,mapObject:k$m,matcher:i$C,matches:i$C,max:g$y,memoize:o$11,methods:f$O,min:k$j,mixin:l$v,negate:n$s,noop:o$14,now:e$1n,object:u$z,omit:F$h,once:a$15,pairs:o$16,partial:l$x,partition:i$z,pick:z$e,pluck:f$J,property:u$I,propertyOf:u$H,random:t$n,range:u$y,reduce:t$j,reduceRight:r$Y,reject:a$12,rest:u$A,restArguments:s$A,result:d$D,sample:M$q,select:l$w,shuffle:n$p,size:f$H,some:h$C,sortBy:x$s,sortedIndex:a$13,tail:u$A,take:u$B,tap:e$1q,template:$$7,templateSettings:a$17,throttle:g$B,times:c$K,toArray:A$g,toPath:f$M,transpose:n$m,unescape:o$12,union:f$F,uniq:w$r,unique:w$r,uniqueId:t$l,unzip:n$m,values:s$w,where:i$A,without:i$y,wrap:p$F,zip:p$D},Symbol.toStringTag,{value:"Module"}));var r$W=l$v(i$x);r$W._=r$W;const e$1k=()=>m$K.jsx("g",{id:"Icon=bullet",children:m$K.jsx("path",{id:"Vector",d:"M9.75 8C9.75 8.34612 9.64736 8.68446 9.45507 8.97225C9.26278 9.26003 8.98947 9.48434 8.6697 9.61679C8.34993 9.74924 7.99806 9.7839 7.65859 9.71637C7.31913 9.64885 7.00731 9.48218 6.76256 9.23744C6.51782 8.9927 6.35115 8.68087 6.28363 8.34141C6.2161 8.00194 6.25076 7.65007 6.38321 7.3303C6.51566 7.01053 6.73997 6.73722 7.02775 6.54493C7.31554 6.35264 7.65388 6.25 8 6.25C8.46413 6.25 8.90925 6.43437 9.23744 6.76256C9.56563 7.09075 9.75 7.53587 9.75 8Z"})}),c$J=()=>m$K.jsx("g",{id:"Icon=checkbox",children:m$K.jsx("path",{id:"Vector",d:"M13 2H3C2.73478 2 2.48043 2.10536 2.29289 2.29289C2.10536 2.48043 2 2.73478 2 3V13C2 13.2652 2.10536 13.5196 2.29289 13.7071C2.48043 13.8946 2.73478 14 3 14H13C13.2652 14 13.5196 13.8946 13.7071 13.7071C13.8946 13.5196 14 13.2652 14 13V3C14 2.73478 13.8946 2.48043 13.7071 2.29289C13.5196 2.10536 13.2652 2 13 2ZM13 13H3V3H13V13Z"})}),t$i=()=>m$K.jsx("g",{id:"Icon=checkbox_filled",children:m$K.jsx("path",{id:"Vector",d:"M13 2H3C2.73478 2 2.48043 2.10536 2.29289 2.29289C2.10536 2.48043 2 2.73478 2 3V13C2 13.2652 2.10536 13.5196 2.29289 13.7071C2.48043 13.8946 2.73478 14 3 14H13C13.2652 14 13.5196 13.8946 13.7071 13.7071C13.8946 13.5196 14 13.2652 14 13V3C14 2.73478 13.8946 2.48043 13.7071 2.29289C13.5196 2.10536 13.2652 2 13 2ZM10.8538 6.85375L7.35375 10.3538C7.30731 10.4002 7.25217 10.4371 7.19147 10.4623C7.13077 10.4874 7.06571 10.5004 7 10.5004C6.93429 10.5004 6.86923 10.4874 6.80853 10.4623C6.74783 10.4371 6.69269 10.4002 6.64625 10.3538L5.14625 8.85375C5.05243 8.75993 4.99972 8.63268 4.99972 8.5C4.99972 8.36732 5.05243 8.24007 5.14625 8.14625C5.24007 8.05243 5.36732 7.99972 5.5 7.99972C5.63268 7.99972 5.75993 8.05243 5.85375 8.14625L7 9.29313L10.1462 6.14625C10.1927 6.09979 10.2479 6.06294 10.3086 6.0378C10.3692 6.01266 10.4343 5.99972 10.5 5.99972C10.5657 5.99972 10.6308 6.01266 10.6914 6.0378C10.7521 6.06294 10.8073 6.09979 10.8538 6.14625C10.9002 6.1927 10.9371 6.24786 10.9622 6.30855C10.9873 6.36925 11.0003 6.4343 11.0003 6.5C11.0003 6.5657 10.9873 6.63075 10.9622 6.69145C10.9371 6.75214 10.9002 6.8073 10.8538 6.85375Z"})}),t$h=()=>m$K.jsx("g",{id:"Icon=close",children:m$K.jsx("path",{id:"Vector",d:"M12.8535 12.1465C12.9 12.193 12.9368 12.2481 12.962 12.3088C12.9871 12.3695 13.0001 12.4346 13.0001 12.5003C13.0001 12.566 12.9871 12.631 12.962 12.6917C12.9368 12.7524 12.9 12.8076 12.8535 12.854C12.8071 12.9005 12.7519 12.9373 12.6912 12.9625C12.6305 12.9876 12.5655 13.0006 12.4998 13.0006C12.4341 13.0006 12.369 12.9876 12.3083 12.9625C12.2476 12.9373 12.1925 12.9005 12.146 12.854L7.99979 8.70715L3.85354 12.854C3.75972 12.9478 3.63247 13.0006 3.49979 13.0006C3.36711 13.0006 3.23986 12.9478 3.14604 12.854C3.05222 12.7602 2.99951 12.633 2.99951 12.5003C2.99951 12.3676 3.05222 12.2403 3.14604 12.1465L7.29291 8.00028L3.14604 3.85403C3.05222 3.76021 2.99951 3.63296 2.99951 3.50028C2.99951 3.3676 3.05222 3.24035 3.14604 3.14653C3.23986 3.05271 3.36711 3 3.49979 3C3.63247 3 3.75972 3.05271 3.85354 3.14653L7.99979 7.2934L12.146 3.14653C12.2399 3.05271 12.3671 3 12.4998 3C12.6325 3 12.7597 3.05271 12.8535 3.14653C12.9474 3.24035 13.0001 3.3676 13.0001 3.50028C13.0001 3.63296 12.9474 3.76021 12.8535 3.85403L8.70666 8.00028L12.8535 12.1465Z"})}),H$j=()=>m$K.jsx("g",{id:"Icon=date",children:m$K.jsx("path",{id:"Vector",d:"M13 2H11.5V1.5C11.5 1.36739 11.4473 1.24021 11.3536 1.14645C11.2598 1.05268 11.1326 1 11 1C10.8674 1 10.7402 1.05268 10.6464 1.14645C10.5527 1.24021 10.5 1.36739 10.5 1.5V2H5.5V1.5C5.5 1.36739 5.44732 1.24021 5.35355 1.14645C5.25979 1.05268 5.13261 1 5 1C4.86739 1 4.74021 1.05268 4.64645 1.14645C4.55268 1.24021 4.5 1.36739 4.5 1.5V2H3C2.73478 2 2.48043 2.10536 2.29289 2.29289C2.10536 2.48043 2 2.73478 2 3V13C2 13.2652 2.10536 13.5196 2.29289 13.7071C2.48043 13.8946 2.73478 14 3 14H13C13.2652 14 13.5196 13.8946 13.7071 13.7071C13.8946 13.5196 14 13.2652 14 13V3C14 2.73478 13.8946 2.48043 13.7071 2.29289C13.5196 2.10536 13.2652 2 13 2ZM4.5 3V3.5C4.5 3.63261 4.55268 3.75979 4.64645 3.85355C4.74021 3.94732 4.86739 4 5 4C5.13261 4 5.25979 3.94732 5.35355 3.85355C5.44732 3.75979 5.5 3.63261 5.5 3.5V3H10.5V3.5C10.5 3.63261 10.5527 3.75979 10.6464 3.85355C10.7402 3.94732 10.8674 4 11 4C11.1326 4 11.2598 3.94732 11.3536 3.85355C11.4473 3.75979 11.5 3.63261 11.5 3.5V3H13V5H3V3H4.5ZM13 13H3V6H13V13Z"})}),n$l=()=>m$K.jsx("g",{id:"Icon=down",children:m$K.jsx("path",{id:"Vector",d:"M13.3535 6.35403L8.35354 11.354C8.3071 11.4005 8.25196 11.4374 8.19126 11.4626C8.13056 11.4877 8.0655 11.5007 7.99979 11.5007C7.93408 11.5007 7.86902 11.4877 7.80832 11.4626C7.74762 11.4374 7.69248 11.4005 7.64604 11.354L2.64604 6.35403C2.55222 6.26021 2.49951 6.13296 2.49951 6.00028C2.49951 5.8676 2.55222 5.74035 2.64604 5.64653C2.73986 5.55271 2.86711 5.5 2.99979 5.5C3.13247 5.5 3.25972 5.55271 3.35354 5.64653L7.99979 10.2934L12.646 5.64653C12.6925 5.60007 12.7476 5.56322 12.8083 5.53808C12.869 5.51294 12.9341 5.5 12.9998 5.5C13.0655 5.5 13.1305 5.51294 13.1912 5.53808C13.2519 5.56322 13.3071 5.60007 13.3535 5.64653C13.4 5.69298 13.4368 5.74813 13.462 5.80883C13.4871 5.86953 13.5001 5.93458 13.5001 6.00028C13.5001 6.06598 13.4871 6.13103 13.462 6.19173C13.4368 6.25242 13.4 6.30757 13.3535 6.35403Z"})}),r$V=()=>m$K.jsx("g",{id:"Icon=export",children:m$K.jsx("path",{id:"Vector",d:"M14 9V13C14 13.1326 13.9473 13.2598 13.8536 13.3536C13.7598 13.4473 13.6326 13.5 13.5 13.5H2.5C2.36739 13.5 2.24021 13.4473 2.14645 13.3536C2.05268 13.2598 2 13.1326 2 13V9C2 8.86739 2.05268 8.74021 2.14645 8.64645C2.24021 8.55268 2.36739 8.5 2.5 8.5C2.63261 8.5 2.75979 8.55268 2.85355 8.64645C2.94732 8.74021 3 8.86739 3 9V12.5H13V9C13 8.86739 13.0527 8.74021 13.1464 8.64645C13.2402 8.55268 13.3674 8.5 13.5 8.5C13.6326 8.5 13.7598 8.55268 13.8536 8.64645C13.9473 8.74021 14 8.86739 14 9ZM7.64625 9.35375C7.69269 9.40024 7.74783 9.43712 7.80853 9.46228C7.86923 9.48744 7.93429 9.50039 8 9.50039C8.06571 9.50039 8.13077 9.48744 8.19147 9.46228C8.25217 9.43712 8.30731 9.40024 8.35375 9.35375L10.8538 6.85375C10.9002 6.8073 10.9371 6.75214 10.9622 6.69145C10.9873 6.63075 11.0003 6.5657 11.0003 6.5C11.0003 6.4343 10.9873 6.36925 10.9622 6.30855C10.9371 6.24786 10.9002 6.1927 10.8538 6.14625C10.8073 6.09979 10.7521 6.06294 10.6914 6.0378C10.6308 6.01266 10.5657 5.99972 10.5 5.99972C10.4343 5.99972 10.3692 6.01266 10.3086 6.0378C10.2479 6.06294 10.1927 6.09979 10.1462 6.14625L8.5 7.79313V2C8.5 1.86739 8.44732 1.74021 8.35355 1.64645C8.25979 1.55268 8.13261 1.5 8 1.5C7.86739 1.5 7.74021 1.55268 7.64645 1.64645C7.55268 1.74021 7.5 1.86739 7.5 2V7.79313L5.85375 6.14625C5.75993 6.05243 5.63268 5.99972 5.5 5.99972C5.36732 5.99972 5.24007 6.05243 5.14625 6.14625C5.05243 6.24007 4.99972 6.36732 4.99972 6.5C4.99972 6.63268 5.05243 6.75993 5.14625 6.85375L7.64625 9.35375Z"})}),e$1j=()=>m$K.jsx("g",{id:"Icon=filters",children:m$K.jsx("path",{id:"Vector",d:"M7 4L13.5 4M7 4C7 4.55228 6.55228 5 6 5C5.44772 5 5 4.55228 5 4M7 4C7 3.44772 6.55229 3 6 3C5.44772 3 5 3.44771 5 4M2.5 4H5M7 12H13.5M7 12C7 12.5523 6.55228 13 6 13C5.44772 13 5 12.5523 5 12M7 12C7 11.4477 6.55228 11 6 11C5.44772 11 5 11.4477 5 12M2.5 12L5 12M11 8L13.5 8M11 8C11 8.55228 10.5523 9 10 9C9.44772 9 9 8.55228 9 8M11 8C11 7.44772 10.5523 7 10 7C9.44772 7 9 7.44771 9 8M2.5 8H9",stroke:"currentColor",strokeWidth:"0.8",strokeLinecap:"round",strokeLinejoin:"round"})}),o$$=()=>m$K.jsx("g",{id:"Icon=gender",children:m$K.jsx("path",{id:"Vector",d:"M11.0001 1.5V2.5H12.7816L11.0941 4.203C10.491 3.74755 9.75595 3.50079 9.00014 3.5C8.06514 3.5 7.19214 3.87 6.53114 4.5315C6.20441 4.85429 5.94501 5.23873 5.76798 5.66253C5.59095 6.08634 5.49982 6.54106 5.49986 7.00035C5.49991 7.45964 5.59114 7.91435 5.76825 8.33812C5.94536 8.76189 6.20484 9.14628 6.53164 9.469C6.96664 9.904 7.48464 10.2165 8.06264 10.375C8.11964 10.3315 8.18364 10.286 8.23464 10.235C8.44421 10.0218 8.5948 9.75788 8.67164 9.469C8.1273 9.4018 7.62118 9.15411 7.23414 8.7655C6.76214 8.294 6.50014 7.668 6.50014 7C6.50014 6.332 6.76264 5.707 7.23514 5.235C7.70614 4.7615 8.33214 4.5 9.00014 4.5C9.66814 4.5 10.2936 4.7625 10.7651 5.235C10.9984 5.46586 11.1835 5.74077 11.3097 6.04376C11.4359 6.34675 11.5006 6.67179 11.5001 7C11.5001 7.4325 11.3776 7.835 11.1721 8.203C11.2201 8.461 11.2501 8.732 11.2501 9C11.2501 9.249 11.2291 9.495 11.1876 9.735C11.2876 9.6535 11.3766 9.561 11.4691 9.469C12.1301 8.807 12.5001 7.935 12.5001 7C12.5001 6.235 12.2481 5.508 11.7971 4.906L13.5001 3.219V5H14.5001V1.5H11.0001ZM7.93764 5.625C7.88064 5.6685 7.81664 5.714 7.76564 5.765C7.54964 5.982 7.40864 6.245 7.32864 6.5315C7.87364 6.6015 8.37114 6.8395 8.76614 7.2345C9.23864 7.706 9.50114 8.332 9.50114 8.9995C9.50114 9.667 9.23864 10.2925 8.76614 10.7645C8.29414 11.2385 7.66814 11.5 7.00014 11.5C6.33214 11.5 5.70664 11.2375 5.23514 10.765C5.00166 10.5343 4.81644 10.2594 4.69025 9.95637C4.56406 9.65335 4.49943 9.32824 4.50014 9C4.50014 8.5675 4.62264 8.165 4.82814 7.797C4.77793 7.53426 4.75183 7.26749 4.75014 7C4.75014 6.751 4.77114 6.505 4.81264 6.265C4.71264 6.3465 4.62414 6.439 4.53114 6.5315C3.87114 7.192 3.50014 8.065 3.50014 9C3.50014 9.765 3.75214 10.492 4.20314 11.094L3.36014 11.9375L2.36014 10.9375L1.64014 11.6405L2.64014 12.6405L1.64014 13.6405L2.36014 14.3605L3.36014 13.3605L4.36014 14.3605L5.06264 13.6405L4.06264 12.6405L4.90664 11.7975C5.50922 12.2536 6.24438 12.5003 7.00014 12.5C7.93514 12.5 8.80814 12.13 9.46914 11.4685C10.1301 10.808 10.5001 9.935 10.5001 9C10.5001 8.065 10.1301 7.193 9.46864 6.531C9.03364 6.096 8.51564 5.7835 7.93764 5.625Z"})}),i$w=()=>m$K.jsx("g",{id:"Icon=info",children:m$K.jsx("path",{id:"Vector",d:"M8 1.5C6.71442 1.5 5.45772 1.88122 4.3888 2.59545C3.31988 3.30968 2.48676 4.32484 1.99479 5.51256C1.50282 6.70028 1.37409 8.00721 1.6249 9.26809C1.8757 10.529 2.49477 11.6872 3.40381 12.5962C4.31285 13.5052 5.47104 14.1243 6.73192 14.3751C7.99279 14.6259 9.29973 14.4972 10.4874 14.0052C11.6752 13.5132 12.6903 12.6801 13.4046 11.6112C14.1188 10.5423 14.5 9.28558 14.5 8C14.4982 6.27665 13.8128 4.62441 12.5942 3.40582C11.3756 2.18722 9.72335 1.50182 8 1.5ZM8 13.5C6.91221 13.5 5.84884 13.1774 4.94437 12.5731C4.0399 11.9687 3.33495 11.1098 2.91867 10.1048C2.50238 9.09977 2.39347 7.9939 2.60568 6.927C2.8179 5.86011 3.34173 4.8801 4.11092 4.11091C4.8801 3.34172 5.86011 2.8179 6.92701 2.60568C7.9939 2.39346 9.09977 2.50238 10.1048 2.91866C11.1098 3.33494 11.9687 4.03989 12.5731 4.94436C13.1774 5.84883 13.5 6.9122 13.5 8C13.4983 9.45818 12.9184 10.8562 11.8873 11.8873C10.8562 12.9184 9.45819 13.4983 8 13.5ZM9 11C9 11.1326 8.94732 11.2598 8.85356 11.3536C8.75979 11.4473 8.63261 11.5 8.5 11.5C8.23479 11.5 7.98043 11.3946 7.7929 11.2071C7.60536 11.0196 7.5 10.7652 7.5 10.5V8C7.36739 8 7.24022 7.94732 7.14645 7.85355C7.05268 7.75979 7 7.63261 7 7.5C7 7.36739 7.05268 7.24021 7.14645 7.14645C7.24022 7.05268 7.36739 7 7.5 7C7.76522 7 8.01957 7.10536 8.20711 7.29289C8.39465 7.48043 8.5 7.73478 8.5 8V10.5C8.63261 10.5 8.75979 10.5527 8.85356 10.6464C8.94732 10.7402 9 10.8674 9 11ZM7 5.25C7 5.10166 7.04399 4.95666 7.1264 4.83332C7.20881 4.70999 7.32595 4.61386 7.46299 4.55709C7.60003 4.50032 7.75083 4.48547 7.89632 4.51441C8.04181 4.54335 8.17544 4.61478 8.28033 4.71967C8.38522 4.82456 8.45665 4.9582 8.48559 5.10368C8.51453 5.24917 8.49968 5.39997 8.44291 5.53701C8.38615 5.67406 8.29002 5.79119 8.16668 5.8736C8.04334 5.95601 7.89834 6 7.75 6C7.55109 6 7.36032 5.92098 7.21967 5.78033C7.07902 5.63968 7 5.44891 7 5.25Z"})}),t$g=()=>m$K.jsx("g",{id:"Icon=left_arrow",children:m$K.jsx("path",{id:"Vector",d:"M13.9999 8.00028C13.9999 8.13289 13.9472 8.26006 13.8535 8.35383C13.7597 8.4476 13.6325 8.50028 13.4999 8.50028H3.70678L7.35366 12.1465C7.40011 12.193 7.43696 12.2481 7.4621 12.3088C7.48724 12.3695 7.50018 12.4346 7.50018 12.5003C7.50018 12.566 7.48724 12.631 7.4621 12.6917C7.43696 12.7524 7.40011 12.8076 7.35366 12.854C7.3072 12.9005 7.25205 12.9373 7.19135 12.9625C7.13066 12.9876 7.0656 13.0006 6.99991 13.0006C6.93421 13.0006 6.86915 12.9876 6.80846 12.9625C6.74776 12.9373 6.69261 12.9005 6.64615 12.854L2.14615 8.35403C2.09967 8.30759 2.06279 8.25245 2.03763 8.19175C2.01246 8.13105 1.99951 8.06599 1.99951 8.00028C1.99951 7.93457 2.01246 7.86951 2.03763 7.80881C2.06279 7.74811 2.09967 7.69296 2.14615 7.64653L6.64615 3.14653C6.73997 3.05271 6.86722 3 6.99991 3C7.13259 3 7.25984 3.05271 7.35366 3.14653C7.44748 3.24035 7.50018 3.3676 7.50018 3.50028C7.50018 3.63296 7.44748 3.76021 7.35366 3.85403L3.70678 7.50028H13.4999C13.6325 7.50028 13.7597 7.55296 13.8535 7.64672C13.9472 7.74049 13.9999 7.86767 13.9999 8.00028Z"})}),e$1i=()=>m$K.jsx("g",{id:"Icon=left",children:m$K.jsx("path",{id:"Vector",d:"M10.3537 12.6465C10.4001 12.693 10.437 12.7481 10.4621 12.8088C10.4872 12.8695 10.5002 12.9346 10.5002 13.0003C10.5002 13.066 10.4872 13.131 10.4621 13.1917C10.437 13.2524 10.4001 13.3076 10.3537 13.354C10.3072 13.4005 10.252 13.4373 10.1914 13.4625C10.1307 13.4876 10.0656 13.5006 9.99991 13.5006C9.93421 13.5006 9.86915 13.4876 9.80846 13.4625C9.74776 13.4373 9.69261 13.4005 9.64615 13.354L4.64615 8.35403C4.59967 8.30759 4.56279 8.25245 4.53763 8.19175C4.51246 8.13105 4.49951 8.06599 4.49951 8.00028C4.49951 7.93457 4.51246 7.86951 4.53763 7.80881C4.56279 7.74811 4.59967 7.69296 4.64615 7.64653L9.64615 2.64653C9.73997 2.55271 9.86722 2.5 9.99991 2.5C10.1326 2.5 10.2598 2.55271 10.3537 2.64653C10.4475 2.74035 10.5002 2.8676 10.5002 3.00028C10.5002 3.13296 10.4475 3.26021 10.3537 3.35403L5.70678 8.00028L10.3537 12.6465Z"})}),o$_=()=>m$K.jsx("g",{id:"Icon=list",children:m$K.jsx("path",{id:"Vector",d:"M5.5 4C5.5 3.86739 5.55268 3.74021 5.64645 3.64645C5.74021 3.55268 5.86739 3.5 6 3.5H13.5C13.6326 3.5 13.7598 3.55268 13.8536 3.64645C13.9473 3.74021 14 3.86739 14 4C14 4.13261 13.9473 4.25979 13.8536 4.35355C13.7598 4.44732 13.6326 4.5 13.5 4.5H6C5.86739 4.5 5.74021 4.44732 5.64645 4.35355C5.55268 4.25979 5.5 4.13261 5.5 4ZM13.5 7.5H6C5.86739 7.5 5.74021 7.55268 5.64645 7.64645C5.55268 7.74021 5.5 7.86739 5.5 8C5.5 8.13261 5.55268 8.25979 5.64645 8.35355C5.74021 8.44732 5.86739 8.5 6 8.5H13.5C13.6326 8.5 13.7598 8.44732 13.8536 8.35355C13.9473 8.25979 14 8.13261 14 8C14 7.86739 13.9473 7.74021 13.8536 7.64645C13.7598 7.55268 13.6326 7.5 13.5 7.5ZM13.5 11.5H6C5.86739 11.5 5.74021 11.5527 5.64645 11.6464C5.55268 11.7402 5.5 11.8674 5.5 12C5.5 12.1326 5.55268 12.2598 5.64645 12.3536C5.74021 12.4473 5.86739 12.5 6 12.5H13.5C13.6326 12.5 13.7598 12.4473 13.8536 12.3536C13.9473 12.2598 14 12.1326 14 12C14 11.8674 13.9473 11.7402 13.8536 11.6464C13.7598 11.5527 13.6326 11.5 13.5 11.5ZM3.5 3.5H2.5C2.36739 3.5 2.24021 3.55268 2.14645 3.64645C2.05268 3.74021 2 3.86739 2 4C2 4.13261 2.05268 4.25979 2.14645 4.35355C2.24021 4.44732 2.36739 4.5 2.5 4.5H3.5C3.63261 4.5 3.75979 4.44732 3.85355 4.35355C3.94732 4.25979 4 4.13261 4 4C4 3.86739 3.94732 3.74021 3.85355 3.64645C3.75979 3.55268 3.63261 3.5 3.5 3.5ZM3.5 7.5H2.5C2.36739 7.5 2.24021 7.55268 2.14645 7.64645C2.05268 7.74021 2 7.86739 2 8C2 8.13261 2.05268 8.25979 2.14645 8.35355C2.24021 8.44732 2.36739 8.5 2.5 8.5H3.5C3.63261 8.5 3.75979 8.44732 3.85355 8.35355C3.94732 8.25979 4 8.13261 4 8C4 7.86739 3.94732 7.74021 3.85355 7.64645C3.75979 7.55268 3.63261 7.5 3.5 7.5ZM3.5 11.5H2.5C2.36739 11.5 2.24021 11.5527 2.14645 11.6464C2.05268 11.7402 2 11.8674 2 12C2 12.1326 2.05268 12.2598 2.14645 12.3536C2.24021 12.4473 2.36739 12.5 2.5 12.5H3.5C3.63261 12.5 3.75979 12.4473 3.85355 12.3536C3.94732 12.2598 4 12.1326 4 12C4 11.8674 3.94732 11.7402 3.85355 11.6464C3.75979 11.5527 3.63261 11.5 3.5 11.5Z"})}),i$v=()=>m$K.jsx("g",{id:"Icon=location",children:m$K.jsx("path",{id:"Vector",d:"M8 4C7.50555 4 7.0222 4.14662 6.61107 4.42133C6.19995 4.69603 5.87952 5.08648 5.6903 5.54329C5.50108 6.00011 5.45157 6.50277 5.54804 6.98773C5.6445 7.47268 5.8826 7.91814 6.23223 8.26777C6.58186 8.6174 7.02732 8.8555 7.51227 8.95196C7.99723 9.04843 8.49989 8.99892 8.95671 8.8097C9.41352 8.62048 9.80397 8.30005 10.0787 7.88893C10.3534 7.4778 10.5 6.99445 10.5 6.5C10.5 5.83696 10.2366 5.20107 9.76777 4.73223C9.29893 4.26339 8.66304 4 8 4ZM8 8C7.70333 8 7.41332 7.91203 7.16664 7.7472C6.91997 7.58238 6.72771 7.34811 6.61418 7.07403C6.50065 6.79994 6.47094 6.49834 6.52882 6.20736C6.5867 5.91639 6.72956 5.64912 6.93934 5.43934C7.14912 5.22956 7.41639 5.0867 7.70736 5.02882C7.99834 4.97094 8.29994 5.00065 8.57403 5.11418C8.84811 5.22771 9.08238 5.41997 9.2472 5.66664C9.41203 5.91332 9.5 6.20333 9.5 6.5C9.5 6.89782 9.34196 7.27936 9.06066 7.56066C8.77936 7.84196 8.39782 8 8 8ZM8 1C6.54182 1.00165 5.14383 1.58165 4.11274 2.61274C3.08165 3.64383 2.50165 5.04182 2.5 6.5C2.5 8.4625 3.40688 10.5425 5.125 12.5156C5.89701 13.4072 6.76591 14.2101 7.71562 14.9094C7.7997 14.9683 7.89985 14.9999 8.0025 14.9999C8.10515 14.9999 8.20531 14.9683 8.28938 14.9094C9.23734 14.2098 10.1046 13.4069 10.875 12.5156C12.5906 10.5425 13.5 8.4625 13.5 6.5C13.4983 5.04182 12.9184 3.64383 11.8873 2.61274C10.8562 1.58165 9.45818 1.00165 8 1ZM8 13.875C6.96688 13.0625 3.5 10.0781 3.5 6.5C3.5 5.30653 3.97411 4.16193 4.81802 3.31802C5.66193 2.47411 6.80653 2 8 2C9.19347 2 10.3381 2.47411 11.182 3.31802C12.0259 4.16193 12.5 5.30653 12.5 6.5C12.5 10.0769 9.03312 13.0625 8 13.875Z"})}),V$e=()=>m$K.jsx("g",{id:"Icon=occupation",children:m$K.jsx("path",{id:"Vector",d:"M13.5 3.5H11V3C11 2.60218 10.842 2.22064 10.5607 1.93934C10.2794 1.65804 9.89782 1.5 9.5 1.5H6.5C6.10218 1.5 5.72064 1.65804 5.43934 1.93934C5.15804 2.22064 5 2.60218 5 3V3.5H2.5C2.23478 3.5 1.98043 3.60536 1.79289 3.79289C1.60536 3.98043 1.5 4.23478 1.5 4.5V12.5C1.5 12.7652 1.60536 13.0196 1.79289 13.2071C1.98043 13.3946 2.23478 13.5 2.5 13.5H13.5C13.7652 13.5 14.0196 13.3946 14.2071 13.2071C14.3946 13.0196 14.5 12.7652 14.5 12.5V4.5C14.5 4.23478 14.3946 3.98043 14.2071 3.79289C14.0196 3.60536 13.7652 3.5 13.5 3.5ZM6 3C6 2.86739 6.05268 2.74021 6.14645 2.64645C6.24021 2.55268 6.36739 2.5 6.5 2.5H9.5C9.63261 2.5 9.75979 2.55268 9.85355 2.64645C9.94732 2.74021 10 2.86739 10 3V3.5H6V3ZM13.5 4.5V7.10063C11.8124 8.01924 9.92145 8.50034 8 8.5C6.07863 8.50035 4.18776 8.01947 2.5 7.10125V4.5H13.5ZM13.5 12.5H2.5V8.2275C4.21245 9.06512 6.09367 9.50037 8 9.5C9.90637 9.50004 11.7876 9.06459 13.5 8.22688V12.5ZM6.5 7C6.5 6.86739 6.55268 6.74021 6.64645 6.64645C6.74021 6.55268 6.86739 6.5 7 6.5H9C9.13261 6.5 9.25979 6.55268 9.35355 6.64645C9.44732 6.74021 9.5 6.86739 9.5 7C9.5 7.13261 9.44732 7.25979 9.35355 7.35355C9.25979 7.44732 9.13261 7.5 9 7.5H7C6.86739 7.5 6.74021 7.44732 6.64645 7.35355C6.55268 7.25979 6.5 7.13261 6.5 7Z"})}),o$Z=()=>m$K.jsx("g",{id:"Icon=participants",children:m$K.jsx("path",{id:"Vector",d:"M1.7 7.89993C1.75253 7.93933 1.8123 7.96799 1.87591 7.98429C1.93952 8.00058 2.00571 8.00419 2.07071 7.9949C2.13571 7.98562 2.19825 7.96362 2.25475 7.93017C2.31125 7.89671 2.3606 7.85246 2.4 7.79993C2.70273 7.39629 3.09528 7.06868 3.54656 6.84304C3.99784 6.6174 4.49545 6.49993 5 6.49993C5.50455 6.49993 6.00216 6.6174 6.45344 6.84304C6.90472 7.06868 7.29727 7.39629 7.6 7.79993C7.67966 7.90592 7.79815 7.97593 7.92942 7.99457C8.06069 8.0132 8.19399 7.97894 8.3 7.8993C8.33779 7.8712 8.37127 7.83772 8.39937 7.79993C8.7021 7.39629 9.09465 7.06868 9.54593 6.84304C9.99721 6.6174 10.4948 6.49993 10.9994 6.49993C11.5039 6.49993 12.0015 6.6174 12.4528 6.84304C12.9041 7.06868 13.2966 7.39629 13.5994 7.79993C13.679 7.90602 13.7976 7.97612 13.9289 7.99481C14.0602 8.01351 14.1936 7.97927 14.2997 7.89962C14.4058 7.81997 14.4759 7.70144 14.4946 7.57011C14.5133 7.43877 14.479 7.30539 14.3994 7.19931C13.9568 6.60597 13.3666 6.13882 12.6875 5.84431C13.0598 5.50439 13.3206 5.05986 13.4358 4.56905C13.5509 4.07825 13.515 3.56409 13.3327 3.09407C13.1504 2.62405 12.8303 2.22011 12.4143 1.93529C11.9984 1.65046 11.506 1.49805 11.0019 1.49805C10.4977 1.49805 10.0054 1.65046 9.58942 1.93529C9.17346 2.22011 8.85332 2.62405 8.67103 3.09407C8.48874 3.56409 8.45281 4.07825 8.56796 4.56905C8.6831 5.05986 8.94394 5.50439 9.31625 5.84431C8.8259 6.05634 8.38046 6.35988 8.00375 6.73868C7.62704 6.35988 7.1816 6.05634 6.69125 5.84431C7.06355 5.50439 7.3244 5.05986 7.43954 4.56905C7.55469 4.07825 7.51876 3.56409 7.33647 3.09407C7.15418 2.62405 6.83404 2.22011 6.41808 1.93529C6.00212 1.65046 5.50976 1.49805 5.00562 1.49805C4.50149 1.49805 4.00913 1.65046 3.59317 1.93529C3.17721 2.22011 2.85707 2.62405 2.67478 3.09407C2.49249 3.56409 2.45656 4.07825 2.57171 4.56905C2.68685 5.05986 2.9477 5.50439 3.32 5.84431C2.63791 6.13786 2.04481 6.60531 1.6 7.19993C1.5606 7.25246 1.53194 7.31223 1.51564 7.37584C1.49935 7.43945 1.49574 7.50564 1.50503 7.57064C1.51431 7.63564 1.53631 7.69818 1.56976 7.75468C1.60322 7.81118 1.64747 7.86053 1.7 7.89993ZM11 2.49993C11.2967 2.49993 11.5867 2.5879 11.8334 2.75273C12.08 2.91755 12.2723 3.15182 12.3858 3.4259C12.4994 3.69999 12.5291 4.00159 12.4712 4.29257C12.4133 4.58354 12.2704 4.85081 12.0607 5.06059C11.8509 5.27037 11.5836 5.41323 11.2926 5.47111C11.0017 5.52899 10.7001 5.49928 10.426 5.38575C10.1519 5.27222 9.91762 5.07996 9.7528 4.83329C9.58797 4.58661 9.5 4.2966 9.5 3.99993C9.5 3.60211 9.65804 3.22057 9.93934 2.93927C10.2206 2.65797 10.6022 2.49993 11 2.49993ZM5 2.49993C5.29667 2.49993 5.58668 2.5879 5.83336 2.75273C6.08003 2.91755 6.27229 3.15182 6.38582 3.4259C6.49935 3.69999 6.52906 4.00159 6.47118 4.29257C6.4133 4.58354 6.27044 4.85081 6.06066 5.06059C5.85088 5.27037 5.58361 5.41323 5.29264 5.47111C5.00166 5.52899 4.70006 5.49928 4.42597 5.38575C4.15189 5.27222 3.91762 5.07996 3.7528 4.83329C3.58797 4.58661 3.5 4.2966 3.5 3.99993C3.5 3.60211 3.65804 3.22057 3.93934 2.93927C4.22064 2.65797 4.60218 2.49993 5 2.49993ZM12.6875 12.3443C13.0598 12.0044 13.3206 11.5599 13.4358 11.0691C13.5509 10.5782 13.515 10.0641 13.3327 9.59407C13.1504 9.12404 12.8303 8.72011 12.4143 8.43529C11.9984 8.15046 11.506 7.99805 11.0019 7.99805C10.4977 7.99805 10.0054 8.15046 9.58942 8.43529C9.17346 8.72011 8.85332 9.12404 8.67103 9.59407C8.48874 10.0641 8.45281 10.5782 8.56796 11.0691C8.6831 11.5599 8.94394 12.0044 9.31625 12.3443C8.8259 12.5563 8.38046 12.8599 8.00375 13.2387C7.62704 12.8599 7.1816 12.5563 6.69125 12.3443C7.06355 12.0044 7.3244 11.5599 7.43954 11.0691C7.55469 10.5782 7.51876 10.0641 7.33647 9.59407C7.15418 9.12404 6.83404 8.72011 6.41808 8.43529C6.00212 8.15046 5.50976 7.99805 5.00562 7.99805C4.50149 7.99805 4.00913 8.15046 3.59317 8.43529C3.17721 8.72011 2.85707 9.12404 2.67478 9.59407C2.49249 10.0641 2.45656 10.5782 2.57171 11.0691C2.68685 11.5599 2.9477 12.0044 3.32 12.3443C2.63791 12.6379 2.04481 13.1053 1.6 13.6999C1.5606 13.7525 1.53194 13.8122 1.51564 13.8758C1.49935 13.9394 1.49574 14.0056 1.50503 14.0706C1.51431 14.1356 1.53631 14.1982 1.56976 14.2547C1.60322 14.3112 1.64747 14.3605 1.7 14.3999C1.75253 14.4393 1.8123 14.468 1.87591 14.4843C1.93952 14.5006 2.00571 14.5042 2.07071 14.4949C2.13571 14.4856 2.19825 14.4636 2.25475 14.4302C2.31125 14.3967 2.3606 14.3525 2.4 14.2999C2.70273 13.8963 3.09528 13.5687 3.54656 13.343C3.99784 13.1174 4.49545 12.9999 5 12.9999C5.50455 12.9999 6.00216 13.1174 6.45344 13.343C6.90472 13.5687 7.29727 13.8963 7.6 14.2999C7.67966 14.4059 7.79815 14.4759 7.92942 14.4946C8.06069 14.5132 8.19399 14.4789 8.3 14.3993C8.33779 14.3712 8.37127 14.3377 8.39937 14.2999C8.7021 13.8963 9.09465 13.5687 9.54593 13.343C9.99721 13.1174 10.4948 12.9999 10.9994 12.9999C11.5039 12.9999 12.0015 13.1174 12.4528 13.343C12.9041 13.5687 13.2966 13.8963 13.5994 14.2999C13.679 14.406 13.7976 14.4761 13.9289 14.4948C14.0602 14.5135 14.1936 14.4793 14.2997 14.3996C14.4058 14.32 14.4759 14.2014 14.4946 14.0701C14.5133 13.9388 14.479 13.8054 14.3994 13.6993C13.9568 13.106 13.3666 12.6388 12.6875 12.3443ZM5 8.99993C5.29667 8.99993 5.58668 9.0879 5.83336 9.25273C6.08003 9.41755 6.27229 9.65182 6.38582 9.9259C6.49935 10.2 6.52906 10.5016 6.47118 10.7926C6.4133 11.0835 6.27044 11.3508 6.06066 11.5606C5.85088 11.7704 5.58361 11.9132 5.29264 11.9711C5.00166 12.029 4.70006 11.9993 4.42597 11.8857C4.15189 11.7722 3.91762 11.58 3.7528 11.3333C3.58797 11.0866 3.5 10.7966 3.5 10.4999C3.5 10.1021 3.65804 9.72057 3.93934 9.43927C4.22064 9.15797 4.60218 8.99993 5 8.99993ZM11 8.99993C11.2967 8.99993 11.5867 9.0879 11.8334 9.25273C12.08 9.41755 12.2723 9.65182 12.3858 9.9259C12.4994 10.2 12.5291 10.5016 12.4712 10.7926C12.4133 11.0835 12.2704 11.3508 12.0607 11.5606C11.8509 11.7704 11.5836 11.9132 11.2926 11.9711C11.0017 12.029 10.7001 11.9993 10.426 11.8857C10.1519 11.7722 9.91762 11.58 9.7528 11.3333C9.58797 11.0866 9.5 10.7966 9.5 10.4999C9.5 10.1021 9.65804 9.72057 9.93934 9.43927C10.2206 9.15797 10.6022 8.99993 11 8.99993Z"})}),s$p=()=>m$K.jsx("g",{id:"Icon=person",children:m$K.jsx("path",{id:"Vector",d:"M14.4324 13.2497C13.4805 11.6041 12.0137 10.4241 10.3018 9.86475C11.1486 9.36066 11.8065 8.59255 12.1744 7.67837C12.5424 6.76419 12.6001 5.7545 12.3387 4.80434C12.0773 3.85419 11.5112 3.01612 10.7274 2.41882C9.94359 1.82153 8.98538 1.49805 7.99993 1.49805C7.01447 1.49805 6.05626 1.82153 5.27244 2.41882C4.48863 3.01612 3.92255 3.85419 3.66114 4.80434C3.39973 5.7545 3.45744 6.76419 3.82542 7.67837C4.19339 8.59255 4.85128 9.36066 5.69805 9.86475C3.98618 10.4235 2.5193 11.6035 1.56743 13.2497C1.53252 13.3067 1.50936 13.37 1.49933 13.436C1.4893 13.502 1.49259 13.5694 1.509 13.6341C1.52542 13.6988 1.55463 13.7596 1.59492 13.8128C1.63521 13.8661 1.68575 13.9107 1.74357 13.9441C1.80138 13.9775 1.8653 13.999 1.93155 14.0073C1.99781 14.0156 2.06505 14.0105 2.12931 13.9924C2.19358 13.9743 2.25356 13.9435 2.30573 13.9018C2.3579 13.8601 2.40119 13.8084 2.43305 13.7497C3.61055 11.7147 5.6918 10.4997 7.99993 10.4997C10.3081 10.4997 12.3893 11.7147 13.5668 13.7497C13.5987 13.8084 13.642 13.8601 13.6941 13.9018C13.7463 13.9435 13.8063 13.9743 13.8705 13.9924C13.9348 14.0105 14.002 14.0156 14.0683 14.0073C14.1345 13.999 14.1985 13.9775 14.2563 13.9441C14.3141 13.9107 14.3646 13.8661 14.4049 13.8128C14.4452 13.7596 14.4744 13.6988 14.4908 13.6341C14.5073 13.5694 14.5106 13.502 14.5005 13.436C14.4905 13.37 14.4673 13.3067 14.4324 13.2497ZM4.49993 5.99975C4.49993 5.30751 4.7052 4.63082 5.08978 4.05525C5.47437 3.47968 6.02099 3.03108 6.66053 2.76617C7.30007 2.50126 8.00381 2.43195 8.68274 2.567C9.36168 2.70205 9.98531 3.03539 10.4748 3.52487C10.9643 4.01436 11.2976 4.638 11.4327 5.31693C11.5677 5.99586 11.4984 6.6996 11.2335 7.33914C10.9686 7.97868 10.52 8.52531 9.94442 8.90989C9.36885 9.29448 8.69216 9.49975 7.99993 9.49975C7.07197 9.49875 6.18231 9.12969 5.52615 8.47352C4.86999 7.81736 4.50092 6.9277 4.49993 5.99975Z"})}),o$Y=()=>m$K.jsx("g",{id:"Icon=reset",children:m$K.jsx("path",{id:"Vector",d:"M14.9998 3.50041V6.50041C14.9998 6.63302 14.9472 6.7602 14.8534 6.85397C14.7596 6.94774 14.6325 7.00041 14.4998 7.00041H11.4998C11.3672 7.00041 11.2401 6.94774 11.1463 6.85397C11.0525 6.7602 10.9998 6.63302 10.9998 6.50041C10.9998 6.36781 11.0525 6.24063 11.1463 6.14686C11.2401 6.05309 11.3672 6.00041 11.4998 6.00041H13.2123L11.5505 4.47791L11.5348 4.46291C10.8399 3.76822 9.95564 3.2937 8.99256 3.09863C8.02949 2.90356 7.03029 2.99659 6.11978 3.3661C5.20927 3.73561 4.42782 4.36522 3.87305 5.17627C3.31829 5.98732 3.0148 6.94385 3.00051 7.92638C2.98621 8.90891 3.26174 9.87387 3.79268 10.7007C4.32361 11.5276 5.08641 12.1796 5.98578 12.5755C6.88516 12.9713 7.88123 13.0934 8.84957 12.9264C9.81792 12.7594 10.7156 12.3108 11.4305 11.6367C11.5269 11.5455 11.6555 11.4964 11.7881 11.5C11.9208 11.5037 12.0465 11.56 12.1377 11.6564C12.2288 11.7527 12.278 11.8814 12.2743 12.014C12.2706 12.1466 12.2144 12.2724 12.118 12.3635C11.0064 13.4177 9.53182 14.0039 7.99984 14.0004H7.91734C6.93468 13.987 5.97036 13.7323 5.10915 13.2589C4.24794 12.7855 3.51621 12.1078 2.97825 11.2853C2.4403 10.4629 2.11261 9.52089 2.02397 8.54214C1.93533 7.56339 2.08846 6.57785 2.46991 5.67214C2.85136 4.76643 3.44944 3.96828 4.21159 3.34785C4.97373 2.72741 5.87662 2.30369 6.84087 2.11391C7.80513 1.92413 8.80125 1.97412 9.74166 2.25947C10.6821 2.54482 11.538 3.0568 12.2342 3.75041L13.9998 5.36291V3.50041C13.9998 3.36781 14.0525 3.24063 14.1463 3.14686C14.2401 3.05309 14.3672 3.00041 14.4998 3.00041C14.6325 3.00041 14.7596 3.05309 14.8534 3.14686C14.9472 3.24063 14.9998 3.36781 14.9998 3.50041Z"})}),i$u=()=>m$K.jsx("g",{id:"Icon=right",children:m$K.jsx("path",{id:"Vector",d:"M11.3535 8.35403L6.35354 13.354C6.30708 13.4005 6.25193 13.4373 6.19124 13.4625C6.13054 13.4876 6.06549 13.5006 5.99979 13.5006C5.93409 13.5006 5.86904 13.4876 5.80834 13.4625C5.74764 13.4373 5.69249 13.4005 5.64604 13.354C5.59958 13.3076 5.56273 13.2524 5.53759 13.1917C5.51245 13.131 5.49951 13.066 5.49951 13.0003C5.49951 12.9346 5.51245 12.8695 5.53759 12.8088C5.56273 12.7481 5.59958 12.693 5.64604 12.6465L10.2929 8.00028L5.64604 3.35403C5.55222 3.26021 5.49951 3.13296 5.49951 3.00028C5.49951 2.8676 5.55222 2.74035 5.64604 2.64653C5.73986 2.55271 5.86711 2.5 5.99979 2.5C6.13247 2.5 6.25972 2.55271 6.35354 2.64653L11.3535 7.64653C11.4 7.69296 11.4369 7.74811 11.4621 7.80881C11.4872 7.86951 11.5002 7.93457 11.5002 8.00028C11.5002 8.06599 11.4872 8.13105 11.4621 8.19175C11.4369 8.25245 11.4 8.30759 11.3535 8.35403Z"})}),t$f=()=>m$K.jsx("g",{id:"Icon=search",children:m$K.jsx("path",{id:"Vector",d:"M14.3539 13.6464L11.2245 10.5176C12.1315 9.42871 12.5838 8.03201 12.4873 6.6181C12.3908 5.20419 11.7528 3.88193 10.7062 2.92638C9.65963 1.97082 8.28492 1.45555 6.86808 1.48775C5.45125 1.51995 4.10137 2.09714 3.09926 3.09926C2.09714 4.10137 1.51995 5.45125 1.48775 6.86808C1.45555 8.28492 1.97082 9.65963 2.92638 10.7062C3.88193 11.7528 5.20419 12.3908 6.6181 12.4873C8.03201 12.5838 9.42871 12.1315 10.5176 11.2245L13.6464 14.3539C13.6928 14.4003 13.748 14.4372 13.8087 14.4623C13.8694 14.4875 13.9344 14.5004 14.0001 14.5004C14.0658 14.5004 14.1309 14.4875 14.1916 14.4623C14.2523 14.4372 14.3074 14.4003 14.3539 14.3539C14.4003 14.3074 14.4372 14.2523 14.4623 14.1916C14.4875 14.1309 14.5004 14.0658 14.5004 14.0001C14.5004 13.9344 14.4875 13.8694 14.4623 13.8087C14.4372 13.748 14.4003 13.6928 14.3539 13.6464ZM2.50014 7.00014C2.50014 6.11013 2.76406 5.2401 3.25853 4.50008C3.753 3.76006 4.4558 3.18328 5.27807 2.84268C6.10034 2.50209 7.00514 2.41298 7.87805 2.58661C8.75096 2.76024 9.55279 3.18883 10.1821 3.81816C10.8115 4.4475 11.24 5.24932 11.4137 6.12224C11.5873 6.99515 11.4982 7.89995 11.1576 8.72222C10.817 9.54449 10.2402 10.2473 9.50021 10.7418C8.76019 11.2362 7.89016 11.5001 7.00014 11.5001C5.80708 11.4988 4.66325 11.0243 3.81962 10.1807C2.976 9.33704 2.50147 8.19321 2.50014 7.00014Z"})}),o$X=()=>m$K.jsx("g",{id:"Icon=table",children:m$K.jsx("path",{id:"Vector",d:"M14 3H2C1.86739 3 1.74021 3.05268 1.64645 3.14645C1.55268 3.24021 1.5 3.36739 1.5 3.5V12C1.5 12.2652 1.60536 12.5196 1.79289 12.7071C1.98043 12.8946 2.23478 13 2.5 13H13.5C13.7652 13 14.0196 12.8946 14.2071 12.7071C14.3946 12.5196 14.5 12.2652 14.5 12V3.5C14.5 3.36739 14.4473 3.24021 14.3536 3.14645C14.2598 3.05268 14.1326 3 14 3ZM2.5 7H5V9H2.5V7ZM6 7H13.5V9H6V7ZM13.5 4V6H2.5V4H13.5ZM2.5 10H5V12H2.5V10ZM13.5 12H6V10H13.5V12Z"})}),s$o=()=>m$K.jsxs("g",{id:"Icon=timeline",children:[m$K.jsx("path",{d:"M1.23336 13.7217H2.39293C2.52617 14.2763 3.02764 14.69 3.62511 14.69C4.22259 14.69 4.72405 14.2763 4.8573 13.7217H6.76812C6.90137 14.2763 7.40283 14.69 8.00031 14.69C8.59778 14.69 9.09924 14.2763 9.23249 13.7217H11.1427C11.276 14.2763 11.7774 14.69 12.3749 14.69C12.9724 14.69 13.4738 14.2763 13.6071 13.7217H14.7667C14.9298 13.7217 15.0625 13.5901 15.0625 13.427C15.0625 13.2639 14.9298 13.1322 14.7667 13.1322H13.607C13.4727 12.5783 12.9719 12.165 12.3749 12.165C11.778 12.165 11.2766 12.5782 11.1428 13.1322H9.23178C9.0975 12.5783 8.59666 12.165 7.99971 12.165C7.40275 12.165 6.90192 12.5783 6.76764 13.1322H4.85659C4.7223 12.5783 4.22147 12.165 3.62452 12.165C3.02756 12.165 2.52673 12.5783 2.39244 13.1322H1.23334C1.07019 13.1322 0.9375 13.2639 0.9375 13.427C0.9375 13.5901 1.07021 13.7217 1.23336 13.7217ZM12.3753 12.7551C12.7483 12.7551 13.0519 13.0572 13.0519 13.4281C13.0519 13.7986 12.7488 14.1012 12.3753 14.1012C12.0018 14.1012 11.6987 13.7991 11.6987 13.4281C11.6987 13.0571 12.0018 12.7551 12.3753 12.7551ZM8.00017 12.7551C8.37315 12.7551 8.67678 13.0572 8.67678 13.4281C8.67678 13.7986 8.37366 14.1012 8.00017 14.1012C7.62665 14.1012 7.32357 13.7991 7.32357 13.4281C7.32357 13.0571 7.62665 12.7551 8.00017 12.7551ZM3.62501 12.7551C3.99799 12.7551 4.30161 13.0572 4.30161 13.4281C4.30161 13.7986 3.9985 14.1012 3.62501 14.1012C3.25149 14.1012 2.9484 13.7991 2.9484 13.4281C2.9484 13.0571 3.25149 12.7551 3.62501 12.7551Z",strokeWidth:"0.125"}),m$K.jsx("path",{d:"M8 1C7.01109 1 6.0444 1.29324 5.22215 1.84265C4.3999 2.39206 3.75904 3.17295 3.3806 4.08658C3.00217 5.00021 2.90315 6.00555 3.09608 6.97545C3.289 7.94536 3.76521 8.83627 4.46447 9.53553C5.16373 10.2348 6.05465 10.711 7.02455 10.9039C7.99445 11.0969 8.99979 10.9978 9.91342 10.6194C10.827 10.241 11.6079 9.60009 12.1573 8.77785C12.7068 7.9556 13 6.98891 13 6C12.9986 4.67435 12.4714 3.40339 11.534 2.46601C10.5966 1.52863 9.32565 1.0014 8 1ZM8 10.2308C7.16323 10.2308 6.34526 9.98264 5.64951 9.51775C4.95377 9.05287 4.4115 8.39212 4.09128 7.61904C3.77106 6.84597 3.68728 5.99531 3.85053 5.17462C4.01377 4.35393 4.41671 3.60008 5.0084 3.00839C5.60008 2.41671 6.35393 2.01377 7.17462 1.85052C7.99531 1.68728 8.84597 1.77106 9.61905 2.09128C10.3921 2.4115 11.0529 2.95376 11.5178 3.64951C11.9826 4.34526 12.2308 5.16323 12.2308 6C12.2295 7.12168 11.7833 8.19705 10.9902 8.9902C10.1971 9.78335 9.12168 10.2295 8 10.2308ZM11.0769 6C11.0769 6.10201 11.0364 6.19983 10.9643 6.27196C10.8921 6.34409 10.7943 6.38461 10.6923 6.38461H8C7.89799 6.38461 7.80017 6.34409 7.72804 6.27196C7.65591 6.19983 7.61539 6.10201 7.61539 6V3.30769C7.61539 3.20569 7.65591 3.10786 7.72804 3.03573C7.80017 2.9636 7.89799 2.92308 8 2.92308C8.10201 2.92308 8.19984 2.9636 8.27197 3.03573C8.34409 3.10786 8.38462 3.20569 8.38462 3.30769V5.61538H10.6923C10.7943 5.61538 10.8921 5.65591 10.9643 5.72803C11.0364 5.80016 11.0769 5.89799 11.0769 6Z"})]}),i$t=()=>m$K.jsx("g",{id:"Icon=zoom_in",children:m$K.jsx("path",{id:"Vector",d:"M14 8C14 8.13261 13.9473 8.25979 13.8536 8.35355C13.7598 8.44732 13.6326 8.5 13.5 8.5H8.5V13.5C8.5 13.6326 8.44732 13.7598 8.35355 13.8536C8.25979 13.9473 8.13261 14 8 14C7.86739 14 7.74021 13.9473 7.64645 13.8536C7.55268 13.7598 7.5 13.6326 7.5 13.5V8.5H2.5C2.36739 8.5 2.24021 8.44732 2.14645 8.35355C2.05268 8.25979 2 8.13261 2 8C2 7.86739 2.05268 7.74021 2.14645 7.64645C2.24021 7.55268 2.36739 7.5 2.5 7.5H7.5V2.5C7.5 2.36739 7.55268 2.24021 7.64645 2.14645C7.74021 2.05268 7.86739 2 8 2C8.13261 2 8.25979 2.05268 8.35355 2.14645C8.44732 2.24021 8.5 2.36739 8.5 2.5V7.5H13.5C13.6326 7.5 13.7598 7.55268 13.8536 7.64645C13.9473 7.74021 14 7.86739 14 8Z"})}),r$U=()=>m$K.jsx("g",{id:"Icon=zoom_out",children:m$K.jsx("path",{id:"Vector",d:"M14 8C14 8.13261 13.9473 8.25979 13.8536 8.35355C13.7598 8.44732 13.6326 8.5 13.5 8.5H2.5C2.36739 8.5 2.24021 8.44732 2.14645 8.35355C2.05268 8.25979 2 8.13261 2 8C2 7.86739 2.05268 7.74021 2.14645 7.64645C2.24021 7.55268 2.36739 7.5 2.5 7.5H13.5C13.6326 7.5 13.7598 7.55268 13.8536 7.64645C13.9473 7.74021 14 7.86739 14 8Z"})}),R$f=16,ao$2=({className:Kt,name:Vt,style:Hr,size:Wr=R$f})=>{let Yr;switch(Vt){case"bullet":Yr=e$1k;break;case"checkbox":Yr=c$J;break;case"checkbox_filled":Yr=t$i;break;case"close":Yr=t$h;break;case"date":Yr=H$j;break;case"down":Yr=n$l;break;case"export":Yr=r$V;break;case"filters":Yr=e$1j;break;case"gender":Yr=o$$;break;case"info":Yr=i$w;break;case"left_arrow":Yr=t$g;break;case"left":Yr=e$1i;break;case"list":Yr=o$_;break;case"location":Yr=i$v;break;case"occupation":Yr=V$e;break;case"participants":Yr=o$Z;break;case"person":Yr=s$p;break;case"reset":Yr=o$Y;break;case"right":Yr=i$u;break;case"search":Yr=t$f;break;case"table":Yr=o$X;break;case"timeline":Yr=s$o;break;case"zoom_in":Yr=i$t;break;case"zoom_out":Yr=r$U;break;default:Yr=null}return Yr?m$K.jsx("svg",{width:Wr,height:Wr,fill:"currentColor",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",id:Vt,style:Hr,className:i$K("icon","flex-shrink-0",Kt),children:m$K.jsx(Yr,{})}):null};function c$I(Kt){const Vt=reactExports.useRef({value:Kt,previous:Kt});return reactExports.useMemo(()=>(Vt.current.value!==Kt&&(Vt.current.previous=Vt.current.value,Vt.current.value=Kt),Vt.current.previous),[Kt])}function z$d(Kt){const[Vt,Hr]=reactExports.useState(void 0);return e$1w(()=>{if(Kt){Hr({width:Kt.offsetWidth,height:Kt.offsetHeight});const Wr=new ResizeObserver(Yr=>{if(!Array.isArray(Yr)||!Yr.length)return;const Zr=Yr[0];let en,tn;if("borderBoxSize"in Zr){const rn=Zr.borderBoxSize,nn=Array.isArray(rn)?rn[0]:rn;en=nn.inlineSize,tn=nn.blockSize}else en=Kt.offsetWidth,tn=Kt.offsetHeight;Hr({width:en,height:tn})});return Wr.observe(Kt,{box:"border-box"}),()=>Wr.unobserve(Kt)}else Hr(void 0)},[Kt]),Vt}const g$w="Checkbox",[K$b,te$7]=P$n(g$w);K$b(g$w);function h$A(Kt,Vt,{checkForDefaultPrevented:Hr=!0}={}){return function(Wr){if(Kt==null||Kt(Wr),Hr===!1||!Wr.defaultPrevented)return Vt==null?void 0:Vt(Wr)}}function c$H(Kt,Vt){typeof Kt=="function"?Kt(Vt):Kt!=null&&(Kt.current=Vt)}function u$x(...Kt){return Vt=>Kt.forEach(Hr=>c$H(Hr,Vt))}function i$s(...Kt){return reactExports.useCallback(u$x(...Kt),Kt)}function P$k(Kt,Vt=[]){let Hr=[];function Wr(Zr,en){const tn=reactExports.createContext(en),rn=Hr.length;Hr=[...Hr,en];function nn(an){const{scope:$n,children:ln,...Hn}=an,jn=($n==null?void 0:$n[Kt][rn])||tn,zn=reactExports.useMemo(()=>Hn,Object.values(Hn));return m$K.jsx(jn.Provider,{value:zn,children:ln})}function on(an,$n){const ln=($n==null?void 0:$n[Kt][rn])||tn,Hn=reactExports.useContext(ln);if(Hn)return Hn;if(en!==void 0)return en;throw new Error(`\`${an}\` must be used within \`${Zr}\``)}return nn.displayName=Zr+"Provider",[nn,on]}const Yr=()=>{const Zr=Hr.map(en=>reactExports.createContext(en));return function(en){const tn=(en==null?void 0:en[Kt])||Zr;return reactExports.useMemo(()=>({[`__scope${Kt}`]:{...en,[Kt]:tn}}),[en,tn])}};return Yr.scopeName=Kt,[Wr,h$z(Yr,...Vt)]}function h$z(...Kt){const Vt=Kt[0];if(Kt.length===1)return Vt;const Hr=()=>{const Wr=Kt.map(Yr=>({useScope:Yr(),scopeName:Yr.scopeName}));return function(Yr){const Zr=Wr.reduce((en,{useScope:tn,scopeName:rn})=>{const nn=tn(Yr)[`__scope${rn}`];return{...en,...nn}},{});return reactExports.useMemo(()=>({[`__scope${Vt.scopeName}`]:Zr}),[Zr])}};return Hr.scopeName=Vt.scopeName,Hr}var d$A=reactExports.forwardRef((Kt,Vt)=>{const{children:Hr,...Wr}=Kt,Yr=reactExports.Children.toArray(Hr),Zr=Yr.find(g$v);if(Zr){const en=Zr.props.children,tn=Yr.map(rn=>rn===Zr?reactExports.Children.count(en)>1?reactExports.Children.only(null):reactExports.isValidElement(en)?en.props.children:null:rn);return m$K.jsx(f$E,{...Wr,ref:Vt,children:reactExports.isValidElement(en)?reactExports.cloneElement(en,void 0,tn):null})}return m$K.jsx(f$E,{...Wr,ref:Vt,children:Hr})});d$A.displayName="Slot";var f$E=reactExports.forwardRef((Kt,Vt)=>{const{children:Hr,...Wr}=Kt;if(reactExports.isValidElement(Hr)){const Yr=h$y(Hr);return reactExports.cloneElement(Hr,{...y$n(Wr,Hr.props),ref:Vt?u$x(Vt,Yr):Yr})}return reactExports.Children.count(Hr)>1?reactExports.Children.only(null):null});f$E.displayName="SlotClone";var m$H=({children:Kt})=>m$K.jsx(m$K.Fragment,{children:Kt});function g$v(Kt){return reactExports.isValidElement(Kt)&&Kt.type===m$H}function y$n(Kt,Vt){const Hr={...Vt};for(const Wr in Vt){const Yr=Kt[Wr],Zr=Vt[Wr];/^on[A-Z]/.test(Wr)?Yr&&Zr?Hr[Wr]=(...en)=>{Zr(...en),Yr(...en)}:Yr&&(Hr[Wr]=Yr):Wr==="style"?Hr[Wr]={...Yr,...Zr}:Wr==="className"&&(Hr[Wr]=[Yr,Zr].filter(Boolean).join(" "))}return{...Kt,...Hr}}function h$y(Kt){var Vt,Hr;let Wr=(Vt=Object.getOwnPropertyDescriptor(Kt.props,"ref"))==null?void 0:Vt.get,Yr=Wr&&"isReactWarning"in Wr&&Wr.isReactWarning;return Yr?Kt.ref:(Wr=(Hr=Object.getOwnPropertyDescriptor(Kt,"ref"))==null?void 0:Hr.get,Yr=Wr&&"isReactWarning"in Wr&&Wr.isReactWarning,Yr?Kt.props.ref:Kt.props.ref||Kt.ref)}var c$G=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],v$C=c$G.reduce((Kt,Vt)=>{const Hr=reactExports.forwardRef((Wr,Yr)=>{const{asChild:Zr,...en}=Wr,tn=Zr?d$A:Vt;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m$K.jsx(tn,{...en,ref:Yr})});return Hr.displayName=`Primitive.${Vt}`,{...Kt,[Vt]:Hr}},{});function h$x(Kt,Vt){Kt&&reactDomExports.flushSync(()=>Kt.dispatchEvent(Vt))}function o$W(Kt){const Vt=reactExports.useRef(Kt);return reactExports.useEffect(()=>{Vt.current=Kt}),reactExports.useMemo(()=>(...Hr)=>{var Wr;return(Wr=Vt.current)==null?void 0:Wr.call(Vt,...Hr)},[])}function p$C(Kt,Vt=globalThis==null?void 0:globalThis.document){const Hr=o$W(Kt);reactExports.useEffect(()=>{const Wr=Yr=>{Yr.key==="Escape"&&Hr(Yr)};return Vt.addEventListener("keydown",Wr,{capture:!0}),()=>Vt.removeEventListener("keydown",Wr,{capture:!0})},[Hr,Vt])}var j$m="DismissableLayer",p$B="dismissableLayer.update",z$c="dismissableLayer.pointerDownOutside",H$i="dismissableLayer.focusOutside",L$m,T$s=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),M$p=reactExports.forwardRef((Kt,Vt)=>{const{disableOutsidePointerEvents:Hr=!1,onEscapeKeyDown:Wr,onPointerDownOutside:Yr,onFocusOutside:Zr,onInteractOutside:en,onDismiss:tn,...rn}=Kt,nn=reactExports.useContext(T$s),[on,an]=reactExports.useState(null),$n=(on==null?void 0:on.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,ln]=reactExports.useState({}),Hn=i$s(Vt,ps=>an(ps)),jn=Array.from(nn.layers),[zn]=[...nn.layersWithOutsidePointerEventsDisabled].slice(-1),Wn=jn.indexOf(zn),ei=on?jn.indexOf(on):-1,$i=nn.layersWithOutsidePointerEventsDisabled.size>0,Mi=ei>=Wn,Ni=q$k(ps=>{const $s=ps.target,Ws=[...nn.branches].some(Hs=>Hs.contains($s));!Mi||Ws||(Yr==null||Yr(ps),en==null||en(ps),ps.defaultPrevented||tn==null||tn())},$n),Ts=G$h(ps=>{const $s=ps.target;[...nn.branches].some(Ws=>Ws.contains($s))||(Zr==null||Zr(ps),en==null||en(ps),ps.defaultPrevented||tn==null||tn())},$n);return p$C(ps=>{ei===nn.layers.size-1&&(Wr==null||Wr(ps),!ps.defaultPrevented&&tn&&(ps.preventDefault(),tn()))},$n),reactExports.useEffect(()=>{if(on)return Hr&&(nn.layersWithOutsidePointerEventsDisabled.size===0&&(L$m=$n.body.style.pointerEvents,$n.body.style.pointerEvents="none"),nn.layersWithOutsidePointerEventsDisabled.add(on)),nn.layers.add(on),O$q(),()=>{Hr&&nn.layersWithOutsidePointerEventsDisabled.size===1&&($n.body.style.pointerEvents=L$m)}},[on,$n,Hr,nn]),reactExports.useEffect(()=>()=>{on&&(nn.layers.delete(on),nn.layersWithOutsidePointerEventsDisabled.delete(on),O$q())},[on,nn]),reactExports.useEffect(()=>{const ps=()=>ln({});return document.addEventListener(p$B,ps),()=>document.removeEventListener(p$B,ps)},[]),m$K.jsx(v$C.div,{...rn,ref:Hn,style:{pointerEvents:$i?Mi?"auto":"none":void 0,...Kt.style},onFocusCapture:h$A(Kt.onFocusCapture,Ts.onFocusCapture),onBlurCapture:h$A(Kt.onBlurCapture,Ts.onBlurCapture),onPointerDownCapture:h$A(Kt.onPointerDownCapture,Ni.onPointerDownCapture)})});M$p.displayName=j$m;var X$g="DismissableLayerBranch",Y$e=reactExports.forwardRef((Kt,Vt)=>{const Hr=reactExports.useContext(T$s),Wr=reactExports.useRef(null),Yr=i$s(Vt,Wr);return reactExports.useEffect(()=>{const Zr=Wr.current;if(Zr)return Hr.branches.add(Zr),()=>{Hr.branches.delete(Zr)}},[Hr.branches]),m$K.jsx(v$C.div,{...Kt,ref:Yr})});Y$e.displayName=X$g;function q$k(Kt,Vt=globalThis==null?void 0:globalThis.document){const Hr=o$W(Kt),Wr=reactExports.useRef(!1),Yr=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const Zr=tn=>{if(tn.target&&!Wr.current){let rn=function(){B$k(z$c,Hr,nn,{discrete:!0})};const nn={originalEvent:tn};tn.pointerType==="touch"?(Vt.removeEventListener("click",Yr.current),Yr.current=rn,Vt.addEventListener("click",Yr.current,{once:!0})):rn()}else Vt.removeEventListener("click",Yr.current);Wr.current=!1},en=window.setTimeout(()=>{Vt.addEventListener("pointerdown",Zr)},0);return()=>{window.clearTimeout(en),Vt.removeEventListener("pointerdown",Zr),Vt.removeEventListener("click",Yr.current)}},[Vt,Hr]),{onPointerDownCapture:()=>Wr.current=!0}}function G$h(Kt,Vt=globalThis==null?void 0:globalThis.document){const Hr=o$W(Kt),Wr=reactExports.useRef(!1);return reactExports.useEffect(()=>{const Yr=Zr=>{Zr.target&&!Wr.current&&B$k(H$i,Hr,{originalEvent:Zr},{discrete:!1})};return Vt.addEventListener("focusin",Yr),()=>Vt.removeEventListener("focusin",Yr)},[Vt,Hr]),{onFocusCapture:()=>Wr.current=!0,onBlurCapture:()=>Wr.current=!1}}function O$q(){const Kt=new CustomEvent(p$B);document.dispatchEvent(Kt)}function B$k(Kt,Vt,Hr,{discrete:Wr}){const Yr=Hr.originalEvent.target,Zr=new CustomEvent(Kt,{bubbles:!1,cancelable:!0,detail:Hr});Vt&&Yr.addEventListener(Kt,Vt,{once:!0}),Wr?h$x(Yr,Zr):Yr.dispatchEvent(Zr)}var t$e=0;function a$_(){reactExports.useEffect(()=>{const Kt=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",Kt[0]??n$k()),document.body.insertAdjacentElement("beforeend",Kt[1]??n$k()),t$e++,()=>{t$e===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(Vt=>Vt.remove()),t$e--}},[])}function n$k(){const Kt=document.createElement("span");return Kt.setAttribute("data-radix-focus-guard",""),Kt.tabIndex=0,Kt.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",Kt}var F$g="focusScope.autoFocusOnMount",T$r="focusScope.autoFocusOnUnmount",N$k={bubbles:!1,cancelable:!0},K$a="FocusScope",k$i=reactExports.forwardRef((Kt,Vt)=>{const{loop:Hr=!1,trapped:Wr=!1,onMountAutoFocus:Yr,onUnmountAutoFocus:Zr,...en}=Kt,[tn,rn]=reactExports.useState(null),nn=o$W(Yr),on=o$W(Zr),an=reactExports.useRef(null),$n=i$s(Vt,jn=>rn(jn)),ln=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(Wr){let jn=function($i){if(ln.paused||!tn)return;const Mi=$i.target;tn.contains(Mi)?an.current=Mi:f$D(an.current,{select:!0})},zn=function($i){if(ln.paused||!tn)return;const Mi=$i.relatedTarget;Mi!==null&&(tn.contains(Mi)||f$D(an.current,{select:!0}))},Wn=function($i){if(document.activeElement===document.body)for(const Mi of $i)Mi.removedNodes.length>0&&f$D(tn)};document.addEventListener("focusin",jn),document.addEventListener("focusout",zn);const ei=new MutationObserver(Wn);return tn&&ei.observe(tn,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",jn),document.removeEventListener("focusout",zn),ei.disconnect()}}},[Wr,tn,ln.paused]),reactExports.useEffect(()=>{if(tn){S$p.add(ln);const jn=document.activeElement;if(!tn.contains(jn)){const zn=new CustomEvent(F$g,N$k);tn.addEventListener(F$g,nn),tn.dispatchEvent(zn),zn.defaultPrevented||(w$q(V$d(I$d(tn)),{select:!0}),document.activeElement===jn&&f$D(tn))}return()=>{tn.removeEventListener(F$g,nn),setTimeout(()=>{const zn=new CustomEvent(T$r,N$k);tn.addEventListener(T$r,on),tn.dispatchEvent(zn),zn.defaultPrevented||f$D(jn??document.body,{select:!0}),tn.removeEventListener(T$r,on),S$p.remove(ln)},0)}}},[tn,nn,on,ln]);const Hn=reactExports.useCallback(jn=>{if(!Hr&&!Wr||ln.paused)return;const zn=jn.key==="Tab"&&!jn.altKey&&!jn.ctrlKey&&!jn.metaKey,Wn=document.activeElement;if(zn&&Wn){const ei=jn.currentTarget,[$i,Mi]=x$r(ei);$i&&Mi?!jn.shiftKey&&Wn===Mi?(jn.preventDefault(),Hr&&f$D($i,{select:!0})):jn.shiftKey&&Wn===$i&&(jn.preventDefault(),Hr&&f$D(Mi,{select:!0})):Wn===ei&&jn.preventDefault()}},[Hr,Wr,ln.paused]);return m$K.jsx(v$C.div,{tabIndex:-1,...en,ref:$n,onKeyDown:Hn})});k$i.displayName=K$a;function w$q(Kt,{select:Vt=!1}={}){const Hr=document.activeElement;for(const Wr of Kt)if(f$D(Wr,{select:Vt}),document.activeElement!==Hr)return}function x$r(Kt){const Vt=I$d(Kt),Hr=O$p(Vt,Kt),Wr=O$p(Vt.reverse(),Kt);return[Hr,Wr]}function I$d(Kt){const Vt=[],Hr=document.createTreeWalker(Kt,NodeFilter.SHOW_ELEMENT,{acceptNode:Wr=>{const Yr=Wr.tagName==="INPUT"&&Wr.type==="hidden";return Wr.disabled||Wr.hidden||Yr?NodeFilter.FILTER_SKIP:Wr.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;Hr.nextNode();)Vt.push(Hr.currentNode);return Vt}function O$p(Kt,Vt){for(const Hr of Kt)if(!D$f(Hr,{upTo:Vt}))return Hr}function D$f(Kt,{upTo:Vt}){if(getComputedStyle(Kt).visibility==="hidden")return!0;for(;Kt;){if(Vt!==void 0&&Kt===Vt)return!1;if(getComputedStyle(Kt).display==="none")return!0;Kt=Kt.parentElement}return!1}function H$h(Kt){return Kt instanceof HTMLInputElement&&"select"in Kt}function f$D(Kt,{select:Vt=!1}={}){if(Kt&&Kt.focus){const Hr=document.activeElement;Kt.focus({preventScroll:!0}),Kt!==Hr&&H$h(Kt)&&Vt&&Kt.select()}}var S$p=j$l();function j$l(){let Kt=[];return{add(Vt){const Hr=Kt[0];Vt!==Hr&&(Hr==null||Hr.pause()),Kt=C$o(Kt,Vt),Kt.unshift(Vt)},remove(Vt){var Hr;Kt=C$o(Kt,Vt),(Hr=Kt[0])==null||Hr.resume()}}}function C$o(Kt,Vt){const Hr=[...Kt],Wr=Hr.indexOf(Vt);return Wr!==-1&&Hr.splice(Wr,1),Hr}function V$d(Kt){return Kt.filter(Vt=>Vt.tagName!=="A")}var o$V=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{};const P$j=["top","right","bottom","left"],l$u=Math.min,m$G=Math.max,M$o=Math.round,O$o=Math.floor,S$o=Kt=>({x:Kt,y:Kt}),p$A={left:"right",right:"left",bottom:"top",top:"bottom"},a$Z={start:"end",end:"start"};function w$p(Kt,Vt,Hr){return m$G(Kt,l$u(Vt,Hr))}function j$k(Kt,Vt){return typeof Kt=="function"?Kt(Vt):Kt}function u$w(Kt){return Kt.split("-")[0]}function g$u(Kt){return Kt.split("-")[1]}function h$w(Kt){return Kt==="x"?"y":"x"}function x$q(Kt){return Kt==="y"?"height":"width"}function b$n(Kt){return["top","bottom"].includes(u$w(Kt))?"y":"x"}function d$z(Kt){return h$w(b$n(Kt))}function C$n(Kt,Vt,Hr){Hr===void 0&&(Hr=!1);const Wr=g$u(Kt),Yr=d$z(Kt),Zr=x$q(Yr);let en=Yr==="x"?Wr===(Hr?"end":"start")?"right":"left":Wr==="start"?"bottom":"top";return Vt.reference[Zr]>Vt.floating[Zr]&&(en=f$C(en)),[en,f$C(en)]}function L$l(Kt){const Vt=f$C(Kt);return[c$F(Kt),Vt,c$F(Vt)]}function c$F(Kt){return Kt.replace(/start|end/g,Vt=>a$Z[Vt])}function A$f(Kt,Vt,Hr){const Wr=["left","right"],Yr=["right","left"],Zr=["top","bottom"],en=["bottom","top"];switch(Kt){case"top":case"bottom":return Hr?Vt?Yr:Wr:Vt?Wr:Yr;case"left":case"right":return Vt?Zr:en;default:return[]}}function E$k(Kt,Vt,Hr,Wr){const Yr=g$u(Kt);let Zr=A$f(u$w(Kt),Hr==="start",Wr);return Yr&&(Zr=Zr.map(en=>en+"-"+Yr),Vt&&(Zr=Zr.concat(Zr.map(c$F)))),Zr}function f$C(Kt){return Kt.replace(/left|right|bottom|top/g,Vt=>p$A[Vt])}function y$m(Kt){return{top:0,right:0,bottom:0,left:0,...Kt}}function R$e(Kt){return typeof Kt!="number"?y$m(Kt):{top:Kt,right:Kt,bottom:Kt,left:Kt}}function T$q(Kt){return{...Kt,top:Kt.y,left:Kt.x,right:Kt.x+Kt.width,bottom:Kt.y+Kt.height}}function I$c(Kt,Vt,Hr){let{reference:Wr,floating:Yr}=Kt;const Zr=b$n(Vt),en=d$z(Vt),tn=x$q(en),rn=u$w(Vt),nn=Zr==="y",on=Wr.x+Wr.width/2-Yr.width/2,an=Wr.y+Wr.height/2-Yr.height/2,$n=Wr[tn]/2-Yr[tn]/2;let ln;switch(rn){case"top":ln={x:on,y:Wr.y-Yr.height};break;case"bottom":ln={x:on,y:Wr.y+Wr.height};break;case"right":ln={x:Wr.x+Wr.width,y:an};break;case"left":ln={x:Wr.x-Yr.width,y:an};break;default:ln={x:Wr.x,y:Wr.y}}switch(g$u(Vt)){case"start":ln[en]-=$n*(Hr&&nn?-1:1);break;case"end":ln[en]+=$n*(Hr&&nn?-1:1);break}return ln}const se$a=async(Kt,Vt,Hr)=>{const{placement:Wr="bottom",strategy:Yr="absolute",middleware:Zr=[],platform:en}=Hr,tn=Zr.filter(Boolean),rn=await(en.isRTL==null?void 0:en.isRTL(Vt));let nn=await en.getElementRects({reference:Kt,floating:Vt,strategy:Yr}),{x:on,y:an}=I$c(nn,Wr,rn),$n=Wr,ln={},Hn=0;for(let jn=0;jn<tn.length;jn++){const{name:zn,fn:Wn}=tn[jn],{x:ei,y:$i,data:Mi,reset:Ni}=await Wn({x:on,y:an,initialPlacement:Wr,placement:$n,strategy:Yr,middlewareData:ln,rects:nn,platform:en,elements:{reference:Kt,floating:Vt}});on=ei??on,an=$i??an,ln={...ln,[zn]:{...ln[zn],...Mi}},Ni&&Hn<=50&&(Hn++,typeof Ni=="object"&&(Ni.placement&&($n=Ni.placement),Ni.rects&&(nn=Ni.rects===!0?await en.getElementRects({reference:Kt,floating:Vt,strategy:Yr}):Ni.rects),{x:on,y:an}=I$c(nn,$n,rn)),jn=-1)}return{x:on,y:an,placement:$n,strategy:Yr,middlewareData:ln}};async function F$f(Kt,Vt){var Hr;Vt===void 0&&(Vt={});const{x:Wr,y:Yr,platform:Zr,rects:en,elements:tn,strategy:rn}=Kt,{boundary:nn="clippingAncestors",rootBoundary:on="viewport",elementContext:an="floating",altBoundary:$n=!1,padding:ln=0}=j$k(Vt,Kt),Hn=R$e(ln),jn=tn[$n?an==="floating"?"reference":"floating":an],zn=T$q(await Zr.getClippingRect({element:(Hr=await(Zr.isElement==null?void 0:Zr.isElement(jn)))==null||Hr?jn:jn.contextElement||await(Zr.getDocumentElement==null?void 0:Zr.getDocumentElement(tn.floating)),boundary:nn,rootBoundary:on,strategy:rn})),Wn=an==="floating"?{...en.floating,x:Wr,y:Yr}:en.reference,ei=await(Zr.getOffsetParent==null?void 0:Zr.getOffsetParent(tn.floating)),$i=await(Zr.isElement==null?void 0:Zr.isElement(ei))?await(Zr.getScale==null?void 0:Zr.getScale(ei))||{x:1,y:1}:{x:1,y:1},Mi=T$q(Zr.convertOffsetParentRelativeRectToViewportRelativeRect?await Zr.convertOffsetParentRelativeRectToViewportRelativeRect({elements:tn,rect:Wn,offsetParent:ei,strategy:rn}):Wn);return{top:(zn.top-Mi.top+Hn.top)/$i.y,bottom:(Mi.bottom-zn.bottom+Hn.bottom)/$i.y,left:(zn.left-Mi.left+Hn.left)/$i.x,right:(Mi.right-zn.right+Hn.right)/$i.x}}const oe$a=Kt=>({name:"arrow",options:Kt,async fn(Vt){const{x:Hr,y:Wr,placement:Yr,rects:Zr,platform:en,elements:tn,middlewareData:rn}=Vt,{element:nn,padding:on=0}=j$k(Kt,Vt)||{};if(nn==null)return{};const an=R$e(on),$n={x:Hr,y:Wr},ln=d$z(Yr),Hn=x$q(ln),jn=await en.getDimensions(nn),zn=ln==="y",Wn=zn?"top":"left",ei=zn?"bottom":"right",$i=zn?"clientHeight":"clientWidth",Mi=Zr.reference[Hn]+Zr.reference[ln]-$n[ln]-Zr.floating[Hn],Ni=$n[ln]-Zr.reference[ln],Ts=await(en.getOffsetParent==null?void 0:en.getOffsetParent(nn));let ps=Ts?Ts[$i]:0;(!ps||!await(en.isElement==null?void 0:en.isElement(Ts)))&&(ps=tn.floating[$i]||Zr.floating[Hn]);const $s=Mi/2-Ni/2,Ws=ps/2-jn[Hn]/2-1,Hs=l$u(an[Wn],Ws),js=l$u(an[ei],Ws),zs=Hs,Xs=ps-jn[Hn]-js,ia=ps/2-jn[Hn]/2+$s,Qs=w$p(zs,ia,Xs),Zs=!rn.arrow&&g$u(Yr)!=null&&ia!==Qs&&Zr.reference[Hn]/2-(ia<zs?Hs:js)-jn[Hn]/2<0,Gs=Zs?ia<zs?ia-zs:ia-Xs:0;return{[ln]:$n[ln]+Gs,data:{[ln]:Qs,centerOffset:ia-Qs-Gs,...Zs&&{alignmentOffset:Gs}},reset:Zs}}}),ce$9=function(Kt){return Kt===void 0&&(Kt={}),{name:"flip",options:Kt,async fn(Vt){var Hr,Wr;const{placement:Yr,middlewareData:Zr,rects:en,initialPlacement:tn,platform:rn,elements:nn}=Vt,{mainAxis:on=!0,crossAxis:an=!0,fallbackPlacements:$n,fallbackStrategy:ln="bestFit",fallbackAxisSideDirection:Hn="none",flipAlignment:jn=!0,...zn}=j$k(Kt,Vt);if((Hr=Zr.arrow)!=null&&Hr.alignmentOffset)return{};const Wn=u$w(Yr),ei=u$w(tn)===tn,$i=await(rn.isRTL==null?void 0:rn.isRTL(nn.floating)),Mi=$n||(ei||!jn?[f$C(tn)]:L$l(tn));!$n&&Hn!=="none"&&Mi.push(...E$k(tn,jn,Hn,$i));const Ni=[tn,...Mi],Ts=await F$f(Vt,zn),ps=[];let $s=((Wr=Zr.flip)==null?void 0:Wr.overflows)||[];if(on&&ps.push(Ts[Wn]),an){const zs=C$n(Yr,en,$i);ps.push(Ts[zs[0]],Ts[zs[1]])}if($s=[...$s,{placement:Yr,overflows:ps}],!ps.every(zs=>zs<=0)){var Ws,Hs;const zs=(((Ws=Zr.flip)==null?void 0:Ws.index)||0)+1,Xs=Ni[zs];if(Xs)return{data:{index:zs,overflows:$s},reset:{placement:Xs}};let ia=(Hs=$s.filter(Qs=>Qs.overflows[0]<=0).sort((Qs,Zs)=>Qs.overflows[1]-Zs.overflows[1])[0])==null?void 0:Hs.placement;if(!ia)switch(ln){case"bestFit":{var js;const Qs=(js=$s.map(Zs=>[Zs.placement,Zs.overflows.filter(Gs=>Gs>0).reduce((Gs,Hl)=>Gs+Hl,0)]).sort((Zs,Gs)=>Zs[1]-Gs[1])[0])==null?void 0:js[0];Qs&&(ia=Qs);break}case"initialPlacement":ia=tn;break}if(Yr!==ia)return{reset:{placement:ia}}}return{}}}};function $$6(Kt,Vt){return{top:Kt.top-Vt.height,right:Kt.right-Vt.width,bottom:Kt.bottom-Vt.height,left:Kt.left-Vt.width}}function q$j(Kt){return P$j.some(Vt=>Kt[Vt]>=0)}const le$5=function(Kt){return Kt===void 0&&(Kt={}),{name:"hide",options:Kt,async fn(Vt){const{rects:Hr}=Vt,{strategy:Wr="referenceHidden",...Yr}=j$k(Kt,Vt);switch(Wr){case"referenceHidden":{const Zr=await F$f(Vt,{...Yr,elementContext:"reference"}),en=$$6(Zr,Hr.reference);return{data:{referenceHiddenOffsets:en,referenceHidden:q$j(en)}}}case"escaped":{const Zr=await F$f(Vt,{...Yr,altBoundary:!0}),en=$$6(Zr,Hr.floating);return{data:{escapedOffsets:en,escaped:q$j(en)}}}default:return{}}}}};async function ne$9(Kt,Vt){const{placement:Hr,platform:Wr,elements:Yr}=Kt,Zr=await(Wr.isRTL==null?void 0:Wr.isRTL(Yr.floating)),en=u$w(Hr),tn=g$u(Hr),rn=b$n(Hr)==="y",nn=["left","top"].includes(en)?-1:1,on=Zr&&rn?-1:1,an=j$k(Vt,Kt);let{mainAxis:$n,crossAxis:ln,alignmentAxis:Hn}=typeof an=="number"?{mainAxis:an,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...an};return tn&&typeof Hn=="number"&&(ln=tn==="end"?Hn*-1:Hn),rn?{x:ln*on,y:$n*nn}:{x:$n*nn,y:ln*on}}const ae$8=function(Kt){return Kt===void 0&&(Kt=0),{name:"offset",options:Kt,async fn(Vt){var Hr,Wr;const{x:Yr,y:Zr,placement:en,middlewareData:tn}=Vt,rn=await ne$9(Vt,Kt);return en===((Hr=tn.offset)==null?void 0:Hr.placement)&&(Wr=tn.arrow)!=null&&Wr.alignmentOffset?{}:{x:Yr+rn.x,y:Zr+rn.y,data:{...rn,placement:en}}}}},re$7=function(Kt){return Kt===void 0&&(Kt={}),{name:"shift",options:Kt,async fn(Vt){const{x:Hr,y:Wr,placement:Yr}=Vt,{mainAxis:Zr=!0,crossAxis:en=!1,limiter:tn={fn:zn=>{let{x:Wn,y:ei}=zn;return{x:Wn,y:ei}}},...rn}=j$k(Kt,Vt),nn={x:Hr,y:Wr},on=await F$f(Vt,rn),an=b$n(u$w(Yr)),$n=h$w(an);let ln=nn[$n],Hn=nn[an];if(Zr){const zn=$n==="y"?"top":"left",Wn=$n==="y"?"bottom":"right",ei=ln+on[zn],$i=ln-on[Wn];ln=w$p(ei,ln,$i)}if(en){const zn=an==="y"?"top":"left",Wn=an==="y"?"bottom":"right",ei=Hn+on[zn],$i=Hn-on[Wn];Hn=w$p(ei,Hn,$i)}const jn=tn.fn({...Vt,[$n]:ln,[an]:Hn});return{...jn,data:{x:jn.x-Hr,y:jn.y-Wr}}}}},fe$9=function(Kt){return Kt===void 0&&(Kt={}),{options:Kt,fn(Vt){const{x:Hr,y:Wr,placement:Yr,rects:Zr,middlewareData:en}=Vt,{offset:tn=0,mainAxis:rn=!0,crossAxis:nn=!0}=j$k(Kt,Vt),on={x:Hr,y:Wr},an=b$n(Yr),$n=h$w(an);let ln=on[$n],Hn=on[an];const jn=j$k(tn,Vt),zn=typeof jn=="number"?{mainAxis:jn,crossAxis:0}:{mainAxis:0,crossAxis:0,...jn};if(rn){const $i=$n==="y"?"height":"width",Mi=Zr.reference[$n]-Zr.floating[$i]+zn.mainAxis,Ni=Zr.reference[$n]+Zr.reference[$i]-zn.mainAxis;ln<Mi?ln=Mi:ln>Ni&&(ln=Ni)}if(nn){var Wn,ei;const $i=$n==="y"?"width":"height",Mi=["top","left"].includes(u$w(Yr)),Ni=Zr.reference[an]-Zr.floating[$i]+(Mi&&((Wn=en.offset)==null?void 0:Wn[an])||0)+(Mi?0:zn.crossAxis),Ts=Zr.reference[an]+Zr.reference[$i]+(Mi?0:((ei=en.offset)==null?void 0:ei[an])||0)-(Mi?zn.crossAxis:0);Hn<Ni?Hn=Ni:Hn>Ts&&(Hn=Ts)}return{[$n]:ln,[an]:Hn}}}},me$7=function(Kt){return Kt===void 0&&(Kt={}),{name:"size",options:Kt,async fn(Vt){const{placement:Hr,rects:Wr,platform:Yr,elements:Zr}=Vt,{apply:en=()=>{},...tn}=j$k(Kt,Vt),rn=await F$f(Vt,tn),nn=u$w(Hr),on=g$u(Hr),an=b$n(Hr)==="y",{width:$n,height:ln}=Wr.floating;let Hn,jn;nn==="top"||nn==="bottom"?(Hn=nn,jn=on===(await(Yr.isRTL==null?void 0:Yr.isRTL(Zr.floating))?"start":"end")?"left":"right"):(jn=nn,Hn=on==="end"?"top":"bottom");const zn=ln-rn[Hn],Wn=$n-rn[jn],ei=!Vt.middlewareData.shift;let $i=zn,Mi=Wn;if(an){const Ts=$n-rn.left-rn.right;Mi=on||ei?l$u(Wn,Ts):Ts}else{const Ts=ln-rn.top-rn.bottom;$i=on||ei?l$u(zn,Ts):Ts}if(ei&&!on){const Ts=m$G(rn.left,0),ps=m$G(rn.right,0),$s=m$G(rn.top,0),Ws=m$G(rn.bottom,0);an?Mi=$n-2*(Ts!==0||ps!==0?Ts+ps:m$G(rn.left,rn.right)):$i=ln-2*($s!==0||Ws!==0?$s+Ws:m$G(rn.top,rn.bottom))}await en({...Vt,availableWidth:Mi,availableHeight:$i});const Ni=await Yr.getDimensions(Zr.floating);return $n!==Ni.width||ln!==Ni.height?{reset:{rects:!0}}:{}}}};function l$t(Kt){return a$Y(Kt)?(Kt.nodeName||"").toLowerCase():"#document"}function i$r(Kt){var Vt;return(Kt==null||(Vt=Kt.ownerDocument)==null?void 0:Vt.defaultView)||window}function y$l(Kt){var Vt;return(Vt=(a$Y(Kt)?Kt.ownerDocument:Kt.document)||window.document)==null?void 0:Vt.documentElement}function a$Y(Kt){return Kt instanceof Node||Kt instanceof i$r(Kt).Node}function S$n(Kt){return Kt instanceof Element||Kt instanceof i$r(Kt).Element}function d$y(Kt){return Kt instanceof HTMLElement||Kt instanceof i$r(Kt).HTMLElement}function s$n(Kt){return typeof ShadowRoot>"u"?!1:Kt instanceof ShadowRoot||Kt instanceof i$r(Kt).ShadowRoot}function m$F(Kt){const{overflow:Vt,overflowX:Hr,overflowY:Wr,display:Yr}=p$z(Kt);return/auto|scroll|overlay|hidden|clip/.test(Vt+Wr+Hr)&&!["inline","contents"].includes(Yr)}function E$j(Kt){return["table","td","th"].includes(l$t(Kt))}function N$j(Kt){const Vt=h$v(),Hr=p$z(Kt);return Hr.transform!=="none"||Hr.perspective!=="none"||(Hr.containerType?Hr.containerType!=="normal":!1)||!Vt&&(Hr.backdropFilter?Hr.backdropFilter!=="none":!1)||!Vt&&(Hr.filter?Hr.filter!=="none":!1)||["transform","perspective","filter"].some(Wr=>(Hr.willChange||"").includes(Wr))||["paint","layout","strict","content"].some(Wr=>(Hr.contain||"").includes(Wr))}function T$p(Kt){let Vt=u$v(Kt);for(;d$y(Vt)&&!w$o(Vt);){if(N$j(Vt))return Vt;Vt=u$v(Vt)}return null}function h$v(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function w$o(Kt){return["html","body","#document"].includes(l$t(Kt))}function p$z(Kt){return i$r(Kt).getComputedStyle(Kt)}function C$m(Kt){return S$n(Kt)?{scrollLeft:Kt.scrollLeft,scrollTop:Kt.scrollTop}:{scrollLeft:Kt.pageXOffset,scrollTop:Kt.pageYOffset}}function u$v(Kt){if(l$t(Kt)==="html")return Kt;const Vt=Kt.assignedSlot||Kt.parentNode||s$n(Kt)&&Kt.host||y$l(Kt);return s$n(Vt)?Vt.host:Vt}function g$t(Kt){const Vt=u$v(Kt);return w$o(Vt)?Kt.ownerDocument?Kt.ownerDocument.body:Kt.body:d$y(Vt)&&m$F(Vt)?Vt:g$t(Vt)}function f$B(Kt,Vt,Hr){var Wr;Vt===void 0&&(Vt=[]),Hr===void 0&&(Hr=!0);const Yr=g$t(Kt),Zr=Yr===((Wr=Kt.ownerDocument)==null?void 0:Wr.body),en=i$r(Yr);return Zr?Vt.concat(en,en.visualViewport||[],m$F(Yr)?Yr:[],en.frameElement&&Hr?f$B(en.frameElement):[]):Vt.concat(Yr,f$B(Yr,[],Hr))}function j$j(Kt){const Vt=p$z(Kt);let Hr=parseFloat(Vt.width)||0,Wr=parseFloat(Vt.height)||0;const Yr=d$y(Kt),Zr=Yr?Kt.offsetWidth:Hr,en=Yr?Kt.offsetHeight:Wr,tn=M$o(Hr)!==Zr||M$o(Wr)!==en;return tn&&(Hr=Zr,Wr=en),{width:Hr,height:Wr,$:tn}}function S$m(Kt){return S$n(Kt)?Kt:Kt.contextElement}function F$e(Kt){const Vt=S$m(Kt);if(!d$y(Vt))return S$o(1);const Hr=Vt.getBoundingClientRect(),{width:Wr,height:Yr,$:Zr}=j$j(Vt);let en=(Zr?M$o(Hr.width):Hr.width)/Wr,tn=(Zr?M$o(Hr.height):Hr.height)/Yr;return(!en||!Number.isFinite(en))&&(en=1),(!tn||!Number.isFinite(tn))&&(tn=1),{x:en,y:tn}}const lt$2=S$o(0);function G$g(Kt){const Vt=i$r(Kt);return!h$v()||!Vt.visualViewport?lt$2:{x:Vt.visualViewport.offsetLeft,y:Vt.visualViewport.offsetTop}}function ft$2(Kt,Vt,Hr){return Vt===void 0&&(Vt=!1),!Hr||Vt&&Hr!==i$r(Kt)?!1:Vt}function E$i(Kt,Vt,Hr,Wr){Vt===void 0&&(Vt=!1),Hr===void 0&&(Hr=!1);const Yr=Kt.getBoundingClientRect(),Zr=S$m(Kt);let en=S$o(1);Vt&&(Wr?S$n(Wr)&&(en=F$e(Wr)):en=F$e(Kt));const tn=ft$2(Zr,Hr,Wr)?G$g(Zr):S$o(0);let rn=(Yr.left+tn.x)/en.x,nn=(Yr.top+tn.y)/en.y,on=Yr.width/en.x,an=Yr.height/en.y;if(Zr){const $n=i$r(Zr),ln=Wr&&S$n(Wr)?i$r(Wr):Wr;let Hn=$n.frameElement;for(;Hn&&Wr&&ln!==$n;){const jn=F$e(Hn),zn=Hn.getBoundingClientRect(),Wn=p$z(Hn),ei=zn.left+(Hn.clientLeft+parseFloat(Wn.paddingLeft))*jn.x,$i=zn.top+(Hn.clientTop+parseFloat(Wn.paddingTop))*jn.y;rn*=jn.x,nn*=jn.y,on*=jn.x,an*=jn.y,rn+=ei,nn+=$i,Hn=i$r(Hn).frameElement}}return T$q({width:on,height:an,x:rn,y:nn})}const ut$3=[":popover-open",":modal"];function J$d(Kt){let Vt=!1,Hr=0,Wr=0;function Yr(Zr){try{Vt=Vt||Kt.matches(Zr)}catch{}}if(ut$3.forEach(Zr=>{Yr(Zr)}),Vt){const Zr=T$p(Kt);if(Zr){const en=Zr.getBoundingClientRect();Hr=en.x,Wr=en.y}}return[Vt,Hr,Wr]}function ht$3(Kt){let{elements:Vt,rect:Hr,offsetParent:Wr,strategy:Yr}=Kt;const Zr=y$l(Wr),[en]=Vt?J$d(Vt.floating):[!1];if(Wr===Zr||en)return Hr;let tn={scrollLeft:0,scrollTop:0},rn=S$o(1);const nn=S$o(0),on=d$y(Wr);if((on||!on&&Yr!=="fixed")&&((l$t(Wr)!=="body"||m$F(Zr))&&(tn=C$m(Wr)),d$y(Wr))){const an=E$i(Wr);rn=F$e(Wr),nn.x=an.x+Wr.clientLeft,nn.y=an.y+Wr.clientTop}return{width:Hr.width*rn.x,height:Hr.height*rn.y,x:Hr.x*rn.x-tn.scrollLeft*rn.x+nn.x,y:Hr.y*rn.y-tn.scrollTop*rn.y+nn.y}}function at$4(Kt){return Array.from(Kt.getClientRects())}function Q$e(Kt){return E$i(y$l(Kt)).left+C$m(Kt).scrollLeft}function dt$4(Kt){const Vt=y$l(Kt),Hr=C$m(Kt),Wr=Kt.ownerDocument.body,Yr=m$G(Vt.scrollWidth,Vt.clientWidth,Wr.scrollWidth,Wr.clientWidth),Zr=m$G(Vt.scrollHeight,Vt.clientHeight,Wr.scrollHeight,Wr.clientHeight);let en=-Hr.scrollLeft+Q$e(Kt);const tn=-Hr.scrollTop;return p$z(Wr).direction==="rtl"&&(en+=m$G(Vt.clientWidth,Wr.clientWidth)-Yr),{width:Yr,height:Zr,x:en,y:tn}}function gt$3(Kt,Vt){const Hr=i$r(Kt),Wr=y$l(Kt),Yr=Hr.visualViewport;let Zr=Wr.clientWidth,en=Wr.clientHeight,tn=0,rn=0;if(Yr){Zr=Yr.width,en=Yr.height;const nn=h$v();(!nn||nn&&Vt==="fixed")&&(tn=Yr.offsetLeft,rn=Yr.offsetTop)}return{width:Zr,height:en,x:tn,y:rn}}function pt$3(Kt,Vt){const Hr=E$i(Kt,!0,Vt==="fixed"),Wr=Hr.top+Kt.clientTop,Yr=Hr.left+Kt.clientLeft,Zr=d$y(Kt)?F$e(Kt):S$o(1),en=Kt.clientWidth*Zr.x,tn=Kt.clientHeight*Zr.y,rn=Yr*Zr.x,nn=Wr*Zr.y;return{width:en,height:tn,x:rn,y:nn}}function _$n(Kt,Vt,Hr){let Wr;if(Vt==="viewport")Wr=gt$3(Kt,Hr);else if(Vt==="document")Wr=dt$4(y$l(Kt));else if(S$n(Vt))Wr=pt$3(Vt,Hr);else{const Yr=G$g(Kt);Wr={...Vt,x:Vt.x-Yr.x,y:Vt.y-Yr.y}}return T$q(Wr)}function Z$e(Kt,Vt){const Hr=u$v(Kt);return Hr===Vt||!S$n(Hr)||w$o(Hr)?!1:p$z(Hr).position==="fixed"||Z$e(Hr,Vt)}function mt$3(Kt,Vt){const Hr=Vt.get(Kt);if(Hr)return Hr;let Wr=f$B(Kt,[],!1).filter(tn=>S$n(tn)&&l$t(tn)!=="body"),Yr=null;const Zr=p$z(Kt).position==="fixed";let en=Zr?u$v(Kt):Kt;for(;S$n(en)&&!w$o(en);){const tn=p$z(en),rn=N$j(en);!rn&&tn.position==="fixed"&&(Yr=null),(Zr?!rn&&!Yr:!rn&&tn.position==="static"&&Yr&&["absolute","fixed"].includes(Yr.position)||m$F(en)&&!rn&&Z$e(Kt,en))?Wr=Wr.filter(nn=>nn!==en):Yr=tn,en=u$v(en)}return Vt.set(Kt,Wr),Wr}function yt$2(Kt){let{element:Vt,boundary:Hr,rootBoundary:Wr,strategy:Yr}=Kt;const Zr=[...Hr==="clippingAncestors"?mt$3(Vt,this._c):[].concat(Hr),Wr],en=Zr[0],tn=Zr.reduce((rn,nn)=>{const on=_$n(Vt,nn,Yr);return rn.top=m$G(on.top,rn.top),rn.right=l$u(on.right,rn.right),rn.bottom=l$u(on.bottom,rn.bottom),rn.left=m$G(on.left,rn.left),rn},_$n(Vt,en,Yr));return{width:tn.right-tn.left,height:tn.bottom-tn.top,x:tn.left,y:tn.top}}function wt$2(Kt){const{width:Vt,height:Hr}=j$j(Kt);return{width:Vt,height:Hr}}function vt$3(Kt,Vt,Hr,Wr){const Yr=d$y(Vt),Zr=y$l(Vt),en=Hr==="fixed",tn=E$i(Kt,!0,en,Vt);let rn={scrollLeft:0,scrollTop:0};const nn=S$o(0);if(Yr||!Yr&&!en)if((l$t(Vt)!=="body"||m$F(Zr))&&(rn=C$m(Vt)),Yr){const jn=E$i(Vt,!0,en,Vt);nn.x=jn.x+Vt.clientLeft,nn.y=jn.y+Vt.clientTop}else Zr&&(nn.x=Q$e(Zr));let on=tn.left+rn.scrollLeft-nn.x,an=tn.top+rn.scrollTop-nn.y;const[$n,ln,Hn]=J$d(Wr);return $n&&(on+=ln,an+=Hn,Yr&&(on+=Vt.clientLeft,an+=Vt.clientTop)),{x:on,y:an,width:tn.width,height:tn.height}}function k$h(Kt,Vt){return!d$y(Kt)||p$z(Kt).position==="fixed"?null:Vt?Vt(Kt):Kt.offsetParent}function P$i(Kt,Vt){const Hr=i$r(Kt);if(!d$y(Kt))return Hr;let Wr=k$h(Kt,Vt);for(;Wr&&E$j(Wr)&&p$z(Wr).position==="static";)Wr=k$h(Wr,Vt);return Wr&&(l$t(Wr)==="html"||l$t(Wr)==="body"&&p$z(Wr).position==="static"&&!N$j(Wr))?Hr:Wr||T$p(Kt)||Hr}const xt$3=async function(Kt){const Vt=this.getOffsetParent||P$i,Hr=this.getDimensions;return{reference:vt$3(Kt.reference,await Vt(Kt.floating),Kt.strategy,Kt.floating),floating:{x:0,y:0,...await Hr(Kt.floating)}}};function bt$2(Kt){return p$z(Kt).direction==="rtl"}const Lt$1={convertOffsetParentRelativeRectToViewportRelativeRect:ht$3,getDocumentElement:y$l,getClippingRect:yt$2,getOffsetParent:P$i,getElementRects:xt$3,getClientRects:at$4,getDimensions:wt$2,getScale:F$e,isElement:S$n,isRTL:bt$2};function Rt$1(Kt,Vt){let Hr=null,Wr;const Yr=y$l(Kt);function Zr(){var tn;clearTimeout(Wr),(tn=Hr)==null||tn.disconnect(),Hr=null}function en(tn,rn){tn===void 0&&(tn=!1),rn===void 0&&(rn=1),Zr();const{left:nn,top:on,width:an,height:$n}=Kt.getBoundingClientRect();if(tn||Vt(),!an||!$n)return;const ln=O$o(on),Hn=O$o(Yr.clientWidth-(nn+an)),jn=O$o(Yr.clientHeight-(on+$n)),zn=O$o(nn),Wn={rootMargin:-ln+"px "+-Hn+"px "+-jn+"px "+-zn+"px",threshold:m$G(0,l$u(1,rn))||1};let ei=!0;function $i(Mi){const Ni=Mi[0].intersectionRatio;if(Ni!==rn){if(!ei)return en();Ni?en(!1,Ni):Wr=setTimeout(()=>{en(!1,1e-7)},100)}ei=!1}try{Hr=new IntersectionObserver($i,{...Wn,root:Yr.ownerDocument})}catch{Hr=new IntersectionObserver($i,Wn)}Hr.observe(Kt)}return en(!0),Zr}function Ot(Kt,Vt,Hr,Wr){Wr===void 0&&(Wr={});const{ancestorScroll:Yr=!0,ancestorResize:Zr=!0,elementResize:en=typeof ResizeObserver=="function",layoutShift:tn=typeof IntersectionObserver=="function",animationFrame:rn=!1}=Wr,nn=S$m(Kt),on=Yr||Zr?[...nn?f$B(nn):[],...f$B(Vt)]:[];on.forEach(Wn=>{Yr&&Wn.addEventListener("scroll",Hr,{passive:!0}),Zr&&Wn.addEventListener("resize",Hr)});const an=nn&&tn?Rt$1(nn,Hr):null;let $n=-1,ln=null;en&&(ln=new ResizeObserver(Wn=>{let[ei]=Wn;ei&&ei.target===nn&&ln&&(ln.unobserve(Vt),cancelAnimationFrame($n),$n=requestAnimationFrame(()=>{var $i;($i=ln)==null||$i.observe(Vt)})),Hr()}),nn&&!rn&&ln.observe(nn),ln.observe(Vt));let Hn,jn=rn?E$i(Kt):null;rn&&zn();function zn(){const Wn=E$i(Kt);jn&&(Wn.x!==jn.x||Wn.y!==jn.y||Wn.width!==jn.width||Wn.height!==jn.height)&&Hr(),jn=Wn,Hn=requestAnimationFrame(zn)}return Hr(),()=>{var Wn;on.forEach(ei=>{Yr&&ei.removeEventListener("scroll",Hr),Zr&&ei.removeEventListener("resize",Hr)}),an==null||an(),(Wn=ln)==null||Wn.disconnect(),ln=null,rn&&cancelAnimationFrame(Hn)}}const Ft=re$7,Wt$1=ce$9,Bt$2=me$7,zt$1=le$5,At$2=oe$a,It$3=fe$9,Nt$1=(Kt,Vt,Hr)=>{const Wr=new Map,Yr={platform:Lt$1,...Hr},Zr={...Yr.platform,_c:Wr};return se$a(Kt,Vt,{...Yr,platform:Zr})},T$o=Kt=>{function Vt(Hr){return{}.hasOwnProperty.call(Hr,"current")}return{name:"arrow",options:Kt,fn(Hr){const{element:Wr,padding:Yr}=typeof Kt=="function"?Kt(Hr):Kt;return Wr&&Vt(Wr)?Wr.current!=null?At$2({element:Wr.current,padding:Yr}).fn(Hr):{}:Wr?At$2({element:Wr,padding:Yr}).fn(Hr):{}}}};var R$d=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function h$u(Kt,Vt){if(Kt===Vt)return!0;if(typeof Kt!=typeof Vt)return!1;if(typeof Kt=="function"&&Kt.toString()===Vt.toString())return!0;let Hr,Wr,Yr;if(Kt&&Vt&&typeof Kt=="object"){if(Array.isArray(Kt)){if(Hr=Kt.length,Hr!==Vt.length)return!1;for(Wr=Hr;Wr--!==0;)if(!h$u(Kt[Wr],Vt[Wr]))return!1;return!0}if(Yr=Object.keys(Kt),Hr=Yr.length,Hr!==Object.keys(Vt).length)return!1;for(Wr=Hr;Wr--!==0;)if(!{}.hasOwnProperty.call(Vt,Yr[Wr]))return!1;for(Wr=Hr;Wr--!==0;){const Zr=Yr[Wr];if(!(Zr==="_owner"&&Kt.$$typeof)&&!h$u(Kt[Zr],Vt[Zr]))return!1}return!0}return Kt!==Kt&&Vt!==Vt}function A$e(Kt){return typeof window>"u"?1:(Kt.ownerDocument.defaultView||window).devicePixelRatio||1}function $$5(Kt,Vt){const Hr=A$e(Kt);return Math.round(Vt*Hr)/Hr}function v$B(Kt){const Vt=reactExports.useRef(Kt);return R$d(()=>{Vt.current=Kt}),Vt}function X$f(Kt){Kt===void 0&&(Kt={});const{placement:Vt="bottom",strategy:Hr="absolute",middleware:Wr=[],platform:Yr,elements:{reference:Zr,floating:en}={},transform:tn=!0,whileElementsMounted:rn,open:nn}=Kt,[on,an]=reactExports.useState({x:0,y:0,strategy:Hr,placement:Vt,middlewareData:{},isPositioned:!1}),[$n,ln]=reactExports.useState(Wr);h$u($n,Wr)||ln(Wr);const[Hn,jn]=reactExports.useState(null),[zn,Wn]=reactExports.useState(null),ei=reactExports.useCallback(Gs=>{Gs!==Ts.current&&(Ts.current=Gs,jn(Gs))},[]),$i=reactExports.useCallback(Gs=>{Gs!==ps.current&&(ps.current=Gs,Wn(Gs))},[]),Mi=Zr||Hn,Ni=en||zn,Ts=reactExports.useRef(null),ps=reactExports.useRef(null),$s=reactExports.useRef(on),Ws=rn!=null,Hs=v$B(rn),js=v$B(Yr),zs=reactExports.useCallback(()=>{if(!Ts.current||!ps.current)return;const Gs={placement:Vt,strategy:Hr,middleware:$n};js.current&&(Gs.platform=js.current),Nt$1(Ts.current,ps.current,Gs).then(Hl=>{const Js={...Hl,isPositioned:!0};Xs.current&&!h$u($s.current,Js)&&($s.current=Js,reactDomExports.flushSync(()=>{an(Js)}))})},[$n,Vt,Hr,js]);R$d(()=>{nn===!1&&$s.current.isPositioned&&($s.current.isPositioned=!1,an(Gs=>({...Gs,isPositioned:!1})))},[nn]);const Xs=reactExports.useRef(!1);R$d(()=>(Xs.current=!0,()=>{Xs.current=!1}),[]),R$d(()=>{if(Mi&&(Ts.current=Mi),Ni&&(ps.current=Ni),Mi&&Ni){if(Hs.current)return Hs.current(Mi,Ni,zs);zs()}},[Mi,Ni,zs,Hs,Ws]);const ia=reactExports.useMemo(()=>({reference:Ts,floating:ps,setReference:ei,setFloating:$i}),[ei,$i]),Qs=reactExports.useMemo(()=>({reference:Mi,floating:Ni}),[Mi,Ni]),Zs=reactExports.useMemo(()=>{const Gs={position:Hr,left:0,top:0};if(!Qs.floating)return Gs;const Hl=$$5(Qs.floating,on.x),Js=$$5(Qs.floating,on.y);return tn?{...Gs,transform:"translate("+Hl+"px, "+Js+"px)",...A$e(Qs.floating)>=1.5&&{willChange:"transform"}}:{position:Hr,left:Hl,top:Js}},[Hr,tn,Qs.floating,on.x,on.y]);return reactExports.useMemo(()=>({...on,update:zs,refs:ia,elements:Qs,floatingStyles:Zs}),[on,zs,ia,Qs,Zs])}var v$A="Arrow",e$1h=reactExports.forwardRef((Kt,Vt)=>{const{children:Hr,width:Wr=10,height:Yr=5,...Zr}=Kt;return m$K.jsx(v$C.svg,{...Zr,ref:Vt,width:Wr,height:Yr,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:Kt.asChild?Hr:m$K.jsx("polygon",{points:"0,0 30,0 15,10"})})});e$1h.displayName=v$A;var h$t=e$1h;function c$E(Kt){const[Vt,Hr]=reactExports.useState(void 0);return o$V(()=>{if(Kt){Hr({width:Kt.offsetWidth,height:Kt.offsetHeight});const Wr=new ResizeObserver(Yr=>{if(!Array.isArray(Yr)||!Yr.length)return;const Zr=Yr[0];let en,tn;if("borderBoxSize"in Zr){const rn=Zr.borderBoxSize,nn=Array.isArray(rn)?rn[0]:rn;en=nn.inlineSize,tn=nn.blockSize}else en=Kt.offsetWidth,tn=Kt.offsetHeight;Hr({width:en,height:tn})});return Wr.observe(Kt,{box:"border-box"}),()=>Wr.unobserve(Kt)}else Hr(void 0)},[Kt]),Vt}var N$i="Popper",[L$k,qe$3]=P$k(N$i),[$e$5,Z$d]=L$k(N$i),q$i="PopperAnchor",G$f=reactExports.forwardRef((Kt,Vt)=>{const{__scopePopper:Hr,virtualRef:Wr,...Yr}=Kt,Zr=Z$d(q$i,Hr),en=reactExports.useRef(null),tn=i$s(Vt,en);return reactExports.useEffect(()=>{Zr.onAnchorChange((Wr==null?void 0:Wr.current)||en.current)}),Wr?null:m$K.jsx(v$C.div,{...Yr,ref:tn})});G$f.displayName=q$i;var _$m="PopperContent",[je$6,He$7]=L$k(_$m),J$c=reactExports.forwardRef((Kt,Vt)=>{var Hr,Wr,Yr,Zr,en,tn;const{__scopePopper:rn,side:nn="bottom",sideOffset:on=0,align:an="center",alignOffset:$n=0,arrowPadding:ln=0,avoidCollisions:Hn=!0,collisionBoundary:jn=[],collisionPadding:zn=0,sticky:Wn="partial",hideWhenDetached:ei=!1,updatePositionStrategy:$i="optimized",onPlaced:Mi,...Ni}=Kt,Ts=Z$d(_$m,rn),[ps,$s]=reactExports.useState(null),Ws=i$s(Vt,Zi=>$s(Zi)),[Hs,js]=reactExports.useState(null),zs=c$E(Hs),Xs=(zs==null?void 0:zs.width)??0,ia=(zs==null?void 0:zs.height)??0,Qs=nn+(an!=="center"?"-"+an:""),Zs=typeof zn=="number"?zn:{top:0,right:0,bottom:0,left:0,...zn},Gs=Array.isArray(jn)?jn:[jn],Hl=Gs.length>0,Js={padding:Zs,boundary:Gs.filter(Ie$7),altBoundary:Hl},{refs:sa,floatingStyles:Ca,placement:tc,isPositioned:zl,middlewareData:ec}=X$f({strategy:"fixed",placement:Qs,whileElementsMounted:(...Zi)=>Ot(...Zi,{animationFrame:$i==="always"}),elements:{reference:Ts.anchor},middleware:[ae$8({mainAxis:on+ia,alignmentAxis:$n}),Hn&&Ft({mainAxis:!0,crossAxis:!1,limiter:Wn==="partial"?It$3():void 0,...Js}),Hn&&Wt$1({...Js}),Bt$2({...Js,apply:({elements:Zi,rects:qs,availableWidth:ql,availableHeight:Vl})=>{const{width:Wl,height:hc}=qs.reference,nc=Zi.floating.style;nc.setProperty("--radix-popper-available-width",`${ql}px`),nc.setProperty("--radix-popper-available-height",`${Vl}px`),nc.setProperty("--radix-popper-anchor-width",`${Wl}px`),nc.setProperty("--radix-popper-anchor-height",`${hc}px`)}}),Hs&&T$o({element:Hs,padding:ln}),Ye$4({arrowWidth:Xs,arrowHeight:ia}),ei&&zt$1({strategy:"referenceHidden",...Js})]}),[sc,ac]=V$c(tc),rc=o$W(Mi);o$V(()=>{zl&&(rc==null||rc())},[zl,rc]);const uc=(Hr=ec.arrow)==null?void 0:Hr.x,pc=(Wr=ec.arrow)==null?void 0:Wr.y,cc=((Yr=ec.arrow)==null?void 0:Yr.centerOffset)!==0,[$c,Ec]=reactExports.useState();return o$V(()=>{ps&&Ec(window.getComputedStyle(ps).zIndex)},[ps]),m$K.jsx("div",{ref:sa.setFloating,"data-radix-popper-content-wrapper":"",style:{...Ca,transform:zl?Ca.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$c,"--radix-popper-transform-origin":[(Zr=ec.transformOrigin)==null?void 0:Zr.x,(en=ec.transformOrigin)==null?void 0:en.y].join(" "),...((tn=ec.hide)==null?void 0:tn.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:Kt.dir,children:m$K.jsx(je$6,{scope:rn,placedSide:sc,onArrowChange:js,arrowX:uc,arrowY:pc,shouldHideArrow:cc,children:m$K.jsx(v$C.div,{"data-side":sc,"data-align":ac,...Ni,ref:Ws,style:{...Ni.style,animation:zl?void 0:"none"}})})})});J$c.displayName=_$m;var K$9="PopperArrow",We$6={top:"bottom",right:"left",bottom:"top",left:"right"},Q$d=reactExports.forwardRef(function(Kt,Vt){const{__scopePopper:Hr,...Wr}=Kt,Yr=He$7(K$9,Hr),Zr=We$6[Yr.placedSide];return m$K.jsx("span",{ref:Yr.onArrowChange,style:{position:"absolute",left:Yr.arrowX,top:Yr.arrowY,[Zr]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[Yr.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[Yr.placedSide],visibility:Yr.shouldHideArrow?"hidden":void 0},children:m$K.jsx(h$t,{...Wr,ref:Vt,style:{...Wr.style,display:"block"}})})});Q$d.displayName=K$9;function Ie$7(Kt){return Kt!==null}var Ye$4=Kt=>({name:"transformOrigin",options:Kt,fn(Vt){var Hr,Wr,Yr;const{placement:Zr,rects:en,middlewareData:tn}=Vt,rn=((Hr=tn.arrow)==null?void 0:Hr.centerOffset)!==0,nn=rn?0:Kt.arrowWidth,on=rn?0:Kt.arrowHeight,[an,$n]=V$c(Zr),ln={start:"0%",center:"50%",end:"100%"}[$n],Hn=(((Wr=tn.arrow)==null?void 0:Wr.x)??0)+nn/2,jn=(((Yr=tn.arrow)==null?void 0:Yr.y)??0)+on/2;let zn="",Wn="";return an==="bottom"?(zn=rn?ln:`${Hn}px`,Wn=`${-on}px`):an==="top"?(zn=rn?ln:`${Hn}px`,Wn=`${en.floating.height+on}px`):an==="right"?(zn=`${-on}px`,Wn=rn?ln:`${jn}px`):an==="left"&&(zn=`${en.floating.width+on}px`,Wn=rn?ln:`${jn}px`),{data:{x:zn,y:Wn}}}});function V$c(Kt){const[Vt,Hr="center"]=Kt.split("-");return[Vt,Hr]}var Je$2=G$f,Ke$4=J$c,Qe$3=Q$d,p$y="Portal",d$x=reactExports.forwardRef((Kt,Vt)=>{var Hr;const{container:Wr,...Yr}=Kt,[Zr,en]=reactExports.useState(!1);o$V(()=>en(!0),[]);const tn=Wr||Zr&&((Hr=globalThis==null?void 0:globalThis.document)==null?void 0:Hr.body);return tn?O$u.createPortal(m$K.jsx(v$C.div,{...Yr,ref:Vt}),tn):null});d$x.displayName=p$y;function E$h(Kt,Vt){return reactExports.useReducer((Hr,Wr)=>Vt[Hr][Wr]??Hr,Kt)}var M$n=Kt=>{const{present:Vt,children:Hr}=Kt,Wr=R$c(Vt),Yr=typeof Hr=="function"?Hr({present:Wr.isPresent}):reactExports.Children.only(Hr),Zr=i$s(Wr.ref,T$n(Yr));return typeof Hr=="function"||Wr.isPresent?reactExports.cloneElement(Yr,{ref:Zr}):null};M$n.displayName="Presence";function R$c(Kt){const[Vt,Hr]=reactExports.useState(),Wr=reactExports.useRef({}),Yr=reactExports.useRef(Kt),Zr=reactExports.useRef("none"),en=Kt?"mounted":"unmounted",[tn,rn]=E$h(en,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const nn=d$w(Wr.current);Zr.current=tn==="mounted"?nn:"none"},[tn]),o$V(()=>{const nn=Wr.current,on=Yr.current;if(on!==Kt){const an=Zr.current,$n=d$w(nn);Kt?rn("MOUNT"):$n==="none"||(nn==null?void 0:nn.display)==="none"?rn("UNMOUNT"):rn(on&&an!==$n?"ANIMATION_OUT":"UNMOUNT"),Yr.current=Kt}},[Kt,rn]),o$V(()=>{if(Vt){const nn=an=>{const $n=d$w(Wr.current).includes(an.animationName);an.target===Vt&&$n&&reactDomExports.flushSync(()=>rn("ANIMATION_END"))},on=an=>{an.target===Vt&&(Zr.current=d$w(Wr.current))};return Vt.addEventListener("animationstart",on),Vt.addEventListener("animationcancel",nn),Vt.addEventListener("animationend",nn),()=>{Vt.removeEventListener("animationstart",on),Vt.removeEventListener("animationcancel",nn),Vt.removeEventListener("animationend",nn)}}else rn("ANIMATION_END")},[Vt,rn]),{isPresent:["mounted","unmountSuspended"].includes(tn),ref:reactExports.useCallback(nn=>{nn&&(Wr.current=getComputedStyle(nn)),Hr(nn)},[])}}function d$w(Kt){return(Kt==null?void 0:Kt.animationName)||"none"}function T$n(Kt){var Vt,Hr;let Wr=(Vt=Object.getOwnPropertyDescriptor(Kt.props,"ref"))==null?void 0:Vt.get,Yr=Wr&&"isReactWarning"in Wr&&Wr.isReactWarning;return Yr?Kt.ref:(Wr=(Hr=Object.getOwnPropertyDescriptor(Kt,"ref"))==null?void 0:Hr.get,Yr=Wr&&"isReactWarning"in Wr&&Wr.isReactWarning,Yr?Kt.props.ref:Kt.props.ref||Kt.ref)}var k$g=function(Kt){if(typeof document>"u")return null;var Vt=Array.isArray(Kt)?Kt[0]:Kt;return Vt.ownerDocument.body},f$A=new WeakMap,o$U=new WeakMap,p$x={},h$s=0,W$c=function(Kt){return Kt&&(Kt.host||W$c(Kt.parentNode))},S$l=function(Kt,Vt){return Vt.map(function(Hr){if(Kt.contains(Hr))return Hr;var Wr=W$c(Hr);return Wr&&Kt.contains(Wr)?Wr:(console.error("aria-hidden",Hr,"in not contained inside",Kt,". Doing nothing"),null)}).filter(function(Hr){return!!Hr})},D$e=function(Kt,Vt,Hr,Wr){var Yr=S$l(Vt,Array.isArray(Kt)?Kt:[Kt]);p$x[Hr]||(p$x[Hr]=new WeakMap);var Zr=p$x[Hr],en=[],tn=new Set,rn=new Set(Yr),nn=function(an){!an||tn.has(an)||(tn.add(an),nn(an.parentNode))};Yr.forEach(nn);var on=function(an){!an||rn.has(an)||Array.prototype.forEach.call(an.children,function($n){if(tn.has($n))on($n);else{var ln=$n.getAttribute(Wr),Hn=ln!==null&&ln!=="false",jn=(f$A.get($n)||0)+1,zn=(Zr.get($n)||0)+1;f$A.set($n,jn),Zr.set($n,zn),en.push($n),jn===1&&Hn&&o$U.set($n,!0),zn===1&&$n.setAttribute(Hr,"true"),Hn||$n.setAttribute(Wr,"true")}})};return on(Vt),tn.clear(),h$s++,function(){en.forEach(function(an){var $n=f$A.get(an)-1,ln=Zr.get(an)-1;f$A.set(an,$n),Zr.set(an,ln),$n||(o$U.has(an)||an.removeAttribute(Wr),o$U.delete(an)),ln||an.removeAttribute(Hr)}),h$s--,h$s||(f$A=new WeakMap,f$A=new WeakMap,o$U=new WeakMap,p$x={})}},E$g=function(Kt,Vt,Hr){Hr===void 0&&(Hr="data-aria-hidden");var Wr=Array.from(Array.isArray(Kt)?Kt:[Kt]),Yr=Vt||k$g(Kt);return Yr?(Wr.push.apply(Wr,Array.from(Yr.querySelectorAll("[aria-live]"))),D$e(Wr,Yr,Hr,"aria-hidden")):function(){return null}},p$w=function(){return p$w=Object.assign||function(Kt){for(var Vt,Hr=1,Wr=arguments.length;Hr<Wr;Hr++){Vt=arguments[Hr];for(var Yr in Vt)Object.prototype.hasOwnProperty.call(Vt,Yr)&&(Kt[Yr]=Vt[Yr])}return Kt},p$w.apply(this,arguments)};function c$D(Kt,Vt){var Hr={};for(var Wr in Kt)Object.prototype.hasOwnProperty.call(Kt,Wr)&&Vt.indexOf(Wr)<0&&(Hr[Wr]=Kt[Wr]);if(Kt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Yr=0,Wr=Object.getOwnPropertySymbols(Kt);Yr<Wr.length;Yr++)Vt.indexOf(Wr[Yr])<0&&Object.prototype.propertyIsEnumerable.call(Kt,Wr[Yr])&&(Hr[Wr[Yr]]=Kt[Wr[Yr]]);return Hr}function l$s(Kt,Vt,Hr){if(Hr||arguments.length===2)for(var Wr=0,Yr=Vt.length,Zr;Wr<Yr;Wr++)(Zr||!(Wr in Vt))&&(Zr||(Zr=Array.prototype.slice.call(Vt,0,Wr)),Zr[Wr]=Vt[Wr]);return Kt.concat(Zr||Array.prototype.slice.call(Vt))}var r$T="right-scroll-bar-position",a$X="width-before-scroll-bar",l$r="with-scroll-bars-hidden",e$1g="--removed-body-scroll-bar-size";function l$q(Kt){return Kt}function h$r(Kt,Vt){Vt===void 0&&(Vt=l$q);var Hr=[],Wr=!1,Yr={read:function(){if(Wr)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return Hr.length?Hr[Hr.length-1]:Kt},useMedium:function(Zr){var en=Vt(Zr,Wr);return Hr.push(en),function(){Hr=Hr.filter(function(tn){return tn!==en})}},assignSyncMedium:function(Zr){for(Wr=!0;Hr.length;){var en=Hr;Hr=[],en.forEach(Zr)}Hr={push:function(tn){return Zr(tn)},filter:function(){return Hr}}},assignMedium:function(Zr){Wr=!0;var en=[];if(Hr.length){var tn=Hr;Hr=[],tn.forEach(Zr),en=Hr}var rn=function(){var on=en;en=[],on.forEach(Zr)},nn=function(){return Promise.resolve().then(rn)};nn(),Hr={push:function(on){en.push(on),nn()},filter:function(on){return en=en.filter(on),Hr}}}};return Yr}function v$z(Kt){Kt===void 0&&(Kt={});var Vt=h$r(null);return Vt.options=p$w({async:!0,ssr:!1},Kt),Vt}var a$W=v$z();function i$q(Kt,Vt){return typeof Kt=="function"?Kt(Vt):Kt&&(Kt.current=Vt),Kt}function f$z(Kt,Vt){var Hr=reactExports.useState(function(){return{value:Kt,callback:Vt,facade:{get current(){return Hr.value},set current(Wr){var Yr=Hr.value;Yr!==Wr&&(Hr.value=Wr,Hr.callback(Wr,Yr))}}}})[0];return Hr.callback=Vt,Hr.facade}var c$C=new WeakMap;function v$y(Kt,Vt){var Hr=f$z(Vt||null,function(Wr){return Kt.forEach(function(Yr){return i$q(Yr,Wr)})});return reactExports.useLayoutEffect(function(){var Wr=c$C.get(Hr);if(Wr){var Yr=new Set(Wr),Zr=new Set(Kt),en=Hr.current;Yr.forEach(function(tn){Zr.has(tn)||i$q(tn,null)}),Zr.forEach(function(tn){Yr.has(tn)||i$q(tn,en)})}c$C.set(Hr,Kt)},[Kt]),Hr}var o$T=function(){},m$E=reactExports.forwardRef(function(Kt,Vt){var Hr=reactExports.useRef(null),Wr=reactExports.useState({onScrollCapture:o$T,onWheelCapture:o$T,onTouchMoveCapture:o$T}),Yr=Wr[0],Zr=Wr[1],en=Kt.forwardProps,tn=Kt.children,rn=Kt.className,nn=Kt.removeScrollBar,on=Kt.enabled,an=Kt.shards,$n=Kt.sideCar,ln=Kt.noIsolation,Hn=Kt.inert,jn=Kt.allowPinchZoom,zn=Kt.as,Wn=zn===void 0?"div":zn,ei=Kt.gapMode,$i=c$D(Kt,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),Mi=$n,Ni=v$y([Hr,Vt]),Ts=p$w(p$w({},$i),Yr);return reactExports.createElement(reactExports.Fragment,null,on&&reactExports.createElement(Mi,{sideCar:a$W,removeScrollBar:nn,shards:an,noIsolation:ln,inert:Hn,setCallbacks:Zr,allowPinchZoom:!!jn,lockRef:Hr,gapMode:ei}),en?reactExports.cloneElement(reactExports.Children.only(tn),p$w(p$w({},Ts),{ref:Ni})):reactExports.createElement(Wn,p$w({},Ts,{className:rn,ref:Ni}),tn))});m$E.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};m$E.classNames={fullWidth:a$X,zeroRight:r$T};var e$1f=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function r$S(){if(!document)return null;var Kt=document.createElement("style");Kt.type="text/css";var Vt=e$1f();return Vt&&Kt.setAttribute("nonce",Vt),Kt}function l$p(Kt,Vt){Kt.styleSheet?Kt.styleSheet.cssText=Vt:Kt.appendChild(document.createTextNode(Vt))}function a$V(Kt){var Vt=document.head||document.getElementsByTagName("head")[0];Vt.appendChild(Kt)}var c$B=function(){var Kt=0,Vt=null;return{add:function(Hr){Kt==0&&(Vt=r$S())&&(l$p(Vt,Hr),a$V(Vt)),Kt++},remove:function(){Kt--,!Kt&&Vt&&(Vt.parentNode&&Vt.parentNode.removeChild(Vt),Vt=null)}}},i$p=function(){var Kt=c$B();return function(Vt,Hr){reactExports.useEffect(function(){return Kt.add(Vt),function(){Kt.remove()}},[Vt&&Hr])}},s$m=function(){var Kt=i$p(),Vt=function(Hr){var Wr=Hr.styles,Yr=Hr.dynamic;return Kt(Wr,Yr),null};return Vt},a$U={left:0,top:0,right:0,gap:0},e$1e=function(Kt){return parseInt(Kt||"",10)||0},o$S=function(Kt){var Vt=window.getComputedStyle(document.body),Hr=Vt[Kt==="padding"?"paddingLeft":"marginLeft"],Wr=Vt[Kt==="padding"?"paddingTop":"marginTop"],Yr=Vt[Kt==="padding"?"paddingRight":"marginRight"];return[e$1e(Hr),e$1e(Wr),e$1e(Yr)]},f$y=function(Kt){if(Kt===void 0&&(Kt="margin"),typeof window>"u")return a$U;var Vt=o$S(Kt),Hr=document.documentElement.clientWidth,Wr=window.innerWidth;return{left:Vt[0],top:Vt[1],right:Vt[2],gap:Math.max(0,Wr-Hr+Vt[2]-Vt[0])}},b$m=s$m(),e$1d="data-scroll-locked",h$q=function(Kt,Vt,Hr,Wr){var Yr=Kt.left,Zr=Kt.top,en=Kt.right,tn=Kt.gap;return Hr===void 0&&(Hr="margin"),`
  .`.concat(l$r,` {
   overflow: hidden `).concat(Wr,`;
   padding-right: `).concat(tn,"px ").concat(Wr,`;
  }
  body[`).concat(e$1d,`] {
    overflow: hidden `).concat(Wr,`;
    overscroll-behavior: contain;
    `).concat([Vt&&"position: relative ".concat(Wr,";"),Hr==="margin"&&`
    padding-left: `.concat(Yr,`px;
    padding-top: `).concat(Zr,`px;
    padding-right: `).concat(en,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(tn,"px ").concat(Wr,`;
    `),Hr==="padding"&&"padding-right: ".concat(tn,"px ").concat(Wr,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(r$T,` {
    right: `).concat(tn,"px ").concat(Wr,`;
  }
  
  .`).concat(a$X,` {
    margin-right: `).concat(tn,"px ").concat(Wr,`;
  }
  
  .`).concat(r$T," .").concat(r$T,` {
    right: 0 `).concat(Wr,`;
  }
  
  .`).concat(a$X," .").concat(a$X,` {
    margin-right: 0 `).concat(Wr,`;
  }
  
  body[`).concat(e$1d,`] {
    `).concat(e$1g,": ").concat(tn,`px;
  }
`)},u$u=function(){var Kt=parseInt(document.body.getAttribute(e$1d)||"0",10);return isFinite(Kt)?Kt:0},x$p=function(){reactExports.useEffect(function(){return document.body.setAttribute(e$1d,(u$u()+1).toString()),function(){var Kt=u$u()-1;Kt<=0?document.body.removeAttribute(e$1d):document.body.setAttribute(e$1d,Kt.toString())}},[])},C$l=function(Kt){var Vt=Kt.noRelative,Hr=Kt.noImportant,Wr=Kt.gapMode,Yr=Wr===void 0?"margin":Wr;x$p();var Zr=reactExports.useMemo(function(){return f$y(Yr)},[Yr]);return reactExports.createElement(b$m,{styles:h$q(Zr,!Vt,Yr,Hr?"":"!important")})},r$R=!1;if(typeof window<"u")try{var e$1c=Object.defineProperty({},"passive",{get:function(){return r$R=!0,!0}});window.addEventListener("test",e$1c,e$1c),window.removeEventListener("test",e$1c,e$1c)}catch{r$R=!1}var a$T=r$R?{passive:!1}:!1,p$v=function(Kt){return Kt.tagName==="TEXTAREA"},w$n=function(Kt,Vt){var Hr=window.getComputedStyle(Kt);return Hr[Vt]!=="hidden"&&!(Hr.overflowY===Hr.overflowX&&!p$v(Kt)&&Hr[Vt]==="visible")},y$k=function(Kt){return w$n(Kt,"overflowY")},H$g=function(Kt){return w$n(Kt,"overflowX")},R$b=function(Kt,Vt){var Hr=Vt.ownerDocument,Wr=Vt;do{typeof ShadowRoot<"u"&&Wr instanceof ShadowRoot&&(Wr=Wr.host);var Yr=g$s(Kt,Wr);if(Yr){var Zr=b$l(Kt,Wr),en=Zr[1],tn=Zr[2];if(en>tn)return!0}Wr=Wr.parentNode}while(Wr&&Wr!==Hr.body);return!1},B$j=function(Kt){var Vt=Kt.scrollTop,Hr=Kt.scrollHeight,Wr=Kt.clientHeight;return[Vt,Hr,Wr]},V$b=function(Kt){var Vt=Kt.scrollLeft,Hr=Kt.scrollWidth,Wr=Kt.clientWidth;return[Vt,Hr,Wr]},g$s=function(Kt,Vt){return Kt==="v"?y$k(Vt):H$g(Vt)},b$l=function(Kt,Vt){return Kt==="v"?B$j(Vt):V$b(Vt)},D$d=function(Kt,Vt){return Kt==="h"&&Vt==="rtl"?-1:1},W$b=function(Kt,Vt,Hr,Wr,Yr){var Zr=D$d(Kt,window.getComputedStyle(Vt).direction),en=Zr*Wr,tn=Hr.target,rn=Vt.contains(tn),nn=!1,on=en>0,an=0,$n=0;do{var ln=b$l(Kt,tn),Hn=ln[0],jn=ln[1],zn=ln[2],Wn=jn-zn-Zr*Hn;(Hn||Wn)&&g$s(Kt,tn)&&(an+=Wn,$n+=Hn),tn instanceof ShadowRoot?tn=tn.host:tn=tn.parentNode}while(!rn&&tn!==document.body||rn&&(Vt.contains(tn)||Vt===tn));return(on&&(Yr&&Math.abs(an)<1||!Yr&&en>an)||!on&&(Yr&&Math.abs($n)<1||!Yr&&-en>$n))&&(nn=!0),nn},k$f=function(Kt){return"changedTouches"in Kt?[Kt.changedTouches[0].clientX,Kt.changedTouches[0].clientY]:[0,0]},Y$d=function(Kt){return[Kt.deltaX,Kt.deltaY]},B$i=function(Kt){return Kt&&"current"in Kt?Kt.current:Kt},F$d=function(Kt,Vt){return Kt[0]===Vt[0]&&Kt[1]===Vt[1]},O$n=function(Kt){return`
  .block-interactivity-`.concat(Kt,` {pointer-events: none;}
  .allow-interactivity-`).concat(Kt,` {pointer-events: all;}
`)},Q$c=0,f$x=[];function G$e(Kt){var Vt=reactExports.useRef([]),Hr=reactExports.useRef([0,0]),Wr=reactExports.useRef(),Yr=reactExports.useState(Q$c++)[0],Zr=reactExports.useState(s$m)[0],en=reactExports.useRef(Kt);reactExports.useEffect(function(){en.current=Kt},[Kt]),reactExports.useEffect(function(){if(Kt.inert){document.body.classList.add("block-interactivity-".concat(Yr));var jn=l$s([Kt.lockRef.current],(Kt.shards||[]).map(B$i),!0).filter(Boolean);return jn.forEach(function(zn){return zn.classList.add("allow-interactivity-".concat(Yr))}),function(){document.body.classList.remove("block-interactivity-".concat(Yr)),jn.forEach(function(zn){return zn.classList.remove("allow-interactivity-".concat(Yr))})}}},[Kt.inert,Kt.lockRef.current,Kt.shards]);var tn=reactExports.useCallback(function(jn,zn){if("touches"in jn&&jn.touches.length===2)return!en.current.allowPinchZoom;var Wn=k$f(jn),ei=Hr.current,$i="deltaX"in jn?jn.deltaX:ei[0]-Wn[0],Mi="deltaY"in jn?jn.deltaY:ei[1]-Wn[1],Ni,Ts=jn.target,ps=Math.abs($i)>Math.abs(Mi)?"h":"v";if("touches"in jn&&ps==="h"&&Ts.type==="range")return!1;var $s=R$b(ps,Ts);if(!$s)return!0;if($s?Ni=ps:(Ni=ps==="v"?"h":"v",$s=R$b(ps,Ts)),!$s)return!1;if(!Wr.current&&"changedTouches"in jn&&($i||Mi)&&(Wr.current=Ni),!Ni)return!0;var Ws=Wr.current||Ni;return W$b(Ws,zn,jn,Ws==="h"?$i:Mi,!0)},[]),rn=reactExports.useCallback(function(jn){var zn=jn;if(!(!f$x.length||f$x[f$x.length-1]!==Zr)){var Wn="deltaY"in zn?Y$d(zn):k$f(zn),ei=Vt.current.filter(function(Ni){return Ni.name===zn.type&&(Ni.target===zn.target||zn.target===Ni.shadowParent)&&F$d(Ni.delta,Wn)})[0];if(ei&&ei.should){zn.cancelable&&zn.preventDefault();return}if(!ei){var $i=(en.current.shards||[]).map(B$i).filter(Boolean).filter(function(Ni){return Ni.contains(zn.target)}),Mi=$i.length>0?tn(zn,$i[0]):!en.current.noIsolation;Mi&&zn.cancelable&&zn.preventDefault()}}},[]),nn=reactExports.useCallback(function(jn,zn,Wn,ei){var $i={name:jn,delta:zn,target:Wn,should:ei,shadowParent:Z$c(Wn)};Vt.current.push($i),setTimeout(function(){Vt.current=Vt.current.filter(function(Mi){return Mi!==$i})},1)},[]),on=reactExports.useCallback(function(jn){Hr.current=k$f(jn),Wr.current=void 0},[]),an=reactExports.useCallback(function(jn){nn(jn.type,Y$d(jn),jn.target,tn(jn,Kt.lockRef.current))},[]),$n=reactExports.useCallback(function(jn){nn(jn.type,k$f(jn),jn.target,tn(jn,Kt.lockRef.current))},[]);reactExports.useEffect(function(){return f$x.push(Zr),Kt.setCallbacks({onScrollCapture:an,onWheelCapture:an,onTouchMoveCapture:$n}),document.addEventListener("wheel",rn,a$T),document.addEventListener("touchmove",rn,a$T),document.addEventListener("touchstart",on,a$T),function(){f$x=f$x.filter(function(jn){return jn!==Zr}),document.removeEventListener("wheel",rn,a$T),document.removeEventListener("touchmove",rn,a$T),document.removeEventListener("touchstart",on,a$T)}},[]);var ln=Kt.removeScrollBar,Hn=Kt.inert;return reactExports.createElement(reactExports.Fragment,null,Hn?reactExports.createElement(Zr,{styles:O$n(Yr)}):null,ln?reactExports.createElement(C$l,{gapMode:Kt.gapMode}):null)}function Z$c(Kt){for(var Vt=null;Kt!==null;)Kt instanceof ShadowRoot&&(Vt=Kt.host,Kt=Kt.host),Kt=Kt.parentNode;return Vt}var i$o=function(Kt){var Vt=Kt.sideCar,Hr=c$D(Kt,["sideCar"]);if(!Vt)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var Wr=Vt.read();if(!Wr)throw new Error("Sidecar medium not found");return reactExports.createElement(Wr,p$w({},Hr))};i$o.isSideCarExport=!0;function p$u(Kt,Vt){return Kt.useMedium(Vt),i$o}const f$w=p$u(a$W,G$e);var o$R=reactExports.forwardRef(function(Kt,Vt){return reactExports.createElement(m$E,p$w({},Kt,{ref:Vt,sideCar:f$w}))});o$R.classNames=m$E.classNames;const i$n=o$R;var x$o="Popover",[j$i,Ao$1]=P$k(x$o,[qe$3]),m$D=qe$3(),[X$e,f$v]=j$i(x$o),F$c="PopoverAnchor",N$h=reactExports.forwardRef((Kt,Vt)=>{const{__scopePopover:Hr,...Wr}=Kt,Yr=f$v(F$c,Hr),Zr=m$D(Hr),{onCustomAnchorAdd:en,onCustomAnchorRemove:tn}=Yr;return reactExports.useEffect(()=>(en(),()=>tn()),[en,tn]),m$K.jsx(Je$2,{...Zr,...Wr,ref:Vt})});N$h.displayName=F$c;var y$j="PopoverTrigger",S$k=reactExports.forwardRef((Kt,Vt)=>{const{__scopePopover:Hr,...Wr}=Kt,Yr=f$v(y$j,Hr),Zr=m$D(Hr),en=i$s(Vt,Yr.triggerRef),tn=m$K.jsx(v$C.button,{type:"button","aria-haspopup":"dialog","aria-expanded":Yr.open,"aria-controls":Yr.contentId,"data-state":L$j(Yr.open),...Wr,ref:en,onClick:h$A(Kt.onClick,Yr.onOpenToggle)});return Yr.hasCustomAnchor?tn:m$K.jsx(Je$2,{asChild:!0,...Zr,children:tn})});S$k.displayName=y$j;var R$a="PopoverPortal",[Y$c,oo$1]=j$i(R$a,{forceMount:void 0}),v$x="PopoverContent",M$m=reactExports.forwardRef((Kt,Vt)=>{const Hr=oo$1(v$x,Kt.__scopePopover),{forceMount:Wr=Hr.forceMount,...Yr}=Kt,Zr=f$v(v$x,Kt.__scopePopover);return m$K.jsx(M$n,{present:Wr||Zr.open,children:Zr.modal?m$K.jsx(eo$1,{...Yr,ref:Vt}):m$K.jsx(ro$1,{...Yr,ref:Vt})})});M$m.displayName=v$x;var eo$1=reactExports.forwardRef((Kt,Vt)=>{const Hr=f$v(v$x,Kt.__scopePopover),Wr=reactExports.useRef(null),Yr=i$s(Vt,Wr),Zr=reactExports.useRef(!1);return reactExports.useEffect(()=>{const en=Wr.current;if(en)return E$g(en)},[]),m$K.jsx(i$n,{as:d$A,allowPinchZoom:!0,children:m$K.jsx(k$e,{...Kt,ref:Yr,trapFocus:Hr.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:h$A(Kt.onCloseAutoFocus,en=>{var tn;en.preventDefault(),Zr.current||(tn=Hr.triggerRef.current)==null||tn.focus()}),onPointerDownOutside:h$A(Kt.onPointerDownOutside,en=>{const tn=en.detail.originalEvent,rn=tn.button===0&&tn.ctrlKey===!0,nn=tn.button===2||rn;Zr.current=nn},{checkForDefaultPrevented:!1}),onFocusOutside:h$A(Kt.onFocusOutside,en=>en.preventDefault(),{checkForDefaultPrevented:!1})})})}),ro$1=reactExports.forwardRef((Kt,Vt)=>{const Hr=f$v(v$x,Kt.__scopePopover),Wr=reactExports.useRef(!1),Yr=reactExports.useRef(!1);return m$K.jsx(k$e,{...Kt,ref:Vt,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:Zr=>{var en,tn;(en=Kt.onCloseAutoFocus)==null||en.call(Kt,Zr),Zr.defaultPrevented||(Wr.current||(tn=Hr.triggerRef.current)==null||tn.focus(),Zr.preventDefault()),Wr.current=!1,Yr.current=!1},onInteractOutside:Zr=>{var en,tn;(en=Kt.onInteractOutside)==null||en.call(Kt,Zr),Zr.defaultPrevented||(Wr.current=!0,Zr.detail.originalEvent.type==="pointerdown"&&(Yr.current=!0));const rn=Zr.target;(tn=Hr.triggerRef.current)!=null&&tn.contains(rn)&&Zr.preventDefault(),Zr.detail.originalEvent.type==="focusin"&&Yr.current&&Zr.preventDefault()}})}),k$e=reactExports.forwardRef((Kt,Vt)=>{const{__scopePopover:Hr,trapFocus:Wr,onOpenAutoFocus:Yr,onCloseAutoFocus:Zr,disableOutsidePointerEvents:en,onEscapeKeyDown:tn,onPointerDownOutside:rn,onFocusOutside:nn,onInteractOutside:on,...an}=Kt,$n=f$v(v$x,Hr),ln=m$D(Hr);return a$_(),m$K.jsx(k$i,{asChild:!0,loop:!0,trapped:Wr,onMountAutoFocus:Yr,onUnmountAutoFocus:Zr,children:m$K.jsx(M$p,{asChild:!0,disableOutsidePointerEvents:en,onInteractOutside:on,onEscapeKeyDown:tn,onPointerDownOutside:rn,onFocusOutside:nn,onDismiss:()=>$n.onOpenChange(!1),children:m$K.jsx(Ke$4,{"data-state":L$j($n.open),role:"dialog",id:$n.contentId,...ln,...an,ref:Vt,style:{...an.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),I$b="PopoverClose",to$1=reactExports.forwardRef((Kt,Vt)=>{const{__scopePopover:Hr,...Wr}=Kt,Yr=f$v(I$b,Hr);return m$K.jsx(v$C.button,{type:"button",...Wr,ref:Vt,onClick:h$A(Kt.onClick,()=>Yr.onOpenChange(!1))})});to$1.displayName=I$b;var no$1="PopoverArrow",T$m=reactExports.forwardRef((Kt,Vt)=>{const{__scopePopover:Hr,...Wr}=Kt,Yr=m$D(Hr);return m$K.jsx(Qe$3,{...Yr,...Wr,ref:Vt})});T$m.displayName=no$1;function L$j(Kt){return Kt?"open":"closed"}function o$Q(Kt){"@babel/helpers - typeof";return o$Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Vt){return typeof Vt}:function(Vt){return Vt&&typeof Symbol=="function"&&Vt.constructor===Symbol&&Vt!==Symbol.prototype?"symbol":typeof Vt},o$Q(Kt)}function m$C(Kt,Vt){if(o$Q(Kt)!="object"||!Kt)return Kt;var Hr=Kt[Symbol.toPrimitive];if(Hr!==void 0){var Wr=Hr.call(Kt,Vt||"default");if(o$Q(Wr)!="object")return Wr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Vt==="string"?String:Number)(Kt)}function f$u(Kt){var Vt=m$C(Kt,"string");return o$Q(Vt)=="symbol"?Vt:String(Vt)}function f$t(Kt,Vt,Hr){return Vt=f$u(Vt),Vt in Kt?Object.defineProperty(Kt,Vt,{value:Hr,enumerable:!0,configurable:!0,writable:!0}):Kt[Vt]=Hr,Kt}function a$S(Kt){for(var Vt=1;Vt<arguments.length;Vt++){var Hr=arguments[Vt]!=null?Object(arguments[Vt]):{},Wr=Object.keys(Hr);typeof Object.getOwnPropertySymbols=="function"&&Wr.push.apply(Wr,Object.getOwnPropertySymbols(Hr).filter(function(Yr){return Object.getOwnPropertyDescriptor(Hr,Yr).enumerable})),Wr.forEach(function(Yr){f$t(Kt,Yr,Hr[Yr])})}return Kt}function c$A(Kt,Vt){if(!(Kt instanceof Vt))throw new TypeError("Cannot call a class as a function")}function n$j(Kt,Vt){for(var Hr=0;Hr<Vt.length;Hr++){var Wr=Vt[Hr];Wr.enumerable=Wr.enumerable||!1,Wr.configurable=!0,"value"in Wr&&(Wr.writable=!0),Object.defineProperty(Kt,f$u(Wr.key),Wr)}}function u$t(Kt,Vt,Hr){return Vt&&n$j(Kt.prototype,Vt),Hr&&n$j(Kt,Hr),Object.defineProperty(Kt,"prototype",{writable:!1}),Kt}function i$m(Kt){if(Kt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt}function f$s(Kt,Vt){if(Vt&&(o$Q(Vt)==="object"||typeof Vt=="function"))return Vt;if(Vt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i$m(Kt)}function e$1b(Kt){return e$1b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Vt){return Vt.__proto__||Object.getPrototypeOf(Vt)},e$1b(Kt)}function e$1a(Kt,Vt){return e$1a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Hr,Wr){return Hr.__proto__=Wr,Hr},e$1a(Kt,Vt)}function i$l(Kt,Vt){if(typeof Vt!="function"&&Vt!==null)throw new TypeError("Super expression must either be null or a function");Kt.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:Kt,writable:!0,configurable:!0}}),Object.defineProperty(Kt,"prototype",{writable:!1}),Vt&&e$1a(Kt,Vt)}var ve$5={type:"logger",log:function(Kt){this.output("log",Kt)},warn:function(Kt){this.output("warn",Kt)},error:function(Kt){this.output("error",Kt)},output:function(Kt,Vt){console&&console[Kt]&&console[Kt].apply(console,Vt)}},me$6=function(){function Kt(Vt){var Hr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};c$A(this,Kt),this.init(Vt,Hr)}return u$t(Kt,[{key:"init",value:function(Vt){var Hr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=Hr.prefix||"i18next:",this.logger=Vt||ve$5,this.options=Hr,this.debug=Hr.debug}},{key:"setDebug",value:function(Vt){this.debug=Vt}},{key:"log",value:function(){for(var Vt=arguments.length,Hr=new Array(Vt),Wr=0;Wr<Vt;Wr++)Hr[Wr]=arguments[Wr];return this.forward(Hr,"log","",!0)}},{key:"warn",value:function(){for(var Vt=arguments.length,Hr=new Array(Vt),Wr=0;Wr<Vt;Wr++)Hr[Wr]=arguments[Wr];return this.forward(Hr,"warn","",!0)}},{key:"error",value:function(){for(var Vt=arguments.length,Hr=new Array(Vt),Wr=0;Wr<Vt;Wr++)Hr[Wr]=arguments[Wr];return this.forward(Hr,"error","")}},{key:"deprecate",value:function(){for(var Vt=arguments.length,Hr=new Array(Vt),Wr=0;Wr<Vt;Wr++)Hr[Wr]=arguments[Wr];return this.forward(Hr,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(Vt,Hr,Wr,Yr){return Yr&&!this.debug?null:(typeof Vt[0]=="string"&&(Vt[0]="".concat(Wr).concat(this.prefix," ").concat(Vt[0])),this.logger[Hr](Vt))}},{key:"create",value:function(Vt){return new Kt(this.logger,a$S({},{prefix:"".concat(this.prefix,":").concat(Vt,":")},this.options))}}]),Kt}(),S$j=new me$6,O$m=function(){function Kt(){c$A(this,Kt),this.observers={}}return u$t(Kt,[{key:"on",value:function(Vt,Hr){var Wr=this;return Vt.split(" ").forEach(function(Yr){Wr.observers[Yr]=Wr.observers[Yr]||[],Wr.observers[Yr].push(Hr)}),this}},{key:"off",value:function(Vt,Hr){if(this.observers[Vt]){if(!Hr){delete this.observers[Vt];return}this.observers[Vt]=this.observers[Vt].filter(function(Wr){return Wr!==Hr})}}},{key:"emit",value:function(Vt){for(var Hr=arguments.length,Wr=new Array(Hr>1?Hr-1:0),Yr=1;Yr<Hr;Yr++)Wr[Yr-1]=arguments[Yr];if(this.observers[Vt]){var Zr=[].concat(this.observers[Vt]);Zr.forEach(function(tn){tn.apply(void 0,Wr)})}if(this.observers["*"]){var en=[].concat(this.observers["*"]);en.forEach(function(tn){tn.apply(tn,[Vt].concat(Wr))})}}}]),Kt}();function U$a(){var Kt,Vt,Hr=new Promise(function(Wr,Yr){Kt=Wr,Vt=Yr});return Hr.resolve=Kt,Hr.reject=Vt,Hr}function se$9(Kt){return Kt==null?"":""+Kt}function ye$6(Kt,Vt,Hr){Kt.forEach(function(Wr){Vt[Wr]&&(Hr[Wr]=Vt[Wr])})}function Q$b(Kt,Vt,Hr){function Wr(tn){return tn&&tn.indexOf("###")>-1?tn.replace(/###/g,"."):tn}function Yr(){return!Kt||typeof Kt=="string"}for(var Zr=typeof Vt!="string"?[].concat(Vt):Vt.split(".");Zr.length>1;){if(Yr())return{};var en=Wr(Zr.shift());!Kt[en]&&Hr&&(Kt[en]=new Hr),Object.prototype.hasOwnProperty.call(Kt,en)?Kt=Kt[en]:Kt={}}return Yr()?{}:{obj:Kt,k:Wr(Zr.shift())}}function oe$9(Kt,Vt,Hr){var Wr=Q$b(Kt,Vt,Object),Yr=Wr.obj,Zr=Wr.k;Yr[Zr]=Hr}function be$5(Kt,Vt,Hr,Wr){var Yr=Q$b(Kt,Vt,Object),Zr=Yr.obj,en=Yr.k;Zr[en]=Zr[en]||[],Wr&&(Zr[en]=Zr[en].concat(Hr)),Wr||Zr[en].push(Hr)}function M$l(Kt,Vt){var Hr=Q$b(Kt,Vt),Wr=Hr.obj,Yr=Hr.k;if(Wr)return Wr[Yr]}function ue$7(Kt,Vt,Hr){var Wr=M$l(Kt,Hr);return Wr!==void 0?Wr:M$l(Vt,Hr)}function ge$4(Kt,Vt,Hr){for(var Wr in Vt)Wr!=="__proto__"&&Wr!=="constructor"&&(Wr in Kt?typeof Kt[Wr]=="string"||Kt[Wr]instanceof String||typeof Vt[Wr]=="string"||Vt[Wr]instanceof String?Hr&&(Kt[Wr]=Vt[Wr]):ge$4(Kt[Wr],Vt[Wr],Hr):Kt[Wr]=Vt[Wr]);return Kt}function F$b(Kt){return Kt.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var xe$6={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Le$3(Kt){return typeof Kt=="string"?Kt.replace(/[&<>"'\/]/g,function(Vt){return xe$6[Vt]}):Kt}var $$4=typeof window<"u"&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,Se$7=function(Kt){i$l(Vt,Kt);function Vt(Hr){var Wr,Yr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return c$A(this,Vt),Wr=f$s(this,e$1b(Vt).call(this)),$$4&&O$m.call(i$m(Wr)),Wr.data=Hr||{},Wr.options=Yr,Wr.options.keySeparator===void 0&&(Wr.options.keySeparator="."),Wr}return u$t(Vt,[{key:"addNamespaces",value:function(Hr){this.options.ns.indexOf(Hr)<0&&this.options.ns.push(Hr)}},{key:"removeNamespaces",value:function(Hr){var Wr=this.options.ns.indexOf(Hr);Wr>-1&&this.options.ns.splice(Wr,1)}},{key:"getResource",value:function(Hr,Wr,Yr){var Zr=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},en=Zr.keySeparator!==void 0?Zr.keySeparator:this.options.keySeparator,tn=[Hr,Wr];return Yr&&typeof Yr!="string"&&(tn=tn.concat(Yr)),Yr&&typeof Yr=="string"&&(tn=tn.concat(en?Yr.split(en):Yr)),Hr.indexOf(".")>-1&&(tn=Hr.split(".")),M$l(this.data,tn)}},{key:"addResource",value:function(Hr,Wr,Yr,Zr){var en=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},tn=this.options.keySeparator;tn===void 0&&(tn=".");var rn=[Hr,Wr];Yr&&(rn=rn.concat(tn?Yr.split(tn):Yr)),Hr.indexOf(".")>-1&&(rn=Hr.split("."),Zr=Wr,Wr=rn[1]),this.addNamespaces(Wr),oe$9(this.data,rn,Zr),en.silent||this.emit("added",Hr,Wr,Yr,Zr)}},{key:"addResources",value:function(Hr,Wr,Yr){var Zr=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var en in Yr)(typeof Yr[en]=="string"||Object.prototype.toString.apply(Yr[en])==="[object Array]")&&this.addResource(Hr,Wr,en,Yr[en],{silent:!0});Zr.silent||this.emit("added",Hr,Wr,Yr)}},{key:"addResourceBundle",value:function(Hr,Wr,Yr,Zr,en){var tn=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},rn=[Hr,Wr];Hr.indexOf(".")>-1&&(rn=Hr.split("."),Zr=Yr,Yr=Wr,Wr=rn[1]),this.addNamespaces(Wr);var nn=M$l(this.data,rn)||{};Zr?ge$4(nn,Yr,en):nn=a$S({},nn,Yr),oe$9(this.data,rn,nn),tn.silent||this.emit("added",Hr,Wr,Yr)}},{key:"removeResourceBundle",value:function(Hr,Wr){this.hasResourceBundle(Hr,Wr)&&delete this.data[Hr][Wr],this.removeNamespaces(Wr),this.emit("removed",Hr,Wr)}},{key:"hasResourceBundle",value:function(Hr,Wr){return this.getResource(Hr,Wr)!==void 0}},{key:"getResourceBundle",value:function(Hr,Wr){return Wr||(Wr=this.options.defaultNS),this.options.compatibilityAPI==="v1"?a$S({},{},this.getResource(Hr,Wr)):this.getResource(Hr,Wr)}},{key:"getDataByLanguage",value:function(Hr){return this.data[Hr]}},{key:"toJSON",value:function(){return this.data}}]),Vt}(O$m),he$8={processors:{},addPostProcessor:function(Kt){this.processors[Kt.name]=Kt},handle:function(Kt,Vt,Hr,Wr,Yr){var Zr=this;return Kt.forEach(function(en){Zr.processors[en]&&(Vt=Zr.processors[en].process(Vt,Hr,Wr,Yr))}),Vt}},le$4={},fe$8=function(Kt){i$l(Vt,Kt);function Vt(Hr){var Wr,Yr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return c$A(this,Vt),Wr=f$s(this,e$1b(Vt).call(this)),$$4&&O$m.call(i$m(Wr)),ye$6(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],Hr,i$m(Wr)),Wr.options=Yr,Wr.options.keySeparator===void 0&&(Wr.options.keySeparator="."),Wr.logger=S$j.create("translator"),Wr}return u$t(Vt,[{key:"changeLanguage",value:function(Hr){Hr&&(this.language=Hr)}},{key:"exists",value:function(Hr){var Wr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},Yr=this.resolve(Hr,Wr);return Yr&&Yr.res!==void 0}},{key:"extractFromKey",value:function(Hr,Wr){var Yr=Wr.nsSeparator!==void 0?Wr.nsSeparator:this.options.nsSeparator;Yr===void 0&&(Yr=":");var Zr=Wr.keySeparator!==void 0?Wr.keySeparator:this.options.keySeparator,en=Wr.ns||this.options.defaultNS;if(Yr&&Hr.indexOf(Yr)>-1){var tn=Hr.match(this.interpolator.nestingRegexp);if(tn&&tn.length>0)return{key:Hr,namespaces:en};var rn=Hr.split(Yr);(Yr!==Zr||Yr===Zr&&this.options.ns.indexOf(rn[0])>-1)&&(en=rn.shift()),Hr=rn.join(Zr)}return typeof en=="string"&&(en=[en]),{key:Hr,namespaces:en}}},{key:"translate",value:function(Hr,Wr,Yr){var Zr=this;if(o$Q(Wr)!=="object"&&this.options.overloadTranslationOptionHandler&&(Wr=this.options.overloadTranslationOptionHandler(arguments)),Wr||(Wr={}),Hr==null)return"";Array.isArray(Hr)||(Hr=[String(Hr)]);var en=Wr.keySeparator!==void 0?Wr.keySeparator:this.options.keySeparator,tn=this.extractFromKey(Hr[Hr.length-1],Wr),rn=tn.key,nn=tn.namespaces,on=nn[nn.length-1],an=Wr.lng||this.language,$n=Wr.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(an&&an.toLowerCase()==="cimode"){if($n){var ln=Wr.nsSeparator||this.options.nsSeparator;return on+ln+rn}return rn}var Hn=this.resolve(Hr,Wr),jn=Hn&&Hn.res,zn=Hn&&Hn.usedKey||rn,Wn=Hn&&Hn.exactUsedKey||rn,ei=Object.prototype.toString.apply(jn),$i=["[object Number]","[object Function]","[object RegExp]"],Mi=Wr.joinArrays!==void 0?Wr.joinArrays:this.options.joinArrays,Ni=!this.i18nFormat||this.i18nFormat.handleAsObject,Ts=typeof jn!="string"&&typeof jn!="boolean"&&typeof jn!="number";if(Ni&&jn&&Ts&&$i.indexOf(ei)<0&&!(typeof Mi=="string"&&ei==="[object Array]")){if(!Wr.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(zn,jn,Wr):"key '".concat(rn," (").concat(this.language,")' returned an object instead of string.");if(en){var ps=ei==="[object Array]",$s=ps?[]:{},Ws=ps?Wn:zn;for(var Hs in jn)if(Object.prototype.hasOwnProperty.call(jn,Hs)){var js="".concat(Ws).concat(en).concat(Hs);$s[Hs]=this.translate(js,a$S({},Wr,{joinArrays:!1,ns:nn})),$s[Hs]===js&&($s[Hs]=jn[Hs])}jn=$s}}else if(Ni&&typeof Mi=="string"&&ei==="[object Array]")jn=jn.join(Mi),jn&&(jn=this.extendTranslation(jn,Hr,Wr,Yr));else{var zs=!1,Xs=!1,ia=Wr.count!==void 0&&typeof Wr.count!="string",Qs=Vt.hasDefaultValue(Wr),Zs=ia?this.pluralResolver.getSuffix(an,Wr.count):"",Gs=Wr["defaultValue".concat(Zs)]||Wr.defaultValue;!this.isValidLookup(jn)&&Qs&&(zs=!0,jn=Gs),this.isValidLookup(jn)||(Xs=!0,jn=rn);var Hl=Qs&&Gs!==jn&&this.options.updateMissing;if(Xs||zs||Hl){if(this.logger.log(Hl?"updateKey":"missingKey",an,on,rn,Hl?Gs:jn),en){var Js=this.resolve(rn,a$S({},Wr,{keySeparator:!1}));Js&&Js.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var sa=[],Ca=this.languageUtils.getFallbackCodes(this.options.fallbackLng,Wr.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Ca&&Ca[0])for(var tc=0;tc<Ca.length;tc++)sa.push(Ca[tc]);else this.options.saveMissingTo==="all"?sa=this.languageUtils.toResolveHierarchy(Wr.lng||this.language):sa.push(Wr.lng||this.language);var zl=function(ec,sc,ac){Zr.options.missingKeyHandler?Zr.options.missingKeyHandler(ec,on,sc,Hl?ac:jn,Hl,Wr):Zr.backendConnector&&Zr.backendConnector.saveMissing&&Zr.backendConnector.saveMissing(ec,on,sc,Hl?ac:jn,Hl,Wr),Zr.emit("missingKey",ec,on,sc,jn)};this.options.saveMissing&&(this.options.saveMissingPlurals&&ia?sa.forEach(function(ec){Zr.pluralResolver.getSuffixes(ec).forEach(function(sc){zl([ec],rn+sc,Wr["defaultValue".concat(sc)]||Gs)})}):zl(sa,rn,Gs))}jn=this.extendTranslation(jn,Hr,Wr,Hn,Yr),Xs&&jn===rn&&this.options.appendNamespaceToMissingKey&&(jn="".concat(on,":").concat(rn)),Xs&&this.options.parseMissingKeyHandler&&(jn=this.options.parseMissingKeyHandler(jn))}return jn}},{key:"extendTranslation",value:function(Hr,Wr,Yr,Zr,en){var tn=this;if(this.i18nFormat&&this.i18nFormat.parse)Hr=this.i18nFormat.parse(Hr,Yr,Zr.usedLng,Zr.usedNS,Zr.usedKey,{resolved:Zr});else if(!Yr.skipInterpolation){Yr.interpolation&&this.interpolator.init(a$S({},Yr,{interpolation:a$S({},this.options.interpolation,Yr.interpolation)}));var rn=Yr.interpolation&&Yr.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables,nn;if(rn){var on=Hr.match(this.interpolator.nestingRegexp);nn=on&&on.length}var an=Yr.replace&&typeof Yr.replace!="string"?Yr.replace:Yr;if(this.options.interpolation.defaultVariables&&(an=a$S({},this.options.interpolation.defaultVariables,an)),Hr=this.interpolator.interpolate(Hr,an,Yr.lng||this.language,Yr),rn){var $n=Hr.match(this.interpolator.nestingRegexp),ln=$n&&$n.length;nn<ln&&(Yr.nest=!1)}Yr.nest!==!1&&(Hr=this.interpolator.nest(Hr,function(){for(var zn=arguments.length,Wn=new Array(zn),ei=0;ei<zn;ei++)Wn[ei]=arguments[ei];return en&&en[0]===Wn[0]&&!Yr.context?(tn.logger.warn("It seems you are nesting recursively key: ".concat(Wn[0]," in key: ").concat(Wr[0])),null):tn.translate.apply(tn,Wn.concat([Wr]))},Yr)),Yr.interpolation&&this.interpolator.reset()}var Hn=Yr.postProcess||this.options.postProcess,jn=typeof Hn=="string"?[Hn]:Hn;return Hr!=null&&jn&&jn.length&&Yr.applyPostProcessor!==!1&&(Hr=he$8.handle(jn,Hr,Wr,this.options&&this.options.postProcessPassResolved?a$S({i18nResolved:Zr},Yr):Yr,this)),Hr}},{key:"resolve",value:function(Hr){var Wr=this,Yr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Zr,en,tn,rn,nn;return typeof Hr=="string"&&(Hr=[Hr]),Hr.forEach(function(on){if(!Wr.isValidLookup(Zr)){var an=Wr.extractFromKey(on,Yr),$n=an.key;en=$n;var ln=an.namespaces;Wr.options.fallbackNS&&(ln=ln.concat(Wr.options.fallbackNS));var Hn=Yr.count!==void 0&&typeof Yr.count!="string",jn=Yr.context!==void 0&&typeof Yr.context=="string"&&Yr.context!=="",zn=Yr.lngs?Yr.lngs:Wr.languageUtils.toResolveHierarchy(Yr.lng||Wr.language,Yr.fallbackLng);ln.forEach(function(Wn){Wr.isValidLookup(Zr)||(nn=Wn,!le$4["".concat(zn[0],"-").concat(Wn)]&&Wr.utils&&Wr.utils.hasLoadedNamespace&&!Wr.utils.hasLoadedNamespace(nn)&&(le$4["".concat(zn[0],"-").concat(Wn)]=!0,Wr.logger.warn('key "'.concat(en,'" for languages "').concat(zn.join(", "),`" won't get resolved as namespace "`).concat(nn,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),zn.forEach(function(ei){if(!Wr.isValidLookup(Zr)){rn=ei;var $i=$n,Mi=[$i];if(Wr.i18nFormat&&Wr.i18nFormat.addLookupKeys)Wr.i18nFormat.addLookupKeys(Mi,$n,ei,Wn,Yr);else{var Ni;Hn&&(Ni=Wr.pluralResolver.getSuffix(ei,Yr.count)),Hn&&jn&&Mi.push($i+Ni),jn&&Mi.push($i+="".concat(Wr.options.contextSeparator).concat(Yr.context)),Hn&&Mi.push($i+=Ni)}for(var Ts;Ts=Mi.pop();)Wr.isValidLookup(Zr)||(tn=Ts,Zr=Wr.getResource(ei,Wn,Ts,Yr))}}))})}}),{res:Zr,usedKey:en,exactUsedKey:tn,usedLng:rn,usedNS:nn}}},{key:"isValidLookup",value:function(Hr){return Hr!==void 0&&!(!this.options.returnNull&&Hr===null)&&!(!this.options.returnEmptyString&&Hr==="")}},{key:"getResource",value:function(Hr,Wr,Yr){var Zr=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(Hr,Wr,Yr,Zr):this.resourceStore.getResource(Hr,Wr,Yr,Zr)}}],[{key:"hasDefaultValue",value:function(Hr){var Wr="defaultValue";for(var Yr in Hr)if(Object.prototype.hasOwnProperty.call(Hr,Yr)&&Wr===Yr.substring(0,Wr.length)&&Hr[Yr]!==void 0)return!0;return!1}}]),Vt}(O$m);function q$h(Kt){return Kt.charAt(0).toUpperCase()+Kt.slice(1)}var we$3=function(){function Kt(Vt){c$A(this,Kt),this.options=Vt,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=S$j.create("languageUtils")}return u$t(Kt,[{key:"getScriptPartFromCode",value:function(Vt){if(!Vt||Vt.indexOf("-")<0)return null;var Hr=Vt.split("-");return Hr.length===2||(Hr.pop(),Hr[Hr.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(Hr.join("-"))}},{key:"getLanguagePartFromCode",value:function(Vt){if(!Vt||Vt.indexOf("-")<0)return Vt;var Hr=Vt.split("-");return this.formatLanguageCode(Hr[0])}},{key:"formatLanguageCode",value:function(Vt){if(typeof Vt=="string"&&Vt.indexOf("-")>-1){var Hr=["hans","hant","latn","cyrl","cans","mong","arab"],Wr=Vt.split("-");return this.options.lowerCaseLng?Wr=Wr.map(function(Yr){return Yr.toLowerCase()}):Wr.length===2?(Wr[0]=Wr[0].toLowerCase(),Wr[1]=Wr[1].toUpperCase(),Hr.indexOf(Wr[1].toLowerCase())>-1&&(Wr[1]=q$h(Wr[1].toLowerCase()))):Wr.length===3&&(Wr[0]=Wr[0].toLowerCase(),Wr[1].length===2&&(Wr[1]=Wr[1].toUpperCase()),Wr[0]!=="sgn"&&Wr[2].length===2&&(Wr[2]=Wr[2].toUpperCase()),Hr.indexOf(Wr[1].toLowerCase())>-1&&(Wr[1]=q$h(Wr[1].toLowerCase())),Hr.indexOf(Wr[2].toLowerCase())>-1&&(Wr[2]=q$h(Wr[2].toLowerCase()))),Wr.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?Vt.toLowerCase():Vt}},{key:"isWhitelisted",value:function(Vt){return this.logger.deprecate("languageUtils.isWhitelisted",`function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it's usage asap.`),this.isSupportedCode(Vt)}},{key:"isSupportedCode",value:function(Vt){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(Vt=this.getLanguagePartFromCode(Vt)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(Vt)>-1}},{key:"getBestMatchFromCodes",value:function(Vt){var Hr=this;if(!Vt)return null;var Wr;return Vt.forEach(function(Yr){if(!Wr){var Zr=Hr.formatLanguageCode(Yr);(!Hr.options.supportedLngs||Hr.isSupportedCode(Zr))&&(Wr=Zr)}}),!Wr&&this.options.supportedLngs&&Vt.forEach(function(Yr){if(!Wr){var Zr=Hr.getLanguagePartFromCode(Yr);if(Hr.isSupportedCode(Zr))return Wr=Zr;Wr=Hr.options.supportedLngs.find(function(en){if(en.indexOf(Zr)===0)return en})}}),Wr||(Wr=this.getFallbackCodes(this.options.fallbackLng)[0]),Wr}},{key:"getFallbackCodes",value:function(Vt,Hr){if(!Vt)return[];if(typeof Vt=="function"&&(Vt=Vt(Hr)),typeof Vt=="string"&&(Vt=[Vt]),Object.prototype.toString.apply(Vt)==="[object Array]")return Vt;if(!Hr)return Vt.default||[];var Wr=Vt[Hr];return Wr||(Wr=Vt[this.getScriptPartFromCode(Hr)]),Wr||(Wr=Vt[this.formatLanguageCode(Hr)]),Wr||(Wr=Vt[this.getLanguagePartFromCode(Hr)]),Wr||(Wr=Vt.default),Wr||[]}},{key:"toResolveHierarchy",value:function(Vt,Hr){var Wr=this,Yr=this.getFallbackCodes(Hr||this.options.fallbackLng||[],Vt),Zr=[],en=function(tn){tn&&(Wr.isSupportedCode(tn)?Zr.push(tn):Wr.logger.warn("rejecting language code not found in supportedLngs: ".concat(tn)))};return typeof Vt=="string"&&Vt.indexOf("-")>-1?(this.options.load!=="languageOnly"&&en(this.formatLanguageCode(Vt)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&en(this.getScriptPartFromCode(Vt)),this.options.load!=="currentOnly"&&en(this.getLanguagePartFromCode(Vt))):typeof Vt=="string"&&en(this.formatLanguageCode(Vt)),Yr.forEach(function(tn){Zr.indexOf(tn)<0&&en(Wr.formatLanguageCode(tn))}),Zr}}]),Kt}(),ke$5=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Re$6={1:function(Kt){return+(Kt>1)},2:function(Kt){return+(Kt!=1)},3:function(Kt){return 0},4:function(Kt){return Kt%10==1&&Kt%100!=11?0:Kt%10>=2&&Kt%10<=4&&(Kt%100<10||Kt%100>=20)?1:2},5:function(Kt){return Kt==0?0:Kt==1?1:Kt==2?2:Kt%100>=3&&Kt%100<=10?3:Kt%100>=11?4:5},6:function(Kt){return Kt==1?0:Kt>=2&&Kt<=4?1:2},7:function(Kt){return Kt==1?0:Kt%10>=2&&Kt%10<=4&&(Kt%100<10||Kt%100>=20)?1:2},8:function(Kt){return Kt==1?0:Kt==2?1:Kt!=8&&Kt!=11?2:3},9:function(Kt){return+(Kt>=2)},10:function(Kt){return Kt==1?0:Kt==2?1:Kt<7?2:Kt<11?3:4},11:function(Kt){return Kt==1||Kt==11?0:Kt==2||Kt==12?1:Kt>2&&Kt<20?2:3},12:function(Kt){return+(Kt%10!=1||Kt%100==11)},13:function(Kt){return+(Kt!==0)},14:function(Kt){return Kt==1?0:Kt==2?1:Kt==3?2:3},15:function(Kt){return Kt%10==1&&Kt%100!=11?0:Kt%10>=2&&(Kt%100<10||Kt%100>=20)?1:2},16:function(Kt){return Kt%10==1&&Kt%100!=11?0:Kt!==0?1:2},17:function(Kt){return Kt==1||Kt%10==1&&Kt%100!=11?0:1},18:function(Kt){return Kt==0?0:Kt==1?1:2},19:function(Kt){return Kt==1?0:Kt==0||Kt%100>1&&Kt%100<11?1:Kt%100>10&&Kt%100<20?2:3},20:function(Kt){return Kt==1?0:Kt==0||Kt%100>0&&Kt%100<20?1:2},21:function(Kt){return Kt%100==1?1:Kt%100==2?2:Kt%100==3||Kt%100==4?3:0},22:function(Kt){return Kt==1?0:Kt==2?1:(Kt<0||Kt>10)&&Kt%10==0?2:3}};function Oe$6(){var Kt={};return ke$5.forEach(function(Vt){Vt.lngs.forEach(function(Hr){Kt[Hr]={numbers:Vt.nr,plurals:Re$6[Vt.fc]}})}),Kt}var Ce$6=function(){function Kt(Vt){var Hr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};c$A(this,Kt),this.languageUtils=Vt,this.options=Hr,this.logger=S$j.create("pluralResolver"),this.rules=Oe$6()}return u$t(Kt,[{key:"addRule",value:function(Vt,Hr){this.rules[Vt]=Hr}},{key:"getRule",value:function(Vt){return this.rules[Vt]||this.rules[this.languageUtils.getLanguagePartFromCode(Vt)]}},{key:"needsPlural",value:function(Vt){var Hr=this.getRule(Vt);return Hr&&Hr.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(Vt,Hr){return this.getSuffixes(Vt).map(function(Wr){return Hr+Wr})}},{key:"getSuffixes",value:function(Vt){var Hr=this,Wr=this.getRule(Vt);return Wr?Wr.numbers.map(function(Yr){return Hr.getSuffix(Vt,Yr)}):[]}},{key:"getSuffix",value:function(Vt,Hr){var Wr=this,Yr=this.getRule(Vt);if(Yr){var Zr=Yr.noAbs?Yr.plurals(Hr):Yr.plurals(Math.abs(Hr)),en=Yr.numbers[Zr];this.options.simplifyPluralSuffix&&Yr.numbers.length===2&&Yr.numbers[0]===1&&(en===2?en="plural":en===1&&(en=""));var tn=function(){return Wr.options.prepend&&en.toString()?Wr.options.prepend+en.toString():en.toString()};return this.options.compatibilityJSON==="v1"?en===1?"":typeof en=="number"?"_plural_".concat(en.toString()):tn():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&Yr.numbers.length===2&&Yr.numbers[0]===1?tn():this.options.prepend&&Zr.toString()?this.options.prepend+Zr.toString():Zr.toString()}return this.logger.warn("no plural rule found for: ".concat(Vt)),""}}]),Kt}(),Ne$4=function(){function Kt(){var Vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};c$A(this,Kt),this.logger=S$j.create("interpolator"),this.options=Vt,this.format=Vt.interpolation&&Vt.interpolation.format||function(Hr){return Hr},this.init(Vt)}return u$t(Kt,[{key:"init",value:function(){var Vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Vt.interpolation||(Vt.interpolation={escapeValue:!0});var Hr=Vt.interpolation;this.escape=Hr.escape!==void 0?Hr.escape:Le$3,this.escapeValue=Hr.escapeValue!==void 0?Hr.escapeValue:!0,this.useRawValueToEscape=Hr.useRawValueToEscape!==void 0?Hr.useRawValueToEscape:!1,this.prefix=Hr.prefix?F$b(Hr.prefix):Hr.prefixEscaped||"{{",this.suffix=Hr.suffix?F$b(Hr.suffix):Hr.suffixEscaped||"}}",this.formatSeparator=Hr.formatSeparator?Hr.formatSeparator:Hr.formatSeparator||",",this.unescapePrefix=Hr.unescapeSuffix?"":Hr.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":Hr.unescapeSuffix||"",this.nestingPrefix=Hr.nestingPrefix?F$b(Hr.nestingPrefix):Hr.nestingPrefixEscaped||F$b("$t("),this.nestingSuffix=Hr.nestingSuffix?F$b(Hr.nestingSuffix):Hr.nestingSuffixEscaped||F$b(")"),this.nestingOptionsSeparator=Hr.nestingOptionsSeparator?Hr.nestingOptionsSeparator:Hr.nestingOptionsSeparator||",",this.maxReplaces=Hr.maxReplaces?Hr.maxReplaces:1e3,this.alwaysFormat=Hr.alwaysFormat!==void 0?Hr.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var Vt="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(Vt,"g");var Hr="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(Hr,"g");var Wr="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(Wr,"g")}},{key:"interpolate",value:function(Vt,Hr,Wr,Yr){var Zr=this,en,tn,rn,nn=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function on(jn){return jn.replace(/\$/g,"$$$$")}var an=function(jn){if(jn.indexOf(Zr.formatSeparator)<0){var zn=ue$7(Hr,nn,jn);return Zr.alwaysFormat?Zr.format(zn,void 0,Wr):zn}var Wn=jn.split(Zr.formatSeparator),ei=Wn.shift().trim(),$i=Wn.join(Zr.formatSeparator).trim();return Zr.format(ue$7(Hr,nn,ei),$i,Wr,Yr)};this.resetRegExp();var $n=Yr&&Yr.missingInterpolationHandler||this.options.missingInterpolationHandler,ln=Yr&&Yr.interpolation&&Yr.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables,Hn=[{regex:this.regexpUnescape,safeValue:function(jn){return on(jn)}},{regex:this.regexp,safeValue:function(jn){return Zr.escapeValue?on(Zr.escape(jn)):on(jn)}}];return Hn.forEach(function(jn){for(rn=0;en=jn.regex.exec(Vt);){if(tn=an(en[1].trim()),tn===void 0)if(typeof $n=="function"){var zn=$n(Vt,en,Yr);tn=typeof zn=="string"?zn:""}else if(ln){tn=en[0];continue}else Zr.logger.warn("missed to pass in variable ".concat(en[1]," for interpolating ").concat(Vt)),tn="";else typeof tn!="string"&&!Zr.useRawValueToEscape&&(tn=se$9(tn));if(Vt=Vt.replace(en[0],jn.safeValue(tn)),jn.regex.lastIndex=0,rn++,rn>=Zr.maxReplaces)break}}),Vt}},{key:"nest",value:function(Vt,Hr){var Wr=this,Yr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Zr,en,tn=a$S({},Yr);tn.applyPostProcessor=!1,delete tn.defaultValue;function rn($n,ln){var Hn=this.nestingOptionsSeparator;if($n.indexOf(Hn)<0)return $n;var jn=$n.split(new RegExp("".concat(Hn,"[ ]*{"))),zn="{".concat(jn[1]);$n=jn[0],zn=this.interpolate(zn,tn),zn=zn.replace(/'/g,'"');try{tn=JSON.parse(zn),ln&&(tn=a$S({},ln,tn))}catch(Wn){return this.logger.warn("failed parsing options string in nesting for key ".concat($n),Wn),"".concat($n).concat(Hn).concat(zn)}return delete tn.defaultValue,$n}for(;Zr=this.nestingRegexp.exec(Vt);){var nn=[],on=!1;if(Zr[0].includes(this.formatSeparator)&&!/{.*}/.test(Zr[1])){var an=Zr[1].split(this.formatSeparator).map(function($n){return $n.trim()});Zr[1]=an.shift(),nn=an,on=!0}if(en=Hr(rn.call(this,Zr[1].trim(),tn),tn),en&&Zr[0]===Vt&&typeof en!="string")return en;typeof en!="string"&&(en=se$9(en)),en||(this.logger.warn("missed to resolve ".concat(Zr[1]," for nesting ").concat(Vt)),en=""),on&&(en=nn.reduce(function($n,ln){return Wr.format($n,ln,Yr.lng,Yr)},en.trim())),Vt=Vt.replace(Zr[0],en),this.regexp.lastIndex=0}return Vt}}]),Kt}();function Pe$4(Kt,Vt){for(var Hr=Kt.indexOf(Vt);Hr!==-1;)Kt.splice(Hr,1),Hr=Kt.indexOf(Vt)}var Ee$8=function(Kt){i$l(Vt,Kt);function Vt(Hr,Wr,Yr){var Zr,en=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return c$A(this,Vt),Zr=f$s(this,e$1b(Vt).call(this)),$$4&&O$m.call(i$m(Zr)),Zr.backend=Hr,Zr.store=Wr,Zr.services=Yr,Zr.languageUtils=Yr.languageUtils,Zr.options=en,Zr.logger=S$j.create("backendConnector"),Zr.state={},Zr.queue=[],Zr.backend&&Zr.backend.init&&Zr.backend.init(Yr,en.backend,en),Zr}return u$t(Vt,[{key:"queueLoad",value:function(Hr,Wr,Yr,Zr){var en=this,tn=[],rn=[],nn=[],on=[];return Hr.forEach(function(an){var $n=!0;Wr.forEach(function(ln){var Hn="".concat(an,"|").concat(ln);!Yr.reload&&en.store.hasResourceBundle(an,ln)?en.state[Hn]=2:en.state[Hn]<0||(en.state[Hn]===1?rn.indexOf(Hn)<0&&rn.push(Hn):(en.state[Hn]=1,$n=!1,rn.indexOf(Hn)<0&&rn.push(Hn),tn.indexOf(Hn)<0&&tn.push(Hn),on.indexOf(ln)<0&&on.push(ln)))}),$n||nn.push(an)}),(tn.length||rn.length)&&this.queue.push({pending:rn,loaded:{},errors:[],callback:Zr}),{toLoad:tn,pending:rn,toLoadLanguages:nn,toLoadNamespaces:on}}},{key:"loaded",value:function(Hr,Wr,Yr){var Zr=Hr.split("|"),en=Zr[0],tn=Zr[1];Wr&&this.emit("failedLoading",en,tn,Wr),Yr&&this.store.addResourceBundle(en,tn,Yr),this.state[Hr]=Wr?-1:2;var rn={};this.queue.forEach(function(nn){be$5(nn.loaded,[en],tn),Pe$4(nn.pending,Hr),Wr&&nn.errors.push(Wr),nn.pending.length===0&&!nn.done&&(Object.keys(nn.loaded).forEach(function(on){rn[on]||(rn[on]=[]),nn.loaded[on].length&&nn.loaded[on].forEach(function(an){rn[on].indexOf(an)<0&&rn[on].push(an)})}),nn.done=!0,nn.errors.length?nn.callback(nn.errors):nn.callback())}),this.emit("loaded",rn),this.queue=this.queue.filter(function(nn){return!nn.done})}},{key:"read",value:function(Hr,Wr,Yr){var Zr=this,en=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,tn=arguments.length>4&&arguments[4]!==void 0?arguments[4]:350,rn=arguments.length>5?arguments[5]:void 0;return Hr.length?this.backend[Yr](Hr,Wr,function(nn,on){if(nn&&on&&en<5){setTimeout(function(){Zr.read.call(Zr,Hr,Wr,Yr,en+1,tn*2,rn)},tn);return}rn(nn,on)}):rn(null,{})}},{key:"prepareLoading",value:function(Hr,Wr){var Yr=this,Zr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},en=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),en&&en();typeof Hr=="string"&&(Hr=this.languageUtils.toResolveHierarchy(Hr)),typeof Wr=="string"&&(Wr=[Wr]);var tn=this.queueLoad(Hr,Wr,Zr,en);if(!tn.toLoad.length)return tn.pending.length||en(),null;tn.toLoad.forEach(function(rn){Yr.loadOne(rn)})}},{key:"load",value:function(Hr,Wr,Yr){this.prepareLoading(Hr,Wr,{},Yr)}},{key:"reload",value:function(Hr,Wr,Yr){this.prepareLoading(Hr,Wr,{reload:!0},Yr)}},{key:"loadOne",value:function(Hr){var Wr=this,Yr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",Zr=Hr.split("|"),en=Zr[0],tn=Zr[1];this.read(en,tn,"read",void 0,void 0,function(rn,nn){rn&&Wr.logger.warn("".concat(Yr,"loading namespace ").concat(tn," for language ").concat(en," failed"),rn),!rn&&nn&&Wr.logger.log("".concat(Yr,"loaded namespace ").concat(tn," for language ").concat(en),nn),Wr.loaded(Hr,rn,nn)})}},{key:"saveMissing",value:function(Hr,Wr,Yr,Zr,en){var tn=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(Wr)){this.logger.warn('did not save key "'.concat(Yr,'" as the namespace "').concat(Wr,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}Yr==null||Yr===""||(this.backend&&this.backend.create&&this.backend.create(Hr,Wr,Yr,Zr,null,a$S({},tn,{isUpdate:en})),!(!Hr||!Hr[0])&&this.store.addResource(Hr[0],Wr,Yr,Zr))}}]),Vt}(O$m);function Fe$4(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(Kt){var Vt={};if(o$Q(Kt[1])==="object"&&(Vt=Kt[1]),typeof Kt[1]=="string"&&(Vt.defaultValue=Kt[1]),typeof Kt[2]=="string"&&(Vt.tDescription=Kt[2]),o$Q(Kt[2])==="object"||o$Q(Kt[3])==="object"){var Hr=Kt[3]||Kt[2];Object.keys(Hr).forEach(function(Wr){Vt[Wr]=Hr[Wr]})}return Vt},interpolation:{escapeValue:!0,format:function(Kt,Vt,Hr,Wr){return Kt},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function ce$8(Kt){return typeof Kt.ns=="string"&&(Kt.ns=[Kt.ns]),typeof Kt.fallbackLng=="string"&&(Kt.fallbackLng=[Kt.fallbackLng]),typeof Kt.fallbackNS=="string"&&(Kt.fallbackNS=[Kt.fallbackNS]),Kt.whitelist&&(Kt.whitelist&&Kt.whitelist.indexOf("cimode")<0&&(Kt.whitelist=Kt.whitelist.concat(["cimode"])),Kt.supportedLngs=Kt.whitelist),Kt.nonExplicitWhitelist&&(Kt.nonExplicitSupportedLngs=Kt.nonExplicitWhitelist),Kt.supportedLngs&&Kt.supportedLngs.indexOf("cimode")<0&&(Kt.supportedLngs=Kt.supportedLngs.concat(["cimode"])),Kt}function B$h(){}var je$5=function(Kt){i$l(Vt,Kt);function Vt(){var Hr,Wr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Yr=arguments.length>1?arguments[1]:void 0;if(c$A(this,Vt),Hr=f$s(this,e$1b(Vt).call(this)),$$4&&O$m.call(i$m(Hr)),Hr.options=ce$8(Wr),Hr.services={},Hr.logger=S$j,Hr.modules={external:[]},Yr&&!Hr.isInitialized&&!Wr.isClone){if(!Hr.options.initImmediate)return Hr.init(Wr,Yr),f$s(Hr,i$m(Hr));setTimeout(function(){Hr.init(Wr,Yr)},0)}return Hr}return u$t(Vt,[{key:"init",value:function(){var Hr=this,Wr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Yr=arguments.length>1?arguments[1]:void 0;typeof Wr=="function"&&(Yr=Wr,Wr={}),Wr.whitelist&&!Wr.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),Wr.nonExplicitWhitelist&&!Wr.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=a$S({},Fe$4(),this.options,ce$8(Wr)),this.format=this.options.interpolation.format,Yr||(Yr=B$h);function Zr(ln){return ln?typeof ln=="function"?new ln:ln:null}if(!this.options.isClone){this.modules.logger?S$j.init(Zr(this.modules.logger),this.options):S$j.init(null,this.options);var en=new we$3(this.options);this.store=new Se$7(this.options.resources,this.options);var tn=this.services;tn.logger=S$j,tn.resourceStore=this.store,tn.languageUtils=en,tn.pluralResolver=new Ce$6(en,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),tn.interpolator=new Ne$4(this.options),tn.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},tn.backendConnector=new Ee$8(Zr(this.modules.backend),tn.resourceStore,tn,this.options),tn.backendConnector.on("*",function(ln){for(var Hn=arguments.length,jn=new Array(Hn>1?Hn-1:0),zn=1;zn<Hn;zn++)jn[zn-1]=arguments[zn];Hr.emit.apply(Hr,[ln].concat(jn))}),this.modules.languageDetector&&(tn.languageDetector=Zr(this.modules.languageDetector),tn.languageDetector.init(tn,this.options.detection,this.options)),this.modules.i18nFormat&&(tn.i18nFormat=Zr(this.modules.i18nFormat),tn.i18nFormat.init&&tn.i18nFormat.init(this)),this.translator=new fe$8(this.services,this.options),this.translator.on("*",function(ln){for(var Hn=arguments.length,jn=new Array(Hn>1?Hn-1:0),zn=1;zn<Hn;zn++)jn[zn-1]=arguments[zn];Hr.emit.apply(Hr,[ln].concat(jn))}),this.modules.external.forEach(function(ln){ln.init&&ln.init(Hr)})}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var rn=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);rn.length>0&&rn[0]!=="dev"&&(this.options.lng=rn[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var nn=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];nn.forEach(function(ln){Hr[ln]=function(){var Hn;return(Hn=Hr.store)[ln].apply(Hn,arguments)}});var on=["addResource","addResources","addResourceBundle","removeResourceBundle"];on.forEach(function(ln){Hr[ln]=function(){var Hn;return(Hn=Hr.store)[ln].apply(Hn,arguments),Hr}});var an=U$a(),$n=function(){var ln=function(Hn,jn){Hr.isInitialized&&Hr.logger.warn("init: i18next is already initialized. You should call init just once!"),Hr.isInitialized=!0,Hr.options.isClone||Hr.logger.log("initialized",Hr.options),Hr.emit("initialized",Hr.options),an.resolve(jn),Yr(Hn,jn)};if(Hr.languages&&Hr.options.compatibilityAPI!=="v1"&&!Hr.isInitialized)return ln(null,Hr.t.bind(Hr));Hr.changeLanguage(Hr.options.lng,ln)};return this.options.resources||!this.options.initImmediate?$n():setTimeout($n,0),an}},{key:"loadResources",value:function(Hr){var Wr=this,Yr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:B$h,Zr=Yr,en=typeof Hr=="string"?Hr:this.language;if(typeof Hr=="function"&&(Zr=Hr),!this.options.resources||this.options.partialBundledLanguages){if(en&&en.toLowerCase()==="cimode")return Zr();var tn=[],rn=function(on){if(on){var an=Wr.services.languageUtils.toResolveHierarchy(on);an.forEach(function($n){tn.indexOf($n)<0&&tn.push($n)})}};if(en)rn(en);else{var nn=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);nn.forEach(function(on){return rn(on)})}this.options.preload&&this.options.preload.forEach(function(on){return rn(on)}),this.services.backendConnector.load(tn,this.options.ns,Zr)}else Zr(null)}},{key:"reloadResources",value:function(Hr,Wr,Yr){var Zr=U$a();return Hr||(Hr=this.languages),Wr||(Wr=this.options.ns),Yr||(Yr=B$h),this.services.backendConnector.reload(Hr,Wr,function(en){Zr.resolve(),Yr(en)}),Zr}},{key:"use",value:function(Hr){if(!Hr)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!Hr.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return Hr.type==="backend"&&(this.modules.backend=Hr),(Hr.type==="logger"||Hr.log&&Hr.warn&&Hr.error)&&(this.modules.logger=Hr),Hr.type==="languageDetector"&&(this.modules.languageDetector=Hr),Hr.type==="i18nFormat"&&(this.modules.i18nFormat=Hr),Hr.type==="postProcessor"&&he$8.addPostProcessor(Hr),Hr.type==="3rdParty"&&this.modules.external.push(Hr),this}},{key:"changeLanguage",value:function(Hr,Wr){var Yr=this;this.isLanguageChangingTo=Hr;var Zr=U$a();this.emit("languageChanging",Hr);var en=function(rn,nn){nn?(Yr.language=nn,Yr.languages=Yr.services.languageUtils.toResolveHierarchy(nn),Yr.translator.changeLanguage(nn),Yr.isLanguageChangingTo=void 0,Yr.emit("languageChanged",nn),Yr.logger.log("languageChanged",nn)):Yr.isLanguageChangingTo=void 0,Zr.resolve(function(){return Yr.t.apply(Yr,arguments)}),Wr&&Wr(rn,function(){return Yr.t.apply(Yr,arguments)})},tn=function(rn){var nn=typeof rn=="string"?rn:Yr.services.languageUtils.getBestMatchFromCodes(rn);nn&&(Yr.language||(Yr.language=nn,Yr.languages=Yr.services.languageUtils.toResolveHierarchy(nn)),Yr.translator.language||Yr.translator.changeLanguage(nn),Yr.services.languageDetector&&Yr.services.languageDetector.cacheUserLanguage(nn)),Yr.loadResources(nn,function(on){en(on,nn)})};return!Hr&&this.services.languageDetector&&!this.services.languageDetector.async?tn(this.services.languageDetector.detect()):!Hr&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(tn):tn(Hr),Zr}},{key:"getFixedT",value:function(Hr,Wr){var Yr=this,Zr=function en(tn,rn){var nn;if(o$Q(rn)!=="object"){for(var on=arguments.length,an=new Array(on>2?on-2:0),$n=2;$n<on;$n++)an[$n-2]=arguments[$n];nn=Yr.options.overloadTranslationOptionHandler([tn,rn].concat(an))}else nn=a$S({},rn);return nn.lng=nn.lng||en.lng,nn.lngs=nn.lngs||en.lngs,nn.ns=nn.ns||en.ns,Yr.t(tn,nn)};return typeof Hr=="string"?Zr.lng=Hr:Zr.lngs=Hr,Zr.ns=Wr,Zr}},{key:"t",value:function(){var Hr;return this.translator&&(Hr=this.translator).translate.apply(Hr,arguments)}},{key:"exists",value:function(){var Hr;return this.translator&&(Hr=this.translator).exists.apply(Hr,arguments)}},{key:"setDefaultNamespace",value:function(Hr){this.options.defaultNS=Hr}},{key:"hasLoadedNamespace",value:function(Hr){var Wr=this,Yr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var Zr=this.languages[0],en=this.options?this.options.fallbackLng:!1,tn=this.languages[this.languages.length-1];if(Zr.toLowerCase()==="cimode")return!0;var rn=function(on,an){var $n=Wr.services.backendConnector.state["".concat(on,"|").concat(an)];return $n===-1||$n===2};if(Yr.precheck){var nn=Yr.precheck(this,rn);if(nn!==void 0)return nn}return!!(this.hasResourceBundle(Zr,Hr)||!this.services.backendConnector.backend||rn(Zr,Hr)&&(!en||rn(tn,Hr)))}},{key:"loadNamespaces",value:function(Hr,Wr){var Yr=this,Zr=U$a();return this.options.ns?(typeof Hr=="string"&&(Hr=[Hr]),Hr.forEach(function(en){Yr.options.ns.indexOf(en)<0&&Yr.options.ns.push(en)}),this.loadResources(function(en){Zr.resolve(),Wr&&Wr(en)}),Zr):(Wr&&Wr(),Promise.resolve())}},{key:"loadLanguages",value:function(Hr,Wr){var Yr=U$a();typeof Hr=="string"&&(Hr=[Hr]);var Zr=this.options.preload||[],en=Hr.filter(function(tn){return Zr.indexOf(tn)<0});return en.length?(this.options.preload=Zr.concat(en),this.loadResources(function(tn){Yr.resolve(),Wr&&Wr(tn)}),Yr):(Wr&&Wr(),Promise.resolve())}},{key:"dir",value:function(Hr){if(Hr||(Hr=this.languages&&this.languages.length>0?this.languages[0]:this.language),!Hr)return"rtl";var Wr=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"];return Wr.indexOf(this.services.languageUtils.getLanguagePartFromCode(Hr))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var Hr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Wr=arguments.length>1?arguments[1]:void 0;return new Vt(Hr,Wr)}},{key:"cloneInstance",value:function(){var Hr=this,Wr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Yr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:B$h,Zr=a$S({},this.options,Wr,{isClone:!0}),en=new Vt(Zr),tn=["store","services","language"];return tn.forEach(function(rn){en[rn]=Hr[rn]}),en.services=a$S({},this.services),en.services.utils={hasLoadedNamespace:en.hasLoadedNamespace.bind(en)},en.translator=new fe$8(en.services,en.options),en.translator.on("*",function(rn){for(var nn=arguments.length,on=new Array(nn>1?nn-1:0),an=1;an<nn;an++)on[an-1]=arguments[an];en.emit.apply(en,[rn].concat(on))}),en.init(Zr,Yr),en.translator.options=en.options,en.translator.backendConnector.services.utils={hasLoadedNamespace:en.hasLoadedNamespace.bind(en)},en}}]),Vt}(O$m),Ke$3=new je$5;const e$19={words:{close:"Close",of:"of",results:"results",result:"result"}},o$P={showLess:"Show Less",showMore:"Show More",viewDetails:"View Details"},s$l={collapse:"Collapse",expand:"Expand",clearValues:"Clear Values",select:"Select"},t$d={clear:"Clear"},l$o={remove:"Remove"},a$R={next:"Next",previous:"Previous",rowsPerPage:"Rows per page"},r$Q={end:"End",start:"Start"},n$i={Common:e$19,RecordDetailHeader:o$P,Combobox:s$l,Input:t$d,Pill:l$o,Pagination:a$R,Slider:r$Q},t$c={en:{translation:n$i}},a$Q=Ke$3.createInstance();a$Q.init({debug:!0,fallbackLng:"en",lng:"en",interpolation:{escapeValue:!1},resources:t$c});reactExports.createContext({baseUrl:void 0,projectIds:void 0});var u$s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function l$n(Kt){if(Kt.__esModule)return Kt;var Vt=Kt.default;if(typeof Vt=="function"){var Hr=function Wr(){return this instanceof Wr?Reflect.construct(Vt,arguments,this.constructor):Vt.apply(this,arguments)};Hr.prototype=Vt.prototype}else Hr={};return Object.defineProperty(Hr,"__esModule",{value:!0}),Object.keys(Kt).forEach(function(Wr){var Yr=Object.getOwnPropertyDescriptor(Kt,Wr);Object.defineProperty(Hr,Wr,Yr.get?Yr:{enumerable:!0,get:function(){return Kt[Wr]}})}),Hr}var e$18={},e$17={exports:{}};(function(Kt){function Vt(Hr){return Hr&&Hr.__esModule?Hr:{default:Hr}}Kt.exports=Vt,Kt.exports.__esModule=!0,Kt.exports.default=Kt.exports})(e$17);var p$t=e$17.exports,e$16={exports:{}},e$15={exports:{}},p$s;function s$k(){return p$s||(p$s=1,function(Kt){function Vt(Hr){"@babel/helpers - typeof";return Kt.exports=Vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Wr){return typeof Wr}:function(Wr){return Wr&&typeof Symbol=="function"&&Wr.constructor===Symbol&&Wr!==Symbol.prototype?"symbol":typeof Wr},Kt.exports.__esModule=!0,Kt.exports.default=Kt.exports,Vt(Hr)}Kt.exports=Vt,Kt.exports.__esModule=!0,Kt.exports.default=Kt.exports}(e$15)),e$15.exports}var B$g;function Z$b(){return B$g||(B$g=1,function(Kt){var Vt=s$k().default;function Hr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Kt.exports=Hr=function(){return Yr},Kt.exports.__esModule=!0,Kt.exports.default=Kt.exports;var Wr,Yr={},Zr=Object.prototype,en=Zr.hasOwnProperty,tn=Object.defineProperty||function(Js,sa,Ca){Js[sa]=Ca.value},rn=typeof Symbol=="function"?Symbol:{},nn=rn.iterator||"@@iterator",on=rn.asyncIterator||"@@asyncIterator",an=rn.toStringTag||"@@toStringTag";function $n(Js,sa,Ca){return Object.defineProperty(Js,sa,{value:Ca,enumerable:!0,configurable:!0,writable:!0}),Js[sa]}try{$n({},"")}catch{$n=function(Js,sa,Ca){return Js[sa]=Ca}}function ln(Js,sa,Ca,tc){var zl=sa&&sa.prototype instanceof Mi?sa:Mi,ec=Object.create(zl.prototype),sc=new Gs(tc||[]);return tn(ec,"_invoke",{value:Xs(Js,Ca,sc)}),ec}function Hn(Js,sa,Ca){try{return{type:"normal",arg:Js.call(sa,Ca)}}catch(tc){return{type:"throw",arg:tc}}}Yr.wrap=ln;var jn="suspendedStart",zn="suspendedYield",Wn="executing",ei="completed",$i={};function Mi(){}function Ni(){}function Ts(){}var ps={};$n(ps,nn,function(){return this});var $s=Object.getPrototypeOf,Ws=$s&&$s($s(Hl([])));Ws&&Ws!==Zr&&en.call(Ws,nn)&&(ps=Ws);var Hs=Ts.prototype=Mi.prototype=Object.create(ps);function js(Js){["next","throw","return"].forEach(function(sa){$n(Js,sa,function(Ca){return this._invoke(sa,Ca)})})}function zs(Js,sa){function Ca(zl,ec,sc,ac){var rc=Hn(Js[zl],Js,ec);if(rc.type!=="throw"){var uc=rc.arg,pc=uc.value;return pc&&Vt(pc)=="object"&&en.call(pc,"__await")?sa.resolve(pc.__await).then(function(cc){Ca("next",cc,sc,ac)},function(cc){Ca("throw",cc,sc,ac)}):sa.resolve(pc).then(function(cc){uc.value=cc,sc(uc)},function(cc){return Ca("throw",cc,sc,ac)})}ac(rc.arg)}var tc;tn(this,"_invoke",{value:function(zl,ec){function sc(){return new sa(function(ac,rc){Ca(zl,ec,ac,rc)})}return tc=tc?tc.then(sc,sc):sc()}})}function Xs(Js,sa,Ca){var tc=jn;return function(zl,ec){if(tc===Wn)throw new Error("Generator is already running");if(tc===ei){if(zl==="throw")throw ec;return{value:Wr,done:!0}}for(Ca.method=zl,Ca.arg=ec;;){var sc=Ca.delegate;if(sc){var ac=ia(sc,Ca);if(ac){if(ac===$i)continue;return ac}}if(Ca.method==="next")Ca.sent=Ca._sent=Ca.arg;else if(Ca.method==="throw"){if(tc===jn)throw tc=ei,Ca.arg;Ca.dispatchException(Ca.arg)}else Ca.method==="return"&&Ca.abrupt("return",Ca.arg);tc=Wn;var rc=Hn(Js,sa,Ca);if(rc.type==="normal"){if(tc=Ca.done?ei:zn,rc.arg===$i)continue;return{value:rc.arg,done:Ca.done}}rc.type==="throw"&&(tc=ei,Ca.method="throw",Ca.arg=rc.arg)}}}function ia(Js,sa){var Ca=sa.method,tc=Js.iterator[Ca];if(tc===Wr)return sa.delegate=null,Ca==="throw"&&Js.iterator.return&&(sa.method="return",sa.arg=Wr,ia(Js,sa),sa.method==="throw")||Ca!=="return"&&(sa.method="throw",sa.arg=new TypeError("The iterator does not provide a '"+Ca+"' method")),$i;var zl=Hn(tc,Js.iterator,sa.arg);if(zl.type==="throw")return sa.method="throw",sa.arg=zl.arg,sa.delegate=null,$i;var ec=zl.arg;return ec?ec.done?(sa[Js.resultName]=ec.value,sa.next=Js.nextLoc,sa.method!=="return"&&(sa.method="next",sa.arg=Wr),sa.delegate=null,$i):ec:(sa.method="throw",sa.arg=new TypeError("iterator result is not an object"),sa.delegate=null,$i)}function Qs(Js){var sa={tryLoc:Js[0]};1 in Js&&(sa.catchLoc=Js[1]),2 in Js&&(sa.finallyLoc=Js[2],sa.afterLoc=Js[3]),this.tryEntries.push(sa)}function Zs(Js){var sa=Js.completion||{};sa.type="normal",delete sa.arg,Js.completion=sa}function Gs(Js){this.tryEntries=[{tryLoc:"root"}],Js.forEach(Qs,this),this.reset(!0)}function Hl(Js){if(Js||Js===""){var sa=Js[nn];if(sa)return sa.call(Js);if(typeof Js.next=="function")return Js;if(!isNaN(Js.length)){var Ca=-1,tc=function zl(){for(;++Ca<Js.length;)if(en.call(Js,Ca))return zl.value=Js[Ca],zl.done=!1,zl;return zl.value=Wr,zl.done=!0,zl};return tc.next=tc}}throw new TypeError(Vt(Js)+" is not iterable")}return Ni.prototype=Ts,tn(Hs,"constructor",{value:Ts,configurable:!0}),tn(Ts,"constructor",{value:Ni,configurable:!0}),Ni.displayName=$n(Ts,an,"GeneratorFunction"),Yr.isGeneratorFunction=function(Js){var sa=typeof Js=="function"&&Js.constructor;return!!sa&&(sa===Ni||(sa.displayName||sa.name)==="GeneratorFunction")},Yr.mark=function(Js){return Object.setPrototypeOf?Object.setPrototypeOf(Js,Ts):(Js.__proto__=Ts,$n(Js,an,"GeneratorFunction")),Js.prototype=Object.create(Hs),Js},Yr.awrap=function(Js){return{__await:Js}},js(zs.prototype),$n(zs.prototype,on,function(){return this}),Yr.AsyncIterator=zs,Yr.async=function(Js,sa,Ca,tc,zl){zl===void 0&&(zl=Promise);var ec=new zs(ln(Js,sa,Ca,tc),zl);return Yr.isGeneratorFunction(sa)?ec:ec.next().then(function(sc){return sc.done?sc.value:ec.next()})},js(Hs),$n(Hs,an,"Generator"),$n(Hs,nn,function(){return this}),$n(Hs,"toString",function(){return"[object Generator]"}),Yr.keys=function(Js){var sa=Object(Js),Ca=[];for(var tc in sa)Ca.push(tc);return Ca.reverse(),function zl(){for(;Ca.length;){var ec=Ca.pop();if(ec in sa)return zl.value=ec,zl.done=!1,zl}return zl.done=!0,zl}},Yr.values=Hl,Gs.prototype={constructor:Gs,reset:function(Js){if(this.prev=0,this.next=0,this.sent=this._sent=Wr,this.done=!1,this.delegate=null,this.method="next",this.arg=Wr,this.tryEntries.forEach(Zs),!Js)for(var sa in this)sa.charAt(0)==="t"&&en.call(this,sa)&&!isNaN(+sa.slice(1))&&(this[sa]=Wr)},stop:function(){this.done=!0;var Js=this.tryEntries[0].completion;if(Js.type==="throw")throw Js.arg;return this.rval},dispatchException:function(Js){if(this.done)throw Js;var sa=this;function Ca(rc,uc){return ec.type="throw",ec.arg=Js,sa.next=rc,uc&&(sa.method="next",sa.arg=Wr),!!uc}for(var tc=this.tryEntries.length-1;tc>=0;--tc){var zl=this.tryEntries[tc],ec=zl.completion;if(zl.tryLoc==="root")return Ca("end");if(zl.tryLoc<=this.prev){var sc=en.call(zl,"catchLoc"),ac=en.call(zl,"finallyLoc");if(sc&&ac){if(this.prev<zl.catchLoc)return Ca(zl.catchLoc,!0);if(this.prev<zl.finallyLoc)return Ca(zl.finallyLoc)}else if(sc){if(this.prev<zl.catchLoc)return Ca(zl.catchLoc,!0)}else{if(!ac)throw new Error("try statement without catch or finally");if(this.prev<zl.finallyLoc)return Ca(zl.finallyLoc)}}}},abrupt:function(Js,sa){for(var Ca=this.tryEntries.length-1;Ca>=0;--Ca){var tc=this.tryEntries[Ca];if(tc.tryLoc<=this.prev&&en.call(tc,"finallyLoc")&&this.prev<tc.finallyLoc){var zl=tc;break}}zl&&(Js==="break"||Js==="continue")&&zl.tryLoc<=sa&&sa<=zl.finallyLoc&&(zl=null);var ec=zl?zl.completion:{};return ec.type=Js,ec.arg=sa,zl?(this.method="next",this.next=zl.finallyLoc,$i):this.complete(ec)},complete:function(Js,sa){if(Js.type==="throw")throw Js.arg;return Js.type==="break"||Js.type==="continue"?this.next=Js.arg:Js.type==="return"?(this.rval=this.arg=Js.arg,this.method="return",this.next="end"):Js.type==="normal"&&sa&&(this.next=sa),$i},finish:function(Js){for(var sa=this.tryEntries.length-1;sa>=0;--sa){var Ca=this.tryEntries[sa];if(Ca.finallyLoc===Js)return this.complete(Ca.completion,Ca.afterLoc),Zs(Ca),$i}},catch:function(Js){for(var sa=this.tryEntries.length-1;sa>=0;--sa){var Ca=this.tryEntries[sa];if(Ca.tryLoc===Js){var tc=Ca.completion;if(tc.type==="throw"){var zl=tc.arg;Zs(Ca)}return zl}}throw new Error("illegal catch attempt")},delegateYield:function(Js,sa,Ca){return this.delegate={iterator:Hl(Js),resultName:sa,nextLoc:Ca},this.method==="next"&&(this.arg=Wr),$i}},Yr}Kt.exports=Hr,Kt.exports.__esModule=!0,Kt.exports.default=Kt.exports}(e$16)),e$16.exports}var r$P,t$b;function o$O(){if(t$b)return r$P;t$b=1;var Kt=Z$b()();r$P=Kt;try{regeneratorRuntime=Kt}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Kt:Function("r","regeneratorRuntime = r")(Kt)}return r$P}var e$14={exports:{}},x$n;function v$w(){return x$n||(x$n=1,function(Kt){function Vt(Wr,Yr,Zr,en,tn,rn,nn){try{var on=Wr[rn](nn),an=on.value}catch($n){Zr($n);return}on.done?Yr(an):Promise.resolve(an).then(en,tn)}function Hr(Wr){return function(){var Yr=this,Zr=arguments;return new Promise(function(en,tn){var rn=Wr.apply(Yr,Zr);function nn(an){Vt(rn,en,tn,nn,on,"next",an)}function on(an){Vt(rn,en,tn,nn,on,"throw",an)}nn(void 0)})}}Kt.exports=Hr,Kt.exports.__esModule=!0,Kt.exports.default=Kt.exports}(e$14)),e$14.exports}var a$P={exports:{}},s$j;function n$h(){return s$j||(s$j=1,function(Kt){function Vt(Hr,Wr){if(!(Hr instanceof Wr))throw new TypeError("Cannot call a class as a function")}Kt.exports=Vt,Kt.exports.__esModule=!0,Kt.exports.default=Kt.exports}(a$P)),a$P.exports}var e$13={exports:{}},e$12={exports:{}},e$11={exports:{}},a$O;function m$B(){return a$O||(a$O=1,function(Kt){var Vt=s$k().default;function Hr(Wr,Yr){if(Vt(Wr)!="object"||!Wr)return Wr;var Zr=Wr[Symbol.toPrimitive];if(Zr!==void 0){var en=Zr.call(Wr,Yr||"default");if(Vt(en)!="object")return en;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Yr==="string"?String:Number)(Wr)}Kt.exports=Hr,Kt.exports.__esModule=!0,Kt.exports.default=Kt.exports}(e$11)),e$11.exports}var o$N;function m$A(){return o$N||(o$N=1,function(Kt){var Vt=s$k().default,Hr=m$B();function Wr(Yr){var Zr=Hr(Yr,"string");return Vt(Zr)=="symbol"?Zr:String(Zr)}Kt.exports=Wr,Kt.exports.__esModule=!0,Kt.exports.default=Kt.exports}(e$12)),e$12.exports}var i$k;function b$k(){return i$k||(i$k=1,function(Kt){var Vt=m$A();function Hr(Yr,Zr){for(var en=0;en<Zr.length;en++){var tn=Zr[en];tn.enumerable=tn.enumerable||!1,tn.configurable=!0,"value"in tn&&(tn.writable=!0),Object.defineProperty(Yr,Vt(tn.key),tn)}}function Wr(Yr,Zr,en){return Zr&&Hr(Yr.prototype,Zr),en&&Hr(Yr,en),Object.defineProperty(Yr,"prototype",{writable:!1}),Yr}Kt.exports=Wr,Kt.exports.__esModule=!0,Kt.exports.default=Kt.exports}(e$13)),e$13.exports}var o$M={},w$m;function z$b(){if(w$m)return o$M;w$m=1;var Kt=p$t;Object.defineProperty(o$M,"__esModule",{value:!0}),o$M.Configuration=void 0;var Vt=Kt(n$h()),Hr=Kt(b$k()),Wr=function(){function Yr(){var Zr,en,tn,rn,nn,on,an,$n,ln,Hn,jn,zn,Wn,ei=this,$i,Mi,Ni,Ts,ps,$s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,Vt.default)(this,Yr),this.server=$s.server||{nodes:[{host:"localhost",port:"8108",path:"",protocol:"http"}]},this.server.cacheSearchResultsForSeconds=(Zr=this.server.cacheSearchResultsForSeconds)!==null&&Zr!==void 0?Zr:2*60,this.additionalSearchParameters=(en=$s.additionalSearchParameters)!==null&&en!==void 0?en:{},this.additionalSearchParameters.query_by=(tn=(rn=this.additionalSearchParameters.queryBy)!==null&&rn!==void 0?rn:this.additionalSearchParameters.query_by)!==null&&tn!==void 0?tn:"",this.additionalSearchParameters.preset=(nn=(on=this.additionalSearchParameters.preset)!==null&&on!==void 0?on:this.additionalSearchParameters.preset)!==null&&nn!==void 0?nn:"",this.additionalSearchParameters.sort_by=(an=($n=this.additionalSearchParameters.sortBy)!==null&&$n!==void 0?$n:this.additionalSearchParameters.sort_by)!==null&&an!==void 0?an:"",this.additionalSearchParameters.highlight_full_fields=(ln=(Hn=this.additionalSearchParameters.highlightFullFields)!==null&&Hn!==void 0?Hn:this.additionalSearchParameters.highlight_full_fields)!==null&&ln!==void 0?ln:this.additionalSearchParameters.query_by,this.geoLocationField=(jn=$s.geoLocationField)!==null&&jn!==void 0?jn:"_geoloc",this.facetableFieldsWithSpecialCharacters=(zn=$s.facetableFieldsWithSpecialCharacters)!==null&&zn!==void 0?zn:[],this.collectionSpecificSearchParameters=(Wn=$s.collectionSpecificSearchParameters)!==null&&Wn!==void 0?Wn:{},Object.keys(this.collectionSpecificSearchParameters).forEach(function(Ws){var Hs,js,zs,Xs,ia,Qs,Zs=ei.collectionSpecificSearchParameters[Ws];Zs.query_by=(Hs=Zs.queryBy)!==null&&Hs!==void 0?Hs:Zs.query_by,Zs.preset=(js=Zs.preset)!==null&&js!==void 0?js:Zs.preset,Zs.sort_by=(zs=Zs.sortBy)!==null&&zs!==void 0?zs:Zs.sort_by,Zs.highlight_full_fields=(Xs=(ia=(Qs=Zs.highlightFullFields)!==null&&Qs!==void 0?Qs:Zs.highlight_full_fields)!==null&&ia!==void 0?ia:ei.additionalSearchParameters.highlight_full_fields)!==null&&Xs!==void 0?Xs:Zs.query_by,Object.keys(Zs).forEach(function(Gs){return Zs[Gs]===void 0?delete Zs[Gs]:{}})}),this.renderingContent=$s.renderingContent,this.flattenGroupedHits=($i=$s.flattenGroupedHits)!==null&&$i!==void 0?$i:!0,this.facetByOptions=(Mi=$s.facetByOptions)!==null&&Mi!==void 0?Mi:{},this.filterByOptions=(Ni=$s.filterByOptions)!==null&&Ni!==void 0?Ni:{},this.collectionSpecificFacetByOptions=(Ts=$s.collectionSpecificFacetByOptions)!==null&&Ts!==void 0?Ts:{},this.collectionSpecificFilterByOptions=(ps=$s.collectionSpecificFilterByOptions)!==null&&ps!==void 0?ps:{}}return(0,Hr.default)(Yr,[{key:"validate",value:function(){if((this.additionalSearchParameters.queryBy||Object.values(this.collectionSpecificSearchParameters).some(function(Zr){return Zr.queryBy}))&&console.warn("[typesense-instantsearch-adapter] Please use snake_cased versions of parameters in additionalSearchParameters instead of camelCased parameters. For example: Use query_by instead of queryBy. camelCased parameters will be deprecated in a future version. We're making this change so that parameter names are identical to the ones sent to Typesense (which are all snake_cased), and to also keep the types for these parameters in sync with the types defined in typesense-js."),this.additionalSearchParameters.query_by.length===0&&this.additionalSearchParameters.preset.length===0&&(Object.keys(this.collectionSpecificSearchParameters).length===0||Object.values(this.collectionSpecificSearchParameters).some(function(Zr){return(Zr.query_by||"").length===0&&(Zr.preset||"").length===0})))throw new Error("[typesense-instantsearch-adapter] Missing parameter: One of additionalSearchParameters.query_by or additionalSearchParameters.preset needs to be set, or all collectionSpecificSearchParameters need to have either .query_by or .preset set.")}}]),Yr}();return o$M.Configuration=Wr,o$M}var e$10={},e$$={},o$L={},e$_={exports:{}},T$l;function P$h(){return T$l||(T$l=1,function(Kt){(function(Vt,Hr){Kt.exports?Kt.exports=Hr():Vt.log=Hr()})(u$s,function(){var Vt=function(){},Hr="undefined",Wr=typeof window!==Hr&&typeof window.navigator!==Hr&&/Trident\/|MSIE /.test(window.navigator.userAgent),Yr=["trace","debug","info","warn","error"],Zr={},en=null;function tn(jn,zn){var Wn=jn[zn];if(typeof Wn.bind=="function")return Wn.bind(jn);try{return Function.prototype.bind.call(Wn,jn)}catch{return function(){return Function.prototype.apply.apply(Wn,[jn,arguments])}}}function rn(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function nn(jn){return jn==="debug"&&(jn="log"),typeof console===Hr?!1:jn==="trace"&&Wr?rn:console[jn]!==void 0?tn(console,jn):console.log!==void 0?tn(console,"log"):Vt}function on(){for(var jn=this.getLevel(),zn=0;zn<Yr.length;zn++){var Wn=Yr[zn];this[Wn]=zn<jn?Vt:this.methodFactory(Wn,jn,this.name)}if(this.log=this.debug,typeof console===Hr&&jn<this.levels.SILENT)return"No console available for logging"}function an(jn){return function(){typeof console!==Hr&&(on.call(this),this[jn].apply(this,arguments))}}function $n(jn,zn,Wn){return nn(jn)||an.apply(this,arguments)}function ln(jn,zn){var Wn=this,ei,$i,Mi,Ni="loglevel";typeof jn=="string"?Ni+=":"+jn:typeof jn=="symbol"&&(Ni=void 0);function Ts(js){var zs=(Yr[js]||"silent").toUpperCase();if(!(typeof window===Hr||!Ni)){try{window.localStorage[Ni]=zs;return}catch{}try{window.document.cookie=encodeURIComponent(Ni)+"="+zs+";"}catch{}}}function ps(){var js;if(!(typeof window===Hr||!Ni)){try{js=window.localStorage[Ni]}catch{}if(typeof js===Hr)try{var zs=window.document.cookie,Xs=encodeURIComponent(Ni),ia=zs.indexOf(Xs+"=");ia!==-1&&(js=/^([^;]+)/.exec(zs.slice(ia+Xs.length+1))[1])}catch{}return Wn.levels[js]===void 0&&(js=void 0),js}}function $s(){if(!(typeof window===Hr||!Ni)){try{window.localStorage.removeItem(Ni)}catch{}try{window.document.cookie=encodeURIComponent(Ni)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function Ws(js){var zs=js;if(typeof zs=="string"&&Wn.levels[zs.toUpperCase()]!==void 0&&(zs=Wn.levels[zs.toUpperCase()]),typeof zs=="number"&&zs>=0&&zs<=Wn.levels.SILENT)return zs;throw new TypeError("log.setLevel() called with invalid level: "+js)}Wn.name=jn,Wn.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},Wn.methodFactory=zn||$n,Wn.getLevel=function(){return Mi??$i??ei},Wn.setLevel=function(js,zs){return Mi=Ws(js),zs!==!1&&Ts(Mi),on.call(Wn)},Wn.setDefaultLevel=function(js){$i=Ws(js),ps()||Wn.setLevel(js,!1)},Wn.resetLevel=function(){Mi=null,$s(),on.call(Wn)},Wn.enableAll=function(js){Wn.setLevel(Wn.levels.TRACE,js)},Wn.disableAll=function(js){Wn.setLevel(Wn.levels.SILENT,js)},Wn.rebuild=function(){if(en!==Wn&&(ei=Ws(en.getLevel())),on.call(Wn),en===Wn)for(var js in Zr)Zr[js].rebuild()},ei=Ws(en?en.getLevel():"WARN");var Hs=ps();Hs!=null&&(Mi=Ws(Hs)),on.call(Wn)}en=new ln,en.getLogger=function(jn){if(typeof jn!="symbol"&&typeof jn!="string"||jn==="")throw new TypeError("You must supply a name when creating a logger.");var zn=Zr[jn];return zn||(zn=Zr[jn]=new ln(jn,en.methodFactory)),zn};var Hn=typeof window!==Hr?window.log:void 0;return en.noConflict=function(){return typeof window!==Hr&&window.log===en&&(window.log=Hn),en},en.getLoggers=function(){return Zr},en.default=en,en})}(e$_)),e$_.exports}var r$O={},r$N={},r$M={},c$z;function l$m(){if(c$z)return r$M;c$z=1;var Kt=u$s&&u$s.__extends||function(){var Hr=function(Wr,Yr){return Hr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Zr,en){Zr.__proto__=en}||function(Zr,en){for(var tn in en)Object.prototype.hasOwnProperty.call(en,tn)&&(Zr[tn]=en[tn])},Hr(Wr,Yr)};return function(Wr,Yr){if(typeof Yr!="function"&&Yr!==null)throw new TypeError("Class extends value "+String(Yr)+" is not a constructor or null");Hr(Wr,Yr);function Zr(){this.constructor=Wr}Wr.prototype=Yr===null?Object.create(Yr):(Zr.prototype=Yr.prototype,new Zr)}}();Object.defineProperty(r$M,"__esModule",{value:!0});var Vt=function(Hr){Kt(Wr,Hr);function Wr(Yr){var Zr=this.constructor,en=Hr.call(this,Yr)||this;return en.name=Zr.name,Object.setPrototypeOf(en,Zr.prototype),en}return Wr}(Error);return r$M.default=Vt,r$M}var f$r;function m$z(){if(f$r)return r$N;f$r=1;var Kt=u$s&&u$s.__extends||function(){var Yr=function(Zr,en){return Yr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tn,rn){tn.__proto__=rn}||function(tn,rn){for(var nn in rn)Object.prototype.hasOwnProperty.call(rn,nn)&&(tn[nn]=rn[nn])},Yr(Zr,en)};return function(Zr,en){if(typeof en!="function"&&en!==null)throw new TypeError("Class extends value "+String(en)+" is not a constructor or null");Yr(Zr,en);function tn(){this.constructor=Zr}Zr.prototype=en===null?Object.create(en):(tn.prototype=en.prototype,new tn)}}(),Vt=u$s&&u$s.__importDefault||function(Yr){return Yr&&Yr.__esModule?Yr:{default:Yr}};Object.defineProperty(r$N,"__esModule",{value:!0});var Hr=Vt(l$m()),Wr=function(Yr){Kt(Zr,Yr);function Zr(){return Yr!==null&&Yr.apply(this,arguments)||this}return Zr}(Hr.default);return r$N.default=Wr,r$N}var r$L={},a$N;function m$y(){if(a$N)return r$L;a$N=1;var Kt=u$s&&u$s.__extends||function(){var Yr=function(Zr,en){return Yr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tn,rn){tn.__proto__=rn}||function(tn,rn){for(var nn in rn)Object.prototype.hasOwnProperty.call(rn,nn)&&(tn[nn]=rn[nn])},Yr(Zr,en)};return function(Zr,en){if(typeof en!="function"&&en!==null)throw new TypeError("Class extends value "+String(en)+" is not a constructor or null");Yr(Zr,en);function tn(){this.constructor=Zr}Zr.prototype=en===null?Object.create(en):(tn.prototype=en.prototype,new tn)}}(),Vt=u$s&&u$s.__importDefault||function(Yr){return Yr&&Yr.__esModule?Yr:{default:Yr}};Object.defineProperty(r$L,"__esModule",{value:!0});var Hr=Vt(l$m()),Wr=function(Yr){Kt(Zr,Yr);function Zr(){return Yr!==null&&Yr.apply(this,arguments)||this}return Zr}(Hr.default);return r$L.default=Wr,r$L}var e$Z={},a$M;function O$l(){if(a$M)return e$Z;a$M=1;var Kt=u$s&&u$s.__extends||function(){var Yr=function(Zr,en){return Yr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tn,rn){tn.__proto__=rn}||function(tn,rn){for(var nn in rn)Object.prototype.hasOwnProperty.call(rn,nn)&&(tn[nn]=rn[nn])},Yr(Zr,en)};return function(Zr,en){if(typeof en!="function"&&en!==null)throw new TypeError("Class extends value "+String(en)+" is not a constructor or null");Yr(Zr,en);function tn(){this.constructor=Zr}Zr.prototype=en===null?Object.create(en):(tn.prototype=en.prototype,new tn)}}(),Vt=u$s&&u$s.__importDefault||function(Yr){return Yr&&Yr.__esModule?Yr:{default:Yr}};Object.defineProperty(e$Z,"__esModule",{value:!0});var Hr=Vt(l$m()),Wr=function(Yr){Kt(Zr,Yr);function Zr(){return Yr!==null&&Yr.apply(this,arguments)||this}return Zr}(Hr.default);return e$Z.default=Wr,e$Z}var o$K={},c$y;function j$h(){if(c$y)return o$K;c$y=1;var Kt=u$s&&u$s.__extends||function(){var Yr=function(Zr,en){return Yr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tn,rn){tn.__proto__=rn}||function(tn,rn){for(var nn in rn)Object.prototype.hasOwnProperty.call(rn,nn)&&(tn[nn]=rn[nn])},Yr(Zr,en)};return function(Zr,en){if(typeof en!="function"&&en!==null)throw new TypeError("Class extends value "+String(en)+" is not a constructor or null");Yr(Zr,en);function tn(){this.constructor=Zr}Zr.prototype=en===null?Object.create(en):(tn.prototype=en.prototype,new tn)}}(),Vt=u$s&&u$s.__importDefault||function(Yr){return Yr&&Yr.__esModule?Yr:{default:Yr}};Object.defineProperty(o$K,"__esModule",{value:!0});var Hr=Vt(l$m()),Wr=function(Yr){Kt(Zr,Yr);function Zr(){return Yr!==null&&Yr.apply(this,arguments)||this}return Zr}(Hr.default);return o$K.default=Wr,o$K}var e$Y={},c$x;function v$v(){if(c$x)return e$Y;c$x=1;var Kt=u$s&&u$s.__extends||function(){var Yr=function(Zr,en){return Yr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tn,rn){tn.__proto__=rn}||function(tn,rn){for(var nn in rn)Object.prototype.hasOwnProperty.call(rn,nn)&&(tn[nn]=rn[nn])},Yr(Zr,en)};return function(Zr,en){if(typeof en!="function"&&en!==null)throw new TypeError("Class extends value "+String(en)+" is not a constructor or null");Yr(Zr,en);function tn(){this.constructor=Zr}Zr.prototype=en===null?Object.create(en):(tn.prototype=en.prototype,new tn)}}(),Vt=u$s&&u$s.__importDefault||function(Yr){return Yr&&Yr.__esModule?Yr:{default:Yr}};Object.defineProperty(e$Y,"__esModule",{value:!0});var Hr=Vt(l$m()),Wr=function(Yr){Kt(Zr,Yr);function Zr(){return Yr!==null&&Yr.apply(this,arguments)||this}return Zr}(Hr.default);return e$Y.default=Wr,e$Y}var e$X={},f$q;function q$g(){if(f$q)return e$X;f$q=1;var Kt=u$s&&u$s.__extends||function(){var Yr=function(Zr,en){return Yr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tn,rn){tn.__proto__=rn}||function(tn,rn){for(var nn in rn)Object.prototype.hasOwnProperty.call(rn,nn)&&(tn[nn]=rn[nn])},Yr(Zr,en)};return function(Zr,en){if(typeof en!="function"&&en!==null)throw new TypeError("Class extends value "+String(en)+" is not a constructor or null");Yr(Zr,en);function tn(){this.constructor=Zr}Zr.prototype=en===null?Object.create(en):(tn.prototype=en.prototype,new tn)}}(),Vt=u$s&&u$s.__importDefault||function(Yr){return Yr&&Yr.__esModule?Yr:{default:Yr}};Object.defineProperty(e$X,"__esModule",{value:!0});var Hr=Vt(l$m()),Wr=function(Yr){Kt(Zr,Yr);function Zr(){return Yr!==null&&Yr.apply(this,arguments)||this}return Zr}(Hr.default);return e$X.default=Wr,e$X}var e$W={},s$i;function q$f(){if(s$i)return e$W;s$i=1;var Kt=u$s&&u$s.__extends||function(){var Yr=function(Zr,en){return Yr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tn,rn){tn.__proto__=rn}||function(tn,rn){for(var nn in rn)Object.prototype.hasOwnProperty.call(rn,nn)&&(tn[nn]=rn[nn])},Yr(Zr,en)};return function(Zr,en){if(typeof en!="function"&&en!==null)throw new TypeError("Class extends value "+String(en)+" is not a constructor or null");Yr(Zr,en);function tn(){this.constructor=Zr}Zr.prototype=en===null?Object.create(en):(tn.prototype=en.prototype,new tn)}}(),Vt=u$s&&u$s.__importDefault||function(Yr){return Yr&&Yr.__esModule?Yr:{default:Yr}};Object.defineProperty(e$W,"__esModule",{value:!0});var Hr=Vt(l$m()),Wr=function(Yr){Kt(Zr,Yr);function Zr(){return Yr!==null&&Yr.apply(this,arguments)||this}return Zr}(Hr.default);return e$W.default=Wr,e$W}var r$K={},f$p;function E$f(){if(f$p)return r$K;f$p=1;var Kt=u$s&&u$s.__extends||function(){var Yr=function(Zr,en){return Yr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tn,rn){tn.__proto__=rn}||function(tn,rn){for(var nn in rn)Object.prototype.hasOwnProperty.call(rn,nn)&&(tn[nn]=rn[nn])},Yr(Zr,en)};return function(Zr,en){if(typeof en!="function"&&en!==null)throw new TypeError("Class extends value "+String(en)+" is not a constructor or null");Yr(Zr,en);function tn(){this.constructor=Zr}Zr.prototype=en===null?Object.create(en):(tn.prototype=en.prototype,new tn)}}(),Vt=u$s&&u$s.__importDefault||function(Yr){return Yr&&Yr.__esModule?Yr:{default:Yr}};Object.defineProperty(r$K,"__esModule",{value:!0});var Hr=Vt(l$m()),Wr=function(Yr){Kt(Zr,Yr);function Zr(){return Yr!==null&&Yr.apply(this,arguments)||this}return Zr}(Hr.default);return r$K.default=Wr,r$K}var r$J={},s$h;function E$e(){if(s$h)return r$J;s$h=1;var Kt=u$s&&u$s.__extends||function(){var Yr=function(Zr,en){return Yr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tn,rn){tn.__proto__=rn}||function(tn,rn){for(var nn in rn)Object.prototype.hasOwnProperty.call(rn,nn)&&(tn[nn]=rn[nn])},Yr(Zr,en)};return function(Zr,en){if(typeof en!="function"&&en!==null)throw new TypeError("Class extends value "+String(en)+" is not a constructor or null");Yr(Zr,en);function tn(){this.constructor=Zr}Zr.prototype=en===null?Object.create(en):(tn.prototype=en.prototype,new tn)}}(),Vt=u$s&&u$s.__importDefault||function(Yr){return Yr&&Yr.__esModule?Yr:{default:Yr}};Object.defineProperty(r$J,"__esModule",{value:!0});var Hr=Vt(l$m()),Wr=function(Yr){Kt(Zr,Yr);function Zr(en,tn){var rn=Yr.call(this,en)||this;return rn.importResults=tn,rn}return Zr}(Hr.default);return r$J.default=Wr,r$J}var i$j;function N$g(){if(i$j)return r$O;i$j=1;var Kt=u$s&&u$s.__importDefault||function(an){return an&&an.__esModule?an:{default:an}};Object.defineProperty(r$O,"__esModule",{value:!0}),r$O.ImportError=r$O.TypesenseError=r$O.ServerError=r$O.RequestUnauthorized=r$O.RequestMalformed=r$O.ObjectUnprocessable=r$O.ObjectNotFound=r$O.ObjectAlreadyExists=r$O.MissingConfigurationError=r$O.HTTPError=void 0;var Vt=Kt(m$z());r$O.HTTPError=Vt.default;var Hr=Kt(m$y());r$O.MissingConfigurationError=Hr.default;var Wr=Kt(O$l());r$O.ObjectAlreadyExists=Wr.default;var Yr=Kt(j$h());r$O.ObjectNotFound=Yr.default;var Zr=Kt(v$v());r$O.ObjectUnprocessable=Zr.default;var en=Kt(q$g());r$O.RequestMalformed=en.default;var tn=Kt(q$f());r$O.RequestUnauthorized=tn.default;var rn=Kt(E$f());r$O.ServerError=rn.default;var nn=Kt(E$e());r$O.ImportError=nn.default;var on=Kt(l$m());return r$O.TypesenseError=on.default,r$O}var l$l;function w$l(){if(l$l)return o$L;l$l=1;var Kt=u$s&&u$s.__assign||function(){return Kt=Object.assign||function(tn){for(var rn,nn=1,on=arguments.length;nn<on;nn++){rn=arguments[nn];for(var an in rn)Object.prototype.hasOwnProperty.call(rn,an)&&(tn[an]=rn[an])}return tn},Kt.apply(this,arguments)},Vt=u$s&&u$s.__createBinding||(Object.create?function(tn,rn,nn,on){on===void 0&&(on=nn);var an=Object.getOwnPropertyDescriptor(rn,nn);(!an||("get"in an?!rn.__esModule:an.writable||an.configurable))&&(an={enumerable:!0,get:function(){return rn[nn]}}),Object.defineProperty(tn,on,an)}:function(tn,rn,nn,on){on===void 0&&(on=nn),tn[on]=rn[nn]}),Hr=u$s&&u$s.__setModuleDefault||(Object.create?function(tn,rn){Object.defineProperty(tn,"default",{enumerable:!0,value:rn})}:function(tn,rn){tn.default=rn}),Wr=u$s&&u$s.__importStar||function(tn){if(tn&&tn.__esModule)return tn;var rn={};if(tn!=null)for(var nn in tn)nn!=="default"&&Object.prototype.hasOwnProperty.call(tn,nn)&&Vt(rn,tn,nn);return Hr(rn,tn),rn};Object.defineProperty(o$L,"__esModule",{value:!0});var Yr=Wr(P$h()),Zr=N$g(),en=function(){function tn(rn){var nn=this;this.nodes=rn.nodes||[],this.nodes=this.nodes.map(function(on){return nn.setDefaultPathInNode(on)}).map(function(on){return nn.setDefaultPortInNode(on)}).map(function(on){return Kt({},on)}),rn.randomizeNodes==null&&(rn.randomizeNodes=!0),rn.randomizeNodes===!0&&this.shuffleArray(this.nodes),this.nearestNode=rn.nearestNode,this.nearestNode=this.setDefaultPathInNode(this.nearestNode),this.nearestNode=this.setDefaultPortInNode(this.nearestNode),this.connectionTimeoutSeconds=rn.connectionTimeoutSeconds||rn.timeoutSeconds||5,this.healthcheckIntervalSeconds=rn.healthcheckIntervalSeconds||60,this.numRetries=rn.numRetries||this.nodes.length+(this.nearestNode==null?0:1)||3,this.retryIntervalSeconds=rn.retryIntervalSeconds||.1,this.apiKey=rn.apiKey,this.sendApiKeyAsQueryParam=rn.sendApiKeyAsQueryParam,this.cacheSearchResultsForSeconds=rn.cacheSearchResultsForSeconds||0,this.useServerSideSearchCache=rn.useServerSideSearchCache||!1,this.logger=rn.logger||Yr,this.logLevel=rn.logLevel||"warn",this.logger.setLevel(this.logLevel),this.additionalHeaders=rn.additionalHeaders,this.showDeprecationWarnings(rn),this.validate()}return tn.prototype.validate=function(){if(this.nodes==null||this.nodes.length===0||this.validateNodes())throw new Zr.MissingConfigurationError("Ensure that nodes[].protocol, nodes[].host and nodes[].port are set");if(this.nearestNode!=null&&this.isNodeMissingAnyParameters(this.nearestNode))throw new Zr.MissingConfigurationError("Ensure that nearestNodes.protocol, nearestNodes.host and nearestNodes.port are set");if(this.apiKey==null)throw new Zr.MissingConfigurationError("Ensure that apiKey is set");return!0},tn.prototype.validateNodes=function(){var rn=this;return this.nodes.some(function(nn){return rn.isNodeMissingAnyParameters(nn)})},tn.prototype.isNodeMissingAnyParameters=function(rn){return!["protocol","host","port","path"].every(function(nn){return rn.hasOwnProperty(nn)})&&rn.url==null},tn.prototype.setDefaultPathInNode=function(rn){return rn!=null&&!rn.hasOwnProperty("path")&&(rn.path=""),rn},tn.prototype.setDefaultPortInNode=function(rn){if(rn!=null&&!rn.hasOwnProperty("port")&&rn.hasOwnProperty("protocol"))switch(rn.protocol){case"https":rn.port=443;break;case"http":rn.port=80;break}return rn},tn.prototype.showDeprecationWarnings=function(rn){rn.timeoutSeconds&&this.logger.warn("Deprecation warning: timeoutSeconds is now renamed to connectionTimeoutSeconds"),rn.masterNode&&this.logger.warn("Deprecation warning: masterNode is now consolidated to nodes, starting with Typesense Server v0.12"),rn.readReplicaNodes&&this.logger.warn("Deprecation warning: readReplicaNodes is now consolidated to nodes, starting with Typesense Server v0.12")},tn.prototype.shuffleArray=function(rn){for(var nn,on=rn.length-1;on>0;on--){var an=Math.floor(Math.random()*(on+1));nn=[rn[an],rn[on]],rn[on]=nn[0],rn[an]=nn[1]}},tn}();return o$L.default=en,o$L}var a$L={},o$J={exports:{}},e$V,a$K;function f$o(){return a$K||(a$K=1,e$V=function(Kt,Vt){return function(){for(var Hr=new Array(arguments.length),Wr=0;Wr<Hr.length;Wr++)Hr[Wr]=arguments[Wr];return Kt.apply(Vt,Hr)}}),e$V}var p$r,m$x;function x$m(){if(m$x)return p$r;m$x=1;var Kt=f$o(),Vt=Object.prototype.toString;function Hr($s){return Array.isArray($s)}function Wr($s){return typeof $s>"u"}function Yr($s){return $s!==null&&!Wr($s)&&$s.constructor!==null&&!Wr($s.constructor)&&typeof $s.constructor.isBuffer=="function"&&$s.constructor.isBuffer($s)}function Zr($s){return Vt.call($s)==="[object ArrayBuffer]"}function en($s){return Vt.call($s)==="[object FormData]"}function tn($s){var Ws;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?Ws=ArrayBuffer.isView($s):Ws=$s&&$s.buffer&&Zr($s.buffer),Ws}function rn($s){return typeof $s=="string"}function nn($s){return typeof $s=="number"}function on($s){return $s!==null&&typeof $s=="object"}function an($s){if(Vt.call($s)!=="[object Object]")return!1;var Ws=Object.getPrototypeOf($s);return Ws===null||Ws===Object.prototype}function $n($s){return Vt.call($s)==="[object Date]"}function ln($s){return Vt.call($s)==="[object File]"}function Hn($s){return Vt.call($s)==="[object Blob]"}function jn($s){return Vt.call($s)==="[object Function]"}function zn($s){return on($s)&&jn($s.pipe)}function Wn($s){return Vt.call($s)==="[object URLSearchParams]"}function ei($s){return $s.trim?$s.trim():$s.replace(/^\s+|\s+$/g,"")}function $i(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Mi($s,Ws){if(!($s===null||typeof $s>"u"))if(typeof $s!="object"&&($s=[$s]),Hr($s))for(var Hs=0,js=$s.length;Hs<js;Hs++)Ws.call(null,$s[Hs],Hs,$s);else for(var zs in $s)Object.prototype.hasOwnProperty.call($s,zs)&&Ws.call(null,$s[zs],zs,$s)}function Ni(){var $s={};function Ws(zs,Xs){an($s[Xs])&&an(zs)?$s[Xs]=Ni($s[Xs],zs):an(zs)?$s[Xs]=Ni({},zs):Hr(zs)?$s[Xs]=zs.slice():$s[Xs]=zs}for(var Hs=0,js=arguments.length;Hs<js;Hs++)Mi(arguments[Hs],Ws);return $s}function Ts($s,Ws,Hs){return Mi(Ws,function(js,zs){Hs&&typeof js=="function"?$s[zs]=Kt(js,Hs):$s[zs]=js}),$s}function ps($s){return $s.charCodeAt(0)===65279&&($s=$s.slice(1)),$s}return p$r={isArray:Hr,isArrayBuffer:Zr,isBuffer:Yr,isFormData:en,isArrayBufferView:tn,isString:rn,isNumber:nn,isObject:on,isPlainObject:an,isUndefined:Wr,isDate:$n,isFile:ln,isBlob:Hn,isFunction:jn,isStream:zn,isURLSearchParams:Wn,isStandardBrowserEnv:$i,forEach:Mi,merge:Ni,extend:Ts,trim:ei,stripBOM:ps},p$r}var c$w,g$r;function L$i(){if(g$r)return c$w;g$r=1;var Kt=x$m();function Vt(Hr){return encodeURIComponent(Hr).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}return c$w=function(Hr,Wr,Yr){if(!Wr)return Hr;var Zr;if(Yr)Zr=Yr(Wr);else if(Kt.isURLSearchParams(Wr))Zr=Wr.toString();else{var en=[];Kt.forEach(Wr,function(rn,nn){rn===null||typeof rn>"u"||(Kt.isArray(rn)?nn=nn+"[]":rn=[rn],Kt.forEach(rn,function(on){Kt.isDate(on)?on=on.toISOString():Kt.isObject(on)&&(on=JSON.stringify(on)),en.push(Vt(nn)+"="+Vt(on))}))}),Zr=en.join("&")}if(Zr){var tn=Hr.indexOf("#");tn!==-1&&(Hr=Hr.slice(0,tn)),Hr+=(Hr.indexOf("?")===-1?"?":"&")+Zr}return Hr},c$w}var t$a,h$p;function c$v(){if(h$p)return t$a;h$p=1;var Kt=x$m();function Vt(){this.handlers=[]}return Vt.prototype.use=function(Hr,Wr,Yr){return this.handlers.push({fulfilled:Hr,rejected:Wr,synchronous:Yr?Yr.synchronous:!1,runWhen:Yr?Yr.runWhen:null}),this.handlers.length-1},Vt.prototype.eject=function(Hr){this.handlers[Hr]&&(this.handlers[Hr]=null)},Vt.prototype.forEach=function(Hr){Kt.forEach(this.handlers,function(Wr){Wr!==null&&Hr(Wr)})},t$a=Vt,t$a}var a$J,o$I;function c$u(){if(o$I)return a$J;o$I=1;var Kt=x$m();return a$J=function(Vt,Hr){Kt.forEach(Vt,function(Wr,Yr){Yr!==Hr&&Yr.toUpperCase()===Hr.toUpperCase()&&(Vt[Hr]=Wr,delete Vt[Yr])})},a$J}var s$g,t$9;function c$t(){return t$9||(t$9=1,s$g=function(Kt,Vt,Hr,Wr,Yr){return Kt.config=Vt,Hr&&(Kt.code=Hr),Kt.request=Wr,Kt.response=Yr,Kt.isAxiosError=!0,Kt.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},Kt}),s$g}var r$I,i$i;function e$U(){return i$i||(i$i=1,r$I={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}),r$I}var r$H,e$T;function v$u(){if(e$T)return r$H;e$T=1;var Kt=c$t();return r$H=function(Vt,Hr,Wr,Yr,Zr){var en=new Error(Vt);return Kt(en,Hr,Wr,Yr,Zr)},r$H}var r$G,a$I;function v$t(){if(a$I)return r$G;a$I=1;var Kt=v$u();return r$G=function(Vt,Hr,Wr){var Yr=Wr.config.validateStatus;!Wr.status||!Yr||Yr(Wr.status)?Vt(Wr):Hr(Kt("Request failed with status code "+Wr.status,Wr.config,null,Wr.request,Wr))},r$G}var t$8,c$s;function w$k(){if(c$s)return t$8;c$s=1;var Kt=x$m();return t$8=Kt.isStandardBrowserEnv()?function(){return{write:function(Vt,Hr,Wr,Yr,Zr,en){var tn=[];tn.push(Vt+"="+encodeURIComponent(Hr)),Kt.isNumber(Wr)&&tn.push("expires="+new Date(Wr).toGMTString()),Kt.isString(Yr)&&tn.push("path="+Yr),Kt.isString(Zr)&&tn.push("domain="+Zr),en===!0&&tn.push("secure"),document.cookie=tn.join("; ")},read:function(Vt){var Hr=document.cookie.match(new RegExp("(^|;\\s*)("+Vt+")=([^;]*)"));return Hr?decodeURIComponent(Hr[3]):null},remove:function(Vt){this.write(Vt,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),t$8}var e$S,r$F;function s$f(){return r$F||(r$F=1,e$S=function(Kt){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(Kt)}),e$S}var e$R,i$h;function o$H(){return i$h||(i$h=1,e$R=function(Kt,Vt){return Vt?Kt.replace(/\/+$/,"")+"/"+Vt.replace(/^\/+/,""):Kt}),e$R}var u$r,e$Q;function m$w(){if(e$Q)return u$r;e$Q=1;var Kt=s$f(),Vt=o$H();return u$r=function(Hr,Wr){return Hr&&!Kt(Wr)?Vt(Hr,Wr):Wr},u$r}var o$G,f$n;function v$s(){if(f$n)return o$G;f$n=1;var Kt=x$m(),Vt=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return o$G=function(Hr){var Wr={},Yr,Zr,en;return Hr&&Kt.forEach(Hr.split(`
`),function(tn){if(en=tn.indexOf(":"),Yr=Kt.trim(tn.substr(0,en)).toLowerCase(),Zr=Kt.trim(tn.substr(en+1)),Yr){if(Wr[Yr]&&Vt.indexOf(Yr)>=0)return;Yr==="set-cookie"?Wr[Yr]=(Wr[Yr]?Wr[Yr]:[]).concat([Zr]):Wr[Yr]=Wr[Yr]?Wr[Yr]+", "+Zr:Zr}}),Wr},o$G}var a$H,u$q;function f$m(){if(u$q)return a$H;u$q=1;var Kt=x$m();return a$H=Kt.isStandardBrowserEnv()?function(){var Vt=/(msie|trident)/i.test(navigator.userAgent),Hr=document.createElement("a"),Wr;function Yr(Zr){var en=Zr;return Vt&&(Hr.setAttribute("href",en),en=Hr.href),Hr.setAttribute("href",en),{href:Hr.href,protocol:Hr.protocol?Hr.protocol.replace(/:$/,""):"",host:Hr.host,search:Hr.search?Hr.search.replace(/^\?/,""):"",hash:Hr.hash?Hr.hash.replace(/^#/,""):"",hostname:Hr.hostname,port:Hr.port,pathname:Hr.pathname.charAt(0)==="/"?Hr.pathname:"/"+Hr.pathname}}return Wr=Yr(window.location.href),function(Zr){var en=Kt.isString(Zr)?Yr(Zr):Zr;return en.protocol===Wr.protocol&&en.host===Wr.host}}():function(){return function(){return!0}}(),a$H}var r$E,n$g;function a$G(){if(n$g)return r$E;n$g=1;function Kt(Vt){this.message=Vt}return Kt.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Kt.prototype.__CANCEL__=!0,r$E=Kt,r$E}var v$r,E$d;function g$q(){if(E$d)return v$r;E$d=1;var Kt=x$m(),Vt=v$t(),Hr=w$k(),Wr=L$i(),Yr=m$w(),Zr=v$s(),en=f$m(),tn=v$u(),rn=e$U(),nn=a$G();return v$r=function(on){return new Promise(function(an,$n){var ln=on.data,Hn=on.headers,jn=on.responseType,zn;function Wn(){on.cancelToken&&on.cancelToken.unsubscribe(zn),on.signal&&on.signal.removeEventListener("abort",zn)}Kt.isFormData(ln)&&delete Hn["Content-Type"];var ei=new XMLHttpRequest;if(on.auth){var $i=on.auth.username||"",Mi=on.auth.password?unescape(encodeURIComponent(on.auth.password)):"";Hn.Authorization="Basic "+btoa($i+":"+Mi)}var Ni=Yr(on.baseURL,on.url);ei.open(on.method.toUpperCase(),Wr(Ni,on.params,on.paramsSerializer),!0),ei.timeout=on.timeout;function Ts(){if(ei){var $s="getAllResponseHeaders"in ei?Zr(ei.getAllResponseHeaders()):null,Ws=!jn||jn==="text"||jn==="json"?ei.responseText:ei.response,Hs={data:Ws,status:ei.status,statusText:ei.statusText,headers:$s,config:on,request:ei};Vt(function(js){an(js),Wn()},function(js){$n(js),Wn()},Hs),ei=null}}if("onloadend"in ei?ei.onloadend=Ts:ei.onreadystatechange=function(){!ei||ei.readyState!==4||ei.status===0&&!(ei.responseURL&&ei.responseURL.indexOf("file:")===0)||setTimeout(Ts)},ei.onabort=function(){ei&&($n(tn("Request aborted",on,"ECONNABORTED",ei)),ei=null)},ei.onerror=function(){$n(tn("Network Error",on,null,ei)),ei=null},ei.ontimeout=function(){var $s=on.timeout?"timeout of "+on.timeout+"ms exceeded":"timeout exceeded",Ws=on.transitional||rn;on.timeoutErrorMessage&&($s=on.timeoutErrorMessage),$n(tn($s,on,Ws.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",ei)),ei=null},Kt.isStandardBrowserEnv()){var ps=(on.withCredentials||en(Ni))&&on.xsrfCookieName?Hr.read(on.xsrfCookieName):void 0;ps&&(Hn[on.xsrfHeaderName]=ps)}"setRequestHeader"in ei&&Kt.forEach(Hn,function($s,Ws){typeof ln>"u"&&Ws.toLowerCase()==="content-type"?delete Hn[Ws]:ei.setRequestHeader(Ws,$s)}),Kt.isUndefined(on.withCredentials)||(ei.withCredentials=!!on.withCredentials),jn&&jn!=="json"&&(ei.responseType=on.responseType),typeof on.onDownloadProgress=="function"&&ei.addEventListener("progress",on.onDownloadProgress),typeof on.onUploadProgress=="function"&&ei.upload&&ei.upload.addEventListener("progress",on.onUploadProgress),(on.cancelToken||on.signal)&&(zn=function($s){ei&&($n(!$s||$s&&$s.type?new nn("canceled"):$s),ei.abort(),ei=null)},on.cancelToken&&on.cancelToken.subscribe(zn),on.signal&&(on.signal.aborted?zn():on.signal.addEventListener("abort",zn))),ln||(ln=null),ei.send(ln)})},v$r}var a$F,m$v;function C$k(){if(m$v)return a$F;m$v=1;var Kt=x$m(),Vt=c$u(),Hr=c$t(),Wr=e$U(),Yr={"Content-Type":"application/x-www-form-urlencoded"};function Zr(nn,on){!Kt.isUndefined(nn)&&Kt.isUndefined(nn["Content-Type"])&&(nn["Content-Type"]=on)}function en(){var nn;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(nn=g$q()),nn}function tn(nn,on,an){if(Kt.isString(nn))try{return(on||JSON.parse)(nn),Kt.trim(nn)}catch($n){if($n.name!=="SyntaxError")throw $n}return(an||JSON.stringify)(nn)}var rn={transitional:Wr,adapter:en(),transformRequest:[function(nn,on){return Vt(on,"Accept"),Vt(on,"Content-Type"),Kt.isFormData(nn)||Kt.isArrayBuffer(nn)||Kt.isBuffer(nn)||Kt.isStream(nn)||Kt.isFile(nn)||Kt.isBlob(nn)?nn:Kt.isArrayBufferView(nn)?nn.buffer:Kt.isURLSearchParams(nn)?(Zr(on,"application/x-www-form-urlencoded;charset=utf-8"),nn.toString()):Kt.isObject(nn)||on&&on["Content-Type"]==="application/json"?(Zr(on,"application/json"),tn(nn)):nn}],transformResponse:[function(nn){var on=this.transitional||rn.transitional,an=on&&on.silentJSONParsing,$n=on&&on.forcedJSONParsing,ln=!an&&this.responseType==="json";if(ln||$n&&Kt.isString(nn)&&nn.length)try{return JSON.parse(nn)}catch(Hn){if(ln)throw Hn.name==="SyntaxError"?Hr(Hn,this,"E_JSON_PARSE"):Hn}return nn}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(nn){return nn>=200&&nn<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return Kt.forEach(["delete","get","head"],function(nn){rn.headers[nn]={}}),Kt.forEach(["post","put","patch"],function(nn){rn.headers[nn]=Kt.merge(Yr)}),a$F=rn,a$F}var a$E,e$P;function v$q(){if(e$P)return a$E;e$P=1;var Kt=x$m(),Vt=C$k();return a$E=function(Hr,Wr,Yr){var Zr=this||Vt;return Kt.forEach(Yr,function(en){Hr=en.call(Zr,Hr,Wr)}),Hr},a$E}var r$D,n$f;function a$D(){return n$f||(n$f=1,r$D=function(Kt){return!!(Kt&&Kt.__CANCEL__)}),r$D}var u$p,h$o;function I$a(){if(h$o)return u$p;h$o=1;var Kt=x$m(),Vt=v$q(),Hr=a$D(),Wr=C$k(),Yr=a$G();function Zr(en){if(en.cancelToken&&en.cancelToken.throwIfRequested(),en.signal&&en.signal.aborted)throw new Yr("canceled")}return u$p=function(en){Zr(en),en.headers=en.headers||{},en.data=Vt.call(en,en.data,en.headers,en.transformRequest),en.headers=Kt.merge(en.headers.common||{},en.headers[en.method]||{},en.headers),Kt.forEach(["delete","get","head","post","put","patch","common"],function(rn){delete en.headers[rn]});var tn=en.adapter||Wr.adapter;return tn(en).then(function(rn){return Zr(en),rn.data=Vt.call(en,rn.data,rn.headers,en.transformResponse),rn},function(rn){return Hr(rn)||(Zr(en),rn&&rn.response&&(rn.response.data=Vt.call(en,rn.response.data,rn.response.headers,en.transformResponse))),Promise.reject(rn)})},u$p}var d$v,v$p;function b$j(){if(v$p)return d$v;v$p=1;var Kt=x$m();return d$v=function(Vt,Hr){Hr=Hr||{};var Wr={};function Yr(on,an){return Kt.isPlainObject(on)&&Kt.isPlainObject(an)?Kt.merge(on,an):Kt.isPlainObject(an)?Kt.merge({},an):Kt.isArray(an)?an.slice():an}function Zr(on){if(Kt.isUndefined(Hr[on])){if(!Kt.isUndefined(Vt[on]))return Yr(void 0,Vt[on])}else return Yr(Vt[on],Hr[on])}function en(on){if(!Kt.isUndefined(Hr[on]))return Yr(void 0,Hr[on])}function tn(on){if(Kt.isUndefined(Hr[on])){if(!Kt.isUndefined(Vt[on]))return Yr(void 0,Vt[on])}else return Yr(void 0,Hr[on])}function rn(on){if(on in Hr)return Yr(Vt[on],Hr[on]);if(on in Vt)return Yr(void 0,Vt[on])}var nn={url:en,method:en,data:en,baseURL:tn,transformRequest:tn,transformResponse:tn,paramsSerializer:tn,timeout:tn,timeoutMessage:tn,withCredentials:tn,adapter:tn,responseType:tn,xsrfCookieName:tn,xsrfHeaderName:tn,onUploadProgress:tn,onDownloadProgress:tn,decompress:tn,maxContentLength:tn,maxBodyLength:tn,transport:tn,httpAgent:tn,httpsAgent:tn,cancelToken:tn,socketPath:tn,responseEncoding:tn,validateStatus:rn};return Kt.forEach(Object.keys(Vt).concat(Object.keys(Hr)),function(on){var an=nn[on]||Zr,$n=an(on);Kt.isUndefined($n)&&an!==rn||(Wr[on]=$n)}),Wr},d$v}var r$C,a$C;function e$O(){return a$C||(a$C=1,r$C={version:"0.26.1"}),r$C}var c$r,b$i;function m$u(){if(b$i)return c$r;b$i=1;var Kt=e$O().version,Vt={};["object","boolean","number","function","string","symbol"].forEach(function(Yr,Zr){Vt[Yr]=function(en){return typeof en===Yr||"a"+(Zr<1?"n ":" ")+Yr}});var Hr={};Vt.transitional=function(Yr,Zr,en){function tn(rn,nn){return"[Axios v"+Kt+"] Transitional option '"+rn+"'"+nn+(en?". "+en:"")}return function(rn,nn,on){if(Yr===!1)throw new Error(tn(nn," has been removed"+(Zr?" in "+Zr:"")));return Zr&&!Hr[nn]&&(Hr[nn]=!0,console.warn(tn(nn," has been deprecated since v"+Zr+" and will be removed in the near future"))),Yr?Yr(rn,nn,on):!0}};function Wr(Yr,Zr,en){if(typeof Yr!="object")throw new TypeError("options must be an object");for(var tn=Object.keys(Yr),rn=tn.length;rn-- >0;){var nn=tn[rn],on=Zr[nn];if(on){var an=Yr[nn],$n=an===void 0||on(an,nn,Yr);if($n!==!0)throw new TypeError("option "+nn+" must be "+$n);continue}if(en!==!0)throw Error("Unknown option "+nn)}}return c$r={assertOptions:Wr,validators:Vt},c$r}var m$t,w$j;function W$a(){if(w$j)return m$t;w$j=1;var Kt=x$m(),Vt=L$i(),Hr=c$v(),Wr=I$a(),Yr=b$j(),Zr=m$u(),en=Zr.validators;function tn(rn){this.defaults=rn,this.interceptors={request:new Hr,response:new Hr}}return tn.prototype.request=function(rn,nn){typeof rn=="string"?(nn=nn||{},nn.url=rn):nn=rn||{},nn=Yr(this.defaults,nn),nn.method?nn.method=nn.method.toLowerCase():this.defaults.method?nn.method=this.defaults.method.toLowerCase():nn.method="get";var on=nn.transitional;on!==void 0&&Zr.assertOptions(on,{silentJSONParsing:en.transitional(en.boolean),forcedJSONParsing:en.transitional(en.boolean),clarifyTimeoutError:en.transitional(en.boolean)},!1);var an=[],$n=!0;this.interceptors.request.forEach(function($i){typeof $i.runWhen=="function"&&$i.runWhen(nn)===!1||($n=$n&&$i.synchronous,an.unshift($i.fulfilled,$i.rejected))});var ln=[];this.interceptors.response.forEach(function($i){ln.push($i.fulfilled,$i.rejected)});var Hn;if(!$n){var jn=[Wr,void 0];for(Array.prototype.unshift.apply(jn,an),jn=jn.concat(ln),Hn=Promise.resolve(nn);jn.length;)Hn=Hn.then(jn.shift(),jn.shift());return Hn}for(var zn=nn;an.length;){var Wn=an.shift(),ei=an.shift();try{zn=Wn(zn)}catch($i){ei($i);break}}try{Hn=Wr(zn)}catch($i){return Promise.reject($i)}for(;ln.length;)Hn=Hn.then(ln.shift(),ln.shift());return Hn},tn.prototype.getUri=function(rn){return rn=Yr(this.defaults,rn),Vt(rn.url,rn.params,rn.paramsSerializer).replace(/^\?/,"")},Kt.forEach(["delete","get","head","options"],function(rn){tn.prototype[rn]=function(nn,on){return this.request(Yr(on||{},{method:rn,url:nn,data:(on||{}).data}))}}),Kt.forEach(["post","put","patch"],function(rn){tn.prototype[rn]=function(nn,on,an){return this.request(Yr(an||{},{method:rn,url:nn,data:on}))}}),m$t=tn,m$t}var c$q,a$B;function p$q(){if(a$B)return c$q;a$B=1;var Kt=a$G();function Vt(Hr){if(typeof Hr!="function")throw new TypeError("executor must be a function.");var Wr;this.promise=new Promise(function(Zr){Wr=Zr});var Yr=this;this.promise.then(function(Zr){if(Yr._listeners){var en,tn=Yr._listeners.length;for(en=0;en<tn;en++)Yr._listeners[en](Zr);Yr._listeners=null}}),this.promise.then=function(Zr){var en,tn=new Promise(function(rn){Yr.subscribe(rn),en=rn}).then(Zr);return tn.cancel=function(){Yr.unsubscribe(en)},tn},Hr(function(Zr){Yr.reason||(Yr.reason=new Kt(Zr),Wr(Yr.reason))})}return Vt.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Vt.prototype.subscribe=function(Hr){if(this.reason){Hr(this.reason);return}this._listeners?this._listeners.push(Hr):this._listeners=[Hr]},Vt.prototype.unsubscribe=function(Hr){if(this._listeners){var Wr=this._listeners.indexOf(Hr);Wr!==-1&&this._listeners.splice(Wr,1)}},Vt.source=function(){var Hr,Wr=new Vt(function(Yr){Hr=Yr});return{token:Wr,cancel:Hr}},c$q=Vt,c$q}var r$B,e$N;function t$7(){return e$N||(e$N=1,r$B=function(Kt){return function(Vt){return Kt.apply(null,Vt)}}),r$B}var r$A,e$M;function n$e(){if(e$M)return r$A;e$M=1;var Kt=x$m();return r$A=function(Vt){return Kt.isObject(Vt)&&Vt.isAxiosError===!0},r$A}var n$d;function O$k(){if(n$d)return o$J.exports;n$d=1;var Kt=x$m(),Vt=f$o(),Hr=W$a(),Wr=b$j(),Yr=C$k();function Zr(tn){var rn=new Hr(tn),nn=Vt(Hr.prototype.request,rn);return Kt.extend(nn,Hr.prototype,rn),Kt.extend(nn,rn),nn.create=function(on){return Zr(Wr(tn,on))},nn}var en=Zr(Yr);return en.Axios=Hr,en.Cancel=a$G(),en.CancelToken=p$q(),en.isCancel=a$D(),en.VERSION=e$O().version,en.all=function(tn){return Promise.all(tn)},en.spread=t$7(),en.isAxiosError=n$e(),o$J.exports=en,o$J.exports.default=en,o$J.exports}var r$z,e$L;function u$o(){return e$L||(e$L=1,r$z=O$k()),r$z}var J$b;function re$6(){if(J$b)return a$L;J$b=1;var Kt=u$s&&u$s.__awaiter||function(on,an,$n,ln){function Hn(jn){return jn instanceof $n?jn:new $n(function(zn){zn(jn)})}return new($n||($n=Promise))(function(jn,zn){function Wn(Mi){try{$i(ln.next(Mi))}catch(Ni){zn(Ni)}}function ei(Mi){try{$i(ln.throw(Mi))}catch(Ni){zn(Ni)}}function $i(Mi){Mi.done?jn(Mi.value):Hn(Mi.value).then(Wn,ei)}$i((ln=ln.apply(on,an||[])).next())})},Vt=u$s&&u$s.__generator||function(on,an){var $n={label:0,sent:function(){if(jn[0]&1)throw jn[1];return jn[1]},trys:[],ops:[]},ln,Hn,jn,zn;return zn={next:Wn(0),throw:Wn(1),return:Wn(2)},typeof Symbol=="function"&&(zn[Symbol.iterator]=function(){return this}),zn;function Wn($i){return function(Mi){return ei([$i,Mi])}}function ei($i){if(ln)throw new TypeError("Generator is already executing.");for(;$n;)try{if(ln=1,Hn&&(jn=$i[0]&2?Hn.return:$i[0]?Hn.throw||((jn=Hn.return)&&jn.call(Hn),0):Hn.next)&&!(jn=jn.call(Hn,$i[1])).done)return jn;switch(Hn=0,jn&&($i=[$i[0]&2,jn.value]),$i[0]){case 0:case 1:jn=$i;break;case 4:return $n.label++,{value:$i[1],done:!1};case 5:$n.label++,Hn=$i[1],$i=[0];continue;case 7:$i=$n.ops.pop(),$n.trys.pop();continue;default:if(jn=$n.trys,!(jn=jn.length>0&&jn[jn.length-1])&&($i[0]===6||$i[0]===2)){$n=0;continue}if($i[0]===3&&(!jn||$i[1]>jn[0]&&$i[1]<jn[3])){$n.label=$i[1];break}if($i[0]===6&&$n.label<jn[1]){$n.label=jn[1],jn=$i;break}if(jn&&$n.label<jn[2]){$n.label=jn[2],$n.ops.push($i);break}jn[2]&&$n.ops.pop(),$n.trys.pop();continue}$i=an.call(on,$n)}catch(Mi){$i=[6,Mi],Hn=0}finally{ln=jn=0}if($i[0]&5)throw $i[1];return{value:$i[0]?$i[1]:void 0,done:!0}}},Hr=u$s&&u$s.__importDefault||function(on){return on&&on.__esModule?on:{default:on}};Object.defineProperty(a$L,"__esModule",{value:!0});var Wr=Hr(u$o()),Yr=N$g(),Zr=Hr(l$m()),en="X-TYPESENSE-API-KEY",tn=!0,rn=!1,nn=function(){function on(an){this.configuration=an,this.apiKey=this.configuration.apiKey,this.nodes=this.configuration.nodes==null?this.configuration.nodes:JSON.parse(JSON.stringify(this.configuration.nodes)),this.nearestNode=this.configuration.nearestNode==null?this.configuration.nearestNode:JSON.parse(JSON.stringify(this.configuration.nearestNode)),this.connectionTimeoutSeconds=this.configuration.connectionTimeoutSeconds,this.healthcheckIntervalSeconds=this.configuration.healthcheckIntervalSeconds,this.numRetriesPerRequest=this.configuration.numRetries,this.retryIntervalSeconds=this.configuration.retryIntervalSeconds,this.sendApiKeyAsQueryParam=this.configuration.sendApiKeyAsQueryParam,this.additionalUserHeaders=this.configuration.additionalHeaders,this.logger=this.configuration.logger,this.initializeMetadataForNodes(),this.currentNodeIndex=-1}return on.prototype.get=function(an,$n,ln){$n===void 0&&($n={});var Hn=ln===void 0?{}:ln,jn=Hn.abortSignal,zn=jn===void 0?null:jn,Wn=Hn.responseType,ei=Wn===void 0?void 0:Wn;return Kt(this,void 0,void 0,function(){return Vt(this,function($i){return[2,this.performRequest("get",an,{queryParameters:$n,abortSignal:zn,responseType:ei})]})})},on.prototype.delete=function(an,$n){return $n===void 0&&($n={}),Kt(this,void 0,void 0,function(){return Vt(this,function(ln){return[2,this.performRequest("delete",an,{queryParameters:$n})]})})},on.prototype.post=function(an,$n,ln,Hn){return $n===void 0&&($n={}),ln===void 0&&(ln={}),Hn===void 0&&(Hn={}),Kt(this,void 0,void 0,function(){return Vt(this,function(jn){return[2,this.performRequest("post",an,{queryParameters:ln,bodyParameters:$n,additionalHeaders:Hn})]})})},on.prototype.put=function(an,$n,ln){return $n===void 0&&($n={}),ln===void 0&&(ln={}),Kt(this,void 0,void 0,function(){return Vt(this,function(Hn){return[2,this.performRequest("put",an,{queryParameters:ln,bodyParameters:$n})]})})},on.prototype.patch=function(an,$n,ln){return $n===void 0&&($n={}),ln===void 0&&(ln={}),Kt(this,void 0,void 0,function(){return Vt(this,function(Hn){return[2,this.performRequest("patch",an,{queryParameters:ln,bodyParameters:$n})]})})},on.prototype.performRequest=function(an,$n,ln){var Hn,jn,zn,Wn=ln.queryParameters,ei=Wn===void 0?null:Wn,$i=ln.bodyParameters,Mi=$i===void 0?null:$i,Ni=ln.additionalHeaders,Ts=Ni===void 0?{}:Ni,ps=ln.abortSignal,$s=ps===void 0?null:ps,Ws=ln.responseType,Hs=Ws===void 0?void 0:Ws,js=ln.skipConnectionTimeout,zs=js===void 0?!1:js;return Kt(this,void 0,void 0,function(){var Xs,ia,Qs,Zs,Gs,Hl;return Vt(this,function(Js){switch(Js.label){case 0:this.configuration.validate(),Xs=Date.now(),this.logger.debug("Request #".concat(Xs,": Performing ").concat(an.toUpperCase()," request: ").concat($n)),Qs=function(sa){var Ca,tc,zl,ec,sc,ac,rc;return Vt(this,function(uc){switch(uc.label){case 0:if(Ca=Zs.getNextNode(Xs),Zs.logger.debug("Request #".concat(Xs,": Attempting ").concat(an.toUpperCase()," request Try #").concat(sa," to Node ").concat(Ca.index)),$s&&$s.aborted)return[2,{value:Promise.reject(new Error("Request aborted by caller."))}];tc=void 0,uc.label=1;case 1:return uc.trys.push([1,3,5,6]),zl={method:an,url:Zs.uriFor($n,Ca),headers:Object.assign({},Zs.defaultHeaders(),Ts,Zs.additionalUserHeaders),maxContentLength:1/0,maxBodyLength:1/0,responseType:Hs,validateStatus:function(pc){return pc>0},transformResponse:[function(pc,cc){var $c=pc;return cc!==void 0&&typeof pc=="string"&&cc["content-type"]&&cc["content-type"].startsWith("application/json")&&($c=JSON.parse(pc)),$c}]},zs!==!0&&(zl.timeout=Zs.connectionTimeoutSeconds*1e3),ei&&Object.keys(ei).length!==0&&(zl.params=ei),Zs.sendApiKeyAsQueryParam&&(zl.params=zl.params||{},zl.params["x-typesense-api-key"]=Zs.apiKey),Mi&&(typeof Mi=="string"&&Mi.length!==0||typeof Mi=="object"&&Object.keys(Mi).length!==0)&&(zl.data=Mi),$s&&(ec=Wr.default.CancelToken,sc=ec.source(),tc=function(){return sc.cancel()},$s.addEventListener("abort",tc),zl.cancelToken=sc.token),[4,(0,Wr.default)(zl)];case 2:if(ac=uc.sent(),ac.status>=1&&ac.status<=499&&Zs.setNodeHealthcheck(Ca,tn),Zs.logger.debug("Request #".concat(Xs,": Request to Node ").concat(Ca.index," was made. Response Code was ").concat(ac.status,".")),ac.status>=200&&ac.status<300)return[2,{value:Promise.resolve(ac.data)}];if(ac.status<500)return[2,{value:Promise.reject(Zs.customErrorForResponse(ac,(Hn=ac.data)===null||Hn===void 0?void 0:Hn.message))}];throw Zs.customErrorForResponse(ac,(jn=ac.data)===null||jn===void 0?void 0:jn.message);case 3:return rc=uc.sent(),Zs.setNodeHealthcheck(Ca,rn),ia=rc,Zs.logger.warn("Request #".concat(Xs,": Request to Node ").concat(Ca.index,' failed due to "').concat(rc.code," ").concat(rc.message).concat(rc.response==null?"":" - "+JSON.stringify((zn=rc.response)===null||zn===void 0?void 0:zn.data),'"')),Zs.logger.warn("Request #".concat(Xs,": Sleeping for ").concat(Zs.retryIntervalSeconds,"s and then retrying request...")),[4,Zs.timer(Zs.retryIntervalSeconds)];case 4:return uc.sent(),[3,6];case 5:return $s&&tc&&$s.removeEventListener("abort",tc),[7];case 6:return[2]}})},Zs=this,Gs=1,Js.label=1;case 1:return Gs<=this.numRetriesPerRequest+1?[5,Qs(Gs)]:[3,4];case 2:if(Hl=Js.sent(),typeof Hl=="object")return[2,Hl.value];Js.label=3;case 3:return Gs++,[3,1];case 4:return this.logger.debug("Request #".concat(Xs,": No retries left. Raising last error")),[2,Promise.reject(ia)]}})})},on.prototype.getNextNode=function(an){if(an===void 0&&(an=0),this.nearestNode!=null){if(this.logger.debug("Request #".concat(an,": Nodes Health: Node ").concat(this.nearestNode.index," is ").concat(this.nearestNode.isHealthy===!0?"Healthy":"Unhealthy")),this.nearestNode.isHealthy===!0||this.nodeDueForHealthcheck(this.nearestNode,an))return this.logger.debug("Request #".concat(an,": Updated current node to Node ").concat(this.nearestNode.index)),this.nearestNode;this.logger.debug("Request #".concat(an,": Falling back to individual nodes"))}this.logger.debug("Request #".concat(an,": Nodes Health: ").concat(this.nodes.map(function(Hn){return"Node ".concat(Hn.index," is ").concat(Hn.isHealthy===!0?"Healthy":"Unhealthy")}).join(" || ")));for(var $n=this.nodes[0],ln=0;ln<=this.nodes.length;ln++)if(this.currentNodeIndex=(this.currentNodeIndex+1)%this.nodes.length,$n=this.nodes[this.currentNodeIndex],$n.isHealthy===!0||this.nodeDueForHealthcheck($n,an))return this.logger.debug("Request #".concat(an,": Updated current node to Node ").concat($n.index)),$n;return this.logger.debug("Request #".concat(an,": No healthy nodes were found. Returning the next node, Node ").concat($n.index)),$n},on.prototype.nodeDueForHealthcheck=function(an,$n){$n===void 0&&($n=0);var ln=Date.now()-an.lastAccessTimestamp>this.healthcheckIntervalSeconds*1e3;return ln&&this.logger.debug("Request #".concat($n,": Node ").concat(an.index," has exceeded healtcheckIntervalSeconds of ").concat(this.healthcheckIntervalSeconds,". Adding it back into rotation.")),ln},on.prototype.initializeMetadataForNodes=function(){var an=this;this.nearestNode!=null&&(this.nearestNode.index="nearestNode",this.setNodeHealthcheck(this.nearestNode,tn)),this.nodes.forEach(function($n,ln){$n.index=ln,an.setNodeHealthcheck($n,tn)})},on.prototype.setNodeHealthcheck=function(an,$n){an.isHealthy=$n,an.lastAccessTimestamp=Date.now()},on.prototype.uriFor=function(an,$n){return $n.url!=null?"".concat($n.url).concat(an):"".concat($n.protocol,"://").concat($n.host,":").concat($n.port).concat($n.path).concat(an)},on.prototype.defaultHeaders=function(){var an={};return this.sendApiKeyAsQueryParam||(an[en]=this.apiKey),an["Content-Type"]="application/json",an},on.prototype.timer=function(an){return Kt(this,void 0,void 0,function(){return Vt(this,function($n){return[2,new Promise(function(ln){return setTimeout(ln,an*1e3)})]})})},on.prototype.customErrorForResponse=function(an,$n){var ln="Request failed with HTTP code ".concat(an.status);typeof $n=="string"&&$n.trim()!==""&&(ln+=" | Server said: ".concat($n));var Hn=new Zr.default(ln);return an.status===400?Hn=new Yr.RequestMalformed(ln):an.status===401?Hn=new Yr.RequestUnauthorized(ln):an.status===404?Hn=new Yr.ObjectNotFound(ln):an.status===409?Hn=new Yr.ObjectAlreadyExists(ln):an.status===422?Hn=new Yr.ObjectUnprocessable(ln):an.status>=500&&an.status<=599?Hn=new Yr.ServerError(ln):Hn=new Yr.HTTPError(ln),Hn.httpStatus=an.status,Hn},on}();return a$L.default=nn,a$L}var o$F={},_$l;function p$p(){if(_$l)return o$F;_$l=1;var Kt=u$s&&u$s.__awaiter||function(Yr,Zr,en,tn){function rn(nn){return nn instanceof en?nn:new en(function(on){on(nn)})}return new(en||(en=Promise))(function(nn,on){function an(Hn){try{ln(tn.next(Hn))}catch(jn){on(jn)}}function $n(Hn){try{ln(tn.throw(Hn))}catch(jn){on(jn)}}function ln(Hn){Hn.done?nn(Hn.value):rn(Hn.value).then(an,$n)}ln((tn=tn.apply(Yr,Zr||[])).next())})},Vt=u$s&&u$s.__generator||function(Yr,Zr){var en={label:0,sent:function(){if(nn[0]&1)throw nn[1];return nn[1]},trys:[],ops:[]},tn,rn,nn,on;return on={next:an(0),throw:an(1),return:an(2)},typeof Symbol=="function"&&(on[Symbol.iterator]=function(){return this}),on;function an(ln){return function(Hn){return $n([ln,Hn])}}function $n(ln){if(tn)throw new TypeError("Generator is already executing.");for(;en;)try{if(tn=1,rn&&(nn=ln[0]&2?rn.return:ln[0]?rn.throw||((nn=rn.return)&&nn.call(rn),0):rn.next)&&!(nn=nn.call(rn,ln[1])).done)return nn;switch(rn=0,nn&&(ln=[ln[0]&2,nn.value]),ln[0]){case 0:case 1:nn=ln;break;case 4:return en.label++,{value:ln[1],done:!1};case 5:en.label++,rn=ln[1],ln=[0];continue;case 7:ln=en.ops.pop(),en.trys.pop();continue;default:if(nn=en.trys,!(nn=nn.length>0&&nn[nn.length-1])&&(ln[0]===6||ln[0]===2)){en=0;continue}if(ln[0]===3&&(!nn||ln[1]>nn[0]&&ln[1]<nn[3])){en.label=ln[1];break}if(ln[0]===6&&en.label<nn[1]){en.label=nn[1],nn=ln;break}if(nn&&en.label<nn[2]){en.label=nn[2],en.ops.push(ln);break}nn[2]&&en.ops.pop(),en.trys.pop();continue}ln=Zr.call(Yr,en)}catch(Hn){ln=[6,Hn],rn=0}finally{tn=nn=0}if(ln[0]&5)throw ln[1];return{value:ln[0]?ln[1]:void 0,done:!0}}};Object.defineProperty(o$F,"__esModule",{value:!0});var Hr="/collections",Wr=function(){function Yr(Zr){this.apiCall=Zr}return Yr.prototype.create=function(Zr,en){return en===void 0&&(en={}),Kt(this,void 0,void 0,function(){return Vt(this,function(tn){return[2,this.apiCall.post(Hr,Zr,en)]})})},Yr.prototype.retrieve=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(Zr){return[2,this.apiCall.get(Hr)]})})},Object.defineProperty(Yr,"RESOURCEPATH",{get:function(){return Hr},enumerable:!1,configurable:!0}),Yr}();return o$F.default=Wr,o$F}var o$E={},e$K={},e$J={},e$I={},S$i;function T$k(){if(S$i)return e$I;S$i=1;var Kt=u$s&&u$s.__awaiter||function(en,tn,rn,nn){function on(an){return an instanceof rn?an:new rn(function($n){$n(an)})}return new(rn||(rn=Promise))(function(an,$n){function ln(zn){try{jn(nn.next(zn))}catch(Wn){$n(Wn)}}function Hn(zn){try{jn(nn.throw(zn))}catch(Wn){$n(Wn)}}function jn(zn){zn.done?an(zn.value):on(zn.value).then(ln,Hn)}jn((nn=nn.apply(en,tn||[])).next())})},Vt=u$s&&u$s.__generator||function(en,tn){var rn={label:0,sent:function(){if(an[0]&1)throw an[1];return an[1]},trys:[],ops:[]},nn,on,an,$n;return $n={next:ln(0),throw:ln(1),return:ln(2)},typeof Symbol=="function"&&($n[Symbol.iterator]=function(){return this}),$n;function ln(jn){return function(zn){return Hn([jn,zn])}}function Hn(jn){if(nn)throw new TypeError("Generator is already executing.");for(;rn;)try{if(nn=1,on&&(an=jn[0]&2?on.return:jn[0]?on.throw||((an=on.return)&&an.call(on),0):on.next)&&!(an=an.call(on,jn[1])).done)return an;switch(on=0,an&&(jn=[jn[0]&2,an.value]),jn[0]){case 0:case 1:an=jn;break;case 4:return rn.label++,{value:jn[1],done:!1};case 5:rn.label++,on=jn[1],jn=[0];continue;case 7:jn=rn.ops.pop(),rn.trys.pop();continue;default:if(an=rn.trys,!(an=an.length>0&&an[an.length-1])&&(jn[0]===6||jn[0]===2)){rn=0;continue}if(jn[0]===3&&(!an||jn[1]>an[0]&&jn[1]<an[3])){rn.label=jn[1];break}if(jn[0]===6&&rn.label<an[1]){rn.label=an[1],an=jn;break}if(an&&rn.label<an[2]){rn.label=an[2],rn.ops.push(jn);break}an[2]&&rn.ops.pop(),rn.trys.pop();continue}jn=tn.call(en,rn)}catch(zn){jn=[6,zn],on=0}finally{nn=an=0}if(jn[0]&5)throw jn[1];return{value:jn[0]?jn[1]:void 0,done:!0}}},Hr=u$s&&u$s.__spreadArray||function(en,tn,rn){if(rn||arguments.length===2)for(var nn=0,on=tn.length,an;nn<on;nn++)(an||!(nn in tn))&&(an||(an=Array.prototype.slice.call(tn,0,nn)),an[nn]=tn[nn]);return en.concat(an||Array.prototype.slice.call(tn))};Object.defineProperty(e$I,"__esModule",{value:!0});var Wr=2*60,Yr=100,Zr=function(){function en(){this.responseCache=new Map,this.responsePromiseCache=new Map}return en.prototype.clearCache=function(){this.responseCache=new Map,this.responsePromiseCache=new Map},en.prototype.perform=function(tn,rn,nn,on){return Kt(this,void 0,void 0,function(){var an,$n,ln,Hn,jn,zn,Wn,ei,Mi,$i,Mi,Ni,Ts,ps,Ws,$s,Ws;return Vt(this,function(Hs){switch(Hs.label){case 0:if(an=on.cacheResponseForSeconds,$n=an===void 0?Wr:an,ln=on.maxSize,Hn=ln===void 0?Yr:ln,jn=$n<=0||Hn<=0,jn)return[2,rn.call.apply(rn,Hr([tn],nn,!1))];if(zn=JSON.stringify(nn),Wn=this.responseCache.get(zn),ei=Date.now(),Wn){if(Mi=ei-Wn.requestTimestamp<$n*1e3,Mi)return this.responseCache.delete(zn),this.responseCache.set(zn,Wn),[2,Promise.resolve(Wn.response)];this.responseCache.delete(zn)}if($i=this.responsePromiseCache.get(zn),$i){if(Mi=ei-$i.requestTimestamp<$n*1e3,Mi)return this.responsePromiseCache.delete(zn),this.responsePromiseCache.set(zn,$i),[2,$i.responsePromise];this.responsePromiseCache.delete(zn)}return Ni=rn.call.apply(rn,Hr([tn],nn,!1)),this.responsePromiseCache.set(zn,{requestTimestamp:ei,responsePromise:Ni}),[4,Ni];case 1:return Ts=Hs.sent(),this.responseCache.set(zn,{requestTimestamp:ei,response:Ts}),ps=this.responseCache.size>Hn,ps&&(Ws=this.responseCache.keys().next().value,this.responseCache.delete(Ws)),$s=this.responsePromiseCache.size>Hn,$s&&(Ws=this.responsePromiseCache.keys().next().value,this.responsePromiseCache.delete(Ws)),[2,Ts]}})})},en}();return e$I.default=Zr,e$I}var v$o;function x$l(){if(v$o)return e$J;v$o=1;var Kt=u$s&&u$s.__awaiter||function(tn,rn,nn,on){function an($n){return $n instanceof nn?$n:new nn(function(ln){ln($n)})}return new(nn||(nn=Promise))(function($n,ln){function Hn(Wn){try{zn(on.next(Wn))}catch(ei){ln(ei)}}function jn(Wn){try{zn(on.throw(Wn))}catch(ei){ln(ei)}}function zn(Wn){Wn.done?$n(Wn.value):an(Wn.value).then(Hn,jn)}zn((on=on.apply(tn,rn||[])).next())})},Vt=u$s&&u$s.__generator||function(tn,rn){var nn={label:0,sent:function(){if($n[0]&1)throw $n[1];return $n[1]},trys:[],ops:[]},on,an,$n,ln;return ln={next:Hn(0),throw:Hn(1),return:Hn(2)},typeof Symbol=="function"&&(ln[Symbol.iterator]=function(){return this}),ln;function Hn(zn){return function(Wn){return jn([zn,Wn])}}function jn(zn){if(on)throw new TypeError("Generator is already executing.");for(;nn;)try{if(on=1,an&&($n=zn[0]&2?an.return:zn[0]?an.throw||(($n=an.return)&&$n.call(an),0):an.next)&&!($n=$n.call(an,zn[1])).done)return $n;switch(an=0,$n&&(zn=[zn[0]&2,$n.value]),zn[0]){case 0:case 1:$n=zn;break;case 4:return nn.label++,{value:zn[1],done:!1};case 5:nn.label++,an=zn[1],zn=[0];continue;case 7:zn=nn.ops.pop(),nn.trys.pop();continue;default:if($n=nn.trys,!($n=$n.length>0&&$n[$n.length-1])&&(zn[0]===6||zn[0]===2)){nn=0;continue}if(zn[0]===3&&(!$n||zn[1]>$n[0]&&zn[1]<$n[3])){nn.label=zn[1];break}if(zn[0]===6&&nn.label<$n[1]){nn.label=$n[1],$n=zn;break}if($n&&nn.label<$n[2]){nn.label=$n[2],nn.ops.push(zn);break}$n[2]&&nn.ops.pop(),nn.trys.pop();continue}zn=rn.call(tn,nn)}catch(Wn){zn=[6,Wn],an=0}finally{on=$n=0}if(zn[0]&5)throw zn[1];return{value:zn[0]?zn[1]:void 0,done:!0}}},Hr=u$s&&u$s.__importDefault||function(tn){return tn&&tn.__esModule?tn:{default:tn}};Object.defineProperty(e$J,"__esModule",{value:!0}),e$J.SearchOnlyDocuments=void 0;var Wr=Hr(T$k()),Yr=Hr(p$p()),Zr="/documents",en=function(){function tn(rn,nn,on){this.collectionName=rn,this.apiCall=nn,this.configuration=on,this.requestWithCache=new Wr.default}return tn.prototype.clearCache=function(){this.requestWithCache.clearCache()},tn.prototype.search=function(rn,nn){var on=nn===void 0?{}:nn,an=on.cacheSearchResultsForSeconds,$n=an===void 0?this.configuration.cacheSearchResultsForSeconds:an,ln=on.abortSignal,Hn=ln===void 0?null:ln;return Kt(this,void 0,void 0,function(){var jn,zn,Wn;return Vt(this,function(ei){jn={},this.configuration.useServerSideSearchCache===!0&&(jn.use_cache=!0);for(zn in rn)Array.isArray(rn[zn])&&(jn[zn]=rn[zn].join(","));return Wn=Object.assign({},rn,jn),[2,this.requestWithCache.perform(this.apiCall,this.apiCall.get,[this.endpointPath("search"),Wn,{abortSignal:Hn}],{cacheResponseForSeconds:$n})]})})},tn.prototype.endpointPath=function(rn){return"".concat(Yr.default.RESOURCEPATH,"/").concat(this.collectionName).concat(Zr).concat(rn===void 0?"":"/"+rn)},Object.defineProperty(tn,"RESOURCEPATH",{get:function(){return Zr},enumerable:!1,configurable:!0}),tn}();return e$J.SearchOnlyDocuments=en,e$J}var y$i;function P$g(){if(y$i)return e$K;y$i=1;var Kt=u$s&&u$s.__extends||function(){var en=function(tn,rn){return en=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nn,on){nn.__proto__=on}||function(nn,on){for(var an in on)Object.prototype.hasOwnProperty.call(on,an)&&(nn[an]=on[an])},en(tn,rn)};return function(tn,rn){if(typeof rn!="function"&&rn!==null)throw new TypeError("Class extends value "+String(rn)+" is not a constructor or null");en(tn,rn);function nn(){this.constructor=tn}tn.prototype=rn===null?Object.create(rn):(nn.prototype=rn.prototype,new nn)}}(),Vt=u$s&&u$s.__awaiter||function(en,tn,rn,nn){function on(an){return an instanceof rn?an:new rn(function($n){$n(an)})}return new(rn||(rn=Promise))(function(an,$n){function ln(zn){try{jn(nn.next(zn))}catch(Wn){$n(Wn)}}function Hn(zn){try{jn(nn.throw(zn))}catch(Wn){$n(Wn)}}function jn(zn){zn.done?an(zn.value):on(zn.value).then(ln,Hn)}jn((nn=nn.apply(en,tn||[])).next())})},Hr=u$s&&u$s.__generator||function(en,tn){var rn={label:0,sent:function(){if(an[0]&1)throw an[1];return an[1]},trys:[],ops:[]},nn,on,an,$n;return $n={next:ln(0),throw:ln(1),return:ln(2)},typeof Symbol=="function"&&($n[Symbol.iterator]=function(){return this}),$n;function ln(jn){return function(zn){return Hn([jn,zn])}}function Hn(jn){if(nn)throw new TypeError("Generator is already executing.");for(;rn;)try{if(nn=1,on&&(an=jn[0]&2?on.return:jn[0]?on.throw||((an=on.return)&&an.call(on),0):on.next)&&!(an=an.call(on,jn[1])).done)return an;switch(on=0,an&&(jn=[jn[0]&2,an.value]),jn[0]){case 0:case 1:an=jn;break;case 4:return rn.label++,{value:jn[1],done:!1};case 5:rn.label++,on=jn[1],jn=[0];continue;case 7:jn=rn.ops.pop(),rn.trys.pop();continue;default:if(an=rn.trys,!(an=an.length>0&&an[an.length-1])&&(jn[0]===6||jn[0]===2)){rn=0;continue}if(jn[0]===3&&(!an||jn[1]>an[0]&&jn[1]<an[3])){rn.label=jn[1];break}if(jn[0]===6&&rn.label<an[1]){rn.label=an[1],an=jn;break}if(an&&rn.label<an[2]){rn.label=an[2],rn.ops.push(jn);break}an[2]&&rn.ops.pop(),rn.trys.pop();continue}jn=tn.call(en,rn)}catch(zn){jn=[6,zn],on=0}finally{nn=an=0}if(jn[0]&5)throw jn[1];return{value:jn[0]?jn[1]:void 0,done:!0}}};Object.defineProperty(e$K,"__esModule",{value:!0});var Wr=N$g(),Yr=x$l(),Zr=function(en){Kt(tn,en);function tn(rn,nn,on){return en.call(this,rn,nn,on)||this}return tn.prototype.create=function(rn,nn){return nn===void 0&&(nn={}),Vt(this,void 0,void 0,function(){return Hr(this,function(on){if(!rn)throw new Error("No document provided");return[2,this.apiCall.post(this.endpointPath(),rn,nn)]})})},tn.prototype.upsert=function(rn,nn){return nn===void 0&&(nn={}),Vt(this,void 0,void 0,function(){return Hr(this,function(on){if(!rn)throw new Error("No document provided");return[2,this.apiCall.post(this.endpointPath(),rn,Object.assign({},nn,{action:"upsert"}))]})})},tn.prototype.update=function(rn,nn){return nn===void 0&&(nn={}),Vt(this,void 0,void 0,function(){return Hr(this,function(on){if(!rn)throw new Error("No document provided");return nn.filter_by!=null?[2,this.apiCall.patch(this.endpointPath(),rn,Object.assign({},nn))]:[2,this.apiCall.post(this.endpointPath(),rn,Object.assign({},nn,{action:"update"}))]})})},tn.prototype.delete=function(rn){return rn===void 0&&(rn={}),Vt(this,void 0,void 0,function(){return Hr(this,function(nn){return typeof rn=="string"?[2,this.apiCall.delete(this.endpointPath(rn),rn)]:[2,this.apiCall.delete(this.endpointPath(),rn)]})})},tn.prototype.createMany=function(rn,nn){return nn===void 0&&(nn={}),Vt(this,void 0,void 0,function(){return Hr(this,function(on){return this.configuration.logger.warn("createMany is deprecated and will be removed in a future version. Use import instead, which now takes both an array of documents or a JSONL string of documents"),[2,this.import(rn,nn)]})})},tn.prototype.import=function(rn,nn){return nn===void 0&&(nn={}),Vt(this,void 0,void 0,function(){var on,an,$n,ln;return Hr(this,function(Hn){switch(Hn.label){case 0:if(Array.isArray(rn))try{on=rn.map(function(jn){return JSON.stringify(jn)}).join(`
`)}catch(jn){throw RangeError instanceof jn&&jn!=null&&jn.includes("Too many properties to enumerate")?new Error("".concat(jn,`
          It looks like you have reached a Node.js limit that restricts the number of keys in an Object: https://stackoverflow.com/questions/9282869/are-there-limits-to-the-number-of-properties-in-a-javascript-object

          Please try reducing the number of keys in your document, or using CURL to import your data.
          `)):new Error(jn)}else on=rn;return[4,this.apiCall.performRequest("post",this.endpointPath("import"),{queryParameters:nn,bodyParameters:on,additionalHeaders:{"Content-Type":"text/plain"},skipConnectionTimeout:!0})];case 1:if(an=Hn.sent(),Array.isArray(rn)){if($n=an.split(`
`).map(function(jn){return JSON.parse(jn)}),ln=$n.filter(function(jn){return jn.success===!1}),ln.length>0)throw new Wr.ImportError("".concat($n.length-ln.length," documents imported successfully, ").concat(ln.length," documents failed during import. Use `error.importResults` from the raised exception to get a detailed error reason for each document."),$n);return[2,$n]}else return[2,an]}})})},tn.prototype.export=function(rn){return rn===void 0&&(rn={}),Vt(this,void 0,void 0,function(){return Hr(this,function(nn){return[2,this.apiCall.get(this.endpointPath("export"),rn)]})})},tn.prototype.exportStream=function(rn){return rn===void 0&&(rn={}),Vt(this,void 0,void 0,function(){return Hr(this,function(nn){return[2,this.apiCall.get(this.endpointPath("export"),rn,{responseType:"stream"})]})})},tn}(Yr.SearchOnlyDocuments);return e$K.default=Zr,e$K}var r$y={},b$h;function x$k(){if(b$h)return r$y;b$h=1;var Kt=u$s&&u$s.__awaiter||function(en,tn,rn,nn){function on(an){return an instanceof rn?an:new rn(function($n){$n(an)})}return new(rn||(rn=Promise))(function(an,$n){function ln(zn){try{jn(nn.next(zn))}catch(Wn){$n(Wn)}}function Hn(zn){try{jn(nn.throw(zn))}catch(Wn){$n(Wn)}}function jn(zn){zn.done?an(zn.value):on(zn.value).then(ln,Hn)}jn((nn=nn.apply(en,tn||[])).next())})},Vt=u$s&&u$s.__generator||function(en,tn){var rn={label:0,sent:function(){if(an[0]&1)throw an[1];return an[1]},trys:[],ops:[]},nn,on,an,$n;return $n={next:ln(0),throw:ln(1),return:ln(2)},typeof Symbol=="function"&&($n[Symbol.iterator]=function(){return this}),$n;function ln(jn){return function(zn){return Hn([jn,zn])}}function Hn(jn){if(nn)throw new TypeError("Generator is already executing.");for(;rn;)try{if(nn=1,on&&(an=jn[0]&2?on.return:jn[0]?on.throw||((an=on.return)&&an.call(on),0):on.next)&&!(an=an.call(on,jn[1])).done)return an;switch(on=0,an&&(jn=[jn[0]&2,an.value]),jn[0]){case 0:case 1:an=jn;break;case 4:return rn.label++,{value:jn[1],done:!1};case 5:rn.label++,on=jn[1],jn=[0];continue;case 7:jn=rn.ops.pop(),rn.trys.pop();continue;default:if(an=rn.trys,!(an=an.length>0&&an[an.length-1])&&(jn[0]===6||jn[0]===2)){rn=0;continue}if(jn[0]===3&&(!an||jn[1]>an[0]&&jn[1]<an[3])){rn.label=jn[1];break}if(jn[0]===6&&rn.label<an[1]){rn.label=an[1],an=jn;break}if(an&&rn.label<an[2]){rn.label=an[2],rn.ops.push(jn);break}an[2]&&rn.ops.pop(),rn.trys.pop();continue}jn=tn.call(en,rn)}catch(zn){jn=[6,zn],on=0}finally{nn=an=0}if(jn[0]&5)throw jn[1];return{value:jn[0]?jn[1]:void 0,done:!0}}},Hr=u$s&&u$s.__importDefault||function(en){return en&&en.__esModule?en:{default:en}};Object.defineProperty(r$y,"__esModule",{value:!0});var Wr=Hr(p$p()),Yr="/overrides",Zr=function(){function en(tn,rn){this.collectionName=tn,this.apiCall=rn}return en.prototype.upsert=function(tn,rn){return Kt(this,void 0,void 0,function(){return Vt(this,function(nn){return[2,this.apiCall.put(this.endpointPath(tn),rn)]})})},en.prototype.retrieve=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(tn){return[2,this.apiCall.get(this.endpointPath())]})})},en.prototype.endpointPath=function(tn){return"".concat(Wr.default.RESOURCEPATH,"/").concat(this.collectionName).concat(en.RESOURCEPATH).concat(tn===void 0?"":"/"+tn)},Object.defineProperty(en,"RESOURCEPATH",{get:function(){return Yr},enumerable:!1,configurable:!0}),en}();return r$y.default=Zr,r$y}var r$x={},b$g;function g$p(){if(b$g)return r$x;b$g=1;var Kt=u$s&&u$s.__awaiter||function(en,tn,rn,nn){function on(an){return an instanceof rn?an:new rn(function($n){$n(an)})}return new(rn||(rn=Promise))(function(an,$n){function ln(zn){try{jn(nn.next(zn))}catch(Wn){$n(Wn)}}function Hn(zn){try{jn(nn.throw(zn))}catch(Wn){$n(Wn)}}function jn(zn){zn.done?an(zn.value):on(zn.value).then(ln,Hn)}jn((nn=nn.apply(en,tn||[])).next())})},Vt=u$s&&u$s.__generator||function(en,tn){var rn={label:0,sent:function(){if(an[0]&1)throw an[1];return an[1]},trys:[],ops:[]},nn,on,an,$n;return $n={next:ln(0),throw:ln(1),return:ln(2)},typeof Symbol=="function"&&($n[Symbol.iterator]=function(){return this}),$n;function ln(jn){return function(zn){return Hn([jn,zn])}}function Hn(jn){if(nn)throw new TypeError("Generator is already executing.");for(;rn;)try{if(nn=1,on&&(an=jn[0]&2?on.return:jn[0]?on.throw||((an=on.return)&&an.call(on),0):on.next)&&!(an=an.call(on,jn[1])).done)return an;switch(on=0,an&&(jn=[jn[0]&2,an.value]),jn[0]){case 0:case 1:an=jn;break;case 4:return rn.label++,{value:jn[1],done:!1};case 5:rn.label++,on=jn[1],jn=[0];continue;case 7:jn=rn.ops.pop(),rn.trys.pop();continue;default:if(an=rn.trys,!(an=an.length>0&&an[an.length-1])&&(jn[0]===6||jn[0]===2)){rn=0;continue}if(jn[0]===3&&(!an||jn[1]>an[0]&&jn[1]<an[3])){rn.label=jn[1];break}if(jn[0]===6&&rn.label<an[1]){rn.label=an[1],an=jn;break}if(an&&rn.label<an[2]){rn.label=an[2],rn.ops.push(jn);break}an[2]&&rn.ops.pop(),rn.trys.pop();continue}jn=tn.call(en,rn)}catch(zn){jn=[6,zn],on=0}finally{nn=an=0}if(jn[0]&5)throw jn[1];return{value:jn[0]?jn[1]:void 0,done:!0}}},Hr=u$s&&u$s.__importDefault||function(en){return en&&en.__esModule?en:{default:en}};Object.defineProperty(r$x,"__esModule",{value:!0});var Wr=Hr(p$p()),Yr=Hr(x$k()),Zr=function(){function en(tn,rn,nn){this.collectionName=tn,this.overrideId=rn,this.apiCall=nn}return en.prototype.retrieve=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(tn){return[2,this.apiCall.get(this.endpointPath())]})})},en.prototype.delete=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(tn){return[2,this.apiCall.delete(this.endpointPath())]})})},en.prototype.endpointPath=function(){return"".concat(Wr.default.RESOURCEPATH,"/").concat(this.collectionName).concat(Yr.default.RESOURCEPATH,"/").concat(this.overrideId)},en}();return r$x.default=Zr,r$x}var o$D={},b$f;function x$j(){if(b$f)return o$D;b$f=1;var Kt=u$s&&u$s.__awaiter||function(en,tn,rn,nn){function on(an){return an instanceof rn?an:new rn(function($n){$n(an)})}return new(rn||(rn=Promise))(function(an,$n){function ln(zn){try{jn(nn.next(zn))}catch(Wn){$n(Wn)}}function Hn(zn){try{jn(nn.throw(zn))}catch(Wn){$n(Wn)}}function jn(zn){zn.done?an(zn.value):on(zn.value).then(ln,Hn)}jn((nn=nn.apply(en,tn||[])).next())})},Vt=u$s&&u$s.__generator||function(en,tn){var rn={label:0,sent:function(){if(an[0]&1)throw an[1];return an[1]},trys:[],ops:[]},nn,on,an,$n;return $n={next:ln(0),throw:ln(1),return:ln(2)},typeof Symbol=="function"&&($n[Symbol.iterator]=function(){return this}),$n;function ln(jn){return function(zn){return Hn([jn,zn])}}function Hn(jn){if(nn)throw new TypeError("Generator is already executing.");for(;rn;)try{if(nn=1,on&&(an=jn[0]&2?on.return:jn[0]?on.throw||((an=on.return)&&an.call(on),0):on.next)&&!(an=an.call(on,jn[1])).done)return an;switch(on=0,an&&(jn=[jn[0]&2,an.value]),jn[0]){case 0:case 1:an=jn;break;case 4:return rn.label++,{value:jn[1],done:!1};case 5:rn.label++,on=jn[1],jn=[0];continue;case 7:jn=rn.ops.pop(),rn.trys.pop();continue;default:if(an=rn.trys,!(an=an.length>0&&an[an.length-1])&&(jn[0]===6||jn[0]===2)){rn=0;continue}if(jn[0]===3&&(!an||jn[1]>an[0]&&jn[1]<an[3])){rn.label=jn[1];break}if(jn[0]===6&&rn.label<an[1]){rn.label=an[1],an=jn;break}if(an&&rn.label<an[2]){rn.label=an[2],rn.ops.push(jn);break}an[2]&&rn.ops.pop(),rn.trys.pop();continue}jn=tn.call(en,rn)}catch(zn){jn=[6,zn],on=0}finally{nn=an=0}if(jn[0]&5)throw jn[1];return{value:jn[0]?jn[1]:void 0,done:!0}}},Hr=u$s&&u$s.__importDefault||function(en){return en&&en.__esModule?en:{default:en}};Object.defineProperty(o$D,"__esModule",{value:!0});var Wr=Hr(p$p()),Yr="/synonyms",Zr=function(){function en(tn,rn){this.collectionName=tn,this.apiCall=rn}return en.prototype.upsert=function(tn,rn){return Kt(this,void 0,void 0,function(){return Vt(this,function(nn){return[2,this.apiCall.put(this.endpointPath(tn),rn)]})})},en.prototype.retrieve=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(tn){return[2,this.apiCall.get(this.endpointPath())]})})},en.prototype.endpointPath=function(tn){return"".concat(Wr.default.RESOURCEPATH,"/").concat(this.collectionName).concat(en.RESOURCEPATH).concat(tn===void 0?"":"/"+tn)},Object.defineProperty(en,"RESOURCEPATH",{get:function(){return Yr},enumerable:!1,configurable:!0}),en}();return o$D.default=Zr,o$D}var o$C={},v$n;function g$o(){if(v$n)return o$C;v$n=1;var Kt=u$s&&u$s.__awaiter||function(en,tn,rn,nn){function on(an){return an instanceof rn?an:new rn(function($n){$n(an)})}return new(rn||(rn=Promise))(function(an,$n){function ln(zn){try{jn(nn.next(zn))}catch(Wn){$n(Wn)}}function Hn(zn){try{jn(nn.throw(zn))}catch(Wn){$n(Wn)}}function jn(zn){zn.done?an(zn.value):on(zn.value).then(ln,Hn)}jn((nn=nn.apply(en,tn||[])).next())})},Vt=u$s&&u$s.__generator||function(en,tn){var rn={label:0,sent:function(){if(an[0]&1)throw an[1];return an[1]},trys:[],ops:[]},nn,on,an,$n;return $n={next:ln(0),throw:ln(1),return:ln(2)},typeof Symbol=="function"&&($n[Symbol.iterator]=function(){return this}),$n;function ln(jn){return function(zn){return Hn([jn,zn])}}function Hn(jn){if(nn)throw new TypeError("Generator is already executing.");for(;rn;)try{if(nn=1,on&&(an=jn[0]&2?on.return:jn[0]?on.throw||((an=on.return)&&an.call(on),0):on.next)&&!(an=an.call(on,jn[1])).done)return an;switch(on=0,an&&(jn=[jn[0]&2,an.value]),jn[0]){case 0:case 1:an=jn;break;case 4:return rn.label++,{value:jn[1],done:!1};case 5:rn.label++,on=jn[1],jn=[0];continue;case 7:jn=rn.ops.pop(),rn.trys.pop();continue;default:if(an=rn.trys,!(an=an.length>0&&an[an.length-1])&&(jn[0]===6||jn[0]===2)){rn=0;continue}if(jn[0]===3&&(!an||jn[1]>an[0]&&jn[1]<an[3])){rn.label=jn[1];break}if(jn[0]===6&&rn.label<an[1]){rn.label=an[1],an=jn;break}if(an&&rn.label<an[2]){rn.label=an[2],rn.ops.push(jn);break}an[2]&&rn.ops.pop(),rn.trys.pop();continue}jn=tn.call(en,rn)}catch(zn){jn=[6,zn],on=0}finally{nn=an=0}if(jn[0]&5)throw jn[1];return{value:jn[0]?jn[1]:void 0,done:!0}}},Hr=u$s&&u$s.__importDefault||function(en){return en&&en.__esModule?en:{default:en}};Object.defineProperty(o$C,"__esModule",{value:!0});var Wr=Hr(p$p()),Yr=Hr(x$j()),Zr=function(){function en(tn,rn,nn){this.collectionName=tn,this.synonymId=rn,this.apiCall=nn}return en.prototype.retrieve=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(tn){return[2,this.apiCall.get(this.endpointPath())]})})},en.prototype.delete=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(tn){return[2,this.apiCall.delete(this.endpointPath())]})})},en.prototype.endpointPath=function(){return"".concat(Wr.default.RESOURCEPATH,"/").concat(this.collectionName).concat(Yr.default.RESOURCEPATH,"/").concat(this.synonymId)},en}();return o$C.default=Zr,o$C}var e$H={},p$o;function R$9(){if(p$o)return e$H;p$o=1;var Kt=u$s&&u$s.__awaiter||function(en,tn,rn,nn){function on(an){return an instanceof rn?an:new rn(function($n){$n(an)})}return new(rn||(rn=Promise))(function(an,$n){function ln(zn){try{jn(nn.next(zn))}catch(Wn){$n(Wn)}}function Hn(zn){try{jn(nn.throw(zn))}catch(Wn){$n(Wn)}}function jn(zn){zn.done?an(zn.value):on(zn.value).then(ln,Hn)}jn((nn=nn.apply(en,tn||[])).next())})},Vt=u$s&&u$s.__generator||function(en,tn){var rn={label:0,sent:function(){if(an[0]&1)throw an[1];return an[1]},trys:[],ops:[]},nn,on,an,$n;return $n={next:ln(0),throw:ln(1),return:ln(2)},typeof Symbol=="function"&&($n[Symbol.iterator]=function(){return this}),$n;function ln(jn){return function(zn){return Hn([jn,zn])}}function Hn(jn){if(nn)throw new TypeError("Generator is already executing.");for(;rn;)try{if(nn=1,on&&(an=jn[0]&2?on.return:jn[0]?on.throw||((an=on.return)&&an.call(on),0):on.next)&&!(an=an.call(on,jn[1])).done)return an;switch(on=0,an&&(jn=[jn[0]&2,an.value]),jn[0]){case 0:case 1:an=jn;break;case 4:return rn.label++,{value:jn[1],done:!1};case 5:rn.label++,on=jn[1],jn=[0];continue;case 7:jn=rn.ops.pop(),rn.trys.pop();continue;default:if(an=rn.trys,!(an=an.length>0&&an[an.length-1])&&(jn[0]===6||jn[0]===2)){rn=0;continue}if(jn[0]===3&&(!an||jn[1]>an[0]&&jn[1]<an[3])){rn.label=jn[1];break}if(jn[0]===6&&rn.label<an[1]){rn.label=an[1],an=jn;break}if(an&&rn.label<an[2]){rn.label=an[2],rn.ops.push(jn);break}an[2]&&rn.ops.pop(),rn.trys.pop();continue}jn=tn.call(en,rn)}catch(zn){jn=[6,zn],on=0}finally{nn=an=0}if(jn[0]&5)throw jn[1];return{value:jn[0]?jn[1]:void 0,done:!0}}},Hr=u$s&&u$s.__importDefault||function(en){return en&&en.__esModule?en:{default:en}};Object.defineProperty(e$H,"__esModule",{value:!0}),e$H.Document=void 0;var Wr=Hr(p$p()),Yr=Hr(P$g()),Zr=function(){function en(tn,rn,nn){this.collectionName=tn,this.documentId=rn,this.apiCall=nn}return en.prototype.retrieve=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(tn){return[2,this.apiCall.get(this.endpointPath())]})})},en.prototype.delete=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(tn){return[2,this.apiCall.delete(this.endpointPath())]})})},en.prototype.update=function(tn,rn){return rn===void 0&&(rn={}),Kt(this,void 0,void 0,function(){return Vt(this,function(nn){return[2,this.apiCall.patch(this.endpointPath(),tn,rn)]})})},en.prototype.endpointPath=function(){return"".concat(Wr.default.RESOURCEPATH,"/").concat(this.collectionName).concat(Yr.default.RESOURCEPATH,"/").concat(this.documentId)},en}();return e$H.Document=Zr,e$H}var p$n;function K$8(){if(p$n)return o$E;p$n=1;var Kt=u$s&&u$s.__awaiter||function($n,ln,Hn,jn){function zn(Wn){return Wn instanceof Hn?Wn:new Hn(function(ei){ei(Wn)})}return new(Hn||(Hn=Promise))(function(Wn,ei){function $i(Ts){try{Ni(jn.next(Ts))}catch(ps){ei(ps)}}function Mi(Ts){try{Ni(jn.throw(Ts))}catch(ps){ei(ps)}}function Ni(Ts){Ts.done?Wn(Ts.value):zn(Ts.value).then($i,Mi)}Ni((jn=jn.apply($n,ln||[])).next())})},Vt=u$s&&u$s.__generator||function($n,ln){var Hn={label:0,sent:function(){if(Wn[0]&1)throw Wn[1];return Wn[1]},trys:[],ops:[]},jn,zn,Wn,ei;return ei={next:$i(0),throw:$i(1),return:$i(2)},typeof Symbol=="function"&&(ei[Symbol.iterator]=function(){return this}),ei;function $i(Ni){return function(Ts){return Mi([Ni,Ts])}}function Mi(Ni){if(jn)throw new TypeError("Generator is already executing.");for(;Hn;)try{if(jn=1,zn&&(Wn=Ni[0]&2?zn.return:Ni[0]?zn.throw||((Wn=zn.return)&&Wn.call(zn),0):zn.next)&&!(Wn=Wn.call(zn,Ni[1])).done)return Wn;switch(zn=0,Wn&&(Ni=[Ni[0]&2,Wn.value]),Ni[0]){case 0:case 1:Wn=Ni;break;case 4:return Hn.label++,{value:Ni[1],done:!1};case 5:Hn.label++,zn=Ni[1],Ni=[0];continue;case 7:Ni=Hn.ops.pop(),Hn.trys.pop();continue;default:if(Wn=Hn.trys,!(Wn=Wn.length>0&&Wn[Wn.length-1])&&(Ni[0]===6||Ni[0]===2)){Hn=0;continue}if(Ni[0]===3&&(!Wn||Ni[1]>Wn[0]&&Ni[1]<Wn[3])){Hn.label=Ni[1];break}if(Ni[0]===6&&Hn.label<Wn[1]){Hn.label=Wn[1],Wn=Ni;break}if(Wn&&Hn.label<Wn[2]){Hn.label=Wn[2],Hn.ops.push(Ni);break}Wn[2]&&Hn.ops.pop(),Hn.trys.pop();continue}Ni=ln.call($n,Hn)}catch(Ts){Ni=[6,Ts],zn=0}finally{jn=Wn=0}if(Ni[0]&5)throw Ni[1];return{value:Ni[0]?Ni[1]:void 0,done:!0}}},Hr=u$s&&u$s.__importDefault||function($n){return $n&&$n.__esModule?$n:{default:$n}};Object.defineProperty(o$E,"__esModule",{value:!0});var Wr=Hr(p$p()),Yr=Hr(P$g()),Zr=N$g(),en=Hr(x$k()),tn=Hr(g$p()),rn=Hr(x$j()),nn=Hr(g$o()),on=R$9(),an=function(){function $n(ln,Hn,jn){this.name=ln,this.apiCall=Hn,this.configuration=jn,this.individualDocuments={},this.individualOverrides={},this.individualSynonyms={},this.name=ln,this.apiCall=Hn,this.configuration=jn,this._documents=new Yr.default(this.name,this.apiCall,this.configuration),this._overrides=new en.default(this.name,this.apiCall),this._synonyms=new rn.default(this.name,this.apiCall)}return $n.prototype.retrieve=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(ln){return[2,this.apiCall.get(this.endpointPath())]})})},$n.prototype.update=function(ln){return Kt(this,void 0,void 0,function(){return Vt(this,function(Hn){return[2,this.apiCall.patch(this.endpointPath(),ln)]})})},$n.prototype.delete=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(ln){return[2,this.apiCall.delete(this.endpointPath())]})})},$n.prototype.exists=function(){return Kt(this,void 0,void 0,function(){var ln;return Vt(this,function(Hn){switch(Hn.label){case 0:return Hn.trys.push([0,2,,3]),[4,this.retrieve()];case 1:return Hn.sent(),[2,!0];case 2:if(ln=Hn.sent(),ln instanceof Zr.ObjectNotFound)return[2,!1];throw ln;case 3:return[2]}})})},$n.prototype.documents=function(ln){return ln?(this.individualDocuments[ln]===void 0&&(this.individualDocuments[ln]=new on.Document(this.name,ln,this.apiCall)),this.individualDocuments[ln]):this._documents},$n.prototype.overrides=function(ln){return ln===void 0?this._overrides:(this.individualOverrides[ln]===void 0&&(this.individualOverrides[ln]=new tn.default(this.name,ln,this.apiCall)),this.individualOverrides[ln])},$n.prototype.synonyms=function(ln){return ln===void 0?this._synonyms:(this.individualSynonyms[ln]===void 0&&(this.individualSynonyms[ln]=new nn.default(this.name,ln,this.apiCall)),this.individualSynonyms[ln])},$n.prototype.endpointPath=function(){return"".concat(Wr.default.RESOURCEPATH,"/").concat(this.name)},$n}();return o$E.default=an,o$E}var s$e={},_$k;function A$d(){if(_$k)return s$e;_$k=1;var Kt=u$s&&u$s.__awaiter||function(Yr,Zr,en,tn){function rn(nn){return nn instanceof en?nn:new en(function(on){on(nn)})}return new(en||(en=Promise))(function(nn,on){function an(Hn){try{ln(tn.next(Hn))}catch(jn){on(jn)}}function $n(Hn){try{ln(tn.throw(Hn))}catch(jn){on(jn)}}function ln(Hn){Hn.done?nn(Hn.value):rn(Hn.value).then(an,$n)}ln((tn=tn.apply(Yr,Zr||[])).next())})},Vt=u$s&&u$s.__generator||function(Yr,Zr){var en={label:0,sent:function(){if(nn[0]&1)throw nn[1];return nn[1]},trys:[],ops:[]},tn,rn,nn,on;return on={next:an(0),throw:an(1),return:an(2)},typeof Symbol=="function"&&(on[Symbol.iterator]=function(){return this}),on;function an(ln){return function(Hn){return $n([ln,Hn])}}function $n(ln){if(tn)throw new TypeError("Generator is already executing.");for(;en;)try{if(tn=1,rn&&(nn=ln[0]&2?rn.return:ln[0]?rn.throw||((nn=rn.return)&&nn.call(rn),0):rn.next)&&!(nn=nn.call(rn,ln[1])).done)return nn;switch(rn=0,nn&&(ln=[ln[0]&2,nn.value]),ln[0]){case 0:case 1:nn=ln;break;case 4:return en.label++,{value:ln[1],done:!1};case 5:en.label++,rn=ln[1],ln=[0];continue;case 7:ln=en.ops.pop(),en.trys.pop();continue;default:if(nn=en.trys,!(nn=nn.length>0&&nn[nn.length-1])&&(ln[0]===6||ln[0]===2)){en=0;continue}if(ln[0]===3&&(!nn||ln[1]>nn[0]&&ln[1]<nn[3])){en.label=ln[1];break}if(ln[0]===6&&en.label<nn[1]){en.label=nn[1],nn=ln;break}if(nn&&en.label<nn[2]){en.label=nn[2],en.ops.push(ln);break}nn[2]&&en.ops.pop(),en.trys.pop();continue}ln=Zr.call(Yr,en)}catch(Hn){ln=[6,Hn],rn=0}finally{tn=nn=0}if(ln[0]&5)throw ln[1];return{value:ln[0]?ln[1]:void 0,done:!0}}};Object.defineProperty(s$e,"__esModule",{value:!0});var Hr="/aliases",Wr=function(){function Yr(Zr){this.apiCall=Zr}return Yr.prototype.upsert=function(Zr,en){return Kt(this,void 0,void 0,function(){return Vt(this,function(tn){return[2,this.apiCall.put(this.endpointPath(Zr),en)]})})},Yr.prototype.retrieve=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(Zr){return[2,this.apiCall.get(Hr)]})})},Yr.prototype.endpointPath=function(Zr){return"".concat(Yr.RESOURCEPATH,"/").concat(Zr)},Object.defineProperty(Yr,"RESOURCEPATH",{get:function(){return Hr},enumerable:!1,configurable:!0}),Yr}();return s$e.default=Wr,s$e}var a$A={},v$m;function g$n(){if(v$m)return a$A;v$m=1;var Kt=u$s&&u$s.__awaiter||function(Zr,en,tn,rn){function nn(on){return on instanceof tn?on:new tn(function(an){an(on)})}return new(tn||(tn=Promise))(function(on,an){function $n(jn){try{Hn(rn.next(jn))}catch(zn){an(zn)}}function ln(jn){try{Hn(rn.throw(jn))}catch(zn){an(zn)}}function Hn(jn){jn.done?on(jn.value):nn(jn.value).then($n,ln)}Hn((rn=rn.apply(Zr,en||[])).next())})},Vt=u$s&&u$s.__generator||function(Zr,en){var tn={label:0,sent:function(){if(on[0]&1)throw on[1];return on[1]},trys:[],ops:[]},rn,nn,on,an;return an={next:$n(0),throw:$n(1),return:$n(2)},typeof Symbol=="function"&&(an[Symbol.iterator]=function(){return this}),an;function $n(Hn){return function(jn){return ln([Hn,jn])}}function ln(Hn){if(rn)throw new TypeError("Generator is already executing.");for(;tn;)try{if(rn=1,nn&&(on=Hn[0]&2?nn.return:Hn[0]?nn.throw||((on=nn.return)&&on.call(nn),0):nn.next)&&!(on=on.call(nn,Hn[1])).done)return on;switch(nn=0,on&&(Hn=[Hn[0]&2,on.value]),Hn[0]){case 0:case 1:on=Hn;break;case 4:return tn.label++,{value:Hn[1],done:!1};case 5:tn.label++,nn=Hn[1],Hn=[0];continue;case 7:Hn=tn.ops.pop(),tn.trys.pop();continue;default:if(on=tn.trys,!(on=on.length>0&&on[on.length-1])&&(Hn[0]===6||Hn[0]===2)){tn=0;continue}if(Hn[0]===3&&(!on||Hn[1]>on[0]&&Hn[1]<on[3])){tn.label=Hn[1];break}if(Hn[0]===6&&tn.label<on[1]){tn.label=on[1],on=Hn;break}if(on&&tn.label<on[2]){tn.label=on[2],tn.ops.push(Hn);break}on[2]&&tn.ops.pop(),tn.trys.pop();continue}Hn=en.call(Zr,tn)}catch(jn){Hn=[6,jn],nn=0}finally{rn=on=0}if(Hn[0]&5)throw Hn[1];return{value:Hn[0]?Hn[1]:void 0,done:!0}}},Hr=u$s&&u$s.__importDefault||function(Zr){return Zr&&Zr.__esModule?Zr:{default:Zr}};Object.defineProperty(a$A,"__esModule",{value:!0});var Wr=Hr(A$d()),Yr=function(){function Zr(en,tn){this.name=en,this.apiCall=tn}return Zr.prototype.retrieve=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(en){return[2,this.apiCall.get(this.endpointPath())]})})},Zr.prototype.delete=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(en){return[2,this.apiCall.delete(this.endpointPath())]})})},Zr.prototype.endpointPath=function(){return"".concat(Wr.default.RESOURCEPATH,"/").concat(this.name)},Zr}();return a$A.default=Yr,a$A}var e$G={};const e$E={},e$F=Object.freeze(Object.defineProperty({__proto__:null,default:e$E},Symbol.toStringTag,{value:"Module"})),o$B=l$n(e$F);var _$j;function E$c(){if(_$j)return e$G;_$j=1;var Kt=u$s&&u$s.__awaiter||function(Zr,en,tn,rn){function nn(on){return on instanceof tn?on:new tn(function(an){an(on)})}return new(tn||(tn=Promise))(function(on,an){function $n(jn){try{Hn(rn.next(jn))}catch(zn){an(zn)}}function ln(jn){try{Hn(rn.throw(jn))}catch(zn){an(zn)}}function Hn(jn){jn.done?on(jn.value):nn(jn.value).then($n,ln)}Hn((rn=rn.apply(Zr,en||[])).next())})},Vt=u$s&&u$s.__generator||function(Zr,en){var tn={label:0,sent:function(){if(on[0]&1)throw on[1];return on[1]},trys:[],ops:[]},rn,nn,on,an;return an={next:$n(0),throw:$n(1),return:$n(2)},typeof Symbol=="function"&&(an[Symbol.iterator]=function(){return this}),an;function $n(Hn){return function(jn){return ln([Hn,jn])}}function ln(Hn){if(rn)throw new TypeError("Generator is already executing.");for(;tn;)try{if(rn=1,nn&&(on=Hn[0]&2?nn.return:Hn[0]?nn.throw||((on=nn.return)&&on.call(nn),0):nn.next)&&!(on=on.call(nn,Hn[1])).done)return on;switch(nn=0,on&&(Hn=[Hn[0]&2,on.value]),Hn[0]){case 0:case 1:on=Hn;break;case 4:return tn.label++,{value:Hn[1],done:!1};case 5:tn.label++,nn=Hn[1],Hn=[0];continue;case 7:Hn=tn.ops.pop(),tn.trys.pop();continue;default:if(on=tn.trys,!(on=on.length>0&&on[on.length-1])&&(Hn[0]===6||Hn[0]===2)){tn=0;continue}if(Hn[0]===3&&(!on||Hn[1]>on[0]&&Hn[1]<on[3])){tn.label=Hn[1];break}if(Hn[0]===6&&tn.label<on[1]){tn.label=on[1],on=Hn;break}if(on&&tn.label<on[2]){tn.label=on[2],tn.ops.push(Hn);break}on[2]&&tn.ops.pop(),tn.trys.pop();continue}Hn=en.call(Zr,tn)}catch(jn){Hn=[6,jn],nn=0}finally{rn=on=0}if(Hn[0]&5)throw Hn[1];return{value:Hn[0]?Hn[1]:void 0,done:!0}}};Object.defineProperty(e$G,"__esModule",{value:!0});var Hr=o$B,Wr="/keys",Yr=function(){function Zr(en){this.apiCall=en,this.apiCall=en}return Zr.prototype.create=function(en){return Kt(this,void 0,void 0,function(){return Vt(this,function(tn){return[2,this.apiCall.post(Zr.RESOURCEPATH,en)]})})},Zr.prototype.retrieve=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(en){return[2,this.apiCall.get(Wr)]})})},Zr.prototype.generateScopedSearchKey=function(en,tn){var rn=JSON.stringify(tn),nn=Buffer.from((0,Hr.createHmac)("sha256",en).update(rn).digest("base64")),on=en.substr(0,4),an="".concat(nn).concat(on).concat(rn);return Buffer.from(an).toString("base64")},Object.defineProperty(Zr,"RESOURCEPATH",{get:function(){return Wr},enumerable:!1,configurable:!0}),Zr}();return e$G.default=Yr,e$G}var e$D={},v$l;function g$m(){if(v$l)return e$D;v$l=1;var Kt=u$s&&u$s.__awaiter||function(Zr,en,tn,rn){function nn(on){return on instanceof tn?on:new tn(function(an){an(on)})}return new(tn||(tn=Promise))(function(on,an){function $n(jn){try{Hn(rn.next(jn))}catch(zn){an(zn)}}function ln(jn){try{Hn(rn.throw(jn))}catch(zn){an(zn)}}function Hn(jn){jn.done?on(jn.value):nn(jn.value).then($n,ln)}Hn((rn=rn.apply(Zr,en||[])).next())})},Vt=u$s&&u$s.__generator||function(Zr,en){var tn={label:0,sent:function(){if(on[0]&1)throw on[1];return on[1]},trys:[],ops:[]},rn,nn,on,an;return an={next:$n(0),throw:$n(1),return:$n(2)},typeof Symbol=="function"&&(an[Symbol.iterator]=function(){return this}),an;function $n(Hn){return function(jn){return ln([Hn,jn])}}function ln(Hn){if(rn)throw new TypeError("Generator is already executing.");for(;tn;)try{if(rn=1,nn&&(on=Hn[0]&2?nn.return:Hn[0]?nn.throw||((on=nn.return)&&on.call(nn),0):nn.next)&&!(on=on.call(nn,Hn[1])).done)return on;switch(nn=0,on&&(Hn=[Hn[0]&2,on.value]),Hn[0]){case 0:case 1:on=Hn;break;case 4:return tn.label++,{value:Hn[1],done:!1};case 5:tn.label++,nn=Hn[1],Hn=[0];continue;case 7:Hn=tn.ops.pop(),tn.trys.pop();continue;default:if(on=tn.trys,!(on=on.length>0&&on[on.length-1])&&(Hn[0]===6||Hn[0]===2)){tn=0;continue}if(Hn[0]===3&&(!on||Hn[1]>on[0]&&Hn[1]<on[3])){tn.label=Hn[1];break}if(Hn[0]===6&&tn.label<on[1]){tn.label=on[1],on=Hn;break}if(on&&tn.label<on[2]){tn.label=on[2],tn.ops.push(Hn);break}on[2]&&tn.ops.pop(),tn.trys.pop();continue}Hn=en.call(Zr,tn)}catch(jn){Hn=[6,jn],nn=0}finally{rn=on=0}if(Hn[0]&5)throw Hn[1];return{value:Hn[0]?Hn[1]:void 0,done:!0}}},Hr=u$s&&u$s.__importDefault||function(Zr){return Zr&&Zr.__esModule?Zr:{default:Zr}};Object.defineProperty(e$D,"__esModule",{value:!0});var Wr=Hr(E$c()),Yr=function(){function Zr(en,tn){this.id=en,this.apiCall=tn}return Zr.prototype.retrieve=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(en){return[2,this.apiCall.get(this.endpointPath())]})})},Zr.prototype.delete=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(en){return[2,this.apiCall.delete(this.endpointPath())]})})},Zr.prototype.endpointPath=function(){return"".concat(Wr.default.RESOURCEPATH,"/").concat(this.id)},Zr}();return e$D.default=Yr,e$D}var e$C={},d$u;function x$i(){if(d$u)return e$C;d$u=1;var Kt=u$s&&u$s.__awaiter||function(Yr,Zr,en,tn){function rn(nn){return nn instanceof en?nn:new en(function(on){on(nn)})}return new(en||(en=Promise))(function(nn,on){function an(Hn){try{ln(tn.next(Hn))}catch(jn){on(jn)}}function $n(Hn){try{ln(tn.throw(Hn))}catch(jn){on(jn)}}function ln(Hn){Hn.done?nn(Hn.value):rn(Hn.value).then(an,$n)}ln((tn=tn.apply(Yr,Zr||[])).next())})},Vt=u$s&&u$s.__generator||function(Yr,Zr){var en={label:0,sent:function(){if(nn[0]&1)throw nn[1];return nn[1]},trys:[],ops:[]},tn,rn,nn,on;return on={next:an(0),throw:an(1),return:an(2)},typeof Symbol=="function"&&(on[Symbol.iterator]=function(){return this}),on;function an(ln){return function(Hn){return $n([ln,Hn])}}function $n(ln){if(tn)throw new TypeError("Generator is already executing.");for(;en;)try{if(tn=1,rn&&(nn=ln[0]&2?rn.return:ln[0]?rn.throw||((nn=rn.return)&&nn.call(rn),0):rn.next)&&!(nn=nn.call(rn,ln[1])).done)return nn;switch(rn=0,nn&&(ln=[ln[0]&2,nn.value]),ln[0]){case 0:case 1:nn=ln;break;case 4:return en.label++,{value:ln[1],done:!1};case 5:en.label++,rn=ln[1],ln=[0];continue;case 7:ln=en.ops.pop(),en.trys.pop();continue;default:if(nn=en.trys,!(nn=nn.length>0&&nn[nn.length-1])&&(ln[0]===6||ln[0]===2)){en=0;continue}if(ln[0]===3&&(!nn||ln[1]>nn[0]&&ln[1]<nn[3])){en.label=ln[1];break}if(ln[0]===6&&en.label<nn[1]){en.label=nn[1],nn=ln;break}if(nn&&en.label<nn[2]){en.label=nn[2],en.ops.push(ln);break}nn[2]&&en.ops.pop(),en.trys.pop();continue}ln=Zr.call(Yr,en)}catch(Hn){ln=[6,Hn],rn=0}finally{tn=nn=0}if(ln[0]&5)throw ln[1];return{value:ln[0]?ln[1]:void 0,done:!0}}};Object.defineProperty(e$C,"__esModule",{value:!0});var Hr="/debug",Wr=function(){function Yr(Zr){this.apiCall=Zr}return Yr.prototype.retrieve=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(Zr){return[2,this.apiCall.get(Hr)]})})},Yr}();return e$C.default=Wr,e$C}var r$w={},y$h;function M$k(){if(y$h)return r$w;y$h=1;var Kt=u$s&&u$s.__awaiter||function(Yr,Zr,en,tn){function rn(nn){return nn instanceof en?nn:new en(function(on){on(nn)})}return new(en||(en=Promise))(function(nn,on){function an(Hn){try{ln(tn.next(Hn))}catch(jn){on(jn)}}function $n(Hn){try{ln(tn.throw(Hn))}catch(jn){on(jn)}}function ln(Hn){Hn.done?nn(Hn.value):rn(Hn.value).then(an,$n)}ln((tn=tn.apply(Yr,Zr||[])).next())})},Vt=u$s&&u$s.__generator||function(Yr,Zr){var en={label:0,sent:function(){if(nn[0]&1)throw nn[1];return nn[1]},trys:[],ops:[]},tn,rn,nn,on;return on={next:an(0),throw:an(1),return:an(2)},typeof Symbol=="function"&&(on[Symbol.iterator]=function(){return this}),on;function an(ln){return function(Hn){return $n([ln,Hn])}}function $n(ln){if(tn)throw new TypeError("Generator is already executing.");for(;en;)try{if(tn=1,rn&&(nn=ln[0]&2?rn.return:ln[0]?rn.throw||((nn=rn.return)&&nn.call(rn),0):rn.next)&&!(nn=nn.call(rn,ln[1])).done)return nn;switch(rn=0,nn&&(ln=[ln[0]&2,nn.value]),ln[0]){case 0:case 1:nn=ln;break;case 4:return en.label++,{value:ln[1],done:!1};case 5:en.label++,rn=ln[1],ln=[0];continue;case 7:ln=en.ops.pop(),en.trys.pop();continue;default:if(nn=en.trys,!(nn=nn.length>0&&nn[nn.length-1])&&(ln[0]===6||ln[0]===2)){en=0;continue}if(ln[0]===3&&(!nn||ln[1]>nn[0]&&ln[1]<nn[3])){en.label=ln[1];break}if(ln[0]===6&&en.label<nn[1]){en.label=nn[1],nn=ln;break}if(nn&&en.label<nn[2]){en.label=nn[2],en.ops.push(ln);break}nn[2]&&en.ops.pop(),en.trys.pop();continue}ln=Zr.call(Yr,en)}catch(Hn){ln=[6,Hn],rn=0}finally{tn=nn=0}if(ln[0]&5)throw ln[1];return{value:ln[0]?ln[1]:void 0,done:!0}}};Object.defineProperty(r$w,"__esModule",{value:!0});var Hr="/metrics.json",Wr=function(){function Yr(Zr){this.apiCall=Zr}return Yr.prototype.retrieve=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(Zr){return[2,this.apiCall.get(Hr)]})})},Yr}();return r$w.default=Wr,r$w}var a$z={},y$g;function H$f(){if(y$g)return a$z;y$g=1;var Kt=u$s&&u$s.__awaiter||function(Yr,Zr,en,tn){function rn(nn){return nn instanceof en?nn:new en(function(on){on(nn)})}return new(en||(en=Promise))(function(nn,on){function an(Hn){try{ln(tn.next(Hn))}catch(jn){on(jn)}}function $n(Hn){try{ln(tn.throw(Hn))}catch(jn){on(jn)}}function ln(Hn){Hn.done?nn(Hn.value):rn(Hn.value).then(an,$n)}ln((tn=tn.apply(Yr,Zr||[])).next())})},Vt=u$s&&u$s.__generator||function(Yr,Zr){var en={label:0,sent:function(){if(nn[0]&1)throw nn[1];return nn[1]},trys:[],ops:[]},tn,rn,nn,on;return on={next:an(0),throw:an(1),return:an(2)},typeof Symbol=="function"&&(on[Symbol.iterator]=function(){return this}),on;function an(ln){return function(Hn){return $n([ln,Hn])}}function $n(ln){if(tn)throw new TypeError("Generator is already executing.");for(;en;)try{if(tn=1,rn&&(nn=ln[0]&2?rn.return:ln[0]?rn.throw||((nn=rn.return)&&nn.call(rn),0):rn.next)&&!(nn=nn.call(rn,ln[1])).done)return nn;switch(rn=0,nn&&(ln=[ln[0]&2,nn.value]),ln[0]){case 0:case 1:nn=ln;break;case 4:return en.label++,{value:ln[1],done:!1};case 5:en.label++,rn=ln[1],ln=[0];continue;case 7:ln=en.ops.pop(),en.trys.pop();continue;default:if(nn=en.trys,!(nn=nn.length>0&&nn[nn.length-1])&&(ln[0]===6||ln[0]===2)){en=0;continue}if(ln[0]===3&&(!nn||ln[1]>nn[0]&&ln[1]<nn[3])){en.label=ln[1];break}if(ln[0]===6&&en.label<nn[1]){en.label=nn[1],nn=ln;break}if(nn&&en.label<nn[2]){en.label=nn[2],en.ops.push(ln);break}nn[2]&&en.ops.pop(),en.trys.pop();continue}ln=Zr.call(Yr,en)}catch(Hn){ln=[6,Hn],rn=0}finally{tn=nn=0}if(ln[0]&5)throw ln[1];return{value:ln[0]?ln[1]:void 0,done:!0}}};Object.defineProperty(a$z,"__esModule",{value:!0});var Hr="/health",Wr=function(){function Yr(Zr){this.apiCall=Zr}return Yr.prototype.retrieve=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(Zr){return[2,this.apiCall.get(Hr)]})})},Yr}();return a$z.default=Wr,a$z}var r$v={},d$t;function x$h(){if(d$t)return r$v;d$t=1;var Kt=u$s&&u$s.__awaiter||function(Yr,Zr,en,tn){function rn(nn){return nn instanceof en?nn:new en(function(on){on(nn)})}return new(en||(en=Promise))(function(nn,on){function an(Hn){try{ln(tn.next(Hn))}catch(jn){on(jn)}}function $n(Hn){try{ln(tn.throw(Hn))}catch(jn){on(jn)}}function ln(Hn){Hn.done?nn(Hn.value):rn(Hn.value).then(an,$n)}ln((tn=tn.apply(Yr,Zr||[])).next())})},Vt=u$s&&u$s.__generator||function(Yr,Zr){var en={label:0,sent:function(){if(nn[0]&1)throw nn[1];return nn[1]},trys:[],ops:[]},tn,rn,nn,on;return on={next:an(0),throw:an(1),return:an(2)},typeof Symbol=="function"&&(on[Symbol.iterator]=function(){return this}),on;function an(ln){return function(Hn){return $n([ln,Hn])}}function $n(ln){if(tn)throw new TypeError("Generator is already executing.");for(;en;)try{if(tn=1,rn&&(nn=ln[0]&2?rn.return:ln[0]?rn.throw||((nn=rn.return)&&nn.call(rn),0):rn.next)&&!(nn=nn.call(rn,ln[1])).done)return nn;switch(rn=0,nn&&(ln=[ln[0]&2,nn.value]),ln[0]){case 0:case 1:nn=ln;break;case 4:return en.label++,{value:ln[1],done:!1};case 5:en.label++,rn=ln[1],ln=[0];continue;case 7:ln=en.ops.pop(),en.trys.pop();continue;default:if(nn=en.trys,!(nn=nn.length>0&&nn[nn.length-1])&&(ln[0]===6||ln[0]===2)){en=0;continue}if(ln[0]===3&&(!nn||ln[1]>nn[0]&&ln[1]<nn[3])){en.label=ln[1];break}if(ln[0]===6&&en.label<nn[1]){en.label=nn[1],nn=ln;break}if(nn&&en.label<nn[2]){en.label=nn[2],en.ops.push(ln);break}nn[2]&&en.ops.pop(),en.trys.pop();continue}ln=Zr.call(Yr,en)}catch(Hn){ln=[6,Hn],rn=0}finally{tn=nn=0}if(ln[0]&5)throw ln[1];return{value:ln[0]?ln[1]:void 0,done:!0}}};Object.defineProperty(r$v,"__esModule",{value:!0});var Hr="/operations",Wr=function(){function Yr(Zr){this.apiCall=Zr}return Yr.prototype.perform=function(Zr,en){return en===void 0&&(en={}),Kt(this,void 0,void 0,function(){return Vt(this,function(tn){return[2,this.apiCall.post("".concat(Hr,"/").concat(Zr),{},en)]})})},Yr}();return r$v.default=Wr,r$v}var r$u={},_$i;function x$g(){if(_$i)return r$u;_$i=1;var Kt=u$s&&u$s.__awaiter||function(en,tn,rn,nn){function on(an){return an instanceof rn?an:new rn(function($n){$n(an)})}return new(rn||(rn=Promise))(function(an,$n){function ln(zn){try{jn(nn.next(zn))}catch(Wn){$n(Wn)}}function Hn(zn){try{jn(nn.throw(zn))}catch(Wn){$n(Wn)}}function jn(zn){zn.done?an(zn.value):on(zn.value).then(ln,Hn)}jn((nn=nn.apply(en,tn||[])).next())})},Vt=u$s&&u$s.__generator||function(en,tn){var rn={label:0,sent:function(){if(an[0]&1)throw an[1];return an[1]},trys:[],ops:[]},nn,on,an,$n;return $n={next:ln(0),throw:ln(1),return:ln(2)},typeof Symbol=="function"&&($n[Symbol.iterator]=function(){return this}),$n;function ln(jn){return function(zn){return Hn([jn,zn])}}function Hn(jn){if(nn)throw new TypeError("Generator is already executing.");for(;rn;)try{if(nn=1,on&&(an=jn[0]&2?on.return:jn[0]?on.throw||((an=on.return)&&an.call(on),0):on.next)&&!(an=an.call(on,jn[1])).done)return an;switch(on=0,an&&(jn=[jn[0]&2,an.value]),jn[0]){case 0:case 1:an=jn;break;case 4:return rn.label++,{value:jn[1],done:!1};case 5:rn.label++,on=jn[1],jn=[0];continue;case 7:jn=rn.ops.pop(),rn.trys.pop();continue;default:if(an=rn.trys,!(an=an.length>0&&an[an.length-1])&&(jn[0]===6||jn[0]===2)){rn=0;continue}if(jn[0]===3&&(!an||jn[1]>an[0]&&jn[1]<an[3])){rn.label=jn[1];break}if(jn[0]===6&&rn.label<an[1]){rn.label=an[1],an=jn;break}if(an&&rn.label<an[2]){rn.label=an[2],rn.ops.push(jn);break}an[2]&&rn.ops.pop(),rn.trys.pop();continue}jn=tn.call(en,rn)}catch(zn){jn=[6,zn],on=0}finally{nn=an=0}if(jn[0]&5)throw jn[1];return{value:jn[0]?jn[1]:void 0,done:!0}}},Hr=u$s&&u$s.__importDefault||function(en){return en&&en.__esModule?en:{default:en}};Object.defineProperty(r$u,"__esModule",{value:!0});var Wr=Hr(T$k()),Yr="/multi_search",Zr=function(){function en(tn,rn,nn){nn===void 0&&(nn=!1),this.apiCall=tn,this.configuration=rn,this.useTextContentType=nn,this.requestWithCache=new Wr.default}return en.prototype.clearCache=function(){this.requestWithCache.clearCache()},en.prototype.perform=function(tn,rn,nn){rn===void 0&&(rn={});var on=nn===void 0?{}:nn,an=on.cacheSearchResultsForSeconds,$n=an===void 0?this.configuration.cacheSearchResultsForSeconds:an;return Kt(this,void 0,void 0,function(){var ln,Hn,jn;return Vt(this,function(zn){return ln={},this.useTextContentType&&(ln["content-type"]="text/plain"),Hn={},this.configuration.useServerSideSearchCache===!0&&(Hn.use_cache=!0),jn=Object.assign({},rn,Hn),[2,this.requestWithCache.perform(this.apiCall,this.apiCall.post,[Yr,tn,jn,ln],{cacheResponseForSeconds:$n})]})})},en}();return r$u.default=Zr,r$u}var e$B={},v$k;function m$s(){if(v$k)return e$B;v$k=1;var Kt=u$s&&u$s.__awaiter||function(Yr,Zr,en,tn){function rn(nn){return nn instanceof en?nn:new en(function(on){on(nn)})}return new(en||(en=Promise))(function(nn,on){function an(Hn){try{ln(tn.next(Hn))}catch(jn){on(jn)}}function $n(Hn){try{ln(tn.throw(Hn))}catch(jn){on(jn)}}function ln(Hn){Hn.done?nn(Hn.value):rn(Hn.value).then(an,$n)}ln((tn=tn.apply(Yr,Zr||[])).next())})},Vt=u$s&&u$s.__generator||function(Yr,Zr){var en={label:0,sent:function(){if(nn[0]&1)throw nn[1];return nn[1]},trys:[],ops:[]},tn,rn,nn,on;return on={next:an(0),throw:an(1),return:an(2)},typeof Symbol=="function"&&(on[Symbol.iterator]=function(){return this}),on;function an(ln){return function(Hn){return $n([ln,Hn])}}function $n(ln){if(tn)throw new TypeError("Generator is already executing.");for(;en;)try{if(tn=1,rn&&(nn=ln[0]&2?rn.return:ln[0]?rn.throw||((nn=rn.return)&&nn.call(rn),0):rn.next)&&!(nn=nn.call(rn,ln[1])).done)return nn;switch(rn=0,nn&&(ln=[ln[0]&2,nn.value]),ln[0]){case 0:case 1:nn=ln;break;case 4:return en.label++,{value:ln[1],done:!1};case 5:en.label++,rn=ln[1],ln=[0];continue;case 7:ln=en.ops.pop(),en.trys.pop();continue;default:if(nn=en.trys,!(nn=nn.length>0&&nn[nn.length-1])&&(ln[0]===6||ln[0]===2)){en=0;continue}if(ln[0]===3&&(!nn||ln[1]>nn[0]&&ln[1]<nn[3])){en.label=ln[1];break}if(ln[0]===6&&en.label<nn[1]){en.label=nn[1],nn=ln;break}if(nn&&en.label<nn[2]){en.label=nn[2],en.ops.push(ln);break}nn[2]&&en.ops.pop(),en.trys.pop();continue}ln=Zr.call(Yr,en)}catch(Hn){ln=[6,Hn],rn=0}finally{tn=nn=0}if(ln[0]&5)throw ln[1];return{value:ln[0]?ln[1]:void 0,done:!0}}};Object.defineProperty(e$B,"__esModule",{value:!0});var Hr="/presets",Wr=function(){function Yr(Zr){this.apiCall=Zr}return Yr.prototype.upsert=function(Zr,en){return Kt(this,void 0,void 0,function(){return Vt(this,function(tn){return[2,this.apiCall.put(this.endpointPath(Zr),en)]})})},Yr.prototype.retrieve=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(Zr){return[2,this.apiCall.get(this.endpointPath())]})})},Yr.prototype.endpointPath=function(Zr){return"".concat(Yr.RESOURCEPATH).concat(Zr===void 0?"":"/"+Zr)},Object.defineProperty(Yr,"RESOURCEPATH",{get:function(){return Hr},enumerable:!1,configurable:!0}),Yr}();return e$B.default=Wr,e$B}var e$A={},v$j;function g$l(){if(v$j)return e$A;v$j=1;var Kt=u$s&&u$s.__awaiter||function(Zr,en,tn,rn){function nn(on){return on instanceof tn?on:new tn(function(an){an(on)})}return new(tn||(tn=Promise))(function(on,an){function $n(jn){try{Hn(rn.next(jn))}catch(zn){an(zn)}}function ln(jn){try{Hn(rn.throw(jn))}catch(zn){an(zn)}}function Hn(jn){jn.done?on(jn.value):nn(jn.value).then($n,ln)}Hn((rn=rn.apply(Zr,en||[])).next())})},Vt=u$s&&u$s.__generator||function(Zr,en){var tn={label:0,sent:function(){if(on[0]&1)throw on[1];return on[1]},trys:[],ops:[]},rn,nn,on,an;return an={next:$n(0),throw:$n(1),return:$n(2)},typeof Symbol=="function"&&(an[Symbol.iterator]=function(){return this}),an;function $n(Hn){return function(jn){return ln([Hn,jn])}}function ln(Hn){if(rn)throw new TypeError("Generator is already executing.");for(;tn;)try{if(rn=1,nn&&(on=Hn[0]&2?nn.return:Hn[0]?nn.throw||((on=nn.return)&&on.call(nn),0):nn.next)&&!(on=on.call(nn,Hn[1])).done)return on;switch(nn=0,on&&(Hn=[Hn[0]&2,on.value]),Hn[0]){case 0:case 1:on=Hn;break;case 4:return tn.label++,{value:Hn[1],done:!1};case 5:tn.label++,nn=Hn[1],Hn=[0];continue;case 7:Hn=tn.ops.pop(),tn.trys.pop();continue;default:if(on=tn.trys,!(on=on.length>0&&on[on.length-1])&&(Hn[0]===6||Hn[0]===2)){tn=0;continue}if(Hn[0]===3&&(!on||Hn[1]>on[0]&&Hn[1]<on[3])){tn.label=Hn[1];break}if(Hn[0]===6&&tn.label<on[1]){tn.label=on[1],on=Hn;break}if(on&&tn.label<on[2]){tn.label=on[2],tn.ops.push(Hn);break}on[2]&&tn.ops.pop(),tn.trys.pop();continue}Hn=en.call(Zr,tn)}catch(jn){Hn=[6,jn],nn=0}finally{rn=on=0}if(Hn[0]&5)throw Hn[1];return{value:Hn[0]?Hn[1]:void 0,done:!0}}},Hr=u$s&&u$s.__importDefault||function(Zr){return Zr&&Zr.__esModule?Zr:{default:Zr}};Object.defineProperty(e$A,"__esModule",{value:!0});var Wr=Hr(m$s()),Yr=function(){function Zr(en,tn){this.presetId=en,this.apiCall=tn}return Zr.prototype.retrieve=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(en){return[2,this.apiCall.get(this.endpointPath())]})})},Zr.prototype.delete=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(en){return[2,this.apiCall.delete(this.endpointPath())]})})},Zr.prototype.endpointPath=function(){return"".concat(Wr.default.RESOURCEPATH,"/").concat(this.presetId)},Zr}();return e$A.default=Yr,e$A}var a$y={},s$d={},v$i;function m$r(){if(v$i)return s$d;v$i=1;var Kt=u$s&&u$s.__awaiter||function(Yr,Zr,en,tn){function rn(nn){return nn instanceof en?nn:new en(function(on){on(nn)})}return new(en||(en=Promise))(function(nn,on){function an(Hn){try{ln(tn.next(Hn))}catch(jn){on(jn)}}function $n(Hn){try{ln(tn.throw(Hn))}catch(jn){on(jn)}}function ln(Hn){Hn.done?nn(Hn.value):rn(Hn.value).then(an,$n)}ln((tn=tn.apply(Yr,Zr||[])).next())})},Vt=u$s&&u$s.__generator||function(Yr,Zr){var en={label:0,sent:function(){if(nn[0]&1)throw nn[1];return nn[1]},trys:[],ops:[]},tn,rn,nn,on;return on={next:an(0),throw:an(1),return:an(2)},typeof Symbol=="function"&&(on[Symbol.iterator]=function(){return this}),on;function an(ln){return function(Hn){return $n([ln,Hn])}}function $n(ln){if(tn)throw new TypeError("Generator is already executing.");for(;en;)try{if(tn=1,rn&&(nn=ln[0]&2?rn.return:ln[0]?rn.throw||((nn=rn.return)&&nn.call(rn),0):rn.next)&&!(nn=nn.call(rn,ln[1])).done)return nn;switch(rn=0,nn&&(ln=[ln[0]&2,nn.value]),ln[0]){case 0:case 1:nn=ln;break;case 4:return en.label++,{value:ln[1],done:!1};case 5:en.label++,rn=ln[1],ln=[0];continue;case 7:ln=en.ops.pop(),en.trys.pop();continue;default:if(nn=en.trys,!(nn=nn.length>0&&nn[nn.length-1])&&(ln[0]===6||ln[0]===2)){en=0;continue}if(ln[0]===3&&(!nn||ln[1]>nn[0]&&ln[1]<nn[3])){en.label=ln[1];break}if(ln[0]===6&&en.label<nn[1]){en.label=nn[1],nn=ln;break}if(nn&&en.label<nn[2]){en.label=nn[2],en.ops.push(ln);break}nn[2]&&en.ops.pop(),en.trys.pop();continue}ln=Zr.call(Yr,en)}catch(Hn){ln=[6,Hn],rn=0}finally{tn=nn=0}if(ln[0]&5)throw ln[1];return{value:ln[0]?ln[1]:void 0,done:!0}}};Object.defineProperty(s$d,"__esModule",{value:!0});var Hr="/analytics/rules",Wr=function(){function Yr(Zr){this.apiCall=Zr,this.apiCall=Zr}return Yr.prototype.upsert=function(Zr,en){return Kt(this,void 0,void 0,function(){return Vt(this,function(tn){return[2,this.apiCall.put(this.endpointPath(Zr),en)]})})},Yr.prototype.retrieve=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(Zr){return[2,this.apiCall.get(this.endpointPath())]})})},Yr.prototype.endpointPath=function(Zr){return"".concat(Yr.RESOURCEPATH).concat(Zr===void 0?"":"/"+Zr)},Object.defineProperty(Yr,"RESOURCEPATH",{get:function(){return Hr},enumerable:!1,configurable:!0}),Yr}();return s$d.default=Wr,s$d}var a$x={},v$h;function q$e(){if(v$h)return a$x;v$h=1;var Kt=u$s&&u$s.__awaiter||function(Zr,en,tn,rn){function nn(on){return on instanceof tn?on:new tn(function(an){an(on)})}return new(tn||(tn=Promise))(function(on,an){function $n(jn){try{Hn(rn.next(jn))}catch(zn){an(zn)}}function ln(jn){try{Hn(rn.throw(jn))}catch(zn){an(zn)}}function Hn(jn){jn.done?on(jn.value):nn(jn.value).then($n,ln)}Hn((rn=rn.apply(Zr,en||[])).next())})},Vt=u$s&&u$s.__generator||function(Zr,en){var tn={label:0,sent:function(){if(on[0]&1)throw on[1];return on[1]},trys:[],ops:[]},rn,nn,on,an;return an={next:$n(0),throw:$n(1),return:$n(2)},typeof Symbol=="function"&&(an[Symbol.iterator]=function(){return this}),an;function $n(Hn){return function(jn){return ln([Hn,jn])}}function ln(Hn){if(rn)throw new TypeError("Generator is already executing.");for(;tn;)try{if(rn=1,nn&&(on=Hn[0]&2?nn.return:Hn[0]?nn.throw||((on=nn.return)&&on.call(nn),0):nn.next)&&!(on=on.call(nn,Hn[1])).done)return on;switch(nn=0,on&&(Hn=[Hn[0]&2,on.value]),Hn[0]){case 0:case 1:on=Hn;break;case 4:return tn.label++,{value:Hn[1],done:!1};case 5:tn.label++,nn=Hn[1],Hn=[0];continue;case 7:Hn=tn.ops.pop(),tn.trys.pop();continue;default:if(on=tn.trys,!(on=on.length>0&&on[on.length-1])&&(Hn[0]===6||Hn[0]===2)){tn=0;continue}if(Hn[0]===3&&(!on||Hn[1]>on[0]&&Hn[1]<on[3])){tn.label=Hn[1];break}if(Hn[0]===6&&tn.label<on[1]){tn.label=on[1],on=Hn;break}if(on&&tn.label<on[2]){tn.label=on[2],tn.ops.push(Hn);break}on[2]&&tn.ops.pop(),tn.trys.pop();continue}Hn=en.call(Zr,tn)}catch(jn){Hn=[6,jn],nn=0}finally{rn=on=0}if(Hn[0]&5)throw Hn[1];return{value:Hn[0]?Hn[1]:void 0,done:!0}}},Hr=u$s&&u$s.__importDefault||function(Zr){return Zr&&Zr.__esModule?Zr:{default:Zr}};Object.defineProperty(a$x,"__esModule",{value:!0});var Wr=Hr(m$r()),Yr=function(){function Zr(en,tn){this.name=en,this.apiCall=tn}return Zr.prototype.retrieve=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(en){return[2,this.apiCall.get(this.endpointPath())]})})},Zr.prototype.delete=function(){return Kt(this,void 0,void 0,function(){return Vt(this,function(en){return[2,this.apiCall.delete(this.endpointPath())]})})},Zr.prototype.endpointPath=function(){return"".concat(Wr.default.RESOURCEPATH,"/").concat(this.name)},Zr}();return a$x.default=Yr,a$x}var a$w;function R$8(){if(a$w)return a$y;a$w=1;var Kt=u$s&&u$s.__importDefault||function(Zr){return Zr&&Zr.__esModule?Zr:{default:Zr}};Object.defineProperty(a$y,"__esModule",{value:!0});var Vt=Kt(m$r()),Hr=Kt(q$e()),Wr="/analytics",Yr=function(){function Zr(en){this.apiCall=en,this.individualAnalyticsRules={},this.apiCall=en,this._analyticsRules=new Vt.default(this.apiCall)}return Zr.prototype.rules=function(en){return en===void 0?this._analyticsRules:(this.individualAnalyticsRules[en]===void 0&&(this.individualAnalyticsRules[en]=new Hr.default(en,this.apiCall)),this.individualAnalyticsRules[en])},Object.defineProperty(Zr,"RESOURCEPATH",{get:function(){return Wr},enumerable:!1,configurable:!0}),Zr}();return a$y.default=Yr,a$y}var l$k;function si$1(){if(l$k)return e$$;l$k=1;var Kt=u$s&&u$s.__importDefault||function(ei){return ei&&ei.__esModule?ei:{default:ei}};Object.defineProperty(e$$,"__esModule",{value:!0});var Vt=Kt(w$l()),Hr=Kt(re$6()),Wr=Kt(p$p()),Yr=Kt(K$8()),Zr=Kt(A$d()),en=Kt(g$n()),tn=Kt(E$c()),rn=Kt(g$m()),nn=Kt(x$i()),on=Kt(M$k()),an=Kt(H$f()),$n=Kt(x$h()),ln=Kt(x$g()),Hn=Kt(m$s()),jn=Kt(g$l()),zn=Kt(R$8()),Wn=function(){function ei($i){var Mi;$i.sendApiKeyAsQueryParam=(Mi=$i.sendApiKeyAsQueryParam)!==null&&Mi!==void 0?Mi:!1,this.configuration=new Vt.default($i),this.apiCall=new Hr.default(this.configuration),this.debug=new nn.default(this.apiCall),this.metrics=new on.default(this.apiCall),this.health=new an.default(this.apiCall),this.operations=new $n.default(this.apiCall),this.multiSearch=new ln.default(this.apiCall,this.configuration),this._collections=new Wr.default(this.apiCall),this.individualCollections={},this._aliases=new Zr.default(this.apiCall),this.individualAliases={},this._keys=new tn.default(this.apiCall),this.individualKeys={},this._presets=new Hn.default(this.apiCall),this.individualPresets={},this.analytics=new zn.default(this.apiCall)}return ei.prototype.collections=function($i){return $i===void 0?this._collections:(this.individualCollections[$i]===void 0&&(this.individualCollections[$i]=new Yr.default($i,this.apiCall,this.configuration)),this.individualCollections[$i])},ei.prototype.aliases=function($i){return $i===void 0?this._aliases:(this.individualAliases[$i]===void 0&&(this.individualAliases[$i]=new en.default($i,this.apiCall)),this.individualAliases[$i])},ei.prototype.keys=function($i){return $i===void 0?this._keys:(this.individualKeys[$i]===void 0&&(this.individualKeys[$i]=new rn.default($i,this.apiCall)),this.individualKeys[$i])},ei.prototype.presets=function($i){return $i===void 0?this._presets:(this.individualPresets[$i]===void 0&&(this.individualPresets[$i]=new jn.default($i,this.apiCall)),this.individualPresets[$i])},ei}();return e$$.default=Wn,e$$}var e$z={},e$y={},r$t;function h$n(){if(r$t)return e$y;r$t=1,Object.defineProperty(e$y,"__esModule",{value:!0}),e$y.SearchOnlyCollection=void 0;var Kt=x$l(),Vt=function(){function Hr(Wr,Yr,Zr){this.name=Wr,this.apiCall=Yr,this.configuration=Zr,this._documents=new Kt.SearchOnlyDocuments(this.name,this.apiCall,this.configuration)}return Hr.prototype.documents=function(){return this._documents},Hr}();return e$y.SearchOnlyCollection=Vt,e$y}var l$j;function A$c(){if(l$j)return e$z;l$j=1;var Kt=u$s&&u$s.__importDefault||function(en){return en&&en.__esModule?en:{default:en}};Object.defineProperty(e$z,"__esModule",{value:!0});var Vt=Kt(w$l()),Hr=Kt(re$6()),Wr=Kt(x$g()),Yr=h$n(),Zr=function(){function en(tn){var rn;tn.sendApiKeyAsQueryParam=(rn=tn.sendApiKeyAsQueryParam)!==null&&rn!==void 0?rn:!0,tn.sendApiKeyAsQueryParam===!0&&(tn.apiKey||"").length>2e3&&(console.warn("[typesense] API Key is longer than 2000 characters which is over the allowed limit, so disabling sending it as a query parameter."),tn.sendApiKeyAsQueryParam=!1),this.configuration=new Vt.default(tn),this.apiCall=new Hr.default(this.configuration),this.multiSearch=new Wr.default(this.apiCall,this.configuration,!0),this.individualCollections={}}return en.prototype.clearCache=function(){this.multiSearch.clearCache(),Object.entries(this.individualCollections).forEach(function(tn){tn[0];var rn=tn[1];rn.documents().clearCache()})},en.prototype.collections=function(tn){if(tn)return this.individualCollections[tn]===void 0&&(this.individualCollections[tn]=new Yr.SearchOnlyCollection(tn,this.apiCall,this.configuration)),this.individualCollections[tn];throw new Error("Typesense.SearchClient only supports search operations, so the collectionName that needs to be searched must be specified. Use Typesense.Client if you need to access the collection object.")},en}();return e$z.default=Zr,e$z}var c$p;function S$h(){if(c$p)return e$10;c$p=1;var Kt=u$s&&u$s.__createBinding||(Object.create?function(tn,rn,nn,on){on===void 0&&(on=nn);var an=Object.getOwnPropertyDescriptor(rn,nn);(!an||("get"in an?!rn.__esModule:an.writable||an.configurable))&&(an={enumerable:!0,get:function(){return rn[nn]}}),Object.defineProperty(tn,on,an)}:function(tn,rn,nn,on){on===void 0&&(on=nn),tn[on]=rn[nn]}),Vt=u$s&&u$s.__setModuleDefault||(Object.create?function(tn,rn){Object.defineProperty(tn,"default",{enumerable:!0,value:rn})}:function(tn,rn){tn.default=rn}),Hr=u$s&&u$s.__importStar||function(tn){if(tn&&tn.__esModule)return tn;var rn={};if(tn!=null)for(var nn in tn)nn!=="default"&&Object.prototype.hasOwnProperty.call(tn,nn)&&Kt(rn,tn,nn);return Vt(rn,tn),rn},Wr=u$s&&u$s.__importDefault||function(tn){return tn&&tn.__esModule?tn:{default:tn}};Object.defineProperty(e$10,"__esModule",{value:!0}),e$10.Errors=e$10.SearchClient=e$10.Client=void 0;var Yr=Wr(si$1());e$10.Client=Yr.default;var Zr=Wr(A$c());e$10.SearchClient=Zr.default;var en=Hr(N$g());return e$10.Errors=en,e$10.default={Client:Yr.default,SearchClient:Zr.default,Errors:en},e$10}var e$x={},r$s={exports:{}},r$r={exports:{}},o$A;function a$v(){return o$A||(o$A=1,function(Kt){function Vt(Hr){if(Array.isArray(Hr))return Hr}Kt.exports=Vt,Kt.exports.__esModule=!0,Kt.exports.default=Kt.exports}(r$r)),r$r.exports}var r$q={exports:{}},p$m;function _$h(){return p$m||(p$m=1,function(Kt){function Vt(Hr,Wr){var Yr=Hr==null?null:typeof Symbol<"u"&&Hr[Symbol.iterator]||Hr["@@iterator"];if(Yr!=null){var Zr,en,tn,rn,nn=[],on=!0,an=!1;try{if(tn=(Yr=Yr.call(Hr)).next,Wr===0){if(Object(Yr)!==Yr)return;on=!1}else for(;!(on=(Zr=tn.call(Yr)).done)&&(nn.push(Zr.value),nn.length!==Wr);on=!0);}catch($n){an=!0,en=$n}finally{try{if(!on&&Yr.return!=null&&(rn=Yr.return(),Object(rn)!==rn))return}finally{if(an)throw en}}return nn}}Kt.exports=Vt,Kt.exports.__esModule=!0,Kt.exports.default=Kt.exports}(r$q)),r$q.exports}var r$p={exports:{}},r$o={exports:{}},i$g;function y$f(){return i$g||(i$g=1,function(Kt){function Vt(Hr,Wr){(Wr==null||Wr>Hr.length)&&(Wr=Hr.length);for(var Yr=0,Zr=new Array(Wr);Yr<Wr;Yr++)Zr[Yr]=Hr[Yr];return Zr}Kt.exports=Vt,Kt.exports.__esModule=!0,Kt.exports.default=Kt.exports}(r$o)),r$o.exports}var n$c;function y$e(){return n$c||(n$c=1,function(Kt){var Vt=y$f();function Hr(Wr,Yr){if(Wr){if(typeof Wr=="string")return Vt(Wr,Yr);var Zr=Object.prototype.toString.call(Wr).slice(8,-1);if(Zr==="Object"&&Wr.constructor&&(Zr=Wr.constructor.name),Zr==="Map"||Zr==="Set")return Array.from(Wr);if(Zr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Zr))return Vt(Wr,Yr)}}Kt.exports=Hr,Kt.exports.__esModule=!0,Kt.exports.default=Kt.exports}(r$p)),r$p.exports}var e$w={exports:{}},r$n;function a$u(){return r$n||(r$n=1,function(Kt){function Vt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}Kt.exports=Vt,Kt.exports.__esModule=!0,Kt.exports.default=Kt.exports}(e$w)),e$w.exports}var i$f;function d$s(){return i$f||(i$f=1,function(Kt){var Vt=a$v(),Hr=_$h(),Wr=y$e(),Yr=a$u();function Zr(en,tn){return Vt(en)||Hr(en,tn)||Wr(en,tn)||Yr()}Kt.exports=Zr,Kt.exports.__esModule=!0,Kt.exports.default=Kt.exports}(r$s)),r$s.exports}var C$j;function z$a(){if(C$j)return e$x;C$j=1;var Kt=p$t;Object.defineProperty(e$x,"__esModule",{value:!0}),e$x.SearchRequestAdapter=void 0;var Vt=Kt(o$O()),Hr=Kt(v$w()),Wr=Kt(d$s()),Yr=Kt(n$h()),Zr=Kt(b$k()),en=function(){function tn(rn,nn,on){(0,Yr.default)(this,tn),this.instantsearchRequests=rn,this.typesenseClient=nn,this.configuration=on,this.additionalSearchParameters=on.additionalSearchParameters,this.collectionSpecificSearchParameters=on.collectionSpecificSearchParameters}return(0,Zr.default)(tn,[{key:"_shouldUseExactMatchForField",value:function(rn,nn){var on,an;return!(((on=this.configuration.collectionSpecificFilterByOptions)===null||on===void 0||(on=on[nn])===null||on===void 0||(on=on[rn])===null||on===void 0?void 0:on.exactMatch)===!1||((an=this.configuration.filterByOptions)===null||an===void 0||(an=an[rn])===null||an===void 0?void 0:an.exactMatch)===!1)}},{key:"_adaptFacetFilters",value:function(rn,nn){var on=this,an="";if(!rn)return an;var $n=rn.map(function(ln){if(Array.isArray(ln)){var Hn={};ln.forEach(function(Qs){var Zs=on._parseFacetFilter(Qs),Gs=Zs.fieldName,Hl=Zs.fieldValue;Hn[Gs]=Hn[Gs]||[],Hn[Gs].push(Hl)}),Object.keys(Hn).length>1&&console.error("[Typesense-Instantsearch-Adapter] Typesense does not support cross-field ORs at the moment. The adapter could not OR values between these fields: ".concat(Object.keys(Hn).join(",")));var jn=Object.keys(Hn)[0],zn=Hn[jn],Wn=zn.reduce(function(Qs,Zs){return Zs.startsWith("-")&&!on._isNumber(Zs)?Qs[0].push(Zs.substring(1)):Qs[1].push(Zs),Qs},[[],[]]),ei=(0,Wr.default)(Wn,2),$i=ei[0],Mi=ei[1],Ni=[];if(Mi.length>0){var Ts=on._shouldUseExactMatchForField(jn,nn)?":=":":";Ni.push("".concat(jn).concat(Ts,"[").concat(Mi.map(function(Qs){return on._escapeFacetValue(Qs)}).join(","),"]"))}if($i.length>0){var ps=on._shouldUseExactMatchForField(jn,nn)?":!=":":!";Ni.push("".concat(jn).concat(ps,"[").concat($i.map(function(Qs){return on._escapeFacetValue(Qs)}).join(","),"]"))}var $s=Ni.filter(function(Qs){return Qs}).join(" && ");return $s}else{var Ws=on._parseFacetFilter(ln),Hs=Ws.fieldName,js=Ws.fieldValue,zs;if(js.startsWith("-")&&!on._isNumber(js)){var Xs=on._shouldUseExactMatchForField(Hs,nn)?":!=":":!";zs="".concat(Hs).concat(Xs,"[").concat(on._escapeFacetValue(js.substring(1)),"]")}else{var ia=on._shouldUseExactMatchForField(Hs,nn)?":=":":";zs="".concat(Hs).concat(ia,"[").concat(on._escapeFacetValue(js),"]")}return zs}});return an=$n.join(" && "),an}},{key:"_parseFacetFilter",value:function(rn){var nn,on,an,$n,ln;if(((nn=this.configuration.facetableFieldsWithSpecialCharacters)===null||nn===void 0?void 0:nn.length)>0){var Hn=this.configuration.facetableFieldsWithSpecialCharacters.flat().map(function(jn){return jn.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")});if(on=new RegExp("^(".concat(Hn.join("|"),"):(.*)$")),an=rn.match(on),an!=null)return $n="".concat(an[1]),ln="".concat(an[2]),{fieldName:$n,fieldValue:ln}}return on=this.constructor.DEFAULT_FACET_FILTER_STRING_MATCHING_REGEX,an=rn.match(on),an==null?console.error("[Typesense-Instantsearch-Adapter] Parsing failed for a facet filter `".concat(rn,"` with the Regex `").concat(on,"`. If you have field names with special characters, be sure to add them to a parameter called `facetableFieldsWithSpecialCharacters` when instantiating the adapter.")):($n="".concat(an[1]).concat(an[2]),ln="".concat(an[3])),{fieldName:$n,fieldValue:ln}}},{key:"_escapeFacetValue",value:function(rn){return typeof rn=="boolean"||rn==="true"||rn==="false"||this._isNumber(rn)?rn:"`".concat(rn,"`")}},{key:"_isNumber",value:function(rn){return Number.isInteger(rn%1)||!!(rn%1)}},{key:"_adaptNumericFilters",value:function(rn){var nn=this,on="";if(!rn)return on;var an={};rn.forEach(function(ln){var Hn=nn._parseNumericFilter(ln),jn=Hn.fieldName,zn=Hn.operator,Wn=Hn.fieldValue;an[jn]=an[jn]||{},an[jn][zn]=Wn});var $n=[];return Object.keys(an).forEach(function(ln){an[ln]["<="]!=null&&an[ln][">="]!=null?$n.push("".concat(ln,":=[").concat(an[ln][">="],"..").concat(an[ln]["<="],"]")):an[ln]["<="]!=null?$n.push("".concat(ln,":<=").concat(an[ln]["<="])):an[ln][">="]!=null?$n.push("".concat(ln,":>=").concat(an[ln][">="])):an[ln]["="]!=null?$n.push("".concat(ln,":=").concat(an[ln]["="])):console.warn("[Typesense-Instantsearch-Adapter] Unsupported operator found ".concat(JSON.stringify(an[ln])))}),on=$n.join(" && "),on}},{key:"_parseNumericFilter",value:function(rn){var nn,on,an,$n,ln,Hn;if(((nn=this.configuration.facetableFieldsWithSpecialCharacters)===null||nn===void 0?void 0:nn.length)>0){var jn=this.configuration.facetableFieldsWithSpecialCharacters.map(function(Mi){return Mi.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")});if(on=new RegExp("^(".concat(jn.join("|"),")(<=|>=|>|<|=)(.*)$")),an=rn.match(on),an!=null){var zn=an,Wn=(0,Wr.default)(zn,4);return $n=Wn[1],ln=Wn[2],Hn=Wn[3],{fieldName:$n,operator:ln,fieldValue:Hn}}}if(on=this.constructor.DEFAULT_NUMERIC_FILTER_STRING_MATCHING_REGEX,an=rn.match(on),an==null)console.error("[Typesense-Instantsearch-Adapter] Parsing failed for a numeric filter `".concat(rn,"` with the Regex `").concat(on,"`. If you have field names with special characters, be sure to add them to a parameter called `facetableFieldsWithSpecialCharacters` when instantiating the adapter."));else{var ei=an,$i=(0,Wr.default)(ei,4);$n=$i[1],ln=$i[2],Hn=$i[3]}return{fieldName:$n,operator:ln,fieldValue:Hn}}},{key:"_adaptGeoFilter",value:function(rn){var nn=rn.insideBoundingBox,on=rn.aroundRadius,an=rn.aroundLatLng,$n=rn.insidePolygon;if(nn){var ln,Hn,jn,zn;if(Array.isArray(nn)){var Wn=nn.flat(),ei=(0,Wr.default)(Wn,4);ln=ei[0],Hn=ei[1],jn=ei[2],zn=ei[3]}else{var $i=nn.split(","),Mi=(0,Wr.default)($i,4);ln=Mi[0],Hn=Mi[1],jn=Mi[2],zn=Mi[3]}return"".concat(this.configuration.geoLocationField,":(").concat(ln,", ").concat(Hn,", ").concat(ln,", ").concat(zn,", ").concat(jn,", ").concat(zn,", ").concat(jn,", ").concat(Hn,")")}if(an||on){if(!on||on==="all")throw new Error("[Typesense-Instantsearch-Adapter] In Typesense, geo-filtering around a lat/lng also requires a numerical radius. So the `aroundRadius` parameter is required when `aroundLatLng` is used. If you intend to just geo-sort around a lat/long, you want to use the sortBy InstantSearch widget (or a virtual sortBy custom widget).");var Ni="".concat(parseFloat(on)/1e3," km");return"".concat(this.configuration.geoLocationField,":(").concat(an,", ").concat(Ni,")")}if($n){var Ts=$n;return Array.isArray($n)&&(Ts=$n.flat().join(",")),"".concat(this.configuration.geoLocationField,":(").concat(Ts,")")}}},{key:"_adaptFilters",value:function(rn,nn){var on=[];return rn.filters&&on.push(rn.filters),on.push(this._adaptFacetFilters(rn.facetFilters,nn)),on.push(this._adaptNumericFilters(rn.numericFilters)),on.push(this._adaptGeoFilter(rn)),on.filter(function(an){return an&&an!==""}).join(" && ")}},{key:"_adaptIndexName",value:function(rn){return rn.match(this.constructor.INDEX_NAME_MATCHING_REGEX)[1]}},{key:"_adaptSortBy",value:function(rn){return rn.match(this.constructor.INDEX_NAME_MATCHING_REGEX)[3]}},{key:"_adaptFacetBy",value:function(rn,nn){var on=this;return[rn].flat().map(function(an){var $n;return($n=on.configuration.collectionSpecificFacetByOptions)!==null&&$n!==void 0&&($n=$n[nn])!==null&&$n!==void 0&&$n[an]?"".concat(an).concat(on.configuration.collectionSpecificFacetByOptions[nn][an]):on.configuration.facetByOptions[an]?"".concat(an).concat(on.configuration.facetByOptions[an]):an}).join(",")}},{key:"_buildSearchParameters",value:function(rn){for(var nn=rn.params,on=rn.indexName,an=this._adaptIndexName(on),$n={},ln=0,Hn=Object.entries(this.additionalSearchParameters);ln<Hn.length;ln++){var jn=(0,Wr.default)(Hn[ln],2),zn=jn[0],Wn=jn[1];$n[this._camelToSnakeCase(zn)]=Wn}if(this.collectionSpecificSearchParameters[an])for(var ei=0,$i=Object.entries(this.collectionSpecificSearchParameters[an]);ei<$i.length;ei++){var Mi=(0,Wr.default)($i[ei],2),Ni=Mi[0],Ts=Mi[1];$n[this._camelToSnakeCase(Ni)]=Ts}var ps=Object.assign({},$n),$s=this._adaptSortBy(on);return Object.assign(ps,{collection:an,q:nn.query===""||nn.query===void 0?"*":nn.query,facet_by:$n.facet_by||this._adaptFacetBy(nn.facets,an),filter_by:this._adaptFilters(nn,an)||$n.filter_by,sort_by:$s||$n.sort_by,max_facet_values:nn.maxValuesPerFacet,page:(nn.page||0)+1}),nn.hitsPerPage&&(ps.per_page=nn.hitsPerPage),nn.facetQuery&&(ps.facet_query="".concat(nn.facetName,":").concat(nn.facetQuery),ps.per_page=0),nn.typesenseVectorQuery&&(ps.vector_query=nn.typesenseVectorQuery),Object.fromEntries(Object.entries(ps).filter(function(Ws){var Hs=(0,Wr.default)(Ws,2);Hs[0];var js=Hs[1];return js!=null&&js!==""}))}},{key:"_camelToSnakeCase",value:function(rn){return rn.split(/(?=[A-Z])/).join("_").toLowerCase()}},{key:"request",value:function(){var rn=(0,Hr.default)(Vt.default.mark(function on(){var an=this,$n;return Vt.default.wrap(function(ln){for(;;)switch(ln.prev=ln.next){case 0:return $n=this.instantsearchRequests.map(function(Hn){return an._buildSearchParameters(Hn)}),ln.abrupt("return",this.typesenseClient.multiSearch.perform({searches:$n}));case 2:case"end":return ln.stop()}},on,this)}));function nn(){return rn.apply(this,arguments)}return nn}()}],[{key:"INDEX_NAME_MATCHING_REGEX",get:function(){return new RegExp("^(.+?)(?=(/sort/(.*))|$)")}},{key:"DEFAULT_FACET_FILTER_STRING_MATCHING_REGEX",get:function(){return new RegExp("(.*)((?!:).):(?!:)(.*)")}},{key:"DEFAULT_NUMERIC_FILTER_STRING_MATCHING_REGEX",get:function(){return new RegExp("(.*?)(<=|>=|>|<|=)(.*)")}}]),tn}();return e$x.SearchRequestAdapter=en,e$x}var e$v={},o$z={exports:{}},o$y={exports:{}},o$x;function n$b(){return o$x||(o$x=1,function(Kt){var Vt=y$f();function Hr(Wr){if(Array.isArray(Wr))return Vt(Wr)}Kt.exports=Hr,Kt.exports.__esModule=!0,Kt.exports.default=Kt.exports}(o$y)),o$y.exports}var r$m={exports:{}},o$w;function u$n(){return o$w||(o$w=1,function(Kt){function Vt(Hr){if(typeof Symbol<"u"&&Hr[Symbol.iterator]!=null||Hr["@@iterator"]!=null)return Array.from(Hr)}Kt.exports=Vt,Kt.exports.__esModule=!0,Kt.exports.default=Kt.exports}(r$m)),r$m.exports}var e$u={exports:{}},t$6;function n$a(){return t$6||(t$6=1,function(Kt){function Vt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}Kt.exports=Vt,Kt.exports.__esModule=!0,Kt.exports.default=Kt.exports}(e$u)),e$u.exports}var a$t;function x$f(){return a$t||(a$t=1,function(Kt){var Vt=n$b(),Hr=u$n(),Wr=y$e(),Yr=n$a();function Zr(en){return Vt(en)||Hr(en)||Wr(en)||Yr()}Kt.exports=Zr,Kt.exports.__esModule=!0,Kt.exports.default=Kt.exports}(o$z)),o$z.exports}var e$t={exports:{}},n$9;function _$g(){return n$9||(n$9=1,function(Kt){var Vt=m$A();function Hr(Wr,Yr,Zr){return Yr=Vt(Yr),Yr in Wr?Object.defineProperty(Wr,Yr,{value:Zr,enumerable:!0,configurable:!0,writable:!0}):Wr[Yr]=Zr,Wr}Kt.exports=Hr,Kt.exports.__esModule=!0,Kt.exports.default=Kt.exports}(e$t)),e$t.exports}var r$l={},t$5;function p$l(){if(t$5)return r$l;t$5=1,Object.defineProperty(r$l,"__esModule",{value:!0}),r$l.utils=void 0;var Kt={_adaptHighlightTag:function(Vt,Hr,Wr){return Vt.replace(new RegExp("<mark>","g"),Hr||"<mark>").replace(new RegExp("</mark>","g"),Wr||"</mark>")},_adaptNumberOfPages:function(){var Vt=this.typesenseResponse.found/this.typesenseResponse.request_params.per_page;return Number.isFinite(Vt)?Math.ceil(Vt):1}};return r$l.utils=Kt,r$l}var q$d;function J$a(){if(q$d)return e$v;q$d=1;var Kt=p$t;Object.defineProperty(e$v,"__esModule",{value:!0}),e$v.SearchResponseAdapter=void 0;var Vt=Kt(s$k()),Hr=Kt(d$s()),Wr=Kt(x$f()),Yr=Kt(_$g()),Zr=Kt(n$h()),en=Kt(b$k()),tn=p$l();function rn(an,$n){var ln=Object.keys(an);if(Object.getOwnPropertySymbols){var Hn=Object.getOwnPropertySymbols(an);$n&&(Hn=Hn.filter(function(jn){return Object.getOwnPropertyDescriptor(an,jn).enumerable})),ln.push.apply(ln,Hn)}return ln}function nn(an){for(var $n=1;$n<arguments.length;$n++){var ln=arguments[$n]!=null?arguments[$n]:{};$n%2?rn(Object(ln),!0).forEach(function(Hn){(0,Yr.default)(an,Hn,ln[Hn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(an,Object.getOwnPropertyDescriptors(ln)):rn(Object(ln)).forEach(function(Hn){Object.defineProperty(an,Hn,Object.getOwnPropertyDescriptor(ln,Hn))})}return an}var on=function(){function an($n,ln,Hn){var jn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];(0,Zr.default)(this,an),this.typesenseResponse=$n,this.instantsearchRequest=ln,this.configuration=Hn,this.allTypesenseResponses=jn}return(0,en.default)(an,[{key:"_adaptGroupedHits",value:function($n){var ln=this,Hn=[];return Hn=$n.map(function(jn){var zn=ln._adaptHits(jn.hits);return zn.forEach(function(Wn){Wn.group_key=Wn._group_key=jn.group_key,jn.found&&(Wn._group_found=jn.found)}),zn}),this.configuration.flattenGroupedHits?Hn=Hn.flat():Hn=Hn.map(function(jn){return nn(nn({},jn[0]),{},{_grouped_hits:jn})}),Hn}},{key:"_adaptHits",value:function($n){var ln=this,Hn=[];return Hn=$n.map(function(jn){var zn=nn({},jn.document);zn.objectID=jn.document.id,zn._snippetResult=ln._adaptHighlightResult(jn,"snippet"),zn._highlightResult=ln._adaptHighlightResult(jn,"value"),zn._rawTypesenseHit=jn,["text_match","geo_distance_meters","curated","text_match_info","hybrid_search_info","vector_distance"].forEach(function(ei){Object.keys(jn).includes(ei)&&!Object.keys(zn).includes(ei)&&(zn[ei]=jn[ei])});var Wn=zn[ln.configuration.geoLocationField];return Wn&&(zn._geoloc={lat:Wn[0],lng:Wn[1]}),zn}),Hn}},{key:"_adaptHighlightResult",value:function($n,ln){var Hn={};return $n.highlight!=null&&this.isHighlightPost0240RCN32Format($n.highlight)?this.adaptHighlightObject($n,Hn,ln):this.adaptHighlightsArray($n,Hn,ln),Hn}},{key:"isHighlightPost0240RCN32Format",value:function($n){return $n.full==null&&$n.snippet==null}},{key:"adaptHighlightsArray",value:function($n,ln,Hn){var jn=this;Object.assign.apply(Object,[ln].concat((0,Wr.default)(Object.entries($n.document).map(function(zn){var Wn=(0,Hr.default)(zn,2),ei=Wn[0],$i=Wn[1];return(0,Yr.default)({},ei,{value:$i,matchLevel:"none",matchedWords:[]})})))),$n.highlights.forEach(function(zn){ln[zn.field]={value:zn[Hn]||zn["".concat(Hn,"s")],matchLevel:"full",matchedWords:zn.matched_tokens},zn.indices&&(ln[zn.field].matchedIndices=zn.indices)}),Object.entries(ln).forEach(function(zn){var Wn=(0,Hr.default)(zn,2),ei=Wn[0],$i=Wn[1],Mi=ei,Ni=$i.value,Ts=$i.matchLevel,ps=$i.matchedWords,$s=$i.matchedIndices;Ni==null?ln[Mi]=jn._adaptHighlightNullValue():Array.isArray(Ni)?(ln[Mi]=[],$n.document[Mi].forEach(function(Ws,Hs){$s&&$s.includes(Hs)?ln[Mi].push({value:jn._adaptHighlightTag("".concat(Ni[$s.indexOf(Hs)]),jn.instantsearchRequest.params.highlightPreTag,jn.instantsearchRequest.params.highlightPostTag),matchLevel:Ts,matchedWords:ps[Hs]}):(0,Vt.default)(Ws)==="object"?ln[Mi].push(jn._adaptHighlightInObjectValue(Ws,{},Hn)):ln[Mi].push({value:"".concat(Ws),matchLevel:"none",matchedWords:[]})})):(0,Vt.default)(Ni)==="object"?ln[Mi]=jn._adaptHighlightInObjectValue(Ni,{},Hn):ln[Mi].value=jn._adaptHighlightTag("".concat(Ni),jn.instantsearchRequest.params.highlightPreTag,jn.instantsearchRequest.params.highlightPostTag)})}},{key:"adaptHighlightObject",value:function($n,ln,Hn){Object.assign(ln,this._adaptHighlightInObjectValue($n.document,$n.highlight,Hn))}},{key:"_adaptHighlightInObjectValue",value:function($n,ln,Hn){var jn=this;return Object.assign.apply(Object,[{}].concat((0,Wr.default)(Object.entries($n).map(function(zn){var Wn=(0,Hr.default)(zn,2),ei=Wn[0],$i=Wn[1],Mi;if($i==null)Mi=jn._adaptHighlightNullValue();else if(Array.isArray($i)){var Ni;Mi=jn._adaptHighlightInArrayValue($i,(Ni=ln==null?void 0:ln[ei])!==null&&Ni!==void 0?Ni:[],Hn)}else if((0,Vt.default)($i)==="object"){var Ts;Mi=jn._adaptHighlightInObjectValue($i,(Ts=ln==null?void 0:ln[ei])!==null&&Ts!==void 0?Ts:{},Hn)}else Mi=jn._adaptHighlightInPrimitiveValue($i,ln==null?void 0:ln[ei],Hn);return(0,Yr.default)({},ei,Mi)}))))}},{key:"_adaptHighlightInArrayValue",value:function($n,ln,Hn){var jn=this;return $n.map(function(zn,Wn){var ei;if(zn==null)ei=jn._adaptHighlightNullValue();else if(Array.isArray(zn)){var $i;ei=jn._adaptHighlightInArrayValue(zn,($i=ln==null?void 0:ln[Wn])!==null&&$i!==void 0?$i:[],Hn)}else if((0,Vt.default)(zn)==="object"){var Mi;ei=jn._adaptHighlightInObjectValue(zn,(Mi=ln==null?void 0:ln[Wn])!==null&&Mi!==void 0?Mi:{},Hn)}else ei=jn._adaptHighlightInPrimitiveValue(zn,ln==null?void 0:ln[Wn],Hn);return ei})}},{key:"_adaptHighlightInPrimitiveValue",value:function($n,ln,Hn){if(ln!=null){var jn,zn;return{value:this._adaptHighlightTag("".concat((jn=(zn=ln[Hn])!==null&&zn!==void 0?zn:ln.highlight)!==null&&jn!==void 0?jn:ln.snippet),this.instantsearchRequest.params.highlightPreTag,this.instantsearchRequest.params.highlightPostTag),matchLevel:(ln.matched_tokens||[]).length>0?"full":"none",matchedWords:ln.matched_tokens||[]}}else return{value:this._adaptHighlightTag("".concat($n),this.instantsearchRequest.params.highlightPreTag,this.instantsearchRequest.params.highlightPostTag),matchLevel:"none",matchedWords:[]}}},{key:"_adaptHighlightNullValue",value:function(){return{value:"",matchLevel:"none",matchedWords:[]}}},{key:"_adaptFacets",value:function($n){var ln={};return $n.forEach(function(Hn){Object.assign(ln,(0,Yr.default)({},Hn.field_name,Object.assign.apply(Object,[{}].concat((0,Wr.default)(Hn.counts.map(function(jn){return(0,Yr.default)({},jn.value,jn.count)}))))))}),ln}},{key:"_adaptFacetStats",value:function($n){var ln={};return $n.forEach(function(Hn){Object.keys(Hn.stats).length>0&&Object.assign(ln,(0,Yr.default)({},Hn.field_name,Hn.stats))}),ln}},{key:"_adaptRenderingContent",value:function($n){var ln,Hn=Object.assign({},this.configuration.renderingContent);return((ln=Hn.facetOrdering)===null||ln===void 0||(ln=ln.facets)===null||ln===void 0?void 0:ln.order)==null&&(Hn.facetOrdering=Hn.facetOrdering||{},Hn.facetOrdering.facets=Hn.facetOrdering.facets||{},Hn.facetOrdering.facets.order=(0,Wr.default)(new Set($n.map(function(jn){return jn.field_name}).concat(this.allTypesenseResponses.map(function(jn){return jn.facet_counts||[]}).flat().map(function(jn){return jn.field_name}).filter(function(jn){return jn}))))),Hn}},{key:"adapt",value:function(){var $n=this._adaptRenderingContent(this.typesenseResponse.facet_counts||[]),ln=nn({hits:this.typesenseResponse.grouped_hits?this._adaptGroupedHits(this.typesenseResponse.grouped_hits):this._adaptHits(this.typesenseResponse.hits),nbHits:this.typesenseResponse.found,page:this.typesenseResponse.page-1,nbPages:this._adaptNumberOfPages(),hitsPerPage:this.typesenseResponse.request_params.per_page,facets:this._adaptFacets(this.typesenseResponse.facet_counts||[]),facets_stats:this._adaptFacetStats(this.typesenseResponse.facet_counts||{}),query:this.typesenseResponse.request_params.q,processingTimeMS:this.typesenseResponse.search_time_ms},Object.keys($n).length>0?{renderingContent:$n}:null);return ln}}]),an}();return e$v.SearchResponseAdapter=on,Object.assign(on.prototype,tn.utils),e$v}var e$s={},c$o;function y$d(){if(c$o)return e$s;c$o=1;var Kt=p$t;Object.defineProperty(e$s,"__esModule",{value:!0}),e$s.FacetSearchResponseAdapter=void 0;var Vt=Kt(n$h()),Hr=Kt(b$k()),Wr=p$l(),Yr=function(){function Zr(en,tn){(0,Vt.default)(this,Zr),this.typesenseResponse=en,this.instantsearchRequest=tn}return(0,Hr.default)(Zr,[{key:"_adaptFacetHits",value:function(en){var tn=this,rn={},nn=en.find(function(on){return on.field_name===tn.instantsearchRequest.params.facetName});return rn=nn.counts.map(function(on){return{value:on.value,highlighted:tn._adaptHighlightTag(on.highlighted,tn.instantsearchRequest.params.highlightPreTag,tn.instantsearchRequest.params.highlightPostTag),count:on.count}}),rn}},{key:"adapt",value:function(){var en={facetHits:this._adaptFacetHits(this.typesenseResponse.facet_counts),exhaustiveFacetsCount:!0,processingTimeMS:this.typesenseResponse.search_time_ms};return en}}]),Zr}();return e$s.FacetSearchResponseAdapter=Yr,Object.assign(Yr.prototype,Wr.utils),e$s}(function(Kt){var Vt=p$t;Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.default=void 0;var Hr=Vt(o$O()),Wr=Vt(v$w()),Yr=Vt(n$h()),Zr=Vt(b$k()),en=z$b(),tn=S$h(),rn=z$a(),nn=J$a(),on=y$d(),an=function(){function $n(ln){var Hn=this;(0,Yr.default)(this,$n),this.updateConfiguration(ln),this.searchClient={clearCache:function(){return Hn.clearCache()},search:function(jn){return Hn.searchTypesenseAndAdapt(jn)},searchForFacetValues:function(jn){return Hn.searchTypesenseForFacetValuesAndAdapt(jn)}}}return(0,Zr.default)($n,[{key:"searchTypesenseAndAdapt",value:function(){var ln=(0,Wr.default)(Hr.default.mark(function jn(zn){var Wn=this,ei,$i;return Hr.default.wrap(function(Mi){for(;;)switch(Mi.prev=Mi.next){case 0:return Mi.prev=0,Mi.next=3,this._adaptAndPerformTypesenseRequest(zn);case 3:return ei=Mi.sent,$i=ei.results.map(function(Ni,Ts){Wn._validateTypesenseResult(Ni);var ps=new nn.SearchResponseAdapter(Ni,zn[Ts],Wn.configuration,ei.results);return ps.adapt()}),Mi.abrupt("return",{results:$i});case 8:throw Mi.prev=8,Mi.t0=Mi.catch(0),console.error(Mi.t0),Mi.t0;case 12:case"end":return Mi.stop()}},jn,this,[[0,8]])}));function Hn(jn){return ln.apply(this,arguments)}return Hn}()},{key:"searchTypesenseForFacetValuesAndAdapt",value:function(){var ln=(0,Wr.default)(Hr.default.mark(function jn(zn){var Wn=this,ei,$i;return Hr.default.wrap(function(Mi){for(;;)switch(Mi.prev=Mi.next){case 0:return Mi.prev=0,Mi.next=3,this._adaptAndPerformTypesenseRequest(zn);case 3:return ei=Mi.sent,$i=ei.results.map(function(Ni,Ts){Wn._validateTypesenseResult(Ni);var ps=new on.FacetSearchResponseAdapter(Ni,zn[Ts],Wn.configuration);return ps.adapt()}),Mi.abrupt("return",$i);case 8:throw Mi.prev=8,Mi.t0=Mi.catch(0),console.error(Mi.t0),Mi.t0;case 12:case"end":return Mi.stop()}},jn,this,[[0,8]])}));function Hn(jn){return ln.apply(this,arguments)}return Hn}()},{key:"_adaptAndPerformTypesenseRequest",value:function(){var ln=(0,Wr.default)(Hr.default.mark(function jn(zn){var Wn,ei;return Hr.default.wrap(function($i){for(;;)switch($i.prev=$i.next){case 0:return Wn=new rn.SearchRequestAdapter(zn,this.typesenseClient,this.configuration),$i.next=3,Wn.request();case 3:return ei=$i.sent,$i.abrupt("return",ei);case 5:case"end":return $i.stop()}},jn,this)}));function Hn(jn){return ln.apply(this,arguments)}return Hn}()},{key:"clearCache",value:function(){return this.typesenseClient=new tn.SearchClient(this.configuration.server),this.searchClient}},{key:"updateConfiguration",value:function(ln){return this.configuration=new en.Configuration(ln),this.configuration.validate(),this.typesenseClient=new tn.SearchClient(this.configuration.server),!0}},{key:"_validateTypesenseResult",value:function(ln){if(ln.error)throw new Error("".concat(ln.code," - ").concat(ln.error));if(!ln.hits&&!ln.grouped_hits)throw new Error("Did not find any hits. ".concat(ln.code," - ").concat(ln.error))}}]),$n}();Kt.default=an})(e$18);(function(){for(var Kt=[],Vt=0;Vt<256;++Vt)Kt.push("%"+((Vt<16?"0":"")+Vt.toString(16)).toUpperCase());return Kt})();function m$q(Kt,[Vt,Hr]){return Math.min(Hr,Math.max(Vt,Kt))}function h$m(Kt,Vt,{checkForDefaultPrevented:Hr=!0}={}){return function(Wr){if(Kt==null||Kt(Wr),Hr===!1||!Wr.defaultPrevented)return Vt==null?void 0:Vt(Wr)}}function c$n(Kt,Vt){typeof Kt=="function"?Kt(Vt):Kt!=null&&(Kt.current=Vt)}function u$m(...Kt){return Vt=>Kt.forEach(Hr=>c$n(Hr,Vt))}function i$e(...Kt){return reactExports.useCallback(u$m(...Kt),Kt)}function P$f(Kt,Vt=[]){let Hr=[];function Wr(Zr,en){const tn=reactExports.createContext(en),rn=Hr.length;Hr=[...Hr,en];function nn(an){const{scope:$n,children:ln,...Hn}=an,jn=($n==null?void 0:$n[Kt][rn])||tn,zn=reactExports.useMemo(()=>Hn,Object.values(Hn));return m$K.jsx(jn.Provider,{value:zn,children:ln})}function on(an,$n){const ln=($n==null?void 0:$n[Kt][rn])||tn,Hn=reactExports.useContext(ln);if(Hn)return Hn;if(en!==void 0)return en;throw new Error(`\`${an}\` must be used within \`${Zr}\``)}return nn.displayName=Zr+"Provider",[nn,on]}const Yr=()=>{const Zr=Hr.map(en=>reactExports.createContext(en));return function(en){const tn=(en==null?void 0:en[Kt])||Zr;return reactExports.useMemo(()=>({[`__scope${Kt}`]:{...en,[Kt]:tn}}),[en,tn])}};return Yr.scopeName=Kt,[Wr,h$l(Yr,...Vt)]}function h$l(...Kt){const Vt=Kt[0];if(Kt.length===1)return Vt;const Hr=()=>{const Wr=Kt.map(Yr=>({useScope:Yr(),scopeName:Yr.scopeName}));return function(Yr){const Zr=Wr.reduce((en,{useScope:tn,scopeName:rn})=>{const nn=tn(Yr)[`__scope${rn}`];return{...en,...nn}},{});return reactExports.useMemo(()=>({[`__scope${Vt.scopeName}`]:Zr}),[Zr])}};return Hr.scopeName=Vt.scopeName,Hr}function o$v(Kt){const Vt=reactExports.useRef(Kt);return reactExports.useEffect(()=>{Vt.current=Kt}),reactExports.useMemo(()=>(...Hr)=>{var Wr;return(Wr=Vt.current)==null?void 0:Wr.call(Vt,...Hr)},[])}function R$7({prop:Kt,defaultProp:Vt,onChange:Hr=()=>{}}){const[Wr,Yr]=v$g({defaultProp:Vt,onChange:Hr}),Zr=Kt!==void 0,en=Zr?Kt:Wr,tn=o$v(Hr),rn=reactExports.useCallback(nn=>{if(Zr){const on=typeof nn=="function"?nn(Kt):nn;on!==Kt&&tn(on)}else Yr(nn)},[Zr,Kt,Yr,tn]);return[en,rn]}function v$g({defaultProp:Kt,onChange:Vt}){const Hr=reactExports.useState(Kt),[Wr]=Hr,Yr=reactExports.useRef(Wr),Zr=o$v(Vt);return reactExports.useEffect(()=>{Yr.current!==Wr&&(Zr(Wr),Yr.current=Wr)},[Wr,Yr,Zr]),Hr}var r$k=reactExports.createContext(void 0);function n$8(Kt){const Vt=reactExports.useContext(r$k);return Kt||Vt||"ltr"}function t$4(Kt){const Vt=reactExports.useRef({value:Kt,previous:Kt});return reactExports.useMemo(()=>(Vt.current.value!==Kt&&(Vt.current.previous=Vt.current.value,Vt.current.value=Kt),Vt.current.previous),[Kt])}var o$u=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{};function c$m(Kt){const[Vt,Hr]=reactExports.useState(void 0);return o$u(()=>{if(Kt){Hr({width:Kt.offsetWidth,height:Kt.offsetHeight});const Wr=new ResizeObserver(Yr=>{if(!Array.isArray(Yr)||!Yr.length)return;const Zr=Yr[0];let en,tn;if("borderBoxSize"in Zr){const rn=Zr.borderBoxSize,nn=Array.isArray(rn)?rn[0]:rn;en=nn.inlineSize,tn=nn.blockSize}else en=Kt.offsetWidth,tn=Kt.offsetHeight;Hr({width:en,height:tn})});return Wr.observe(Kt,{box:"border-box"}),()=>Wr.unobserve(Kt)}else Hr(void 0)},[Kt]),Vt}var d$r=reactExports.forwardRef((Kt,Vt)=>{const{children:Hr,...Wr}=Kt,Yr=reactExports.Children.toArray(Hr),Zr=Yr.find(g$k);if(Zr){const en=Zr.props.children,tn=Yr.map(rn=>rn===Zr?reactExports.Children.count(en)>1?reactExports.Children.only(null):reactExports.isValidElement(en)?en.props.children:null:rn);return m$K.jsx(f$l,{...Wr,ref:Vt,children:reactExports.isValidElement(en)?reactExports.cloneElement(en,void 0,tn):null})}return m$K.jsx(f$l,{...Wr,ref:Vt,children:Hr})});d$r.displayName="Slot";var f$l=reactExports.forwardRef((Kt,Vt)=>{const{children:Hr,...Wr}=Kt;if(reactExports.isValidElement(Hr)){const Yr=h$k(Hr);return reactExports.cloneElement(Hr,{...y$c(Wr,Hr.props),ref:Vt?u$m(Vt,Yr):Yr})}return reactExports.Children.count(Hr)>1?reactExports.Children.only(null):null});f$l.displayName="SlotClone";var m$p=({children:Kt})=>m$K.jsx(m$K.Fragment,{children:Kt});function g$k(Kt){return reactExports.isValidElement(Kt)&&Kt.type===m$p}function y$c(Kt,Vt){const Hr={...Vt};for(const Wr in Vt){const Yr=Kt[Wr],Zr=Vt[Wr];/^on[A-Z]/.test(Wr)?Yr&&Zr?Hr[Wr]=(...en)=>{Zr(...en),Yr(...en)}:Yr&&(Hr[Wr]=Yr):Wr==="style"?Hr[Wr]={...Yr,...Zr}:Wr==="className"&&(Hr[Wr]=[Yr,Zr].filter(Boolean).join(" "))}return{...Kt,...Hr}}function h$k(Kt){var Vt,Hr;let Wr=(Vt=Object.getOwnPropertyDescriptor(Kt.props,"ref"))==null?void 0:Vt.get,Yr=Wr&&"isReactWarning"in Wr&&Wr.isReactWarning;return Yr?Kt.ref:(Wr=(Hr=Object.getOwnPropertyDescriptor(Kt,"ref"))==null?void 0:Hr.get,Yr=Wr&&"isReactWarning"in Wr&&Wr.isReactWarning,Yr?Kt.props.ref:Kt.props.ref||Kt.ref)}var u$l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],c$l=u$l.reduce((Kt,Vt)=>{const Hr=reactExports.forwardRef((Wr,Yr)=>{const{asChild:Zr,...en}=Wr,tn=Zr?d$r:Vt;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m$K.jsx(tn,{...en,ref:Yr})});return Hr.displayName=`Primitive.${Vt}`,{...Kt,[Vt]:Hr}},{});function L$h(Kt){const Vt=Kt+"CollectionProvider",[Hr,Wr]=P$f(Vt),[Yr,Zr]=Hr(Vt,{collectionRef:{current:null},itemMap:new Map}),en=ln=>{const{scope:Hn,children:jn}=ln,zn=React.useRef(null),Wn=React.useRef(new Map).current;return m$K.jsx(Yr,{scope:Hn,itemMap:Wn,collectionRef:zn,children:jn})};en.displayName=Vt;const tn=Kt+"CollectionSlot",rn=React.forwardRef((ln,Hn)=>{const{scope:jn,children:zn}=ln,Wn=Zr(tn,jn),ei=i$e(Hn,Wn.collectionRef);return m$K.jsx(d$r,{ref:ei,children:zn})});rn.displayName=tn;const nn=Kt+"CollectionItemSlot",on="data-radix-collection-item",an=React.forwardRef((ln,Hn)=>{const{scope:jn,children:zn,...Wn}=ln,ei=React.useRef(null),$i=i$e(Hn,ei),Mi=Zr(nn,jn);return React.useEffect(()=>(Mi.itemMap.set(ei,{ref:ei,...Wn}),()=>void Mi.itemMap.delete(ei))),m$K.jsx(d$r,{[on]:"",ref:$i,children:zn})});an.displayName=nn;function $n(ln){const Hn=Zr(Kt+"CollectionConsumer",ln);return React.useCallback(()=>{const jn=Hn.collectionRef.current;if(!jn)return[];const zn=Array.from(jn.querySelectorAll(`[${on}]`));return Array.from(Hn.itemMap.values()).sort((Wn,ei)=>zn.indexOf(Wn.ref.current)-zn.indexOf(ei.ref.current))},[Hn.collectionRef,Hn.itemMap])}return[{Provider:en,Slot:rn,ItemSlot:an},$n,Wr]}var $$3=["PageUp","PageDown"],X$d=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],G$d={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},A$b="Slider",[H$e,fe$7,me$5]=L$h(A$b),[W$9,He$6]=P$f(A$b,[me$5]),[pe$7,T$j]=W$9(A$b),q$c=reactExports.forwardRef((Kt,Vt)=>{const{name:Hr,min:Wr=0,max:Yr=100,step:Zr=1,orientation:en="horizontal",disabled:tn=!1,minStepsBetweenThumbs:rn=0,defaultValue:nn=[Wr],value:on,onValueChange:an=()=>{},onValueCommit:$n=()=>{},inverted:ln=!1,...Hn}=Kt,jn=reactExports.useRef(new Set),zn=reactExports.useRef(0),Wn=en==="horizontal"?he$7:Se$6,[ei=[],$i]=R$7({prop:on,defaultProp:nn,onChange:Ws=>{var Hs;(Hs=[...jn.current][zn.current])==null||Hs.focus(),an(Ws)}}),Mi=reactExports.useRef(ei);function Ni(Ws){const Hs=be$4(ei,Ws);$s(Ws,Hs)}function Ts(Ws){$s(Ws,zn.current)}function ps(){const Ws=Mi.current[zn.current];ei[zn.current]!==Ws&&$n(ei)}function $s(Ws,Hs,{commit:js}={commit:!1}){const zs=De$3(Zr),Xs=Ee$7(Math.round((Ws-Wr)/Zr)*Zr+Wr,zs),ia=m$q(Xs,[Wr,Yr]);$i((Qs=[])=>{const Zs=xe$5(Qs,ia,Hs);if(ye$5(Zs,rn*Zr)){zn.current=Zs.indexOf(ia);const Gs=String(Zs)!==String(Qs);return Gs&&js&&$n(Zs),Gs?Zs:Qs}else return Qs})}return m$K.jsx(pe$7,{scope:Kt.__scopeSlider,name:Hr,disabled:tn,min:Wr,max:Yr,valueIndexToChangeRef:zn,thumbs:jn.current,values:ei,orientation:en,children:m$K.jsx(H$e.Provider,{scope:Kt.__scopeSlider,children:m$K.jsx(H$e.Slot,{scope:Kt.__scopeSlider,children:m$K.jsx(Wn,{"aria-disabled":tn,"data-disabled":tn?"":void 0,...Hn,ref:Vt,onPointerDown:h$m(Hn.onPointerDown,()=>{tn||(Mi.current=ei)}),min:Wr,max:Yr,inverted:ln,onSlideStart:tn?void 0:Ni,onSlideMove:tn?void 0:Ts,onSlideEnd:tn?void 0:ps,onHomeKeyDown:()=>!tn&&$s(Wr,0,{commit:!0}),onEndKeyDown:()=>!tn&&$s(Yr,ei.length-1,{commit:!0}),onStepKeyDown:({event:Ws,direction:Hs})=>{if(!tn){const js=$$3.includes(Ws.key)||Ws.shiftKey&&X$d.includes(Ws.key)?10:1,zs=zn.current,Xs=ei[zs],ia=Zr*js*Hs;$s(Xs+ia,zs,{commit:!0})}}})})})})});q$c.displayName=A$b;var[J$9,Q$a]=W$9(A$b,{startEdge:"left",endEdge:"right",size:"width",direction:1}),he$7=reactExports.forwardRef((Kt,Vt)=>{const{min:Hr,max:Wr,dir:Yr,inverted:Zr,onSlideStart:en,onSlideMove:tn,onSlideEnd:rn,onStepKeyDown:nn,...on}=Kt,[an,$n]=reactExports.useState(null),ln=i$e(Vt,$i=>$n($i)),Hn=reactExports.useRef(),jn=n$8(Yr),zn=jn==="ltr",Wn=zn&&!Zr||!zn&&Zr;function ei($i){const Mi=Hn.current||an.getBoundingClientRect(),Ni=[0,Mi.width],Ts=O$j(Ni,Wn?[Hr,Wr]:[Wr,Hr]);return Hn.current=Mi,Ts($i-Mi.left)}return m$K.jsx(J$9,{scope:Kt.__scopeSlider,startEdge:Wn?"left":"right",endEdge:Wn?"right":"left",direction:Wn?1:-1,size:"width",children:m$K.jsx(Z$a,{dir:jn,"data-orientation":"horizontal",...on,ref:ln,style:{...on.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:$i=>{const Mi=ei($i.clientX);en==null||en(Mi)},onSlideMove:$i=>{const Mi=ei($i.clientX);tn==null||tn(Mi)},onSlideEnd:()=>{Hn.current=void 0,rn==null||rn()},onStepKeyDown:$i=>{const Mi=G$d[Wn?"from-left":"from-right"].includes($i.key);nn==null||nn({event:$i,direction:Mi?-1:1})}})})}),Se$6=reactExports.forwardRef((Kt,Vt)=>{const{min:Hr,max:Wr,inverted:Yr,onSlideStart:Zr,onSlideMove:en,onSlideEnd:tn,onStepKeyDown:rn,...nn}=Kt,on=reactExports.useRef(null),an=i$e(Vt,on),$n=reactExports.useRef(),ln=!Yr;function Hn(jn){const zn=$n.current||on.current.getBoundingClientRect(),Wn=[0,zn.height],ei=O$j(Wn,ln?[Wr,Hr]:[Hr,Wr]);return $n.current=zn,ei(jn-zn.top)}return m$K.jsx(J$9,{scope:Kt.__scopeSlider,startEdge:ln?"bottom":"top",endEdge:ln?"top":"bottom",size:"height",direction:ln?1:-1,children:m$K.jsx(Z$a,{"data-orientation":"vertical",...nn,ref:an,style:{...nn.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:jn=>{const zn=Hn(jn.clientY);Zr==null||Zr(zn)},onSlideMove:jn=>{const zn=Hn(jn.clientY);en==null||en(zn)},onSlideEnd:()=>{$n.current=void 0,tn==null||tn()},onStepKeyDown:jn=>{const zn=G$d[ln?"from-bottom":"from-top"].includes(jn.key);rn==null||rn({event:jn,direction:zn?-1:1})}})})}),Z$a=reactExports.forwardRef((Kt,Vt)=>{const{__scopeSlider:Hr,onSlideStart:Wr,onSlideMove:Yr,onSlideEnd:Zr,onHomeKeyDown:en,onEndKeyDown:tn,onStepKeyDown:rn,...nn}=Kt,on=T$j(A$b,Hr);return m$K.jsx(c$l.span,{...nn,ref:Vt,onKeyDown:h$m(Kt.onKeyDown,an=>{an.key==="Home"?(en(an),an.preventDefault()):an.key==="End"?(tn(an),an.preventDefault()):$$3.concat(X$d).includes(an.key)&&(rn(an),an.preventDefault())}),onPointerDown:h$m(Kt.onPointerDown,an=>{const $n=an.target;$n.setPointerCapture(an.pointerId),an.preventDefault(),on.thumbs.has($n)?$n.focus():Wr(an)}),onPointerMove:h$m(Kt.onPointerMove,an=>{an.target.hasPointerCapture(an.pointerId)&&Yr(an)}),onPointerUp:h$m(Kt.onPointerUp,an=>{const $n=an.target;$n.hasPointerCapture(an.pointerId)&&($n.releasePointerCapture(an.pointerId),Zr(an))})})}),ee$7="SliderTrack",te$6=reactExports.forwardRef((Kt,Vt)=>{const{__scopeSlider:Hr,...Wr}=Kt,Yr=T$j(ee$7,Hr);return m$K.jsx(c$l.span,{"data-disabled":Yr.disabled?"":void 0,"data-orientation":Yr.orientation,...Wr,ref:Vt})});te$6.displayName=ee$7;var z$9="SliderRange",ne$8=reactExports.forwardRef((Kt,Vt)=>{const{__scopeSlider:Hr,...Wr}=Kt,Yr=T$j(z$9,Hr),Zr=Q$a(z$9,Hr),en=reactExports.useRef(null),tn=i$e(Vt,en),rn=Yr.values.length,nn=Yr.values.map($n=>re$5($n,Yr.min,Yr.max)),on=rn>1?Math.min(...nn):0,an=100-Math.max(...nn);return m$K.jsx(c$l.span,{"data-orientation":Yr.orientation,"data-disabled":Yr.disabled?"":void 0,...Wr,ref:tn,style:{...Kt.style,[Zr.startEdge]:on+"%",[Zr.endEdge]:an+"%"}})});ne$8.displayName=z$9;var N$f="SliderThumb",oe$8=reactExports.forwardRef((Kt,Vt)=>{const Hr=fe$7(Kt.__scopeSlider),[Wr,Yr]=reactExports.useState(null),Zr=i$e(Vt,tn=>Yr(tn)),en=reactExports.useMemo(()=>Wr?Hr().findIndex(tn=>tn.ref.current===Wr):-1,[Hr,Wr]);return m$K.jsx(ge$3,{...Kt,ref:Zr,index:en})}),ge$3=reactExports.forwardRef((Kt,Vt)=>{const{__scopeSlider:Hr,index:Wr,name:Yr,...Zr}=Kt,en=T$j(N$f,Hr),tn=Q$a(N$f,Hr),[rn,nn]=reactExports.useState(null),on=i$e(Vt,ei=>nn(ei)),an=rn?!!rn.closest("form"):!0,$n=c$m(rn),ln=en.values[Wr],Hn=ln===void 0?0:re$5(ln,en.min,en.max),jn=we$2(Wr,en.values.length),zn=$n==null?void 0:$n[tn.size],Wn=zn?Pe$3(zn,Hn,tn.direction):0;return reactExports.useEffect(()=>{if(rn)return en.thumbs.add(rn),()=>{en.thumbs.delete(rn)}},[rn,en.thumbs]),m$K.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[tn.startEdge]:`calc(${Hn}% + ${Wn}px)`},children:[m$K.jsx(H$e.ItemSlot,{scope:Kt.__scopeSlider,children:m$K.jsx(c$l.span,{role:"slider","aria-label":Kt["aria-label"]||jn,"aria-valuemin":en.min,"aria-valuenow":ln,"aria-valuemax":en.max,"aria-orientation":en.orientation,"data-orientation":en.orientation,"data-disabled":en.disabled?"":void 0,tabIndex:en.disabled?void 0:0,...Zr,ref:on,style:ln===void 0?{display:"none"}:Kt.style,onFocus:h$m(Kt.onFocus,()=>{en.valueIndexToChangeRef.current=Wr})})}),an&&m$K.jsx(ve$4,{name:Yr??(en.name?en.name+(en.values.length>1?"[]":""):void 0),value:ln},Wr)]})});oe$8.displayName=N$f;var ve$4=Kt=>{const{value:Vt,...Hr}=Kt,Wr=reactExports.useRef(null),Yr=t$4(Vt);return reactExports.useEffect(()=>{const Zr=Wr.current,en=window.HTMLInputElement.prototype,tn=Object.getOwnPropertyDescriptor(en,"value").set;if(Yr!==Vt&&tn){const rn=new Event("input",{bubbles:!0});tn.call(Zr,Vt),Zr.dispatchEvent(rn)}},[Yr,Vt]),m$K.jsx("input",{style:{display:"none"},...Hr,ref:Wr,defaultValue:Vt})};function xe$5(Kt=[],Vt,Hr){const Wr=[...Kt];return Wr[Hr]=Vt,Wr.sort((Yr,Zr)=>Yr-Zr)}function re$5(Kt,Vt,Hr){const Wr=100/(Hr-Vt)*(Kt-Vt);return m$q(Wr,[0,100])}function we$2(Kt,Vt){return Vt>2?`Value ${Kt+1} of ${Vt}`:Vt===2?["Minimum","Maximum"][Kt]:void 0}function be$4(Kt,Vt){if(Kt.length===1)return 0;const Hr=Kt.map(Yr=>Math.abs(Yr-Vt)),Wr=Math.min(...Hr);return Hr.indexOf(Wr)}function Pe$3(Kt,Vt,Hr){const Wr=Kt/2,Yr=O$j([0,50],[0,Wr]);return(Wr-Yr(Vt)*Hr)*Hr}function Re$5(Kt){return Kt.slice(0,-1).map((Vt,Hr)=>Kt[Hr+1]-Vt)}function ye$5(Kt,Vt){if(Vt>0){const Hr=Re$5(Kt);return Math.min(...Hr)>=Vt}return!0}function O$j(Kt,Vt){return Hr=>{if(Kt[0]===Kt[1]||Vt[0]===Vt[1])return Vt[0];const Wr=(Vt[1]-Vt[0])/(Kt[1]-Kt[0]);return Vt[0]+Wr*(Hr-Kt[0])}}function De$3(Kt){return(String(Kt).split(".")[1]||"").length}function Ee$7(Kt,Vt){const Hr=Math.pow(10,Vt);return Math.round(Kt*Hr)/Hr}function h$j(Kt,Vt,{checkForDefaultPrevented:Hr=!0}={}){return function(Wr){if(Kt==null||Kt(Wr),Hr===!1||!Wr.defaultPrevented)return Vt==null?void 0:Vt(Wr)}}function c$k(Kt,Vt){typeof Kt=="function"?Kt(Vt):Kt!=null&&(Kt.current=Vt)}function u$k(...Kt){return Vt=>Kt.forEach(Hr=>c$k(Hr,Vt))}function i$d(...Kt){return reactExports.useCallback(u$k(...Kt),Kt)}function P$e(Kt,Vt=[]){let Hr=[];function Wr(Zr,en){const tn=reactExports.createContext(en),rn=Hr.length;Hr=[...Hr,en];function nn(an){const{scope:$n,children:ln,...Hn}=an,jn=($n==null?void 0:$n[Kt][rn])||tn,zn=reactExports.useMemo(()=>Hn,Object.values(Hn));return m$K.jsx(jn.Provider,{value:zn,children:ln})}function on(an,$n){const ln=($n==null?void 0:$n[Kt][rn])||tn,Hn=reactExports.useContext(ln);if(Hn)return Hn;if(en!==void 0)return en;throw new Error(`\`${an}\` must be used within \`${Zr}\``)}return nn.displayName=Zr+"Provider",[nn,on]}const Yr=()=>{const Zr=Hr.map(en=>reactExports.createContext(en));return function(en){const tn=(en==null?void 0:en[Kt])||Zr;return reactExports.useMemo(()=>({[`__scope${Kt}`]:{...en,[Kt]:tn}}),[en,tn])}};return Yr.scopeName=Kt,[Wr,h$i(Yr,...Vt)]}function h$i(...Kt){const Vt=Kt[0];if(Kt.length===1)return Vt;const Hr=()=>{const Wr=Kt.map(Yr=>({useScope:Yr(),scopeName:Yr.scopeName}));return function(Yr){const Zr=Wr.reduce((en,{useScope:tn,scopeName:rn})=>{const nn=tn(Yr)[`__scope${rn}`];return{...en,...nn}},{});return reactExports.useMemo(()=>({[`__scope${Vt.scopeName}`]:Zr}),[Zr])}};return Hr.scopeName=Vt.scopeName,Hr}var d$q=reactExports.forwardRef((Kt,Vt)=>{const{children:Hr,...Wr}=Kt,Yr=reactExports.Children.toArray(Hr),Zr=Yr.find(g$j);if(Zr){const en=Zr.props.children,tn=Yr.map(rn=>rn===Zr?reactExports.Children.count(en)>1?reactExports.Children.only(null):reactExports.isValidElement(en)?en.props.children:null:rn);return m$K.jsx(f$k,{...Wr,ref:Vt,children:reactExports.isValidElement(en)?reactExports.cloneElement(en,void 0,tn):null})}return m$K.jsx(f$k,{...Wr,ref:Vt,children:Hr})});d$q.displayName="Slot";var f$k=reactExports.forwardRef((Kt,Vt)=>{const{children:Hr,...Wr}=Kt;if(reactExports.isValidElement(Hr)){const Yr=h$h(Hr);return reactExports.cloneElement(Hr,{...y$b(Wr,Hr.props),ref:Vt?u$k(Vt,Yr):Yr})}return reactExports.Children.count(Hr)>1?reactExports.Children.only(null):null});f$k.displayName="SlotClone";var m$o=({children:Kt})=>m$K.jsx(m$K.Fragment,{children:Kt});function g$j(Kt){return reactExports.isValidElement(Kt)&&Kt.type===m$o}function y$b(Kt,Vt){const Hr={...Vt};for(const Wr in Vt){const Yr=Kt[Wr],Zr=Vt[Wr];/^on[A-Z]/.test(Wr)?Yr&&Zr?Hr[Wr]=(...en)=>{Zr(...en),Yr(...en)}:Yr&&(Hr[Wr]=Yr):Wr==="style"?Hr[Wr]={...Yr,...Zr}:Wr==="className"&&(Hr[Wr]=[Yr,Zr].filter(Boolean).join(" "))}return{...Kt,...Hr}}function h$h(Kt){var Vt,Hr;let Wr=(Vt=Object.getOwnPropertyDescriptor(Kt.props,"ref"))==null?void 0:Vt.get,Yr=Wr&&"isReactWarning"in Wr&&Wr.isReactWarning;return Yr?Kt.ref:(Wr=(Hr=Object.getOwnPropertyDescriptor(Kt,"ref"))==null?void 0:Hr.get,Yr=Wr&&"isReactWarning"in Wr&&Wr.isReactWarning,Yr?Kt.props.ref:Kt.props.ref||Kt.ref)}var c$j=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],v$f=c$j.reduce((Kt,Vt)=>{const Hr=reactExports.forwardRef((Wr,Yr)=>{const{asChild:Zr,...en}=Wr,tn=Zr?d$q:Vt;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m$K.jsx(tn,{...en,ref:Yr})});return Hr.displayName=`Primitive.${Vt}`,{...Kt,[Vt]:Hr}},{});function h$g(Kt,Vt){Kt&&reactDomExports.flushSync(()=>Kt.dispatchEvent(Vt))}function o$t(Kt){const Vt=reactExports.useRef(Kt);return reactExports.useEffect(()=>{Vt.current=Kt}),reactExports.useMemo(()=>(...Hr)=>{var Wr;return(Wr=Vt.current)==null?void 0:Wr.call(Vt,...Hr)},[])}function p$k(Kt,Vt=globalThis==null?void 0:globalThis.document){const Hr=o$t(Kt);reactExports.useEffect(()=>{const Wr=Yr=>{Yr.key==="Escape"&&Hr(Yr)};return Vt.addEventListener("keydown",Wr,{capture:!0}),()=>Vt.removeEventListener("keydown",Wr,{capture:!0})},[Hr,Vt])}var j$g="DismissableLayer",p$j="dismissableLayer.update",z$8="dismissableLayer.pointerDownOutside",H$d="dismissableLayer.focusOutside",L$g,T$i=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),M$j=reactExports.forwardRef((Kt,Vt)=>{const{disableOutsidePointerEvents:Hr=!1,onEscapeKeyDown:Wr,onPointerDownOutside:Yr,onFocusOutside:Zr,onInteractOutside:en,onDismiss:tn,...rn}=Kt,nn=reactExports.useContext(T$i),[on,an]=reactExports.useState(null),$n=(on==null?void 0:on.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,ln]=reactExports.useState({}),Hn=i$d(Vt,ps=>an(ps)),jn=Array.from(nn.layers),[zn]=[...nn.layersWithOutsidePointerEventsDisabled].slice(-1),Wn=jn.indexOf(zn),ei=on?jn.indexOf(on):-1,$i=nn.layersWithOutsidePointerEventsDisabled.size>0,Mi=ei>=Wn,Ni=q$b(ps=>{const $s=ps.target,Ws=[...nn.branches].some(Hs=>Hs.contains($s));!Mi||Ws||(Yr==null||Yr(ps),en==null||en(ps),ps.defaultPrevented||tn==null||tn())},$n),Ts=G$c(ps=>{const $s=ps.target;[...nn.branches].some(Ws=>Ws.contains($s))||(Zr==null||Zr(ps),en==null||en(ps),ps.defaultPrevented||tn==null||tn())},$n);return p$k(ps=>{ei===nn.layers.size-1&&(Wr==null||Wr(ps),!ps.defaultPrevented&&tn&&(ps.preventDefault(),tn()))},$n),reactExports.useEffect(()=>{if(on)return Hr&&(nn.layersWithOutsidePointerEventsDisabled.size===0&&(L$g=$n.body.style.pointerEvents,$n.body.style.pointerEvents="none"),nn.layersWithOutsidePointerEventsDisabled.add(on)),nn.layers.add(on),O$i(),()=>{Hr&&nn.layersWithOutsidePointerEventsDisabled.size===1&&($n.body.style.pointerEvents=L$g)}},[on,$n,Hr,nn]),reactExports.useEffect(()=>()=>{on&&(nn.layers.delete(on),nn.layersWithOutsidePointerEventsDisabled.delete(on),O$i())},[on,nn]),reactExports.useEffect(()=>{const ps=()=>ln({});return document.addEventListener(p$j,ps),()=>document.removeEventListener(p$j,ps)},[]),m$K.jsx(v$f.div,{...rn,ref:Hn,style:{pointerEvents:$i?Mi?"auto":"none":void 0,...Kt.style},onFocusCapture:h$j(Kt.onFocusCapture,Ts.onFocusCapture),onBlurCapture:h$j(Kt.onBlurCapture,Ts.onBlurCapture),onPointerDownCapture:h$j(Kt.onPointerDownCapture,Ni.onPointerDownCapture)})});M$j.displayName=j$g;var X$c="DismissableLayerBranch",Y$b=reactExports.forwardRef((Kt,Vt)=>{const Hr=reactExports.useContext(T$i),Wr=reactExports.useRef(null),Yr=i$d(Vt,Wr);return reactExports.useEffect(()=>{const Zr=Wr.current;if(Zr)return Hr.branches.add(Zr),()=>{Hr.branches.delete(Zr)}},[Hr.branches]),m$K.jsx(v$f.div,{...Kt,ref:Yr})});Y$b.displayName=X$c;function q$b(Kt,Vt=globalThis==null?void 0:globalThis.document){const Hr=o$t(Kt),Wr=reactExports.useRef(!1),Yr=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const Zr=tn=>{if(tn.target&&!Wr.current){let rn=function(){B$f(z$8,Hr,nn,{discrete:!0})};const nn={originalEvent:tn};tn.pointerType==="touch"?(Vt.removeEventListener("click",Yr.current),Yr.current=rn,Vt.addEventListener("click",Yr.current,{once:!0})):rn()}else Vt.removeEventListener("click",Yr.current);Wr.current=!1},en=window.setTimeout(()=>{Vt.addEventListener("pointerdown",Zr)},0);return()=>{window.clearTimeout(en),Vt.removeEventListener("pointerdown",Zr),Vt.removeEventListener("click",Yr.current)}},[Vt,Hr]),{onPointerDownCapture:()=>Wr.current=!0}}function G$c(Kt,Vt=globalThis==null?void 0:globalThis.document){const Hr=o$t(Kt),Wr=reactExports.useRef(!1);return reactExports.useEffect(()=>{const Yr=Zr=>{Zr.target&&!Wr.current&&B$f(H$d,Hr,{originalEvent:Zr},{discrete:!1})};return Vt.addEventListener("focusin",Yr),()=>Vt.removeEventListener("focusin",Yr)},[Vt,Hr]),{onFocusCapture:()=>Wr.current=!0,onBlurCapture:()=>Wr.current=!1}}function O$i(){const Kt=new CustomEvent(p$j);document.dispatchEvent(Kt)}function B$f(Kt,Vt,Hr,{discrete:Wr}){const Yr=Hr.originalEvent.target,Zr=new CustomEvent(Kt,{bubbles:!1,cancelable:!0,detail:Hr});Vt&&Yr.addEventListener(Kt,Vt,{once:!0}),Wr?h$g(Yr,Zr):Yr.dispatchEvent(Zr)}var o$s=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},v$e="Arrow",e$r=reactExports.forwardRef((Kt,Vt)=>{const{children:Hr,width:Wr=10,height:Yr=5,...Zr}=Kt;return m$K.jsx(v$f.svg,{...Zr,ref:Vt,width:Wr,height:Yr,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:Kt.asChild?Hr:m$K.jsx("polygon",{points:"0,0 30,0 15,10"})})});e$r.displayName=v$e;var h$f=e$r;function c$i(Kt){const[Vt,Hr]=reactExports.useState(void 0);return o$s(()=>{if(Kt){Hr({width:Kt.offsetWidth,height:Kt.offsetHeight});const Wr=new ResizeObserver(Yr=>{if(!Array.isArray(Yr)||!Yr.length)return;const Zr=Yr[0];let en,tn;if("borderBoxSize"in Zr){const rn=Zr.borderBoxSize,nn=Array.isArray(rn)?rn[0]:rn;en=nn.inlineSize,tn=nn.blockSize}else en=Kt.offsetWidth,tn=Kt.offsetHeight;Hr({width:en,height:tn})});return Wr.observe(Kt,{box:"border-box"}),()=>Wr.unobserve(Kt)}else Hr(void 0)},[Kt]),Vt}var N$e="Popper",[L$f,qe$2]=P$e(N$e),[$e$4,Z$9]=L$f(N$e),q$a="PopperAnchor",G$b=reactExports.forwardRef((Kt,Vt)=>{const{__scopePopper:Hr,virtualRef:Wr,...Yr}=Kt,Zr=Z$9(q$a,Hr),en=reactExports.useRef(null),tn=i$d(Vt,en);return reactExports.useEffect(()=>{Zr.onAnchorChange((Wr==null?void 0:Wr.current)||en.current)}),Wr?null:m$K.jsx(v$f.div,{...Yr,ref:tn})});G$b.displayName=q$a;var _$f="PopperContent",[je$4,He$5]=L$f(_$f),J$8=reactExports.forwardRef((Kt,Vt)=>{var Hr,Wr,Yr,Zr,en,tn;const{__scopePopper:rn,side:nn="bottom",sideOffset:on=0,align:an="center",alignOffset:$n=0,arrowPadding:ln=0,avoidCollisions:Hn=!0,collisionBoundary:jn=[],collisionPadding:zn=0,sticky:Wn="partial",hideWhenDetached:ei=!1,updatePositionStrategy:$i="optimized",onPlaced:Mi,...Ni}=Kt,Ts=Z$9(_$f,rn),[ps,$s]=reactExports.useState(null),Ws=i$d(Vt,Zi=>$s(Zi)),[Hs,js]=reactExports.useState(null),zs=c$i(Hs),Xs=(zs==null?void 0:zs.width)??0,ia=(zs==null?void 0:zs.height)??0,Qs=nn+(an!=="center"?"-"+an:""),Zs=typeof zn=="number"?zn:{top:0,right:0,bottom:0,left:0,...zn},Gs=Array.isArray(jn)?jn:[jn],Hl=Gs.length>0,Js={padding:Zs,boundary:Gs.filter(Ie$6),altBoundary:Hl},{refs:sa,floatingStyles:Ca,placement:tc,isPositioned:zl,middlewareData:ec}=X$f({strategy:"fixed",placement:Qs,whileElementsMounted:(...Zi)=>Ot(...Zi,{animationFrame:$i==="always"}),elements:{reference:Ts.anchor},middleware:[ae$8({mainAxis:on+ia,alignmentAxis:$n}),Hn&&Ft({mainAxis:!0,crossAxis:!1,limiter:Wn==="partial"?It$3():void 0,...Js}),Hn&&Wt$1({...Js}),Bt$2({...Js,apply:({elements:Zi,rects:qs,availableWidth:ql,availableHeight:Vl})=>{const{width:Wl,height:hc}=qs.reference,nc=Zi.floating.style;nc.setProperty("--radix-popper-available-width",`${ql}px`),nc.setProperty("--radix-popper-available-height",`${Vl}px`),nc.setProperty("--radix-popper-anchor-width",`${Wl}px`),nc.setProperty("--radix-popper-anchor-height",`${hc}px`)}}),Hs&&T$o({element:Hs,padding:ln}),Ye$3({arrowWidth:Xs,arrowHeight:ia}),ei&&zt$1({strategy:"referenceHidden",...Js})]}),[sc,ac]=V$a(tc),rc=o$t(Mi);o$s(()=>{zl&&(rc==null||rc())},[zl,rc]);const uc=(Hr=ec.arrow)==null?void 0:Hr.x,pc=(Wr=ec.arrow)==null?void 0:Wr.y,cc=((Yr=ec.arrow)==null?void 0:Yr.centerOffset)!==0,[$c,Ec]=reactExports.useState();return o$s(()=>{ps&&Ec(window.getComputedStyle(ps).zIndex)},[ps]),m$K.jsx("div",{ref:sa.setFloating,"data-radix-popper-content-wrapper":"",style:{...Ca,transform:zl?Ca.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$c,"--radix-popper-transform-origin":[(Zr=ec.transformOrigin)==null?void 0:Zr.x,(en=ec.transformOrigin)==null?void 0:en.y].join(" "),...((tn=ec.hide)==null?void 0:tn.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:Kt.dir,children:m$K.jsx(je$4,{scope:rn,placedSide:sc,onArrowChange:js,arrowX:uc,arrowY:pc,shouldHideArrow:cc,children:m$K.jsx(v$f.div,{"data-side":sc,"data-align":ac,...Ni,ref:Ws,style:{...Ni.style,animation:zl?void 0:"none"}})})})});J$8.displayName=_$f;var K$7="PopperArrow",We$5={top:"bottom",right:"left",bottom:"top",left:"right"},Q$9=reactExports.forwardRef(function(Kt,Vt){const{__scopePopper:Hr,...Wr}=Kt,Yr=He$5(K$7,Hr),Zr=We$5[Yr.placedSide];return m$K.jsx("span",{ref:Yr.onArrowChange,style:{position:"absolute",left:Yr.arrowX,top:Yr.arrowY,[Zr]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[Yr.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[Yr.placedSide],visibility:Yr.shouldHideArrow?"hidden":void 0},children:m$K.jsx(h$f,{...Wr,ref:Vt,style:{...Wr.style,display:"block"}})})});Q$9.displayName=K$7;function Ie$6(Kt){return Kt!==null}var Ye$3=Kt=>({name:"transformOrigin",options:Kt,fn(Vt){var Hr,Wr,Yr;const{placement:Zr,rects:en,middlewareData:tn}=Vt,rn=((Hr=tn.arrow)==null?void 0:Hr.centerOffset)!==0,nn=rn?0:Kt.arrowWidth,on=rn?0:Kt.arrowHeight,[an,$n]=V$a(Zr),ln={start:"0%",center:"50%",end:"100%"}[$n],Hn=(((Wr=tn.arrow)==null?void 0:Wr.x)??0)+nn/2,jn=(((Yr=tn.arrow)==null?void 0:Yr.y)??0)+on/2;let zn="",Wn="";return an==="bottom"?(zn=rn?ln:`${Hn}px`,Wn=`${-on}px`):an==="top"?(zn=rn?ln:`${Hn}px`,Wn=`${en.floating.height+on}px`):an==="right"?(zn=`${-on}px`,Wn=rn?ln:`${jn}px`):an==="left"&&(zn=`${en.floating.width+on}px`,Wn=rn?ln:`${jn}px`),{data:{x:zn,y:Wn}}}});function V$a(Kt){const[Vt,Hr="center"]=Kt.split("-");return[Vt,Hr]}var Je$1=G$b,Ke$2=J$8,Qe$2=Q$9;function E$b(Kt,Vt){return reactExports.useReducer((Hr,Wr)=>Vt[Hr][Wr]??Hr,Kt)}var M$i=Kt=>{const{present:Vt,children:Hr}=Kt,Wr=R$6(Vt),Yr=typeof Hr=="function"?Hr({present:Wr.isPresent}):reactExports.Children.only(Hr),Zr=i$d(Wr.ref,T$h(Yr));return typeof Hr=="function"||Wr.isPresent?reactExports.cloneElement(Yr,{ref:Zr}):null};M$i.displayName="Presence";function R$6(Kt){const[Vt,Hr]=reactExports.useState(),Wr=reactExports.useRef({}),Yr=reactExports.useRef(Kt),Zr=reactExports.useRef("none"),en=Kt?"mounted":"unmounted",[tn,rn]=E$b(en,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const nn=d$p(Wr.current);Zr.current=tn==="mounted"?nn:"none"},[tn]),o$s(()=>{const nn=Wr.current,on=Yr.current;if(on!==Kt){const an=Zr.current,$n=d$p(nn);Kt?rn("MOUNT"):$n==="none"||(nn==null?void 0:nn.display)==="none"?rn("UNMOUNT"):rn(on&&an!==$n?"ANIMATION_OUT":"UNMOUNT"),Yr.current=Kt}},[Kt,rn]),o$s(()=>{if(Vt){const nn=an=>{const $n=d$p(Wr.current).includes(an.animationName);an.target===Vt&&$n&&reactDomExports.flushSync(()=>rn("ANIMATION_END"))},on=an=>{an.target===Vt&&(Zr.current=d$p(Wr.current))};return Vt.addEventListener("animationstart",on),Vt.addEventListener("animationcancel",nn),Vt.addEventListener("animationend",nn),()=>{Vt.removeEventListener("animationstart",on),Vt.removeEventListener("animationcancel",nn),Vt.removeEventListener("animationend",nn)}}else rn("ANIMATION_END")},[Vt,rn]),{isPresent:["mounted","unmountSuspended"].includes(tn),ref:reactExports.useCallback(nn=>{nn&&(Wr.current=getComputedStyle(nn)),Hr(nn)},[])}}function d$p(Kt){return(Kt==null?void 0:Kt.animationName)||"none"}function T$h(Kt){var Vt,Hr;let Wr=(Vt=Object.getOwnPropertyDescriptor(Kt.props,"ref"))==null?void 0:Vt.get,Yr=Wr&&"isReactWarning"in Wr&&Wr.isReactWarning;return Yr?Kt.ref:(Wr=(Hr=Object.getOwnPropertyDescriptor(Kt,"ref"))==null?void 0:Hr.get,Yr=Wr&&"isReactWarning"in Wr&&Wr.isReactWarning,Yr?Kt.props.ref:Kt.props.ref||Kt.ref)}var d$o="VisuallyHidden",i$c=reactExports.forwardRef((Kt,Vt)=>m$K.jsx(v$f.span,{...Kt,ref:Vt,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...Kt.style}}));i$c.displayName=d$o;var m$n=i$c,[R$5,Oe$5]=P$e("Tooltip",[qe$2]),_$e=qe$2(),S$g="TooltipProvider",A$a="tooltip.open",[ne$7,k$d]=R$5(S$g),D$c="Tooltip",[se$8,O$h]=R$5(D$c),L$e="TooltipTrigger",F$a=reactExports.forwardRef((Kt,Vt)=>{const{__scopeTooltip:Hr,...Wr}=Kt,Yr=O$h(L$e,Hr),Zr=k$d(L$e,Hr),en=_$e(Hr),tn=reactExports.useRef(null),rn=i$d(Vt,tn,Yr.onTriggerChange),nn=reactExports.useRef(!1),on=reactExports.useRef(!1),an=reactExports.useCallback(()=>nn.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",an),[an]),m$K.jsx(Je$1,{asChild:!0,...en,children:m$K.jsx(v$f.button,{"aria-describedby":Yr.open?Yr.contentId:void 0,"data-state":Yr.stateAttribute,...Wr,ref:rn,onPointerMove:h$j(Kt.onPointerMove,$n=>{$n.pointerType!=="touch"&&!on.current&&!Zr.isPointerInTransitRef.current&&(Yr.onTriggerEnter(),on.current=!0)}),onPointerLeave:h$j(Kt.onPointerLeave,()=>{Yr.onTriggerLeave(),on.current=!1}),onPointerDown:h$j(Kt.onPointerDown,()=>{nn.current=!0,document.addEventListener("pointerup",an,{once:!0})}),onFocus:h$j(Kt.onFocus,()=>{nn.current||Yr.onOpen()}),onBlur:h$j(Kt.onBlur,Yr.onClose),onClick:h$j(Kt.onClick,Yr.onClose)})})});F$a.displayName=L$e;var ae$7="TooltipPortal",[Ae$3,ie$5]=R$5(ae$7,{forceMount:void 0}),b$e="TooltipContent",B$e=reactExports.forwardRef((Kt,Vt)=>{const Hr=ie$5(b$e,Kt.__scopeTooltip),{forceMount:Wr=Hr.forceMount,side:Yr="top",...Zr}=Kt,en=O$h(b$e,Kt.__scopeTooltip);return m$K.jsx(M$i,{present:Wr||en.open,children:en.disableHoverableContent?m$K.jsx(U$9,{side:Yr,...Zr,ref:Vt}):m$K.jsx(le$3,{side:Yr,...Zr,ref:Vt})})}),le$3=reactExports.forwardRef((Kt,Vt)=>{const Hr=O$h(b$e,Kt.__scopeTooltip),Wr=k$d(b$e,Kt.__scopeTooltip),Yr=reactExports.useRef(null),Zr=i$d(Vt,Yr),[en,tn]=reactExports.useState(null),{trigger:rn,onClose:nn}=Hr,on=Yr.current,{onPointerInTransitChange:an}=Wr,$n=reactExports.useCallback(()=>{tn(null),an(!1)},[an]),ln=reactExports.useCallback((Hn,jn)=>{const zn=Hn.currentTarget,Wn={x:Hn.clientX,y:Hn.clientY},ei=pe$6(Wn,zn.getBoundingClientRect()),$i=de$5(Wn,ei),Mi=fe$6(jn.getBoundingClientRect()),Ni=he$6([...$i,...Mi]);tn(Ni),an(!0)},[an]);return reactExports.useEffect(()=>()=>$n(),[$n]),reactExports.useEffect(()=>{if(rn&&on){const Hn=zn=>ln(zn,on),jn=zn=>ln(zn,rn);return rn.addEventListener("pointerleave",Hn),on.addEventListener("pointerleave",jn),()=>{rn.removeEventListener("pointerleave",Hn),on.removeEventListener("pointerleave",jn)}}},[rn,on,ln,$n]),reactExports.useEffect(()=>{if(en){const Hn=jn=>{const zn=jn.target,Wn={x:jn.clientX,y:jn.clientY},ei=(rn==null?void 0:rn.contains(zn))||(on==null?void 0:on.contains(zn)),$i=!ve$3(Wn,en);ei?$n():$i&&($n(),nn())};return document.addEventListener("pointermove",Hn),()=>document.removeEventListener("pointermove",Hn)}},[rn,on,en,nn,$n]),m$K.jsx(U$9,{...Kt,ref:Zr})}),[ce$7,ue$6]=R$5(D$c,{isInside:!1}),U$9=reactExports.forwardRef((Kt,Vt)=>{const{__scopeTooltip:Hr,children:Wr,"aria-label":Yr,onEscapeKeyDown:Zr,onPointerDownOutside:en,...tn}=Kt,rn=O$h(b$e,Hr),nn=_$e(Hr),{onClose:on}=rn;return reactExports.useEffect(()=>(document.addEventListener(A$a,on),()=>document.removeEventListener(A$a,on)),[on]),reactExports.useEffect(()=>{if(rn.trigger){const an=$n=>{const ln=$n.target;ln!=null&&ln.contains(rn.trigger)&&on()};return window.addEventListener("scroll",an,{capture:!0}),()=>window.removeEventListener("scroll",an,{capture:!0})}},[rn.trigger,on]),m$K.jsx(M$j,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:Zr,onPointerDownOutside:en,onFocusOutside:an=>an.preventDefault(),onDismiss:on,children:m$K.jsxs(Ke$2,{"data-state":rn.stateAttribute,...nn,...tn,ref:Vt,style:{...tn.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[m$K.jsx(m$o,{children:Wr}),m$K.jsx(ce$7,{scope:Hr,isInside:!0,children:m$K.jsx(m$n,{id:rn.contentId,role:"tooltip",children:Yr||Wr})})]})})});B$e.displayName=b$e;var V$9="TooltipArrow",Y$a=reactExports.forwardRef((Kt,Vt)=>{const{__scopeTooltip:Hr,...Wr}=Kt,Yr=_$e(Hr);return ue$6(V$9,Hr).isInside?null:m$K.jsx(Qe$2,{...Yr,...Wr,ref:Vt})});Y$a.displayName=V$9;function pe$6(Kt,Vt){const Hr=Math.abs(Vt.top-Kt.y),Wr=Math.abs(Vt.bottom-Kt.y),Yr=Math.abs(Vt.right-Kt.x),Zr=Math.abs(Vt.left-Kt.x);switch(Math.min(Hr,Wr,Yr,Zr)){case Zr:return"left";case Yr:return"right";case Hr:return"top";case Wr:return"bottom";default:throw new Error("unreachable")}}function de$5(Kt,Vt,Hr=5){const Wr=[];switch(Vt){case"top":Wr.push({x:Kt.x-Hr,y:Kt.y+Hr},{x:Kt.x+Hr,y:Kt.y+Hr});break;case"bottom":Wr.push({x:Kt.x-Hr,y:Kt.y-Hr},{x:Kt.x+Hr,y:Kt.y-Hr});break;case"left":Wr.push({x:Kt.x+Hr,y:Kt.y-Hr},{x:Kt.x+Hr,y:Kt.y+Hr});break;case"right":Wr.push({x:Kt.x-Hr,y:Kt.y-Hr},{x:Kt.x-Hr,y:Kt.y+Hr});break}return Wr}function fe$6(Kt){const{top:Vt,right:Hr,bottom:Wr,left:Yr}=Kt;return[{x:Yr,y:Vt},{x:Hr,y:Vt},{x:Hr,y:Wr},{x:Yr,y:Wr}]}function ve$3(Kt,Vt){const{x:Hr,y:Wr}=Kt;let Yr=!1;for(let Zr=0,en=Vt.length-1;Zr<Vt.length;en=Zr++){const tn=Vt[Zr].x,rn=Vt[Zr].y,nn=Vt[en].x,on=Vt[en].y;rn>Wr!=on>Wr&&Hr<(nn-tn)*(Wr-rn)/(on-rn)+tn&&(Yr=!Yr)}return Yr}function he$6(Kt){const Vt=Kt.slice();return Vt.sort((Hr,Wr)=>Hr.x<Wr.x?-1:Hr.x>Wr.x?1:Hr.y<Wr.y?-1:Hr.y>Wr.y?1:0),me$4(Vt)}function me$4(Kt){if(Kt.length<=1)return Kt.slice();const Vt=[];for(let Wr=0;Wr<Kt.length;Wr++){const Yr=Kt[Wr];for(;Vt.length>=2;){const Zr=Vt[Vt.length-1],en=Vt[Vt.length-2];if((Zr.x-en.x)*(Yr.y-en.y)>=(Zr.y-en.y)*(Yr.x-en.x))Vt.pop();else break}Vt.push(Yr)}Vt.pop();const Hr=[];for(let Wr=Kt.length-1;Wr>=0;Wr--){const Yr=Kt[Wr];for(;Hr.length>=2;){const Zr=Hr[Hr.length-1],en=Hr[Hr.length-2];if((Zr.x-en.x)*(Yr.y-en.y)>=(Zr.y-en.y)*(Yr.x-en.x))Hr.pop();else break}Hr.push(Yr)}return Hr.pop(),Vt.length===1&&Hr.length===1&&Vt[0].x===Hr[0].x&&Vt[0].y===Hr[0].y?Vt:Vt.concat(Hr)}/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var t$3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A$9=Kt=>Kt.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),g$i=(Kt,Vt)=>{const Hr=reactExports.forwardRef(({color:Wr="currentColor",size:Yr=24,strokeWidth:Zr=2,absoluteStrokeWidth:en,className:tn="",children:rn,...nn},on)=>reactExports.createElement("svg",{ref:on,...t$3,width:Yr,height:Yr,stroke:Wr,strokeWidth:en?Number(Zr)*24/Number(Yr):Zr,className:["lucide",`lucide-${A$9(Kt)}`,tn].join(" "),...nn},[...Vt.map(([an,$n])=>reactExports.createElement(an,$n)),...Array.isArray(rn)?rn:[rn]]));return Hr.displayName=`${Kt}`,Hr};/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */g$i("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */g$i("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);reactExports.createContext({attributes:[]});/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */g$i("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */g$i("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */g$i("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */g$i("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);function l$i(Kt,Vt=globalThis==null?void 0:globalThis.document){const Hr=o$1e(Kt);reactExports.useEffect(()=>{const Wr=Yr=>{Yr.key==="Escape"&&Hr(Yr)};return Vt.addEventListener("keydown",Wr),()=>Vt.removeEventListener("keydown",Wr)},[Hr,Vt])}const m$m="dismissableLayer.update",q$9="dismissableLayer.pointerDownOutside",G$a="dismissableLayer.focusOutside";let w$i;const J$7=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ie$4=reactExports.forwardRef((Kt,Vt)=>{var Hr;const{disableOutsidePointerEvents:Wr=!1,onEscapeKeyDown:Yr,onPointerDownOutside:Zr,onFocusOutside:en,onInteractOutside:tn,onDismiss:rn,...nn}=Kt,on=reactExports.useContext(J$7),[an,$n]=reactExports.useState(null),ln=(Hr=an==null?void 0:an.ownerDocument)!==null&&Hr!==void 0?Hr:globalThis==null?void 0:globalThis.document,[,Hn]=reactExports.useState({}),jn=d$I(Vt,$s=>$n($s)),zn=Array.from(on.layers),[Wn]=[...on.layersWithOutsidePointerEventsDisabled].slice(-1),ei=zn.indexOf(Wn),$i=an?zn.indexOf(an):-1,Mi=on.layersWithOutsidePointerEventsDisabled.size>0,Ni=$i>=ei,Ts=M$h($s=>{const Ws=$s.target,Hs=[...on.branches].some(js=>js.contains(Ws));!Ni||Hs||(Zr==null||Zr($s),tn==null||tn($s),$s.defaultPrevented||rn==null||rn())},ln),ps=Q$8($s=>{const Ws=$s.target;[...on.branches].some(Hs=>Hs.contains(Ws))||(en==null||en($s),tn==null||tn($s),$s.defaultPrevented||rn==null||rn())},ln);return l$i($s=>{$i===on.layers.size-1&&(Yr==null||Yr($s),!$s.defaultPrevented&&rn&&($s.preventDefault(),rn()))},ln),reactExports.useEffect(()=>{if(an)return Wr&&(on.layersWithOutsidePointerEventsDisabled.size===0&&(w$i=ln.body.style.pointerEvents,ln.body.style.pointerEvents="none"),on.layersWithOutsidePointerEventsDisabled.add(an)),on.layers.add(an),L$d(),()=>{Wr&&on.layersWithOutsidePointerEventsDisabled.size===1&&(ln.body.style.pointerEvents=w$i)}},[an,ln,Wr,on]),reactExports.useEffect(()=>()=>{an&&(on.layers.delete(an),on.layersWithOutsidePointerEventsDisabled.delete(an),L$d())},[an,on]),reactExports.useEffect(()=>{const $s=()=>Hn({});return document.addEventListener(m$m,$s),()=>document.removeEventListener(m$m,$s)},[]),reactExports.createElement(E$l.div,e$1x({},nn,{ref:jn,style:{pointerEvents:Mi?Ni?"auto":"none":void 0,...Kt.style},onFocusCapture:o$1f(Kt.onFocusCapture,ps.onFocusCapture),onBlurCapture:o$1f(Kt.onBlurCapture,ps.onBlurCapture),onPointerDownCapture:o$1f(Kt.onPointerDownCapture,Ts.onPointerDownCapture)}))});function M$h(Kt,Vt=globalThis==null?void 0:globalThis.document){const Hr=o$1e(Kt),Wr=reactExports.useRef(!1),Yr=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const Zr=tn=>{if(tn.target&&!Wr.current){let rn=function(){x$e(q$9,Hr,nn,{discrete:!0})};const nn={originalEvent:tn};tn.pointerType==="touch"?(Vt.removeEventListener("click",Yr.current),Yr.current=rn,Vt.addEventListener("click",Yr.current,{once:!0})):rn()}else Vt.removeEventListener("click",Yr.current);Wr.current=!1},en=window.setTimeout(()=>{Vt.addEventListener("pointerdown",Zr)},0);return()=>{window.clearTimeout(en),Vt.removeEventListener("pointerdown",Zr),Vt.removeEventListener("click",Yr.current)}},[Vt,Hr]),{onPointerDownCapture:()=>Wr.current=!0}}function Q$8(Kt,Vt=globalThis==null?void 0:globalThis.document){const Hr=o$1e(Kt),Wr=reactExports.useRef(!1);return reactExports.useEffect(()=>{const Yr=Zr=>{Zr.target&&!Wr.current&&x$e(G$a,Hr,{originalEvent:Zr},{discrete:!1})};return Vt.addEventListener("focusin",Yr),()=>Vt.removeEventListener("focusin",Yr)},[Vt,Hr]),{onFocusCapture:()=>Wr.current=!0,onBlurCapture:()=>Wr.current=!1}}function L$d(){const Kt=new CustomEvent(m$m);document.dispatchEvent(Kt)}function x$e(Kt,Vt,Hr,{discrete:Wr}){const Yr=Hr.originalEvent.target,Zr=new CustomEvent(Kt,{bubbles:!1,cancelable:!0,detail:Hr});Vt&&Yr.addEventListener(Kt,Vt,{once:!0}),Wr?b$q(Yr,Zr):Yr.dispatchEvent(Zr)}let d$n=0;function c$h(){reactExports.useEffect(()=>{var Kt,Vt;const Hr=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(Kt=Hr[0])!==null&&Kt!==void 0?Kt:n$7()),document.body.insertAdjacentElement("beforeend",(Vt=Hr[1])!==null&&Vt!==void 0?Vt:n$7()),d$n++,()=>{d$n===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(Wr=>Wr.remove()),d$n--}},[])}function n$7(){const Kt=document.createElement("span");return Kt.setAttribute("data-radix-focus-guard",""),Kt.tabIndex=0,Kt.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",Kt}const E$a="focusScope.autoFocusOnMount",b$d="focusScope.autoFocusOnUnmount",N$d={bubbles:!1,cancelable:!0},X$b=reactExports.forwardRef((Kt,Vt)=>{const{loop:Hr=!1,trapped:Wr=!1,onMountAutoFocus:Yr,onUnmountAutoFocus:Zr,...en}=Kt,[tn,rn]=reactExports.useState(null),nn=o$1e(Yr),on=o$1e(Zr),an=reactExports.useRef(null),$n=d$I(Vt,jn=>rn(jn)),ln=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(Wr){let jn=function($i){if(ln.paused||!tn)return;const Mi=$i.target;tn.contains(Mi)?an.current=Mi:d$m(an.current,{select:!0})},zn=function($i){if(ln.paused||!tn)return;const Mi=$i.relatedTarget;Mi!==null&&(tn.contains(Mi)||d$m(an.current,{select:!0}))},Wn=function($i){if(document.activeElement===document.body)for(const Mi of $i)Mi.removedNodes.length>0&&d$m(tn)};document.addEventListener("focusin",jn),document.addEventListener("focusout",zn);const ei=new MutationObserver(Wn);return tn&&ei.observe(tn,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",jn),document.removeEventListener("focusout",zn),ei.disconnect()}}},[Wr,tn,ln.paused]),reactExports.useEffect(()=>{if(tn){O$g.add(ln);const jn=document.activeElement;if(!tn.contains(jn)){const zn=new CustomEvent(E$a,N$d);tn.addEventListener(E$a,nn),tn.dispatchEvent(zn),zn.defaultPrevented||(D$b(q$8(I$9(tn)),{select:!0}),document.activeElement===jn&&d$m(tn))}return()=>{tn.removeEventListener(E$a,nn),setTimeout(()=>{const zn=new CustomEvent(b$d,N$d);tn.addEventListener(b$d,on),tn.dispatchEvent(zn),zn.defaultPrevented||d$m(jn??document.body,{select:!0}),tn.removeEventListener(b$d,on),O$g.remove(ln)},0)}}},[tn,nn,on,ln]);const Hn=reactExports.useCallback(jn=>{if(!Hr&&!Wr||ln.paused)return;const zn=jn.key==="Tab"&&!jn.altKey&&!jn.ctrlKey&&!jn.metaKey,Wn=document.activeElement;if(zn&&Wn){const ei=jn.currentTarget,[$i,Mi]=H$c(ei);$i&&Mi?!jn.shiftKey&&Wn===Mi?(jn.preventDefault(),Hr&&d$m($i,{select:!0})):jn.shiftKey&&Wn===$i&&(jn.preventDefault(),Hr&&d$m(Mi,{select:!0})):Wn===ei&&jn.preventDefault()}},[Hr,Wr,ln.paused]);return reactExports.createElement(E$l.div,e$1x({tabIndex:-1},en,{ref:$n,onKeyDown:Hn}))});function D$b(Kt,{select:Vt=!1}={}){const Hr=document.activeElement;for(const Wr of Kt)if(d$m(Wr,{select:Vt}),document.activeElement!==Hr)return}function H$c(Kt){const Vt=I$9(Kt),Hr=S$f(Vt,Kt),Wr=S$f(Vt.reverse(),Kt);return[Hr,Wr]}function I$9(Kt){const Vt=[],Hr=document.createTreeWalker(Kt,NodeFilter.SHOW_ELEMENT,{acceptNode:Wr=>{const Yr=Wr.tagName==="INPUT"&&Wr.type==="hidden";return Wr.disabled||Wr.hidden||Yr?NodeFilter.FILTER_SKIP:Wr.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;Hr.nextNode();)Vt.push(Hr.currentNode);return Vt}function S$f(Kt,Vt){for(const Hr of Kt)if(!V$8(Hr,{upTo:Vt}))return Hr}function V$8(Kt,{upTo:Vt}){if(getComputedStyle(Kt).visibility==="hidden")return!0;for(;Kt;){if(Vt!==void 0&&Kt===Vt)return!1;if(getComputedStyle(Kt).display==="none")return!0;Kt=Kt.parentElement}return!1}function W$8(Kt){return Kt instanceof HTMLInputElement&&"select"in Kt}function d$m(Kt,{select:Vt=!1}={}){if(Kt&&Kt.focus){const Hr=document.activeElement;Kt.focus({preventScroll:!0}),Kt!==Hr&&W$8(Kt)&&Vt&&Kt.select()}}const O$g=j$f();function j$f(){let Kt=[];return{add(Vt){const Hr=Kt[0];Vt!==Hr&&(Hr==null||Hr.pause()),Kt=C$i(Kt,Vt),Kt.unshift(Vt)},remove(Vt){var Hr;Kt=C$i(Kt,Vt),(Hr=Kt[0])===null||Hr===void 0||Hr.resume()}}}function C$i(Kt,Vt){const Hr=[...Kt],Wr=Hr.indexOf(Vt);return Wr!==-1&&Hr.splice(Wr,1),Hr}function q$8(Kt){return Kt.filter(Vt=>Vt.tagName!=="A")}const s$c=reactExports.forwardRef((Kt,Vt)=>{const{children:Hr,width:Wr=10,height:Yr=5,...Zr}=Kt;return reactExports.createElement(E$l.svg,e$1x({},Zr,{ref:Vt,width:Wr,height:Yr,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),Kt.asChild?Hr:reactExports.createElement("polygon",{points:"0,0 30,0 15,10"}))}),m$l=s$c,T$g="Popper",[j$e,tt$2]=P$n(T$g),[Ee$6,Z$8]=j$e(T$g),He$4=Kt=>{const{__scopePopper:Vt,children:Hr}=Kt,[Wr,Yr]=reactExports.useState(null);return reactExports.createElement(Ee$6,{scope:Vt,anchor:Wr,onAnchorChange:Yr},Hr)},Ne$3="PopperAnchor",We$4=reactExports.forwardRef((Kt,Vt)=>{const{__scopePopper:Hr,virtualRef:Wr,...Yr}=Kt,Zr=Z$8(Ne$3,Hr),en=reactExports.useRef(null),tn=d$I(Vt,en);return reactExports.useEffect(()=>{Zr.onAnchorChange((Wr==null?void 0:Wr.current)||en.current)}),Wr?null:reactExports.createElement(E$l.div,e$1x({},Yr,{ref:tn}))}),L$c="PopperContent",[ze$3,Ye$2]=j$e(L$c),Ie$5=reactExports.forwardRef((Kt,Vt)=>{var Hr,Wr,Yr,Zr,en,tn,rn,nn;const{__scopePopper:on,side:an="bottom",sideOffset:$n=0,align:ln="center",alignOffset:Hn=0,arrowPadding:jn=0,avoidCollisions:zn=!0,collisionBoundary:Wn=[],collisionPadding:ei=0,sticky:$i="partial",hideWhenDetached:Mi=!1,updatePositionStrategy:Ni="optimized",onPlaced:Ts,...ps}=Kt,$s=Z$8(L$c,on),[Ws,Hs]=reactExports.useState(null),js=d$I(Vt,ql=>Hs(ql)),[zs,Xs]=reactExports.useState(null),ia=z$d(zs),Qs=(Hr=ia==null?void 0:ia.width)!==null&&Hr!==void 0?Hr:0,Zs=(Wr=ia==null?void 0:ia.height)!==null&&Wr!==void 0?Wr:0,Gs=an+(ln!=="center"?"-"+ln:""),Hl=typeof ei=="number"?ei:{top:0,right:0,bottom:0,left:0,...ei},Js=Array.isArray(Wn)?Wn:[Wn],sa=Js.length>0,Ca={padding:Hl,boundary:Js.filter(Be$4),altBoundary:sa},{refs:tc,floatingStyles:zl,placement:ec,isPositioned:sc,middlewareData:ac}=X$f({strategy:"fixed",placement:Gs,whileElementsMounted:(...ql)=>Ot(...ql,{animationFrame:Ni==="always"}),elements:{reference:$s.anchor},middleware:[ae$8({mainAxis:$n+Zs,alignmentAxis:Hn}),zn&&Ft({mainAxis:!0,crossAxis:!1,limiter:$i==="partial"?It$3():void 0,...Ca}),zn&&Wt$1({...Ca}),Bt$2({...Ca,apply:({elements:ql,rects:Vl,availableWidth:Wl,availableHeight:hc})=>{const{width:nc,height:wc}=Vl.reference,xc=ql.floating.style;xc.setProperty("--radix-popper-available-width",`${Wl}px`),xc.setProperty("--radix-popper-available-height",`${hc}px`),xc.setProperty("--radix-popper-anchor-width",`${nc}px`),xc.setProperty("--radix-popper-anchor-height",`${wc}px`)}}),zs&&T$o({element:zs,padding:jn}),Fe$3({arrowWidth:Qs,arrowHeight:Zs}),Mi&&zt$1({strategy:"referenceHidden",...Ca})]}),[rc,uc]=U$8(ec),pc=o$1e(Ts);e$1w(()=>{sc&&(pc==null||pc())},[sc,pc]);const cc=(Yr=ac.arrow)===null||Yr===void 0?void 0:Yr.x,$c=(Zr=ac.arrow)===null||Zr===void 0?void 0:Zr.y,Ec=((en=ac.arrow)===null||en===void 0?void 0:en.centerOffset)!==0,[Zi,qs]=reactExports.useState();return e$1w(()=>{Ws&&qs(window.getComputedStyle(Ws).zIndex)},[Ws]),reactExports.createElement("div",{ref:tc.setFloating,"data-radix-popper-content-wrapper":"",style:{...zl,transform:sc?zl.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Zi,"--radix-popper-transform-origin":[(tn=ac.transformOrigin)===null||tn===void 0?void 0:tn.x,(rn=ac.transformOrigin)===null||rn===void 0?void 0:rn.y].join(" ")},dir:Kt.dir},reactExports.createElement(ze$3,{scope:on,placedSide:rc,onArrowChange:Xs,arrowX:cc,arrowY:$c,shouldHideArrow:Ec},reactExports.createElement(E$l.div,e$1x({"data-side":rc,"data-align":uc},ps,{ref:js,style:{...ps.style,animation:sc?void 0:"none",opacity:(nn=ac.hide)!==null&&nn!==void 0&&nn.referenceHidden?0:void 0}}))))}),Xe$2="PopperArrow",Me$4={top:"bottom",right:"left",bottom:"top",left:"right"},ke$4=reactExports.forwardRef(function(Kt,Vt){const{__scopePopper:Hr,...Wr}=Kt,Yr=Ye$2(Xe$2,Hr),Zr=Me$4[Yr.placedSide];return reactExports.createElement("span",{ref:Yr.onArrowChange,style:{position:"absolute",left:Yr.arrowX,top:Yr.arrowY,[Zr]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[Yr.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[Yr.placedSide],visibility:Yr.shouldHideArrow?"hidden":void 0}},reactExports.createElement(m$l,e$1x({},Wr,{ref:Vt,style:{...Wr.style,display:"block"}})))});function Be$4(Kt){return Kt!==null}const Fe$3=Kt=>({name:"transformOrigin",options:Kt,fn(Vt){var Hr,Wr,Yr,Zr,en;const{placement:tn,rects:rn,middlewareData:nn}=Vt,on=((Hr=nn.arrow)===null||Hr===void 0?void 0:Hr.centerOffset)!==0,an=on?0:Kt.arrowWidth,$n=on?0:Kt.arrowHeight,[ln,Hn]=U$8(tn),jn={start:"0%",center:"50%",end:"100%"}[Hn],zn=((Wr=(Yr=nn.arrow)===null||Yr===void 0?void 0:Yr.x)!==null&&Wr!==void 0?Wr:0)+an/2,Wn=((Zr=(en=nn.arrow)===null||en===void 0?void 0:en.y)!==null&&Zr!==void 0?Zr:0)+$n/2;let ei="",$i="";return ln==="bottom"?(ei=on?jn:`${zn}px`,$i=`${-$n}px`):ln==="top"?(ei=on?jn:`${zn}px`,$i=`${rn.floating.height+$n}px`):ln==="right"?(ei=`${-$n}px`,$i=on?jn:`${Wn}px`):ln==="left"&&(ei=`${rn.floating.width+$n}px`,$i=on?jn:`${Wn}px`),{data:{x:ei,y:$i}}}});function U$8(Kt){const[Vt,Hr="center"]=Kt.split("-");return[Vt,Hr]}const ot$1=He$4,rt$3=We$4,at$3=Ie$5,nt$3=ke$4,S$e="rovingFocusGroup.onEntryFocus",X$a={bubbles:!1,cancelable:!0},G$9="RovingFocusGroup",[w$h,M$g,Z$7]=N$n(G$9),[ee$6,Ee$5]=P$n(G$9,[Z$7]),[oe$7,te$5]=ee$6(G$9),re$4=reactExports.forwardRef((Kt,Vt)=>reactExports.createElement(w$h.Provider,{scope:Kt.__scopeRovingFocusGroup},reactExports.createElement(w$h.Slot,{scope:Kt.__scopeRovingFocusGroup},reactExports.createElement(ne$6,e$1x({},Kt,{ref:Vt}))))),ne$6=reactExports.forwardRef((Kt,Vt)=>{const{__scopeRovingFocusGroup:Hr,orientation:Wr,loop:Yr=!1,dir:Zr,currentTabStopId:en,defaultCurrentTabStopId:tn,onCurrentTabStopIdChange:rn,onEntryFocus:nn,...on}=Kt,an=reactExports.useRef(null),$n=d$I(Vt,an),ln=i$L(Zr),[Hn=null,jn]=g$F({prop:en,defaultProp:tn,onChange:rn}),[zn,Wn]=reactExports.useState(!1),ei=o$1e(nn),$i=M$g(Hr),Mi=reactExports.useRef(!1),[Ni,Ts]=reactExports.useState(0);return reactExports.useEffect(()=>{const ps=an.current;if(ps)return ps.addEventListener(S$e,ei),()=>ps.removeEventListener(S$e,ei)},[ei]),reactExports.createElement(oe$7,{scope:Hr,orientation:Wr,dir:ln,loop:Yr,currentTabStopId:Hn,onItemFocus:reactExports.useCallback(ps=>jn(ps),[jn]),onItemShiftTab:reactExports.useCallback(()=>Wn(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>Ts(ps=>ps+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>Ts(ps=>ps-1),[])},reactExports.createElement(E$l.div,e$1x({tabIndex:zn||Ni===0?-1:0,"data-orientation":Wr},on,{ref:$n,style:{outline:"none",...Kt.style},onMouseDown:o$1f(Kt.onMouseDown,()=>{Mi.current=!0}),onFocus:o$1f(Kt.onFocus,ps=>{const $s=!Mi.current;if(ps.target===ps.currentTarget&&$s&&!zn){const Ws=new CustomEvent(S$e,X$a);if(ps.currentTarget.dispatchEvent(Ws),!Ws.defaultPrevented){const Hs=$i().filter(ia=>ia.focusable),js=Hs.find(ia=>ia.active),zs=Hs.find(ia=>ia.id===Hn),Xs=[js,zs,...Hs].filter(Boolean).map(ia=>ia.ref.current);L$b(Xs)}}Mi.current=!1}),onBlur:o$1f(Kt.onBlur,()=>Wn(!1))})))}),ce$6="RovingFocusGroupItem",fe$5=reactExports.forwardRef((Kt,Vt)=>{const{__scopeRovingFocusGroup:Hr,focusable:Wr=!0,active:Yr=!1,tabStopId:Zr,...en}=Kt,tn=s$C(),rn=Zr||tn,nn=te$5(ce$6,Hr),on=nn.currentTabStopId===rn,an=M$g(Hr),{onFocusableItemAdd:$n,onFocusableItemRemove:ln}=nn;return reactExports.useEffect(()=>{if(Wr)return $n(),()=>ln()},[Wr,$n,ln]),reactExports.createElement(w$h.ItemSlot,{scope:Hr,id:rn,focusable:Wr,active:Yr},reactExports.createElement(E$l.span,e$1x({tabIndex:on?0:-1,"data-orientation":nn.orientation},en,{ref:Vt,onMouseDown:o$1f(Kt.onMouseDown,Hn=>{Wr?nn.onItemFocus(rn):Hn.preventDefault()}),onFocus:o$1f(Kt.onFocus,()=>nn.onItemFocus(rn)),onKeyDown:o$1f(Kt.onKeyDown,Hn=>{if(Hn.key==="Tab"&&Hn.shiftKey){nn.onItemShiftTab();return}if(Hn.target!==Hn.currentTarget)return;const jn=de$4(Hn,nn.orientation,nn.dir);if(jn!==void 0){Hn.preventDefault();let zn=an().filter(Wn=>Wn.focusable).map(Wn=>Wn.ref.current);if(jn==="last")zn.reverse();else if(jn==="prev"||jn==="next"){jn==="prev"&&zn.reverse();const Wn=zn.indexOf(Hn.currentTarget);zn=nn.loop?ue$5(zn,Wn+1):zn.slice(Wn+1)}setTimeout(()=>L$b(zn))}})})))}),se$7={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ae$6(Kt,Vt){return Vt!=="rtl"?Kt:Kt==="ArrowLeft"?"ArrowRight":Kt==="ArrowRight"?"ArrowLeft":Kt}function de$4(Kt,Vt,Hr){const Wr=ae$6(Kt.key,Hr);if(!(Vt==="vertical"&&["ArrowLeft","ArrowRight"].includes(Wr))&&!(Vt==="horizontal"&&["ArrowUp","ArrowDown"].includes(Wr)))return se$7[Wr]}function L$b(Kt){const Vt=document.activeElement;for(const Hr of Kt)if(Hr===Vt||(Hr.focus(),document.activeElement!==Vt))return}function ue$5(Kt,Vt){return Kt.map((Hr,Wr)=>Kt[(Vt+Wr)%Kt.length])}const xe$4=re$4,Ce$5=fe$5;var r$j="right-scroll-bar-position",a$s="width-before-scroll-bar",l$h="with-scroll-bars-hidden",e$q="--removed-body-scroll-bar-size",a$r=v$z(),l$g=function(){},m$k=reactExports.forwardRef(function(Kt,Vt){var Hr=reactExports.useRef(null),Wr=reactExports.useState({onScrollCapture:l$g,onWheelCapture:l$g,onTouchMoveCapture:l$g}),Yr=Wr[0],Zr=Wr[1],en=Kt.forwardProps,tn=Kt.children,rn=Kt.className,nn=Kt.removeScrollBar,on=Kt.enabled,an=Kt.shards,$n=Kt.sideCar,ln=Kt.noIsolation,Hn=Kt.inert,jn=Kt.allowPinchZoom,zn=Kt.as,Wn=zn===void 0?"div":zn,ei=c$D(Kt,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),$i=$n,Mi=v$y([Hr,Vt]),Ni=p$w(p$w({},ei),Yr);return reactExports.createElement(reactExports.Fragment,null,on&&reactExports.createElement($i,{sideCar:a$r,removeScrollBar:nn,shards:an,noIsolation:ln,inert:Hn,setCallbacks:Zr,allowPinchZoom:!!jn,lockRef:Hr}),en?reactExports.cloneElement(reactExports.Children.only(tn),p$w(p$w({},Ni),{ref:Mi})):reactExports.createElement(Wn,p$w({},Ni,{className:rn,ref:Mi}),tn))});m$k.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};m$k.classNames={fullWidth:a$s,zeroRight:r$j};var a$q={left:0,top:0,right:0,gap:0},e$p=function(Kt){return parseInt(Kt||"",10)||0},o$r=function(Kt){var Vt=window.getComputedStyle(document.body),Hr=Vt[Kt==="padding"?"paddingLeft":"marginLeft"],Wr=Vt[Kt==="padding"?"paddingTop":"marginTop"],Yr=Vt[Kt==="padding"?"paddingRight":"marginRight"];return[e$p(Hr),e$p(Wr),e$p(Yr)]},f$j=function(Kt){if(Kt===void 0&&(Kt="margin"),typeof window>"u")return a$q;var Vt=o$r(Kt),Hr=document.documentElement.clientWidth,Wr=window.innerWidth;return{left:Vt[0],top:Vt[1],right:Vt[2],gap:Math.max(0,Wr-Hr+Vt[2]-Vt[0])}},h$e=s$m(),s$b=function(Kt,Vt,Hr,Wr){var Yr=Kt.left,Zr=Kt.top,en=Kt.right,tn=Kt.gap;return Hr===void 0&&(Hr="margin"),`
  .`.concat(l$h,` {
   overflow: hidden `).concat(Wr,`;
   padding-right: `).concat(tn,"px ").concat(Wr,`;
  }
  body {
    overflow: hidden `).concat(Wr,`;
    overscroll-behavior: contain;
    `).concat([Vt&&"position: relative ".concat(Wr,";"),Hr==="margin"&&`
    padding-left: `.concat(Yr,`px;
    padding-top: `).concat(Zr,`px;
    padding-right: `).concat(en,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(tn,"px ").concat(Wr,`;
    `),Hr==="padding"&&"padding-right: ".concat(tn,"px ").concat(Wr,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(r$j,` {
    right: `).concat(tn,"px ").concat(Wr,`;
  }
  
  .`).concat(a$s,` {
    margin-right: `).concat(tn,"px ").concat(Wr,`;
  }
  
  .`).concat(r$j," .").concat(r$j,` {
    right: 0 `).concat(Wr,`;
  }
  
  .`).concat(a$s," .").concat(a$s,` {
    margin-right: 0 `).concat(Wr,`;
  }
  
  body {
    `).concat(e$q,": ").concat(tn,`px;
  }
`)},S$d=function(Kt){var Vt=Kt.noRelative,Hr=Kt.noImportant,Wr=Kt.gapMode,Yr=Wr===void 0?"margin":Wr,Zr=reactExports.useMemo(function(){return f$j(Yr)},[Yr]);return reactExports.createElement(h$e,{styles:s$b(Zr,!Vt,Yr,Hr?"":"!important")})},r$i=!1;if(typeof window<"u")try{var e$o=Object.defineProperty({},"passive",{get:function(){return r$i=!0,!0}});window.addEventListener("test",e$o,e$o),window.removeEventListener("test",e$o,e$o)}catch{r$i=!1}var a$p=r$i?{passive:!1}:!1,p$i=function(Kt){return Kt.tagName==="TEXTAREA"},w$g=function(Kt,Vt){var Hr=window.getComputedStyle(Kt);return Hr[Vt]!=="hidden"&&!(Hr.overflowY===Hr.overflowX&&!p$i(Kt)&&Hr[Vt]==="visible")},y$a=function(Kt){return w$g(Kt,"overflowY")},H$b=function(Kt){return w$g(Kt,"overflowX")},L$a=function(Kt,Vt){var Hr=Vt;do{typeof ShadowRoot<"u"&&Hr instanceof ShadowRoot&&(Hr=Hr.host);var Wr=g$h(Kt,Hr);if(Wr){var Yr=C$h(Kt,Hr),Zr=Yr[1],en=Yr[2];if(Zr>en)return!0}Hr=Hr.parentNode}while(Hr&&Hr!==document.body);return!1},B$d=function(Kt){var Vt=Kt.scrollTop,Hr=Kt.scrollHeight,Wr=Kt.clientHeight;return[Vt,Hr,Wr]},V$7=function(Kt){var Vt=Kt.scrollLeft,Hr=Kt.scrollWidth,Wr=Kt.clientWidth;return[Vt,Hr,Wr]},g$h=function(Kt,Vt){return Kt==="v"?y$a(Vt):H$b(Vt)},C$h=function(Kt,Vt){return Kt==="v"?B$d(Vt):V$7(Vt)},W$7=function(Kt,Vt){return Kt==="h"&&Vt==="rtl"?-1:1},N$c=function(Kt,Vt,Hr,Wr,Yr){var Zr=W$7(Kt,window.getComputedStyle(Vt).direction),en=Zr*Wr,tn=Hr.target,rn=Vt.contains(tn),nn=!1,on=en>0,an=0,$n=0;do{var ln=C$h(Kt,tn),Hn=ln[0],jn=ln[1],zn=ln[2],Wn=jn-zn-Zr*Hn;(Hn||Wn)&&g$h(Kt,tn)&&(an+=Wn,$n+=Hn),tn=tn.parentNode}while(!rn&&tn!==document.body||rn&&(Vt.contains(tn)||Vt===tn));return(on&&(Yr&&an===0||!Yr&&en>an)||!on&&(Yr&&$n===0||!Yr&&-en>$n))&&(nn=!0),nn},k$c=function(Kt){return"changedTouches"in Kt?[Kt.changedTouches[0].clientX,Kt.changedTouches[0].clientY]:[0,0]},X$9=function(Kt){return[Kt.deltaX,Kt.deltaY]},M$f=function(Kt){return Kt&&"current"in Kt?Kt.current:Kt},F$9=function(Kt,Vt){return Kt[0]===Vt[0]&&Kt[1]===Vt[1]},Q$7=function(Kt){return`
  .block-interactivity-`.concat(Kt,` {pointer-events: none;}
  .allow-interactivity-`).concat(Kt,` {pointer-events: all;}
`)},Z$6=0,s$a=[];function G$8(Kt){var Vt=reactExports.useRef([]),Hr=reactExports.useRef([0,0]),Wr=reactExports.useRef(),Yr=reactExports.useState(Z$6++)[0],Zr=reactExports.useState(function(){return s$m()})[0],en=reactExports.useRef(Kt);reactExports.useEffect(function(){en.current=Kt},[Kt]),reactExports.useEffect(function(){if(Kt.inert){document.body.classList.add("block-interactivity-".concat(Yr));var jn=l$s([Kt.lockRef.current],(Kt.shards||[]).map(M$f),!0).filter(Boolean);return jn.forEach(function(zn){return zn.classList.add("allow-interactivity-".concat(Yr))}),function(){document.body.classList.remove("block-interactivity-".concat(Yr)),jn.forEach(function(zn){return zn.classList.remove("allow-interactivity-".concat(Yr))})}}},[Kt.inert,Kt.lockRef.current,Kt.shards]);var tn=reactExports.useCallback(function(jn,zn){if("touches"in jn&&jn.touches.length===2)return!en.current.allowPinchZoom;var Wn=k$c(jn),ei=Hr.current,$i="deltaX"in jn?jn.deltaX:ei[0]-Wn[0],Mi="deltaY"in jn?jn.deltaY:ei[1]-Wn[1],Ni,Ts=jn.target,ps=Math.abs($i)>Math.abs(Mi)?"h":"v";if("touches"in jn&&ps==="h"&&Ts.type==="range")return!1;var $s=L$a(ps,Ts);if(!$s)return!0;if($s?Ni=ps:(Ni=ps==="v"?"h":"v",$s=L$a(ps,Ts)),!$s)return!1;if(!Wr.current&&"changedTouches"in jn&&($i||Mi)&&(Wr.current=Ni),!Ni)return!0;var Ws=Wr.current||Ni;return N$c(Ws,zn,jn,Ws==="h"?$i:Mi,!0)},[]),rn=reactExports.useCallback(function(jn){var zn=jn;if(!(!s$a.length||s$a[s$a.length-1]!==Zr)){var Wn="deltaY"in zn?X$9(zn):k$c(zn),ei=Vt.current.filter(function(Ni){return Ni.name===zn.type&&Ni.target===zn.target&&F$9(Ni.delta,Wn)})[0];if(ei&&ei.should){zn.cancelable&&zn.preventDefault();return}if(!ei){var $i=(en.current.shards||[]).map(M$f).filter(Boolean).filter(function(Ni){return Ni.contains(zn.target)}),Mi=$i.length>0?tn(zn,$i[0]):!en.current.noIsolation;Mi&&zn.cancelable&&zn.preventDefault()}}},[]),nn=reactExports.useCallback(function(jn,zn,Wn,ei){var $i={name:jn,delta:zn,target:Wn,should:ei};Vt.current.push($i),setTimeout(function(){Vt.current=Vt.current.filter(function(Mi){return Mi!==$i})},1)},[]),on=reactExports.useCallback(function(jn){Hr.current=k$c(jn),Wr.current=void 0},[]),an=reactExports.useCallback(function(jn){nn(jn.type,X$9(jn),jn.target,tn(jn,Kt.lockRef.current))},[]),$n=reactExports.useCallback(function(jn){nn(jn.type,k$c(jn),jn.target,tn(jn,Kt.lockRef.current))},[]);reactExports.useEffect(function(){return s$a.push(Zr),Kt.setCallbacks({onScrollCapture:an,onWheelCapture:an,onTouchMoveCapture:$n}),document.addEventListener("wheel",rn,a$p),document.addEventListener("touchmove",rn,a$p),document.addEventListener("touchstart",on,a$p),function(){s$a=s$a.filter(function(jn){return jn!==Zr}),document.removeEventListener("wheel",rn,a$p),document.removeEventListener("touchmove",rn,a$p),document.removeEventListener("touchstart",on,a$p)}},[]);var ln=Kt.removeScrollBar,Hn=Kt.inert;return reactExports.createElement(reactExports.Fragment,null,Hn?reactExports.createElement(Zr,{styles:Q$7(Yr)}):null,ln?reactExports.createElement(S$d,{gapMode:"margin"}):null)}const f$i=p$u(a$r,G$8);var o$q=reactExports.forwardRef(function(Kt,Vt){return reactExports.createElement(m$k,p$w({},Kt,{ref:Vt,sideCar:f$i}))});o$q.classNames=m$k.classNames;const i$b=o$q,U$7="Menu",[H$a,He$3,We$3]=N$n(U$7),[S$c,Bt$1]=P$n(U$7,[We$3,tt$2,Ee$5]);tt$2();Ee$5();S$c(U$7);S$c(U$7);const pe$5="MenuPortal";S$c(pe$5,{forceMount:void 0});const g$g="MenuContent";S$c(g$g);const dt$3="MenuRadioGroup";S$c(dt$3,{value:void 0,onValueChange:()=>{}});const be$3="MenuItemIndicator";S$c(be$3,{checked:!1});const xt$2="MenuSub";S$c(xt$2);const _$d="DropdownMenu",[L$9,se$6]=P$n(_$d,[Bt$1]);Bt$1();L$9(_$d);const C$g=Kt=>m$K.jsx("ol",{className:"text-sm mt-4 leading-6 overflow-hidden",children:r$W.map(Kt.items,({label:Vt,value:Hr})=>m$K.jsxs("li",{className:"mb-2",children:[m$K.jsx("div",{className:"text-muted",children:Vt}),m$K.jsx("div",{className:"font-medium overflow-hidden text-ellipsis",children:Hr})]},Vt))});/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */g$i("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */g$i("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */g$i("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var ye$4=Object.defineProperty,Ae$2=(Kt,Vt,Hr)=>Vt in Kt?ye$4(Kt,Vt,{enumerable:!0,configurable:!0,writable:!0,value:Hr}):Kt[Vt]=Hr,T$f=(Kt,Vt,Hr)=>(Ae$2(Kt,typeof Vt!="symbol"?Vt+"":Vt,Hr),Hr);const a$o=[];Object.freeze(a$o);const Ce$4={id:"https://iiif-parser/annotation-page",type:"AnnotationPage",behavior:a$o,motivation:null,label:null,thumbnail:a$o,summary:null,requiredStatement:null,metadata:a$o,rights:null,provider:a$o,items:a$o,seeAlso:a$o,homepage:a$o,logo:a$o,rendering:a$o,service:a$o},Ie$4={id:"https://iiif-parser/empty-canvas",type:"Canvas",label:null,behavior:a$o,motivation:null,thumbnail:a$o,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:a$o,rights:null,navDate:null,provider:a$o,items:a$o,annotations:a$o,seeAlso:a$o,homepage:a$o,logo:a$o,partOf:a$o,rendering:a$o,service:a$o,duration:0,height:0,width:0},_e$4={id:"https://iiif-parser/empty-collection",type:"Collection",label:null,viewingDirection:"left-to-right",behavior:a$o,motivation:null,thumbnail:a$o,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:a$o,rights:null,navDate:null,provider:a$o,items:a$o,annotations:a$o,seeAlso:a$o,homepage:a$o,logo:a$o,partOf:a$o,rendering:a$o,service:a$o,services:a$o},we$1={id:"https://iiif-parser/empty-manifest",type:"Manifest",annotations:a$o,behavior:a$o,homepage:a$o,items:a$o,label:null,logo:a$o,metadata:a$o,motivation:null,navDate:null,provider:a$o,partOf:a$o,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,rendering:a$o,requiredStatement:null,rights:null,seeAlso:a$o,service:a$o,services:a$o,start:null,structures:a$o,summary:null,thumbnail:a$o,viewingDirection:"left-to-right"},be$2={id:"https://iiif-parser/empty-canvas",type:"Range",label:null,behavior:a$o,motivation:null,thumbnail:a$o,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:a$o,rights:null,navDate:null,provider:a$o,items:a$o,annotations:a$o,seeAlso:a$o,homepage:a$o,logo:a$o,partOf:a$o,rendering:a$o,service:a$o,start:null,supplementary:null,viewingDirection:"left-to-right"},Re$4={id:"https://iiif-parser/empty-agent",type:"Agent",label:{},logo:a$o,seeAlso:a$o,homepage:a$o};function x$d(Kt){return Array.isArray(Kt)?Kt:[Kt]}const G$7=["Collection","Manifest","Canvas","AnnotationPage","AnnotationCollection","Annotation","ContentResource","Range","Service","Selector","Agent"];function Ee$4(Kt){if(typeof Kt>"u"||Kt===null)throw new Error("Null or undefined is not a valid entity.");if(Array.isArray(Kt))throw new Error("Array is not a valid entity");if(typeof Kt!="object")throw new Error(`${typeof Kt} is not a valid entity`);if(typeof Kt.type=="string"){const Vt=G$7.indexOf(Kt.type);if(Vt!==-1)return G$7[Vt]}if(Kt.profile)return"Service";throw new Error("Resource type is not known")}let N$b=class vu{constructor(Vt,Hr={}){T$f(this,"traversals"),T$f(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationCollection:[],annotationPage:[],annotation:[],contentResource:[],choice:[],range:[],service:[],agent:[],...Vt},this.options={allowUndefinedReturn:!1,...Hr}}static all(Vt){return new vu({collection:[Vt],manifest:[Vt],canvas:[Vt],annotationCollection:[Vt],annotationPage:[Vt],annotation:[Vt],contentResource:[Vt],choice:[Vt],range:[Vt],service:[Vt]})}traverseDescriptive(Vt){return Vt.thumbnail&&(Vt.thumbnail=Vt.thumbnail.map(Hr=>this.traverseType(Hr,this.traversals.contentResource))),Vt.provider&&(Vt.provider=Vt.provider.map(Hr=>this.traverseAgent(Hr))),Vt}traverseLinking(Vt){return Vt.seeAlso&&(Vt.seeAlso=Vt.seeAlso.map(Hr=>this.traverseType(Hr,this.traversals.contentResource))),Vt.service&&(Vt.service=x$d(Vt.service).map(Hr=>this.traverseType(Hr,this.traversals.service))),Vt.services&&(Vt.services=Vt.services.map(Hr=>this.traverseType(Hr,this.traversals.service))),Vt.logo&&(Vt.logo=Vt.logo.map(Hr=>this.traverseType(Hr,this.traversals.contentResource))),Vt.homepage&&(Vt.homepage=Vt.homepage.map(Hr=>this.traverseType(Hr,this.traversals.contentResource))),Vt.partOf&&(Vt.partOf=Vt.partOf.map(Hr=>typeof Hr=="string"||!Hr.type?this.traverseType(Hr,this.traversals.contentResource):Hr.type==="Canvas"?this.traverseType(Hr,this.traversals.canvas):Hr.type==="AnnotationCollection"?this.traverseType(Hr,this.traversals.annotationCollection):Hr.type==="Collection"?this.traverseType(Hr,this.traversals.collection):this.traverseType(Hr,this.traversals.contentResource))),Vt.start&&(Vt.start=Vt.start?this.traverseType(Vt.start,this.traversals.canvas):null),Vt.rendering&&(Vt.rendering=Vt.rendering.map(Hr=>this.traverseType(Hr,this.traversals.contentResource))),Vt.supplementary&&(Vt.supplementary=Vt.supplementary.map(Hr=>this.traverseType(Hr,this.traversals.contentResource))),Vt}traverseCollectionItems(Vt){return Vt.items&&Vt.items.map(Hr=>Hr.type==="Collection"?this.traverseCollection(Hr):this.traverseManifest(Hr)),Vt}traverseCollection(Vt){return this.traverseType(this.traverseDescriptive(this.traverseInlineAnnotationPages(this.traverseLinking(this.traversePosterCanvas(this.traverseCollectionItems(Vt))))),this.traversals.collection)}traverseManifestItems(Vt){return Vt.items&&(Vt.items=Vt.items.map(Hr=>this.traverseCanvas(Hr))),Vt}traverseManifestStructures(Vt){return Vt.structures&&(Vt.structures=Vt.structures.map(Hr=>this.traverseRange(Hr))),Vt}traverseManifest(Vt){return this.traverseType(this.traverseInlineAnnotationPages(this.traverseManifestStructures(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(Vt)))))),this.traversals.manifest)}traverseCanvasItems(Vt){return Vt.items=(Vt.items||[]).map(Hr=>this.traverseAnnotationPage(Hr)),Vt}traverseInlineAnnotationPages(Vt){return typeof Vt=="string"||!Vt||Vt.annotations&&(Vt.annotations=Vt.annotations.map(Hr=>this.traverseAnnotationPage(Hr))),Vt}traverseCanvas(Vt){return this.traverseType(this.traverseInlineAnnotationPages(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(Vt))))),this.traversals.canvas)}traverseAnnotationPageItems(Vt){return Vt.items&&(Vt.items=Vt.items.map(Hr=>this.traverseAnnotation(Hr))),Vt}traverseAnnotationPage(Vt){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationPageItems(Vt))),this.traversals.annotationPage)}traverseAnnotationBody(Vt){return Array.isArray(Vt.body)?Vt.body=Vt.body.map(Hr=>this.traverseContentResource(Hr)):Vt.body&&(Vt.body=this.traverseContentResource(Vt.body)),Vt}traversePosterCanvas(Vt){return Vt.posterCanvas&&(Vt.posterCanvas=this.traverseCanvas(Vt.posterCanvas)),Vt.placeholderCanvas&&(Vt.placeholderCanvas=this.traverseCanvas(Vt.placeholderCanvas)),Vt.accompanyingCanvas&&(Vt.accompanyingCanvas=this.traverseCanvas(Vt.accompanyingCanvas)),Vt}traverseAnnotation(Vt){return this.traverseType(this.traverseLinking(this.traverseAnnotationBody(Vt)),this.traversals.annotation)}traverseContentResourceLinking(Vt){return typeof Vt=="string"||!Vt||Vt&&Vt.service&&(Vt.service=x$d(Vt.service||[]).map(Hr=>this.traverseType(Hr,this.traversals.service))),Vt}traverseContentResource(Vt){return Vt.type==="Choice"&&(Vt.items=Vt.items.map(Hr=>this.traverseContentResource(Hr))),this.traverseType(this.traverseInlineAnnotationPages(this.traverseContentResourceLinking(Vt)),this.traversals.contentResource)}traverseRangeRanges(Vt){return Vt.items&&(Vt.items=Vt.items.map(Hr=>typeof Hr=="string"?this.traverseCanvas({id:Hr,type:"Canvas"}):Hr.type==="Manifest"?this.traverseManifest(Hr):this.traverseRange(Hr))),Vt}traverseRange(Vt){return this.traverseType(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseRangeRanges(Vt)))),this.traversals.range)}traverseAgent(Vt){return this.traverseType(this.traverseDescriptive(this.traverseLinking(Vt)),this.traversals.agent)}traverseType(Vt,Hr){return Hr.reduce((Wr,Yr)=>{const Zr=Yr(Wr);return typeof Zr>"u"&&!this.options.allowUndefinedReturn?Wr:Zr},Vt)}traverseService(Vt){return this.traverseType(Vt,this.traversals.service)}traverseUnknown(Vt){const Hr=Ee$4(Vt);switch(Hr){case"Collection":return this.traverseCollection(Vt);case"Manifest":return this.traverseManifest(Vt);case"Canvas":return this.traverseCanvas(Vt);case"AnnotationPage":return this.traverseAnnotationPage(Vt);case"Annotation":return this.traverseAnnotation(Vt);case"ContentResource":return this.traverseContentResource(Vt);case"Range":return this.traverseRange(Vt);case"Service":return this.traverseService(Vt);case"Agent":return this.traverseAgent(Vt);default:throw new Error(`Unknown or unsupported resource type of ${Hr}`)}}};const q$7=["sc:Collection","sc:Manifest","sc:Canvas","sc:AnnotationList","oa:Annotation","sc:Range","sc:Layer","sc:Sequence","oa:Choice","Service","ContentResource"];function Le$2(Kt){if(typeof Kt>"u"||Kt===null)throw new Error("Null or undefined is not a valid entity.");if(Array.isArray(Kt))throw new Error("Array is not a valid entity");if(typeof Kt!="object")throw new Error(`${typeof Kt} is not a valid entity`);if(typeof Kt["@type"]=="string"){const Vt=q$7.indexOf(Kt["@type"]);if(Vt!==-1)return q$7[Vt]}if(Kt.profile)return"Service";if(Kt.format||Kt["@type"])return"ContentResource";throw new Error("Resource type is not known")}let k$b=class $u{constructor(Vt,Hr={}){T$f(this,"traversals"),T$f(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationList:[],sequence:[],annotation:[],contentResource:[],choice:[],range:[],service:[],layer:[],...Vt},this.options={convertPropsToArray:!0,mergeMemberProperties:!0,allowUndefinedReturn:!1,...Hr}}static all(Vt){return new $u({collection:[Vt],manifest:[Vt],canvas:[Vt],annotationList:[Vt],sequence:[Vt],annotation:[Vt],contentResource:[Vt],choice:[Vt],range:[Vt],service:[Vt],layer:[Vt]})}traverseCollection(Vt){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCollectionItems(Vt))),this.traversals.collection)}traverseCollectionItems(Vt){if(this.options.mergeMemberProperties){const Hr=[...(Vt.manifests||[]).map(Wr=>typeof Wr=="string"?{"@id":Wr,"@type":"sc:Manifest"}:Wr),...(Vt.collections||[]).map(Wr=>typeof Wr=="string"?{"@id":Wr,"@type":"sc:Collection"}:Wr),...Vt.members||[]];delete Vt.collections,delete Vt.manifests,Vt.members=Hr}return Vt.manifests&&(Vt.manifests=Vt.manifests.map(Hr=>this.traverseManifest(typeof Hr=="string"?{"@id":Hr,"@type":"sc:Manifest"}:Hr))),Vt.collections&&(Vt.collections=Vt.collections.map(Hr=>this.traverseCollection(typeof Hr=="string"?{"@id":Hr,"@type":"sc:Collection"}:Hr))),Vt.members&&(Vt.members=Vt.members.map(Hr=>typeof Hr=="string"?Hr:this.traverseUnknown(Hr))),Vt}traverseManifest(Vt){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(Vt))),this.traversals.manifest)}traverseManifestItems(Vt){return Vt.sequences&&(Vt.sequences=Vt.sequences.map(Hr=>this.traverseSequence(Hr))),Vt.structures&&(Vt.structures=Vt.structures.map(Hr=>this.traverseRange(Hr))),Vt}traverseSequence(Vt){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseSequenceItems(Vt))),this.traversals.sequence)}traverseSequenceItems(Vt){return Vt.canvases&&(Vt.canvases=Vt.canvases.map(Hr=>this.traverseCanvas(Hr))),Vt}traverseCanvas(Vt){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(Vt))),this.traversals.canvas)}traverseCanvasItems(Vt){return Vt.images&&(Vt.images=Vt.images.map(Hr=>this.traverseAnnotation(Hr))),Vt.otherContent&&(Vt.otherContent=Vt.otherContent.map(Hr=>this.traverseAnnotationList(Hr))),Vt}traverseRange(Vt){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseRangeItems(Vt))),this.traversals.range)}traverseRangeItems(Vt){if(this.options.mergeMemberProperties){const Hr=[...(Vt.ranges||[]).map(Wr=>typeof Wr=="string"?{"@id":Wr,"@type":"sc:Range"}:Wr),...(Vt.canvases||[]).map(Wr=>typeof Wr=="string"?{"@id":Wr,"@type":"sc:Canvas"}:Wr),...Vt.members||[]];delete Vt.ranges,delete Vt.canvases,Vt.members=Hr.length?Hr.map(Wr=>this.traverseUnknown(Wr)):void 0}return Vt}traverseAnnotationList(Vt){const Hr=typeof Vt=="string"?{"@id":Vt,"@type":"sc:AnnotationList"}:Vt;return this.traverseType(this.traverseDescriptive(this.traverseAnnotationListItems(Hr)),this.traversals.annotationList)}traverseAnnotationListItems(Vt){return Vt.resources&&(Vt.resources=Vt.resources.map(Hr=>this.traverseAnnotation(Hr))),Vt}traverseAnnotation(Vt){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationItems(Vt))),this.traversals.annotation)}traverseAnnotationItems(Vt){return Vt.resource&&(Array.isArray(Vt.resource)?Vt.resource=Vt.resource.map(Hr=>this.traverseContentResource(Hr)):Vt.resource=this.traverseContentResource(Vt.resource)),Vt.on,Vt}traverseLayer(Vt){return this.traverseType(this.traverseLinking(this.traverseLayerItems(Vt)),this.traversals.layer)}traverseLayerItems(Vt){return Vt.otherContent&&(Vt.otherContent=Vt.otherContent.map(Hr=>this.traverseAnnotationList(Hr))),Vt}traverseChoice(Vt){return this.traverseType(this.traverseChoiceItems(Vt),this.traversals.choice)}traverseChoiceItems(Vt){return Vt.default&&Vt.default!=="rdf:nil"&&(Vt.default=this.traverseContentResource(Vt.default)),Vt.item&&Vt.item!=="rdf:nil"&&(Vt.item=Vt.item.map(Hr=>this.traverseContentResource(Hr))),Vt}traverseService(Vt){return this.traverseType(this.traverseLinking(Vt),this.traversals.service)}traverseContentResource(Vt){return Vt["@type"]==="oa:Choice"?this.traverseChoice(Vt):this.traverseType(this.traverseDescriptive(this.traverseLinking(Vt)),this.traversals.contentResource)}traverseUnknown(Vt){if(!Vt["@type"]||typeof Vt=="string")return Vt;switch(Le$2(Vt)){case"sc:Collection":return this.traverseCollection(Vt);case"sc:Manifest":return this.traverseManifest(Vt);case"sc:Canvas":return this.traverseCanvas(Vt);case"sc:Sequence":return this.traverseSequence(Vt);case"sc:Range":return this.traverseRange(Vt);case"oa:Annotation":return this.traverseAnnotation(Vt);case"sc:AnnotationList":return this.traverseAnnotationList(Vt);case"sc:Layer":return this.traverseLayer(Vt);case"Service":return this.traverseService(Vt);case"oa:Choice":return this.traverseChoice(Vt);case"ContentResource":return this.traverseContentResource(Vt)}return Vt.profile?this.traverseService(Vt):Vt}traverseImageResource(Vt){const Hr=Array.isArray(Vt),Wr=Array.isArray(Vt)?Vt:[Vt],Yr=[];for(const Zr of Wr)typeof Zr=="string"?Yr.push(this.traverseContentResource({"@id":Zr,"@type":"dctypes:Image"})):Yr.push(this.traverseContentResource(Zr));return!Hr&&!this.options.convertPropsToArray?Yr[0]:Yr}traverseDescriptive(Vt){return Vt.thumbnail&&(Vt.thumbnail=this.traverseImageResource(Vt.thumbnail)),Vt.logo&&(Vt.logo=this.traverseImageResource(Vt.logo)),Vt}traverseOneOrMoreServices(Vt){const Hr=Array.isArray(Vt),Wr=Array.isArray(Vt)?Vt:[Vt],Yr=[];for(const Zr of Wr)Yr.push(this.traverseService(Zr));return!Hr&&!this.options.convertPropsToArray?Yr[0]:Yr}traverseLinking(Vt){return Vt.related&&(Vt.related=this.traverseOneOrManyType(Vt.related,this.traversals.contentResource)),Vt.rendering&&(Vt.rendering=this.traverseOneOrManyType(Vt.rendering,this.traversals.contentResource)),Vt.service&&(Vt.service=this.traverseOneOrMoreServices(Vt.service)),Vt.seeAlso&&(Vt.seeAlso=this.traverseOneOrManyType(Vt.seeAlso,this.traversals.contentResource)),Vt.within&&(typeof Vt.within=="string"||(Vt.within=this.traverseOneOrManyType(Vt.within,this.traversals.contentResource))),Vt.startCanvas&&(typeof Vt.startCanvas=="string"?Vt.startCanvas=this.traverseType({"@id":Vt.startCanvas,"@type":"sc:Canvas"},this.traversals.canvas):Vt.startCanvas&&this.traverseType(Vt.startCanvas,this.traversals.canvas)),Vt.contentLayer&&(typeof Vt.contentLayer=="string"?Vt.contentLayer=this.traverseLayer({"@id":Vt.contentLayer,"@type":"sc:Layer"}):Vt.contentLayer=this.traverseLayer(Vt.contentLayer)),Vt}traverseOneOrManyType(Vt,Hr){if(!Array.isArray(Vt))if(this.options.convertPropsToArray)Vt=[Vt];else return this.traverseType(Vt,Hr);return Vt.map(Wr=>this.traverseType(Wr,Hr))}traverseType(Vt,Hr){return Hr.reduce((Wr,Yr)=>{const Zr=Yr(Wr);return typeof Zr>"u"&&!this.options.allowUndefinedReturn?Wr:Zr},Vt)}};const Te$4="http://library.stanford.edu/iiif/image-api/compliance.html#level0",z$7="http://library.stanford.edu/iiif/image-api/compliance.html#level1",B$c="http://library.stanford.edu/iiif/image-api/compliance.html#level2",Se$5="http://library.stanford.edu/iiif/image-api/conformance.html#level0",H$9="http://library.stanford.edu/iiif/image-api/conformance.html#level1",Y$9="http://library.stanford.edu/iiif/image-api/conformance.html#level2",Me$3="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",K$6="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",Q$6="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",xe$3="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",X$8="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",Z$5="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",Pe$2="http://iiif.io/api/image/1/level0.json",Oe$4="http://iiif.io/api/image/1/profiles/level0.json",J$6="http://iiif.io/api/image/1/level1.json",ee$5="http://iiif.io/api/image/1/profiles/level1.json",te$4="http://iiif.io/api/image/1/level2.json",ie$3="http://iiif.io/api/image/1/profiles/level2.json",Fe$2="http://iiif.io/api/image/2/level0.json",De$2="http://iiif.io/api/image/2/profiles/level0.json",ne$5="http://iiif.io/api/image/2/level1.json",re$3="http://iiif.io/api/image/2/profiles/level1.json",se$5="http://iiif.io/api/image/2/level2.json",ae$5="http://iiif.io/api/image/2/profiles/level2.json",Ne$2="level0",oe$6="level1",le$2="level2",ke$3="http://iiif.io/api/image/2/level0",ve$2="http://iiif.io/api/image/2/level1",pe$4="http://iiif.io/api/image/2/level2",je$3=[ve$2,pe$4,z$7,B$c,H$9,Y$9,K$6,Q$6,X$8,Z$5,J$6,ee$5,te$4,ie$3,ne$5,re$3,se$5,ae$5,oe$6,le$2],$e$3=[ke$3,ve$2,pe$4,Te$4,z$7,B$c,Se$5,H$9,Y$9,Me$3,K$6,Q$6,xe$3,X$8,Z$5,Pe$2,Oe$4,J$6,ee$5,te$4,ie$3,Fe$2,De$2,ne$5,re$3,se$5,ae$5,Ne$2,oe$6,le$2],P$d={attributionLabel:"Attribution",lang:"none",providerId:"http://example.org/provider",providerName:"Unknown"};function I$8(Kt,Vt="none"){if(!Kt)return{};const Hr=Array.isArray(Kt)?Kt:[Kt],Wr={};for(const Yr of Hr){if(typeof Yr=="string"){Wr[Vt]=Wr[Vt]?Wr[Vt]:[],Wr[Vt].push(Yr||"");continue}if(!Yr["@language"]){Wr[Vt]=Wr[Vt]?Wr[Vt]:[],Wr[Vt].push(Yr["@value"]||"");continue}const Zr=Yr["@language"];Wr[Zr]=Wr[Zr]?Wr[Zr]:[],Wr[Zr].push(Yr["@value"]||"")}return Wr}function fe$4(Kt){if(Array.isArray(Kt))return fe$4(Kt.find(Vt=>typeof Vt=="string"));if($e$3.indexOf(Kt)!==-1)return"level2";if(je$3.indexOf(Kt)!==-1)return"level1";if(typeof Kt=="string")return Kt}function Ge$1(Kt){const Vt=Array.isArray(Kt)?Kt:[Kt];for(const Hr of Vt)switch(Hr){case"http://iiif.io/api/image/2/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2":return"ImageService2";case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":return"ImageService1";case"http://iiif.io/api/annex/openannotation/context.json":return"ImageApiSelector"}}function qe$1(Kt){switch(Kt){case"http://iiif.io/api/image/2/level0.json":case"http://iiif.io/api/image/2/level1.json":case"http://iiif.io/api/image/2/level2.json":return"ImageService2";case"http://iiif.io/api/auth/1/kiosk":case"http://iiif.io/api/auth/1/login":case"http://iiif.io/api/auth/1/clickthrough":case"http://iiif.io/api/auth/1/external":case"http://iiif.io/api/auth/0/kiosk":case"http://iiif.io/api/auth/0/login":case"http://iiif.io/api/auth/0/clickthrough":case"http://iiif.io/api/auth/0/external":return"AuthCookieService1";case"http://iiif.io/api/auth/1/token":case"http://iiif.io/api/auth/0/token":return"AuthTokenService1";case"http://iiif.io/api/auth/1/logout":case"http://iiif.io/api/auth/0/logout":return"AuthLogoutService1";case"http://iiif.io/api/search/1/search":case"http://iiif.io/api/search/0/search":return"SearchService1";case"http://iiif.io/api/search/1/autocomplete":case"http://iiif.io/api/search/0/autocomplete":return"AutoCompleteService1"}}function U$6(Kt){for(const Vt of["sc","oa","dcterms","dctypes","iiif"])if(Kt.startsWith(`${Vt}:`))return Kt.slice(Vt.length+1);return Kt}const Ue$1=["Collection","Manifest","Annotation","AnnotationPage","Range","Service"];function j$d(Kt){const Vt=Kt["@id"]||Kt.id;let Hr=Kt["@type"]||Kt.type;const Wr=Kt.profile||void 0,Yr=Kt["@context"]||void 0;if(Wr){const Zr=qe$1(Wr);if(Zr)return Zr}if(Yr){const Zr=Ge$1(Yr);if(Zr)return Zr}if(Hr){if(Array.isArray(Hr)){if(Hr.indexOf("oa:CssStylesheet")!==-1)return"CssStylesheet";if(Hr.indexOf("cnt:ContentAsText")!==-1)return"TextualBody";Hr=Hr[0]}for(const Zr of["sc","oa","dcterms","dctypes","iiif"])if(Hr.startsWith(`${Zr}:`)){Hr=Hr.slice(Zr.length+1);break}switch(Hr){case"Layer":return"AnnotationCollection";case"AnnotationList":return"AnnotationPage";case"cnt:ContentAsText":return"TextualBody"}}if(Hr&&Ue$1.indexOf(Hr)!==-1)return Hr;if(Kt.format){if(Kt.format.startsWith("image/"))return"Image";if(Kt.format.startsWith("text/")||Kt.format==="application/pdf")return"Text";if(Kt.format.startsWith("application/"))return"Dataset"}return Vt&&(Vt.endsWith(".jpg")||Vt.endsWith(".png")||Vt.endsWith(".jpeg"))?"Image":Hr||"unknown"}const Ve$3=/http(s)?:\/\/(creativecommons.org|rightsstatements.org)[^"'\\<\n]+/gm;function We$2(Kt){const Vt=Kt.match(Ve$3);return Vt?Vt[0]:Kt}function ze$2(Kt,Vt="Rights/License",Hr="none"){let Wr=null;const Yr=[],Zr=Array.isArray(Kt)?Kt:[Kt];for(const en of Zr){const tn=en?We$2(en):void 0;if(tn&&(tn.indexOf("creativecommons.org")!==-1||tn.indexOf("rightsstatements.org")!==-1)){tn.startsWith("https://")?Wr=`http://${tn.slice(8)}`:Wr=tn;continue}tn&&Yr.push({label:{[Hr]:[Vt]},value:{[Hr]:[tn]}})}return[Wr,Yr]}const Be$3=["http://iiif.io/api/presentation/2/context.json","http://iiif.io/api/image/2/context.json","http://iiif.io/api/image/1/context.json","http://library.stanford.edu/iiif/image-api/1.1/context.json","http://iiif.io/api/search/1/context.json","http://iiif.io/api/search/0/context.json","http://iiif.io/api/auth/1/context.json","http://iiif.io/api/auth/0/context.json","http://iiif.io/api/annex/openannotation/context.json"];function He$2(Kt){if(Kt){const Vt=Array.isArray(Kt)?Kt:[Kt],Hr=[];for(const Wr of Vt)Wr==="http://iiif.io/api/presentation/2/context.json"&&Hr.push("http://iiif.io/api/presentation/3/context.json"),Be$3.indexOf(Wr)===-1&&Hr.push(Wr);if(Vt.length)return Hr.length===1?Hr[0]:Hr}}function Ye$1(Kt){return Kt?Kt.map(Vt=>({label:I$8(Vt.label),value:I$8(Vt.value)})):[]}function p$h(Kt){for(const Vt in Kt)(typeof Kt[Vt]>"u"||Kt[Vt]===null)&&delete Kt[Vt];return Kt}let V$6=0;function ue$4(Kt,Vt){const Hr=encodeURI(Kt.id||Kt["@id"]||"").trim();return Hr&&Vt?`${Hr}/${Vt}`:Hr||(V$6++,`http://example.org/${Kt["@type"]}${Vt?`/${Vt}`:""}/${V$6}`)}function f$h(Kt){const Vt=[...Kt.behavior||[]];Kt.viewingHint&&Vt.push(Kt.viewingHint);let Hr;return Array.isArray(Kt.motivation)?Hr=Kt.motivation.map(U$6):Kt.motivation&&(Hr=U$6(Kt.motivation)),{"@context":Kt["@context"]?He$2(Kt["@context"]):void 0,id:(Kt["@id"]||ue$4(Kt)).trim(),type:j$d(Kt),behavior:Vt.length?Vt:void 0,height:Kt.height?Kt.height:void 0,width:Kt.width?Kt.width:void 0,motivation:Hr,viewingDirection:Kt.viewingDirection,profile:Kt.profile,format:Kt.format?Kt.format:void 0,duration:void 0,timeMode:void 0}}function u$j(Kt){const[Vt,Hr]=ze$2(Kt.license),Wr=[...Kt.metadata?Ye$1(Kt.metadata):[],...Hr];return{rights:Vt,metadata:Wr.length?Wr:void 0,label:Kt.label?I$8(Kt.label):void 0,requiredStatement:Kt.attribution?{label:I$8(P$d.attributionLabel),value:I$8(Kt.attribution)}:void 0,navDate:Kt.navDate,summary:Kt.description?I$8(Kt.description):void 0,thumbnail:Kt.thumbnail}}function Ke$1(Kt){if(!Kt.within)return;const Vt=Array.isArray(Kt.within)?Kt.within:[Kt.within],Hr=[];for(const Wr of Vt)if(typeof Wr=="string"){if(Wr)switch(Kt["@type"]){case"sc:Manifest":Hr.push({id:Wr,type:"Collection"});break}}else Wr["@id"]&&Hr.push({id:Wr["@id"],type:j$d(Wr)});return Hr.length?Hr:void 0}function c$g(Kt){const Vt=Kt.related?Array.isArray(Kt.related)?Kt.related:[Kt.related]:[],Hr=Kt.contentLayer;return{provider:Kt.logo||Vt.length?[{id:P$d.providerId,type:"Agent",homepage:Vt.length?[Vt[0]]:void 0,logo:Kt.logo?Array.isArray(Kt.logo)?Kt.logo:[Kt.logo]:void 0,label:I$8(P$d.providerName)}]:void 0,partOf:Ke$1(Kt),rendering:Kt.rendering,seeAlso:Kt.seeAlso,start:Kt.startCanvas,service:Kt.service?x$d(Kt.service):void 0,supplementary:Hr?[Hr]:void 0}}function Qe$1(Kt){return{chars:Kt.chars,format:Kt.format?Kt.format:void 0,language:Kt.language}}function Xe$1(Kt){return p$h({...f$h(Kt),...u$j(Kt),...c$g(Kt),items:Kt.members})}function Ze$1(Kt){const Vt=[],Hr=[];for(const Yr of Kt.sequences||[])Yr.canvases.length&&Vt.push(...Yr.canvases),Yr.behavior&&Hr.push(...Yr.behavior);const Wr=f$h(Kt);return Hr.length&&(Wr.behavior?Wr.behavior.push(...Hr):Wr.behavior=Hr),p$h({...Wr,...u$j(Kt),...c$g(Kt),items:Vt,structures:Kt.structures})}function Je(Kt){return p$h({...f$h(Kt),...u$j(Kt),...c$g(Kt),annotations:Kt.otherContent&&Kt.otherContent.length?Kt.otherContent:void 0,items:Kt.images&&Kt.images.length?[{id:ue$4(Kt,"annotation-page"),type:"AnnotationPage",items:Kt.images}]:void 0})}function et$1(Kt){return p$h({...f$h(Kt),...u$j(Kt),...c$g(Kt),items:Kt.resources&&Kt.resources.length?Kt.resources:void 0})}function tt$1(Kt){return!Kt.canvases||Kt.canvases.length===0?{canvases:[],behavior:[]}:{canvases:Kt.canvases,behavior:Kt.viewingHint?[Kt.viewingHint]:[]}}function it$2(Kt){function Vt(Hr){if(Array.isArray(Hr)){if(Hr.length>1)return{type:"List",items:Hr.map(Vt)};Hr=Hr[0]}if(typeof Hr=="string")return encodeURI(Hr).trim();if("@type"in Hr){let Wr;if(typeof Hr.full=="string")Wr=Hr.full;else if(Hr.full["@type"]==="dctypes:Image")Wr={id:Hr.full["@id"],type:"Image"};else if(Hr.full["@type"]==="sc:Canvas")Wr={id:Hr.full["@id"],type:"Canvas"};else throw new Error(`Unsupported source type on annotation: ${Hr.full["@type"]}`);return{type:"SpecificResource",source:Wr,selector:F$8(Hr.selector)}}else return encodeURI(Hr["@id"]).trim()}return p$h({...f$h(Kt),...u$j(Kt),...c$g(Kt),target:Vt(Kt.on),body:Array.isArray(Kt.resource)?Kt.resource.map(O$f):O$f(Kt.resource)})}function O$f(Kt){const Vt=Kt;return p$h({...f$h(Vt),...u$j(Vt),...c$g(Vt),...Qe$1(Vt)})}function nt$2(Kt){const Vt=[];return Kt.default&&Kt.default!=="rdf:nil"&&Vt.push(Kt.default),Kt.item&&Kt.item!=="rdf:nil"&&Vt.push(...Kt.item),{...f$h(Kt),...u$j(Kt),items:Vt}}function rt$2(Kt){return p$h({...f$h(Kt),...u$j(Kt),...c$g(Kt),items:Kt.members})}function st$2(Kt){const{"@id":Vt,"@type":Hr,"@context":Wr,profile:Yr,...Zr}=Kt,en={};return Vt&&(en["@id"]=Vt),en["@type"]=j$d(Kt),en["@type"]==="unknown"&&(Wr&&Wr.length&&(en["@context"]=Wr),en["@type"]="Service"),Yr&&(en.profile=fe$4(Yr)),p$h({...en,...Zr})}function at$2(Kt){return p$h({...f$h(Kt),...u$j(Kt),...c$g(Kt)})}const ot=new k$b({collection:[Xe$1],manifest:[Ze$1],canvas:[Je],annotationList:[et$1],sequence:[tt$1],annotation:[it$2],contentResource:[O$f],choice:[nt$2],range:[rt$2],service:[st$2],layer:[at$2]});function lt$1(Kt){return Kt&&Kt["@context"]&&(Kt["@context"]==="http://iiif.io/api/presentation/2/context.json"||Kt["@context"].indexOf("http://iiif.io/api/presentation/2/context.json")!==-1||Kt["@context"]==="http://www.shared-canvas.org/ns/context.json")||Kt["@context"]==="http://iiif.io/api/image/2/context.json"?ot.traverseUnknown(Kt):Kt}function F$8(Kt){if((Array.isArray(Kt["@type"])&&Kt["@type"].includes("oa:SvgSelector")||Kt["@type"]=="oa:SvgSelector")&&("chars"in Kt||"value"in Kt))return{type:"SvgSelector",value:"chars"in Kt?Kt.chars:Kt.value};if(Kt["@type"]==="oa:FragmentSelector")return{type:"FragmentSelector",value:Kt.value};if(Kt["@type"]==="oa:Choice")return[F$8(Kt.default),...(Array.isArray(Kt.item)?Kt.item:[Kt.item]).map(F$8)];if(Kt["@type"]=="iiif:ImageApiSelector")return{type:"ImageApiSelector",region:"region"in Kt?Kt.region:void 0,rotation:"rotation"in Kt?Kt.rotation:void 0};throw new Error(`Unsupported selector type: ${Kt["@type"]}`)}function vt$2(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}function he$5(Kt,Vt){if(typeof Kt=="string")return{id:Kt,type:Vt};if(!Kt.id)throw new Error(`Invalid resource does not have an ID (${Vt})`);return Kt}function pt$2(Kt){return(Vt,Hr)=>{const Wr=Kt[Vt]?Kt[Vt]:{};return Yr=>{const Zr=he$5(Yr,Hr||Vt);return Zr&&Zr.id&&Vt?(Wr[Zr.id]=Wr[Zr.id]?ft$1(Wr[Zr.id],Zr):Object.assign({},Zr),{id:Zr.id,type:Vt==="ContentResource"?Vt:Zr.type}):Zr}}}function D$a(Kt,Vt){if(!Vt)return Kt;if(Array.isArray(Kt)){if(!Array.isArray(Vt))throw new Error("Cannot merge array with non-array");const Hr=[...Kt];for(const Wr of Vt)if(Wr!=null)if(Array.isArray(Wr))Hr.push(Wr);else if(typeof Wr=="object"&&Wr.id&&Wr.type){const Yr=Hr.findIndex(Zr=>Zr.id===Wr.id&&Zr.type===Wr.type);Yr>=0&&(Hr[Yr]=D$a(Hr[Yr],Wr))}else Kt.indexOf(Wr)===-1&&Hr.push(Wr);return Hr}else if(typeof Kt=="object"){if(Array.isArray(Vt)||typeof Vt!="object")throw new Error("Cannot merge object with non-object");const Hr={...Kt};for(const[Wr,Yr]of Object.entries(Vt)){const Zr=Hr[Wr];Zr===a$o||!Zr?Hr[Wr]=Yr:Hr[Wr]=D$a(Zr,Yr)}return Hr}else if(Kt)return Kt;return Vt}function ft$1(Kt,Vt){if(typeof Kt=="string")return Kt;if(Vt.id!==Kt.id||Vt.type!==Kt.type)throw new Error("Can only merge entities with identical identifiers and type!");return D$a({...Kt},Vt)}function ut$2(Kt){return(Vt,Hr)=>Wr=>{const{id:Yr,type:Zr}=he$5(Wr,Hr||Vt);if(typeof Yr>"u")throw new Error("Found invalid entity without an ID.");return Vt==="ContentResource"?Kt[Yr]=Vt:Kt[Yr]=Zr,Wr}}function ht$2(Kt){const Vt=JSON.stringify(Kt);let Hr=5381,Wr=Vt.length;for(;Wr;)Hr=Hr*33^Vt.charCodeAt(--Wr);const Yr=(Hr>>>0).toString(16);return Yr.length%2?"0"+Yr:Yr}function M$e(Kt){return Vt=>typeof Vt=="string"?{id:Vt,type:Kt}:Vt.id?Vt.type?Vt:{type:Kt,...Vt}:{id:`vault://${ht$2(Vt)}`,type:Kt,...Vt}}function _$c(Kt){return Vt=>({...Kt,...Vt})}function w$f(Kt){return Array.isArray(Kt)?Kt:[Kt]}function ct$2(Kt){return Kt.body&&(Kt.body=w$f(Kt.body)),Kt.seeAlso&&(Kt.seeAlso=w$f(Kt.seeAlso)),Kt.body&&(Kt.body=w$f(Kt.body)),Kt.audience&&(Kt.audience=w$f(Kt.audience)),Kt.accessibility&&(Kt.accessibility=w$f(Kt.accessibility)),Kt.motivation&&(Kt.motivation=w$f(Kt.motivation)),Kt}function yt$1(Kt){const Vt=lt$1(Kt),Hr=vt$2(),Wr={},Yr=pt$2(Hr),Zr=ut$2(Wr),en=new N$b({collection:[_$c(_e$4),Zr("Collection"),Yr("Collection")],manifest:[_$c(we$1),Zr("Manifest"),Yr("Manifest")],canvas:[_$c(Ie$4),Zr("Canvas"),Yr("Canvas")],annotationPage:[M$e("AnnotationPage"),_$c(Ce$4),Zr("AnnotationPage"),Yr("AnnotationPage")],annotation:[M$e("Annotation"),ct$2,Zr("Annotation"),Yr("Annotation")],contentResource:[M$e("ContentResource"),Zr("ContentResource"),Yr("ContentResource")],range:[_$c(be$2),Zr("Range","Canvas"),Yr("Range","Canvas")],agent:[_$c(Re$4),Zr("Agent"),Yr("Agent")]}).traverseUnknown(Vt);return{entities:Hr,resource:en,mapping:Wr}}const C$f="__$UNSET$__",ce$5="__$UNWRAP$__";function dt$2(Kt,Vt){const Hr=Kt.requests[Vt],Wr=Kt.mapping[Vt];if(!(!Wr||Hr&&Hr.resourceUri&&!Kt.entities[Wr][Hr.resourceUri]))return Kt.entities[Wr][Hr?Hr.resourceUri:Vt]}function mt$2(Kt){const Vt={};for(const[Hr,Wr]of Kt){if(Hr===ce$5&&Wr!==C$f)return Wr;Wr!==C$f&&typeof Wr<"u"&&Wr!==null&&(Vt[Hr]=Wr)}return Vt}function At$1(Kt,Vt,Hr){if(!Vt.type||!Vt.id)throw new Error("Unknown entity");if(!Hr[Vt.type])throw new Error(`Serializer not found for ${Vt.type}`);function Wr(Yr){const Zr=Hr[Yr.type];if(!Zr)return C$f;const en=dt$2(Kt,Yr.id)||(Yr.id&&Yr.type?Yr:null);if(!en)return C$f;const tn=Zr(en,Kt,{isTopLevel:Vt.id===Yr.id});let rn=tn.next();for(;!rn.done;){const nn=rn.value;let on=C$f;if(nn)if(Array.isArray(nn)){const an=[];for(const $n of nn)an.push(Wr($n));on=an}else on=Wr(nn);rn=tn.next(on)}return rn.value===C$f?C$f:mt$2(rn.value)}return Wr(Vt)}function b$c(Kt){if(!Kt)return;const Vt=Object.keys(Kt);if(Vt.length!==0){if(Vt.length===1){const Hr=Vt[0];if(!Hr)return"";const Wr=(Kt[Hr]||[]).join("");return Hr==="@none"||Hr==="none"||Hr==="en"?Wr:{"@language":Hr,"@value":Wr}}return Vt.map(Hr=>({"@language":Hr,"@value":(Kt[Hr]||[]).join("")}))}}function de$3(Kt){return Array.isArray(Kt)?Kt.map(Vt=>de$3(Vt)):typeof Kt=="string"?Kt:Kt.type&&Kt.type==="Canvas"?Kt.id:Kt}function h$d(Kt,Vt=!1){if(Kt)return Kt.length>1&&!Vt?Kt:Kt[0]||void 0}function gt$2(Kt){if(Kt){if(typeof Kt=="string")return{"@id":Kt};if("@id"in Kt){const Vt={...Kt};return delete Vt["@type"],Vt}return{"@context":"http://iiif.io/api/image/2/context.json","@id":Kt.id,profile:`http://iiif.io/api/image/2/profiles/${Kt.profile}.json`}}}function d$l(Kt,Vt){return[["@id",Kt.id],["@type",Vt],["format",Kt.format],["height",Kt.height],["width",Kt.width],["viewingDirection",Kt.viewingDirection!=="left-to-right"?Kt.viewingDirection:void 0]]}function*m$j(Kt){const Vt=Kt.provider?yield Kt.provider[0]:void 0;return[["label",b$c(Kt.label)],["metadata",Kt.metadata&&Kt.metadata.length?Kt.metadata.map(Hr=>({label:b$c(Hr.label)||"",value:b$c(Hr.value)||""})):void 0],["description",b$c(Kt.summary)],["thumbnail",h$d(yield Kt.thumbnail)],["navDate",Kt.navDate],["logo",Vt?h$d(Vt.logo):void 0],["homepage",Vt?Vt.homepage:void 0],["attribution",Kt.requiredStatement?b$c(Kt.requiredStatement.value):void 0]]}function*E$9(Kt){return[["seeAlso",h$d(yield Kt.seeAlso)],["service",h$d((Kt.service||[]).map(gt$2))],["rendering",h$d(yield Kt.rendering)],["startCanvas",Kt.start?Kt.start.id:void 0]]}const Ct$2={Manifest:function*(Kt){return[...d$l(Kt,"sc:Manifest"),...yield*m$j(Kt),...yield*E$9(Kt),["sequences",[{"@id":`${Kt.id}/sequence0`,"@type":"sc:Sequence",canvases:yield Kt.items}]],["structures",yield Kt.structures]]},Canvas:function*(Kt){const Vt=(yield Kt.items)[0];return[...d$l(Kt,"sc:Canvas"),...yield*m$j(Kt),...yield*E$9(Kt),["images",Vt?[Vt.resources]:void 0],["annotations",Kt.annotations&&Kt.annotations.length?h$d(yield Kt.annotations):void 0]]},AnnotationPage:function*(Kt){return[...d$l(Kt,"sc:AnnotationList"),...yield*m$j(Kt),["resources",Kt.items&&Kt.items.length?h$d(yield Kt.items):void 0]]},Annotation:function*(Kt){return[["@id",Kt.id],["@type","oa:Annotation"],["motivation","sc:painting"],["on",de$3(Kt.target)],["resource",h$d(yield Kt.body,!0)]]},ContentResource:function*(Kt){switch(Kt.type){case"Image":return[...d$l(Kt,"dctypes:Image"),...yield*m$j(Kt),...yield*E$9(Kt)];case"Text":case"Dataset":default:return[...d$l(Kt,void 0),...yield*m$j(Kt)]}},AnnotationCollection:function*(Kt){return[["@id",Kt.id],["@type","sc:Layer"],["label",b$c(Kt.label)]]},Collection:function*(Kt){return[...d$l(Kt,"sc:Collection"),...yield*m$j(Kt),...yield*E$9(Kt),["members",yield*Kt.items]]},Range:function*(Kt){const Vt=[],Hr=[];if(Kt.items)for(const Wr of Kt.items){const Yr=yield Wr;Vt.push({"@id":Wr.id,"@type":Wr.type,label:Yr?Yr.label:void 0,within:Kt.id}),Wr.type==="Canvas"&&Hr.push(Wr.id)}return[...d$l(Kt,"sc:Range"),...yield*m$j(Kt),...yield*E$9(Kt),["canvases",Hr.length===Vt.length?Hr:void 0],["members",Hr.length!==Vt.length?Vt:void 0]]}};function g$f(Kt){var Vt;return[["id",(Vt=Kt.id)!=null&&Vt.startsWith("vault://")?void 0:Kt.id],["type",Kt.type],["format",Kt.format],["profile",Kt.profile],["height",Kt.height],["width",Kt.width],["duration",Kt.duration||void 0],["viewingDirection",Kt.viewingDirection!=="left-to-right"?Kt.viewingDirection:void 0],["behavior",Kt.behavior&&Kt.behavior.length?Kt.behavior:void 0],["timeMode",Kt.timeMode],["motivation",Array.isArray(Kt.motivation)?Kt.motivation[0]:Kt.motivation]]}function o$p(Kt){if(!(!Kt||Kt.length===0))return Kt}function me$3(Kt){if(Kt&&Kt.type&&Kt.type==="ImageService2"){const{id:Vt,type:Hr,profile:Wr,...Yr}=Kt,Zr=typeof Wr=="string"?Wr:Array.isArray(Wr)?Wr.find(en=>typeof en=="string"):"";return{"@id":Vt,"@type":Hr,profile:Zr?Zr.startsWith("http")?Zr:`http://iiif.io/api/image/2/${Zr}.json`:"http://iiif.io/api/image/2/level0.json",...Yr}}return Kt}function W$6(Kt){if(!(!Kt||Kt.length===0))return Kt.map(me$3)}function*y$9(Kt){return[["label",Kt.label],["metadata",o$p(Kt.metadata)],["summary",Kt.summary],["requiredStatement",Kt.requiredStatement],["rights",Kt.rights],["navDate",Kt.navDate],["language",Kt.language],["thumbnail",o$p(yield Kt.thumbnail)],["placeholderCanvas",yield Kt.placeholderCanvas],["accompanyingCanvas",yield Kt.accompanyingCanvas],["provider",o$p(yield Kt.provider)]]}function*A$8(Kt){return[["seeAlso",o$p(yield Kt.seeAlso)],["service",W$6(Kt.service)],["services",W$6(Kt.services)],["rendering",o$p(yield Kt.rendering)],["supplementary",o$p(yield Kt.supplementary)],["homepage",o$p(yield Kt.homepage)],["logo",o$p(yield Kt.logo)],["partOf",o$p(yield Kt.partOf)],["start",Kt.start]]}const It$2={Manifest:function*(Kt,Vt,{isTopLevel:Hr}){return Hr?[["@context","http://iiif.io/api/presentation/3/context.json"],...g$f(Kt),...yield*y$9(Kt),...yield*A$8(Kt),["items",yield Kt.items],["structures",o$p(yield Kt.structures)],["annotations",o$p(yield Kt.annotations)]]:[...g$f(Kt),...yield*y$9(Kt)]},Canvas:function*(Kt){return[...g$f(Kt),...yield*y$9(Kt),...yield*A$8(Kt),["items",yield Kt.items],["annotations",o$p(yield Kt.annotations)]]},Agent:function*(Kt){return[["id",Kt.id],["type","Agent"],["label",Kt.label],...yield*A$8(Kt)]},AnnotationPage:function*(Kt){return[...Object.entries(Kt).map(([Vt,Hr])=>[Vt,Array.isArray(Hr)?o$p(Hr):Hr]).filter(([Vt,Hr])=>Vt!=="items"),...yield*A$8(Kt),["items",yield Kt.items]]},Service:function*(Kt){return[[ce$5,me$3(Kt)]]},Annotation:function*(Kt){const Vt=Object.entries(Kt).map(([Wr,Yr])=>Wr==="motivation"?[Wr,Array.isArray(Yr)?Yr[0]:Yr]:[Wr,Array.isArray(Yr)?o$p(Yr):Yr]).filter(([Wr])=>Wr!=="body"),Hr=yield Kt.body;return[...Vt,["body",Hr.length===1?Hr[0]:Hr]]},ContentResource:function*(Kt){return[...g$f(Kt),...yield*y$9(Kt),...yield*A$8(Kt),["annotations",o$p(yield Kt.annotations)],["items",o$p(yield Kt.items)]]},AnnotationCollection:function*(Kt){return[["id",Kt.id],["type","AnnotationCollection"],["label",Kt.label]]},Collection:function*(Kt,Vt,{isTopLevel:Hr}){return Hr?[["@context","http://iiif.io/api/presentation/3/context.json"],...g$f(Kt),...yield*y$9(Kt),...yield*A$8(Kt),["items",o$p(yield Kt.items)]]:[...g$f(Kt),...yield*y$9(Kt)]},Range:function*(Kt){const Vt=[];for(const Hr of Kt.items)Hr.type==="Range"?Vt.push(yield Hr):Vt.push(Hr);return[...g$f(Kt),...yield*y$9(Kt),...yield*A$8(Kt),["items",Vt],["annotations",o$p(yield Kt.annotations)]]}};function e$n(Kt){return Kt==null}function i$a(Kt){throw new Error("Argument "+Kt+" is empty.")}function l$f(Kt){return typeof Kt=="string"||typeof Kt=="symbol"}function a$n(Kt){return!l$f(Kt)}function s$9(Kt){throw new Error("Argument "+Kt+" is invalid, it should be an action type of type: string | symbol")}function c$f(Kt,Vt){return e$n(Kt)&&i$a(1),a$n(Kt)&&s$9(1),Object.assign(function(){var Hr=Vt!=null?Vt.apply(void 0,arguments):void 0;return Object.assign({type:Kt},Hr)},{getType:function(){return Kt},toString:function(){return Kt}})}function g$e(Kt,Vt,Hr){return e$n(Kt)&&i$a(1),a$n(Kt)&&s$9(1),function(){return c$f(Kt,function(){var Wr=arguments.length<=0?void 0:arguments[0],Yr=arguments.length<=1?void 0:arguments[1];return Vt==null&&Hr==null||(Wr=Vt!=null?Vt.apply(void 0,arguments):void 0,Yr=Hr!=null?Hr.apply(void 0,arguments):void 0),Object.assign({},Wr!==void 0&&{payload:Wr},{},Yr!==void 0&&{meta:Yr})})}}function o$o(Kt,Vt){var Hr=Object.keys(Kt);if(Object.getOwnPropertySymbols){var Wr=Object.getOwnPropertySymbols(Kt);Vt&&(Wr=Wr.filter(function(Yr){return Object.getOwnPropertyDescriptor(Kt,Yr).enumerable})),Hr.push.apply(Hr,Wr)}return Hr}function i$9(Kt){for(var Vt=1;Vt<arguments.length;Vt++){var Hr=arguments[Vt]!=null?arguments[Vt]:{};Vt%2?o$o(Object(Hr),!0).forEach(function(Wr){f$t(Kt,Wr,Hr[Wr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Kt,Object.getOwnPropertyDescriptors(Hr)):o$o(Object(Hr)).forEach(function(Wr){Object.defineProperty(Kt,Wr,Object.getOwnPropertyDescriptor(Hr,Wr))})}return Kt}function u$i(Kt){return"Minified Redux error #"+Kt+"; visit https://redux.js.org/Errors?code="+Kt+" for the full message or use the non-minified dev environment for full errors. "}var I$7=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),O$e=function(){return Math.random().toString(36).substring(7).split("").join(".")},m$i={INIT:"@@redux/INIT"+O$e(),REPLACE:"@@redux/REPLACE"+O$e(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+O$e()}};function S$b(Kt){if(typeof Kt!="object"||Kt===null)return!1;for(var Vt=Kt;Object.getPrototypeOf(Vt)!==null;)Vt=Object.getPrototypeOf(Vt);return Object.getPrototypeOf(Kt)===Vt}function P$c(Kt,Vt,Hr){var Wr;if(typeof Vt=="function"&&typeof Hr=="function"||typeof Hr=="function"&&typeof arguments[3]=="function")throw new Error(u$i(0));if(typeof Vt=="function"&&typeof Hr>"u"&&(Hr=Vt,Vt=void 0),typeof Hr<"u"){if(typeof Hr!="function")throw new Error(u$i(1));return Hr(P$c)(Kt,Vt)}if(typeof Kt!="function")throw new Error(u$i(2));var Yr=Kt,Zr=Vt,en=[],tn=en,rn=!1;function nn(){tn===en&&(tn=en.slice())}function on(){if(rn)throw new Error(u$i(3));return Zr}function an(jn){if(typeof jn!="function")throw new Error(u$i(4));if(rn)throw new Error(u$i(5));var zn=!0;return nn(),tn.push(jn),function(){if(zn){if(rn)throw new Error(u$i(6));zn=!1,nn();var Wn=tn.indexOf(jn);tn.splice(Wn,1),en=null}}}function $n(jn){if(!S$b(jn))throw new Error(u$i(7));if(typeof jn.type>"u")throw new Error(u$i(8));if(rn)throw new Error(u$i(9));try{rn=!0,Zr=Yr(Zr,jn)}finally{rn=!1}for(var zn=en=tn,Wn=0;Wn<zn.length;Wn++){var ei=zn[Wn];ei()}return jn}function ln(jn){if(typeof jn!="function")throw new Error(u$i(10));Yr=jn,$n({type:m$i.REPLACE})}function Hn(){var jn,zn=an;return jn={subscribe:function(Wn){if(typeof Wn!="object"||Wn===null)throw new Error(u$i(11));function ei(){Wn.next&&Wn.next(on())}ei();var $i=zn(ei);return{unsubscribe:$i}}},jn[I$7]=function(){return this},jn}return $n({type:m$i.INIT}),Wr={dispatch:$n,subscribe:an,getState:on,replaceReducer:ln},Wr[I$7]=Hn,Wr}function k$a(Kt){Object.keys(Kt).forEach(function(Vt){var Hr=Kt[Vt],Wr=Hr(void 0,{type:m$i.INIT});if(typeof Wr>"u")throw new Error(u$i(12));if(typeof Hr(void 0,{type:m$i.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(u$i(13))})}function M$d(Kt){for(var Vt=Object.keys(Kt),Hr={},Wr=0;Wr<Vt.length;Wr++){var Yr=Vt[Wr];typeof Kt[Yr]=="function"&&(Hr[Yr]=Kt[Yr])}var Zr=Object.keys(Hr),en;try{k$a(Hr)}catch(tn){en=tn}return function(tn,rn){if(tn===void 0&&(tn={}),en)throw en;for(var nn=!1,on={},an=0;an<Zr.length;an++){var $n=Zr[an],ln=Hr[$n],Hn=tn[$n],jn=ln(Hn,rn);if(typeof jn>"u")throw rn&&rn.type,new Error(u$i(14));on[$n]=jn,nn=nn||jn!==Hn}return nn=nn||Zr.length!==Object.keys(tn).length,nn?on:tn}}function C$e(){for(var Kt=arguments.length,Vt=new Array(Kt),Hr=0;Hr<Kt;Hr++)Vt[Hr]=arguments[Hr];return Vt.length===0?function(Wr){return Wr}:Vt.length===1?Vt[0]:Vt.reduce(function(Wr,Yr){return function(){return Wr(Yr.apply(void 0,arguments))}})}function U$5(){for(var Kt=arguments.length,Vt=new Array(Kt),Hr=0;Hr<Kt;Hr++)Vt[Hr]=arguments[Hr];return function(Wr){return function(){var Yr=Wr.apply(void 0,arguments),Zr=function(){throw new Error(u$i(15))},en={getState:Yr.getState,dispatch:function(){return Zr.apply(void 0,arguments)}},tn=Vt.map(function(rn){return rn(en)});return Zr=C$e.apply(void 0,tn)(Yr.dispatch),i$9(i$9({},Yr),{},{dispatch:Zr})}}}var $$2=Object.defineProperty,X$7=(Kt,Vt,Hr)=>Vt in Kt?$$2(Kt,Vt,{enumerable:!0,configurable:!0,writable:!0,value:Hr}):Kt[Vt]=Hr,l$e=(Kt,Vt,Hr)=>(X$7(Kt,typeof Vt!="symbol"?Vt+"":Vt,Hr),Hr);const C$d="@iiif/IMPORT_ENTITIES",N$a="@iiif/MODIFY_ENTITY_FIELD",F$7="@iiif/REORDER_ENTITY_FIELD",b$b="@iiif/ADD_REFERENCE",q$6="@iiif/REMOVE_REFERENCE",v$d=g$e(C$d)(),te$3=g$e(N$a)(),ie$2=g$e(F$7)(),re$2=g$e(b$b)(),se$4=g$e(q$6)(),oe$5={importEntities:v$d,modifyEntityField:te$3,reorderEntityField:ie$2,addReference:re$2,removeReference:se$4},w$e="@iiif/ADD_MAPPING",P$b="@iiif/ADD_MAPPINGS",ae$4=g$e(w$e)(),ne$4=g$e(P$b)(),k$9="@iiif/SET_META_VALUE",L$8="@iiif/SET_META_VALUE_DYNAMIC",Q$5="@iiif/UNSET_META_VALUE",de$2=g$e(k$9)(),ue$3=g$e(L$8)(),ce$4=g$e(Q$5)(),M$c={setMetaValue:de$2,setMetaValueDynamic:ue$3,unsetMetaValue:ce$4},S$a="RESOURCE_ERROR",V$5="RESOURCE_LOADING",m$h="RESOURCE_READY",B$b="@iiif/REQUEST_RESOURCE",x$c="@iiif/REQUEST_ERROR",Y$8="@iiif/REQUEST_MISMATCH",z$6="@iiif/REQUEST_COMPLETE",H$8="@iiif/REQUEST_OFFLINE_RESOURCE",le$1=g$e(B$b)(),G$6=g$e(x$c)(),fe$3=g$e(Y$8)(),ye$3=g$e(z$6)();g$e(H$8)();const _$b="@iiif/BATCH",j$c="@iiif/BATCH_IMPORT",g$d=g$e(_$b)();g$e(j$c)();const pe$3=(Kt,Vt)=>{const{entities:Hr,resource:Wr,mapping:Yr}=yt$1(Vt);if(Wr.id===void 0)return[G$6({id:Kt,message:"ID is not defined in resource."})];const Zr=[v$d({entities:Hr}),ne$4({mapping:Yr})];return Wr.id!==Kt&&(Zr.push(ae$4({id:Kt,type:Wr.type})),Zr.push(fe$3({requestId:Kt,actualId:Wr.id}))),Zr.push(ye$3({id:Kt})),Zr},O$d=Number.isNaN||function(Kt){return typeof Kt=="number"&&Kt!==Kt};function he$4(Kt,Vt){return!!(Kt===Vt||O$d(Kt)&&O$d(Vt))}function I$6(Kt,Vt){if(!Array.isArray(Kt)||!Array.isArray(Vt))return Kt===Vt;if(Kt.length!==Vt.length)return!1;for(let Hr=0;Hr<Kt.length;Hr++)if(!he$4(Kt[Hr],Vt[Hr]))return!1;return!0}function h$c(Kt,Vt){const Hr=Kt.iiif.requests[Vt],Wr=Kt.iiif.mapping[Vt];if(!(!Wr||!Kt.iiif.entities[Wr][Hr.resourceUri]))return Kt.iiif.entities[Wr][Hr.resourceUri]}function D$9(Kt,Vt,{waitTimeout:Hr=30}={}){return async(Wr,Yr)=>{const Zr=Kt.getState(),en=Zr.iiif.requests[Wr];if(en)switch(en.loadingState){case S$a:break;case V$5:{let tn,rn=!1;try{const nn=await Promise.race([new Promise((on,an)=>{rn||(tn=Kt.subscribe(()=>{const $n=Kt.getState();if($n.iiif.requests[Wr].loadingState===S$a){an();return}if($n.iiif.requests[Wr].loadingState===m$h){const ln=h$c($n,Wr);ln?on(ln):an()}}))}),new Promise((on,an)=>setTimeout(()=>{rn=!0,an()},Hr*60))]);if(tn&&tn(),nn)return nn}catch{tn&&tn();break}break}case m$h:{const tn=h$c(Zr,Wr);if(tn)return tn;break}}Kt.dispatch(le$1({id:Wr}));try{const tn=await Vt(Wr,Yr);!tn.id&&!tn["@id"]&&(tn["@type"]&&(tn["@id"]=Wr),tn.id=Wr);const rn=pe$3(Wr,tn);return Kt.dispatch(g$d({actions:rn})),h$c(Kt.getState(),Wr)}catch(tn){throw Kt.dispatch(G$6({id:Wr,message:tn.toString()})),tn}}}function Ee$3(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}const Re$3=(Kt={},Vt)=>{switch(Vt.type){case w$e:return{...Kt,[Vt.payload.id]:Vt.payload.type};case P$b:return{...Kt,...Vt.payload.mapping};default:return Kt}};function E$8(Kt,Vt,Hr,Wr){return!(!Kt[Hr]||!Kt[Hr][Vt]||!Kt[Hr][Vt][Wr]||!Array.isArray(Kt[Hr][Vt][Wr]))}function Se$4(Kt,Vt){const Hr={},Wr=[];for(const[Yr,Zr]of Object.entries(Kt||{})){Wr.push(Yr);const en=(Vt||{})[Yr];if(!en||en.length===0){Hr[Yr]=Zr;continue}Hr[Yr]=en}for(const[Yr,Zr]of Object.entries(Vt||{}))Wr.indexOf(Yr)===-1&&(Hr[Yr]=Zr);return Hr}const me$2=(Kt=Ee$3(),Vt)=>{var Hr;switch(Vt.type){case N$a:{if(!Kt[Vt.payload.type]||!Kt[Vt.payload.type][Vt.payload.id])return Kt;const Wr=Kt[Vt.payload.type][Vt.payload.id];return typeof Wr=="string"?Kt:{...Kt,[Vt.payload.type]:{...Kt[Vt.payload.type],[Vt.payload.id]:{...Wr,[Vt.payload.key]:Vt.payload.value}}}}case F$7:{if(!E$8(Kt,Vt.payload.id,Vt.payload.type,Vt.payload.key))return Kt;const Wr=Kt[Vt.payload.type][Vt.payload.id];if(typeof Wr=="string")return Kt;const Yr=Array.from(Wr[Vt.payload.key]),[Zr]=Yr.splice(Vt.payload.startIndex,1);return Yr.splice(Vt.payload.endIndex,0,Zr),{...Kt,[Vt.payload.type]:{...Kt[Vt.payload.type],[Vt.payload.id]:{...Wr,[Vt.payload.key]:Yr}}}}case C$d:{const Wr=Object.keys(Vt.payload.entities),Yr={...Kt};for(const Zr of Wr){const en=Vt.payload.entities[Zr],tn={...Kt[Zr]||{}};let rn=!1;const nn=Object.keys(en||{})||[];if(en&&nn){for(const on of nn)rn=!0,tn[on]=Kt[Zr][on]?Se$4(Kt[Zr][on],en[on]):en[on];rn&&(Yr[Zr]=tn)}}return Yr}case b$b:{if(!E$8(Kt,Vt.payload.id,Vt.payload.type,Vt.payload.key))return Kt;const Wr=Kt[Vt.payload.type][Vt.payload.id],Yr=Array.from(Wr[Vt.payload.key]);return Yr.splice(Vt.payload.index||Yr.length+1,0,Vt.payload.reference),{...Kt,[Vt.payload.type]:{...Kt[Vt.payload.type],[Vt.payload.id]:{...Wr,[Vt.payload.key]:Yr}}}}case q$6:{if(!E$8(Kt,Vt.payload.id,Vt.payload.type,Vt.payload.key))return Kt;const Wr=Kt[Vt.payload.type][Vt.payload.id],Yr=Array.from(Wr[Vt.payload.key]),Zr=Vt.payload.index||Yr.findIndex(en=>en&&en.id===Vt.payload.reference.id);return Zr===-1||((Hr=Yr[Zr])==null?void 0:Hr.id)!==Vt.payload.reference.id?Kt:(Yr.splice(Zr,1),{...Kt,[Vt.payload.type]:{...Kt[Vt.payload.type],[Vt.payload.id]:{...Wr,[Vt.payload.key]:Yr}}})}default:return Kt}},ge$2=(Kt={},Vt)=>{switch(Vt.type){case B$b:case H$8:return{...Kt,[Vt.payload.id]:{requestUri:Vt.payload.id,loadingState:V$5,uriMismatch:!1,resourceUri:Vt.payload.id}};case Y$8:return{...Kt,[Vt.payload.requestId]:{...Kt[Vt.payload.requestId]||{},uriMismatch:!0,resourceUri:Vt.payload.actualId},[Vt.payload.actualId]:{requestUri:Vt.payload.requestId,loadingState:Kt[Vt.payload.requestId].loadingState,uriMismatch:!0,resourceUri:Vt.payload.actualId}};case x$c:return{...Kt,[Vt.payload.id]:{...Kt[Vt.payload.id]||{},loadingState:S$a,error:Vt.payload.message}};case z$6:return{...Kt,[Vt.payload.id]:{...Kt[Vt.payload.id]||{},loadingState:m$h,error:void 0}}}return Kt},_e$3=(Kt={},Vt)=>{const{id:Hr,updateValue:Wr,value:Yr,meta:Zr,key:en}=Vt&&Vt.payload||{};switch(Vt.type){case k$9:return{...Kt,[Hr]:{...Kt[Hr]||{},[Zr]:{...Kt[Hr]?Kt[Hr][Zr]||{}:{},[en]:Yr}}};case L$8:return{...Kt,[Hr]:{...Kt[Hr]||{},[Zr]:{...Kt[Hr]?Kt[Hr][Zr]||{}:{},[en]:Kt[Hr]&&Kt[Hr][Zr]?Wr(Kt[Hr][Zr][en]):Wr(void 0)}}};case Q$5:return Kt[Hr]&&Kt[Hr][Zr]&&Kt[Hr][Zr][en]?{...Kt,[Hr]:{...Kt[Hr]||{},[Zr]:{...Kt[Hr]?Kt[Hr][Zr]||{}:{},[en]:void 0}}}:Kt;default:return Kt}};function Ae$1(Kt){return(Vt,Hr)=>Hr&&Hr.type===_$b?Hr.payload.actions.reduce(Kt,Vt):Hr&&Hr.type===j$c?Hr.payload.state:Kt(Vt,Hr)}const Te$3=M$d({mapping:Re$3,entities:me$2,requests:ge$2,meta:_e$3}),Me$2=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||C$e;function Oe$3(Kt={}){const{enableDevtools:Vt=!0,iiifStoreName:Hr="iiif",defaultState:Wr={},extraMiddleware:Yr=[],customReducers:Zr={}}=Kt,en=M$d({[Hr]:Te$3,...Zr});return P$c(Ae$1(en),Wr,Vt?Me$2(U$5(...Yr)):C$e(U$5(...Yr)))}function Ie$3(Kt){return{all:Kt=Kt||new Map,on:function(Vt,Hr){var Wr=Kt.get(Vt);Wr?Wr.push(Hr):Kt.set(Vt,[Hr])},off:function(Vt,Hr){var Wr=Kt.get(Vt);Wr&&(Hr?Wr.splice(Wr.indexOf(Hr)>>>0,1):Kt.set(Vt,[]))},emit:function(Vt,Hr){var Wr=Kt.get(Vt);Wr&&Wr.slice().map(function(Yr){Yr(Hr)}),(Wr=Kt.get("*"))&&Wr.slice().map(function(Yr){Yr(Vt,Hr)})}}}let Fe$1=class{constructor(Vt,Hr){l$e(this,"options"),l$e(this,"store"),l$e(this,"emitter"),l$e(this,"isBatching",!1),l$e(this,"batchQueue",[]),l$e(this,"remoteFetcher"),l$e(this,"staticFetcher"),l$e(this,"defaultFetcher",Wr=>fetch(Wr).then(Yr=>Yr.json())),l$e(this,"middleware",Wr=>Yr=>Zr=>{if(Zr.type===_$b){for(const rn of Zr.payload.actions)this.emitter.emit(rn.type,{realAction:rn,state:Wr.getState()});const tn=Yr(Zr);for(const rn of Zr.payload.actions)this.emitter.emit(`after:${Zr.type}`,{action:Zr,state:tn});return tn}this.emitter.emit(Zr.type,{action:Zr,state:Wr.getState()});const en=Yr(Zr);return this.emitter.emit(`after:${Zr.type}`,{action:Zr,state:en}),en}),this.options=Object.assign({reducers:{},middleware:[],defaultState:{},customFetcher:this.defaultFetcher,enableDevtools:!0},Vt||{}),this.store=Hr||Oe$3({customReducers:this.options.reducers,extraMiddleware:[...this.options.middleware,this.middleware],defaultState:this.options.defaultState,enableDevtools:this.options.enableDevtools}),this.emitter=Ie$3(),this.remoteFetcher=D$9(this.store,this.options.customFetcher),this.staticFetcher=D$9(this.store,(Wr,Yr)=>Yr)}batch(Vt){this.isBatching=!0;try{Vt(this),this.store.dispatch(g$d({actions:this.batchQueue}))}catch(Hr){throw this.batchQueue=[],this.isBatching=!1,Hr}this.batchQueue=[],this.isBatching=!1}async asyncBatch(Vt){this.isBatching=!0;try{await Vt(this),this.store.dispatch(g$d({actions:this.batchQueue}))}catch(Hr){throw this.batchQueue=[],this.isBatching=!1,Hr}this.batchQueue=[],this.isBatching=!1}modifyEntityField(Vt,Hr,Wr){this.dispatch(oe$5.modifyEntityField({id:Vt.id,type:Vt.type,key:Hr,value:Wr}))}dispatch(Vt){this.isBatching?this.batchQueue.push(Vt):this.store.dispatch(Vt)}serialize(Vt,Hr){return At$1(this.getState().iiif,Vt,Hr)}toPresentation2(Vt){return this.serialize(Vt,Ct$2)}toPresentation3(Vt){return this.serialize(Vt,It$2)}hydrate(Vt,Hr){return this.get(Vt,Hr,{skipSelfReturn:!1})}get(Vt,Hr,Wr={}){typeof Hr!="string"&&(Wr=Hr||{},Hr=void 0);const{skipSelfReturn:Yr=!0}=Wr||{};if(Array.isArray(Vt))return Vt.map(nn=>this.get(nn,Wr));const Zr=this.getState();if(typeof Vt=="string"){const nn=Hr||Zr.iiif.mapping[Vt];if(!nn)return Yr?null:{id:Vt,type:"unknown"};Vt={id:Vt,type:nn}}const en=Hr||Vt.type,tn=Vt.id,rn=Zr.iiif.entities[en];if(!rn){const nn=Zr.iiif.requests[tn];return nn&&nn.resourceUri!==tn?this.get(nn.resourceUri,Wr):Yr?null:Vt}return rn[Vt.id]||(Yr?null:Vt)}select(Vt){return Vt(this.getState())}getStore(){return this.store}getState(){return this.store.getState()}loadManifest(Vt,Hr){const Wr=typeof Vt=="string"?Vt:Vt.id;return this.load(Wr,Hr)}loadCollection(Vt,Hr){const Wr=typeof Vt=="string"?Vt:Vt.id;return this.load(Wr,Hr)}load(Vt,Hr){const Wr=typeof Vt=="string"?Vt:Vt.id;return Hr?this.staticFetcher(Wr,Hr):this.remoteFetcher(Wr)}areInputsEqual(Vt,Hr){return I$6(Vt,Hr)}subscribe(Vt,Hr,Wr){typeof Wr>"u"&&(typeof Hr>"u"||Hr===!1||Hr===!0)&&(Wr=Hr,Hr=Vt,Vt=Zr=>Zr);let Yr=Wr?null:Vt(this.store.getState());return Wr||Hr(Yr,this),this.store.subscribe(()=>{const Zr=this.store.getState(),en=Vt(Zr);Yr!==en&&!I$6(Yr,en)&&Hr(en,this),Yr=en})}async ensureLoaded(Vt){const Hr=typeof Vt=="string"?Vt:Vt.id;this.requestStatus(Hr)||await this.load(Hr)}requestStatus(Vt){return this.select(Hr=>Hr.iiif.requests[Vt])}getResourceMeta(Vt,Hr){const Wr=this.getState().iiif.meta[Vt];if(Wr)return Hr?Wr[Hr]:Wr}setMetaValue([Vt,Hr,Wr],Yr){this.dispatch(typeof Yr=="function"?M$c.setMetaValueDynamic({id:Vt,meta:Hr,key:Wr,updateValue:Yr}):M$c.setMetaValue({id:Vt,meta:Hr,key:Wr,value:Yr}))}};reactExports.createContext(null);var b$a="colors",B$a="sizes",l$d="space",re$1={gap:l$d,gridGap:l$d,columnGap:l$d,gridColumnGap:l$d,rowGap:l$d,gridRowGap:l$d,inset:l$d,insetBlock:l$d,insetBlockEnd:l$d,insetBlockStart:l$d,insetInline:l$d,insetInlineEnd:l$d,insetInlineStart:l$d,margin:l$d,marginTop:l$d,marginRight:l$d,marginBottom:l$d,marginLeft:l$d,marginBlock:l$d,marginBlockEnd:l$d,marginBlockStart:l$d,marginInline:l$d,marginInlineEnd:l$d,marginInlineStart:l$d,padding:l$d,paddingTop:l$d,paddingRight:l$d,paddingBottom:l$d,paddingLeft:l$d,paddingBlock:l$d,paddingBlockEnd:l$d,paddingBlockStart:l$d,paddingInline:l$d,paddingInlineEnd:l$d,paddingInlineStart:l$d,top:l$d,right:l$d,bottom:l$d,left:l$d,scrollMargin:l$d,scrollMarginTop:l$d,scrollMarginRight:l$d,scrollMarginBottom:l$d,scrollMarginLeft:l$d,scrollMarginX:l$d,scrollMarginY:l$d,scrollMarginBlock:l$d,scrollMarginBlockEnd:l$d,scrollMarginBlockStart:l$d,scrollMarginInline:l$d,scrollMarginInlineEnd:l$d,scrollMarginInlineStart:l$d,scrollPadding:l$d,scrollPaddingTop:l$d,scrollPaddingRight:l$d,scrollPaddingBottom:l$d,scrollPaddingLeft:l$d,scrollPaddingX:l$d,scrollPaddingY:l$d,scrollPaddingBlock:l$d,scrollPaddingBlockEnd:l$d,scrollPaddingBlockStart:l$d,scrollPaddingInline:l$d,scrollPaddingInlineEnd:l$d,scrollPaddingInlineStart:l$d,fontSize:"fontSizes",background:b$a,backgroundColor:b$a,backgroundImage:b$a,borderImage:b$a,border:b$a,borderBlock:b$a,borderBlockEnd:b$a,borderBlockStart:b$a,borderBottom:b$a,borderBottomColor:b$a,borderColor:b$a,borderInline:b$a,borderInlineEnd:b$a,borderInlineStart:b$a,borderLeft:b$a,borderLeftColor:b$a,borderRight:b$a,borderRightColor:b$a,borderTop:b$a,borderTopColor:b$a,caretColor:b$a,color:b$a,columnRuleColor:b$a,fill:b$a,outline:b$a,outlineColor:b$a,stroke:b$a,textDecorationColor:b$a,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:B$a,minBlockSize:B$a,maxBlockSize:B$a,inlineSize:B$a,minInlineSize:B$a,maxInlineSize:B$a,width:B$a,minWidth:B$a,maxWidth:B$a,height:B$a,minHeight:B$a,maxHeight:B$a,flexBasis:B$a,gridTemplateColumns:B$a,gridTemplateRows:B$a,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},oe$4=(Kt,Vt)=>typeof Vt=="function"?{"()":Function.prototype.toString.call(Vt)}:Vt,L$7=()=>{const Kt=Object.create(null);return(Vt,Hr,...Wr)=>{const Yr=(Zr=>JSON.stringify(Zr,oe$4))(Vt);return Yr in Kt?Kt[Yr]:Kt[Yr]=Hr(Vt,...Wr)}},T$e=Symbol.for("sxs.internal"),X$6=(Kt,Vt)=>Object.defineProperties(Kt,Object.getOwnPropertyDescriptors(Vt)),Z$4=Kt=>{for(const Vt in Kt)return!0;return!1},{hasOwnProperty:le}=Object.prototype,U$4=Kt=>Kt.includes("-")?Kt:Kt.replace(/[A-Z]/g,Vt=>"-"+Vt.toLowerCase()),se$3=/\s+(?![^()]*\))/,P$a=Kt=>Vt=>Kt(...typeof Vt=="string"?String(Vt).split(se$3):[Vt]),q$5={appearance:Kt=>({WebkitAppearance:Kt,appearance:Kt}),backfaceVisibility:Kt=>({WebkitBackfaceVisibility:Kt,backfaceVisibility:Kt}),backdropFilter:Kt=>({WebkitBackdropFilter:Kt,backdropFilter:Kt}),backgroundClip:Kt=>({WebkitBackgroundClip:Kt,backgroundClip:Kt}),boxDecorationBreak:Kt=>({WebkitBoxDecorationBreak:Kt,boxDecorationBreak:Kt}),clipPath:Kt=>({WebkitClipPath:Kt,clipPath:Kt}),content:Kt=>({content:Kt.includes('"')||Kt.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(Kt)?Kt:`"${Kt}"`}),hyphens:Kt=>({WebkitHyphens:Kt,hyphens:Kt}),maskImage:Kt=>({WebkitMaskImage:Kt,maskImage:Kt}),maskSize:Kt=>({WebkitMaskSize:Kt,maskSize:Kt}),tabSize:Kt=>({MozTabSize:Kt,tabSize:Kt}),textSizeAdjust:Kt=>({WebkitTextSizeAdjust:Kt,textSizeAdjust:Kt}),userSelect:Kt=>({WebkitUserSelect:Kt,userSelect:Kt}),marginBlock:P$a((Kt,Vt)=>({marginBlockStart:Kt,marginBlockEnd:Vt||Kt})),marginInline:P$a((Kt,Vt)=>({marginInlineStart:Kt,marginInlineEnd:Vt||Kt})),maxSize:P$a((Kt,Vt)=>({maxBlockSize:Kt,maxInlineSize:Vt||Kt})),minSize:P$a((Kt,Vt)=>({minBlockSize:Kt,minInlineSize:Vt||Kt})),paddingBlock:P$a((Kt,Vt)=>({paddingBlockStart:Kt,paddingBlockEnd:Vt||Kt})),paddingInline:P$a((Kt,Vt)=>({paddingInlineStart:Kt,paddingInlineEnd:Vt||Kt}))},J$5=/([\d.]+)([^]*)/,ae$3=(Kt,Vt)=>Kt.length?Kt.reduce((Hr,Wr)=>(Hr.push(...Vt.map(Yr=>Yr.includes("&")?Yr.replace(/&/g,/[ +>|~]/.test(Wr)&&/&.*&/.test(Yr)?`:is(${Wr})`:Wr):Wr+" "+Yr)),Hr),[]):Vt,ce$3=(Kt,Vt)=>Kt in de$1&&typeof Vt=="string"?Vt.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(Hr,Wr,Yr,Zr)=>Wr+(Yr==="stretch"?`-moz-available${Zr};${U$4(Kt)}:${Wr}-webkit-fill-available`:`-moz-fit-content${Zr};${U$4(Kt)}:${Wr}fit-content`)+Zr):String(Vt),de$1={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},j$b=Kt=>Kt?Kt+"-":"",ne$3=(Kt,Vt,Hr)=>Kt.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(Wr,Yr,Zr,en,tn)=>en=="$"==!!Zr?Wr:(Yr||en=="--"?"calc(":"")+"var(--"+(en==="$"?j$b(Vt)+(tn.includes("$")?"":j$b(Hr))+tn.replace(/\$/g,"-"):tn)+")"+(Yr||en=="--"?"*"+(Yr||"")+(Zr||"1")+")":"")),ge$1=/\s*,\s*(?![^()]*\))/,pe$2=Object.prototype.toString,C$c=(Kt,Vt,Hr,Wr,Yr)=>{let Zr,en,tn;const rn=(nn,on,an)=>{let $n,ln;const Hn=jn=>{for($n in jn){const ei=$n.charCodeAt(0)===64,$i=ei&&Array.isArray(jn[$n])?jn[$n]:[jn[$n]];for(ln of $i){const Mi=/[A-Z]/.test(Wn=$n)?Wn:Wn.replace(/-[^]/g,Ts=>Ts[1].toUpperCase()),Ni=typeof ln=="object"&&ln&&ln.toString===pe$2&&(!Wr.utils[Mi]||!on.length);if(Mi in Wr.utils&&!Ni){const Ts=Wr.utils[Mi];if(Ts!==en){en=Ts,Hn(Ts(ln)),en=null;continue}}else if(Mi in q$5){const Ts=q$5[Mi];if(Ts!==tn){tn=Ts,Hn(Ts(ln)),tn=null;continue}}if(ei&&(zn=$n.slice(1)in Wr.media?"@media "+Wr.media[$n.slice(1)]:$n,$n=zn.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(Ts,ps,$s,Ws,Hs,js)=>{const zs=J$5.test(ps),Xs=.0625*(zs?-1:1),[ia,Qs]=zs?[Ws,ps]:[ps,Ws];return"("+($s[0]==="="?"":$s[0]===">"===zs?"max-":"min-")+ia+":"+($s[0]!=="="&&$s.length===1?Qs.replace(J$5,(Zs,Gs,Hl)=>Number(Gs)+Xs*($s===">"?1:-1)+Hl):Qs)+(Hs?") and ("+(Hs[0]===">"?"min-":"max-")+ia+":"+(Hs.length===1?js.replace(J$5,(Zs,Gs,Hl)=>Number(Gs)+Xs*(Hs===">"?-1:1)+Hl):js):"")+")"})),Ni){const Ts=ei?an.concat($n):[...an],ps=ei?[...on]:ae$3(on,$n.split(ge$1));Zr!==void 0&&Yr(_$a(...Zr)),Zr=void 0,rn(ln,ps,Ts)}else Zr===void 0&&(Zr=[[],on,an]),$n=ei||$n.charCodeAt(0)!==36?$n:`--${j$b(Wr.prefix)}${$n.slice(1).replace(/\$/g,"-")}`,ln=Ni?ln:typeof ln=="number"?ln&&Mi in ue$2?String(ln)+"px":String(ln):ne$3(ce$3(Mi,ln??""),Wr.prefix,Wr.themeMap[Mi]),Zr[0].push(`${ei?`${$n} `:`${U$4($n)}:`}${ln}`)}}var zn,Wn};Hn(nn),Zr!==void 0&&Yr(_$a(...Zr)),Zr=void 0};rn(Kt,Vt,Hr)},_$a=(Kt,Vt,Hr)=>`${Hr.map(Wr=>`${Wr}{`).join("")}${Vt.length?`${Vt.join(",")}{`:""}${Kt.join(";")}${Vt.length?"}":""}${Array(Hr.length?Hr.length+1:0).join("}")}`,ue$2={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},K$5=Kt=>String.fromCharCode(Kt+(Kt>25?39:97)),v$c=Kt=>(Vt=>{let Hr,Wr="";for(Hr=Math.abs(Vt);Hr>52;Hr=Hr/52|0)Wr=K$5(Hr%52)+Wr;return K$5(Hr%52)+Wr})(((Vt,Hr)=>{let Wr=Hr.length;for(;Wr;)Vt=33*Vt^Hr.charCodeAt(--Wr);return Vt})(5381,JSON.stringify(Kt))>>>0),N$9=["themed","global","styled","onevar","resonevar","allvar","inline"],he$3=Kt=>{if(Kt.href&&!Kt.href.startsWith(location.origin))return!1;try{return!!Kt.cssRules}catch{return!1}},fe$2=Kt=>{let Vt;const Hr=()=>{const{cssRules:Yr}=Vt.sheet;return[].map.call(Yr,(Zr,en)=>{const{cssText:tn}=Zr;let rn="";if(tn.startsWith("--sxs"))return"";if(Yr[en-1]&&(rn=Yr[en-1].cssText).startsWith("--sxs")){if(!Zr.cssRules.length)return"";for(const nn in Vt.rules)if(Vt.rules[nn].group===Zr)return`--sxs{--sxs:${[...Vt.rules[nn].cache].join(" ")}}${tn}`;return Zr.cssRules.length?`${rn}${tn}`:""}return tn}).join("")},Wr=()=>{if(Vt){const{rules:tn,sheet:rn}=Vt;if(!rn.deleteRule){for(;Object(Object(rn.cssRules)[0]).type===3;)rn.cssRules.splice(0,1);rn.cssRules=[]}for(const nn in tn)delete tn[nn]}const Yr=Object(Kt).styleSheets||[];for(const tn of Yr)if(he$3(tn)){for(let rn=0,nn=tn.cssRules;nn[rn];++rn){const on=Object(nn[rn]);if(on.type!==1)continue;const an=Object(nn[rn+1]);if(an.type!==4)continue;++rn;const{cssText:$n}=on;if(!$n.startsWith("--sxs"))continue;const ln=$n.slice(14,-3).trim().split(/\s+/),Hn=N$9[ln[0]];Hn&&(Vt||(Vt={sheet:tn,reset:Wr,rules:{},toString:Hr}),Vt.rules[Hn]={group:an,index:rn,cache:new Set(ln)})}if(Vt)break}if(!Vt){const tn=(rn,nn)=>({type:nn,cssRules:[],insertRule(on,an){this.cssRules.splice(an,0,tn(on,{import:3,undefined:1}[(on.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return rn==="@media{}"?`@media{${[].map.call(this.cssRules,on=>on.cssText).join("")}}`:rn}});Vt={sheet:Kt?(Kt.head||Kt).appendChild(document.createElement("style")).sheet:tn("","text/css"),rules:{},reset:Wr,toString:Hr}}const{sheet:Zr,rules:en}=Vt;for(let tn=N$9.length-1;tn>=0;--tn){const rn=N$9[tn];if(!en[rn]){const nn=N$9[tn+1],on=en[nn]?en[nn].index:Zr.cssRules.length;Zr.insertRule("@media{}",on),Zr.insertRule(`--sxs{--sxs:${tn}}`,on),en[rn]={group:Zr.cssRules[on+1],index:on,cache:new Set([tn])}}me$1(en[rn])}};return Wr(),Vt},me$1=Kt=>{const Vt=Kt.group;let Hr=Vt.cssRules.length;Kt.apply=Wr=>{try{Vt.insertRule(Wr,Hr),++Hr}catch{}}},A$7=Symbol(),be$1=L$7(),Q$4=(Kt,Vt)=>be$1(Kt,()=>(...Hr)=>{let Wr={type:null,composers:new Set};for(const Yr of Hr)if(Yr!=null)if(Yr[T$e]){Wr.type==null&&(Wr.type=Yr[T$e].type);for(const Zr of Yr[T$e].composers)Wr.composers.add(Zr)}else Yr.constructor!==Object||Yr.$$typeof?Wr.type==null&&(Wr.type=Yr):Wr.composers.add(Se$3(Yr,Kt));return Wr.type==null&&(Wr.type="span"),Wr.composers.size||Wr.composers.add(["PJLV",{},[],[],{},[]]),ke$2(Kt,Wr,Vt)}),Se$3=({variants:Kt,compoundVariants:Vt,defaultVariants:Hr,...Wr},Yr)=>{const Zr=`${j$b(Yr.prefix)}c-${v$c(Wr)}`,en=[],tn=[],rn=Object.create(null),nn=[];for(const $n in Hr)rn[$n]=String(Hr[$n]);if(typeof Kt=="object"&&Kt)for(const $n in Kt){on=rn,an=$n,le.call(on,an)||(rn[$n]="undefined");const ln=Kt[$n];for(const Hn in ln){const jn={[$n]:String(Hn)};String(Hn)==="undefined"&&nn.push($n);const zn=ln[Hn],Wn=[jn,zn,!Z$4(zn)];en.push(Wn)}}var on,an;if(typeof Vt=="object"&&Vt)for(const $n of Vt){let{css:ln,...Hn}=$n;ln=typeof ln=="object"&&ln||{};for(const zn in Hn)Hn[zn]=String(Hn[zn]);const jn=[Hn,ln,!Z$4(ln)];tn.push(jn)}return[Zr,Wr,en,tn,rn,nn]},ke$2=(Kt,Vt,Hr)=>{const[Wr,Yr,Zr,en]=ye$2(Vt.composers),tn=typeof Vt.type=="function"||Vt.type.$$typeof?(an=>{function $n(){for(let ln=0;ln<$n[A$7].length;ln++){const[Hn,jn]=$n[A$7][ln];an.rules[Hn].apply(jn)}return $n[A$7]=[],null}return $n[A$7]=[],$n.rules={},N$9.forEach(ln=>$n.rules[ln]={apply:Hn=>$n[A$7].push([ln,Hn])}),$n})(Hr):null,rn=(tn||Hr).rules,nn=`.${Wr}${Yr.length>1?`:where(.${Yr.slice(1).join(".")})`:""}`,on=an=>{an=typeof an=="object"&&an||Be$2;const{css:$n,...ln}=an,Hn={};for(const Wn in Zr)if(delete ln[Wn],Wn in an){let ei=an[Wn];typeof ei=="object"&&ei?Hn[Wn]={"@initial":Zr[Wn],...ei}:(ei=String(ei),Hn[Wn]=ei!=="undefined"||en.has(Wn)?ei:Zr[Wn])}else Hn[Wn]=Zr[Wn];const jn=new Set([...Yr]);for(const[Wn,ei,$i,Mi]of Vt.composers){Hr.rules.styled.cache.has(Wn)||(Hr.rules.styled.cache.add(Wn),C$c(ei,[`.${Wn}`],[],Kt,ps=>{rn.styled.apply(ps)}));const Ni=ee$4($i,Hn,Kt.media),Ts=ee$4(Mi,Hn,Kt.media,!0);for(const ps of Ni)if(ps!==void 0)for(const[$s,Ws,Hs]of ps){const js=`${Wn}-${v$c(Ws)}-${$s}`;jn.add(js);const zs=(Hs?Hr.rules.resonevar:Hr.rules.onevar).cache,Xs=Hs?rn.resonevar:rn.onevar;zs.has(js)||(zs.add(js),C$c(Ws,[`.${js}`],[],Kt,ia=>{Xs.apply(ia)}))}for(const ps of Ts)if(ps!==void 0)for(const[$s,Ws]of ps){const Hs=`${Wn}-${v$c(Ws)}-${$s}`;jn.add(Hs),Hr.rules.allvar.cache.has(Hs)||(Hr.rules.allvar.cache.add(Hs),C$c(Ws,[`.${Hs}`],[],Kt,js=>{rn.allvar.apply(js)}))}}if(typeof $n=="object"&&$n){const Wn=`${Wr}-i${v$c($n)}-css`;jn.add(Wn),Hr.rules.inline.cache.has(Wn)||(Hr.rules.inline.cache.add(Wn),C$c($n,[`.${Wn}`],[],Kt,ei=>{rn.inline.apply(ei)}))}for(const Wn of String(an.className||"").trim().split(/\s+/))Wn&&jn.add(Wn);const zn=ln.className=[...jn].join(" ");return{type:Vt.type,className:zn,selector:nn,props:ln,toString:()=>zn,deferredInjector:tn}};return X$6(on,{className:Wr,selector:nn,[T$e]:Vt,toString:()=>(Hr.rules.styled.cache.has(Wr)||on(),Wr)})},ye$2=Kt=>{let Vt="";const Hr=[],Wr={},Yr=[];for(const[Zr,,,,en,tn]of Kt){Vt===""&&(Vt=Zr),Hr.push(Zr),Yr.push(...tn);for(const rn in en){const nn=en[rn];(Wr[rn]===void 0||nn!=="undefined"||tn.includes(nn))&&(Wr[rn]=nn)}}return[Vt,Hr,Wr,new Set(Yr)]},ee$4=(Kt,Vt,Hr,Wr)=>{const Yr=[];e:for(let[Zr,en,tn]of Kt){if(tn)continue;let rn,nn=0,on=!1;for(rn in Zr){const an=Zr[rn];let $n=Vt[rn];if($n!==an){if(typeof $n!="object"||!$n)continue e;{let ln,Hn,jn=0;for(const zn in $n){if(an===String($n[zn])){if(zn!=="@initial"){const Wn=zn.slice(1);(Hn=Hn||[]).push(Wn in Hr?Hr[Wn]:zn.replace(/^@media ?/,"")),on=!0}nn+=jn,ln=!0}++jn}if(Hn&&Hn.length&&(en={["@media "+Hn.join(", ")]:en}),!ln)continue e}}}(Yr[nn]=Yr[nn]||[]).push([Wr?"cv":`${rn}-${Zr[rn]}`,en,on])}return Yr},Be$2={},$e$2=L$7(),xe$2=(Kt,Vt)=>$e$2(Kt,()=>(...Hr)=>{const Wr=()=>{for(let Yr of Hr){Yr=typeof Yr=="object"&&Yr||{};let Zr=v$c(Yr);if(!Vt.rules.global.cache.has(Zr)){if(Vt.rules.global.cache.add(Zr),"@import"in Yr){let en=[].indexOf.call(Vt.sheet.cssRules,Vt.rules.themed.group)-1;for(let tn of[].concat(Yr["@import"]))tn=tn.includes('"')||tn.includes("'")?tn:`"${tn}"`,Vt.sheet.insertRule(`@import ${tn};`,en++);delete Yr["@import"]}C$c(Yr,[],[],Kt,en=>{Vt.rules.global.apply(en)})}}return""};return X$6(Wr,{toString:Wr})}),Re$2=L$7(),Ie$2=(Kt,Vt)=>Re$2(Kt,()=>Hr=>{const Wr=`${j$b(Kt.prefix)}k-${v$c(Hr)}`,Yr=()=>{if(!Vt.rules.global.cache.has(Wr)){Vt.rules.global.cache.add(Wr);const Zr=[];C$c(Hr,[],[],Kt,tn=>Zr.push(tn));const en=`@keyframes ${Wr}{${Zr.join("")}}`;Vt.rules.global.apply(en)}return Wr};return X$6(Yr,{get name(){return Yr()},toString:Yr})}),ze$1=class{constructor(Vt,Hr,Wr,Yr){this.token=Vt==null?"":String(Vt),this.value=Hr==null?"":String(Hr),this.scale=Wr==null?"":String(Wr),this.prefix=Yr==null?"":String(Yr)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+j$b(this.prefix)+j$b(this.scale)+this.token}toString(){return this.computedValue}},We$1=L$7(),je$2=(Kt,Vt)=>We$1(Kt,()=>(Hr,Wr)=>{Wr=typeof Hr=="object"&&Hr||Object(Wr);const Yr=`.${Hr=(Hr=typeof Hr=="string"?Hr:"")||`${j$b(Kt.prefix)}t-${v$c(Wr)}`}`,Zr={},en=[];for(const rn in Wr){Zr[rn]={};for(const nn in Wr[rn]){const on=`--${j$b(Kt.prefix)}${rn}-${nn}`,an=ne$3(String(Wr[rn][nn]),Kt.prefix,rn);Zr[rn][nn]=new ze$1(nn,an,rn,Kt.prefix),en.push(`${on}:${an}`)}}const tn=()=>{if(en.length&&!Vt.rules.themed.cache.has(Hr)){Vt.rules.themed.cache.add(Hr);const rn=`${Wr===Kt.theme?":root,":""}.${Hr}{${en.join(";")}}`;Vt.rules.themed.apply(rn)}return Hr};return{...Zr,get className(){return tn()},selector:Yr,toString:tn}}),Ee$2=L$7(),Te$2=L$7(),ve$1=Kt=>{const Vt=(Hr=>{let Wr=!1;const Yr=Ee$2(Hr,Zr=>{Wr=!0;const en="prefix"in(Zr=typeof Zr=="object"&&Zr||{})?String(Zr.prefix):"",tn=typeof Zr.media=="object"&&Zr.media||{},rn=typeof Zr.root=="object"?Zr.root||null:globalThis.document||null,nn=typeof Zr.theme=="object"&&Zr.theme||{},on={prefix:en,media:tn,theme:nn,themeMap:typeof Zr.themeMap=="object"&&Zr.themeMap||{...re$1},utils:typeof Zr.utils=="object"&&Zr.utils||{}},an=fe$2(rn),$n={css:Q$4(on,an),globalCss:xe$2(on,an),keyframes:Ie$2(on,an),createTheme:je$2(on,an),reset(){an.reset(),$n.theme.toString()},theme:{},sheet:an,config:on,prefix:en,getCssText:an.toString,toString:an.toString};return String($n.theme=$n.createTheme(nn)),$n});return Wr||Yr.reset(),Yr})(Kt);return Vt.styled=(({config:Hr,sheet:Wr})=>Te$2(Hr,()=>{const Yr=Q$4(Hr,Wr);return(...Zr)=>{const en=Yr(...Zr),tn=en[T$e].type,rn=React.forwardRef((nn,on)=>{const an=nn&&nn.as||tn,{props:$n,deferredInjector:ln}=en(nn);return delete $n.as,$n.ref=on,ln?React.createElement(React.Fragment,null,React.createElement(an,$n),React.createElement(ln,null)):React.createElement(an,$n)});return rn.className=en.className,rn.displayName=`Styled.${tn.displayName||tn.name||tn}`,rn.selector=en.selector,rn.toString=()=>en.selector,rn[T$e]=en[T$e],rn}}))(Vt),Vt};const g$c="Tabs",[y$8,Y$7]=P$n(g$c,[Ee$5]),_$9=Ee$5(),[D$8,T$d]=y$8(g$c),G$5=reactExports.forwardRef((Kt,Vt)=>{const{__scopeTabs:Hr,value:Wr,onValueChange:Yr,defaultValue:Zr,orientation:en="horizontal",dir:tn,activationMode:rn="automatic",...nn}=Kt,on=i$L(tn),[an,$n]=g$F({prop:Wr,onChange:Yr,defaultProp:Zr});return reactExports.createElement(D$8,{scope:Hr,baseId:s$C(),value:an,onValueChange:$n,orientation:en,dir:on,activationMode:rn},reactExports.createElement(E$l.div,e$1x({dir:on,"data-orientation":en},nn,{ref:Vt})))}),N$8="TabsList",w$d=reactExports.forwardRef((Kt,Vt)=>{const{__scopeTabs:Hr,loop:Wr=!0,...Yr}=Kt,Zr=T$d(N$8,Hr),en=_$9(Hr);return reactExports.createElement(xe$4,e$1x({asChild:!0},en,{orientation:Zr.orientation,dir:Zr.dir,loop:Wr}),reactExports.createElement(E$l.div,e$1x({role:"tablist","aria-orientation":Zr.orientation},Yr,{ref:Vt})))}),L$6="TabsTrigger",k$8=reactExports.forwardRef((Kt,Vt)=>{const{__scopeTabs:Hr,value:Wr,disabled:Yr=!1,...Zr}=Kt,en=T$d(L$6,Hr),tn=_$9(Hr),rn=C$b(en.baseId,Wr),nn=I$5(en.baseId,Wr),on=Wr===en.value;return reactExports.createElement(Ce$5,e$1x({asChild:!0},tn,{focusable:!Yr,active:on}),reactExports.createElement(E$l.button,e$1x({type:"button",role:"tab","aria-selected":on,"aria-controls":nn,"data-state":on?"active":"inactive","data-disabled":Yr?"":void 0,disabled:Yr,id:rn},Zr,{ref:Vt,onMouseDown:o$1f(Kt.onMouseDown,an=>{!Yr&&an.button===0&&an.ctrlKey===!1?en.onValueChange(Wr):an.preventDefault()}),onKeyDown:o$1f(Kt.onKeyDown,an=>{[" ","Enter"].includes(an.key)&&en.onValueChange(Wr)}),onFocus:o$1f(Kt.onFocus,()=>{const an=en.activationMode!=="manual";!on&&!Yr&&an&&en.onValueChange(Wr)})})))}),K$4="TabsContent",B$9=reactExports.forwardRef((Kt,Vt)=>{const{__scopeTabs:Hr,value:Wr,forceMount:Yr,children:Zr,...en}=Kt,tn=T$d(K$4,Hr),rn=C$b(tn.baseId,Wr),nn=I$5(tn.baseId,Wr),on=Wr===tn.value,an=reactExports.useRef(on);return reactExports.useEffect(()=>{const $n=requestAnimationFrame(()=>an.current=!1);return()=>cancelAnimationFrame($n)},[]),reactExports.createElement(P$m,{present:Yr||on},({present:$n})=>reactExports.createElement(E$l.div,e$1x({"data-state":on?"active":"inactive","data-orientation":tn.orientation,role:"tabpanel","aria-labelledby":rn,hidden:!$n,id:nn,tabIndex:0},en,{ref:Vt,style:{...Kt.style,animationDuration:an.current?"0s":void 0}}),$n&&Zr))});function C$b(Kt,Vt){return`${Kt}-trigger-${Vt}`}function I$5(Kt,Vt){return`${Kt}-content-${Vt}`}const Z$3=G$5,ee$3=w$d,te$2=k$8,oe$3=B$9;var r$h={},r$g={},e$m={},e$l={},a$m={};Object.defineProperty(a$m,"__esModule",{value:!0});a$m.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(Kt){return Kt.charCodeAt(0)}));var a$l={};Object.defineProperty(a$l,"__esModule",{value:!0});a$l.default=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(function(Kt){return Kt.charCodeAt(0)}));var e$k={};(function(Kt){var Vt;Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.replaceCodePoint=Kt.fromCodePoint=void 0;var Hr=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);Kt.fromCodePoint=(Vt=String.fromCodePoint)!==null&&Vt!==void 0?Vt:function(Zr){var en="";return Zr>65535&&(Zr-=65536,en+=String.fromCharCode(Zr>>>10&1023|55296),Zr=56320|Zr&1023),en+=String.fromCharCode(Zr),en};function Wr(Zr){var en;return Zr>=55296&&Zr<=57343||Zr>1114111?65533:(en=Hr.get(Zr))!==null&&en!==void 0?en:Zr}Kt.replaceCodePoint=Wr;function Yr(Zr){return(0,Kt.fromCodePoint)(Wr(Zr))}Kt.default=Yr})(e$k);(function(Kt){var Vt=u$s&&u$s.__createBinding||(Object.create?function(js,zs,Xs,ia){ia===void 0&&(ia=Xs);var Qs=Object.getOwnPropertyDescriptor(zs,Xs);(!Qs||("get"in Qs?!zs.__esModule:Qs.writable||Qs.configurable))&&(Qs={enumerable:!0,get:function(){return zs[Xs]}}),Object.defineProperty(js,ia,Qs)}:function(js,zs,Xs,ia){ia===void 0&&(ia=Xs),js[ia]=zs[Xs]}),Hr=u$s&&u$s.__setModuleDefault||(Object.create?function(js,zs){Object.defineProperty(js,"default",{enumerable:!0,value:zs})}:function(js,zs){js.default=zs}),Wr=u$s&&u$s.__importStar||function(js){if(js&&js.__esModule)return js;var zs={};if(js!=null)for(var Xs in js)Xs!=="default"&&Object.prototype.hasOwnProperty.call(js,Xs)&&Vt(zs,js,Xs);return Hr(zs,js),zs},Yr=u$s&&u$s.__importDefault||function(js){return js&&js.__esModule?js:{default:js}};Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.decodeXML=Kt.decodeHTMLStrict=Kt.decodeHTMLAttribute=Kt.decodeHTML=Kt.determineBranch=Kt.EntityDecoder=Kt.DecodingMode=Kt.BinTrieFlags=Kt.fromCodePoint=Kt.replaceCodePoint=Kt.decodeCodePoint=Kt.xmlDecodeTree=Kt.htmlDecodeTree=void 0;var Zr=Yr(a$m);Kt.htmlDecodeTree=Zr.default;var en=Yr(a$l);Kt.xmlDecodeTree=en.default;var tn=Wr(e$k);Kt.decodeCodePoint=tn.default;var rn=e$k;Object.defineProperty(Kt,"replaceCodePoint",{enumerable:!0,get:function(){return rn.replaceCodePoint}}),Object.defineProperty(Kt,"fromCodePoint",{enumerable:!0,get:function(){return rn.fromCodePoint}});var nn;(function(js){js[js.NUM=35]="NUM",js[js.SEMI=59]="SEMI",js[js.EQUALS=61]="EQUALS",js[js.ZERO=48]="ZERO",js[js.NINE=57]="NINE",js[js.LOWER_A=97]="LOWER_A",js[js.LOWER_F=102]="LOWER_F",js[js.LOWER_X=120]="LOWER_X",js[js.LOWER_Z=122]="LOWER_Z",js[js.UPPER_A=65]="UPPER_A",js[js.UPPER_F=70]="UPPER_F",js[js.UPPER_Z=90]="UPPER_Z"})(nn||(nn={}));var on=32,an;(function(js){js[js.VALUE_LENGTH=49152]="VALUE_LENGTH",js[js.BRANCH_LENGTH=16256]="BRANCH_LENGTH",js[js.JUMP_TABLE=127]="JUMP_TABLE"})(an=Kt.BinTrieFlags||(Kt.BinTrieFlags={}));function $n(js){return js>=nn.ZERO&&js<=nn.NINE}function ln(js){return js>=nn.UPPER_A&&js<=nn.UPPER_F||js>=nn.LOWER_A&&js<=nn.LOWER_F}function Hn(js){return js>=nn.UPPER_A&&js<=nn.UPPER_Z||js>=nn.LOWER_A&&js<=nn.LOWER_Z||$n(js)}function jn(js){return js===nn.EQUALS||Hn(js)}var zn;(function(js){js[js.EntityStart=0]="EntityStart",js[js.NumericStart=1]="NumericStart",js[js.NumericDecimal=2]="NumericDecimal",js[js.NumericHex=3]="NumericHex",js[js.NamedEntity=4]="NamedEntity"})(zn||(zn={}));var Wn;(function(js){js[js.Legacy=0]="Legacy",js[js.Strict=1]="Strict",js[js.Attribute=2]="Attribute"})(Wn=Kt.DecodingMode||(Kt.DecodingMode={}));var ei=function(){function js(zs,Xs,ia){this.decodeTree=zs,this.emitCodePoint=Xs,this.errors=ia,this.state=zn.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Wn.Strict}return js.prototype.startEntity=function(zs){this.decodeMode=zs,this.state=zn.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},js.prototype.write=function(zs,Xs){switch(this.state){case zn.EntityStart:return zs.charCodeAt(Xs)===nn.NUM?(this.state=zn.NumericStart,this.consumed+=1,this.stateNumericStart(zs,Xs+1)):(this.state=zn.NamedEntity,this.stateNamedEntity(zs,Xs));case zn.NumericStart:return this.stateNumericStart(zs,Xs);case zn.NumericDecimal:return this.stateNumericDecimal(zs,Xs);case zn.NumericHex:return this.stateNumericHex(zs,Xs);case zn.NamedEntity:return this.stateNamedEntity(zs,Xs)}},js.prototype.stateNumericStart=function(zs,Xs){return Xs>=zs.length?-1:(zs.charCodeAt(Xs)|on)===nn.LOWER_X?(this.state=zn.NumericHex,this.consumed+=1,this.stateNumericHex(zs,Xs+1)):(this.state=zn.NumericDecimal,this.stateNumericDecimal(zs,Xs))},js.prototype.addToNumericResult=function(zs,Xs,ia,Qs){if(Xs!==ia){var Zs=ia-Xs;this.result=this.result*Math.pow(Qs,Zs)+parseInt(zs.substr(Xs,Zs),Qs),this.consumed+=Zs}},js.prototype.stateNumericHex=function(zs,Xs){for(var ia=Xs;Xs<zs.length;){var Qs=zs.charCodeAt(Xs);if($n(Qs)||ln(Qs))Xs+=1;else return this.addToNumericResult(zs,ia,Xs,16),this.emitNumericEntity(Qs,3)}return this.addToNumericResult(zs,ia,Xs,16),-1},js.prototype.stateNumericDecimal=function(zs,Xs){for(var ia=Xs;Xs<zs.length;){var Qs=zs.charCodeAt(Xs);if($n(Qs))Xs+=1;else return this.addToNumericResult(zs,ia,Xs,10),this.emitNumericEntity(Qs,2)}return this.addToNumericResult(zs,ia,Xs,10),-1},js.prototype.emitNumericEntity=function(zs,Xs){var ia;if(this.consumed<=Xs)return(ia=this.errors)===null||ia===void 0||ia.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(zs===nn.SEMI)this.consumed+=1;else if(this.decodeMode===Wn.Strict)return 0;return this.emitCodePoint((0,tn.replaceCodePoint)(this.result),this.consumed),this.errors&&(zs!==nn.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},js.prototype.stateNamedEntity=function(zs,Xs){for(var ia=this.decodeTree,Qs=ia[this.treeIndex],Zs=(Qs&an.VALUE_LENGTH)>>14;Xs<zs.length;Xs++,this.excess++){var Gs=zs.charCodeAt(Xs);if(this.treeIndex=Mi(ia,Qs,this.treeIndex+Math.max(1,Zs),Gs),this.treeIndex<0)return this.result===0||this.decodeMode===Wn.Attribute&&(Zs===0||jn(Gs))?0:this.emitNotTerminatedNamedEntity();if(Qs=ia[this.treeIndex],Zs=(Qs&an.VALUE_LENGTH)>>14,Zs!==0){if(Gs===nn.SEMI)return this.emitNamedEntityData(this.treeIndex,Zs,this.consumed+this.excess);this.decodeMode!==Wn.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},js.prototype.emitNotTerminatedNamedEntity=function(){var zs,Xs=this,ia=Xs.result,Qs=Xs.decodeTree,Zs=(Qs[ia]&an.VALUE_LENGTH)>>14;return this.emitNamedEntityData(ia,Zs,this.consumed),(zs=this.errors)===null||zs===void 0||zs.missingSemicolonAfterCharacterReference(),this.consumed},js.prototype.emitNamedEntityData=function(zs,Xs,ia){var Qs=this.decodeTree;return this.emitCodePoint(Xs===1?Qs[zs]&~an.VALUE_LENGTH:Qs[zs+1],ia),Xs===3&&this.emitCodePoint(Qs[zs+2],ia),ia},js.prototype.end=function(){var zs;switch(this.state){case zn.NamedEntity:return this.result!==0&&(this.decodeMode!==Wn.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case zn.NumericDecimal:return this.emitNumericEntity(0,2);case zn.NumericHex:return this.emitNumericEntity(0,3);case zn.NumericStart:return(zs=this.errors)===null||zs===void 0||zs.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case zn.EntityStart:return 0}},js}();Kt.EntityDecoder=ei;function $i(js){var zs="",Xs=new ei(js,function(ia){return zs+=(0,tn.fromCodePoint)(ia)});return function(ia,Qs){for(var Zs=0,Gs=0;(Gs=ia.indexOf("&",Gs))>=0;){zs+=ia.slice(Zs,Gs),Xs.startEntity(Qs);var Hl=Xs.write(ia,Gs+1);if(Hl<0){Zs=Gs+Xs.end();break}Zs=Gs+Hl,Gs=Hl===0?Zs+1:Zs}var Js=zs+ia.slice(Zs);return zs="",Js}}function Mi(js,zs,Xs,ia){var Qs=(zs&an.BRANCH_LENGTH)>>7,Zs=zs&an.JUMP_TABLE;if(Qs===0)return Zs!==0&&ia===Zs?Xs:-1;if(Zs){var Gs=ia-Zs;return Gs<0||Gs>=Qs?-1:js[Xs+Gs]-1}for(var Hl=Xs,Js=Hl+Qs-1;Hl<=Js;){var sa=Hl+Js>>>1,Ca=js[sa];if(Ca<ia)Hl=sa+1;else if(Ca>ia)Js=sa-1;else return js[sa+Qs]}return-1}Kt.determineBranch=Mi;var Ni=$i(Zr.default),Ts=$i(en.default);function ps(js,zs){return zs===void 0&&(zs=Wn.Legacy),Ni(js,zs)}Kt.decodeHTML=ps;function $s(js){return Ni(js,Wn.Attribute)}Kt.decodeHTMLAttribute=$s;function Ws(js){return Ni(js,Wn.Strict)}Kt.decodeHTMLStrict=Ws;function Hs(js){return Ts(js,Wn.Strict)}Kt.decodeXML=Hs})(e$l);(function(Kt){Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.QuoteType=void 0;var Vt=e$l,Hr;(function($n){$n[$n.Tab=9]="Tab",$n[$n.NewLine=10]="NewLine",$n[$n.FormFeed=12]="FormFeed",$n[$n.CarriageReturn=13]="CarriageReturn",$n[$n.Space=32]="Space",$n[$n.ExclamationMark=33]="ExclamationMark",$n[$n.Number=35]="Number",$n[$n.Amp=38]="Amp",$n[$n.SingleQuote=39]="SingleQuote",$n[$n.DoubleQuote=34]="DoubleQuote",$n[$n.Dash=45]="Dash",$n[$n.Slash=47]="Slash",$n[$n.Zero=48]="Zero",$n[$n.Nine=57]="Nine",$n[$n.Semi=59]="Semi",$n[$n.Lt=60]="Lt",$n[$n.Eq=61]="Eq",$n[$n.Gt=62]="Gt",$n[$n.Questionmark=63]="Questionmark",$n[$n.UpperA=65]="UpperA",$n[$n.LowerA=97]="LowerA",$n[$n.UpperF=70]="UpperF",$n[$n.LowerF=102]="LowerF",$n[$n.UpperZ=90]="UpperZ",$n[$n.LowerZ=122]="LowerZ",$n[$n.LowerX=120]="LowerX",$n[$n.OpeningSquareBracket=91]="OpeningSquareBracket"})(Hr||(Hr={}));var Wr;(function($n){$n[$n.Text=1]="Text",$n[$n.BeforeTagName=2]="BeforeTagName",$n[$n.InTagName=3]="InTagName",$n[$n.InSelfClosingTag=4]="InSelfClosingTag",$n[$n.BeforeClosingTagName=5]="BeforeClosingTagName",$n[$n.InClosingTagName=6]="InClosingTagName",$n[$n.AfterClosingTagName=7]="AfterClosingTagName",$n[$n.BeforeAttributeName=8]="BeforeAttributeName",$n[$n.InAttributeName=9]="InAttributeName",$n[$n.AfterAttributeName=10]="AfterAttributeName",$n[$n.BeforeAttributeValue=11]="BeforeAttributeValue",$n[$n.InAttributeValueDq=12]="InAttributeValueDq",$n[$n.InAttributeValueSq=13]="InAttributeValueSq",$n[$n.InAttributeValueNq=14]="InAttributeValueNq",$n[$n.BeforeDeclaration=15]="BeforeDeclaration",$n[$n.InDeclaration=16]="InDeclaration",$n[$n.InProcessingInstruction=17]="InProcessingInstruction",$n[$n.BeforeComment=18]="BeforeComment",$n[$n.CDATASequence=19]="CDATASequence",$n[$n.InSpecialComment=20]="InSpecialComment",$n[$n.InCommentLike=21]="InCommentLike",$n[$n.BeforeSpecialS=22]="BeforeSpecialS",$n[$n.SpecialStartSequence=23]="SpecialStartSequence",$n[$n.InSpecialTag=24]="InSpecialTag",$n[$n.BeforeEntity=25]="BeforeEntity",$n[$n.BeforeNumericEntity=26]="BeforeNumericEntity",$n[$n.InNamedEntity=27]="InNamedEntity",$n[$n.InNumericEntity=28]="InNumericEntity",$n[$n.InHexEntity=29]="InHexEntity"})(Wr||(Wr={}));function Yr($n){return $n===Hr.Space||$n===Hr.NewLine||$n===Hr.Tab||$n===Hr.FormFeed||$n===Hr.CarriageReturn}function Zr($n){return $n===Hr.Slash||$n===Hr.Gt||Yr($n)}function en($n){return $n>=Hr.Zero&&$n<=Hr.Nine}function tn($n){return $n>=Hr.LowerA&&$n<=Hr.LowerZ||$n>=Hr.UpperA&&$n<=Hr.UpperZ}function rn($n){return $n>=Hr.UpperA&&$n<=Hr.UpperF||$n>=Hr.LowerA&&$n<=Hr.LowerF}var nn;(function($n){$n[$n.NoValue=0]="NoValue",$n[$n.Unquoted=1]="Unquoted",$n[$n.Single=2]="Single",$n[$n.Double=3]="Double"})(nn=Kt.QuoteType||(Kt.QuoteType={}));var on={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},an=function(){function $n(ln,Hn){var jn=ln.xmlMode,zn=jn===void 0?!1:jn,Wn=ln.decodeEntities,ei=Wn===void 0?!0:Wn;this.cbs=Hn,this.state=Wr.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=Wr.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=zn,this.decodeEntities=ei,this.entityTrie=zn?Vt.xmlDecodeTree:Vt.htmlDecodeTree}return $n.prototype.reset=function(){this.state=Wr.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=Wr.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},$n.prototype.write=function(ln){this.offset+=this.buffer.length,this.buffer=ln,this.parse()},$n.prototype.end=function(){this.running&&this.finish()},$n.prototype.pause=function(){this.running=!1},$n.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},$n.prototype.getIndex=function(){return this.index},$n.prototype.getSectionStart=function(){return this.sectionStart},$n.prototype.stateText=function(ln){ln===Hr.Lt||!this.decodeEntities&&this.fastForwardTo(Hr.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=Wr.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&ln===Hr.Amp&&(this.state=Wr.BeforeEntity)},$n.prototype.stateSpecialStartSequence=function(ln){var Hn=this.sequenceIndex===this.currentSequence.length,jn=Hn?Zr(ln):(ln|32)===this.currentSequence[this.sequenceIndex];if(!jn)this.isSpecial=!1;else if(!Hn){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=Wr.InTagName,this.stateInTagName(ln)},$n.prototype.stateInSpecialTag=function(ln){if(this.sequenceIndex===this.currentSequence.length){if(ln===Hr.Gt||Yr(ln)){var Hn=this.index-this.currentSequence.length;if(this.sectionStart<Hn){var jn=this.index;this.index=Hn,this.cbs.ontext(this.sectionStart,Hn),this.index=jn}this.isSpecial=!1,this.sectionStart=Hn+2,this.stateInClosingTagName(ln);return}this.sequenceIndex=0}(ln|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===on.TitleEnd?this.decodeEntities&&ln===Hr.Amp&&(this.state=Wr.BeforeEntity):this.fastForwardTo(Hr.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(ln===Hr.Lt)},$n.prototype.stateCDATASequence=function(ln){ln===on.Cdata[this.sequenceIndex]?++this.sequenceIndex===on.Cdata.length&&(this.state=Wr.InCommentLike,this.currentSequence=on.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=Wr.InDeclaration,this.stateInDeclaration(ln))},$n.prototype.fastForwardTo=function(ln){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===ln)return!0;return this.index=this.buffer.length+this.offset-1,!1},$n.prototype.stateInCommentLike=function(ln){ln===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===on.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=Wr.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):ln!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},$n.prototype.isTagStartChar=function(ln){return this.xmlMode?!Zr(ln):tn(ln)},$n.prototype.startSpecial=function(ln,Hn){this.isSpecial=!0,this.currentSequence=ln,this.sequenceIndex=Hn,this.state=Wr.SpecialStartSequence},$n.prototype.stateBeforeTagName=function(ln){if(ln===Hr.ExclamationMark)this.state=Wr.BeforeDeclaration,this.sectionStart=this.index+1;else if(ln===Hr.Questionmark)this.state=Wr.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(ln)){var Hn=ln|32;this.sectionStart=this.index,!this.xmlMode&&Hn===on.TitleEnd[2]?this.startSpecial(on.TitleEnd,3):this.state=!this.xmlMode&&Hn===on.ScriptEnd[2]?Wr.BeforeSpecialS:Wr.InTagName}else ln===Hr.Slash?this.state=Wr.BeforeClosingTagName:(this.state=Wr.Text,this.stateText(ln))},$n.prototype.stateInTagName=function(ln){Zr(ln)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=Wr.BeforeAttributeName,this.stateBeforeAttributeName(ln))},$n.prototype.stateBeforeClosingTagName=function(ln){Yr(ln)||(ln===Hr.Gt?this.state=Wr.Text:(this.state=this.isTagStartChar(ln)?Wr.InClosingTagName:Wr.InSpecialComment,this.sectionStart=this.index))},$n.prototype.stateInClosingTagName=function(ln){(ln===Hr.Gt||Yr(ln))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=Wr.AfterClosingTagName,this.stateAfterClosingTagName(ln))},$n.prototype.stateAfterClosingTagName=function(ln){(ln===Hr.Gt||this.fastForwardTo(Hr.Gt))&&(this.state=Wr.Text,this.baseState=Wr.Text,this.sectionStart=this.index+1)},$n.prototype.stateBeforeAttributeName=function(ln){ln===Hr.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=Wr.InSpecialTag,this.sequenceIndex=0):this.state=Wr.Text,this.baseState=this.state,this.sectionStart=this.index+1):ln===Hr.Slash?this.state=Wr.InSelfClosingTag:Yr(ln)||(this.state=Wr.InAttributeName,this.sectionStart=this.index)},$n.prototype.stateInSelfClosingTag=function(ln){ln===Hr.Gt?(this.cbs.onselfclosingtag(this.index),this.state=Wr.Text,this.baseState=Wr.Text,this.sectionStart=this.index+1,this.isSpecial=!1):Yr(ln)||(this.state=Wr.BeforeAttributeName,this.stateBeforeAttributeName(ln))},$n.prototype.stateInAttributeName=function(ln){(ln===Hr.Eq||Zr(ln))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=Wr.AfterAttributeName,this.stateAfterAttributeName(ln))},$n.prototype.stateAfterAttributeName=function(ln){ln===Hr.Eq?this.state=Wr.BeforeAttributeValue:ln===Hr.Slash||ln===Hr.Gt?(this.cbs.onattribend(nn.NoValue,this.index),this.state=Wr.BeforeAttributeName,this.stateBeforeAttributeName(ln)):Yr(ln)||(this.cbs.onattribend(nn.NoValue,this.index),this.state=Wr.InAttributeName,this.sectionStart=this.index)},$n.prototype.stateBeforeAttributeValue=function(ln){ln===Hr.DoubleQuote?(this.state=Wr.InAttributeValueDq,this.sectionStart=this.index+1):ln===Hr.SingleQuote?(this.state=Wr.InAttributeValueSq,this.sectionStart=this.index+1):Yr(ln)||(this.sectionStart=this.index,this.state=Wr.InAttributeValueNq,this.stateInAttributeValueNoQuotes(ln))},$n.prototype.handleInAttributeValue=function(ln,Hn){ln===Hn||!this.decodeEntities&&this.fastForwardTo(Hn)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(Hn===Hr.DoubleQuote?nn.Double:nn.Single,this.index),this.state=Wr.BeforeAttributeName):this.decodeEntities&&ln===Hr.Amp&&(this.baseState=this.state,this.state=Wr.BeforeEntity)},$n.prototype.stateInAttributeValueDoubleQuotes=function(ln){this.handleInAttributeValue(ln,Hr.DoubleQuote)},$n.prototype.stateInAttributeValueSingleQuotes=function(ln){this.handleInAttributeValue(ln,Hr.SingleQuote)},$n.prototype.stateInAttributeValueNoQuotes=function(ln){Yr(ln)||ln===Hr.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(nn.Unquoted,this.index),this.state=Wr.BeforeAttributeName,this.stateBeforeAttributeName(ln)):this.decodeEntities&&ln===Hr.Amp&&(this.baseState=this.state,this.state=Wr.BeforeEntity)},$n.prototype.stateBeforeDeclaration=function(ln){ln===Hr.OpeningSquareBracket?(this.state=Wr.CDATASequence,this.sequenceIndex=0):this.state=ln===Hr.Dash?Wr.BeforeComment:Wr.InDeclaration},$n.prototype.stateInDeclaration=function(ln){(ln===Hr.Gt||this.fastForwardTo(Hr.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=Wr.Text,this.sectionStart=this.index+1)},$n.prototype.stateInProcessingInstruction=function(ln){(ln===Hr.Gt||this.fastForwardTo(Hr.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=Wr.Text,this.sectionStart=this.index+1)},$n.prototype.stateBeforeComment=function(ln){ln===Hr.Dash?(this.state=Wr.InCommentLike,this.currentSequence=on.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=Wr.InDeclaration},$n.prototype.stateInSpecialComment=function(ln){(ln===Hr.Gt||this.fastForwardTo(Hr.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=Wr.Text,this.sectionStart=this.index+1)},$n.prototype.stateBeforeSpecialS=function(ln){var Hn=ln|32;Hn===on.ScriptEnd[3]?this.startSpecial(on.ScriptEnd,4):Hn===on.StyleEnd[3]?this.startSpecial(on.StyleEnd,4):(this.state=Wr.InTagName,this.stateInTagName(ln))},$n.prototype.stateBeforeEntity=function(ln){this.entityExcess=1,this.entityResult=0,ln===Hr.Number?this.state=Wr.BeforeNumericEntity:ln===Hr.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=Wr.InNamedEntity,this.stateInNamedEntity(ln))},$n.prototype.stateInNamedEntity=function(ln){if(this.entityExcess+=1,this.trieIndex=(0,Vt.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,ln),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var Hn=this.trieCurrent&Vt.BinTrieFlags.VALUE_LENGTH;if(Hn){var jn=(Hn>>14)-1;if(!this.allowLegacyEntity()&&ln!==Hr.Semi)this.trieIndex+=jn;else{var zn=this.index-this.entityExcess+1;zn>this.sectionStart&&this.emitPartial(this.sectionStart,zn),this.entityResult=this.trieIndex,this.trieIndex+=jn,this.entityExcess=0,this.sectionStart=this.index+1,jn===0&&this.emitNamedEntity()}}},$n.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var ln=(this.entityTrie[this.entityResult]&Vt.BinTrieFlags.VALUE_LENGTH)>>14;switch(ln){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~Vt.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},$n.prototype.stateBeforeNumericEntity=function(ln){(ln|32)===Hr.LowerX?(this.entityExcess++,this.state=Wr.InHexEntity):(this.state=Wr.InNumericEntity,this.stateInNumericEntity(ln))},$n.prototype.emitNumericEntity=function(ln){var Hn=this.index-this.entityExcess-1,jn=Hn+2+ +(this.state===Wr.InHexEntity);jn!==this.index&&(Hn>this.sectionStart&&this.emitPartial(this.sectionStart,Hn),this.sectionStart=this.index+Number(ln),this.emitCodePoint((0,Vt.replaceCodePoint)(this.entityResult))),this.state=this.baseState},$n.prototype.stateInNumericEntity=function(ln){ln===Hr.Semi?this.emitNumericEntity(!0):en(ln)?(this.entityResult=this.entityResult*10+(ln-Hr.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},$n.prototype.stateInHexEntity=function(ln){ln===Hr.Semi?this.emitNumericEntity(!0):en(ln)?(this.entityResult=this.entityResult*16+(ln-Hr.Zero),this.entityExcess++):rn(ln)?(this.entityResult=this.entityResult*16+((ln|32)-Hr.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},$n.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===Wr.Text||this.baseState===Wr.InSpecialTag)},$n.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===Wr.Text||this.state===Wr.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===Wr.InAttributeValueDq||this.state===Wr.InAttributeValueSq||this.state===Wr.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},$n.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},$n.prototype.parse=function(){for(;this.shouldContinue();){var ln=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case Wr.Text:{this.stateText(ln);break}case Wr.SpecialStartSequence:{this.stateSpecialStartSequence(ln);break}case Wr.InSpecialTag:{this.stateInSpecialTag(ln);break}case Wr.CDATASequence:{this.stateCDATASequence(ln);break}case Wr.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(ln);break}case Wr.InAttributeName:{this.stateInAttributeName(ln);break}case Wr.InCommentLike:{this.stateInCommentLike(ln);break}case Wr.InSpecialComment:{this.stateInSpecialComment(ln);break}case Wr.BeforeAttributeName:{this.stateBeforeAttributeName(ln);break}case Wr.InTagName:{this.stateInTagName(ln);break}case Wr.InClosingTagName:{this.stateInClosingTagName(ln);break}case Wr.BeforeTagName:{this.stateBeforeTagName(ln);break}case Wr.AfterAttributeName:{this.stateAfterAttributeName(ln);break}case Wr.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(ln);break}case Wr.BeforeAttributeValue:{this.stateBeforeAttributeValue(ln);break}case Wr.BeforeClosingTagName:{this.stateBeforeClosingTagName(ln);break}case Wr.AfterClosingTagName:{this.stateAfterClosingTagName(ln);break}case Wr.BeforeSpecialS:{this.stateBeforeSpecialS(ln);break}case Wr.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(ln);break}case Wr.InSelfClosingTag:{this.stateInSelfClosingTag(ln);break}case Wr.InDeclaration:{this.stateInDeclaration(ln);break}case Wr.BeforeDeclaration:{this.stateBeforeDeclaration(ln);break}case Wr.BeforeComment:{this.stateBeforeComment(ln);break}case Wr.InProcessingInstruction:{this.stateInProcessingInstruction(ln);break}case Wr.InNamedEntity:{this.stateInNamedEntity(ln);break}case Wr.BeforeEntity:{this.stateBeforeEntity(ln);break}case Wr.InHexEntity:{this.stateInHexEntity(ln);break}case Wr.InNumericEntity:{this.stateInNumericEntity(ln);break}default:this.stateBeforeNumericEntity(ln)}this.index++}this.cleanup()},$n.prototype.finish=function(){this.state===Wr.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},$n.prototype.handleTrailingData=function(){var ln=this.buffer.length+this.offset;this.state===Wr.InCommentLike?this.currentSequence===on.CdataEnd?this.cbs.oncdata(this.sectionStart,ln,0):this.cbs.oncomment(this.sectionStart,ln,0):this.state===Wr.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===Wr.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===Wr.InTagName||this.state===Wr.BeforeAttributeName||this.state===Wr.BeforeAttributeValue||this.state===Wr.AfterAttributeName||this.state===Wr.InAttributeName||this.state===Wr.InAttributeValueSq||this.state===Wr.InAttributeValueDq||this.state===Wr.InAttributeValueNq||this.state===Wr.InClosingTagName||this.cbs.ontext(this.sectionStart,ln)},$n.prototype.emitPartial=function(ln,Hn){this.baseState!==Wr.Text&&this.baseState!==Wr.InSpecialTag?this.cbs.onattribdata(ln,Hn):this.cbs.ontext(ln,Hn)},$n.prototype.emitCodePoint=function(ln){this.baseState!==Wr.Text&&this.baseState!==Wr.InSpecialTag?this.cbs.onattribentity(ln):this.cbs.ontextentity(ln)},$n}();Kt.default=an})(e$m);var I$4=u$s&&u$s.__createBinding||(Object.create?function(Kt,Vt,Hr,Wr){Wr===void 0&&(Wr=Hr);var Yr=Object.getOwnPropertyDescriptor(Vt,Hr);(!Yr||("get"in Yr?!Vt.__esModule:Yr.writable||Yr.configurable))&&(Yr={enumerable:!0,get:function(){return Vt[Hr]}}),Object.defineProperty(Kt,Wr,Yr)}:function(Kt,Vt,Hr,Wr){Wr===void 0&&(Wr=Hr),Kt[Wr]=Vt[Hr]}),z$5=u$s&&u$s.__setModuleDefault||(Object.create?function(Kt,Vt){Object.defineProperty(Kt,"default",{enumerable:!0,value:Vt})}:function(Kt,Vt){Kt.default=Vt}),M$b=u$s&&u$s.__importStar||function(Kt){if(Kt&&Kt.__esModule)return Kt;var Vt={};if(Kt!=null)for(var Hr in Kt)Hr!=="default"&&Object.prototype.hasOwnProperty.call(Kt,Hr)&&I$4(Vt,Kt,Hr);return z$5(Vt,Kt),Vt};Object.defineProperty(r$g,"__esModule",{value:!0});r$g.Parser=void 0;var b$9=M$b(e$m),w$c=e$l,d$k=new Set(["input","option","optgroup","select","button","datalist","textarea"]),n$6=new Set(["p"]),x$b=new Set(["thead","tbody"]),y$7=new Set(["dd","dt"]),S$9=new Set(["rt","rp"]),j$a=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",n$6],["h1",n$6],["h2",n$6],["h3",n$6],["h4",n$6],["h5",n$6],["h6",n$6],["select",d$k],["input",d$k],["output",d$k],["button",d$k],["datalist",d$k],["textarea",d$k],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",y$7],["dt",y$7],["address",n$6],["article",n$6],["aside",n$6],["blockquote",n$6],["details",n$6],["div",n$6],["dl",n$6],["fieldset",n$6],["figcaption",n$6],["figure",n$6],["footer",n$6],["form",n$6],["header",n$6],["hr",n$6],["main",n$6],["nav",n$6],["ol",n$6],["pre",n$6],["section",n$6],["table",n$6],["ul",n$6],["rt",S$9],["rp",S$9],["tbody",x$b],["tfoot",x$b]]),P$9=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),C$a=new Set(["math","svg"]),T$c=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),N$7=/\s|\//,E$7=function(){function Kt(Vt,Hr){Hr===void 0&&(Hr={});var Wr,Yr,Zr,en,tn;this.options=Hr,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=Vt??{},this.lowerCaseTagNames=(Wr=Hr.lowerCaseTags)!==null&&Wr!==void 0?Wr:!Hr.xmlMode,this.lowerCaseAttributeNames=(Yr=Hr.lowerCaseAttributeNames)!==null&&Yr!==void 0?Yr:!Hr.xmlMode,this.tokenizer=new((Zr=Hr.Tokenizer)!==null&&Zr!==void 0?Zr:b$9.default)(this.options,this),(tn=(en=this.cbs).onparserinit)===null||tn===void 0||tn.call(en,this)}return Kt.prototype.ontext=function(Vt,Hr){var Wr,Yr,Zr=this.getSlice(Vt,Hr);this.endIndex=Hr-1,(Yr=(Wr=this.cbs).ontext)===null||Yr===void 0||Yr.call(Wr,Zr),this.startIndex=Hr},Kt.prototype.ontextentity=function(Vt){var Hr,Wr,Yr=this.tokenizer.getSectionStart();this.endIndex=Yr-1,(Wr=(Hr=this.cbs).ontext)===null||Wr===void 0||Wr.call(Hr,(0,w$c.fromCodePoint)(Vt)),this.startIndex=Yr},Kt.prototype.isVoidElement=function(Vt){return!this.options.xmlMode&&P$9.has(Vt)},Kt.prototype.onopentagname=function(Vt,Hr){this.endIndex=Hr;var Wr=this.getSlice(Vt,Hr);this.lowerCaseTagNames&&(Wr=Wr.toLowerCase()),this.emitOpenTag(Wr)},Kt.prototype.emitOpenTag=function(Vt){var Hr,Wr,Yr,Zr;this.openTagStart=this.startIndex,this.tagname=Vt;var en=!this.options.xmlMode&&j$a.get(Vt);if(en)for(;this.stack.length>0&&en.has(this.stack[this.stack.length-1]);){var tn=this.stack.pop();(Wr=(Hr=this.cbs).onclosetag)===null||Wr===void 0||Wr.call(Hr,tn,!0)}this.isVoidElement(Vt)||(this.stack.push(Vt),C$a.has(Vt)?this.foreignContext.push(!0):T$c.has(Vt)&&this.foreignContext.push(!1)),(Zr=(Yr=this.cbs).onopentagname)===null||Zr===void 0||Zr.call(Yr,Vt),this.cbs.onopentag&&(this.attribs={})},Kt.prototype.endOpenTag=function(Vt){var Hr,Wr;this.startIndex=this.openTagStart,this.attribs&&((Wr=(Hr=this.cbs).onopentag)===null||Wr===void 0||Wr.call(Hr,this.tagname,this.attribs,Vt),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},Kt.prototype.onopentagend=function(Vt){this.endIndex=Vt,this.endOpenTag(!1),this.startIndex=Vt+1},Kt.prototype.onclosetag=function(Vt,Hr){var Wr,Yr,Zr,en,tn,rn;this.endIndex=Hr;var nn=this.getSlice(Vt,Hr);if(this.lowerCaseTagNames&&(nn=nn.toLowerCase()),(C$a.has(nn)||T$c.has(nn))&&this.foreignContext.pop(),this.isVoidElement(nn))!this.options.xmlMode&&nn==="br"&&((Yr=(Wr=this.cbs).onopentagname)===null||Yr===void 0||Yr.call(Wr,"br"),(en=(Zr=this.cbs).onopentag)===null||en===void 0||en.call(Zr,"br",{},!0),(rn=(tn=this.cbs).onclosetag)===null||rn===void 0||rn.call(tn,"br",!1));else{var on=this.stack.lastIndexOf(nn);if(on!==-1)if(this.cbs.onclosetag)for(var an=this.stack.length-on;an--;)this.cbs.onclosetag(this.stack.pop(),an!==0);else this.stack.length=on;else!this.options.xmlMode&&nn==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=Hr+1},Kt.prototype.onselfclosingtag=function(Vt){this.endIndex=Vt,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=Vt+1):this.onopentagend(Vt)},Kt.prototype.closeCurrentTag=function(Vt){var Hr,Wr,Yr=this.tagname;this.endOpenTag(Vt),this.stack[this.stack.length-1]===Yr&&((Wr=(Hr=this.cbs).onclosetag)===null||Wr===void 0||Wr.call(Hr,Yr,!Vt),this.stack.pop())},Kt.prototype.onattribname=function(Vt,Hr){this.startIndex=Vt;var Wr=this.getSlice(Vt,Hr);this.attribname=this.lowerCaseAttributeNames?Wr.toLowerCase():Wr},Kt.prototype.onattribdata=function(Vt,Hr){this.attribvalue+=this.getSlice(Vt,Hr)},Kt.prototype.onattribentity=function(Vt){this.attribvalue+=(0,w$c.fromCodePoint)(Vt)},Kt.prototype.onattribend=function(Vt,Hr){var Wr,Yr;this.endIndex=Hr,(Yr=(Wr=this.cbs).onattribute)===null||Yr===void 0||Yr.call(Wr,this.attribname,this.attribvalue,Vt===b$9.QuoteType.Double?'"':Vt===b$9.QuoteType.Single?"'":Vt===b$9.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},Kt.prototype.getInstructionName=function(Vt){var Hr=Vt.search(N$7),Wr=Hr<0?Vt:Vt.substr(0,Hr);return this.lowerCaseTagNames&&(Wr=Wr.toLowerCase()),Wr},Kt.prototype.ondeclaration=function(Vt,Hr){this.endIndex=Hr;var Wr=this.getSlice(Vt,Hr);if(this.cbs.onprocessinginstruction){var Yr=this.getInstructionName(Wr);this.cbs.onprocessinginstruction("!".concat(Yr),"!".concat(Wr))}this.startIndex=Hr+1},Kt.prototype.onprocessinginstruction=function(Vt,Hr){this.endIndex=Hr;var Wr=this.getSlice(Vt,Hr);if(this.cbs.onprocessinginstruction){var Yr=this.getInstructionName(Wr);this.cbs.onprocessinginstruction("?".concat(Yr),"?".concat(Wr))}this.startIndex=Hr+1},Kt.prototype.oncomment=function(Vt,Hr,Wr){var Yr,Zr,en,tn;this.endIndex=Hr,(Zr=(Yr=this.cbs).oncomment)===null||Zr===void 0||Zr.call(Yr,this.getSlice(Vt,Hr-Wr)),(tn=(en=this.cbs).oncommentend)===null||tn===void 0||tn.call(en),this.startIndex=Hr+1},Kt.prototype.oncdata=function(Vt,Hr,Wr){var Yr,Zr,en,tn,rn,nn,on,an,$n,ln;this.endIndex=Hr;var Hn=this.getSlice(Vt,Hr-Wr);this.options.xmlMode||this.options.recognizeCDATA?((Zr=(Yr=this.cbs).oncdatastart)===null||Zr===void 0||Zr.call(Yr),(tn=(en=this.cbs).ontext)===null||tn===void 0||tn.call(en,Hn),(nn=(rn=this.cbs).oncdataend)===null||nn===void 0||nn.call(rn)):((an=(on=this.cbs).oncomment)===null||an===void 0||an.call(on,"[CDATA[".concat(Hn,"]]")),(ln=($n=this.cbs).oncommentend)===null||ln===void 0||ln.call($n)),this.startIndex=Hr+1},Kt.prototype.onend=function(){var Vt,Hr;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var Wr=this.stack.length;Wr>0;this.cbs.onclosetag(this.stack[--Wr],!0));}(Hr=(Vt=this.cbs).onend)===null||Hr===void 0||Hr.call(Vt)},Kt.prototype.reset=function(){var Vt,Hr,Wr,Yr;(Hr=(Vt=this.cbs).onreset)===null||Hr===void 0||Hr.call(Vt),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(Yr=(Wr=this.cbs).onparserinit)===null||Yr===void 0||Yr.call(Wr,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},Kt.prototype.parseComplete=function(Vt){this.reset(),this.end(Vt)},Kt.prototype.getSlice=function(Vt,Hr){for(;Vt-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var Wr=this.buffers[0].slice(Vt-this.bufferOffset,Hr-this.bufferOffset);Hr-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),Wr+=this.buffers[0].slice(0,Hr-this.bufferOffset);return Wr},Kt.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},Kt.prototype.write=function(Vt){var Hr,Wr;if(this.ended){(Wr=(Hr=this.cbs).onerror)===null||Wr===void 0||Wr.call(Hr,new Error(".write() after done!"));return}this.buffers.push(Vt),this.tokenizer.running&&(this.tokenizer.write(Vt),this.writeIndex++)},Kt.prototype.end=function(Vt){var Hr,Wr;if(this.ended){(Wr=(Hr=this.cbs).onerror)===null||Wr===void 0||Wr.call(Hr,new Error(".end() after done!"));return}Vt&&this.write(Vt),this.ended=!0,this.tokenizer.end()},Kt.prototype.pause=function(){this.tokenizer.pause()},Kt.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},Kt.prototype.parseChunk=function(Vt){this.write(Vt)},Kt.prototype.done=function(Vt){this.end(Vt)},Kt}();r$g.Parser=E$7;var r$f={},r$e={};(function(Kt){Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.Doctype=Kt.CDATA=Kt.Tag=Kt.Style=Kt.Script=Kt.Comment=Kt.Directive=Kt.Text=Kt.Root=Kt.isTag=Kt.ElementType=void 0;var Vt;(function(Wr){Wr.Root="root",Wr.Text="text",Wr.Directive="directive",Wr.Comment="comment",Wr.Script="script",Wr.Style="style",Wr.Tag="tag",Wr.CDATA="cdata",Wr.Doctype="doctype"})(Vt=Kt.ElementType||(Kt.ElementType={}));function Hr(Wr){return Wr.type===Vt.Tag||Wr.type===Vt.Script||Wr.type===Vt.Style}Kt.isTag=Hr,Kt.Root=Vt.Root,Kt.Text=Vt.Text,Kt.Directive=Vt.Directive,Kt.Comment=Vt.Comment,Kt.Script=Vt.Script,Kt.Style=Vt.Style,Kt.Tag=Vt.Tag,Kt.CDATA=Vt.CDATA,Kt.Doctype=Vt.Doctype})(r$e);var e$j={},s$8=u$s&&u$s.__extends||function(){var Kt=function(Vt,Hr){return Kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Wr,Yr){Wr.__proto__=Yr}||function(Wr,Yr){for(var Zr in Yr)Object.prototype.hasOwnProperty.call(Yr,Zr)&&(Wr[Zr]=Yr[Zr])},Kt(Vt,Hr)};return function(Vt,Hr){if(typeof Hr!="function"&&Hr!==null)throw new TypeError("Class extends value "+String(Hr)+" is not a constructor or null");Kt(Vt,Hr);function Wr(){this.constructor=Vt}Vt.prototype=Hr===null?Object.create(Hr):(Wr.prototype=Hr.prototype,new Wr)}}(),c$e=u$s&&u$s.__assign||function(){return c$e=Object.assign||function(Kt){for(var Vt,Hr=1,Wr=arguments.length;Hr<Wr;Hr++){Vt=arguments[Hr];for(var Yr in Vt)Object.prototype.hasOwnProperty.call(Vt,Yr)&&(Kt[Yr]=Vt[Yr])}return Kt},c$e.apply(this,arguments)};Object.defineProperty(e$j,"__esModule",{value:!0});e$j.cloneNode=e$j.hasChildren=e$j.isDocument=e$j.isDirective=e$j.isComment=e$j.isText=e$j.isCDATA=e$j.isTag=e$j.Element=e$j.Document=e$j.CDATA=e$j.NodeWithChildren=e$j.ProcessingInstruction=e$j.Comment=e$j.Text=e$j.DataNode=e$j.Node=void 0;var u$h=r$e,b$8=function(){function Kt(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(Kt.prototype,"parentNode",{get:function(){return this.parent},set:function(Vt){this.parent=Vt},enumerable:!1,configurable:!0}),Object.defineProperty(Kt.prototype,"previousSibling",{get:function(){return this.prev},set:function(Vt){this.prev=Vt},enumerable:!1,configurable:!0}),Object.defineProperty(Kt.prototype,"nextSibling",{get:function(){return this.next},set:function(Vt){this.next=Vt},enumerable:!1,configurable:!0}),Kt.prototype.cloneNode=function(Vt){return Vt===void 0&&(Vt=!1),g$b(this,Vt)},Kt}();e$j.Node=b$8;var m$g=function(Kt){s$8(Vt,Kt);function Vt(Hr){var Wr=Kt.call(this)||this;return Wr.data=Hr,Wr}return Object.defineProperty(Vt.prototype,"nodeValue",{get:function(){return this.data},set:function(Hr){this.data=Hr},enumerable:!1,configurable:!0}),Vt}(b$8);e$j.DataNode=m$g;var v$b=function(Kt){s$8(Vt,Kt);function Vt(){var Hr=Kt!==null&&Kt.apply(this,arguments)||this;return Hr.type=u$h.ElementType.Text,Hr}return Object.defineProperty(Vt.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),Vt}(m$g);e$j.Text=v$b;var x$a=function(Kt){s$8(Vt,Kt);function Vt(){var Hr=Kt!==null&&Kt.apply(this,arguments)||this;return Hr.type=u$h.ElementType.Comment,Hr}return Object.defineProperty(Vt.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),Vt}(m$g);e$j.Comment=x$a;var T$b=function(Kt){s$8(Vt,Kt);function Vt(Hr,Wr){var Yr=Kt.call(this,Wr)||this;return Yr.name=Hr,Yr.type=u$h.ElementType.Directive,Yr}return Object.defineProperty(Vt.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Vt}(m$g);e$j.ProcessingInstruction=T$b;var h$b=function(Kt){s$8(Vt,Kt);function Vt(Hr){var Wr=Kt.call(this)||this;return Wr.children=Hr,Wr}return Object.defineProperty(Vt.prototype,"firstChild",{get:function(){var Hr;return(Hr=this.children[0])!==null&&Hr!==void 0?Hr:null},enumerable:!1,configurable:!0}),Object.defineProperty(Vt.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(Vt.prototype,"childNodes",{get:function(){return this.children},set:function(Hr){this.children=Hr},enumerable:!1,configurable:!0}),Vt}(b$8);e$j.NodeWithChildren=h$b;var C$9=function(Kt){s$8(Vt,Kt);function Vt(){var Hr=Kt!==null&&Kt.apply(this,arguments)||this;return Hr.type=u$h.ElementType.CDATA,Hr}return Object.defineProperty(Vt.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),Vt}(h$b);e$j.CDATA=C$9;var P$8=function(Kt){s$8(Vt,Kt);function Vt(){var Hr=Kt!==null&&Kt.apply(this,arguments)||this;return Hr.type=u$h.ElementType.Root,Hr}return Object.defineProperty(Vt.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),Vt}(h$b);e$j.Document=P$8;var O$c=function(Kt){s$8(Vt,Kt);function Vt(Hr,Wr,Yr,Zr){Yr===void 0&&(Yr=[]),Zr===void 0&&(Zr=Hr==="script"?u$h.ElementType.Script:Hr==="style"?u$h.ElementType.Style:u$h.ElementType.Tag);var en=Kt.call(this,Yr)||this;return en.name=Hr,en.attribs=Wr,en.type=Zr,en}return Object.defineProperty(Vt.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(Vt.prototype,"tagName",{get:function(){return this.name},set:function(Hr){this.name=Hr},enumerable:!1,configurable:!0}),Object.defineProperty(Vt.prototype,"attributes",{get:function(){var Hr=this;return Object.keys(this.attribs).map(function(Wr){var Yr,Zr;return{name:Wr,value:Hr.attribs[Wr],namespace:(Yr=Hr["x-attribsNamespace"])===null||Yr===void 0?void 0:Yr[Wr],prefix:(Zr=Hr["x-attribsPrefix"])===null||Zr===void 0?void 0:Zr[Wr]}})},enumerable:!1,configurable:!0}),Vt}(h$b);e$j.Element=O$c;function D$7(Kt){return(0,u$h.isTag)(Kt)}e$j.isTag=D$7;function j$9(Kt){return Kt.type===u$h.ElementType.CDATA}e$j.isCDATA=j$9;function N$6(Kt){return Kt.type===u$h.ElementType.Text}e$j.isText=N$6;function E$6(Kt){return Kt.type===u$h.ElementType.Comment}e$j.isComment=E$6;function A$6(Kt){return Kt.type===u$h.ElementType.Directive}e$j.isDirective=A$6;function _$8(Kt){return Kt.type===u$h.ElementType.Root}e$j.isDocument=_$8;function S$8(Kt){return Object.prototype.hasOwnProperty.call(Kt,"children")}e$j.hasChildren=S$8;function g$b(Kt,Vt){Vt===void 0&&(Vt=!1);var Hr;if(N$6(Kt))Hr=new v$b(Kt.data);else if(E$6(Kt))Hr=new x$a(Kt.data);else if(D$7(Kt)){var Wr=Vt?d$j(Kt.children):[],Yr=new O$c(Kt.name,c$e({},Kt.attribs),Wr);Wr.forEach(function(rn){return rn.parent=Yr}),Kt.namespace!=null&&(Yr.namespace=Kt.namespace),Kt["x-attribsNamespace"]&&(Yr["x-attribsNamespace"]=c$e({},Kt["x-attribsNamespace"])),Kt["x-attribsPrefix"]&&(Yr["x-attribsPrefix"]=c$e({},Kt["x-attribsPrefix"])),Hr=Yr}else if(j$9(Kt)){var Wr=Vt?d$j(Kt.children):[],Zr=new C$9(Wr);Wr.forEach(function(nn){return nn.parent=Zr}),Hr=Zr}else if(_$8(Kt)){var Wr=Vt?d$j(Kt.children):[],en=new P$8(Wr);Wr.forEach(function(nn){return nn.parent=en}),Kt["x-mode"]&&(en["x-mode"]=Kt["x-mode"]),Hr=en}else if(A$6(Kt)){var tn=new T$b(Kt.name,Kt.data);Kt["x-name"]!=null&&(tn["x-name"]=Kt["x-name"],tn["x-publicId"]=Kt["x-publicId"],tn["x-systemId"]=Kt["x-systemId"]),Hr=tn}else throw new Error("Not implemented yet: ".concat(Kt.type));return Hr.startIndex=Kt.startIndex,Hr.endIndex=Kt.endIndex,Kt.sourceCodeLocation!=null&&(Hr.sourceCodeLocation=Kt.sourceCodeLocation),Hr}e$j.cloneNode=g$b;function d$j(Kt){for(var Vt=Kt.map(function(Wr){return g$b(Wr,!0)}),Hr=1;Hr<Vt.length;Hr++)Vt[Hr].prev=Vt[Hr-1],Vt[Hr-1].next=Vt[Hr];return Vt}(function(Kt){var Vt=u$s&&u$s.__createBinding||(Object.create?function(tn,rn,nn,on){on===void 0&&(on=nn);var an=Object.getOwnPropertyDescriptor(rn,nn);(!an||("get"in an?!rn.__esModule:an.writable||an.configurable))&&(an={enumerable:!0,get:function(){return rn[nn]}}),Object.defineProperty(tn,on,an)}:function(tn,rn,nn,on){on===void 0&&(on=nn),tn[on]=rn[nn]}),Hr=u$s&&u$s.__exportStar||function(tn,rn){for(var nn in tn)nn!=="default"&&!Object.prototype.hasOwnProperty.call(rn,nn)&&Vt(rn,tn,nn)};Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.DomHandler=void 0;var Wr=r$e,Yr=e$j;Hr(e$j,Kt);var Zr={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},en=function(){function tn(rn,nn,on){this.dom=[],this.root=new Yr.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof nn=="function"&&(on=nn,nn=Zr),typeof rn=="object"&&(nn=rn,rn=void 0),this.callback=rn??null,this.options=nn??Zr,this.elementCB=on??null}return tn.prototype.onparserinit=function(rn){this.parser=rn},tn.prototype.onreset=function(){this.dom=[],this.root=new Yr.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},tn.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},tn.prototype.onerror=function(rn){this.handleCallback(rn)},tn.prototype.onclosetag=function(){this.lastNode=null;var rn=this.tagStack.pop();this.options.withEndIndices&&(rn.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(rn)},tn.prototype.onopentag=function(rn,nn){var on=this.options.xmlMode?Wr.ElementType.Tag:void 0,an=new Yr.Element(rn,nn,void 0,on);this.addNode(an),this.tagStack.push(an)},tn.prototype.ontext=function(rn){var nn=this.lastNode;if(nn&&nn.type===Wr.ElementType.Text)nn.data+=rn,this.options.withEndIndices&&(nn.endIndex=this.parser.endIndex);else{var on=new Yr.Text(rn);this.addNode(on),this.lastNode=on}},tn.prototype.oncomment=function(rn){if(this.lastNode&&this.lastNode.type===Wr.ElementType.Comment){this.lastNode.data+=rn;return}var nn=new Yr.Comment(rn);this.addNode(nn),this.lastNode=nn},tn.prototype.oncommentend=function(){this.lastNode=null},tn.prototype.oncdatastart=function(){var rn=new Yr.Text(""),nn=new Yr.CDATA([rn]);this.addNode(nn),rn.parent=nn,this.lastNode=rn},tn.prototype.oncdataend=function(){this.lastNode=null},tn.prototype.onprocessinginstruction=function(rn,nn){var on=new Yr.ProcessingInstruction(rn,nn);this.addNode(on)},tn.prototype.handleCallback=function(rn){if(typeof this.callback=="function")this.callback(rn,this.dom);else if(rn)throw rn},tn.prototype.addNode=function(rn){var nn=this.tagStack[this.tagStack.length-1],on=nn.children[nn.children.length-1];this.options.withStartIndices&&(rn.startIndex=this.parser.startIndex),this.options.withEndIndices&&(rn.endIndex=this.parser.endIndex),nn.children.push(rn),on&&(rn.prev=on,on.next=rn),rn.parent=nn,this.lastNode=null},tn}();Kt.DomHandler=en,Kt.default=en})(r$f);var r$d={},r$c={},r$b={},r$a={},e$i={},e$h={};Object.defineProperty(e$h,"__esModule",{value:!0});function o$n(Kt){for(var Vt=1;Vt<Kt.length;Vt++)Kt[Vt][0]+=Kt[Vt-1][0]+1;return Kt}e$h.default=new Map(o$n([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(o$n([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(o$n([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(o$n([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));var e$g={};(function(Kt){Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.escapeText=Kt.escapeAttribute=Kt.escapeUTF8=Kt.escape=Kt.encodeXML=Kt.getCodePoint=Kt.xmlReplacer=void 0,Kt.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var Vt=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);Kt.getCodePoint=String.prototype.codePointAt!=null?function(Yr,Zr){return Yr.codePointAt(Zr)}:function(Yr,Zr){return(Yr.charCodeAt(Zr)&64512)===55296?(Yr.charCodeAt(Zr)-55296)*1024+Yr.charCodeAt(Zr+1)-56320+65536:Yr.charCodeAt(Zr)};function Hr(Yr){for(var Zr="",en=0,tn;(tn=Kt.xmlReplacer.exec(Yr))!==null;){var rn=tn.index,nn=Yr.charCodeAt(rn),on=Vt.get(nn);on!==void 0?(Zr+=Yr.substring(en,rn)+on,en=rn+1):(Zr+="".concat(Yr.substring(en,rn),"&#x").concat((0,Kt.getCodePoint)(Yr,rn).toString(16),";"),en=Kt.xmlReplacer.lastIndex+=+((nn&64512)===55296))}return Zr+Yr.substr(en)}Kt.encodeXML=Hr,Kt.escape=Hr;function Wr(Yr,Zr){return function(en){for(var tn,rn=0,nn="";tn=Yr.exec(en);)rn!==tn.index&&(nn+=en.substring(rn,tn.index)),nn+=Zr.get(tn[0].charCodeAt(0)),rn=tn.index+1;return nn+en.substring(rn)}}Kt.escapeUTF8=Wr(/[&<>'"]/g,Vt),Kt.escapeAttribute=Wr(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),Kt.escapeText=Wr(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))})(e$g);var M$a=u$s&&u$s.__importDefault||function(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}};Object.defineProperty(e$i,"__esModule",{value:!0});e$i.encodeNonAsciiHTML=e$i.encodeHTML=void 0;var H$7=M$a(e$h),s$7=e$g,T$a=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function b$7(Kt){return m$f(T$a,Kt)}e$i.encodeHTML=b$7;function L$5(Kt){return m$f(s$7.xmlReplacer,Kt)}e$i.encodeNonAsciiHTML=L$5;function m$f(Kt,Vt){for(var Hr="",Wr=0,Yr;(Yr=Kt.exec(Vt))!==null;){var Zr=Yr.index;Hr+=Vt.substring(Wr,Zr);var en=Vt.charCodeAt(Zr),tn=H$7.default.get(en);if(typeof tn=="object"){if(Zr+1<Vt.length){var rn=Vt.charCodeAt(Zr+1),nn=typeof tn.n=="number"?tn.n===rn?tn.o:void 0:tn.n.get(rn);if(nn!==void 0){Hr+=nn,Wr=Kt.lastIndex+=1;continue}}tn=tn.v}if(tn!==void 0)Hr+=tn,Wr=Zr+1;else{var on=(0,s$7.getCodePoint)(Vt,Zr);Hr+="&#x".concat(on.toString(16),";"),Wr=Kt.lastIndex+=+(on!==en)}}return Hr+Vt.substr(Wr)}(function(Kt){Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.decodeXMLStrict=Kt.decodeHTML5Strict=Kt.decodeHTML4Strict=Kt.decodeHTML5=Kt.decodeHTML4=Kt.decodeHTMLAttribute=Kt.decodeHTMLStrict=Kt.decodeHTML=Kt.decodeXML=Kt.DecodingMode=Kt.EntityDecoder=Kt.encodeHTML5=Kt.encodeHTML4=Kt.encodeNonAsciiHTML=Kt.encodeHTML=Kt.escapeText=Kt.escapeAttribute=Kt.escapeUTF8=Kt.escape=Kt.encodeXML=Kt.encode=Kt.decodeStrict=Kt.decode=Kt.EncodingMode=Kt.EntityLevel=void 0;var Vt=e$l,Hr=e$i,Wr=e$g,Yr;(function($n){$n[$n.XML=0]="XML",$n[$n.HTML=1]="HTML"})(Yr=Kt.EntityLevel||(Kt.EntityLevel={}));var Zr;(function($n){$n[$n.UTF8=0]="UTF8",$n[$n.ASCII=1]="ASCII",$n[$n.Extensive=2]="Extensive",$n[$n.Attribute=3]="Attribute",$n[$n.Text=4]="Text"})(Zr=Kt.EncodingMode||(Kt.EncodingMode={}));function en($n,ln){ln===void 0&&(ln=Yr.XML);var Hn=typeof ln=="number"?ln:ln.level;if(Hn===Yr.HTML){var jn=typeof ln=="object"?ln.mode:void 0;return(0,Vt.decodeHTML)($n,jn)}return(0,Vt.decodeXML)($n)}Kt.decode=en;function tn($n,ln){var Hn;ln===void 0&&(ln=Yr.XML);var jn=typeof ln=="number"?{level:ln}:ln;return(Hn=jn.mode)!==null&&Hn!==void 0||(jn.mode=Vt.DecodingMode.Strict),en($n,jn)}Kt.decodeStrict=tn;function rn($n,ln){ln===void 0&&(ln=Yr.XML);var Hn=typeof ln=="number"?{level:ln}:ln;return Hn.mode===Zr.UTF8?(0,Wr.escapeUTF8)($n):Hn.mode===Zr.Attribute?(0,Wr.escapeAttribute)($n):Hn.mode===Zr.Text?(0,Wr.escapeText)($n):Hn.level===Yr.HTML?Hn.mode===Zr.ASCII?(0,Hr.encodeNonAsciiHTML)($n):(0,Hr.encodeHTML)($n):(0,Wr.encodeXML)($n)}Kt.encode=rn;var nn=e$g;Object.defineProperty(Kt,"encodeXML",{enumerable:!0,get:function(){return nn.encodeXML}}),Object.defineProperty(Kt,"escape",{enumerable:!0,get:function(){return nn.escape}}),Object.defineProperty(Kt,"escapeUTF8",{enumerable:!0,get:function(){return nn.escapeUTF8}}),Object.defineProperty(Kt,"escapeAttribute",{enumerable:!0,get:function(){return nn.escapeAttribute}}),Object.defineProperty(Kt,"escapeText",{enumerable:!0,get:function(){return nn.escapeText}});var on=e$i;Object.defineProperty(Kt,"encodeHTML",{enumerable:!0,get:function(){return on.encodeHTML}}),Object.defineProperty(Kt,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return on.encodeNonAsciiHTML}}),Object.defineProperty(Kt,"encodeHTML4",{enumerable:!0,get:function(){return on.encodeHTML}}),Object.defineProperty(Kt,"encodeHTML5",{enumerable:!0,get:function(){return on.encodeHTML}});var an=e$l;Object.defineProperty(Kt,"EntityDecoder",{enumerable:!0,get:function(){return an.EntityDecoder}}),Object.defineProperty(Kt,"DecodingMode",{enumerable:!0,get:function(){return an.DecodingMode}}),Object.defineProperty(Kt,"decodeXML",{enumerable:!0,get:function(){return an.decodeXML}}),Object.defineProperty(Kt,"decodeHTML",{enumerable:!0,get:function(){return an.decodeHTML}}),Object.defineProperty(Kt,"decodeHTMLStrict",{enumerable:!0,get:function(){return an.decodeHTMLStrict}}),Object.defineProperty(Kt,"decodeHTMLAttribute",{enumerable:!0,get:function(){return an.decodeHTMLAttribute}}),Object.defineProperty(Kt,"decodeHTML4",{enumerable:!0,get:function(){return an.decodeHTML}}),Object.defineProperty(Kt,"decodeHTML5",{enumerable:!0,get:function(){return an.decodeHTML}}),Object.defineProperty(Kt,"decodeHTML4Strict",{enumerable:!0,get:function(){return an.decodeHTMLStrict}}),Object.defineProperty(Kt,"decodeHTML5Strict",{enumerable:!0,get:function(){return an.decodeHTMLStrict}}),Object.defineProperty(Kt,"decodeXMLStrict",{enumerable:!0,get:function(){return an.decodeXML}})})(r$a);var e$f={};Object.defineProperty(e$f,"__esModule",{value:!0});e$f.attributeNames=e$f.elementNames=void 0;e$f.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(Kt){return[Kt.toLowerCase(),Kt]}));e$f.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(Kt){return[Kt.toLowerCase(),Kt]}));var o$m=u$s&&u$s.__assign||function(){return o$m=Object.assign||function(Kt){for(var Vt,Hr=1,Wr=arguments.length;Hr<Wr;Hr++){Vt=arguments[Hr];for(var Yr in Vt)Object.prototype.hasOwnProperty.call(Vt,Yr)&&(Kt[Yr]=Vt[Yr])}return Kt},o$m.apply(this,arguments)},h$a=u$s&&u$s.__createBinding||(Object.create?function(Kt,Vt,Hr,Wr){Wr===void 0&&(Wr=Hr);var Yr=Object.getOwnPropertyDescriptor(Vt,Hr);(!Yr||("get"in Yr?!Vt.__esModule:Yr.writable||Yr.configurable))&&(Yr={enumerable:!0,get:function(){return Vt[Hr]}}),Object.defineProperty(Kt,Wr,Yr)}:function(Kt,Vt,Hr,Wr){Wr===void 0&&(Wr=Hr),Kt[Wr]=Vt[Hr]}),p$g=u$s&&u$s.__setModuleDefault||(Object.create?function(Kt,Vt){Object.defineProperty(Kt,"default",{enumerable:!0,value:Vt})}:function(Kt,Vt){Kt.default=Vt}),M$9=u$s&&u$s.__importStar||function(Kt){if(Kt&&Kt.__esModule)return Kt;var Vt={};if(Kt!=null)for(var Hr in Kt)Hr!=="default"&&Object.prototype.hasOwnProperty.call(Kt,Hr)&&h$a(Vt,Kt,Hr);return p$g(Vt,Kt),Vt};Object.defineProperty(r$b,"__esModule",{value:!0});r$b.render=void 0;var i$8=M$9(r$e),u$g=r$a,g$a=e$f,j$8=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function O$b(Kt){return Kt.replace(/"/g,"&quot;")}function y$6(Kt,Vt){var Hr;if(Kt){var Wr=((Hr=Vt.encodeEntities)!==null&&Hr!==void 0?Hr:Vt.decodeEntities)===!1?O$b:Vt.xmlMode||Vt.encodeEntities!=="utf8"?u$g.encodeXML:u$g.escapeAttribute;return Object.keys(Kt).map(function(Yr){var Zr,en,tn=(Zr=Kt[Yr])!==null&&Zr!==void 0?Zr:"";return Vt.xmlMode==="foreign"&&(Yr=(en=g$a.attributeNames.get(Yr))!==null&&en!==void 0?en:Yr),!Vt.emptyAttrs&&!Vt.xmlMode&&tn===""?Yr:"".concat(Yr,'="').concat(Wr(tn),'"')}).join(" ")}}var v$a=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function l$c(Kt,Vt){Vt===void 0&&(Vt={});for(var Hr=("length"in Kt)?Kt:[Kt],Wr="",Yr=0;Yr<Hr.length;Yr++)Wr+=T$9(Hr[Yr],Vt);return Wr}r$b.render=l$c;r$b.default=l$c;function T$9(Kt,Vt){switch(Kt.type){case i$8.Root:return l$c(Kt.children,Vt);case i$8.Doctype:case i$8.Directive:return S$7(Kt);case i$8.Comment:return P$7(Kt);case i$8.CDATA:return C$8(Kt);case i$8.Script:case i$8.Style:case i$8.Tag:return D$6(Kt,Vt);case i$8.Text:return A$5(Kt,Vt)}}var w$b=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),E$5=new Set(["svg","math"]);function D$6(Kt,Vt){var Hr;Vt.xmlMode==="foreign"&&(Kt.name=(Hr=g$a.elementNames.get(Kt.name))!==null&&Hr!==void 0?Hr:Kt.name,Kt.parent&&w$b.has(Kt.parent.name)&&(Vt=o$m(o$m({},Vt),{xmlMode:!1}))),!Vt.xmlMode&&E$5.has(Kt.name)&&(Vt=o$m(o$m({},Vt),{xmlMode:"foreign"}));var Wr="<".concat(Kt.name),Yr=y$6(Kt.attribs,Vt);return Yr&&(Wr+=" ".concat(Yr)),Kt.children.length===0&&(Vt.xmlMode?Vt.selfClosingTags!==!1:Vt.selfClosingTags&&v$a.has(Kt.name))?(Vt.xmlMode||(Wr+=" "),Wr+="/>"):(Wr+=">",Kt.children.length>0&&(Wr+=l$c(Kt.children,Vt)),(Vt.xmlMode||!v$a.has(Kt.name))&&(Wr+="</".concat(Kt.name,">"))),Wr}function S$7(Kt){return"<".concat(Kt.data,">")}function A$5(Kt,Vt){var Hr,Wr=Kt.data||"";return((Hr=Vt.encodeEntities)!==null&&Hr!==void 0?Hr:Vt.decodeEntities)!==!1&&!(!Vt.xmlMode&&Kt.parent&&j$8.has(Kt.parent.name))&&(Wr=Vt.xmlMode||Vt.encodeEntities!=="utf8"?(0,u$g.encodeXML)(Wr):(0,u$g.escapeText)(Wr)),Wr}function C$8(Kt){return"<![CDATA[".concat(Kt.children[0].data,"]]>")}function P$7(Kt){return"<!--".concat(Kt.data,"-->")}var T$8=u$s&&u$s.__importDefault||function(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}};Object.defineProperty(r$c,"__esModule",{value:!0});r$c.innerText=r$c.textContent=r$c.getText=r$c.getInnerHTML=r$c.getOuterHTML=void 0;var e$e=r$f,_$7=T$8(r$b),x$9=r$e;function s$6(Kt,Vt){return(0,_$7.default)(Kt,Vt)}r$c.getOuterHTML=s$6;function c$d(Kt,Vt){return(0,e$e.hasChildren)(Kt)?Kt.children.map(function(Hr){return s$6(Hr,Vt)}).join(""):""}r$c.getInnerHTML=c$d;function i$7(Kt){return Array.isArray(Kt)?Kt.map(i$7).join(""):(0,e$e.isTag)(Kt)?Kt.name==="br"?`
`:i$7(Kt.children):(0,e$e.isCDATA)(Kt)?i$7(Kt.children):(0,e$e.isText)(Kt)?Kt.data:""}r$c.getText=i$7;function a$k(Kt){return Array.isArray(Kt)?Kt.map(a$k).join(""):(0,e$e.hasChildren)(Kt)&&!(0,e$e.isComment)(Kt)?a$k(Kt.children):(0,e$e.isText)(Kt)?Kt.data:""}r$c.textContent=a$k;function u$f(Kt){return Array.isArray(Kt)?Kt.map(u$f).join(""):(0,e$e.hasChildren)(Kt)&&(Kt.type===x$9.ElementType.Tag||(0,e$e.isCDATA)(Kt))?u$f(Kt.children):(0,e$e.isText)(Kt)?Kt.data:""}r$c.innerText=u$f;var r$9={};Object.defineProperty(r$9,"__esModule",{value:!0});r$9.prevElementSibling=r$9.nextElementSibling=r$9.getName=r$9.hasAttrib=r$9.getAttributeValue=r$9.getSiblings=r$9.getParent=r$9.getChildren=void 0;var u$e=r$f;function o$l(Kt){return(0,u$e.hasChildren)(Kt)?Kt.children:[]}r$9.getChildren=o$l;function s$5(Kt){return Kt.parent||null}r$9.getParent=s$5;function v$9(Kt){var Vt,Hr,Wr=s$5(Kt);if(Wr!=null)return o$l(Wr);for(var Yr=[Kt],Zr=Kt.prev,en=Kt.next;Zr!=null;)Yr.unshift(Zr),Vt=Zr,Zr=Vt.prev;for(;en!=null;)Yr.push(en),Hr=en,en=Hr.next;return Yr}r$9.getSiblings=v$9;function p$f(Kt,Vt){var Hr;return(Hr=Kt.attribs)===null||Hr===void 0?void 0:Hr[Vt]}r$9.getAttributeValue=p$f;function h$9(Kt,Vt){return Kt.attribs!=null&&Object.prototype.hasOwnProperty.call(Kt.attribs,Vt)&&Kt.attribs[Vt]!=null}r$9.hasAttrib=h$9;function f$g(Kt){return Kt.name}r$9.getName=f$g;function d$i(Kt){for(var Vt,Hr=Kt.next;Hr!==null&&!(0,u$e.isTag)(Hr);)Vt=Hr,Hr=Vt.next;return Hr}r$9.nextElementSibling=d$i;function c$c(Kt){for(var Vt,Hr=Kt.prev;Hr!==null&&!(0,u$e.isTag)(Hr);)Vt=Hr,Hr=Vt.prev;return Hr}r$9.prevElementSibling=c$c;var a$j={};Object.defineProperty(a$j,"__esModule",{value:!0});a$j.prepend=a$j.prependChild=a$j.append=a$j.appendChild=a$j.replaceElement=a$j.removeElement=void 0;function v$8(Kt){if(Kt.prev&&(Kt.prev.next=Kt.next),Kt.next&&(Kt.next.prev=Kt.prev),Kt.parent){var Vt=Kt.parent.children,Hr=Vt.lastIndexOf(Kt);Hr>=0&&Vt.splice(Hr,1)}Kt.next=null,Kt.prev=null,Kt.parent=null}a$j.removeElement=v$8;function i$6(Kt,Vt){var Hr=Vt.prev=Kt.prev;Hr&&(Hr.next=Vt);var Wr=Vt.next=Kt.next;Wr&&(Wr.prev=Vt);var Yr=Vt.parent=Kt.parent;if(Yr){var Zr=Yr.children;Zr[Zr.lastIndexOf(Kt)]=Vt,Kt.parent=null}}a$j.replaceElement=i$6;function u$d(Kt,Vt){if(v$8(Vt),Vt.next=null,Vt.parent=Kt,Kt.children.push(Vt)>1){var Hr=Kt.children[Kt.children.length-2];Hr.next=Vt,Vt.prev=Hr}else Vt.prev=null}a$j.appendChild=u$d;function d$h(Kt,Vt){v$8(Vt);var Hr=Kt.parent,Wr=Kt.next;if(Vt.next=Wr,Vt.prev=Kt,Kt.next=Vt,Vt.parent=Hr,Wr){if(Wr.prev=Vt,Hr){var Yr=Hr.children;Yr.splice(Yr.lastIndexOf(Wr),0,Vt)}}else Hr&&Hr.children.push(Vt)}a$j.append=d$h;function o$k(Kt,Vt){if(v$8(Vt),Vt.parent=Kt,Vt.prev=null,Kt.children.unshift(Vt)!==1){var Hr=Kt.children[1];Hr.prev=Vt,Vt.next=Hr}else Vt.next=null}a$j.prependChild=o$k;function x$8(Kt,Vt){v$8(Vt);var Hr=Kt.parent;if(Hr){var Wr=Hr.children;Wr.splice(Wr.indexOf(Kt),0,Vt)}Kt.prev&&(Kt.prev.next=Vt),Vt.parent=Hr,Vt.prev=Kt.prev,Vt.next=Kt,Kt.prev=Vt}a$j.prepend=x$8;var r$8={};Object.defineProperty(r$8,"__esModule",{value:!0});r$8.findAll=r$8.existsOne=r$8.findOne=r$8.findOneChild=r$8.find=r$8.filter=void 0;var a$i=r$f;function c$b(Kt,Vt,Hr,Wr){return Hr===void 0&&(Hr=!0),Wr===void 0&&(Wr=1/0),d$g(Kt,Array.isArray(Vt)?Vt:[Vt],Hr,Wr)}r$8.filter=c$b;function d$g(Kt,Vt,Hr,Wr){for(var Yr=[],Zr=[Vt],en=[0];;){if(en[0]>=Zr[0].length){if(en.length===1)return Yr;Zr.shift(),en.shift();continue}var tn=Zr[0][en[0]++];if(Kt(tn)&&(Yr.push(tn),--Wr<=0))return Yr;Hr&&(0,a$i.hasChildren)(tn)&&tn.children.length>0&&(en.unshift(0),Zr.unshift(tn.children))}}r$8.find=d$g;function g$9(Kt,Vt){return Vt.find(Kt)}r$8.findOneChild=g$9;function o$j(Kt,Vt,Hr){Hr===void 0&&(Hr=!0);for(var Wr=null,Yr=0;Yr<Vt.length&&!Wr;Yr++){var Zr=Vt[Yr];if((0,a$i.isTag)(Zr))Kt(Zr)?Wr=Zr:Hr&&Zr.children.length>0&&(Wr=o$j(Kt,Zr.children,!0));else continue}return Wr}r$8.findOne=o$j;function s$4(Kt,Vt){return Vt.some(function(Hr){return(0,a$i.isTag)(Hr)&&(Kt(Hr)||s$4(Kt,Hr.children))})}r$8.existsOne=s$4;function O$a(Kt,Vt){for(var Hr=[],Wr=[Vt],Yr=[0];;){if(Yr[0]>=Wr[0].length){if(Wr.length===1)return Hr;Wr.shift(),Yr.shift();continue}var Zr=Wr[0][Yr[0]++];(0,a$i.isTag)(Zr)&&(Kt(Zr)&&Hr.push(Zr),Zr.children.length>0&&(Yr.unshift(0),Wr.unshift(Zr.children)))}}r$8.findAll=O$a;var a$h={};Object.defineProperty(a$h,"__esModule",{value:!0});a$h.getElementsByTagType=a$h.getElementsByTagName=a$h.getElementById=a$h.getElements=a$h.testElement=void 0;var u$c=r$f,o$i=r$8,f$f={tag_name:function(Kt){return typeof Kt=="function"?function(Vt){return(0,u$c.isTag)(Vt)&&Kt(Vt.name)}:Kt==="*"?u$c.isTag:function(Vt){return(0,u$c.isTag)(Vt)&&Vt.name===Kt}},tag_type:function(Kt){return typeof Kt=="function"?function(Vt){return Kt(Vt.type)}:function(Vt){return Vt.type===Kt}},tag_contains:function(Kt){return typeof Kt=="function"?function(Vt){return(0,u$c.isText)(Vt)&&Kt(Vt.data)}:function(Vt){return(0,u$c.isText)(Vt)&&Vt.data===Kt}}};function g$8(Kt,Vt){return typeof Vt=="function"?function(Hr){return(0,u$c.isTag)(Hr)&&Vt(Hr.attribs[Kt])}:function(Hr){return(0,u$c.isTag)(Hr)&&Hr.attribs[Kt]===Vt}}function p$e(Kt,Vt){return function(Hr){return Kt(Hr)||Vt(Hr)}}function c$a(Kt){var Vt=Object.keys(Kt).map(function(Hr){var Wr=Kt[Hr];return Object.prototype.hasOwnProperty.call(f$f,Hr)?f$f[Hr](Wr):g$8(Hr,Wr)});return Vt.length===0?null:Vt.reduce(p$e)}function m$e(Kt,Vt){var Hr=c$a(Kt);return Hr?Hr(Vt):!0}a$h.testElement=m$e;function l$b(Kt,Vt,Hr,Wr){Wr===void 0&&(Wr=1/0);var Yr=c$a(Kt);return Yr?(0,o$i.filter)(Yr,Vt,Hr,Wr):[]}a$h.getElements=l$b;function T$7(Kt,Vt,Hr){return Hr===void 0&&(Hr=!0),Array.isArray(Vt)||(Vt=[Vt]),(0,o$i.findOne)(g$8("id",Kt),Vt,Hr)}a$h.getElementById=T$7;function _$6(Kt,Vt,Hr,Wr){return Hr===void 0&&(Hr=!0),Wr===void 0&&(Wr=1/0),(0,o$i.filter)(f$f.tag_name(Kt),Vt,Hr,Wr)}a$h.getElementsByTagName=_$6;function d$f(Kt,Vt,Hr,Wr){return Hr===void 0&&(Hr=!0),Wr===void 0&&(Wr=1/0),(0,o$i.filter)(f$f.tag_type(Kt),Vt,Hr,Wr)}a$h.getElementsByTagType=d$f;var e$d={};(function(Kt){Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.uniqueSort=Kt.compareDocumentPosition=Kt.DocumentPosition=Kt.removeSubsets=void 0;var Vt=r$f;function Hr(en){for(var tn=en.length;--tn>=0;){var rn=en[tn];if(tn>0&&en.lastIndexOf(rn,tn-1)>=0){en.splice(tn,1);continue}for(var nn=rn.parent;nn;nn=nn.parent)if(en.includes(nn)){en.splice(tn,1);break}}return en}Kt.removeSubsets=Hr;var Wr;(function(en){en[en.DISCONNECTED=1]="DISCONNECTED",en[en.PRECEDING=2]="PRECEDING",en[en.FOLLOWING=4]="FOLLOWING",en[en.CONTAINS=8]="CONTAINS",en[en.CONTAINED_BY=16]="CONTAINED_BY"})(Wr=Kt.DocumentPosition||(Kt.DocumentPosition={}));function Yr(en,tn){var rn=[],nn=[];if(en===tn)return 0;for(var on=(0,Vt.hasChildren)(en)?en:en.parent;on;)rn.unshift(on),on=on.parent;for(on=(0,Vt.hasChildren)(tn)?tn:tn.parent;on;)nn.unshift(on),on=on.parent;for(var an=Math.min(rn.length,nn.length),$n=0;$n<an&&rn[$n]===nn[$n];)$n++;if($n===0)return Wr.DISCONNECTED;var ln=rn[$n-1],Hn=ln.children,jn=rn[$n],zn=nn[$n];return Hn.indexOf(jn)>Hn.indexOf(zn)?ln===tn?Wr.FOLLOWING|Wr.CONTAINED_BY:Wr.FOLLOWING:ln===en?Wr.PRECEDING|Wr.CONTAINS:Wr.PRECEDING}Kt.compareDocumentPosition=Yr;function Zr(en){return en=en.filter(function(tn,rn,nn){return!nn.includes(tn,rn+1)}),en.sort(function(tn,rn){var nn=Yr(tn,rn);return nn&Wr.PRECEDING?-1:nn&Wr.FOLLOWING?1:0}),en}Kt.uniqueSort=Zr})(e$d);var e$c={};Object.defineProperty(e$c,"__esModule",{value:!0});e$c.getFeed=void 0;var _$5=r$c,m$d=a$h;function k$7(Kt){var Vt=v$7(w$a,Kt);return Vt?Vt.name==="feed"?x$7(Vt):E$4(Vt):null}e$c.getFeed=k$7;function x$7(Kt){var Vt,Hr=Kt.children,Wr={type:"atom",items:(0,m$d.getElementsByTagName)("entry",Hr).map(function(en){var tn,rn=en.children,nn={media:y$5(rn)};l$a(nn,"id","id",rn),l$a(nn,"title","title",rn);var on=(tn=v$7("link",rn))===null||tn===void 0?void 0:tn.attribs.href;on&&(nn.link=on);var an=f$e("summary",rn)||f$e("content",rn);an&&(nn.description=an);var $n=f$e("updated",rn);return $n&&(nn.pubDate=new Date($n)),nn})};l$a(Wr,"id","id",Hr),l$a(Wr,"title","title",Hr);var Yr=(Vt=v$7("link",Hr))===null||Vt===void 0?void 0:Vt.attribs.href;Yr&&(Wr.link=Yr),l$a(Wr,"description","subtitle",Hr);var Zr=f$e("updated",Hr);return Zr&&(Wr.updated=new Date(Zr)),l$a(Wr,"author","email",Hr,!0),Wr}function E$4(Kt){var Vt,Hr,Wr=(Hr=(Vt=v$7("channel",Kt.children))===null||Vt===void 0?void 0:Vt.children)!==null&&Hr!==void 0?Hr:[],Yr={type:Kt.name.substr(0,3),id:"",items:(0,m$d.getElementsByTagName)("item",Kt.children).map(function(en){var tn=en.children,rn={media:y$5(tn)};l$a(rn,"id","guid",tn),l$a(rn,"title","title",tn),l$a(rn,"link","link",tn),l$a(rn,"description","description",tn);var nn=f$e("pubDate",tn)||f$e("dc:date",tn);return nn&&(rn.pubDate=new Date(nn)),rn})};l$a(Yr,"title","title",Wr),l$a(Yr,"link","link",Wr),l$a(Yr,"description","description",Wr);var Zr=f$e("lastBuildDate",Wr);return Zr&&(Yr.updated=new Date(Zr)),l$a(Yr,"author","managingEditor",Wr,!0),Yr}var F$6=["url","type","lang"],B$8=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function y$5(Kt){return(0,m$d.getElementsByTagName)("media:content",Kt).map(function(Vt){for(var Hr=Vt.attribs,Wr={medium:Hr.medium,isDefault:!!Hr.isDefault},Yr=0,Zr=F$6;Yr<Zr.length;Yr++){var en=Zr[Yr];Hr[en]&&(Wr[en]=Hr[en])}for(var tn=0,rn=B$8;tn<rn.length;tn++){var en=rn[tn];Hr[en]&&(Wr[en]=parseInt(Hr[en],10))}return Hr.expression&&(Wr.expression=Hr.expression),Wr})}function v$7(Kt,Vt){return(0,m$d.getElementsByTagName)(Kt,Vt,!0,1)[0]}function f$e(Kt,Vt,Hr){return Hr===void 0&&(Hr=!1),(0,_$5.textContent)((0,m$d.getElementsByTagName)(Kt,Vt,Hr,1)).trim()}function l$a(Kt,Vt,Hr,Wr,Yr){Yr===void 0&&(Yr=!1);var Zr=f$e(Hr,Wr,Yr);Zr&&(Kt[Vt]=Zr)}function w$a(Kt){return Kt==="rss"||Kt==="feed"||Kt==="rdf:RDF"}(function(Kt){var Vt=u$s&&u$s.__createBinding||(Object.create?function(Yr,Zr,en,tn){tn===void 0&&(tn=en);var rn=Object.getOwnPropertyDescriptor(Zr,en);(!rn||("get"in rn?!Zr.__esModule:rn.writable||rn.configurable))&&(rn={enumerable:!0,get:function(){return Zr[en]}}),Object.defineProperty(Yr,tn,rn)}:function(Yr,Zr,en,tn){tn===void 0&&(tn=en),Yr[tn]=Zr[en]}),Hr=u$s&&u$s.__exportStar||function(Yr,Zr){for(var en in Yr)en!=="default"&&!Object.prototype.hasOwnProperty.call(Zr,en)&&Vt(Zr,Yr,en)};Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.hasChildren=Kt.isDocument=Kt.isComment=Kt.isText=Kt.isCDATA=Kt.isTag=void 0,Hr(r$c,Kt),Hr(r$9,Kt),Hr(a$j,Kt),Hr(r$8,Kt),Hr(a$h,Kt),Hr(e$d,Kt),Hr(e$c,Kt);var Wr=r$f;Object.defineProperty(Kt,"isTag",{enumerable:!0,get:function(){return Wr.isTag}}),Object.defineProperty(Kt,"isCDATA",{enumerable:!0,get:function(){return Wr.isCDATA}}),Object.defineProperty(Kt,"isText",{enumerable:!0,get:function(){return Wr.isText}}),Object.defineProperty(Kt,"isComment",{enumerable:!0,get:function(){return Wr.isComment}}),Object.defineProperty(Kt,"isDocument",{enumerable:!0,get:function(){return Wr.isDocument}}),Object.defineProperty(Kt,"hasChildren",{enumerable:!0,get:function(){return Wr.hasChildren}})})(r$d);(function(Kt){var Vt=u$s&&u$s.__createBinding||(Object.create?function(Wn,ei,$i,Mi){Mi===void 0&&(Mi=$i);var Ni=Object.getOwnPropertyDescriptor(ei,$i);(!Ni||("get"in Ni?!ei.__esModule:Ni.writable||Ni.configurable))&&(Ni={enumerable:!0,get:function(){return ei[$i]}}),Object.defineProperty(Wn,Mi,Ni)}:function(Wn,ei,$i,Mi){Mi===void 0&&(Mi=$i),Wn[Mi]=ei[$i]}),Hr=u$s&&u$s.__setModuleDefault||(Object.create?function(Wn,ei){Object.defineProperty(Wn,"default",{enumerable:!0,value:ei})}:function(Wn,ei){Wn.default=ei}),Wr=u$s&&u$s.__importStar||function(Wn){if(Wn&&Wn.__esModule)return Wn;var ei={};if(Wn!=null)for(var $i in Wn)$i!=="default"&&Object.prototype.hasOwnProperty.call(Wn,$i)&&Vt(ei,Wn,$i);return Hr(ei,Wn),ei},Yr=u$s&&u$s.__importDefault||function(Wn){return Wn&&Wn.__esModule?Wn:{default:Wn}};Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.DomUtils=Kt.parseFeed=Kt.getFeed=Kt.ElementType=Kt.Tokenizer=Kt.createDomStream=Kt.parseDOM=Kt.parseDocument=Kt.DefaultHandler=Kt.DomHandler=Kt.Parser=void 0;var Zr=r$g,en=r$g;Object.defineProperty(Kt,"Parser",{enumerable:!0,get:function(){return en.Parser}});var tn=r$f,rn=r$f;Object.defineProperty(Kt,"DomHandler",{enumerable:!0,get:function(){return rn.DomHandler}}),Object.defineProperty(Kt,"DefaultHandler",{enumerable:!0,get:function(){return rn.DomHandler}});function nn(Wn,ei){var $i=new tn.DomHandler(void 0,ei);return new Zr.Parser($i,ei).end(Wn),$i.root}Kt.parseDocument=nn;function on(Wn,ei){return nn(Wn,ei).children}Kt.parseDOM=on;function an(Wn,ei,$i){var Mi=new tn.DomHandler(Wn,ei,$i);return new Zr.Parser(Mi,ei)}Kt.createDomStream=an;var $n=e$m;Object.defineProperty(Kt,"Tokenizer",{enumerable:!0,get:function(){return Yr($n).default}}),Kt.ElementType=Wr(r$e);var ln=r$d,Hn=r$d;Object.defineProperty(Kt,"getFeed",{enumerable:!0,get:function(){return Hn.getFeed}});var jn={xmlMode:!0};function zn(Wn,ei){return ei===void 0&&(ei=jn),(0,ln.getFeed)(on(Wn,ei))}Kt.parseFeed=zn,Kt.DomUtils=Wr(r$d)})(r$h);var a$g={};Object.defineProperty(a$g,"__esModule",{value:!0});/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function o$h(Kt){return Object.prototype.toString.call(Kt)==="[object Object]"}function n$5(Kt){var Vt,Hr;return o$h(Kt)===!1?!1:(Vt=Kt.constructor,Vt===void 0?!0:(Hr=Vt.prototype,!(o$h(Hr)===!1||Hr.hasOwnProperty("isPrototypeOf")===!1)))}a$g.isPlainObject=n$5;var e$b={exports:{}};(function(Kt){(function(Vt,Hr){Kt.exports?Kt.exports=Hr():Vt.parseSrcset=Hr()})(u$s,function(){return function(Vt){function Hr(Mi){return Mi===" "||Mi==="	"||Mi===`
`||Mi==="\f"||Mi==="\r"}function Wr(Mi){var Ni,Ts=Mi.exec(Vt.substring(zn));if(Ts)return Ni=Ts[0],zn+=Ni.length,Ni}for(var Yr=Vt.length,Zr=/^[ \t\n\r\u000c]+/,en=/^[, \t\n\r\u000c]+/,tn=/^[^ \t\n\r\u000c]+/,rn=/[,]+$/,nn=/^\d+$/,on=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,an,$n,ln,Hn,jn,zn=0,Wn=[];;){if(Wr(en),zn>=Yr)return Wn;an=Wr(tn),$n=[],an.slice(-1)===","?(an=an.replace(rn,""),$i()):ei()}function ei(){for(Wr(Zr),ln="",Hn="in descriptor";;){if(jn=Vt.charAt(zn),Hn==="in descriptor")if(Hr(jn))ln&&($n.push(ln),ln="",Hn="after descriptor");else if(jn===","){zn+=1,ln&&$n.push(ln),$i();return}else if(jn==="(")ln=ln+jn,Hn="in parens";else if(jn===""){ln&&$n.push(ln),$i();return}else ln=ln+jn;else if(Hn==="in parens")if(jn===")")ln=ln+jn,Hn="in descriptor";else if(jn===""){$n.push(ln),$i();return}else ln=ln+jn;else if(Hn==="after descriptor"&&!Hr(jn))if(jn===""){$i();return}else Hn="in descriptor",zn-=1;zn+=1}}function $i(){var Mi=!1,Ni,Ts,ps,$s,Ws={},Hs,js,zs,Xs,ia;for($s=0;$s<$n.length;$s++)Hs=$n[$s],js=Hs[Hs.length-1],zs=Hs.substring(0,Hs.length-1),Xs=parseInt(zs,10),ia=parseFloat(zs),nn.test(zs)&&js==="w"?((Ni||Ts)&&(Mi=!0),Xs===0?Mi=!0:Ni=Xs):on.test(zs)&&js==="x"?((Ni||Ts||ps)&&(Mi=!0),ia<0?Mi=!0:Ts=ia):nn.test(zs)&&js==="h"?((ps||Ts)&&(Mi=!0),Xs===0?Mi=!0:ps=Xs):Mi=!0;Mi?console&&console.log&&console.log("Invalid srcset descriptor found in '"+Vt+"' at '"+Hs+"'."):(Ws.url=an,Ni&&(Ws.w=Ni),Ts&&(Ws.d=Ts),ps&&(Ws.h=ps),Wn.push(Ws))}}})})(e$b);var o$g={exports:{}},e$a=String,o$f=function(){return{isColorSupported:!1,reset:e$a,bold:e$a,dim:e$a,italic:e$a,underline:e$a,inverse:e$a,hidden:e$a,strikethrough:e$a,black:e$a,red:e$a,green:e$a,yellow:e$a,blue:e$a,magenta:e$a,cyan:e$a,white:e$a,gray:e$a,bgBlack:e$a,bgRed:e$a,bgGreen:e$a,bgYellow:e$a,bgBlue:e$a,bgMagenta:e$a,bgCyan:e$a,bgWhite:e$a}};o$g.exports=o$f();o$g.exports.createColors=o$f;var a$f=o$g.exports;let p$d=a$f,m$c=o$B,o$e=class yu extends Error{constructor(Vt,Hr,Wr,Yr,Zr,en){super(Vt),this.name="CssSyntaxError",this.reason=Vt,Zr&&(this.file=Zr),Yr&&(this.source=Yr),en&&(this.plugin=en),typeof Hr<"u"&&typeof Wr<"u"&&(typeof Hr=="number"?(this.line=Hr,this.column=Wr):(this.line=Hr.line,this.column=Hr.column,this.endLine=Wr.line,this.endColumn=Wr.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,yu)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(Vt){if(!this.source)return"";let Hr=this.source;Vt==null&&(Vt=p$d.isColorSupported),m$c&&Vt&&(Hr=m$c(Hr));let Wr=Hr.split(/\r?\n/),Yr=Math.max(this.line-3,0),Zr=Math.min(this.line+2,Wr.length),en=String(Zr).length,tn,rn;if(Vt){let{bold:nn,gray:on,red:an}=p$d.createColors(!0);tn=$n=>nn(an($n)),rn=$n=>on($n)}else tn=rn=nn=>nn;return Wr.slice(Yr,Zr).map((nn,on)=>{let an=Yr+1+on,$n=" "+(" "+an).slice(-en)+" | ";if(an===this.line){let ln=rn($n.replace(/\d/g," "))+nn.slice(0,this.column-1).replace(/[^\t]/g," ");return tn(">")+rn($n)+nn+`
 `+ln+tn("^")}return" "+rn($n)+nn}).join(`
`)}toString(){let Vt=this.showSourceCode();return Vt&&(Vt=`

`+Vt+`
`),this.name+": "+this.message+Vt}};var C$7=o$e;o$e.default=o$e;var s$3={};s$3.isClean=Symbol("isClean");s$3.my=Symbol("my");const u$b={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function o$d(Kt){return Kt[0].toUpperCase()+Kt.slice(1)}let n$4=class{constructor(Vt){this.builder=Vt}atrule(Vt,Hr){let Wr="@"+Vt.name,Yr=Vt.params?this.rawValue(Vt,"params"):"";if(typeof Vt.raws.afterName<"u"?Wr+=Vt.raws.afterName:Yr&&(Wr+=" "),Vt.nodes)this.block(Vt,Wr+Yr);else{let Zr=(Vt.raws.between||"")+(Hr?";":"");this.builder(Wr+Yr+Zr,Vt)}}beforeAfter(Vt,Hr){let Wr;Vt.type==="decl"?Wr=this.raw(Vt,null,"beforeDecl"):Vt.type==="comment"?Wr=this.raw(Vt,null,"beforeComment"):Hr==="before"?Wr=this.raw(Vt,null,"beforeRule"):Wr=this.raw(Vt,null,"beforeClose");let Yr=Vt.parent,Zr=0;for(;Yr&&Yr.type!=="root";)Zr+=1,Yr=Yr.parent;if(Wr.includes(`
`)){let en=this.raw(Vt,null,"indent");if(en.length)for(let tn=0;tn<Zr;tn++)Wr+=en}return Wr}block(Vt,Hr){let Wr=this.raw(Vt,"between","beforeOpen");this.builder(Hr+Wr+"{",Vt,"start");let Yr;Vt.nodes&&Vt.nodes.length?(this.body(Vt),Yr=this.raw(Vt,"after")):Yr=this.raw(Vt,"after","emptyBody"),Yr&&this.builder(Yr),this.builder("}",Vt,"end")}body(Vt){let Hr=Vt.nodes.length-1;for(;Hr>0&&Vt.nodes[Hr].type==="comment";)Hr-=1;let Wr=this.raw(Vt,"semicolon");for(let Yr=0;Yr<Vt.nodes.length;Yr++){let Zr=Vt.nodes[Yr],en=this.raw(Zr,"before");en&&this.builder(en),this.stringify(Zr,Hr!==Yr||Wr)}}comment(Vt){let Hr=this.raw(Vt,"left","commentLeft"),Wr=this.raw(Vt,"right","commentRight");this.builder("/*"+Hr+Vt.text+Wr+"*/",Vt)}decl(Vt,Hr){let Wr=this.raw(Vt,"between","colon"),Yr=Vt.prop+Wr+this.rawValue(Vt,"value");Vt.important&&(Yr+=Vt.raws.important||" !important"),Hr&&(Yr+=";"),this.builder(Yr,Vt)}document(Vt){this.body(Vt)}raw(Vt,Hr,Wr){let Yr;if(Wr||(Wr=Hr),Hr&&(Yr=Vt.raws[Hr],typeof Yr<"u"))return Yr;let Zr=Vt.parent;if(Wr==="before"&&(!Zr||Zr.type==="root"&&Zr.first===Vt||Zr&&Zr.type==="document"))return"";if(!Zr)return u$b[Wr];let en=Vt.root();if(en.rawCache||(en.rawCache={}),typeof en.rawCache[Wr]<"u")return en.rawCache[Wr];if(Wr==="before"||Wr==="after")return this.beforeAfter(Vt,Wr);{let tn="raw"+o$d(Wr);this[tn]?Yr=this[tn](en,Vt):en.walk(rn=>{if(Yr=rn.raws[Hr],typeof Yr<"u")return!1})}return typeof Yr>"u"&&(Yr=u$b[Wr]),en.rawCache[Wr]=Yr,Yr}rawBeforeClose(Vt){let Hr;return Vt.walk(Wr=>{if(Wr.nodes&&Wr.nodes.length>0&&typeof Wr.raws.after<"u")return Hr=Wr.raws.after,Hr.includes(`
`)&&(Hr=Hr.replace(/[^\n]+$/,"")),!1}),Hr&&(Hr=Hr.replace(/\S/g,"")),Hr}rawBeforeComment(Vt,Hr){let Wr;return Vt.walkComments(Yr=>{if(typeof Yr.raws.before<"u")return Wr=Yr.raws.before,Wr.includes(`
`)&&(Wr=Wr.replace(/[^\n]+$/,"")),!1}),typeof Wr>"u"?Wr=this.raw(Hr,null,"beforeDecl"):Wr&&(Wr=Wr.replace(/\S/g,"")),Wr}rawBeforeDecl(Vt,Hr){let Wr;return Vt.walkDecls(Yr=>{if(typeof Yr.raws.before<"u")return Wr=Yr.raws.before,Wr.includes(`
`)&&(Wr=Wr.replace(/[^\n]+$/,"")),!1}),typeof Wr>"u"?Wr=this.raw(Hr,null,"beforeRule"):Wr&&(Wr=Wr.replace(/\S/g,"")),Wr}rawBeforeOpen(Vt){let Hr;return Vt.walk(Wr=>{if(Wr.type!=="decl"&&(Hr=Wr.raws.between,typeof Hr<"u"))return!1}),Hr}rawBeforeRule(Vt){let Hr;return Vt.walk(Wr=>{if(Wr.nodes&&(Wr.parent!==Vt||Vt.first!==Wr)&&typeof Wr.raws.before<"u")return Hr=Wr.raws.before,Hr.includes(`
`)&&(Hr=Hr.replace(/[^\n]+$/,"")),!1}),Hr&&(Hr=Hr.replace(/\S/g,"")),Hr}rawColon(Vt){let Hr;return Vt.walkDecls(Wr=>{if(typeof Wr.raws.between<"u")return Hr=Wr.raws.between.replace(/[^\s:]/g,""),!1}),Hr}rawEmptyBody(Vt){let Hr;return Vt.walk(Wr=>{if(Wr.nodes&&Wr.nodes.length===0&&(Hr=Wr.raws.after,typeof Hr<"u"))return!1}),Hr}rawIndent(Vt){if(Vt.raws.indent)return Vt.raws.indent;let Hr;return Vt.walk(Wr=>{let Yr=Wr.parent;if(Yr&&Yr!==Vt&&Yr.parent&&Yr.parent===Vt&&typeof Wr.raws.before<"u"){let Zr=Wr.raws.before.split(`
`);return Hr=Zr[Zr.length-1],Hr=Hr.replace(/\S/g,""),!1}}),Hr}rawSemicolon(Vt){let Hr;return Vt.walk(Wr=>{if(Wr.nodes&&Wr.nodes.length&&Wr.last.type==="decl"&&(Hr=Wr.raws.semicolon,typeof Hr<"u"))return!1}),Hr}rawValue(Vt,Hr){let Wr=Vt[Hr],Yr=Vt.raws[Hr];return Yr&&Yr.value===Wr?Yr.raw:Wr}root(Vt){this.body(Vt),Vt.raws.after&&this.builder(Vt.raws.after)}rule(Vt){this.block(Vt,this.rawValue(Vt,"selector")),Vt.raws.ownSemicolon&&this.builder(Vt.raws.ownSemicolon,Vt,"end")}stringify(Vt,Hr){if(!this[Vt.type])throw new Error("Unknown AST node type "+Vt.type+". Maybe you need to change PostCSS stringifier.");this[Vt.type](Vt,Hr)}};var p$c=n$4;n$4.default=n$4;let f$d=p$c;function i$5(Kt,Vt){new f$d(Vt).stringify(Kt)}var g$7=i$5;i$5.default=i$5;let{isClean:h$8,my:x$6}=s$3,p$b=C$7,w$9=p$c,g$6=g$7;function f$c(Kt,Vt){let Hr=new Kt.constructor;for(let Wr in Kt){if(!Object.prototype.hasOwnProperty.call(Kt,Wr)||Wr==="proxyCache")continue;let Yr=Kt[Wr],Zr=typeof Yr;Wr==="parent"&&Zr==="object"?Vt&&(Hr[Wr]=Vt):Wr==="source"?Hr[Wr]=Yr:Array.isArray(Yr)?Hr[Wr]=Yr.map(en=>f$c(en,Hr)):(Zr==="object"&&Yr!==null&&(Yr=f$c(Yr)),Hr[Wr]=Yr)}return Hr}let u$a=class{constructor(Vt={}){this.raws={},this[h$8]=!1,this[x$6]=!0;for(let Hr in Vt)if(Hr==="nodes"){this.nodes=[];for(let Wr of Vt[Hr])typeof Wr.clone=="function"?this.append(Wr.clone()):this.append(Wr)}else this[Hr]=Vt[Hr]}addToError(Vt){if(Vt.postcssNode=this,Vt.stack&&this.source&&/\n\s{4}at /.test(Vt.stack)){let Hr=this.source;Vt.stack=Vt.stack.replace(/\n\s{4}at /,`$&${Hr.input.from}:${Hr.start.line}:${Hr.start.column}$&`)}return Vt}after(Vt){return this.parent.insertAfter(this,Vt),this}assign(Vt={}){for(let Hr in Vt)this[Hr]=Vt[Hr];return this}before(Vt){return this.parent.insertBefore(this,Vt),this}cleanRaws(Vt){delete this.raws.before,delete this.raws.after,Vt||delete this.raws.between}clone(Vt={}){let Hr=f$c(this);for(let Wr in Vt)Hr[Wr]=Vt[Wr];return Hr}cloneAfter(Vt={}){let Hr=this.clone(Vt);return this.parent.insertAfter(this,Hr),Hr}cloneBefore(Vt={}){let Hr=this.clone(Vt);return this.parent.insertBefore(this,Hr),Hr}error(Vt,Hr={}){if(this.source){let{end:Wr,start:Yr}=this.rangeBy(Hr);return this.source.input.error(Vt,{column:Yr.column,line:Yr.line},{column:Wr.column,line:Wr.line},Hr)}return new p$b(Vt)}getProxyProcessor(){return{get(Vt,Hr){return Hr==="proxyOf"?Vt:Hr==="root"?()=>Vt.root().toProxy():Vt[Hr]},set(Vt,Hr,Wr){return Vt[Hr]===Wr||(Vt[Hr]=Wr,(Hr==="prop"||Hr==="value"||Hr==="name"||Hr==="params"||Hr==="important"||Hr==="text")&&Vt.markDirty()),!0}}}markDirty(){if(this[h$8]){this[h$8]=!1;let Vt=this;for(;Vt=Vt.parent;)Vt[h$8]=!1}}next(){if(!this.parent)return;let Vt=this.parent.index(this);return this.parent.nodes[Vt+1]}positionBy(Vt,Hr){let Wr=this.source.start;if(Vt.index)Wr=this.positionInside(Vt.index,Hr);else if(Vt.word){Hr=this.toString();let Yr=Hr.indexOf(Vt.word);Yr!==-1&&(Wr=this.positionInside(Yr,Hr))}return Wr}positionInside(Vt,Hr){let Wr=Hr||this.toString(),Yr=this.source.start.column,Zr=this.source.start.line;for(let en=0;en<Vt;en++)Wr[en]===`
`?(Yr=1,Zr+=1):Yr+=1;return{column:Yr,line:Zr}}prev(){if(!this.parent)return;let Vt=this.parent.index(this);return this.parent.nodes[Vt-1]}rangeBy(Vt){let Hr={column:this.source.start.column,line:this.source.start.line},Wr=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:Hr.column+1,line:Hr.line};if(Vt.word){let Yr=this.toString(),Zr=Yr.indexOf(Vt.word);Zr!==-1&&(Hr=this.positionInside(Zr,Yr),Wr=this.positionInside(Zr+Vt.word.length,Yr))}else Vt.start?Hr={column:Vt.start.column,line:Vt.start.line}:Vt.index&&(Hr=this.positionInside(Vt.index)),Vt.end?Wr={column:Vt.end.column,line:Vt.end.line}:Vt.endIndex?Wr=this.positionInside(Vt.endIndex):Vt.index&&(Wr=this.positionInside(Vt.index+1));return(Wr.line<Hr.line||Wr.line===Hr.line&&Wr.column<=Hr.column)&&(Wr={column:Hr.column+1,line:Hr.line}),{end:Wr,start:Hr}}raw(Vt,Hr){return new w$9().raw(this,Vt,Hr)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...Vt){if(this.parent){let Hr=this,Wr=!1;for(let Yr of Vt)Yr===this?Wr=!0:Wr?(this.parent.insertAfter(Hr,Yr),Hr=Yr):this.parent.insertBefore(Hr,Yr);Wr||this.remove()}return this}root(){let Vt=this;for(;Vt.parent&&Vt.parent.type!=="document";)Vt=Vt.parent;return Vt}toJSON(Vt,Hr){let Wr={},Yr=Hr==null;Hr=Hr||new Map;let Zr=0;for(let en in this){if(!Object.prototype.hasOwnProperty.call(this,en)||en==="parent"||en==="proxyCache")continue;let tn=this[en];if(Array.isArray(tn))Wr[en]=tn.map(rn=>typeof rn=="object"&&rn.toJSON?rn.toJSON(null,Hr):rn);else if(typeof tn=="object"&&tn.toJSON)Wr[en]=tn.toJSON(null,Hr);else if(en==="source"){let rn=Hr.get(tn.input);rn==null&&(rn=Zr,Hr.set(tn.input,Zr),Zr++),Wr[en]={end:tn.end,inputId:rn,start:tn.start}}else Wr[en]=tn}return Yr&&(Wr.inputs=[...Hr.keys()].map(en=>en.toJSON())),Wr}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(Vt=g$6){Vt.stringify&&(Vt=Vt.stringify);let Hr="";return Vt(this,Wr=>{Hr+=Wr}),Hr}warn(Vt,Hr,Wr){let Yr={node:this};for(let Zr in Wr)Yr[Zr]=Wr[Zr];return Vt.warn(Hr,Yr)}get proxyOf(){return this}};var P$6=u$a;u$a.default=u$a;let o$c=P$6,r$7=class extends o$c{constructor(Vt){Vt&&typeof Vt.value<"u"&&typeof Vt.value!="string"&&(Vt={...Vt,value:String(Vt.value)}),super(Vt),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}};var a$e=r$7;r$7.default=r$7;let a$d="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",i$4=(Kt,Vt=21)=>(Hr=Vt)=>{let Wr="",Yr=Hr;for(;Yr--;)Wr+=Kt[Math.random()*Kt.length|0];return Wr},h$7=(Kt=21)=>{let Vt="",Hr=Kt;for(;Hr--;)Vt+=a$d[Math.random()*64|0];return Vt};var o$b={nanoid:h$7,customAlphabet:i$4};let{SourceMapConsumer:l$9,SourceMapGenerator:u$9}=o$B,{existsSync:c$9,readFileSync:p$a}=o$B,{dirname:o$a,join:m$b}=o$B;function d$e(Kt){return Buffer?Buffer.from(Kt,"base64").toString():window.atob(Kt)}let a$c=class{constructor(Vt,Hr){if(Hr.map===!1)return;this.loadAnnotation(Vt),this.inline=this.startWith(this.annotation,"data:");let Wr=Hr.map?Hr.map.prev:void 0,Yr=this.loadMap(Hr.from,Wr);!this.mapFile&&Hr.from&&(this.mapFile=Hr.from),this.mapFile&&(this.root=o$a(this.mapFile)),Yr&&(this.text=Yr)}consumer(){return this.consumerCache||(this.consumerCache=new l$9(this.text)),this.consumerCache}decodeInline(Vt){let Hr=/^data:application\/json;charset=utf-?8;base64,/,Wr=/^data:application\/json;base64,/,Yr=/^data:application\/json;charset=utf-?8,/,Zr=/^data:application\/json,/;if(Yr.test(Vt)||Zr.test(Vt))return decodeURIComponent(Vt.substr(RegExp.lastMatch.length));if(Hr.test(Vt)||Wr.test(Vt))return d$e(Vt.substr(RegExp.lastMatch.length));let en=Vt.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+en)}getAnnotationURL(Vt){return Vt.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(Vt){return typeof Vt!="object"?!1:typeof Vt.mappings=="string"||typeof Vt._mappings=="string"||Array.isArray(Vt.sections)}loadAnnotation(Vt){let Hr=Vt.match(/\/\*\s*# sourceMappingURL=/gm);if(!Hr)return;let Wr=Vt.lastIndexOf(Hr.pop()),Yr=Vt.indexOf("*/",Wr);Wr>-1&&Yr>-1&&(this.annotation=this.getAnnotationURL(Vt.substring(Wr,Yr)))}loadFile(Vt){if(this.root=o$a(Vt),c$9(Vt))return this.mapFile=Vt,p$a(Vt,"utf-8").toString().trim()}loadMap(Vt,Hr){if(Hr===!1)return!1;if(Hr){if(typeof Hr=="string")return Hr;if(typeof Hr=="function"){let Wr=Hr(Vt);if(Wr){let Yr=this.loadFile(Wr);if(!Yr)throw new Error("Unable to load previous source map: "+Wr.toString());return Yr}}else{if(Hr instanceof l$9)return u$9.fromSourceMap(Hr).toString();if(Hr instanceof u$9)return Hr.toString();if(this.isMap(Hr))return JSON.stringify(Hr);throw new Error("Unsupported previous source map format: "+Hr.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let Wr=this.annotation;return Vt&&(Wr=m$b(o$a(Vt),Wr)),this.loadFile(Wr)}}}startWith(Vt,Hr){return Vt?Vt.substr(0,Hr.length)===Hr:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var M$8=a$c;a$c.default=a$c;let{SourceMapConsumer:F$5,SourceMapGenerator:L$4}=o$B,{fileURLToPath:v$6,pathToFileURL:a$b}=o$B,{isAbsolute:g$5,resolve:S$6}=o$B,{nanoid:M$7}=o$b,p$9=o$B,C$6=C$7,x$5=M$8,d$d=Symbol("fromOffsetCache"),R$4=!!(F$5&&L$4),b$6=!!(S$6&&g$5),m$a=class{constructor(Vt,Hr={}){if(Vt===null||typeof Vt>"u"||typeof Vt=="object"&&!Vt.toString)throw new Error(`PostCSS received ${Vt} instead of CSS string`);if(this.css=Vt.toString(),this.css[0]==="\uFEFF"||this.css[0]===""?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,Hr.from&&(!b$6||/^\w+:\/\//.test(Hr.from)||g$5(Hr.from)?this.file=Hr.from:this.file=S$6(Hr.from)),b$6&&R$4){let Wr=new x$5(this.css,Hr);if(Wr.text){this.map=Wr;let Yr=Wr.consumer().file;!this.file&&Yr&&(this.file=this.mapResolve(Yr))}}this.file||(this.id="<input css "+M$7(6)+">"),this.map&&(this.map.file=this.from)}error(Vt,Hr,Wr,Yr={}){let Zr,en,tn;if(Hr&&typeof Hr=="object"){let nn=Hr,on=Wr;if(typeof nn.offset=="number"){let an=this.fromOffset(nn.offset);Hr=an.line,Wr=an.col}else Hr=nn.line,Wr=nn.column;if(typeof on.offset=="number"){let an=this.fromOffset(on.offset);en=an.line,tn=an.col}else en=on.line,tn=on.column}else if(!Wr){let nn=this.fromOffset(Hr);Hr=nn.line,Wr=nn.col}let rn=this.origin(Hr,Wr,en,tn);return rn?Zr=new C$6(Vt,rn.endLine===void 0?rn.line:{column:rn.column,line:rn.line},rn.endLine===void 0?rn.column:{column:rn.endColumn,line:rn.endLine},rn.source,rn.file,Yr.plugin):Zr=new C$6(Vt,en===void 0?Hr:{column:Wr,line:Hr},en===void 0?Wr:{column:tn,line:en},this.css,this.file,Yr.plugin),Zr.input={column:Wr,endColumn:tn,endLine:en,line:Hr,source:this.css},this.file&&(a$b&&(Zr.input.url=a$b(this.file).toString()),Zr.input.file=this.file),Zr}fromOffset(Vt){let Hr,Wr;if(this[d$d])Wr=this[d$d];else{let Zr=this.css.split(`
`);Wr=new Array(Zr.length);let en=0;for(let tn=0,rn=Zr.length;tn<rn;tn++)Wr[tn]=en,en+=Zr[tn].length+1;this[d$d]=Wr}Hr=Wr[Wr.length-1];let Yr=0;if(Vt>=Hr)Yr=Wr.length-1;else{let Zr=Wr.length-2,en;for(;Yr<Zr;)if(en=Yr+(Zr-Yr>>1),Vt<Wr[en])Zr=en-1;else if(Vt>=Wr[en+1])Yr=en+1;else{Yr=en;break}}return{col:Vt-Wr[Yr]+1,line:Yr+1}}mapResolve(Vt){return/^\w+:\/\//.test(Vt)?Vt:S$6(this.map.consumer().sourceRoot||this.map.root||".",Vt)}origin(Vt,Hr,Wr,Yr){if(!this.map)return!1;let Zr=this.map.consumer(),en=Zr.originalPositionFor({column:Hr,line:Vt});if(!en.source)return!1;let tn;typeof Wr=="number"&&(tn=Zr.originalPositionFor({column:Yr,line:Wr}));let rn;g$5(en.source)?rn=a$b(en.source):rn=new URL(en.source,this.map.consumer().sourceRoot||a$b(this.map.mapFile));let nn={column:en.column,endColumn:tn&&tn.column,endLine:tn&&tn.line,line:en.line,url:rn.toString()};if(rn.protocol==="file:")if(v$6)nn.file=v$6(rn);else throw new Error("file: protocol is not available in this PostCSS build");let on=Zr.sourceContentFor(en.source);return on&&(nn.source=on),nn}toJSON(){let Vt={};for(let Hr of["hasBOM","css","file","id"])this[Hr]!=null&&(Vt[Hr]=this[Hr]);return this.map&&(Vt.map={...this.map},Vt.map.consumerCache&&(Vt.map.consumerCache=void 0)),Vt}get from(){return this.file||this.id}};var U$3=m$a;m$a.default=m$a;p$9&&p$9.registerInput&&p$9.registerInput(m$a);let{SourceMapConsumer:f$b,SourceMapGenerator:n$3}=o$B,{dirname:a$a,relative:g$4,resolve:d$c,sep:v$5}=o$B,{pathToFileURL:c$8}=o$B,U$2=U$3,O$9=!!(f$b&&n$3),S$5=!!(a$a&&d$c&&g$4&&v$5),C$5=class{constructor(Vt,Hr,Wr,Yr){this.stringify=Vt,this.mapOpts=Wr.map||{},this.root=Hr,this.opts=Wr,this.css=Yr,this.originalCSS=Yr,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let Vt;this.isInline()?Vt="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?Vt=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?Vt=this.mapOpts.annotation(this.opts.to,this.root):Vt=this.outputFile()+".map";let Hr=`
`;this.css.includes(`\r
`)&&(Hr=`\r
`),this.css+=Hr+"/*# sourceMappingURL="+Vt+" */"}applyPrevMaps(){for(let Vt of this.previous()){let Hr=this.toUrl(this.path(Vt.file)),Wr=Vt.root||a$a(Vt.file),Yr;this.mapOpts.sourcesContent===!1?(Yr=new f$b(Vt.text),Yr.sourcesContent&&(Yr.sourcesContent=Yr.sourcesContent.map(()=>null))):Yr=Vt.consumer(),this.map.applySourceMap(Yr,Hr,this.toUrl(this.path(Wr)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let Vt;for(let Hr=this.root.nodes.length-1;Hr>=0;Hr--)Vt=this.root.nodes[Hr],Vt.type==="comment"&&Vt.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(Hr)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),S$5&&O$9&&this.isMap())return this.generateMap();{let Vt="";return this.stringify(this.root,Hr=>{Vt+=Hr}),[Vt]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let Vt=this.previous()[0].consumer();Vt.file=this.outputFile(),this.map=n$3.fromSourceMap(Vt)}else this.map=new n$3({file:this.outputFile()}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new n$3({file:this.outputFile()});let Vt=1,Hr=1,Wr="<no source>",Yr={generated:{column:0,line:0},original:{column:0,line:0},source:""},Zr,en;this.stringify(this.root,(tn,rn,nn)=>{if(this.css+=tn,rn&&nn!=="end"&&(Yr.generated.line=Vt,Yr.generated.column=Hr-1,rn.source&&rn.source.start?(Yr.source=this.sourcePath(rn),Yr.original.line=rn.source.start.line,Yr.original.column=rn.source.start.column-1,this.map.addMapping(Yr)):(Yr.source=Wr,Yr.original.line=1,Yr.original.column=0,this.map.addMapping(Yr))),Zr=tn.match(/\n/g),Zr?(Vt+=Zr.length,en=tn.lastIndexOf(`
`),Hr=tn.length-en):Hr+=tn.length,rn&&nn!=="start"){let on=rn.parent||{raws:{}};(!(rn.type==="decl"||rn.type==="atrule"&&!rn.nodes)||rn!==on.last||on.raws.semicolon)&&(rn.source&&rn.source.end?(Yr.source=this.sourcePath(rn),Yr.original.line=rn.source.end.line,Yr.original.column=rn.source.end.column-1,Yr.generated.line=Vt,Yr.generated.column=Hr-2,this.map.addMapping(Yr)):(Yr.source=Wr,Yr.original.line=1,Yr.original.column=0,Yr.generated.line=Vt,Yr.generated.column=Hr-1,this.map.addMapping(Yr)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(Vt=>Vt.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let Vt=this.mapOpts.annotation;return typeof Vt<"u"&&Vt!==!0?!1:this.previous().length?this.previous().some(Hr=>Hr.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(Vt=>Vt.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(Vt){if(this.mapOpts.absolute||Vt.charCodeAt(0)===60||/^\w+:\/\//.test(Vt))return Vt;let Hr=this.memoizedPaths.get(Vt);if(Hr)return Hr;let Wr=this.opts.to?a$a(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(Wr=a$a(d$c(Wr,this.mapOpts.annotation)));let Yr=g$4(Wr,Vt);return this.memoizedPaths.set(Vt,Yr),Yr}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(Vt=>{if(Vt.source&&Vt.source.input.map){let Hr=Vt.source.input.map;this.previousMaps.includes(Hr)||this.previousMaps.push(Hr)}});else{let Vt=new U$2(this.originalCSS,this.opts);Vt.map&&this.previousMaps.push(Vt.map)}return this.previousMaps}setSourcesContent(){let Vt={};if(this.root)this.root.walk(Hr=>{if(Hr.source){let Wr=Hr.source.input.from;if(Wr&&!Vt[Wr]){Vt[Wr]=!0;let Yr=this.usesFileUrls?this.toFileUrl(Wr):this.toUrl(this.path(Wr));this.map.setSourceContent(Yr,Hr.source.input.css)}}});else if(this.css){let Hr=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(Hr,this.css)}}sourcePath(Vt){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(Vt.source.input.from):this.toUrl(this.path(Vt.source.input.from))}toBase64(Vt){return Buffer?Buffer.from(Vt).toString("base64"):window.btoa(unescape(encodeURIComponent(Vt)))}toFileUrl(Vt){let Hr=this.memoizedFileURLs.get(Vt);if(Hr)return Hr;if(c$8){let Wr=c$8(Vt).toString();return this.memoizedFileURLs.set(Vt,Wr),Wr}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(Vt){let Hr=this.memoizedURLs.get(Vt);if(Hr)return Hr;v$5==="\\"&&(Vt=Vt.replace(/\\/g,"/"));let Wr=encodeURI(Vt).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(Vt,Wr),Wr}};var b$5=C$5;let m$9=P$6,e$9=class extends m$9{constructor(Vt){super(Vt),this.type="comment"}};var r$6=e$9;e$9.default=e$9;let{isClean:y$4,my:h$6}=s$3,p$8=a$e,x$4=r$6,P$5=P$6,m$8,a$9,l$8,d$b;function O$8(Kt){return Kt.map(Vt=>(Vt.nodes&&(Vt.nodes=O$8(Vt.nodes)),delete Vt.source,Vt))}function w$8(Kt){if(Kt[y$4]=!1,Kt.proxyOf.nodes)for(let Vt of Kt.proxyOf.nodes)w$8(Vt)}let f$a=class bu extends P$5{append(...Vt){for(let Hr of Vt){let Wr=this.normalize(Hr,this.last);for(let Yr of Wr)this.proxyOf.nodes.push(Yr)}return this.markDirty(),this}cleanRaws(Vt){if(super.cleanRaws(Vt),this.nodes)for(let Hr of this.nodes)Hr.cleanRaws(Vt)}each(Vt){if(!this.proxyOf.nodes)return;let Hr=this.getIterator(),Wr,Yr;for(;this.indexes[Hr]<this.proxyOf.nodes.length&&(Wr=this.indexes[Hr],Yr=Vt(this.proxyOf.nodes[Wr],Wr),Yr!==!1);)this.indexes[Hr]+=1;return delete this.indexes[Hr],Yr}every(Vt){return this.nodes.every(Vt)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let Vt=this.lastEach;return this.indexes[Vt]=0,Vt}getProxyProcessor(){return{get(Vt,Hr){return Hr==="proxyOf"?Vt:Vt[Hr]?Hr==="each"||typeof Hr=="string"&&Hr.startsWith("walk")?(...Wr)=>Vt[Hr](...Wr.map(Yr=>typeof Yr=="function"?(Zr,en)=>Yr(Zr.toProxy(),en):Yr)):Hr==="every"||Hr==="some"?Wr=>Vt[Hr]((Yr,...Zr)=>Wr(Yr.toProxy(),...Zr)):Hr==="root"?()=>Vt.root().toProxy():Hr==="nodes"?Vt.nodes.map(Wr=>Wr.toProxy()):Hr==="first"||Hr==="last"?Vt[Hr].toProxy():Vt[Hr]:Vt[Hr]},set(Vt,Hr,Wr){return Vt[Hr]===Wr||(Vt[Hr]=Wr,(Hr==="name"||Hr==="params"||Hr==="selector")&&Vt.markDirty()),!0}}}index(Vt){return typeof Vt=="number"?Vt:(Vt.proxyOf&&(Vt=Vt.proxyOf),this.proxyOf.nodes.indexOf(Vt))}insertAfter(Vt,Hr){let Wr=this.index(Vt),Yr=this.normalize(Hr,this.proxyOf.nodes[Wr]).reverse();Wr=this.index(Vt);for(let en of Yr)this.proxyOf.nodes.splice(Wr+1,0,en);let Zr;for(let en in this.indexes)Zr=this.indexes[en],Wr<Zr&&(this.indexes[en]=Zr+Yr.length);return this.markDirty(),this}insertBefore(Vt,Hr){let Wr=this.index(Vt),Yr=Wr===0?"prepend":!1,Zr=this.normalize(Hr,this.proxyOf.nodes[Wr],Yr).reverse();Wr=this.index(Vt);for(let tn of Zr)this.proxyOf.nodes.splice(Wr,0,tn);let en;for(let tn in this.indexes)en=this.indexes[tn],Wr<=en&&(this.indexes[tn]=en+Zr.length);return this.markDirty(),this}normalize(Vt,Hr){if(typeof Vt=="string")Vt=O$8(m$8(Vt).nodes);else if(Array.isArray(Vt)){Vt=Vt.slice(0);for(let Wr of Vt)Wr.parent&&Wr.parent.removeChild(Wr,"ignore")}else if(Vt.type==="root"&&this.type!=="document"){Vt=Vt.nodes.slice(0);for(let Wr of Vt)Wr.parent&&Wr.parent.removeChild(Wr,"ignore")}else if(Vt.type)Vt=[Vt];else if(Vt.prop){if(typeof Vt.value>"u")throw new Error("Value field is missed in node creation");typeof Vt.value!="string"&&(Vt.value=String(Vt.value)),Vt=[new p$8(Vt)]}else if(Vt.selector)Vt=[new a$9(Vt)];else if(Vt.name)Vt=[new l$8(Vt)];else if(Vt.text)Vt=[new x$4(Vt)];else throw new Error("Unknown node type in node creation");return Vt.map(Wr=>(Wr[h$6]||bu.rebuild(Wr),Wr=Wr.proxyOf,Wr.parent&&Wr.parent.removeChild(Wr),Wr[y$4]&&w$8(Wr),typeof Wr.raws.before>"u"&&Hr&&typeof Hr.raws.before<"u"&&(Wr.raws.before=Hr.raws.before.replace(/\S/g,"")),Wr.parent=this.proxyOf,Wr))}prepend(...Vt){Vt=Vt.reverse();for(let Hr of Vt){let Wr=this.normalize(Hr,this.first,"prepend").reverse();for(let Yr of Wr)this.proxyOf.nodes.unshift(Yr);for(let Yr in this.indexes)this.indexes[Yr]=this.indexes[Yr]+Wr.length}return this.markDirty(),this}push(Vt){return Vt.parent=this,this.proxyOf.nodes.push(Vt),this}removeAll(){for(let Vt of this.proxyOf.nodes)Vt.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(Vt){Vt=this.index(Vt),this.proxyOf.nodes[Vt].parent=void 0,this.proxyOf.nodes.splice(Vt,1);let Hr;for(let Wr in this.indexes)Hr=this.indexes[Wr],Hr>=Vt&&(this.indexes[Wr]=Hr-1);return this.markDirty(),this}replaceValues(Vt,Hr,Wr){return Wr||(Wr=Hr,Hr={}),this.walkDecls(Yr=>{Hr.props&&!Hr.props.includes(Yr.prop)||Hr.fast&&!Yr.value.includes(Hr.fast)||(Yr.value=Yr.value.replace(Vt,Wr))}),this.markDirty(),this}some(Vt){return this.nodes.some(Vt)}walk(Vt){return this.each((Hr,Wr)=>{let Yr;try{Yr=Vt(Hr,Wr)}catch(Zr){throw Hr.addToError(Zr)}return Yr!==!1&&Hr.walk&&(Yr=Hr.walk(Vt)),Yr})}walkAtRules(Vt,Hr){return Hr?Vt instanceof RegExp?this.walk((Wr,Yr)=>{if(Wr.type==="atrule"&&Vt.test(Wr.name))return Hr(Wr,Yr)}):this.walk((Wr,Yr)=>{if(Wr.type==="atrule"&&Wr.name===Vt)return Hr(Wr,Yr)}):(Hr=Vt,this.walk((Wr,Yr)=>{if(Wr.type==="atrule")return Hr(Wr,Yr)}))}walkComments(Vt){return this.walk((Hr,Wr)=>{if(Hr.type==="comment")return Vt(Hr,Wr)})}walkDecls(Vt,Hr){return Hr?Vt instanceof RegExp?this.walk((Wr,Yr)=>{if(Wr.type==="decl"&&Vt.test(Wr.prop))return Hr(Wr,Yr)}):this.walk((Wr,Yr)=>{if(Wr.type==="decl"&&Wr.prop===Vt)return Hr(Wr,Yr)}):(Hr=Vt,this.walk((Wr,Yr)=>{if(Wr.type==="decl")return Hr(Wr,Yr)}))}walkRules(Vt,Hr){return Hr?Vt instanceof RegExp?this.walk((Wr,Yr)=>{if(Wr.type==="rule"&&Vt.test(Wr.selector))return Hr(Wr,Yr)}):this.walk((Wr,Yr)=>{if(Wr.type==="rule"&&Wr.selector===Vt)return Hr(Wr,Yr)}):(Hr=Vt,this.walk((Wr,Yr)=>{if(Wr.type==="rule")return Hr(Wr,Yr)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};f$a.registerParse=Kt=>{m$8=Kt};f$a.registerRule=Kt=>{a$9=Kt};f$a.registerAtRule=Kt=>{l$8=Kt};f$a.registerRoot=Kt=>{d$b=Kt};var z$4=f$a;f$a.default=f$a;f$a.rebuild=Kt=>{Kt.type==="atrule"?Object.setPrototypeOf(Kt,l$8.prototype):Kt.type==="rule"?Object.setPrototypeOf(Kt,a$9.prototype):Kt.type==="decl"?Object.setPrototypeOf(Kt,p$8.prototype):Kt.type==="comment"?Object.setPrototypeOf(Kt,x$4.prototype):Kt.type==="root"&&Object.setPrototypeOf(Kt,d$b.prototype),Kt[h$6]=!0,Kt.nodes&&Kt.nodes.forEach(Vt=>{f$a.rebuild(Vt)})};let a$8=z$4,r$5,o$9,e$8=class extends a$8{constructor(Vt){super({type:"document",...Vt}),this.nodes||(this.nodes=[])}toResult(Vt={}){return new r$5(new o$9,this,Vt).stringify()}};e$8.registerLazyResult=Kt=>{r$5=Kt};e$8.registerProcessor=Kt=>{o$9=Kt};var l$7=e$8;e$8.default=e$8;let i$3=class{constructor(Vt,Hr={}){if(this.type="warning",this.text=Vt,Hr.node&&Hr.node.source){let Wr=Hr.node.rangeBy(Hr);this.line=Wr.start.line,this.column=Wr.start.column,this.endLine=Wr.end.line,this.endColumn=Wr.end.column}for(let Wr in Hr)this[Wr]=Hr[Wr]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var s$2=i$3;i$3.default=i$3;let e$7=s$2,n$2=class{constructor(Vt,Hr,Wr){this.processor=Vt,this.messages=[],this.root=Hr,this.opts=Wr,this.css=void 0,this.map=void 0}toString(){return this.css}warn(Vt,Hr={}){Hr.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(Hr.plugin=this.lastPlugin.postcssPlugin);let Wr=new e$7(Vt,Hr);return this.messages.push(Wr),Wr}warnings(){return this.messages.filter(Vt=>Vt.type==="warning")}get content(){return this.css}};var l$6=n$2;n$2.default=n$2;const l$5=/[\t\n\f\r "#'()/;[\\\]{}]/g,d$a=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,B$7=/.[\r\n"'(/\\]/,u$8=/[\da-f]/i;var x$3=function(Kt,Vt={}){let Hr=Kt.css.valueOf(),Wr=Vt.ignoreErrors,Yr,Zr,en,tn,rn,nn,on,an,$n,ln,Hn=Hr.length,jn=0,zn=[],Wn=[];function ei(){return jn}function $i(ps){throw Kt.error("Unclosed "+ps,jn)}function Mi(){return Wn.length===0&&jn>=Hn}function Ni(ps){if(Wn.length)return Wn.pop();if(jn>=Hn)return;let $s=ps?ps.ignoreUnclosed:!1;switch(Yr=Hr.charCodeAt(jn),Yr){case 10:case 32:case 9:case 13:case 12:{Zr=jn;do Zr+=1,Yr=Hr.charCodeAt(Zr);while(Yr===32||Yr===10||Yr===9||Yr===13||Yr===12);ln=["space",Hr.slice(jn,Zr)],jn=Zr-1;break}case 91:case 93:case 123:case 125:case 58:case 59:case 41:{let Ws=String.fromCharCode(Yr);ln=[Ws,Ws,jn];break}case 40:{if(an=zn.length?zn.pop()[1]:"",$n=Hr.charCodeAt(jn+1),an==="url"&&$n!==39&&$n!==34&&$n!==32&&$n!==10&&$n!==9&&$n!==12&&$n!==13){Zr=jn;do{if(nn=!1,Zr=Hr.indexOf(")",Zr+1),Zr===-1)if(Wr||$s){Zr=jn;break}else $i("bracket");for(on=Zr;Hr.charCodeAt(on-1)===92;)on-=1,nn=!nn}while(nn);ln=["brackets",Hr.slice(jn,Zr+1),jn,Zr],jn=Zr}else Zr=Hr.indexOf(")",jn+1),tn=Hr.slice(jn,Zr+1),Zr===-1||B$7.test(tn)?ln=["(","(",jn]:(ln=["brackets",tn,jn,Zr],jn=Zr);break}case 39:case 34:{en=Yr===39?"'":'"',Zr=jn;do{if(nn=!1,Zr=Hr.indexOf(en,Zr+1),Zr===-1)if(Wr||$s){Zr=jn+1;break}else $i("string");for(on=Zr;Hr.charCodeAt(on-1)===92;)on-=1,nn=!nn}while(nn);ln=["string",Hr.slice(jn,Zr+1),jn,Zr],jn=Zr;break}case 64:{l$5.lastIndex=jn+1,l$5.test(Hr),l$5.lastIndex===0?Zr=Hr.length-1:Zr=l$5.lastIndex-2,ln=["at-word",Hr.slice(jn,Zr+1),jn,Zr],jn=Zr;break}case 92:{for(Zr=jn,rn=!0;Hr.charCodeAt(Zr+1)===92;)Zr+=1,rn=!rn;if(Yr=Hr.charCodeAt(Zr+1),rn&&Yr!==47&&Yr!==32&&Yr!==10&&Yr!==9&&Yr!==13&&Yr!==12&&(Zr+=1,u$8.test(Hr.charAt(Zr)))){for(;u$8.test(Hr.charAt(Zr+1));)Zr+=1;Hr.charCodeAt(Zr+1)===32&&(Zr+=1)}ln=["word",Hr.slice(jn,Zr+1),jn,Zr],jn=Zr;break}default:{Yr===47&&Hr.charCodeAt(jn+1)===42?(Zr=Hr.indexOf("*/",jn+2)+1,Zr===0&&(Wr||$s?Zr=Hr.length:$i("comment")),ln=["comment",Hr.slice(jn,Zr+1),jn,Zr],jn=Zr):(d$a.lastIndex=jn+1,d$a.test(Hr),d$a.lastIndex===0?Zr=Hr.length-1:Zr=d$a.lastIndex-2,ln=["word",Hr.slice(jn,Zr+1),jn,Zr],zn.push(ln),jn=Zr);break}}return jn++,ln}function Ts(ps){Wn.push(ps)}return{back:Ts,endOfFile:Mi,nextToken:Ni,position:ei}};let t$2=z$4,r$4=class extends t$2{constructor(Vt){super(Vt),this.type="atrule"}append(...Vt){return this.proxyOf.nodes||(this.nodes=[]),super.append(...Vt)}prepend(...Vt){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...Vt)}};var o$8=r$4;r$4.default=r$4;t$2.registerAtRule(r$4);let n$1=z$4,f$9,l$4,s$1=class extends n$1{constructor(Vt){super(Vt),this.type="root",this.nodes||(this.nodes=[])}normalize(Vt,Hr,Wr){let Yr=super.normalize(Vt);if(Hr){if(Wr==="prepend")this.nodes.length>1?Hr.raws.before=this.nodes[1].raws.before:delete Hr.raws.before;else if(this.first!==Hr)for(let Zr of Yr)Zr.raws.before=Hr.raws.before}return Yr}removeChild(Vt,Hr){let Wr=this.index(Vt);return!Hr&&Wr===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[Wr].raws.before),super.removeChild(Vt)}toResult(Vt={}){return new f$9(new l$4,this,Vt).stringify()}};s$1.registerLazyResult=Kt=>{f$9=Kt};s$1.registerProcessor=Kt=>{l$4=Kt};var u$7=s$1;s$1.default=s$1;n$1.registerRoot(s$1);let s={comma(Kt){return s.split(Kt,[","],!0)},space(Kt){let Vt=[" ",`
`,"	"];return s.split(Kt,Vt)},split(Kt,Vt,Hr){let Wr=[],Yr="",Zr=!1,en=0,tn=!1,rn="",nn=!1;for(let on of Kt)nn?nn=!1:on==="\\"?nn=!0:tn?on===rn&&(tn=!1):on==='"'||on==="'"?(tn=!0,rn=on):on==="("?en+=1:on===")"?en>0&&(en-=1):en===0&&Vt.includes(on)&&(Zr=!0),Zr?(Yr!==""&&Wr.push(Yr.trim()),Yr="",Zr=!1):Yr+=on;return(Hr||Yr!=="")&&Wr.push(Yr.trim()),Wr}};var o$7=s;s.default=s;let r$3=z$4,c$7=o$7,e$6=class extends r$3{constructor(Vt){super(Vt),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return c$7.comma(this.selector)}set selectors(Vt){let Hr=this.selector?this.selector.match(/,\s*/):null,Wr=Hr?Hr[0]:","+this.raw("between","beforeOpen");this.selector=Vt.join(Wr)}};var u$6=e$6;e$6.default=e$6;r$3.registerRule(e$6);let C$4=a$e,P$4=x$3,S$4=r$6,A$4=o$8,T$6=u$7,m$7=u$6;const d$9={empty:!0,space:!0};function O$7(Kt){for(let Vt=Kt.length-1;Vt>=0;Vt--){let Hr=Kt[Vt],Wr=Hr[3]||Hr[2];if(Wr)return Wr}}let v$4=class{constructor(Vt){this.input=Vt,this.root=new T$6,this.current=this.root,this.spaces="",this.semicolon=!1,this.customProperty=!1,this.createTokenizer(),this.root.source={input:Vt,start:{column:1,line:1,offset:0}}}atrule(Vt){let Hr=new A$4;Hr.name=Vt[1].slice(1),Hr.name===""&&this.unnamedAtrule(Hr,Vt),this.init(Hr,Vt[2]);let Wr,Yr,Zr,en=!1,tn=!1,rn=[],nn=[];for(;!this.tokenizer.endOfFile();){if(Vt=this.tokenizer.nextToken(),Wr=Vt[0],Wr==="("||Wr==="["?nn.push(Wr==="("?")":"]"):Wr==="{"&&nn.length>0?nn.push("}"):Wr===nn[nn.length-1]&&nn.pop(),nn.length===0)if(Wr===";"){Hr.source.end=this.getPosition(Vt[2]),Hr.source.end.offset++,this.semicolon=!0;break}else if(Wr==="{"){tn=!0;break}else if(Wr==="}"){if(rn.length>0){for(Zr=rn.length-1,Yr=rn[Zr];Yr&&Yr[0]==="space";)Yr=rn[--Zr];Yr&&(Hr.source.end=this.getPosition(Yr[3]||Yr[2]),Hr.source.end.offset++)}this.end(Vt);break}else rn.push(Vt);else rn.push(Vt);if(this.tokenizer.endOfFile()){en=!0;break}}Hr.raws.between=this.spacesAndCommentsFromEnd(rn),rn.length?(Hr.raws.afterName=this.spacesAndCommentsFromStart(rn),this.raw(Hr,"params",rn),en&&(Vt=rn[rn.length-1],Hr.source.end=this.getPosition(Vt[3]||Vt[2]),Hr.source.end.offset++,this.spaces=Hr.raws.between,Hr.raws.between="")):(Hr.raws.afterName="",Hr.params=""),tn&&(Hr.nodes=[],this.current=Hr)}checkMissedSemicolon(Vt){let Hr=this.colon(Vt);if(Hr===!1)return;let Wr=0,Yr;for(let Zr=Hr-1;Zr>=0&&(Yr=Vt[Zr],!(Yr[0]!=="space"&&(Wr+=1,Wr===2)));Zr--);throw this.input.error("Missed semicolon",Yr[0]==="word"?Yr[3]+1:Yr[2])}colon(Vt){let Hr=0,Wr,Yr,Zr;for(let[en,tn]of Vt.entries()){if(Wr=tn,Yr=Wr[0],Yr==="("&&(Hr+=1),Yr===")"&&(Hr-=1),Hr===0&&Yr===":")if(!Zr)this.doubleColon(Wr);else{if(Zr[0]==="word"&&Zr[1]==="progid")continue;return en}Zr=Wr}return!1}comment(Vt){let Hr=new S$4;this.init(Hr,Vt[2]),Hr.source.end=this.getPosition(Vt[3]||Vt[2]),Hr.source.end.offset++;let Wr=Vt[1].slice(2,-2);if(/^\s*$/.test(Wr))Hr.text="",Hr.raws.left=Wr,Hr.raws.right="";else{let Yr=Wr.match(/^(\s*)([^]*\S)(\s*)$/);Hr.text=Yr[2],Hr.raws.left=Yr[1],Hr.raws.right=Yr[3]}}createTokenizer(){this.tokenizer=P$4(this.input)}decl(Vt,Hr){let Wr=new C$4;this.init(Wr,Vt[0][2]);let Yr=Vt[Vt.length-1];for(Yr[0]===";"&&(this.semicolon=!0,Vt.pop()),Wr.source.end=this.getPosition(Yr[3]||Yr[2]||O$7(Vt)),Wr.source.end.offset++;Vt[0][0]!=="word";)Vt.length===1&&this.unknownWord(Vt),Wr.raws.before+=Vt.shift()[1];for(Wr.source.start=this.getPosition(Vt[0][2]),Wr.prop="";Vt.length;){let rn=Vt[0][0];if(rn===":"||rn==="space"||rn==="comment")break;Wr.prop+=Vt.shift()[1]}Wr.raws.between="";let Zr;for(;Vt.length;)if(Zr=Vt.shift(),Zr[0]===":"){Wr.raws.between+=Zr[1];break}else Zr[0]==="word"&&/\w/.test(Zr[1])&&this.unknownWord([Zr]),Wr.raws.between+=Zr[1];(Wr.prop[0]==="_"||Wr.prop[0]==="*")&&(Wr.raws.before+=Wr.prop[0],Wr.prop=Wr.prop.slice(1));let en=[],tn;for(;Vt.length&&(tn=Vt[0][0],!(tn!=="space"&&tn!=="comment"));)en.push(Vt.shift());this.precheckMissedSemicolon(Vt);for(let rn=Vt.length-1;rn>=0;rn--){if(Zr=Vt[rn],Zr[1].toLowerCase()==="!important"){Wr.important=!0;let nn=this.stringFrom(Vt,rn);nn=this.spacesFromEnd(Vt)+nn,nn!==" !important"&&(Wr.raws.important=nn);break}else if(Zr[1].toLowerCase()==="important"){let nn=Vt.slice(0),on="";for(let an=rn;an>0;an--){let $n=nn[an][0];if(on.trim().indexOf("!")===0&&$n!=="space")break;on=nn.pop()[1]+on}on.trim().indexOf("!")===0&&(Wr.important=!0,Wr.raws.important=on,Vt=nn)}if(Zr[0]!=="space"&&Zr[0]!=="comment")break}Vt.some(rn=>rn[0]!=="space"&&rn[0]!=="comment")&&(Wr.raws.between+=en.map(rn=>rn[1]).join(""),en=[]),this.raw(Wr,"value",en.concat(Vt),Hr),Wr.value.includes(":")&&!Hr&&this.checkMissedSemicolon(Vt)}doubleColon(Vt){throw this.input.error("Double colon",{offset:Vt[2]},{offset:Vt[2]+Vt[1].length})}emptyRule(Vt){let Hr=new m$7;this.init(Hr,Vt[2]),Hr.selector="",Hr.raws.between="",this.current=Hr}end(Vt){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(Vt[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(Vt)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(Vt){if(this.spaces+=Vt[1],this.current.nodes){let Hr=this.current.nodes[this.current.nodes.length-1];Hr&&Hr.type==="rule"&&!Hr.raws.ownSemicolon&&(Hr.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(Vt){let Hr=this.input.fromOffset(Vt);return{column:Hr.col,line:Hr.line,offset:Vt}}init(Vt,Hr){this.current.push(Vt),Vt.source={input:this.input,start:this.getPosition(Hr)},Vt.raws.before=this.spaces,this.spaces="",Vt.type!=="comment"&&(this.semicolon=!1)}other(Vt){let Hr=!1,Wr=null,Yr=!1,Zr=null,en=[],tn=Vt[1].startsWith("--"),rn=[],nn=Vt;for(;nn;){if(Wr=nn[0],rn.push(nn),Wr==="("||Wr==="[")Zr||(Zr=nn),en.push(Wr==="("?")":"]");else if(tn&&Yr&&Wr==="{")Zr||(Zr=nn),en.push("}");else if(en.length===0)if(Wr===";")if(Yr){this.decl(rn,tn);return}else break;else if(Wr==="{"){this.rule(rn);return}else if(Wr==="}"){this.tokenizer.back(rn.pop()),Hr=!0;break}else Wr===":"&&(Yr=!0);else Wr===en[en.length-1]&&(en.pop(),en.length===0&&(Zr=null));nn=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(Hr=!0),en.length>0&&this.unclosedBracket(Zr),Hr&&Yr){if(!tn)for(;rn.length&&(nn=rn[rn.length-1][0],!(nn!=="space"&&nn!=="comment"));)this.tokenizer.back(rn.pop());this.decl(rn,tn)}else this.unknownWord(rn)}parse(){let Vt;for(;!this.tokenizer.endOfFile();)switch(Vt=this.tokenizer.nextToken(),Vt[0]){case"space":this.spaces+=Vt[1];break;case";":this.freeSemicolon(Vt);break;case"}":this.end(Vt);break;case"comment":this.comment(Vt);break;case"at-word":this.atrule(Vt);break;case"{":this.emptyRule(Vt);break;default:this.other(Vt);break}this.endFile()}precheckMissedSemicolon(){}raw(Vt,Hr,Wr,Yr){let Zr,en,tn=Wr.length,rn="",nn=!0,on,an;for(let $n=0;$n<tn;$n+=1)Zr=Wr[$n],en=Zr[0],en==="space"&&$n===tn-1&&!Yr?nn=!1:en==="comment"?(an=Wr[$n-1]?Wr[$n-1][0]:"empty",on=Wr[$n+1]?Wr[$n+1][0]:"empty",!d$9[an]&&!d$9[on]?rn.slice(-1)===","?nn=!1:rn+=Zr[1]:nn=!1):rn+=Zr[1];if(!nn){let $n=Wr.reduce((ln,Hn)=>ln+Hn[1],"");Vt.raws[Hr]={raw:$n,value:rn}}Vt[Hr]=rn}rule(Vt){Vt.pop();let Hr=new m$7;this.init(Hr,Vt[0][2]),Hr.raws.between=this.spacesAndCommentsFromEnd(Vt),this.raw(Hr,"selector",Vt),this.current=Hr}spacesAndCommentsFromEnd(Vt){let Hr,Wr="";for(;Vt.length&&(Hr=Vt[Vt.length-1][0],!(Hr!=="space"&&Hr!=="comment"));)Wr=Vt.pop()[1]+Wr;return Wr}spacesAndCommentsFromStart(Vt){let Hr,Wr="";for(;Vt.length&&(Hr=Vt[0][0],!(Hr!=="space"&&Hr!=="comment"));)Wr+=Vt.shift()[1];return Wr}spacesFromEnd(Vt){let Hr,Wr="";for(;Vt.length&&(Hr=Vt[Vt.length-1][0],Hr==="space");)Wr=Vt.pop()[1]+Wr;return Wr}stringFrom(Vt,Hr){let Wr="";for(let Yr=Hr;Yr<Vt.length;Yr++)Wr+=Vt[Yr][1];return Vt.splice(Hr,Vt.length-Hr),Wr}unclosedBlock(){let Vt=this.current.source.start;throw this.input.error("Unclosed block",Vt.line,Vt.column)}unclosedBracket(Vt){throw this.input.error("Unclosed bracket",{offset:Vt[2]},{offset:Vt[2]+1})}unexpectedClose(Vt){throw this.input.error("Unexpected }",{offset:Vt[2]},{offset:Vt[2]+1})}unknownWord(Vt){throw this.input.error("Unknown word",{offset:Vt[0][2]},{offset:Vt[0][2]+Vt[0][1].length})}unnamedAtrule(Vt,Hr){throw this.input.error("At-rule without name",{offset:Hr[2]},{offset:Hr[2]+Hr[1].length})}};var U$1=v$4;let f$8=z$4,h$5=U$1,m$6=U$3;function e$5(Kt,Vt){let Hr=new m$6(Kt,Vt),Wr=new h$5(Hr);try{Wr.parse()}catch(Yr){throw Yr}return Wr.root}var l$3=e$5;e$5.default=e$5;f$8.registerParse(e$5);let{isClean:l$2,my:C$3}=s$3,b$4=b$5,A$3=g$7,D$5=z$4,L$3=l$7,m$5=l$6,_$4=l$3,k$6=u$7;const N$5={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},T$5={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},j$7={Once:!0,postcssPlugin:!0,prepare:!0},a$7=0;function f$7(Kt){return typeof Kt=="object"&&typeof Kt.then=="function"}function d$8(Kt){let Vt=!1,Hr=N$5[Kt.type];return Kt.type==="decl"?Vt=Kt.prop.toLowerCase():Kt.type==="atrule"&&(Vt=Kt.name.toLowerCase()),Vt&&Kt.append?[Hr,Hr+"-"+Vt,a$7,Hr+"Exit",Hr+"Exit-"+Vt]:Vt?[Hr,Hr+"-"+Vt,Hr+"Exit",Hr+"Exit-"+Vt]:Kt.append?[Hr,a$7,Hr+"Exit"]:[Hr,Hr+"Exit"]}function g$3(Kt){let Vt;return Kt.type==="document"?Vt=["Document",a$7,"DocumentExit"]:Kt.type==="root"?Vt=["Root",a$7,"RootExit"]:Vt=d$8(Kt),{eventIndex:0,events:Vt,iterator:0,node:Kt,visitorIndex:0,visitors:[]}}function c$6(Kt){return Kt[l$2]=!1,Kt.nodes&&Kt.nodes.forEach(Vt=>c$6(Vt)),Kt}let y$3={},u$5=class xu{constructor(Vt,Hr,Wr){this.stringified=!1,this.processed=!1;let Yr;if(typeof Hr=="object"&&Hr!==null&&(Hr.type==="root"||Hr.type==="document"))Yr=c$6(Hr);else if(Hr instanceof xu||Hr instanceof m$5)Yr=c$6(Hr.root),Hr.map&&(typeof Wr.map>"u"&&(Wr.map={}),Wr.map.inline||(Wr.map.inline=!1),Wr.map.prev=Hr.map);else{let Zr=_$4;Wr.syntax&&(Zr=Wr.syntax.parse),Wr.parser&&(Zr=Wr.parser),Zr.parse&&(Zr=Zr.parse);try{Yr=Zr(Hr,Wr)}catch(en){this.processed=!0,this.error=en}Yr&&!Yr[C$3]&&D$5.rebuild(Yr)}this.result=new m$5(Vt,Yr,Wr),this.helpers={...y$3,postcss:y$3,result:this.result},this.plugins=this.processor.plugins.map(Zr=>typeof Zr=="object"&&Zr.prepare?{...Zr,...Zr.prepare(this.result)}:Zr)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(Vt){return this.async().catch(Vt)}finally(Vt){return this.async().then(Vt,Vt)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(Vt,Hr){let Wr=this.result.lastPlugin;try{Hr&&Hr.addToError(Vt),this.error=Vt,Vt.name==="CssSyntaxError"&&!Vt.plugin?(Vt.plugin=Wr.postcssPlugin,Vt.setMessage()):Wr.postcssVersion}catch(Yr){console&&console.error&&console.error(Yr)}return Vt}prepareVisitors(){this.listeners={};let Vt=(Hr,Wr,Yr)=>{this.listeners[Wr]||(this.listeners[Wr]=[]),this.listeners[Wr].push([Hr,Yr])};for(let Hr of this.plugins)if(typeof Hr=="object")for(let Wr in Hr){if(!T$5[Wr]&&/^[A-Z]/.test(Wr))throw new Error(`Unknown event ${Wr} in ${Hr.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!j$7[Wr])if(typeof Hr[Wr]=="object")for(let Yr in Hr[Wr])Yr==="*"?Vt(Hr,Wr,Hr[Wr][Yr]):Vt(Hr,Wr+"-"+Yr.toLowerCase(),Hr[Wr][Yr]);else typeof Hr[Wr]=="function"&&Vt(Hr,Wr,Hr[Wr])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let Vt=0;Vt<this.plugins.length;Vt++){let Hr=this.plugins[Vt],Wr=this.runOnRoot(Hr);if(f$7(Wr))try{await Wr}catch(Yr){throw this.handleError(Yr)}}if(this.prepareVisitors(),this.hasListener){let Vt=this.result.root;for(;!Vt[l$2];){Vt[l$2]=!0;let Hr=[g$3(Vt)];for(;Hr.length>0;){let Wr=this.visitTick(Hr);if(f$7(Wr))try{await Wr}catch(Yr){let Zr=Hr[Hr.length-1].node;throw this.handleError(Yr,Zr)}}}if(this.listeners.OnceExit)for(let[Hr,Wr]of this.listeners.OnceExit){this.result.lastPlugin=Hr;try{if(Vt.type==="document"){let Yr=Vt.nodes.map(Zr=>Wr(Zr,this.helpers));await Promise.all(Yr)}else await Wr(Vt,this.helpers)}catch(Yr){throw this.handleError(Yr)}}}return this.processed=!0,this.stringify()}runOnRoot(Vt){this.result.lastPlugin=Vt;try{if(typeof Vt=="object"&&Vt.Once){if(this.result.root.type==="document"){let Hr=this.result.root.nodes.map(Wr=>Vt.Once(Wr,this.helpers));return f$7(Hr[0])?Promise.all(Hr):Hr}return Vt.Once(this.result.root,this.helpers)}else if(typeof Vt=="function")return Vt(this.result.root,this.result)}catch(Hr){throw this.handleError(Hr)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let Vt=this.result.opts,Hr=A$3;Vt.syntax&&(Hr=Vt.syntax.stringify),Vt.stringifier&&(Hr=Vt.stringifier),Hr.stringify&&(Hr=Hr.stringify);let Wr=new b$4(Hr,this.result.root,this.result.opts).generate();return this.result.css=Wr[0],this.result.map=Wr[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let Vt of this.plugins){let Hr=this.runOnRoot(Vt);if(f$7(Hr))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let Vt=this.result.root;for(;!Vt[l$2];)Vt[l$2]=!0,this.walkSync(Vt);if(this.listeners.OnceExit)if(Vt.type==="document")for(let Hr of Vt.nodes)this.visitSync(this.listeners.OnceExit,Hr);else this.visitSync(this.listeners.OnceExit,Vt)}return this.result}then(Vt,Hr){return this.async().then(Vt,Hr)}toString(){return this.css}visitSync(Vt,Hr){for(let[Wr,Yr]of Vt){this.result.lastPlugin=Wr;let Zr;try{Zr=Yr(Hr,this.helpers)}catch(en){throw this.handleError(en,Hr.proxyOf)}if(Hr.type!=="root"&&Hr.type!=="document"&&!Hr.parent)return!0;if(f$7(Zr))throw this.getAsyncError()}}visitTick(Vt){let Hr=Vt[Vt.length-1],{node:Wr,visitors:Yr}=Hr;if(Wr.type!=="root"&&Wr.type!=="document"&&!Wr.parent){Vt.pop();return}if(Yr.length>0&&Hr.visitorIndex<Yr.length){let[en,tn]=Yr[Hr.visitorIndex];Hr.visitorIndex+=1,Hr.visitorIndex===Yr.length&&(Hr.visitors=[],Hr.visitorIndex=0),this.result.lastPlugin=en;try{return tn(Wr.toProxy(),this.helpers)}catch(rn){throw this.handleError(rn,Wr)}}if(Hr.iterator!==0){let en=Hr.iterator,tn;for(;tn=Wr.nodes[Wr.indexes[en]];)if(Wr.indexes[en]+=1,!tn[l$2]){tn[l$2]=!0,Vt.push(g$3(tn));return}Hr.iterator=0,delete Wr.indexes[en]}let Zr=Hr.events;for(;Hr.eventIndex<Zr.length;){let en=Zr[Hr.eventIndex];if(Hr.eventIndex+=1,en===a$7){Wr.nodes&&Wr.nodes.length&&(Wr[l$2]=!0,Hr.iterator=Wr.getIterator());return}else if(this.listeners[en]){Hr.visitors=this.listeners[en];return}}Vt.pop()}walkSync(Vt){Vt[l$2]=!0;let Hr=d$8(Vt);for(let Wr of Hr)if(Wr===a$7)Vt.nodes&&Vt.each(Yr=>{Yr[l$2]||this.walkSync(Yr)});else{let Yr=this.listeners[Wr];if(Yr&&this.visitSync(Yr,Vt.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};u$5.registerPostcss=Kt=>{y$3=Kt};var q$4=u$5;u$5.default=u$5;k$6.registerLazyResult(u$5);L$3.registerLazyResult(u$5);let m$4=b$5,_$3=g$7,w$7=l$3;const S$3=l$6;let o$6=class{constructor(Vt,Hr,Wr){Hr=Hr.toString(),this.stringified=!1,this._processor=Vt,this._css=Hr,this._opts=Wr,this._map=void 0;let Yr,Zr=_$3;this.result=new S$3(this._processor,Yr,this._opts),this.result.css=Hr;let en=this;Object.defineProperty(this.result,"root",{get(){return en.root}});let tn=new m$4(Zr,Yr,this._opts,Hr);if(tn.isMap()){let[rn,nn]=tn.generate();rn&&(this.result.css=rn),nn&&(this.result.map=nn)}else tn.clearAnnotation(),this.result.css=tn.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(Vt){return this.async().catch(Vt)}finally(Vt){return this.async().then(Vt,Vt)}sync(){if(this.error)throw this.error;return this.result}then(Vt,Hr){return this.async().then(Vt,Hr)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let Vt,Hr=w$7;try{Vt=Hr(this._css,this._opts)}catch(Wr){this.error=Wr}if(this.error)throw this.error;return this._root=Vt,Vt}get[Symbol.toStringTag](){return"NoWorkResult"}};var W$5=o$6;o$6.default=o$6;let u$4=W$5,a$6=q$4,p$7=l$7,c$5=u$7,t$1=class{constructor(Vt=[]){this.version="8.4.33",this.plugins=this.normalize(Vt)}normalize(Vt){let Hr=[];for(let Wr of Vt)if(Wr.postcss===!0?Wr=Wr():Wr.postcss&&(Wr=Wr.postcss),typeof Wr=="object"&&Array.isArray(Wr.plugins))Hr=Hr.concat(Wr.plugins);else if(typeof Wr=="object"&&Wr.postcssPlugin)Hr.push(Wr);else if(typeof Wr=="function")Hr.push(Wr);else if(!(typeof Wr=="object"&&(Wr.parse||Wr.stringify)))throw new Error(Wr+" is not a PostCSS plugin");return Hr}process(Vt,Hr={}){return!this.plugins.length&&!Hr.parser&&!Hr.stringifier&&!Hr.syntax?new u$4(this,Vt,Hr):new a$6(this,Vt,Hr)}use(Vt){return this.plugins=this.plugins.concat(this.normalize([Vt])),this}};var d$7=t$1;t$1.default=t$1;c$5.registerProcessor(t$1);p$7.registerProcessor(t$1);let d$6=a$e,y$2=M$8,w$6=r$6,_$2=o$8,R$3=U$3,v$3=u$7,A$2=u$6;function p$6(Kt,Vt){if(Array.isArray(Kt))return Kt.map(Yr=>p$6(Yr));let{inputs:Hr,...Wr}=Kt;if(Hr){Vt=[];for(let Yr of Hr){let Zr={...Yr,__proto__:R$3.prototype};Zr.map&&(Zr.map={...Zr.map,__proto__:y$2.prototype}),Vt.push(Zr)}}if(Wr.nodes&&(Wr.nodes=Kt.nodes.map(Yr=>p$6(Yr,Vt))),Wr.source){let{inputId:Yr,...Zr}=Wr.source;Wr.source=Zr,Yr!=null&&(Wr.source.input=Vt[Yr])}if(Wr.type==="root")return new v$3(Wr);if(Wr.type==="decl")return new d$6(Wr);if(Wr.type==="rule")return new A$2(Wr);if(Wr.type==="comment")return new w$6(Wr);if(Wr.type==="atrule")return new _$2(Wr);throw new Error("Unknown node type: "+Kt.type)}var k$5=p$6;p$6.default=p$6;var define_process_env_default={};let G$4=C$7,m$3=a$e,I$3=q$4,b$3=z$4,a$5=d$7,j$6=g$7,M$6=k$5,c$4=l$7,V$4=s$2,p$5=r$6,f$6=o$8,k$4=l$6,q$3=U$3,B$6=l$3,F$4=o$7,u$3=u$6,w$5=u$7,H$6=P$6;function r$2(...Kt){return Kt.length===1&&Array.isArray(Kt[0])&&(Kt=Kt[0]),new a$5(Kt)}r$2.plugin=function(Kt,Vt){let Hr=!1;function Wr(...Zr){console&&console.warn&&!Hr&&(Hr=!0,console.warn(Kt+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),define_process_env_default.LANG&&define_process_env_default.LANG.startsWith("cn")&&console.warn(Kt+`:  postcss.plugin . :
https://www.w3ctech.com/topic/2226`));let en=Vt(...Zr);return en.postcssPlugin=Kt,en.postcssVersion=new a$5().version,en}let Yr;return Object.defineProperty(Wr,"postcss",{get(){return Yr||(Yr=Wr()),Yr}}),Wr.process=function(Zr,en,tn){return r$2([Wr(tn)]).process(Zr,en)},Wr};r$2.stringify=j$6;r$2.parse=B$6;r$2.fromJSON=M$6;r$2.list=F$4;r$2.comment=Kt=>new p$5(Kt);r$2.atRule=Kt=>new f$6(Kt);r$2.decl=Kt=>new m$3(Kt);r$2.rule=Kt=>new u$3(Kt);r$2.root=Kt=>new w$5(Kt);r$2.document=Kt=>new c$4(Kt);r$2.CssSyntaxError=G$4;r$2.Declaration=m$3;r$2.Container=b$3;r$2.Processor=a$5;r$2.Document=c$4;r$2.Comment=p$5;r$2.Warning=V$4;r$2.AtRule=f$6;r$2.Result=k$4;r$2.Input=q$3;r$2.Rule=u$3;r$2.Root=w$5;r$2.Node=H$6;I$3.registerPostcss(r$2);r$2.default=r$2;function qr(Kt){return Kt&&Kt.__esModule&&Object.prototype.hasOwnProperty.call(Kt,"default")?Kt.default:Kt}var Ui={exports:{}};(function(Kt,Vt){(function(Hr){var Wr=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,Yr=/^(?=([^\/?#]*))\1([^]*)$/,Zr=/(?:\/|^)\.(?=\/)/g,en=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,tn={buildAbsoluteURL:function(rn,nn,on){if(on=on||{},rn=rn.trim(),nn=nn.trim(),!nn){if(!on.alwaysNormalize)return rn;var an=tn.parseURL(rn);if(!an)throw new Error("Error trying to parse base URL.");return an.path=tn.normalizePath(an.path),tn.buildURLFromParts(an)}var $n=tn.parseURL(nn);if(!$n)throw new Error("Error trying to parse relative URL.");if($n.scheme)return on.alwaysNormalize?($n.path=tn.normalizePath($n.path),tn.buildURLFromParts($n)):nn;var ln=tn.parseURL(rn);if(!ln)throw new Error("Error trying to parse base URL.");if(!ln.netLoc&&ln.path&&ln.path[0]!=="/"){var Hn=Yr.exec(ln.path);ln.netLoc=Hn[1],ln.path=Hn[2]}ln.netLoc&&!ln.path&&(ln.path="/");var jn={scheme:ln.scheme,netLoc:$n.netLoc,path:null,params:$n.params,query:$n.query,fragment:$n.fragment};if(!$n.netLoc&&(jn.netLoc=ln.netLoc,$n.path[0]!=="/"))if(!$n.path)jn.path=ln.path,$n.params||(jn.params=ln.params,$n.query||(jn.query=ln.query));else{var zn=ln.path,Wn=zn.substring(0,zn.lastIndexOf("/")+1)+$n.path;jn.path=tn.normalizePath(Wn)}return jn.path===null&&(jn.path=on.alwaysNormalize?tn.normalizePath($n.path):$n.path),tn.buildURLFromParts(jn)},parseURL:function(rn){var nn=Wr.exec(rn);return nn?{scheme:nn[1]||"",netLoc:nn[2]||"",path:nn[3]||"",params:nn[4]||"",query:nn[5]||"",fragment:nn[6]||""}:null},normalizePath:function(rn){for(rn=rn.split("").reverse().join("").replace(Zr,"");rn.length!==(rn=rn.replace(en,"")).length;);return rn.split("").reverse().join("")},buildURLFromParts:function(rn){return rn.scheme+rn.netLoc+rn.path+rn.params+rn.query+rn.fragment}};Kt.exports=tn})()})(Ui);function Os(Kt,Vt){var Hr=Object.keys(Kt);if(Object.getOwnPropertySymbols){var Wr=Object.getOwnPropertySymbols(Kt);Vt&&(Wr=Wr.filter(function(Yr){return Object.getOwnPropertyDescriptor(Kt,Yr).enumerable})),Hr.push.apply(Hr,Wr)}return Hr}function oe$2(Kt){for(var Vt=1;Vt<arguments.length;Vt++){var Hr=arguments[Vt]!=null?arguments[Vt]:{};Vt%2?Os(Object(Hr),!0).forEach(function(Wr){Xr(Kt,Wr,Hr[Wr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Kt,Object.getOwnPropertyDescriptors(Hr)):Os(Object(Hr)).forEach(function(Wr){Object.defineProperty(Kt,Wr,Object.getOwnPropertyDescriptor(Hr,Wr))})}return Kt}function jr(Kt,Vt){if(typeof Kt!="object"||!Kt)return Kt;var Hr=Kt[Symbol.toPrimitive];if(Hr!==void 0){var Wr=Hr.call(Kt,Vt||"default");if(typeof Wr!="object")return Wr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Vt==="string"?String:Number)(Kt)}function zr(Kt){var Vt=jr(Kt,"string");return typeof Vt=="symbol"?Vt:String(Vt)}function Xr(Kt,Vt,Hr){return Vt=zr(Vt),Vt in Kt?Object.defineProperty(Kt,Vt,{value:Hr,enumerable:!0,configurable:!0,writable:!0}):Kt[Vt]=Hr,Kt}function se$2(){return se$2=Object.assign?Object.assign.bind():function(Kt){for(var Vt=1;Vt<arguments.length;Vt++){var Hr=arguments[Vt];for(var Wr in Hr)Object.prototype.hasOwnProperty.call(Hr,Wr)&&(Kt[Wr]=Hr[Wr])}return Kt},se$2.apply(this,arguments)}const O$6=Number.isFinite||function(Kt){return typeof Kt=="number"&&isFinite(Kt)},Qr=Number.isSafeInteger||function(Kt){return typeof Kt=="number"&&Math.abs(Kt)<=Jr},Jr=Number.MAX_SAFE_INTEGER||9007199254740991;let m$2=function(Kt){return Kt.MEDIA_ATTACHING="hlsMediaAttaching",Kt.MEDIA_ATTACHED="hlsMediaAttached",Kt.MEDIA_DETACHING="hlsMediaDetaching",Kt.MEDIA_DETACHED="hlsMediaDetached",Kt.BUFFER_RESET="hlsBufferReset",Kt.BUFFER_CODECS="hlsBufferCodecs",Kt.BUFFER_CREATED="hlsBufferCreated",Kt.BUFFER_APPENDING="hlsBufferAppending",Kt.BUFFER_APPENDED="hlsBufferAppended",Kt.BUFFER_EOS="hlsBufferEos",Kt.BUFFER_FLUSHING="hlsBufferFlushing",Kt.BUFFER_FLUSHED="hlsBufferFlushed",Kt.MANIFEST_LOADING="hlsManifestLoading",Kt.MANIFEST_LOADED="hlsManifestLoaded",Kt.MANIFEST_PARSED="hlsManifestParsed",Kt.LEVEL_SWITCHING="hlsLevelSwitching",Kt.LEVEL_SWITCHED="hlsLevelSwitched",Kt.LEVEL_LOADING="hlsLevelLoading",Kt.LEVEL_LOADED="hlsLevelLoaded",Kt.LEVEL_UPDATED="hlsLevelUpdated",Kt.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",Kt.LEVELS_UPDATED="hlsLevelsUpdated",Kt.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",Kt.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",Kt.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",Kt.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",Kt.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",Kt.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",Kt.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",Kt.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",Kt.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",Kt.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",Kt.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",Kt.CUES_PARSED="hlsCuesParsed",Kt.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",Kt.INIT_PTS_FOUND="hlsInitPtsFound",Kt.FRAG_LOADING="hlsFragLoading",Kt.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",Kt.FRAG_LOADED="hlsFragLoaded",Kt.FRAG_DECRYPTED="hlsFragDecrypted",Kt.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",Kt.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",Kt.FRAG_PARSING_METADATA="hlsFragParsingMetadata",Kt.FRAG_PARSED="hlsFragParsed",Kt.FRAG_BUFFERED="hlsFragBuffered",Kt.FRAG_CHANGED="hlsFragChanged",Kt.FPS_DROP="hlsFpsDrop",Kt.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",Kt.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",Kt.ERROR="hlsError",Kt.DESTROYING="hlsDestroying",Kt.KEY_LOADING="hlsKeyLoading",Kt.KEY_LOADED="hlsKeyLoaded",Kt.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",Kt.BACK_BUFFER_REACHED="hlsBackBufferReached",Kt.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",Kt}({}),B$5=function(Kt){return Kt.NETWORK_ERROR="networkError",Kt.MEDIA_ERROR="mediaError",Kt.KEY_SYSTEM_ERROR="keySystemError",Kt.MUX_ERROR="muxError",Kt.OTHER_ERROR="otherError",Kt}({}),L$2=function(Kt){return Kt.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",Kt.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",Kt.KEY_SYSTEM_NO_SESSION="keySystemNoSession",Kt.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",Kt.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",Kt.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",Kt.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",Kt.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",Kt.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",Kt.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",Kt.MANIFEST_LOAD_ERROR="manifestLoadError",Kt.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",Kt.MANIFEST_PARSING_ERROR="manifestParsingError",Kt.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",Kt.LEVEL_EMPTY_ERROR="levelEmptyError",Kt.LEVEL_LOAD_ERROR="levelLoadError",Kt.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",Kt.LEVEL_PARSING_ERROR="levelParsingError",Kt.LEVEL_SWITCH_ERROR="levelSwitchError",Kt.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",Kt.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",Kt.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",Kt.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",Kt.FRAG_LOAD_ERROR="fragLoadError",Kt.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",Kt.FRAG_DECRYPT_ERROR="fragDecryptError",Kt.FRAG_PARSING_ERROR="fragParsingError",Kt.FRAG_GAP="fragGap",Kt.REMUX_ALLOC_ERROR="remuxAllocError",Kt.KEY_LOAD_ERROR="keyLoadError",Kt.KEY_LOAD_TIMEOUT="keyLoadTimeOut",Kt.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",Kt.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",Kt.BUFFER_APPEND_ERROR="bufferAppendError",Kt.BUFFER_APPENDING_ERROR="bufferAppendingError",Kt.BUFFER_STALLED_ERROR="bufferStalledError",Kt.BUFFER_FULL_ERROR="bufferFullError",Kt.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",Kt.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",Kt.INTERNAL_EXCEPTION="internalException",Kt.INTERNAL_ABORTED="aborted",Kt.UNKNOWN="unknown",Kt}({});const Fe=function(){},ss={trace:Fe,debug:Fe,log:Fe,warn:Fe,info:Fe,error:Fe};let et=ss;const v$2=et,sn=/^(\d+)x(\d+)$/,Ms=/(.+?)=(".*?"|.*?)(?:,|$)/g;let ee$2=class wu{constructor(Vt){typeof Vt=="string"&&(Vt=wu.parseAttrList(Vt)),se$2(this,Vt)}get clientAttrs(){return Object.keys(this).filter(Vt=>Vt.substring(0,2)==="X-")}decimalInteger(Vt){const Hr=parseInt(this[Vt],10);return Hr>Number.MAX_SAFE_INTEGER?1/0:Hr}hexadecimalInteger(Vt){if(this[Vt]){let Hr=(this[Vt]||"0x").slice(2);Hr=(Hr.length&1?"0":"")+Hr;const Wr=new Uint8Array(Hr.length/2);for(let Yr=0;Yr<Hr.length/2;Yr++)Wr[Yr]=parseInt(Hr.slice(Yr*2,Yr*2+2),16);return Wr}else return null}hexadecimalIntegerAsNumber(Vt){const Hr=parseInt(this[Vt],16);return Hr>Number.MAX_SAFE_INTEGER?1/0:Hr}decimalFloatingPoint(Vt){return parseFloat(this[Vt])}optionalFloat(Vt,Hr){const Wr=this[Vt];return Wr?parseFloat(Wr):Hr}enumeratedString(Vt){return this[Vt]}bool(Vt){return this[Vt]==="YES"}decimalResolution(Vt){const Hr=sn.exec(this[Vt]);if(Hr!==null)return{width:parseInt(Hr[1],10),height:parseInt(Hr[2],10)}}static parseAttrList(Vt){let Hr;const Wr={},Yr='"';for(Ms.lastIndex=0;(Hr=Ms.exec(Vt))!==null;){let Zr=Hr[2];Zr.indexOf(Yr)===0&&Zr.lastIndexOf(Yr)===Zr.length-1&&(Zr=Zr.slice(1,-1));const en=Hr[1].trim();Wr[en]=Zr}return Wr}};class Bi{constructor(Vt,Hr){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,Hr){const Wr=Hr.attr;for(const Yr in Wr)if(Object.prototype.hasOwnProperty.call(Vt,Yr)&&Vt[Yr]!==Wr[Yr]){v$2.warn(`DATERANGE tag attribute: "${Yr}" does not match for tags with ID: "${Vt.ID}"`),this._badValueForSameId=Yr;break}Vt=se$2(new ee$2({}),Wr,Vt)}if(this.attr=Vt,this._startDate=new Date(Vt["START-DATE"]),"END-DATE"in this.attr){const Wr=new Date(this.attr["END-DATE"]);O$6(Wr.getTime())&&(this._endDate=Wr)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const Vt=this.duration;return Vt!==null?new Date(this._startDate.getTime()+Vt*1e3):null}get duration(){if("DURATION"in this.attr){const Vt=this.attr.decimalFloatingPoint("DURATION");if(O$6(Vt))return Vt}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&O$6(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class _t{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var X$5={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};function Es(Kt){return Uint8Array.from(atob(Kt),Vt=>Vt.charCodeAt(0))}function cn(Kt){const Vt=is(Kt).subarray(0,16),Hr=new Uint8Array(16);return Hr.set(Vt,16-Vt.length),Hr}function hn(Kt){const Vt=function(Hr,Wr,Yr){const Zr=Hr[Wr];Hr[Wr]=Hr[Yr],Hr[Yr]=Zr};Vt(Kt,0,3),Vt(Kt,1,2),Vt(Kt,4,5),Vt(Kt,6,7)}function un(Kt){const Vt=Kt.split(":");let Hr=null;if(Vt[0]==="data"&&Vt.length===2){const Wr=Vt[1].split(";"),Yr=Wr[Wr.length-1].split(",");if(Yr.length===2){const Zr=Yr[0]==="base64",en=Yr[1];Zr?(Wr.splice(-1,1),Hr=Es(en)):Hr=cn(en)}}return Hr}function is(Kt){return Uint8Array.from(unescape(encodeURIComponent(Kt)),Vt=>Vt.charCodeAt(0))}const qe=typeof self<"u"?self:void 0;var Z$2={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},de={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function Ns(Kt){switch(Kt){case de.FAIRPLAY:return Z$2.FAIRPLAY;case de.PLAYREADY:return Z$2.PLAYREADY;case de.WIDEVINE:return Z$2.WIDEVINE;case de.CLEARKEY:return Z$2.CLEARKEY}}var Gi={WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function dn(Kt){if(Kt===Gi.WIDEVINE)return Z$2.WIDEVINE}function Us(Kt){switch(Kt){case Z$2.FAIRPLAY:return de.FAIRPLAY;case Z$2.PLAYREADY:return de.PLAYREADY;case Z$2.WIDEVINE:return de.WIDEVINE;case Z$2.CLEARKEY:return de.CLEARKEY}}function Mt(Kt){const{drmSystems:Vt,widevineLicenseUrl:Hr}=Kt,Wr=Vt?[Z$2.FAIRPLAY,Z$2.WIDEVINE,Z$2.PLAYREADY,Z$2.CLEARKEY].filter(Yr=>!!Vt[Yr]):[];return!Wr[Z$2.WIDEVINE]&&Hr&&Wr.push(Z$2.WIDEVINE),Wr}const Ki=function(Kt){return qe!=null&&(Kt=qe.navigator)!=null&&Kt.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function fn(Kt,Vt,Hr,Wr){let Yr;switch(Kt){case Z$2.FAIRPLAY:Yr=["cenc","sinf"];break;case Z$2.WIDEVINE:case Z$2.PLAYREADY:Yr=["cenc"];break;case Z$2.CLEARKEY:Yr=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${Kt}`)}return gn(Yr,Vt,Hr,Wr)}function gn(Kt,Vt,Hr,Wr){return[{initDataTypes:Kt,persistentState:Wr.persistentState||"optional",distinctiveIdentifier:Wr.distinctiveIdentifier||"optional",sessionTypes:Wr.sessionTypes||[Wr.sessionType||"temporary"],audioCapabilities:Vt.map(Yr=>({contentType:`audio/mp4; codecs="${Yr}"`,robustness:Wr.audioRobustness||"",encryptionScheme:Wr.audioEncryptionScheme||null})),videoCapabilities:Hr.map(Yr=>({contentType:`video/mp4; codecs="${Yr}"`,robustness:Wr.videoRobustness||"",encryptionScheme:Wr.videoEncryptionScheme||null}))}]}function Me$1(Kt,Vt,Hr){return Uint8Array.prototype.slice?Kt.slice(Vt,Hr):new Uint8Array(Array.prototype.slice.call(Kt,Vt,Hr))}const ys=(Kt,Vt)=>Vt+10<=Kt.length&&Kt[Vt]===73&&Kt[Vt+1]===68&&Kt[Vt+2]===51&&Kt[Vt+3]<255&&Kt[Vt+4]<255&&Kt[Vt+6]<128&&Kt[Vt+7]<128&&Kt[Vt+8]<128&&Kt[Vt+9]<128,Vi=(Kt,Vt)=>Vt+10<=Kt.length&&Kt[Vt]===51&&Kt[Vt+1]===68&&Kt[Vt+2]===73&&Kt[Vt+3]<255&&Kt[Vt+4]<255&&Kt[Vt+6]<128&&Kt[Vt+7]<128&&Kt[Vt+8]<128&&Kt[Vt+9]<128,st$1=(Kt,Vt)=>{const Hr=Vt;let Wr=0;for(;ys(Kt,Vt);){Wr+=10;const Yr=Pt$1(Kt,Vt+6);Wr+=Yr,Vi(Kt,Vt+10)&&(Wr+=10),Vt+=Wr}if(Wr>0)return Kt.subarray(Hr,Hr+Wr)},Pt$1=(Kt,Vt)=>{let Hr=0;return Hr=(Kt[Vt]&127)<<21,Hr|=(Kt[Vt+1]&127)<<14,Hr|=(Kt[Vt+2]&127)<<7,Hr|=Kt[Vt+3]&127,Hr},mn=(Kt,Vt)=>ys(Kt,Vt)&&Pt$1(Kt,Vt+6)+10<=Kt.length-Vt,xs=Kt=>{const Vt=Wi(Kt);for(let Hr=0;Hr<Vt.length;Hr++){const Wr=Vt[Hr];if(Hi(Wr))return Sn(Wr)}},Hi=Kt=>Kt&&Kt.key==="PRIV"&&Kt.info==="com.apple.streaming.transportStreamTimestamp",pn=Kt=>{const Vt=String.fromCharCode(Kt[0],Kt[1],Kt[2],Kt[3]),Hr=Pt$1(Kt,4),Wr=10;return{type:Vt,size:Hr,data:Kt.subarray(Wr,Wr+Hr)}},Wi=Kt=>{let Vt=0;const Hr=[];for(;ys(Kt,Vt);){const Wr=Pt$1(Kt,Vt+6);Vt+=10;const Yr=Vt+Wr;for(;Vt+8<Yr;){const Zr=pn(Kt.subarray(Vt)),en=Tn(Zr);en&&Hr.push(en),Vt+=Zr.size+10}Vi(Kt,Vt)&&(Vt+=10)}return Hr},Tn=Kt=>Kt.type==="PRIV"?En(Kt):Kt.type[0]==="W"?xn(Kt):yn(Kt),En=Kt=>{if(Kt.size<2)return;const Vt=Re$1(Kt.data,!0),Hr=new Uint8Array(Kt.data.subarray(Vt.length+1));return{key:Kt.type,info:Vt,data:Hr.buffer}},yn=Kt=>{if(Kt.size<2)return;if(Kt.type==="TXXX"){let Hr=1;const Wr=Re$1(Kt.data.subarray(Hr),!0);Hr+=Wr.length+1;const Yr=Re$1(Kt.data.subarray(Hr));return{key:Kt.type,info:Wr,data:Yr}}const Vt=Re$1(Kt.data.subarray(1));return{key:Kt.type,data:Vt}},xn=Kt=>{if(Kt.type==="WXXX"){if(Kt.size<2)return;let Hr=1;const Wr=Re$1(Kt.data.subarray(Hr),!0);Hr+=Wr.length+1;const Yr=Re$1(Kt.data.subarray(Hr));return{key:Kt.type,info:Wr,data:Yr}}const Vt=Re$1(Kt.data);return{key:Kt.type,data:Vt}},Sn=Kt=>{if(Kt.data.byteLength===8){const Vt=new Uint8Array(Kt.data),Hr=Vt[3]&1;let Wr=(Vt[4]<<23)+(Vt[5]<<15)+(Vt[6]<<7)+Vt[7];return Wr/=45,Hr&&(Wr+=4772185884e-2),Math.round(Wr)}},Re$1=(Kt,Vt=!1)=>{const Hr=vn();if(Hr){const nn=Hr.decode(Kt);if(Vt){const on=nn.indexOf("\0");return on!==-1?nn.substring(0,on):nn}return nn.replace(/\0/g,"")}const Wr=Kt.length;let Yr,Zr,en,tn="",rn=0;for(;rn<Wr;){if(Yr=Kt[rn++],Yr===0&&Vt)return tn;if(!(Yr===0||Yr===3))switch(Yr>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:tn+=String.fromCharCode(Yr);break;case 12:case 13:Zr=Kt[rn++],tn+=String.fromCharCode((Yr&31)<<6|Zr&63);break;case 14:Zr=Kt[rn++],en=Kt[rn++],tn+=String.fromCharCode((Yr&15)<<12|(Zr&63)<<6|(en&63)<<0);break}}return tn};let Nt;function vn(){if(!navigator.userAgent.includes("PlayStation 4"))return!Nt&&typeof self.TextDecoder<"u"&&(Nt=new self.TextDecoder("utf-8")),Nt}const Se$2={hexDump:function(Kt){let Vt="";for(let Hr=0;Hr<Kt.length;Hr++){let Wr=Kt[Hr].toString(16);Wr.length<2&&(Wr="0"+Wr),Vt+=Wr}return Vt}},vt$1=Math.pow(2,32)-1,An=[].push,Yi={video:1,audio:2,id3:3,text:4};function ie$1(Kt){return String.fromCharCode.apply(null,Kt)}function qi(Kt,Vt){const Hr=Kt[Vt]<<8|Kt[Vt+1];return Hr<0?65536+Hr:Hr}function $$1(Kt,Vt){const Hr=ji(Kt,Vt);return Hr<0?4294967296+Hr:Hr}function ji(Kt,Vt){return Kt[Vt]<<24|Kt[Vt+1]<<16|Kt[Vt+2]<<8|Kt[Vt+3]}function Ut(Kt,Vt,Hr){Kt[Vt]=Hr>>24,Kt[Vt+1]=Hr>>16&255,Kt[Vt+2]=Hr>>8&255,Kt[Vt+3]=Hr&255}function Ln(Kt){const Vt=Kt.byteLength;for(let Hr=0;Hr<Vt;){const Wr=$$1(Kt,Hr);if(Wr>8&&Kt[Hr+4]===109&&Kt[Hr+5]===111&&Kt[Hr+6]===111&&Kt[Hr+7]===102)return!0;Hr=Wr>1?Hr+Wr:Vt}return!1}function H$5(Kt,Vt){const Hr=[];if(!Vt.length)return Hr;const Wr=Kt.byteLength;for(let Yr=0;Yr<Wr;){const Zr=$$1(Kt,Yr),en=ie$1(Kt.subarray(Yr+4,Yr+8)),tn=Zr>1?Yr+Zr:Wr;if(en===Vt[0])if(Vt.length===1)Hr.push(Kt.subarray(Yr+8,tn));else{const rn=H$5(Kt.subarray(Yr+8,tn),Vt.slice(1));rn.length&&An.apply(Hr,rn)}Yr=tn}return Hr}function Rn(Kt){const Vt=[],Hr=Kt[0];let Wr=8;const Yr=$$1(Kt,Wr);Wr+=4;const Zr=0,en=0;Hr===0?Wr+=8:Wr+=16,Wr+=2;let tn=Kt.length+en;const rn=qi(Kt,Wr);Wr+=2;for(let nn=0;nn<rn;nn++){let on=Wr;const an=$$1(Kt,on);on+=4;const $n=an&2147483647;if((an&2147483648)>>>31===1)return v$2.warn("SIDX has hierarchical references (not supported)"),null;const ln=$$1(Kt,on);on+=4,Vt.push({referenceSize:$n,subsegmentDuration:ln,info:{duration:ln/Yr,start:tn,end:tn+$n-1}}),tn+=$n,on+=4,Wr=on}return{earliestPresentationTime:Zr,timescale:Yr,version:Hr,referencesCount:rn,references:Vt}}function zi(Kt){const Vt=[],Hr=H$5(Kt,["moov","trak"]);for(let Wr=0;Wr<Hr.length;Wr++){const Yr=Hr[Wr],Zr=H$5(Yr,["tkhd"])[0];if(Zr){let en=Zr[0];const tn=$$1(Zr,en===0?12:20),rn=H$5(Yr,["mdia","mdhd"])[0];if(rn){en=rn[0];const nn=$$1(rn,en===0?12:20),on=H$5(Yr,["mdia","hdlr"])[0];if(on){const an=ie$1(on.subarray(8,12)),$n={soun:X$5.AUDIO,vide:X$5.VIDEO}[an];if($n){const ln=H$5(Yr,["mdia","minf","stbl","stsd"])[0],Hn=In(ln);Vt[tn]={timescale:nn,type:$n},Vt[$n]=oe$2({timescale:nn,id:tn},Hn)}}}}}return H$5(Kt,["moov","mvex","trex"]).forEach(Wr=>{const Yr=$$1(Wr,4),Zr=Vt[Yr];Zr&&(Zr.default={duration:$$1(Wr,12),flags:$$1(Wr,20)})}),Vt}function In(Kt){const Vt=Kt.subarray(8),Hr=Vt.subarray(86),Wr=ie$1(Vt.subarray(4,8));let Yr=Wr;const Zr=Wr==="enca"||Wr==="encv";if(Zr){const en=H$5(Vt,[Wr])[0].subarray(Wr==="enca"?28:78);H$5(en,["sinf"]).forEach(tn=>{const rn=H$5(tn,["schm"])[0];if(rn){const nn=ie$1(rn.subarray(4,8));if(nn==="cbcs"||nn==="cenc"){const on=H$5(tn,["frma"])[0];on&&(Yr=ie$1(on))}}})}switch(Yr){case"avc1":case"avc2":case"avc3":case"avc4":{const en=H$5(Hr,["avcC"])[0];Yr+="."+nt$1(en[1])+nt$1(en[2])+nt$1(en[3]);break}case"mp4a":{const en=H$5(Vt,[Wr])[0],tn=H$5(en.subarray(28),["esds"])[0];if(tn&&tn.length>12){let rn=4;if(tn[rn++]!==3)break;rn=Bt(tn,rn),rn+=2;const nn=tn[rn++];if(nn&128&&(rn+=2),nn&64&&(rn+=tn[rn++]),tn[rn++]!==4)break;rn=Bt(tn,rn);const on=tn[rn++];if(on===64)Yr+="."+nt$1(on);else break;if(rn+=12,tn[rn++]!==5)break;rn=Bt(tn,rn);const an=tn[rn++];let $n=(an&248)>>3;$n===31&&($n+=1+((an&7)<<3)+((tn[rn]&224)>>5)),Yr+="."+$n}break}case"hvc1":case"hev1":{const en=H$5(Hr,["hvcC"])[0],tn=en[1],rn=["","A","B","C"][tn>>6],nn=tn&31,on=$$1(en,2),an=(tn&32)>>5?"H":"L",$n=en[12],ln=en.subarray(6,12);Yr+="."+rn+nn,Yr+="."+on.toString(16).toUpperCase(),Yr+="."+an+$n;let Hn="";for(let jn=ln.length;jn--;){const zn=ln[jn];(zn||Hn)&&(Hn="."+zn.toString(16).toUpperCase()+Hn)}Yr+=Hn;break}case"dvh1":case"dvhe":{const en=H$5(Hr,["dvcC"])[0],tn=en[2]>>1&127,rn=en[2]<<5&32|en[3]>>3&31;Yr+="."+xe$1(tn)+"."+xe$1(rn);break}case"vp09":{const en=H$5(Hr,["vpcC"])[0],tn=en[4],rn=en[5],nn=en[6]>>4&15;Yr+="."+xe$1(tn)+"."+xe$1(rn)+"."+xe$1(nn);break}case"av01":{const en=H$5(Hr,["av1C"])[0],tn=en[1]>>>5,rn=en[1]&31,nn=en[2]>>>7?"H":"M",on=(en[2]&64)>>6,an=(en[2]&32)>>5,$n=tn===2&&on?an?12:10:on?10:8,ln=(en[2]&16)>>4,Hn=(en[2]&8)>>3,jn=(en[2]&4)>>2,zn=en[2]&3;Yr+="."+tn+"."+xe$1(rn)+nn+"."+xe$1($n)+"."+ln+"."+Hn+jn+zn+"."+xe$1(1)+"."+xe$1(1)+"."+xe$1(1)+".0";break}}return{codec:Yr,encrypted:Zr}}function Bt(Kt,Vt){const Hr=Vt+5;for(;Kt[Vt++]&128&&Vt<Hr;);return Vt}function nt$1(Kt){return("0"+Kt.toString(16).toUpperCase()).slice(-2)}function xe$1(Kt){return(Kt<10?"0":"")+Kt}function bn(Kt,Vt){if(!Kt||!Vt)return Kt;const Hr=Vt.keyId;return Hr&&Vt.isCommonEncryption&&H$5(Kt,["moov","trak"]).forEach(Wr=>{const Yr=H$5(Wr,["mdia","minf","stbl","stsd"])[0].subarray(8);let Zr=H$5(Yr,["enca"]);const en=Zr.length>0;en||(Zr=H$5(Yr,["encv"])),Zr.forEach(tn=>{const rn=en?tn.subarray(28):tn.subarray(78);H$5(rn,["sinf"]).forEach(nn=>{const on=Xi(nn);if(on){const an=on.subarray(8,24);an.some($n=>$n!==0)||(v$2.log(`[eme] Patching keyId in 'enc${en?"a":"v"}>sinf>>tenc' box: ${Se$2.hexDump(an)} -> ${Se$2.hexDump(Hr)}`),on.set(Hr,8))}})})}),Kt}function Xi(Kt){const Vt=H$5(Kt,["schm"])[0];if(Vt){const Hr=ie$1(Vt.subarray(4,8));if(Hr==="cbcs"||Hr==="cenc")return H$5(Kt,["schi","tenc"])[0]}return v$2.error("[eme] missing 'schm' box"),null}function Dn(Kt,Vt){return H$5(Vt,["moof","traf"]).reduce((Hr,Wr)=>{const Yr=H$5(Wr,["tfdt"])[0],Zr=Yr[0],en=H$5(Wr,["tfhd"]).reduce((tn,rn)=>{const nn=$$1(rn,4),on=Kt[nn];if(on){let an=$$1(Yr,4);if(Zr===1){if(an===vt$1)return v$2.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),tn;an*=vt$1+1,an+=$$1(Yr,8)}const $n=on.timescale||9e4,ln=an/$n;if(O$6(ln)&&(tn===null||ln<tn))return ln}return tn},null);return en!==null&&O$6(en)&&(Hr===null||en<Hr)?en:Hr},null)}function Cn(Kt,Vt){let Hr=0,Wr=0,Yr=0;const Zr=H$5(Kt,["moof","traf"]);for(let en=0;en<Zr.length;en++){const tn=Zr[en],rn=H$5(tn,["tfhd"])[0],nn=$$1(rn,4),on=Vt[nn];if(!on)continue;const an=on.default,$n=$$1(rn,0)|(an==null?void 0:an.flags);let ln=an==null?void 0:an.duration;$n&8&&($n&2?ln=$$1(rn,12):ln=$$1(rn,8));const Hn=on.timescale||9e4,jn=H$5(tn,["trun"]);for(let zn=0;zn<jn.length;zn++){if(Hr=wn(jn[zn]),!Hr&&ln){const Wn=$$1(jn[zn],4);Hr=ln*Wn}on.type===X$5.VIDEO?Wr+=Hr/Hn:on.type===X$5.AUDIO&&(Yr+=Hr/Hn)}}if(Wr===0&&Yr===0){let en=0;const tn=H$5(Kt,["sidx"]);for(let rn=0;rn<tn.length;rn++){const nn=Rn(tn[rn]);nn!=null&&nn.references&&(en+=nn.references.reduce((on,an)=>on+an.info.duration||0,0))}return en}return Wr||Yr}function wn(Kt){const Vt=$$1(Kt,0);let Hr=8;Vt&1&&(Hr+=4),Vt&4&&(Hr+=4);let Wr=0;const Yr=$$1(Kt,4);for(let Zr=0;Zr<Yr;Zr++){if(Vt&256){const en=$$1(Kt,Hr);Wr+=en,Hr+=4}Vt&512&&(Hr+=4),Vt&1024&&(Hr+=4),Vt&2048&&(Hr+=4)}return Wr}function kn(Kt,Vt,Hr){H$5(Vt,["moof","traf"]).forEach(Wr=>{H$5(Wr,["tfhd"]).forEach(Yr=>{const Zr=$$1(Yr,4),en=Kt[Zr];if(!en)return;const tn=en.timescale||9e4;H$5(Wr,["tfdt"]).forEach(rn=>{const nn=rn[0],on=Hr*tn;if(on){let an=$$1(rn,4);if(nn===0)an-=on,an=Math.max(an,0),Ut(rn,4,an);else{an*=Math.pow(2,32),an+=$$1(rn,8),an-=on,an=Math.max(an,0);const $n=Math.floor(an/(vt$1+1)),ln=Math.floor(an%(vt$1+1));Ut(rn,4,$n),Ut(rn,8,ln)}}})})})}function _n$1(Kt){const Vt={valid:null,remainder:null},Hr=H$5(Kt,["moof"]);if(Hr.length<2)return Vt.remainder=Kt,Vt;const Wr=Hr[Hr.length-1];return Vt.valid=Me$1(Kt,0,Wr.byteOffset-8),Vt.remainder=Me$1(Kt,Wr.byteOffset-8),Vt}function pe$1(Kt,Vt){const Hr=new Uint8Array(Kt.length+Vt.length);return Hr.set(Kt),Hr.set(Vt,Kt.length),Hr}function Bs(Kt,Vt){const Hr=[],Wr=Vt.samples,Yr=Vt.timescale,Zr=Vt.id;let en=!1;return H$5(Wr,["moof"]).map(tn=>{const rn=tn.byteOffset-8;H$5(tn,["traf"]).map(nn=>{const on=H$5(nn,["tfdt"]).map(an=>{const $n=an[0];let ln=$$1(an,4);return $n===1&&(ln*=Math.pow(2,32),ln+=$$1(an,8)),ln/Yr})[0];return on!==void 0&&(Kt=on),H$5(nn,["tfhd"]).map(an=>{const $n=$$1(an,4),ln=$$1(an,0)&16777215,Hn=(ln&1)!==0,jn=(ln&2)!==0,zn=(ln&8)!==0;let Wn=0;const ei=(ln&16)!==0;let $i=0;const Mi=(ln&32)!==0;let Ni=8;$n===Zr&&(Hn&&(Ni+=8),jn&&(Ni+=4),zn&&(Wn=$$1(an,Ni),Ni+=4),ei&&($i=$$1(an,Ni),Ni+=4),Mi&&(Ni+=4),Vt.type==="video"&&(en=Pn(Vt.codec)),H$5(nn,["trun"]).map(Ts=>{const ps=Ts[0],$s=$$1(Ts,0)&16777215,Ws=($s&1)!==0;let Hs=0;const js=($s&4)!==0,zs=($s&256)!==0;let Xs=0;const ia=($s&512)!==0;let Qs=0;const Zs=($s&1024)!==0,Gs=($s&2048)!==0;let Hl=0;const Js=$$1(Ts,4);let sa=8;Ws&&(Hs=$$1(Ts,sa),sa+=4),js&&(sa+=4);let Ca=Hs+rn;for(let tc=0;tc<Js;tc++){if(zs?(Xs=$$1(Ts,sa),sa+=4):Xs=Wn,ia?(Qs=$$1(Ts,sa),sa+=4):Qs=$i,Zs&&(sa+=4),Gs&&(ps===0?Hl=$$1(Ts,sa):Hl=ji(Ts,sa),sa+=4),Vt.type===X$5.VIDEO){let zl=0;for(;zl<Qs;){const ec=$$1(Wr,Ca);if(Ca+=4,Fn(en,Wr[Ca])){const sc=Wr.subarray(Ca,Ca+ec);Qi(sc,en?2:1,Kt+Hl/Yr,Hr)}Ca+=ec,zl+=ec+4}}Kt+=Xs/Yr}}))})})}),Hr}function Pn(Kt){if(!Kt)return!1;const Vt=Kt.indexOf("."),Hr=Vt<0?Kt:Kt.substring(0,Vt);return Hr==="hvc1"||Hr==="hev1"||Hr==="dvh1"||Hr==="dvhe"}function Fn(Kt,Vt){if(Kt){const Hr=Vt>>1&63;return Hr===39||Hr===40}else return(Vt&31)===6}function Qi(Kt,Vt,Hr,Wr){const Yr=Ji(Kt);let Zr=0;Zr+=Vt;let en=0,tn=0,rn=0;for(;Zr<Yr.length;){en=0;do{if(Zr>=Yr.length)break;rn=Yr[Zr++],en+=rn}while(rn===255);tn=0;do{if(Zr>=Yr.length)break;rn=Yr[Zr++],tn+=rn}while(rn===255);const nn=Yr.length-Zr;let on=Zr;if(tn<nn)Zr+=tn;else if(tn>nn){v$2.error(`Malformed SEI payload. ${tn} is too small, only ${nn} bytes left to parse.`);break}if(en===4){if(Yr[on++]===181){const an=qi(Yr,on);if(on+=2,an===49){const $n=$$1(Yr,on);if(on+=4,$n===1195456820){const ln=Yr[on++];if(ln===3){const Hn=Yr[on++],jn=31&Hn,zn=64&Hn,Wn=zn?2+jn*3:0,ei=new Uint8Array(Wn);if(zn){ei[0]=Hn;for(let $i=1;$i<Wn;$i++)ei[$i]=Yr[on++]}Wr.push({type:ln,payloadType:en,pts:Hr,bytes:ei})}}}}}else if(en===5&&tn>16){const an=[];for(let Hn=0;Hn<16;Hn++){const jn=Yr[on++].toString(16);an.push(jn.length==1?"0"+jn:jn),(Hn===3||Hn===5||Hn===7||Hn===9)&&an.push("-")}const $n=tn-16,ln=new Uint8Array($n);for(let Hn=0;Hn<$n;Hn++)ln[Hn]=Yr[on++];Wr.push({payloadType:en,pts:Hr,uuid:an.join(""),userData:Re$1(ln),userDataBytes:ln})}}}function Ji(Kt){const Vt=Kt.byteLength,Hr=[];let Wr=1;for(;Wr<Vt-2;)Kt[Wr]===0&&Kt[Wr+1]===0&&Kt[Wr+2]===3?(Hr.push(Wr+2),Wr+=2):Wr++;if(Hr.length===0)return Kt;const Yr=Vt-Hr.length,Zr=new Uint8Array(Yr);let en=0;for(Wr=0;Wr<Yr;en++,Wr++)en===Hr[0]&&(en++,Hr.shift()),Zr[Wr]=Kt[en];return Zr}function On(Kt){const Vt=Kt[0];let Hr="",Wr="",Yr=0,Zr=0,en=0,tn=0,rn=0,nn=0;if(Vt===0){for(;ie$1(Kt.subarray(nn,nn+1))!=="\0";)Hr+=ie$1(Kt.subarray(nn,nn+1)),nn+=1;for(Hr+=ie$1(Kt.subarray(nn,nn+1)),nn+=1;ie$1(Kt.subarray(nn,nn+1))!=="\0";)Wr+=ie$1(Kt.subarray(nn,nn+1)),nn+=1;Wr+=ie$1(Kt.subarray(nn,nn+1)),nn+=1,Yr=$$1(Kt,12),Zr=$$1(Kt,16),tn=$$1(Kt,20),rn=$$1(Kt,24),nn=28}else if(Vt===1){nn+=4,Yr=$$1(Kt,nn),nn+=4;const an=$$1(Kt,nn);nn+=4;const $n=$$1(Kt,nn);for(nn+=4,en=2**32*an+$n,Qr(en)||(en=Number.MAX_SAFE_INTEGER,v$2.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),tn=$$1(Kt,nn),nn+=4,rn=$$1(Kt,nn),nn+=4;ie$1(Kt.subarray(nn,nn+1))!=="\0";)Hr+=ie$1(Kt.subarray(nn,nn+1)),nn+=1;for(Hr+=ie$1(Kt.subarray(nn,nn+1)),nn+=1;ie$1(Kt.subarray(nn,nn+1))!=="\0";)Wr+=ie$1(Kt.subarray(nn,nn+1)),nn+=1;Wr+=ie$1(Kt.subarray(nn,nn+1)),nn+=1}const on=Kt.subarray(nn,Kt.byteLength);return{schemeIdUri:Hr,value:Wr,timeScale:Yr,presentationTime:en,presentationTimeDelta:Zr,eventDuration:tn,id:rn,payload:on}}function Mn(Kt,...Vt){const Hr=Vt.length;let Wr=8,Yr=Hr;for(;Yr--;)Wr+=Vt[Yr].byteLength;const Zr=new Uint8Array(Wr);for(Zr[0]=Wr>>24&255,Zr[1]=Wr>>16&255,Zr[2]=Wr>>8&255,Zr[3]=Wr&255,Zr.set(Kt,4),Yr=0,Wr=8;Yr<Hr;Yr++)Zr.set(Vt[Yr],Wr),Wr+=Vt[Yr].byteLength;return Zr}function Nn$1(Kt,Vt,Hr){if(Kt.byteLength!==16)throw new RangeError("Invalid system id");let Wr,Yr;if(Vt){Wr=1,Yr=new Uint8Array(Vt.length*16);for(let tn=0;tn<Vt.length;tn++){const rn=Vt[tn];if(rn.byteLength!==16)throw new RangeError("Invalid key");Yr.set(rn,tn*16)}}else Wr=0,Yr=new Uint8Array;let Zr;Wr>0?(Zr=new Uint8Array(4),Vt.length>0&&new DataView(Zr.buffer).setUint32(0,Vt.length,!1)):Zr=new Uint8Array;const en=new Uint8Array(4);return Hr&&Hr.byteLength>0&&new DataView(en.buffer).setUint32(0,Hr.byteLength,!1),Mn([112,115,115,104],new Uint8Array([Wr,0,0,0]),Kt,Zr,Yr,en,Hr||new Uint8Array)}function Un$1(Kt){if(!(Kt instanceof ArrayBuffer)||Kt.byteLength<32)return null;const Vt={version:0,systemId:"",kids:null,data:null},Hr=new DataView(Kt),Wr=Hr.getUint32(0);if(Kt.byteLength!==Wr&&Wr>44||Hr.getUint32(4)!==1886614376||(Vt.version=Hr.getUint32(8)>>>24,Vt.version>1))return null;Vt.systemId=Se$2.hexDump(new Uint8Array(Kt,12,16));const Yr=Hr.getUint32(28);if(Vt.version===0){if(Wr-32<Yr)return null;Vt.data=new Uint8Array(Kt,32,Yr)}else if(Vt.version===1){Vt.kids=[];for(let Zr=0;Zr<Yr;Zr++)Vt.kids.push(new Uint8Array(Kt,32+Zr*16,16))}return Vt}let at$1={},it$1=class Eu{static clearKeyUriToKeyIdMap(){at$1={}}constructor(Vt,Hr,Wr,Yr=[1],Zr=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=Vt,this.uri=Hr,this.keyFormat=Wr,this.keyFormatVersions=Yr,this.iv=Zr,this.encrypted=Vt?Vt!=="NONE":!1,this.isCommonEncryption=this.encrypted&&Vt!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case de.FAIRPLAY:case de.WIDEVINE:case de.PLAYREADY:case de.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(Vt){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof Vt!="number"&&(this.method==="AES-128"&&!this.iv&&v$2.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),Vt=0);const Wr=Bn(Vt);return new Eu(this.method,this.uri,"identity",this.keyFormatVersions,Wr)}const Hr=un(this.uri);if(Hr)switch(this.keyFormat){case de.WIDEVINE:this.pssh=Hr,Hr.length>=22&&(this.keyId=Hr.subarray(Hr.length-22,Hr.length-6));break;case de.PLAYREADY:{const Wr=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=Nn$1(Wr,null,Hr);const Yr=new Uint16Array(Hr.buffer,Hr.byteOffset,Hr.byteLength/2),Zr=String.fromCharCode.apply(null,Array.from(Yr)),en=Zr.substring(Zr.indexOf("<"),Zr.length),tn=new DOMParser().parseFromString(en,"text/xml").getElementsByTagName("KID")[0];if(tn){const rn=tn.childNodes[0]?tn.childNodes[0].nodeValue:tn.getAttribute("VALUE");if(rn){const nn=Es(rn).subarray(0,16);hn(nn),this.keyId=nn}}break}default:{let Wr=Hr.subarray(0,16);if(Wr.length!==16){const Yr=new Uint8Array(16);Yr.set(Wr,16-Wr.length),Wr=Yr}this.keyId=Wr;break}}if(!this.keyId||this.keyId.byteLength!==16){let Wr=at$1[this.uri];if(!Wr){const Yr=Object.keys(at$1).length%Number.MAX_SAFE_INTEGER;Wr=new Uint8Array(16),new DataView(Wr.buffer,12,4).setUint32(0,Yr),at$1[this.uri]=Wr}this.keyId=Wr}return this}};function Bn(Kt){const Vt=new Uint8Array(16);for(let Hr=12;Hr<16;Hr++)Vt[Hr]=Kt>>8*(15-Hr)&255;return Vt}function Qe(Kt=!0){return typeof self>"u"?void 0:(Kt||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}const At={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function er(Kt,Vt,Hr=!0){var Wr;const Yr=Qe(Hr);return(Wr=Yr==null?void 0:Yr.isTypeSupported(rt$1(Kt,Vt)))!=null?Wr:!1}function rt$1(Kt,Vt){return`${Vt}/mp4;codecs="${Kt}"`}function Lt(Kt){return Kt.split(",").reduce((Vt,Hr)=>{const Wr=At.video[Hr];return Wr?(Wr*2+Vt)/(Vt?3:2):(At.audio[Hr]+Vt)/(Vt?2:1)},0)}const Gt={};function Kn$1(Kt,Vt=!0){if(Gt[Kt])return Gt[Kt];const Hr={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[Kt];for(let Wr=0;Wr<Hr.length;Wr++)if(er(Hr[Wr],"audio",Vt))return Gt[Kt]=Hr[Wr],Hr[Wr];return Kt}const Vn=/flac|opus/i;function Rt(Kt,Vt=!0){return Kt.replace(Vn,Hr=>Kn$1(Hr.toLowerCase(),Vt))}function Vs(Kt,Vt){return Kt&&Kt!=="mp4a"?Kt:Vt}var Y$6={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},N$4={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function tr(Kt,Vt){let Hr;try{Hr=new Event("addtrack")}catch{Hr=document.createEvent("Event"),Hr.initEvent("addtrack",!1,!1)}Hr.track=Kt,Vt.dispatchEvent(Hr)}function sr(Kt,Vt){const Hr=Kt.mode;if(Hr==="disabled"&&(Kt.mode="hidden"),Kt.cues&&!Kt.cues.getCueById(Vt.id))try{if(Kt.addCue(Vt),!Kt.cues.getCueById(Vt.id))throw new Error(`addCue is failed for: ${Vt}`)}catch(Wr){v$2.debug(`[texttrack-utils]: ${Wr}`);try{const Yr=new self.TextTrackCue(Vt.startTime,Vt.endTime,Vt.text);Yr.id=Vt.id,Kt.addCue(Yr)}catch(Yr){v$2.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${Yr}`)}}Hr==="disabled"&&(Kt.mode=Hr)}function Ve$2(Kt){const Vt=Kt.mode;if(Vt==="disabled"&&(Kt.mode="hidden"),Kt.cues)for(let Hr=Kt.cues.length;Hr--;)Kt.removeCue(Kt.cues[Hr]);Vt==="disabled"&&(Kt.mode=Vt)}function ns(Kt,Vt,Hr,Wr){const Yr=Kt.mode;if(Yr==="disabled"&&(Kt.mode="hidden"),Kt.cues&&Kt.cues.length>0){const Zr=Qn$1(Kt.cues,Vt,Hr);for(let en=0;en<Zr.length;en++)(!Wr||Wr(Zr[en]))&&Kt.removeCue(Zr[en])}Yr==="disabled"&&(Kt.mode=Yr)}function Xn$1(Kt,Vt){if(Vt<Kt[0].startTime)return 0;const Hr=Kt.length-1;if(Vt>Kt[Hr].endTime)return-1;let Wr=0,Yr=Hr;for(;Wr<=Yr;){const Zr=Math.floor((Yr+Wr)/2);if(Vt<Kt[Zr].startTime)Yr=Zr-1;else if(Vt>Kt[Zr].startTime&&Wr<Hr)Wr=Zr+1;else return Zr}return Kt[Wr].startTime-Vt<Vt-Kt[Yr].startTime?Wr:Yr}function Qn$1(Kt,Vt,Hr){const Wr=[],Yr=Xn$1(Kt,Vt);if(Yr>-1)for(let Zr=Yr,en=Kt.length;Zr<en;Zr++){const tn=Kt[Zr];if(tn.startTime>=Vt&&tn.endTime<=Hr)Wr.push(tn);else if(tn.startTime>Hr)return Wr}return Wr}function mt$1(Kt){const Vt=[];for(let Hr=0;Hr<Kt.length;Hr++){const Wr=Kt[Hr];(Wr.kind==="subtitles"||Wr.kind==="captions")&&Wr.label&&Vt.push(Kt[Hr])}return Vt}var ye$1={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};function as(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}(()=>{const Kt=as();try{Kt&&new Kt(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();const os=["NONE","TYPE-0","TYPE-1",null],It$1=["SDR","PQ","HLG"];var tt={No:"",Yes:"YES",v2:"v2"};function ra(Kt,Vt){const{canSkipUntil:Hr,canSkipDateRanges:Wr,endSN:Yr}=Kt,Zr=Vt!==void 0?Vt-Yr:0;return Hr&&Zr<Hr?Wr?tt.v2:tt.Yes:tt.No}class ti{constructor(Vt,Hr,Wr){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=Vt,this.part=Hr,this.skip=Wr}addDirectives(Vt){const Hr=new self.URL(Vt);return this.msn!==void 0&&Hr.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&Hr.searchParams.set("_HLS_part",this.part.toString()),this.skip&&Hr.searchParams.set("_HLS_skip",this.skip),Hr.href}}let je$1=class{constructor(Vt){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[Vt.url],this._attrs=[Vt.attrs],this.bitrate=Vt.bitrate,Vt.details&&(this.details=Vt.details),this.id=Vt.id||0,this.name=Vt.name,this.width=Vt.width||0,this.height=Vt.height||0,this.frameRate=Vt.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=Vt.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=Vt.audioCodec,this.videoCodec=Vt.videoCodec,this.codecSet=[Vt.videoCodec,Vt.audioCodec].filter(Hr=>!!Hr).map(Hr=>Hr.substring(0,4)).join(","),this.addGroupId("audio",Vt.attrs.AUDIO),this.addGroupId("text",Vt.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(Vt){return si(this._audioGroups,Vt)}hasSubtitleGroup(Vt){return si(this._subtitleGroups,Vt)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(Vt,Hr){if(Hr){if(Vt==="audio"){let Wr=this._audioGroups;Wr||(Wr=this._audioGroups=[]),Wr.indexOf(Hr)===-1&&Wr.push(Hr)}else if(Vt==="text"){let Wr=this._subtitleGroups;Wr||(Wr=this._subtitleGroups=[]),Wr.indexOf(Hr)===-1&&Wr.push(Hr)}}}get urlId(){return 0}set urlId(Vt){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var Vt;return(Vt=this.audioGroups)==null?void 0:Vt[0]}get textGroupId(){var Vt;return(Vt=this.subtitleGroups)==null?void 0:Vt[0]}addFallback(){}};function si(Kt,Vt){return!Vt||!Kt?!1:Kt.indexOf(Vt)!==-1}function Ht(Kt,Vt){const Hr=Vt.startPTS;if(O$6(Hr)){let Wr=0,Yr;Vt.sn>Kt.sn?(Wr=Hr-Kt.start,Yr=Kt):(Wr=Kt.start-Hr,Yr=Vt),Yr.duration!==Wr&&(Yr.duration=Wr)}else Vt.sn>Kt.sn?Kt.cc===Vt.cc&&Kt.minEndPTS?Vt.start=Kt.start+(Kt.minEndPTS-Kt.start):Vt.start=Kt.start+Kt.duration:Vt.start=Math.max(Kt.start-Vt.duration,0)}function ir(Kt,Vt,Hr,Wr,Yr,Zr){Wr-Hr<=0&&(v$2.warn("Fragment should have a positive duration",Vt),Wr=Hr+Vt.duration,Zr=Yr+Vt.duration);let en=Hr,tn=Wr;const rn=Vt.startPTS,nn=Vt.endPTS;if(O$6(rn)){const jn=Math.abs(rn-Hr);O$6(Vt.deltaPTS)?Vt.deltaPTS=Math.max(jn,Vt.deltaPTS):Vt.deltaPTS=jn,en=Math.max(Hr,rn),Hr=Math.min(Hr,rn),Yr=Math.min(Yr,Vt.startDTS),tn=Math.min(Wr,nn),Wr=Math.max(Wr,nn),Zr=Math.max(Zr,Vt.endDTS)}const on=Hr-Vt.start;Vt.start!==0&&(Vt.start=Hr),Vt.duration=Wr-Vt.start,Vt.startPTS=Hr,Vt.maxStartPTS=en,Vt.startDTS=Yr,Vt.endPTS=Wr,Vt.minEndPTS=tn,Vt.endDTS=Zr;const an=Vt.sn;if(!Kt||an<Kt.startSN||an>Kt.endSN)return 0;let $n;const ln=an-Kt.startSN,Hn=Kt.fragments;for(Hn[ln]=Vt,$n=ln;$n>0;$n--)Ht(Hn[$n],Hn[$n-1]);for($n=ln;$n<Hn.length-1;$n++)Ht(Hn[$n],Hn[$n+1]);return Kt.fragmentHint&&Ht(Hn[Hn.length-1],Kt.fragmentHint),Kt.PTSKnown=Kt.alignedSliding=!0,on}function na$1(Kt,Vt){let Hr=null;const Wr=Kt.fragments;for(let rn=Wr.length-1;rn>=0;rn--){const nn=Wr[rn].initSegment;if(nn){Hr=nn;break}}Kt.fragmentHint&&delete Kt.fragmentHint.endPTS;let Yr=0,Zr;if(la(Kt,Vt,(rn,nn)=>{rn.relurl&&(Yr=rn.cc-nn.cc),O$6(rn.startPTS)&&O$6(rn.endPTS)&&(nn.start=nn.startPTS=rn.startPTS,nn.startDTS=rn.startDTS,nn.maxStartPTS=rn.maxStartPTS,nn.endPTS=rn.endPTS,nn.endDTS=rn.endDTS,nn.minEndPTS=rn.minEndPTS,nn.duration=rn.endPTS-rn.startPTS,nn.duration&&(Zr=nn),Vt.PTSKnown=Vt.alignedSliding=!0),nn.elementaryStreams=rn.elementaryStreams,nn.loader=rn.loader,nn.stats=rn.stats,rn.initSegment&&(nn.initSegment=rn.initSegment,Hr=rn.initSegment)}),Hr&&(Vt.fragmentHint?Vt.fragments.concat(Vt.fragmentHint):Vt.fragments).forEach(rn=>{var nn;rn&&(!rn.initSegment||rn.initSegment.relurl===((nn=Hr)==null?void 0:nn.relurl))&&(rn.initSegment=Hr)}),Vt.skippedSegments)if(Vt.deltaUpdateFailed=Vt.fragments.some(rn=>!rn),Vt.deltaUpdateFailed){v$2.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let rn=Vt.skippedSegments;rn--;)Vt.fragments.shift();Vt.startSN=Vt.fragments[0].sn,Vt.startCC=Vt.fragments[0].cc}else Vt.canSkipDateRanges&&(Vt.dateRanges=aa(Kt.dateRanges,Vt.dateRanges,Vt.recentlyRemovedDateranges));const en=Vt.fragments;if(Yr){v$2.warn("discontinuity sliding from playlist, take drift into account");for(let rn=0;rn<en.length;rn++)en[rn].cc+=Yr}Vt.skippedSegments&&(Vt.startCC=Vt.fragments[0].cc),oa(Kt.partList,Vt.partList,(rn,nn)=>{nn.elementaryStreams=rn.elementaryStreams,nn.stats=rn.stats}),Zr?ir(Vt,Zr,Zr.startPTS,Zr.endPTS,Zr.startDTS,Zr.endDTS):rr(Kt,Vt),en.length&&(Vt.totalduration=Vt.edge-en[0].start),Vt.driftStartTime=Kt.driftStartTime,Vt.driftStart=Kt.driftStart;const tn=Vt.advancedDateTime;if(Vt.advanced&&tn){const rn=Vt.edge;Vt.driftStart||(Vt.driftStartTime=tn,Vt.driftStart=rn),Vt.driftEndTime=tn,Vt.driftEnd=rn}else Vt.driftEndTime=Kt.driftEndTime,Vt.driftEnd=Kt.driftEnd,Vt.advancedDateTime=Kt.advancedDateTime}function aa(Kt,Vt,Hr){const Wr=se$2({},Kt);return Hr&&Hr.forEach(Yr=>{delete Wr[Yr]}),Object.keys(Vt).forEach(Yr=>{const Zr=new Bi(Vt[Yr].attr,Wr[Yr]);Zr.isValid?Wr[Yr]=Zr:v$2.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(Vt[Yr].attr)}"`)}),Wr}function oa(Kt,Vt,Hr){if(Kt&&Vt){let Wr=0;for(let Yr=0,Zr=Kt.length;Yr<=Zr;Yr++){const en=Kt[Yr],tn=Vt[Yr+Wr];en&&tn&&en.index===tn.index&&en.fragment.sn===tn.fragment.sn?Hr(en,tn):Wr--}}}function la(Kt,Vt,Hr){const Wr=Vt.skippedSegments,Yr=Math.max(Kt.startSN,Vt.startSN)-Vt.startSN,Zr=(Kt.fragmentHint?1:0)+(Wr?Vt.endSN:Math.min(Kt.endSN,Vt.endSN))-Vt.startSN,en=Vt.startSN-Kt.startSN,tn=Vt.fragmentHint?Vt.fragments.concat(Vt.fragmentHint):Vt.fragments,rn=Kt.fragmentHint?Kt.fragments.concat(Kt.fragmentHint):Kt.fragments;for(let nn=Yr;nn<=Zr;nn++){const on=rn[en+nn];let an=tn[nn];Wr&&!an&&nn<Wr&&(an=Vt.fragments[nn]=on),on&&an&&Hr(on,an)}}function rr(Kt,Vt){const Hr=Vt.startSN+Vt.skippedSegments-Kt.startSN,Wr=Kt.fragments;Hr<0||Hr>=Wr.length||ls(Vt,Wr[Hr].start)}function ls(Kt,Vt){if(Vt){const Hr=Kt.fragments;for(let Wr=Kt.skippedSegments;Wr<Hr.length;Wr++)Hr[Wr].start+=Vt;Kt.fragmentHint&&(Kt.fragmentHint.start+=Vt)}}function ca(Kt,Vt=1/0){let Hr=1e3*Kt.targetduration;if(Kt.updated){const Wr=Kt.fragments;if(Wr.length&&Hr*4>Vt){const Yr=Wr[Wr.length-1].duration*1e3;Yr<Hr&&(Hr=Yr)}}else Hr/=2;return Math.round(Hr)}function ha(Kt,Vt,Hr){if(!(Kt!=null&&Kt.details))return null;const Wr=Kt.details;let Yr=Wr.fragments[Vt-Wr.startSN];return Yr||(Yr=Wr.fragmentHint,Yr&&Yr.sn===Vt)?Yr:Vt<Wr.startSN&&Hr&&Hr.sn===Vt?Hr:null}function ii(Kt,Vt,Hr){var Wr;return Kt!=null&&Kt.details?nr((Wr=Kt.details)==null?void 0:Wr.partList,Vt,Hr):null}function nr(Kt,Vt,Hr){if(Kt)for(let Wr=Kt.length;Wr--;){const Yr=Kt[Wr];if(Yr.index===Hr&&Yr.fragment.sn===Vt)return Yr}return null}function ar(Kt){Kt.forEach((Vt,Hr)=>{const{details:Wr}=Vt;Wr!=null&&Wr.fragments&&Wr.fragments.forEach(Yr=>{Yr.level=Hr})})}function bt$1(Kt){switch(Kt.details){case L$2.FRAG_LOAD_TIMEOUT:case L$2.KEY_LOAD_TIMEOUT:case L$2.LEVEL_LOAD_TIMEOUT:case L$2.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function ri(Kt,Vt){const Hr=bt$1(Vt);return Kt.default[`${Hr?"timeout":"error"}Retry`]}function Ss(Kt,Vt){const Hr=Kt.backoff==="linear"?1:Math.pow(2,Vt);return Math.min(Hr*Kt.retryDelayMs,Kt.maxRetryDelayMs)}function ni(Kt){return oe$2(oe$2({},Kt),{errorRetry:null,timeoutRetry:null})}function Dt(Kt,Vt,Hr,Wr){if(!Kt)return!1;const Yr=Wr==null?void 0:Wr.code,Zr=Vt<Kt.maxNumRetry&&(ua(Yr)||!!Hr);return Kt.shouldRetry?Kt.shouldRetry(Kt,Vt,Hr,Wr,Zr):Zr}function ua(Kt){return Kt===0&&navigator.onLine===!1||!!Kt&&(Kt<400||Kt>499)}const or={search:function(Kt,Vt){let Hr=0,Wr=Kt.length-1,Yr=null,Zr=null;for(;Hr<=Wr;){Yr=(Hr+Wr)/2|0,Zr=Kt[Yr];const en=Vt(Zr);if(en>0)Hr=Yr+1;else if(en<0)Wr=Yr-1;else return Zr}return null}};function da(Kt,Vt,Hr){if(Vt===null||!Array.isArray(Kt)||!Kt.length||!O$6(Vt))return null;const Wr=Kt[0].programDateTime;if(Vt<(Wr||0))return null;const Yr=Kt[Kt.length-1].endProgramDateTime;if(Vt>=(Yr||0))return null;Hr=Hr||0;for(let Zr=0;Zr<Kt.length;++Zr){const en=Kt[Zr];if(fa(Vt,Hr,en))return en}return null}function Ct$1(Kt,Vt,Hr=0,Wr=0){let Yr=null;if(Kt){Yr=Vt[Kt.sn-Vt[0].sn+1]||null;const en=Kt.endDTS-Hr;en>0&&en<15e-7&&(Hr+=15e-7)}else Hr===0&&Vt[0].start===0&&(Yr=Vt[0]);if(Yr&&(!Kt||Kt.level===Yr.level)&&cs(Hr,Wr,Yr)===0)return Yr;const Zr=or.search(Vt,cs.bind(null,Hr,Wr));return Zr&&(Zr!==Kt||!Yr)?Zr:Yr}function cs(Kt=0,Vt=0,Hr){if(Hr.start<=Kt&&Hr.start+Hr.duration>Kt)return 0;const Wr=Math.min(Vt,Hr.duration+(Hr.deltaPTS?Hr.deltaPTS:0));return Hr.start+Hr.duration-Wr<=Kt?1:Hr.start-Wr>Kt&&Hr.start?-1:0}function fa(Kt,Vt,Hr){const Wr=Math.min(Vt,Hr.duration+(Hr.deltaPTS?Hr.deltaPTS:0))*1e3;return(Hr.endProgramDateTime||0)-Wr>Kt}function ga(Kt,Vt){return or.search(Kt,Hr=>Hr.cc<Vt?1:Hr.cc>Vt?-1:0)}var ce$2={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},Te$1={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class ma{constructor(Vt){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=Vt,this.log=v$2.log.bind(v$2,"[info]:"),this.warn=v$2.warn.bind(v$2,"[warning]:"),this.error=v$2.error.bind(v$2,"[error]:"),this.registerListeners()}registerListeners(){const Vt=this.hls;Vt.on(m$2.ERROR,this.onError,this),Vt.on(m$2.MANIFEST_LOADING,this.onManifestLoading,this),Vt.on(m$2.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const Vt=this.hls;Vt&&(Vt.off(m$2.ERROR,this.onError,this),Vt.off(m$2.ERROR,this.onErrorOut,this),Vt.off(m$2.MANIFEST_LOADING,this.onManifestLoading,this),Vt.off(m$2.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(Vt){}stopLoad(){this.playlistError=0}getVariantLevelIndex(Vt){return(Vt==null?void 0:Vt.type)===N$4.MAIN?Vt.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(Vt,Hr){var Wr,Yr;if(Hr.fatal)return;const Zr=this.hls,en=Hr.context;switch(Hr.details){case L$2.FRAG_LOAD_ERROR:case L$2.FRAG_LOAD_TIMEOUT:case L$2.KEY_LOAD_ERROR:case L$2.KEY_LOAD_TIMEOUT:Hr.errorAction=this.getFragRetryOrSwitchAction(Hr);return;case L$2.FRAG_PARSING_ERROR:if((Wr=Hr.frag)!=null&&Wr.gap){Hr.errorAction={action:ce$2.DoNothing,flags:Te$1.None};return}case L$2.FRAG_GAP:case L$2.FRAG_DECRYPT_ERROR:{Hr.errorAction=this.getFragRetryOrSwitchAction(Hr),Hr.errorAction.action=ce$2.SendAlternateToPenaltyBox;return}case L$2.LEVEL_EMPTY_ERROR:case L$2.LEVEL_PARSING_ERROR:{var tn,rn;const nn=Hr.parent===N$4.MAIN?Hr.level:Zr.loadLevel;Hr.details===L$2.LEVEL_EMPTY_ERROR&&(tn=Hr.context)!=null&&(rn=tn.levelDetails)!=null&&rn.live?Hr.errorAction=this.getPlaylistRetryOrSwitchAction(Hr,nn):(Hr.levelRetry=!1,Hr.errorAction=this.getLevelSwitchAction(Hr,nn))}return;case L$2.LEVEL_LOAD_ERROR:case L$2.LEVEL_LOAD_TIMEOUT:typeof(en==null?void 0:en.level)=="number"&&(Hr.errorAction=this.getPlaylistRetryOrSwitchAction(Hr,en.level));return;case L$2.AUDIO_TRACK_LOAD_ERROR:case L$2.AUDIO_TRACK_LOAD_TIMEOUT:case L$2.SUBTITLE_LOAD_ERROR:case L$2.SUBTITLE_TRACK_LOAD_TIMEOUT:if(en){const nn=Zr.levels[Zr.loadLevel];if(nn&&(en.type===Y$6.AUDIO_TRACK&&nn.hasAudioGroup(en.groupId)||en.type===Y$6.SUBTITLE_TRACK&&nn.hasSubtitleGroup(en.groupId))){Hr.errorAction=this.getPlaylistRetryOrSwitchAction(Hr,Zr.loadLevel),Hr.errorAction.action=ce$2.SendAlternateToPenaltyBox,Hr.errorAction.flags=Te$1.MoveAllAlternatesMatchingHost;return}}return;case L$2.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const nn=Zr.levels[Zr.loadLevel],on=nn==null?void 0:nn.attrs["HDCP-LEVEL"];on?Hr.errorAction={action:ce$2.SendAlternateToPenaltyBox,flags:Te$1.MoveAllAlternatesMatchingHDCP,hdcpLevel:on}:this.keySystemError(Hr)}return;case L$2.BUFFER_ADD_CODEC_ERROR:case L$2.REMUX_ALLOC_ERROR:case L$2.BUFFER_APPEND_ERROR:Hr.errorAction=this.getLevelSwitchAction(Hr,(Yr=Hr.level)!=null?Yr:Zr.loadLevel);return;case L$2.INTERNAL_EXCEPTION:case L$2.BUFFER_APPENDING_ERROR:case L$2.BUFFER_FULL_ERROR:case L$2.LEVEL_SWITCH_ERROR:case L$2.BUFFER_STALLED_ERROR:case L$2.BUFFER_SEEK_OVER_HOLE:case L$2.BUFFER_NUDGE_ON_STALL:Hr.errorAction={action:ce$2.DoNothing,flags:Te$1.None};return}Hr.type===B$5.KEY_SYSTEM_ERROR&&this.keySystemError(Hr)}keySystemError(Vt){const Hr=this.getVariantLevelIndex(Vt.frag);Vt.levelRetry=!1,Vt.errorAction=this.getLevelSwitchAction(Vt,Hr)}getPlaylistRetryOrSwitchAction(Vt,Hr){const Wr=this.hls,Yr=ri(Wr.config.playlistLoadPolicy,Vt),Zr=this.playlistError++;if(Dt(Yr,Zr,bt$1(Vt),Vt.response))return{action:ce$2.RetryRequest,flags:Te$1.None,retryConfig:Yr,retryCount:Zr};const en=this.getLevelSwitchAction(Vt,Hr);return Yr&&(en.retryConfig=Yr,en.retryCount=Zr),en}getFragRetryOrSwitchAction(Vt){const Hr=this.hls,Wr=this.getVariantLevelIndex(Vt.frag),Yr=Hr.levels[Wr],{fragLoadPolicy:Zr,keyLoadPolicy:en}=Hr.config,tn=ri(Vt.details.startsWith("key")?en:Zr,Vt),rn=Hr.levels.reduce((on,an)=>on+an.fragmentError,0);if(Yr&&(Vt.details!==L$2.FRAG_GAP&&Yr.fragmentError++,Dt(tn,rn,bt$1(Vt),Vt.response)))return{action:ce$2.RetryRequest,flags:Te$1.None,retryConfig:tn,retryCount:rn};const nn=this.getLevelSwitchAction(Vt,Wr);return tn&&(nn.retryConfig=tn,nn.retryCount=rn),nn}getLevelSwitchAction(Vt,Hr){const Wr=this.hls;Hr==null&&(Hr=Wr.loadLevel);const Yr=this.hls.levels[Hr];if(Yr){var Zr,en;const nn=Vt.details;Yr.loadError++,nn===L$2.BUFFER_APPEND_ERROR&&Yr.fragmentError++;let on=-1;const{levels:an,loadLevel:$n,minAutoLevel:ln,maxAutoLevel:Hn}=Wr;Wr.autoLevelEnabled||(Wr.loadLevel=-1);const jn=(Zr=Vt.frag)==null?void 0:Zr.type,zn=(jn===N$4.AUDIO&&nn===L$2.FRAG_PARSING_ERROR||Vt.sourceBufferName==="audio"&&(nn===L$2.BUFFER_ADD_CODEC_ERROR||nn===L$2.BUFFER_APPEND_ERROR))&&an.some(({audioCodec:Mi})=>Yr.audioCodec!==Mi),Wn=Vt.sourceBufferName==="video"&&(nn===L$2.BUFFER_ADD_CODEC_ERROR||nn===L$2.BUFFER_APPEND_ERROR)&&an.some(({codecSet:Mi,audioCodec:Ni})=>Yr.codecSet!==Mi&&Yr.audioCodec===Ni),{type:ei,groupId:$i}=(en=Vt.context)!=null?en:{};for(let Mi=an.length;Mi--;){const Ni=(Mi+$n)%an.length;if(Ni!==$n&&Ni>=ln&&Ni<=Hn&&an[Ni].loadError===0){var tn,rn;const Ts=an[Ni];if(nn===L$2.FRAG_GAP&&Vt.frag){const ps=an[Ni].details;if(ps){const $s=Ct$1(Vt.frag,ps.fragments,Vt.frag.start);if($s!=null&&$s.gap)continue}}else if(ei===Y$6.AUDIO_TRACK&&Ts.hasAudioGroup($i)||ei===Y$6.SUBTITLE_TRACK&&Ts.hasSubtitleGroup($i)||jn===N$4.AUDIO&&(tn=Yr.audioGroups)!=null&&tn.some(ps=>Ts.hasAudioGroup(ps))||jn===N$4.SUBTITLE&&(rn=Yr.subtitleGroups)!=null&&rn.some(ps=>Ts.hasSubtitleGroup(ps))||zn&&Yr.audioCodec===Ts.audioCodec||!zn&&Yr.audioCodec!==Ts.audioCodec||Wn&&Yr.codecSet===Ts.codecSet)continue;on=Ni;break}}if(on>-1&&Wr.loadLevel!==on)return Vt.levelRetry=!0,this.playlistError=0,{action:ce$2.SendAlternateToPenaltyBox,flags:Te$1.None,nextAutoLevel:on}}return{action:ce$2.SendAlternateToPenaltyBox,flags:Te$1.MoveAllAlternatesMatchingHost}}onErrorOut(Vt,Hr){var Wr;switch((Wr=Hr.errorAction)==null?void 0:Wr.action){case ce$2.DoNothing:break;case ce$2.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(Hr),!Hr.errorAction.resolved&&Hr.details!==L$2.FRAG_GAP?Hr.fatal=!0:/MediaSource readyState: ended/.test(Hr.error.message)&&(this.warn(`MediaSource ended after "${Hr.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(Hr.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(Vt){const Hr=this.hls,Wr=Vt.errorAction;if(!Wr)return;const{flags:Yr,hdcpLevel:Zr,nextAutoLevel:en}=Wr;switch(Yr){case Te$1.None:this.switchLevel(Vt,en);break;case Te$1.MoveAllAlternatesMatchingHDCP:Zr&&(Hr.maxHdcpLevel=os[os.indexOf(Zr)-1],Wr.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${Hr.maxHdcpLevel}" or lower`);break}Wr.resolved||this.switchLevel(Vt,en)}switchLevel(Vt,Hr){Hr!==void 0&&Vt.errorAction&&(this.warn(`switching to level ${Hr} after ${Vt.details}`),this.hls.nextAutoLevel=Hr,Vt.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}}class vs{constructor(Vt,Hr){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=v$2.log.bind(v$2,`${Hr}:`),this.warn=v$2.warn.bind(v$2,`${Hr}:`),this.hls=Vt}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(Vt,Hr){const Wr=Hr==null?void 0:Hr.renditionReports;if(Wr){let Yr=-1;for(let Zr=0;Zr<Wr.length;Zr++){const en=Wr[Zr];let tn;try{tn=new self.URL(en.URI,Hr.url).href}catch(rn){v$2.warn(`Could not construct new URL for Rendition Report: ${rn}`),tn=en.URI||""}if(tn===Vt){Yr=Zr;break}else tn===Vt.substring(0,tn.length)&&(Yr=Zr)}if(Yr!==-1){const Zr=Wr[Yr],en=parseInt(Zr["LAST-MSN"])||(Hr==null?void 0:Hr.lastPartSn);let tn=parseInt(Zr["LAST-PART"])||(Hr==null?void 0:Hr.lastPartIndex);if(this.hls.config.lowLatencyMode){const rn=Math.min(Hr.age-Hr.partTarget,Hr.targetduration);tn>=0&&rn>Hr.partTarget&&(tn+=1)}return new ti(en,tn>=0?tn:void 0,tt.No)}}}loadPlaylist(Vt){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(Vt){return this.canLoad&&!!Vt&&!!Vt.url&&(!Vt.details||Vt.details.live)}shouldReloadPlaylist(Vt){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(Vt)}playlistLoaded(Vt,Hr,Wr){const{details:Yr,stats:Zr}=Hr,en=self.performance.now(),tn=Zr.loading.first?Math.max(0,en-Zr.loading.first):0;if(Yr.advancedDateTime=Date.now()-tn,Yr.live||Wr!=null&&Wr.live){if(Yr.reloaded(Wr),Wr&&this.log(`live playlist ${Vt} ${Yr.advanced?"REFRESHED "+Yr.lastPartSn+"-"+Yr.lastPartIndex:Yr.updated?"UPDATED":"MISSED"}`),Wr&&Yr.fragments.length>0&&na$1(Wr,Yr),!this.canLoad||!Yr.live)return;let rn,nn,on;if(Yr.canBlockReload&&Yr.endSN&&Yr.advanced){const zn=this.hls.config.lowLatencyMode,Wn=Yr.lastPartSn,ei=Yr.endSN,$i=Yr.lastPartIndex,Mi=$i!==-1,Ni=Wn===ei,Ts=zn?0:$i;Mi?(nn=Ni?ei+1:Wn,on=Ni?Ts:$i+1):nn=ei+1;const ps=Yr.age,$s=ps+Yr.ageHeader;let Ws=Math.min($s-Yr.partTarget,Yr.targetduration*1.5);if(Ws>0){if(Wr&&Ws>Wr.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${Wr.tuneInGoal} to: ${Ws} with playlist age: ${Yr.age}`),Ws=0;else{const Hs=Math.floor(Ws/Yr.targetduration);if(nn+=Hs,on!==void 0){const js=Math.round(Ws%Yr.targetduration/Yr.partTarget);on+=js}this.log(`CDN Tune-in age: ${Yr.ageHeader}s last advanced ${ps.toFixed(2)}s goal: ${Ws} skip sn ${Hs} to part ${on}`)}Yr.tuneInGoal=Ws}if(rn=this.getDeliveryDirectives(Yr,Hr.deliveryDirectives,nn,on),zn||!Ni){this.loadPlaylist(rn);return}}else(Yr.canBlockReload||Yr.canSkipUntil)&&(rn=this.getDeliveryDirectives(Yr,Hr.deliveryDirectives,nn,on));const an=this.hls.mainForwardBufferInfo,$n=an?an.end-an.len:0,ln=(Yr.edge-$n)*1e3,Hn=ca(Yr,ln);Yr.updated&&en>this.requestScheduled+Hn&&(this.requestScheduled=Zr.loading.start),nn!==void 0&&Yr.canBlockReload?this.requestScheduled=Zr.loading.first+Hn-(Yr.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+Hn<en?this.requestScheduled=en:this.requestScheduled-en<=0&&(this.requestScheduled+=Hn);let jn=this.requestScheduled-en;jn=Math.max(0,jn),this.log(`reload live playlist ${Vt} in ${Math.round(jn)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(rn),jn)}else this.clearTimer()}getDeliveryDirectives(Vt,Hr,Wr,Yr){let Zr=ra(Vt,Wr);return Hr!=null&&Hr.skip&&Vt.deltaUpdateFailed&&(Wr=Hr.msn,Yr=Hr.part,Zr=tt.No),new ti(Wr,Yr,Zr)}checkRetry(Vt){const Hr=Vt.details,Wr=bt$1(Vt),Yr=Vt.errorAction,{action:Zr,retryCount:en=0,retryConfig:tn}=Yr||{},rn=!!Yr&&!!tn&&(Zr===ce$2.RetryRequest||!Yr.resolved&&Zr===ce$2.SendAlternateToPenaltyBox);if(rn){var nn;if(this.requestScheduled=-1,en>=tn.maxNumRetry)return!1;if(Wr&&(nn=Vt.context)!=null&&nn.deliveryDirectives)this.warn(`Retrying playlist loading ${en+1}/${tn.maxNumRetry} after "${Hr}" without delivery-directives`),this.loadPlaylist();else{const on=Ss(tn,en);this.timer=self.setTimeout(()=>this.loadPlaylist(),on),this.warn(`Retrying playlist loading ${en+1}/${tn.maxNumRetry} after "${Hr}" in ${on}ms`)}Vt.levelRetry=!0,Yr.resolved=!0}return rn}}let Ne$1=class{constructor(Vt,Hr=0,Wr=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=Vt,this.alpha_=Vt?Math.exp(Math.log(.5)/Vt):0,this.estimate_=Hr,this.totalWeight_=Wr}sample(Vt,Hr){const Wr=Math.pow(this.alpha_,Vt);this.estimate_=Hr*(1-Wr)+Wr*this.estimate_,this.totalWeight_+=Vt}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const Vt=1-Math.pow(this.alpha_,this.totalWeight_);if(Vt)return this.estimate_/Vt}return this.estimate_}};class pa{constructor(Vt,Hr,Wr,Yr=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=Wr,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Ne$1(Vt),this.fast_=new Ne$1(Hr),this.defaultTTFB_=Yr,this.ttfb_=new Ne$1(Vt)}update(Vt,Hr){const{slow_:Wr,fast_:Yr,ttfb_:Zr}=this;Wr.halfLife!==Vt&&(this.slow_=new Ne$1(Vt,Wr.getEstimate(),Wr.getTotalWeight())),Yr.halfLife!==Hr&&(this.fast_=new Ne$1(Hr,Yr.getEstimate(),Yr.getTotalWeight())),Zr.halfLife!==Vt&&(this.ttfb_=new Ne$1(Vt,Zr.getEstimate(),Zr.getTotalWeight()))}sample(Vt,Hr){Vt=Math.max(Vt,this.minDelayMs_);const Wr=8*Hr,Yr=Vt/1e3,Zr=Wr/Yr;this.fast_.sample(Yr,Zr),this.slow_.sample(Yr,Zr)}sampleTTFB(Vt){const Hr=Vt/1e3,Wr=Math.sqrt(2)*Math.exp(-Math.pow(Hr,2)/2);this.ttfb_.sample(Wr,Math.max(Vt,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const lr={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},ai={};function Ta$1(Kt,Vt,Hr,Wr,Yr,Zr){const en=Kt.audioCodec?Kt.audioGroups:null,tn=Zr==null?void 0:Zr.audioCodec,rn=Zr==null?void 0:Zr.channels,nn=rn?parseInt(rn):tn?1/0:2;let on=null;if(en!=null&&en.length)try{en.length===1&&en[0]?on=Vt.groups[en[0]].channels:on=en.reduce((an,$n)=>{if($n){const ln=Vt.groups[$n];if(!ln)throw new Error(`Audio track group ${$n} not found`);Object.keys(ln.channels).forEach(Hn=>{an[Hn]=(an[Hn]||0)+ln.channels[Hn]})}return an},{2:0})}catch{return!0}return Kt.videoCodec!==void 0&&(Kt.width>1920&&Kt.height>1088||Kt.height>1920&&Kt.width>1088||Kt.frameRate>Math.max(Wr,30)||Kt.videoRange!=="SDR"&&Kt.videoRange!==Hr||Kt.bitrate>Math.max(Yr,8e6))||!!on&&O$6(nn)&&Object.keys(on).some(an=>parseInt(an)>nn)}function Ea(Kt,Vt,Hr){const Wr=Kt.videoCodec,Yr=Kt.audioCodec;if(!Wr||!Yr||!Hr)return Promise.resolve(lr);const Zr={width:Kt.width,height:Kt.height,bitrate:Math.ceil(Math.max(Kt.bitrate*.9,Kt.averageBitrate)),framerate:Kt.frameRate||30},en=Kt.videoRange;en!=="SDR"&&(Zr.transferFunction=en.toLowerCase());const tn=Wr.split(",").map(rn=>({type:"media-source",video:oe$2(oe$2({},Zr),{},{contentType:rt$1(rn,"video")})}));return Yr&&Kt.audioGroups&&Kt.audioGroups.forEach(rn=>{var nn;rn&&((nn=Vt.groups[rn])==null||nn.tracks.forEach(on=>{if(on.groupId===rn){const an=on.channels||"",$n=parseFloat(an);O$6($n)&&$n>2&&tn.push.apply(tn,Yr.split(",").map(ln=>({type:"media-source",audio:{contentType:rt$1(ln,"audio"),channels:""+$n}})))}}))}),Promise.all(tn.map(rn=>{const nn=ya(rn);return ai[nn]||(ai[nn]=Hr.decodingInfo(rn))})).then(rn=>({supported:!rn.some(nn=>!nn.supported),configurations:tn,decodingInfoResults:rn})).catch(rn=>({supported:!1,configurations:tn,decodingInfoResults:[],error:rn}))}function ya(Kt){const{audio:Vt,video:Hr}=Kt,Wr=Hr||Vt;if(Wr){const Yr=Wr.contentType.split('"')[1];if(Hr)return`r${Hr.height}x${Hr.width}f${Math.ceil(Hr.framerate)}${Hr.transferFunction||"sd"}_${Yr}_${Math.ceil(Hr.bitrate/1e5)}`;if(Vt)return`c${Vt.channels}${Vt.spatialRendering?"s":"n"}_${Yr}`}return""}function xa(){if(typeof matchMedia=="function"){const Kt=matchMedia("(dynamic-range: high)"),Vt=matchMedia("bad query");if(Kt.media!==Vt.media)return Kt.matches===!0}return!1}function Sa(Kt,Vt){let Hr=!1,Wr=[];return Kt&&(Hr=Kt!=="SDR",Wr=[Kt]),Vt&&(Wr=Vt.allowedVideoRanges||It$1.slice(0),Hr=Vt.preferHDR!==void 0?Vt.preferHDR:xa(),Hr?Wr=Wr.filter(Yr=>Yr!=="SDR"):Wr=["SDR"]),{preferHDR:Hr,allowedVideoRanges:Wr}}function va(Kt,Vt,Hr,Wr,Yr){const Zr=Object.keys(Kt),en=Wr==null?void 0:Wr.channels,tn=Wr==null?void 0:Wr.audioCodec,rn=en&&parseInt(en)===2;let nn=!0,on=!1,an=1/0,$n=1/0,ln=1/0,Hn=0,jn=[];const{preferHDR:zn,allowedVideoRanges:Wn}=Sa(Vt,Yr);for(let Mi=Zr.length;Mi--;){const Ni=Kt[Zr[Mi]];nn=Ni.channels[2]>0,an=Math.min(an,Ni.minHeight),$n=Math.min($n,Ni.minFramerate),ln=Math.min(ln,Ni.minBitrate);const Ts=Wn.filter(ps=>Ni.videoRanges[ps]>0);Ts.length>0&&(on=!0,jn=Ts)}an=O$6(an)?an:0,$n=O$6($n)?$n:0;const ei=Math.max(1080,an),$i=Math.max(30,$n);return ln=O$6(ln)?ln:Hr,Hr=Math.max(ln,Hr),on||(Vt=void 0,jn=[]),{codecSet:Zr.reduce((Mi,Ni)=>{const Ts=Kt[Ni];if(Ni===Mi)return Mi;if(Ts.minBitrate>Hr)return be(Ni,`min bitrate of ${Ts.minBitrate} > current estimate of ${Hr}`),Mi;if(!Ts.hasDefaultAudio)return be(Ni,"no renditions with default or auto-select sound found"),Mi;if(tn&&Ni.indexOf(tn.substring(0,4))%5!==0)return be(Ni,`audio codec preference "${tn}" not found`),Mi;if(en&&!rn){if(!Ts.channels[en])return be(Ni,`no renditions with ${en} channel sound found (channels options: ${Object.keys(Ts.channels)})`),Mi}else if((!tn||rn)&&nn&&Ts.channels[2]===0)return be(Ni,"no renditions with stereo sound found"),Mi;return Ts.minHeight>ei?(be(Ni,`min resolution of ${Ts.minHeight} > maximum of ${ei}`),Mi):Ts.minFramerate>$i?(be(Ni,`min framerate of ${Ts.minFramerate} > maximum of ${$i}`),Mi):jn.some(ps=>Ts.videoRanges[ps]>0)?Ts.maxScore<Hn?(be(Ni,`max score of ${Ts.maxScore} < selected max of ${Hn}`),Mi):Mi&&(Lt(Ni)>=Lt(Mi)||Ts.fragmentError>Kt[Mi].fragmentError)?Mi:(Hn=Ts.maxScore,Ni):(be(Ni,`no variants with VIDEO-RANGE of ${JSON.stringify(jn)} found`),Mi)},void 0),videoRanges:jn,preferHDR:zn,minFramerate:$n,minBitrate:ln}}function be(Kt,Vt){v$2.log(`[abr] start candidates with "${Kt}" ignored because ${Vt}`)}function Aa(Kt){return Kt.reduce((Vt,Hr)=>{let Wr=Vt.groups[Hr.groupId];Wr||(Wr=Vt.groups[Hr.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),Wr.tracks.push(Hr);const Yr=Hr.channels||"2";return Wr.channels[Yr]=(Wr.channels[Yr]||0)+1,Wr.hasDefault=Wr.hasDefault||Hr.default,Wr.hasAutoSelect=Wr.hasAutoSelect||Hr.autoselect,Wr.hasDefault&&(Vt.hasDefaultAudio=!0),Wr.hasAutoSelect&&(Vt.hasAutoSelectAudio=!0),Vt},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function La(Kt,Vt,Hr,Wr){return Kt.slice(Hr,Wr+1).reduce((Yr,Zr)=>{if(!Zr.codecSet)return Yr;const en=Zr.audioGroups;let tn=Yr[Zr.codecSet];tn||(Yr[Zr.codecSet]=tn={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!en,fragmentError:0}),tn.minBitrate=Math.min(tn.minBitrate,Zr.bitrate);const rn=Math.min(Zr.height,Zr.width);return tn.minHeight=Math.min(tn.minHeight,rn),tn.minFramerate=Math.min(tn.minFramerate,Zr.frameRate),tn.maxScore=Math.max(tn.maxScore,Zr.score),tn.fragmentError+=Zr.fragmentError,tn.videoRanges[Zr.videoRange]=(tn.videoRanges[Zr.videoRange]||0)+1,en&&en.forEach(nn=>{if(!nn)return;const on=Vt.groups[nn];tn.hasDefaultAudio=tn.hasDefaultAudio||Vt.hasDefaultAudio?on.hasDefault:on.hasAutoSelect||!Vt.hasDefaultAudio&&!Vt.hasAutoSelectAudio,Object.keys(on.channels).forEach(an=>{tn.channels[an]=(tn.channels[an]||0)+on.channels[an]})}),Yr},{})}function Le$1(Kt,Vt,Hr){if("attrs"in Kt){const Wr=Vt.indexOf(Kt);if(Wr!==-1)return Wr}for(let Wr=0;Wr<Vt.length;Wr++){const Yr=Vt[Wr];if(We(Kt,Yr,Hr))return Wr}return-1}function We(Kt,Vt,Hr){const{groupId:Wr,name:Yr,lang:Zr,assocLang:en,characteristics:tn,default:rn}=Kt,nn=Kt.forced;return(Wr===void 0||Vt.groupId===Wr)&&(Yr===void 0||Vt.name===Yr)&&(Zr===void 0||Vt.lang===Zr)&&(Zr===void 0||Vt.assocLang===en)&&(rn===void 0||Vt.default===rn)&&(nn===void 0||Vt.forced===nn)&&(tn===void 0||Ra(tn,Vt.characteristics))&&(Hr===void 0||Hr(Kt,Vt))}function Ra(Kt,Vt=""){const Hr=Kt.split(","),Wr=Vt.split(",");return Hr.length===Wr.length&&!Hr.some(Yr=>Wr.indexOf(Yr)===-1)}function Ue(Kt,Vt){const{audioCodec:Hr,channels:Wr}=Kt;return(Hr===void 0||(Vt.audioCodec||"").substring(0,4)===Hr.substring(0,4))&&(Wr===void 0||Wr===(Vt.channels||"2"))}function Ia(Kt,Vt,Hr,Wr,Yr){const Zr=Vt[Wr],en=Vt.reduce((an,$n,ln)=>{const Hn=$n.uri;return(an[Hn]||(an[Hn]=[])).push(ln),an},{})[Zr.uri];en.length>1&&(Wr=Math.max.apply(Math,en));const tn=Zr.videoRange,rn=Zr.frameRate,nn=Zr.codecSet.substring(0,4),on=oi(Vt,Wr,an=>{if(an.videoRange!==tn||an.frameRate!==rn||an.codecSet.substring(0,4)!==nn)return!1;const $n=an.audioGroups,ln=Hr.filter(Hn=>!$n||$n.indexOf(Hn.groupId)!==-1);return Le$1(Kt,ln,Yr)>-1});return on>-1?on:oi(Vt,Wr,an=>{const $n=an.audioGroups,ln=Hr.filter(Hn=>!$n||$n.indexOf(Hn.groupId)!==-1);return Le$1(Kt,ln,Yr)>-1})}function oi(Kt,Vt,Hr){for(let Wr=Vt;Wr;Wr--)if(Hr(Kt[Wr]))return Wr;for(let Wr=Vt+1;Wr<Kt.length;Wr++)if(Hr(Kt[Wr]))return Wr;return-1}class ba{constructor(Vt){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:Hr,partCurrent:Wr,hls:Yr}=this,{autoLevelEnabled:Zr,media:en}=Yr;if(!Hr||!en)return;const tn=performance.now(),rn=Wr?Wr.stats:Hr.stats,nn=Wr?Wr.duration:Hr.duration,on=tn-rn.loading.start,an=Yr.minAutoLevel;if(rn.aborted||rn.loaded&&rn.loaded===rn.total||Hr.level<=an){this.clearTimer(),this._nextAutoLevel=-1;return}if(!Zr||en.paused||!en.playbackRate||!en.readyState)return;const $n=Yr.mainForwardBufferInfo;if($n===null)return;const ln=this.bwEstimator.getEstimateTTFB(),Hn=Math.abs(en.playbackRate);if(on<=Math.max(ln,1e3*(nn/(Hn*2))))return;const jn=$n.len/Hn,zn=rn.loading.first?rn.loading.first-rn.loading.start:-1,Wn=rn.loaded&&zn>-1,ei=this.getBwEstimate(),$i=Yr.levels,Mi=$i[Hr.level],Ni=rn.total||Math.max(rn.loaded,Math.round(nn*Mi.averageBitrate/8));let Ts=Wn?on-zn:on;Ts<1&&Wn&&(Ts=Math.min(on,rn.loaded*8/ei));const ps=Wn?rn.loaded*1e3/Ts:0,$s=ps?(Ni-rn.loaded)/ps:Ni*8/ei+ln/1e3;if($s<=jn)return;const Ws=ps?ps*8:ei;let Hs=Number.POSITIVE_INFINITY,js;for(js=Hr.level-1;js>an;js--){const Xs=$i[js].maxBitrate;if(Hs=this.getTimeToLoadFrag(ln/1e3,Ws,nn*Xs,!$i[js].details),Hs<jn)break}if(Hs>=$s||Hs>nn*10)return;Yr.nextLoadLevel=Yr.nextAutoLevel=js,Wn?this.bwEstimator.sample(on-Math.min(ln,zn),rn.loaded):this.bwEstimator.sampleTTFB(on);const zs=$i[js].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>zs&&this.resetEstimator(zs),this.clearTimer(),v$2.warn(`[abr] Fragment ${Hr.sn}${Wr?" part "+Wr.index:""} of level ${Hr.level} is loading too slowly;
      Time to underbuffer: ${jn.toFixed(3)} s
      Estimated load time for current fragment: ${$s.toFixed(3)} s
      Estimated load time for down switch fragment: ${Hs.toFixed(3)} s
      TTFB estimate: ${zn|0} ms
      Current BW estimate: ${O$6(ei)?ei|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${js} @ ${zs|0} bps`),Yr.trigger(m$2.FRAG_LOAD_EMERGENCY_ABORTED,{frag:Hr,part:Wr,stats:rn})},this.hls=Vt,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(Vt){Vt&&(v$2.log(`setting initial bwe to ${Vt}`),this.hls.config.abrEwmaDefaultEstimate=Vt),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const Vt=this.hls.config;return new pa(Vt.abrEwmaSlowVoD,Vt.abrEwmaFastVoD,Vt.abrEwmaDefaultEstimate)}registerListeners(){const{hls:Vt}=this;Vt.on(m$2.MANIFEST_LOADING,this.onManifestLoading,this),Vt.on(m$2.FRAG_LOADING,this.onFragLoading,this),Vt.on(m$2.FRAG_LOADED,this.onFragLoaded,this),Vt.on(m$2.FRAG_BUFFERED,this.onFragBuffered,this),Vt.on(m$2.LEVEL_SWITCHING,this.onLevelSwitching,this),Vt.on(m$2.LEVEL_LOADED,this.onLevelLoaded,this),Vt.on(m$2.LEVELS_UPDATED,this.onLevelsUpdated,this),Vt.on(m$2.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),Vt.on(m$2.ERROR,this.onError,this)}unregisterListeners(){const{hls:Vt}=this;Vt&&(Vt.off(m$2.MANIFEST_LOADING,this.onManifestLoading,this),Vt.off(m$2.FRAG_LOADING,this.onFragLoading,this),Vt.off(m$2.FRAG_LOADED,this.onFragLoaded,this),Vt.off(m$2.FRAG_BUFFERED,this.onFragBuffered,this),Vt.off(m$2.LEVEL_SWITCHING,this.onLevelSwitching,this),Vt.off(m$2.LEVEL_LOADED,this.onLevelLoaded,this),Vt.off(m$2.LEVELS_UPDATED,this.onLevelsUpdated,this),Vt.off(m$2.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),Vt.off(m$2.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(Vt,Hr){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(Vt,Hr){const Wr=Hr.frag;if(!this.ignoreFragment(Wr)){if(!Wr.bitrateTest){var Yr;this.fragCurrent=Wr,this.partCurrent=(Yr=Hr.part)!=null?Yr:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(Vt,Hr){this.clearTimer()}onError(Vt,Hr){if(!Hr.fatal)switch(Hr.details){case L$2.BUFFER_ADD_CODEC_ERROR:case L$2.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case L$2.FRAG_LOAD_TIMEOUT:{const Wr=Hr.frag,{fragCurrent:Yr,partCurrent:Zr}=this;if(Wr&&Yr&&Wr.sn===Yr.sn&&Wr.level===Yr.level){const en=performance.now(),tn=Zr?Zr.stats:Wr.stats,rn=en-tn.loading.start,nn=tn.loading.first?tn.loading.first-tn.loading.start:-1;if(tn.loaded&&nn>-1){const on=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(rn-Math.min(on,nn),tn.loaded)}else this.bwEstimator.sampleTTFB(rn)}break}}}getTimeToLoadFrag(Vt,Hr,Wr,Yr){const Zr=Vt+Wr/Hr,en=Yr?this.lastLevelLoadSec:0;return Zr+en}onLevelLoaded(Vt,Hr){const Wr=this.hls.config,{loading:Yr}=Hr.stats,Zr=Yr.end-Yr.start;O$6(Zr)&&(this.lastLevelLoadSec=Zr/1e3),Hr.details.live?this.bwEstimator.update(Wr.abrEwmaSlowLive,Wr.abrEwmaFastLive):this.bwEstimator.update(Wr.abrEwmaSlowVoD,Wr.abrEwmaFastVoD)}onFragLoaded(Vt,{frag:Hr,part:Wr}){const Yr=Wr?Wr.stats:Hr.stats;if(Hr.type===N$4.MAIN&&this.bwEstimator.sampleTTFB(Yr.loading.first-Yr.loading.start),!this.ignoreFragment(Hr)){if(this.clearTimer(),Hr.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const Zr=Wr?Wr.duration:Hr.duration,en=this.hls.levels[Hr.level],tn=(en.loaded?en.loaded.bytes:0)+Yr.loaded,rn=(en.loaded?en.loaded.duration:0)+Zr;en.loaded={bytes:tn,duration:rn},en.realBitrate=Math.round(8*tn/rn)}if(Hr.bitrateTest){const Zr={stats:Yr,frag:Hr,part:Wr,id:Hr.type};this.onFragBuffered(m$2.FRAG_BUFFERED,Zr),Hr.bitrateTest=!1}else this.lastLoadedFragLevel=Hr.level}}onFragBuffered(Vt,Hr){const{frag:Wr,part:Yr}=Hr,Zr=Yr!=null&&Yr.stats.loaded?Yr.stats:Wr.stats;if(Zr.aborted||this.ignoreFragment(Wr))return;const en=Zr.parsing.end-Zr.loading.start-Math.min(Zr.loading.first-Zr.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(en,Zr.loaded),Zr.bwEstimate=this.getBwEstimate(),Wr.bitrateTest?this.bitrateTestDelay=en/1e3:this.bitrateTestDelay=0}ignoreFragment(Vt){return Vt.type!==N$4.MAIN||Vt.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:Vt,minAutoLevel:Hr}=this.hls,Wr=this.getBwEstimate(),Yr=this.hls.config.maxStarvationDelay,Zr=this.findBestLevel(Wr,Hr,Vt,0,Yr,1,1);if(Zr>-1)return Zr;const en=this.hls.firstLevel,tn=Math.min(Math.max(en,Hr),Vt);return v$2.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${en} clamped to ${tn}`),tn}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const Vt=this.forcedAutoLevel,Hr=this.bwEstimator.canEstimate(),Wr=this.lastLoadedFragLevel>-1;if(Vt!==-1&&(!Hr||!Wr||this.nextAutoLevelKey===this.getAutoLevelKey()))return Vt;const Yr=Hr&&Wr?this.getNextABRAutoLevel():this.firstAutoLevel;if(Vt!==-1){const Zr=this.hls.levels;if(Zr.length>Math.max(Vt,Yr)&&Zr[Vt].loadError<=Zr[Yr].loadError)return Vt}return this._nextAutoLevel=Yr,this.nextAutoLevelKey=this.getAutoLevelKey(),Yr}getAutoLevelKey(){var Vt;return`${this.getBwEstimate()}_${(Vt=this.hls.mainForwardBufferInfo)==null?void 0:Vt.len}`}getNextABRAutoLevel(){const{fragCurrent:Vt,partCurrent:Hr,hls:Wr}=this,{maxAutoLevel:Yr,config:Zr,minAutoLevel:en,media:tn}=Wr,rn=Hr?Hr.duration:Vt?Vt.duration:0,nn=tn&&tn.playbackRate!==0?Math.abs(tn.playbackRate):1,on=this.getBwEstimate(),an=Wr.mainForwardBufferInfo,$n=(an?an.len:0)/nn;let ln=Zr.abrBandWidthFactor,Hn=Zr.abrBandWidthUpFactor;if($n){const $i=this.findBestLevel(on,en,Yr,$n,0,ln,Hn);if($i>=0)return $i}let jn=rn?Math.min(rn,Zr.maxStarvationDelay):Zr.maxStarvationDelay;if(!$n){const $i=this.bitrateTestDelay;$i&&(jn=(rn?Math.min(rn,Zr.maxLoadingDelay):Zr.maxLoadingDelay)-$i,v$2.info(`[abr] bitrate test took ${Math.round(1e3*$i)}ms, set first fragment max fetchDuration to ${Math.round(1e3*jn)} ms`),ln=Hn=1)}const zn=this.findBestLevel(on,en,Yr,$n,jn,ln,Hn);if(v$2.info(`[abr] ${$n?"rebuffering expected":"buffer is empty"}, optimal quality level ${zn}`),zn>-1)return zn;const Wn=Wr.levels[en],ei=Wr.levels[Wr.loadLevel];return(Wn==null?void 0:Wn.bitrate)<(ei==null?void 0:ei.bitrate)?en:Wr.loadLevel}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(Vt,Hr,Wr,Yr,Zr,en,tn){var rn;const nn=Yr+Zr,on=this.lastLoadedFragLevel,an=on===-1?this.hls.firstLevel:on,{fragCurrent:$n,partCurrent:ln}=this,{levels:Hn,allAudioTracks:jn,loadLevel:zn,config:Wn}=this.hls;if(Hn.length===1)return 0;const ei=Hn[an],$i=!!(ei!=null&&(rn=ei.details)!=null&&rn.live),Mi=zn===-1||on===-1;let Ni,Ts="SDR",ps=(ei==null?void 0:ei.frameRate)||0;const{audioPreference:$s,videoPreference:Ws}=Wn,Hs=this.audioTracksByGroup||(this.audioTracksByGroup=Aa(jn));if(Mi){if(this.firstSelection!==-1)return this.firstSelection;const Qs=this.codecTiers||(this.codecTiers=La(Hn,Hs,Hr,Wr)),Zs=va(Qs,Ts,Vt,$s,Ws),{codecSet:Gs,videoRanges:Hl,minFramerate:Js,minBitrate:sa,preferHDR:Ca}=Zs;Ni=Gs,Ts=Ca?Hl[Hl.length-1]:Hl[0],ps=Js,Vt=Math.max(Vt,sa),v$2.log(`[abr] picked start tier ${JSON.stringify(Zs)}`)}else Ni=ei==null?void 0:ei.codecSet,Ts=ei==null?void 0:ei.videoRange;const js=ln?ln.duration:$n?$n.duration:0,zs=this.bwEstimator.getEstimateTTFB()/1e3,Xs=[];for(let Qs=Wr;Qs>=Hr;Qs--){var ia;const Zs=Hn[Qs],Gs=Qs>an;if(!Zs)continue;if(Wn.useMediaCapabilities&&!Zs.supportedResult&&!Zs.supportedPromise){const zl=navigator.mediaCapabilities;typeof(zl==null?void 0:zl.decodingInfo)=="function"&&Ta$1(Zs,Hs,Ts,ps,Vt,$s)?(Zs.supportedPromise=Ea(Zs,Hs,zl),Zs.supportedPromise.then(ec=>{Zs.supportedResult=ec;const sc=this.hls.levels,ac=sc.indexOf(Zs);ec.error?v$2.warn(`[abr] MediaCapabilities decodingInfo error: "${ec.error}" for level ${ac} ${JSON.stringify(ec)}`):ec.supported||(v$2.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${ac} ${JSON.stringify(ec)}`),ac>-1&&sc.length>1&&(v$2.log(`[abr] Removing unsupported level ${ac}`),this.hls.removeLevel(ac)))})):Zs.supportedResult=lr}if(Ni&&Zs.codecSet!==Ni||Ts&&Zs.videoRange!==Ts||Gs&&ps>Zs.frameRate||!Gs&&ps>0&&ps<Zs.frameRate||Zs.supportedResult&&!((ia=Zs.supportedResult.decodingInfoResults)!=null&&ia[0].smooth)){Xs.push(Qs);continue}const Hl=Zs.details,Js=(ln?Hl==null?void 0:Hl.partTarget:Hl==null?void 0:Hl.averagetargetduration)||js;let sa;Gs?sa=tn*Vt:sa=en*Vt;const Ca=js&&Yr>=js*2&&Zr===0?Hn[Qs].averageBitrate:Hn[Qs].maxBitrate,tc=this.getTimeToLoadFrag(zs,sa,Ca*Js,Hl===void 0);if(sa>=Ca&&(Qs===on||Zs.loadError===0&&Zs.fragmentError===0)&&(tc<=zs||!O$6(tc)||$i&&!this.bitrateTestDelay||tc<nn)){const zl=this.forcedAutoLevel;return Qs!==zn&&(zl===-1||zl!==zn)&&(Xs.length&&v$2.trace(`[abr] Skipped level(s) ${Xs.join(",")} of ${Wr} max with CODECS and VIDEO-RANGE:"${Hn[Xs[0]].codecs}" ${Hn[Xs[0]].videoRange}; not compatible with "${ei.codecs}" ${Ts}`),v$2.info(`[abr] switch candidate:${an}->${Qs} adjustedbw(${Math.round(sa)})-bitrate=${Math.round(sa-Ca)} ttfb:${zs.toFixed(1)} avgDuration:${Js.toFixed(1)} maxFetchDuration:${nn.toFixed(1)} fetchDuration:${tc.toFixed(1)} firstSelection:${Mi} codecSet:${Ni} videoRange:${Ts} hls.loadLevel:${zn}`)),Mi&&(this.firstSelection=Qs),Qs}}return-1}set nextAutoLevel(Vt){const Hr=Math.max(this.hls.minAutoLevel,Vt);this._nextAutoLevel!=Hr&&(this.nextAutoLevelKey="",this._nextAutoLevel=Hr)}}class Da{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(Vt){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,Vt),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var ae$2={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};const wa={length:0,start:()=>0,end:()=>0};let J$4=class Dc{static isBuffered(Vt,Hr){try{if(Vt){const Wr=Dc.getBuffered(Vt);for(let Yr=0;Yr<Wr.length;Yr++)if(Hr>=Wr.start(Yr)&&Hr<=Wr.end(Yr))return!0}}catch{}return!1}static bufferInfo(Vt,Hr,Wr){try{if(Vt){const Yr=Dc.getBuffered(Vt),Zr=[];let en;for(en=0;en<Yr.length;en++)Zr.push({start:Yr.start(en),end:Yr.end(en)});return this.bufferedInfo(Zr,Hr,Wr)}}catch{}return{len:0,start:Hr,end:Hr,nextStart:void 0}}static bufferedInfo(Vt,Hr,Wr){Hr=Math.max(0,Hr),Vt.sort(function(nn,on){return nn.start-on.start||on.end-nn.end});let Yr=[];if(Wr)for(let nn=0;nn<Vt.length;nn++){const on=Yr.length;if(on){const an=Yr[on-1].end;Vt[nn].start-an<Wr?Vt[nn].end>an&&(Yr[on-1].end=Vt[nn].end):Yr.push(Vt[nn])}else Yr.push(Vt[nn])}else Yr=Vt;let Zr=0,en,tn=Hr,rn=Hr;for(let nn=0;nn<Yr.length;nn++){const on=Yr[nn].start,an=Yr[nn].end;if(Hr+Wr>=on&&Hr<an)tn=on,rn=an,Zr=rn-Hr;else if(Hr+Wr<on){en=on;break}}return{len:Zr,start:tn||0,end:rn||0,nextStart:en}}static getBuffered(Vt){try{return Vt.buffered}catch(Hr){return v$2.log("failed to get media.buffered",Hr),wa}}};class As{constructor(Vt,Hr,Wr,Yr=0,Zr=-1,en=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=ct$1(),this.buffering={audio:ct$1(),video:ct$1(),audiovideo:ct$1()},this.level=Vt,this.sn=Hr,this.id=Wr,this.size=Yr,this.part=Zr,this.partial=en}}function ct$1(){return{start:0,executeStart:0,executeEnd:0,end:0}}function pt$1(Kt,Vt){for(let Wr=0,Yr=Kt.length;Wr<Yr;Wr++){var Hr;if(((Hr=Kt[Wr])==null?void 0:Hr.cc)===Vt)return Kt[Wr]}return null}function ka(Kt,Vt,Hr){return!!(Vt&&(Hr.endCC>Hr.startCC||Kt&&Kt.cc<Hr.startCC))}function _a(Kt,Vt){const Hr=Kt.fragments,Wr=Vt.fragments;if(!Wr.length||!Hr.length){v$2.log("No fragments to align");return}const Yr=pt$1(Hr,Wr[0].cc);if(!Yr||Yr&&!Yr.startPTS){v$2.log("No frag in previous level to align on");return}return Yr}function li(Kt,Vt){if(Kt){const Hr=Kt.start+Vt;Kt.start=Kt.startPTS=Hr,Kt.endPTS=Hr+Kt.duration}}function cr(Kt,Vt){const Hr=Vt.fragments;for(let Wr=0,Yr=Hr.length;Wr<Yr;Wr++)li(Hr[Wr],Kt);Vt.fragmentHint&&li(Vt.fragmentHint,Kt),Vt.alignedSliding=!0}function Pa(Kt,Vt,Hr){Vt&&(Fa(Kt,Hr,Vt),!Hr.alignedSliding&&Vt&&wt$1(Hr,Vt),!Hr.alignedSliding&&Vt&&!Hr.skippedSegments&&rr(Vt,Hr))}function Fa(Kt,Vt,Hr){if(ka(Kt,Hr,Vt)){const Wr=_a(Hr,Vt);Wr&&O$6(Wr.start)&&(v$2.log(`Adjusting PTS using last level due to CC increase within current level ${Vt.url}`),cr(Wr.start,Vt))}}function wt$1(Kt,Vt){if(!Kt.hasProgramDateTime||!Vt.hasProgramDateTime)return;const Hr=Kt.fragments,Wr=Vt.fragments;if(!Hr.length||!Wr.length)return;let Yr,Zr;const en=Math.min(Vt.endCC,Kt.endCC);Vt.startCC<en&&Kt.startCC<en&&(Yr=pt$1(Wr,en),Zr=pt$1(Hr,en)),(!Yr||!Zr)&&(Yr=Wr[Math.floor(Wr.length/2)],Zr=pt$1(Hr,Yr.cc)||Hr[Math.floor(Hr.length/2)]);const tn=Yr.programDateTime,rn=Zr.programDateTime;if(!tn||!rn)return;const nn=(rn-tn)/1e3-(Zr.start-Yr.start);cr(nn,Kt)}const ci=Math.pow(2,17);class Oa{constructor(Vt){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=Vt}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(Vt,Hr){const Wr=Vt.url;if(!Wr)return Promise.reject(new Ce$3({type:B$5.NETWORK_ERROR,details:L$2.FRAG_LOAD_ERROR,fatal:!1,frag:Vt,error:new Error(`Fragment does not have a ${Wr?"part list":"url"}`),networkDetails:null}));this.abort();const Yr=this.config,Zr=Yr.fLoader,en=Yr.loader;return new Promise((tn,rn)=>{if(this.loader&&this.loader.destroy(),Vt.gap)if(Vt.tagList.some(ln=>ln[0]==="GAP")){rn(ui(Vt));return}else Vt.gap=!1;const nn=this.loader=Vt.loader=Zr?new Zr(Yr):new en(Yr),on=hi(Vt),an=ni(Yr.fragLoadPolicy.default),$n={loadPolicy:an,timeout:an.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:Vt.sn==="initSegment"?1/0:ci};Vt.stats=nn.stats,nn.load(on,$n,{onSuccess:(ln,Hn,jn,zn)=>{this.resetLoader(Vt,nn);let Wn=ln.data;jn.resetIV&&Vt.decryptdata&&(Vt.decryptdata.iv=new Uint8Array(Wn.slice(0,16)),Wn=Wn.slice(16)),tn({frag:Vt,part:null,payload:Wn,networkDetails:zn})},onError:(ln,Hn,jn,zn)=>{this.resetLoader(Vt,nn),rn(new Ce$3({type:B$5.NETWORK_ERROR,details:L$2.FRAG_LOAD_ERROR,fatal:!1,frag:Vt,response:oe$2({url:Wr,data:void 0},ln),error:new Error(`HTTP Error ${ln.code} ${ln.text}`),networkDetails:jn,stats:zn}))},onAbort:(ln,Hn,jn)=>{this.resetLoader(Vt,nn),rn(new Ce$3({type:B$5.NETWORK_ERROR,details:L$2.INTERNAL_ABORTED,fatal:!1,frag:Vt,error:new Error("Aborted"),networkDetails:jn,stats:ln}))},onTimeout:(ln,Hn,jn)=>{this.resetLoader(Vt,nn),rn(new Ce$3({type:B$5.NETWORK_ERROR,details:L$2.FRAG_LOAD_TIMEOUT,fatal:!1,frag:Vt,error:new Error(`Timeout after ${$n.timeout}ms`),networkDetails:jn,stats:ln}))},onProgress:(ln,Hn,jn,zn)=>{Hr&&Hr({frag:Vt,part:null,payload:jn,networkDetails:zn})}})})}loadPart(Vt,Hr,Wr){this.abort();const Yr=this.config,Zr=Yr.fLoader,en=Yr.loader;return new Promise((tn,rn)=>{if(this.loader&&this.loader.destroy(),Vt.gap||Hr.gap){rn(ui(Vt,Hr));return}const nn=this.loader=Vt.loader=Zr?new Zr(Yr):new en(Yr),on=hi(Vt,Hr),an=ni(Yr.fragLoadPolicy.default),$n={loadPolicy:an,timeout:an.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:ci};Hr.stats=nn.stats,nn.load(on,$n,{onSuccess:(ln,Hn,jn,zn)=>{this.resetLoader(Vt,nn),this.updateStatsFromPart(Vt,Hr);const Wn={frag:Vt,part:Hr,payload:ln.data,networkDetails:zn};Wr(Wn),tn(Wn)},onError:(ln,Hn,jn,zn)=>{this.resetLoader(Vt,nn),rn(new Ce$3({type:B$5.NETWORK_ERROR,details:L$2.FRAG_LOAD_ERROR,fatal:!1,frag:Vt,part:Hr,response:oe$2({url:on.url,data:void 0},ln),error:new Error(`HTTP Error ${ln.code} ${ln.text}`),networkDetails:jn,stats:zn}))},onAbort:(ln,Hn,jn)=>{Vt.stats.aborted=Hr.stats.aborted,this.resetLoader(Vt,nn),rn(new Ce$3({type:B$5.NETWORK_ERROR,details:L$2.INTERNAL_ABORTED,fatal:!1,frag:Vt,part:Hr,error:new Error("Aborted"),networkDetails:jn,stats:ln}))},onTimeout:(ln,Hn,jn)=>{this.resetLoader(Vt,nn),rn(new Ce$3({type:B$5.NETWORK_ERROR,details:L$2.FRAG_LOAD_TIMEOUT,fatal:!1,frag:Vt,part:Hr,error:new Error(`Timeout after ${$n.timeout}ms`),networkDetails:jn,stats:ln}))}})})}updateStatsFromPart(Vt,Hr){const Wr=Vt.stats,Yr=Hr.stats,Zr=Yr.total;if(Wr.loaded+=Yr.loaded,Zr){const rn=Math.round(Vt.duration/Hr.duration),nn=Math.min(Math.round(Wr.loaded/Zr),rn),on=(rn-nn)*Math.round(Wr.loaded/nn);Wr.total=Wr.loaded+on}else Wr.total=Math.max(Wr.loaded,Wr.total);const en=Wr.loading,tn=Yr.loading;en.start?en.first+=tn.first-tn.start:(en.start=tn.start,en.first=tn.first),en.end=tn.end}resetLoader(Vt,Hr){Vt.loader=null,this.loader===Hr&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),Hr.destroy()}}function hi(Kt,Vt=null){const Hr=Vt||Kt,Wr={frag:Kt,part:Vt,responseType:"arraybuffer",url:Hr.url,headers:{},rangeStart:0,rangeEnd:0},Yr=Hr.byteRangeStartOffset,Zr=Hr.byteRangeEndOffset;if(O$6(Yr)&&O$6(Zr)){var en;let tn=Yr,rn=Zr;if(Kt.sn==="initSegment"&&((en=Kt.decryptdata)==null?void 0:en.method)==="AES-128"){const nn=Zr-Yr;nn%16&&(rn=Zr+(16-nn%16)),Yr!==0&&(Wr.resetIV=!0,tn=Yr-16)}Wr.rangeStart=tn,Wr.rangeEnd=rn}return Wr}function ui(Kt,Vt){const Hr=new Error(`GAP ${Kt.gap?"tag":"attribute"} found`),Wr={type:B$5.MEDIA_ERROR,details:L$2.FRAG_GAP,fatal:!1,frag:Kt,error:Hr,networkDetails:null};return Vt&&(Wr.part=Vt),(Vt||Kt).stats.aborted=!0,new Ce$3(Wr)}let Ce$3=class extends Error{constructor(Vt){super(Vt.error.message),this.data=void 0,this.data=Vt}};class Ma{constructor(Vt,Hr){this.subtle=void 0,this.aesIV=void 0,this.subtle=Vt,this.aesIV=Hr}decrypt(Vt,Hr){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},Hr,Vt)}}class Na{constructor(Vt,Hr){this.subtle=void 0,this.key=void 0,this.subtle=Vt,this.key=Hr}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function Ua(Kt){const Vt=Kt.byteLength,Hr=Vt&&new DataView(Kt.buffer).getUint8(Vt-1);return Hr?Me$1(Kt,0,Vt-Hr):Kt}class Ba{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(Vt){const Hr=new DataView(Vt),Wr=new Uint32Array(4);for(let Yr=0;Yr<4;Yr++)Wr[Yr]=Hr.getUint32(Yr*4);return Wr}initTable(){const Vt=this.sBox,Hr=this.invSBox,Wr=this.subMix,Yr=Wr[0],Zr=Wr[1],en=Wr[2],tn=Wr[3],rn=this.invSubMix,nn=rn[0],on=rn[1],an=rn[2],$n=rn[3],ln=new Uint32Array(256);let Hn=0,jn=0,zn=0;for(zn=0;zn<256;zn++)zn<128?ln[zn]=zn<<1:ln[zn]=zn<<1^283;for(zn=0;zn<256;zn++){let Wn=jn^jn<<1^jn<<2^jn<<3^jn<<4;Wn=Wn>>>8^Wn&255^99,Vt[Hn]=Wn,Hr[Wn]=Hn;const ei=ln[Hn],$i=ln[ei],Mi=ln[$i];let Ni=ln[Wn]*257^Wn*16843008;Yr[Hn]=Ni<<24|Ni>>>8,Zr[Hn]=Ni<<16|Ni>>>16,en[Hn]=Ni<<8|Ni>>>24,tn[Hn]=Ni,Ni=Mi*16843009^$i*65537^ei*257^Hn*16843008,nn[Wn]=Ni<<24|Ni>>>8,on[Wn]=Ni<<16|Ni>>>16,an[Wn]=Ni<<8|Ni>>>24,$n[Wn]=Ni,Hn?(Hn=ei^ln[ln[ln[Mi^ei]]],jn^=ln[ln[jn]]):Hn=jn=1}}expandKey(Vt){const Hr=this.uint8ArrayToUint32Array_(Vt);let Wr=!0,Yr=0;for(;Yr<Hr.length&&Wr;)Wr=Hr[Yr]===this.key[Yr],Yr++;if(Wr)return;this.key=Hr;const Zr=this.keySize=Hr.length;if(Zr!==4&&Zr!==6&&Zr!==8)throw new Error("Invalid aes key size="+Zr);const en=this.ksRows=(Zr+6+1)*4;let tn,rn;const nn=this.keySchedule=new Uint32Array(en),on=this.invKeySchedule=new Uint32Array(en),an=this.sBox,$n=this.rcon,ln=this.invSubMix,Hn=ln[0],jn=ln[1],zn=ln[2],Wn=ln[3];let ei,$i;for(tn=0;tn<en;tn++){if(tn<Zr){ei=nn[tn]=Hr[tn];continue}$i=ei,tn%Zr===0?($i=$i<<8|$i>>>24,$i=an[$i>>>24]<<24|an[$i>>>16&255]<<16|an[$i>>>8&255]<<8|an[$i&255],$i^=$n[tn/Zr|0]<<24):Zr>6&&tn%Zr===4&&($i=an[$i>>>24]<<24|an[$i>>>16&255]<<16|an[$i>>>8&255]<<8|an[$i&255]),nn[tn]=ei=(nn[tn-Zr]^$i)>>>0}for(rn=0;rn<en;rn++)tn=en-rn,rn&3?$i=nn[tn]:$i=nn[tn-4],rn<4||tn<=4?on[rn]=$i:on[rn]=Hn[an[$i>>>24]]^jn[an[$i>>>16&255]]^zn[an[$i>>>8&255]]^Wn[an[$i&255]],on[rn]=on[rn]>>>0}networkToHostOrderSwap(Vt){return Vt<<24|(Vt&65280)<<8|(Vt&16711680)>>8|Vt>>>24}decrypt(Vt,Hr,Wr){const Yr=this.keySize+6,Zr=this.invKeySchedule,en=this.invSBox,tn=this.invSubMix,rn=tn[0],nn=tn[1],on=tn[2],an=tn[3],$n=this.uint8ArrayToUint32Array_(Wr);let ln=$n[0],Hn=$n[1],jn=$n[2],zn=$n[3];const Wn=new Int32Array(Vt),ei=new Int32Array(Wn.length);let $i,Mi,Ni,Ts,ps,$s,Ws,Hs,js,zs,Xs,ia,Qs,Zs;const Gs=this.networkToHostOrderSwap;for(;Hr<Wn.length;){for(js=Gs(Wn[Hr]),zs=Gs(Wn[Hr+1]),Xs=Gs(Wn[Hr+2]),ia=Gs(Wn[Hr+3]),ps=js^Zr[0],$s=ia^Zr[1],Ws=Xs^Zr[2],Hs=zs^Zr[3],Qs=4,Zs=1;Zs<Yr;Zs++)$i=rn[ps>>>24]^nn[$s>>16&255]^on[Ws>>8&255]^an[Hs&255]^Zr[Qs],Mi=rn[$s>>>24]^nn[Ws>>16&255]^on[Hs>>8&255]^an[ps&255]^Zr[Qs+1],Ni=rn[Ws>>>24]^nn[Hs>>16&255]^on[ps>>8&255]^an[$s&255]^Zr[Qs+2],Ts=rn[Hs>>>24]^nn[ps>>16&255]^on[$s>>8&255]^an[Ws&255]^Zr[Qs+3],ps=$i,$s=Mi,Ws=Ni,Hs=Ts,Qs=Qs+4;$i=en[ps>>>24]<<24^en[$s>>16&255]<<16^en[Ws>>8&255]<<8^en[Hs&255]^Zr[Qs],Mi=en[$s>>>24]<<24^en[Ws>>16&255]<<16^en[Hs>>8&255]<<8^en[ps&255]^Zr[Qs+1],Ni=en[Ws>>>24]<<24^en[Hs>>16&255]<<16^en[ps>>8&255]<<8^en[$s&255]^Zr[Qs+2],Ts=en[Hs>>>24]<<24^en[ps>>16&255]<<16^en[$s>>8&255]<<8^en[Ws&255]^Zr[Qs+3],ei[Hr]=Gs($i^ln),ei[Hr+1]=Gs(Ts^Hn),ei[Hr+2]=Gs(Ni^jn),ei[Hr+3]=Gs(Mi^zn),ln=js,Hn=zs,jn=Xs,zn=ia,Hr=Hr+4}return ei.buffer}}const $a=16;class Ls{constructor(Vt,{removePKCS7Padding:Hr=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=Vt.enableSoftwareAES,this.removePKCS7Padding=Hr,Hr)try{const Wr=self.crypto;Wr&&(this.subtle=Wr.subtle||Wr.webkitSubtle)}catch{}this.subtle===null&&(this.useSoftware=!0)}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:Vt,remainderData:Hr}=this;if(!Vt||Hr)return this.reset(),null;const Wr=new Uint8Array(Vt);return this.reset(),this.removePKCS7Padding?Ua(Wr):Wr}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(Vt,Hr,Wr){return this.useSoftware?new Promise((Yr,Zr)=>{this.softwareDecrypt(new Uint8Array(Vt),Hr,Wr);const en=this.flush();en?Yr(en.buffer):Zr(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(Vt),Hr,Wr)}softwareDecrypt(Vt,Hr,Wr){const{currentIV:Yr,currentResult:Zr,remainderData:en}=this;this.logOnce("JS AES decrypt"),en&&(Vt=pe$1(en,Vt),this.remainderData=null);const tn=this.getValidChunk(Vt);if(!tn.length)return null;Yr&&(Wr=Yr);let rn=this.softwareDecrypter;rn||(rn=this.softwareDecrypter=new Ba),rn.expandKey(Hr);const nn=Zr;return this.currentResult=rn.decrypt(tn.buffer,0,Wr),this.currentIV=Me$1(tn,-16).buffer,nn||null}webCryptoDecrypt(Vt,Hr,Wr){const Yr=this.subtle;return(this.key!==Hr||!this.fastAesKey)&&(this.key=Hr,this.fastAesKey=new Na(Yr,Hr)),this.fastAesKey.expandKey().then(Zr=>Yr?(this.logOnce("WebCrypto AES decrypt"),new Ma(Yr,new Uint8Array(Wr)).decrypt(Vt.buffer,Zr)):Promise.reject(new Error("web crypto not initialized"))).catch(Zr=>(v$2.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${Zr.name}: ${Zr.message}`),this.onWebCryptoError(Vt,Hr,Wr)))}onWebCryptoError(Vt,Hr,Wr){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(Vt,Hr,Wr);const Yr=this.flush();if(Yr)return Yr.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(Vt){let Hr=Vt;const Wr=Vt.length-Vt.length%$a;return Wr!==Vt.length&&(Hr=Me$1(Vt,0,Wr),this.remainderData=Me$1(Vt,Wr)),Hr}logOnce(Vt){this.logEnabled&&(v$2.log(`[decrypter]: ${Vt}`),this.logEnabled=!1)}}const Ga={toString:function(Kt){let Vt="";const Hr=Kt.length;for(let Wr=0;Wr<Hr;Wr++)Vt+=`[${Kt.start(Wr).toFixed(3)}-${Kt.end(Wr).toFixed(3)}]`;return Vt}},C$2={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class Rs extends Da{constructor(Vt,Hr,Wr,Yr,Zr){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=C$2.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=Zr,this.logPrefix=Yr,this.log=v$2.log.bind(v$2,`${Yr}:`),this.warn=v$2.warn.bind(v$2,`${Yr}:`),this.hls=Vt,this.fragmentLoader=new Oa(Vt.config),this.keyLoader=Wr,this.fragmentTracker=Hr,this.config=Vt.config,this.decrypter=new Ls(Vt.config),Vt.on(m$2.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(Vt){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const Vt=this.fragCurrent;Vt!=null&&Vt.loader&&(Vt.abortRequests(),this.fragmentTracker.removeFragment(Vt)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=C$2.STOPPED}_streamEnded(Vt,Hr){if(Hr.live||Vt.nextStart||!Vt.end||!this.media)return!1;const Wr=Hr.partList;if(Wr!=null&&Wr.length){const Zr=Wr[Wr.length-1];return J$4.isBuffered(this.media,Zr.start+Zr.duration/2)}const Yr=Hr.fragments[Hr.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(Yr)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var Vt;return(Vt=this.levelLastLoaded)==null?void 0:Vt.details}}onMediaAttached(Vt,Hr){const Wr=this.media=this.mediaBuffer=Hr.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),Wr.addEventListener("seeking",this.onvseeking),Wr.addEventListener("ended",this.onvended);const Yr=this.config;this.levels&&Yr.autoStartLoad&&this.state===C$2.STOPPED&&this.startLoad(Yr.startPosition)}onMediaDetaching(){const Vt=this.media;Vt!=null&&Vt.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),Vt&&this.onvseeking&&this.onvended&&(Vt.removeEventListener("seeking",this.onvseeking),Vt.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:Vt,fragCurrent:Hr,media:Wr,mediaBuffer:Yr,state:Zr}=this,en=Wr?Wr.currentTime:0,tn=J$4.bufferInfo(Yr||Wr,en,Vt.maxBufferHole);if(this.log(`media seeking to ${O$6(en)?en.toFixed(3):en}, state: ${Zr}`),this.state===C$2.ENDED)this.resetLoadingState();else if(Hr){const rn=Vt.maxFragLookUpTolerance,nn=Hr.start-rn,on=Hr.start+Hr.duration+rn;if(!tn.len||on<tn.start||nn>tn.end){const an=en>on;(en<nn||an)&&(an&&Hr.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),Hr.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}Wr&&(this.fragmentTracker.removeFragmentsInRange(en,1/0,this.playlistType,!0),this.lastCurrentTime=en),!this.loadedmetadata&&!tn.len&&(this.nextLoadPosition=this.startPosition=en),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(Vt,Hr){this.startTimeOffset=Hr.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(m$2.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=C$2.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(Vt,Hr,Wr){this._loadFragForPlayback(Vt,Hr,Wr)}_loadFragForPlayback(Vt,Hr,Wr){const Yr=Zr=>{if(this.fragContextChanged(Vt)){this.warn(`Fragment ${Vt.sn}${Zr.part?" p: "+Zr.part.index:""} of level ${Vt.level} was dropped during download.`),this.fragmentTracker.removeFragment(Vt);return}Vt.stats.chunkCount++,this._handleFragmentLoadProgress(Zr)};this._doFragLoad(Vt,Hr,Wr,Yr).then(Zr=>{if(!Zr)return;const en=this.state;if(this.fragContextChanged(Vt)){(en===C$2.FRAG_LOADING||!this.fragCurrent&&en===C$2.PARSING)&&(this.fragmentTracker.removeFragment(Vt),this.state=C$2.IDLE);return}"payload"in Zr&&(this.log(`Loaded fragment ${Vt.sn} of level ${Vt.level}`),this.hls.trigger(m$2.FRAG_LOADED,Zr)),this._handleFragmentLoadComplete(Zr)}).catch(Zr=>{this.state===C$2.STOPPED||this.state===C$2.ERROR||(this.warn(Zr),this.resetFragmentLoading(Vt))})}clearTrackerIfNeeded(Vt){var Hr;const{fragmentTracker:Wr}=this;if(Wr.getState(Vt)===ae$2.APPENDING){const Yr=Vt.type,Zr=this.getFwdBufferInfo(this.mediaBuffer,Yr),en=Math.max(Vt.duration,Zr?Zr.len:this.config.maxBufferLength);this.reduceMaxBufferLength(en)&&Wr.removeFragment(Vt)}else((Hr=this.mediaBuffer)==null?void 0:Hr.buffered.length)===0?Wr.removeAllFragments():Wr.hasParts(Vt.type)&&(Wr.detectPartialFragments({frag:Vt,part:null,stats:Vt.stats,id:Vt.type}),Wr.getState(Vt)===ae$2.PARTIAL&&Wr.removeFragment(Vt))}checkLiveUpdate(Vt){if(Vt.updated&&!Vt.live){const Hr=Vt.fragments[Vt.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:Hr,part:null,stats:Hr.stats,id:Hr.type})}Vt.fragments[0]||(Vt.deltaUpdateFailed=!0)}flushMainBuffer(Vt,Hr,Wr=null){if(!(Vt-Hr))return;const Yr={startOffset:Vt,endOffset:Hr,type:Wr};this.hls.trigger(m$2.BUFFER_FLUSHING,Yr)}_loadInitSegment(Vt,Hr){this._doFragLoad(Vt,Hr).then(Wr=>{if(!Wr||this.fragContextChanged(Vt)||!this.levels)throw new Error("init load aborted");return Wr}).then(Wr=>{const{hls:Yr}=this,{payload:Zr}=Wr,en=Vt.decryptdata;if(Zr&&Zr.byteLength>0&&en!=null&&en.key&&en.iv&&en.method==="AES-128"){const tn=self.performance.now();return this.decrypter.decrypt(new Uint8Array(Zr),en.key.buffer,en.iv.buffer).catch(rn=>{throw Yr.trigger(m$2.ERROR,{type:B$5.MEDIA_ERROR,details:L$2.FRAG_DECRYPT_ERROR,fatal:!1,error:rn,reason:rn.message,frag:Vt}),rn}).then(rn=>{const nn=self.performance.now();return Yr.trigger(m$2.FRAG_DECRYPTED,{frag:Vt,payload:rn,stats:{tstart:tn,tdecrypt:nn}}),Wr.payload=rn,this.completeInitSegmentLoad(Wr)})}return this.completeInitSegmentLoad(Wr)}).catch(Wr=>{this.state===C$2.STOPPED||this.state===C$2.ERROR||(this.warn(Wr),this.resetFragmentLoading(Vt))})}completeInitSegmentLoad(Vt){const{levels:Hr}=this;if(!Hr)throw new Error("init load aborted, missing levels");const Wr=Vt.frag.stats;this.state=C$2.IDLE,Vt.frag.data=new Uint8Array(Vt.payload),Wr.parsing.start=Wr.buffering.start=self.performance.now(),Wr.parsing.end=Wr.buffering.end=self.performance.now(),this.tick()}fragContextChanged(Vt){const{fragCurrent:Hr}=this;return!Vt||!Hr||Vt.sn!==Hr.sn||Vt.level!==Hr.level}fragBufferedComplete(Vt,Hr){var Wr,Yr,Zr,en;const tn=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${Vt.type} sn: ${Vt.sn}${Hr?" part: "+Hr.index:""} of ${this.playlistType===N$4.MAIN?"level":"track"} ${Vt.level} (frag:[${((Wr=Vt.startPTS)!=null?Wr:NaN).toFixed(3)}-${((Yr=Vt.endPTS)!=null?Yr:NaN).toFixed(3)}] > buffer:${tn?Ga.toString(J$4.getBuffered(tn)):"(detached)"})`),Vt.sn!=="initSegment"){var rn;if(Vt.type!==N$4.SUBTITLE){const on=Vt.elementaryStreams;if(!Object.keys(on).some(an=>!!on[an])){this.state=C$2.IDLE;return}}const nn=(rn=this.levels)==null?void 0:rn[Vt.level];nn!=null&&nn.fragmentError&&(this.log(`Resetting level fragment error count of ${nn.fragmentError} on frag buffered`),nn.fragmentError=0)}this.state=C$2.IDLE,tn&&(!this.loadedmetadata&&Vt.type==N$4.MAIN&&tn.buffered.length&&((Zr=this.fragCurrent)==null?void 0:Zr.sn)===((en=this.fragPrevious)==null?void 0:en.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(Vt){const{transmuxer:Hr}=this;if(!Hr)return;const{frag:Wr,part:Yr,partsLoaded:Zr}=Vt,en=!Zr||Zr.length===0||Zr.some(rn=>!rn),tn=new As(Wr.level,Wr.sn,Wr.stats.chunkCount+1,0,Yr?Yr.index:-1,!en);Hr.flush(tn)}_handleFragmentLoadProgress(Vt){}_doFragLoad(Vt,Hr,Wr=null,Yr){var Zr;const en=Hr==null?void 0:Hr.details;if(!this.levels||!en)throw new Error(`frag load aborted, missing level${en?"":" detail"}s`);let tn=null;if(Vt.encrypted&&!((Zr=Vt.decryptdata)!=null&&Zr.key)?(this.log(`Loading key for ${Vt.sn} of [${en.startSN}-${en.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${Vt.level}`),this.state=C$2.KEY_LOADING,this.fragCurrent=Vt,tn=this.keyLoader.load(Vt).then(on=>{if(!this.fragContextChanged(on.frag))return this.hls.trigger(m$2.KEY_LOADED,on),this.state===C$2.KEY_LOADING&&(this.state=C$2.IDLE),on}),this.hls.trigger(m$2.KEY_LOADING,{frag:Vt}),this.fragCurrent===null&&(tn=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!Vt.encrypted&&en.encryptedFragments.length&&this.keyLoader.loadClear(Vt,en.encryptedFragments),Wr=Math.max(Vt.start,Wr||0),this.config.lowLatencyMode&&Vt.sn!=="initSegment"){const on=en.partList;if(on&&Yr){Wr>Vt.end&&en.fragmentHint&&(Vt=en.fragmentHint);const an=this.getNextPart(on,Vt,Wr);if(an>-1){const $n=on[an];this.log(`Loading part sn: ${Vt.sn} p: ${$n.index} cc: ${Vt.cc} of playlist [${en.startSN}-${en.endSN}] parts [0-${an}-${on.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${Vt.level}, target: ${parseFloat(Wr.toFixed(3))}`),this.nextLoadPosition=$n.start+$n.duration,this.state=C$2.FRAG_LOADING;let ln;return tn?ln=tn.then(Hn=>!Hn||this.fragContextChanged(Hn.frag)?null:this.doFragPartsLoad(Vt,$n,Hr,Yr)).catch(Hn=>this.handleFragLoadError(Hn)):ln=this.doFragPartsLoad(Vt,$n,Hr,Yr).catch(Hn=>this.handleFragLoadError(Hn)),this.hls.trigger(m$2.FRAG_LOADING,{frag:Vt,part:$n,targetBufferTime:Wr}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):ln}else if(!Vt.url||this.loadedEndOfParts(on,Wr))return Promise.resolve(null)}}this.log(`Loading fragment ${Vt.sn} cc: ${Vt.cc} ${en?"of ["+en.startSN+"-"+en.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${Vt.level}, target: ${parseFloat(Wr.toFixed(3))}`),O$6(Vt.sn)&&!this.bitrateTest&&(this.nextLoadPosition=Vt.start+Vt.duration),this.state=C$2.FRAG_LOADING;const rn=this.config.progressive;let nn;return rn&&tn?nn=tn.then(on=>!on||this.fragContextChanged(on==null?void 0:on.frag)?null:this.fragmentLoader.load(Vt,Yr)).catch(on=>this.handleFragLoadError(on)):nn=Promise.all([this.fragmentLoader.load(Vt,rn?Yr:void 0),tn]).then(([on])=>(!rn&&on&&Yr&&Yr(on),on)).catch(on=>this.handleFragLoadError(on)),this.hls.trigger(m$2.FRAG_LOADING,{frag:Vt,targetBufferTime:Wr}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):nn}doFragPartsLoad(Vt,Hr,Wr,Yr){return new Promise((Zr,en)=>{var tn;const rn=[],nn=(tn=Wr.details)==null?void 0:tn.partList,on=an=>{this.fragmentLoader.loadPart(Vt,an,Yr).then($n=>{rn[an.index]=$n;const ln=$n.part;this.hls.trigger(m$2.FRAG_LOADED,$n);const Hn=ii(Wr,Vt.sn,an.index+1)||nr(nn,Vt.sn,an.index+1);if(Hn)on(Hn);else return Zr({frag:Vt,part:ln,partsLoaded:rn})}).catch(en)};on(Hr)})}handleFragLoadError(Vt){if("data"in Vt){const Hr=Vt.data;Vt.data&&Hr.details===L$2.INTERNAL_ABORTED?this.handleFragLoadAborted(Hr.frag,Hr.part):this.hls.trigger(m$2.ERROR,Hr)}else this.hls.trigger(m$2.ERROR,{type:B$5.OTHER_ERROR,details:L$2.INTERNAL_EXCEPTION,err:Vt,error:Vt,fatal:!0});return null}_handleTransmuxerFlush(Vt){const Hr=this.getCurrentContext(Vt);if(!Hr||this.state!==C$2.PARSING){!this.fragCurrent&&this.state!==C$2.STOPPED&&this.state!==C$2.ERROR&&(this.state=C$2.IDLE);return}const{frag:Wr,part:Yr,level:Zr}=Hr,en=self.performance.now();Wr.stats.parsing.end=en,Yr&&(Yr.stats.parsing.end=en),this.updateLevelTiming(Wr,Yr,Zr,Vt.partial)}getCurrentContext(Vt){const{levels:Hr,fragCurrent:Wr}=this,{level:Yr,sn:Zr,part:en}=Vt;if(!(Hr!=null&&Hr[Yr]))return this.warn(`Levels object was unset while buffering fragment ${Zr} of level ${Yr}. The current chunk will not be buffered.`),null;const tn=Hr[Yr],rn=en>-1?ii(tn,Zr,en):null,nn=rn?rn.fragment:ha(tn,Zr,Wr);return nn?(Wr&&Wr!==nn&&(nn.stats=Wr.stats),{frag:nn,part:rn,level:tn}):null}bufferFragmentData(Vt,Hr,Wr,Yr,Zr){var en;if(!Vt||this.state!==C$2.PARSING)return;const{data1:tn,data2:rn}=Vt;let nn=tn;if(tn&&rn&&(nn=pe$1(tn,rn)),!((en=nn)!=null&&en.length))return;const on={type:Vt.type,frag:Hr,part:Wr,chunkMeta:Yr,parent:Hr.type,data:nn};if(this.hls.trigger(m$2.BUFFER_APPENDING,on),Vt.dropped&&Vt.independent&&!Wr){if(Zr)return;this.flushBufferGap(Hr)}}flushBufferGap(Vt){const Hr=this.media;if(!Hr)return;if(!J$4.isBuffered(Hr,Hr.currentTime)){this.flushMainBuffer(0,Vt.start);return}const Wr=Hr.currentTime,Yr=J$4.bufferInfo(Hr,Wr,0),Zr=Vt.duration,en=Math.min(this.config.maxFragLookUpTolerance*2,Zr*.25),tn=Math.max(Math.min(Vt.start-en,Yr.end-en),Wr+en);Vt.start-tn>en&&this.flushMainBuffer(tn,Vt.start)}getFwdBufferInfo(Vt,Hr){const Wr=this.getLoadPosition();return O$6(Wr)?this.getFwdBufferInfoAtPos(Vt,Wr,Hr):null}getFwdBufferInfoAtPos(Vt,Hr,Wr){const{config:{maxBufferHole:Yr}}=this,Zr=J$4.bufferInfo(Vt,Hr,Yr);if(Zr.len===0&&Zr.nextStart!==void 0){const en=this.fragmentTracker.getBufferedFrag(Hr,Wr);if(en&&Zr.nextStart<en.end)return J$4.bufferInfo(Vt,Hr,Math.max(Zr.nextStart,Yr))}return Zr}getMaxBufferLength(Vt){const{config:Hr}=this;let Wr;return Vt?Wr=Math.max(8*Hr.maxBufferSize/Vt,Hr.maxBufferLength):Wr=Hr.maxBufferLength,Math.min(Wr,Hr.maxMaxBufferLength)}reduceMaxBufferLength(Vt){const Hr=this.config,Wr=Vt||Hr.maxBufferLength;return Hr.maxMaxBufferLength>=Wr?(Hr.maxMaxBufferLength/=2,this.warn(`Reduce max buffer length to ${Hr.maxMaxBufferLength}s`),!0):!1}getAppendedFrag(Vt,Hr=N$4.MAIN){const Wr=this.fragmentTracker.getAppendedFrag(Vt,N$4.MAIN);return Wr&&"fragment"in Wr?Wr.fragment:Wr}getNextFragment(Vt,Hr){const Wr=Hr.fragments,Yr=Wr.length;if(!Yr)return null;const{config:Zr}=this,en=Wr[0].start;let tn;if(Hr.live){const rn=Zr.initialLiveManifestSize;if(Yr<rn)return this.warn(`Not enough fragments to start playback (have: ${Yr}, need: ${rn})`),null;(!Hr.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||Vt<en)&&(tn=this.getInitialLiveFragment(Hr,Wr),this.startPosition=this.nextLoadPosition=tn?this.hls.liveSyncPosition||tn.start:Vt)}else Vt<=en&&(tn=Wr[0]);if(!tn){const rn=Zr.lowLatencyMode?Hr.partEnd:Hr.fragmentEnd;tn=this.getFragmentAtPosition(Vt,rn,Hr)}return this.mapToInitFragWhenRequired(tn)}isLoopLoading(Vt,Hr){const Wr=this.fragmentTracker.getState(Vt);return(Wr===ae$2.OK||Wr===ae$2.PARTIAL&&!!Vt.gap)&&this.nextLoadPosition>Hr}getNextFragmentLoopLoading(Vt,Hr,Wr,Yr,Zr){const en=Vt.gap,tn=this.getNextFragment(this.nextLoadPosition,Hr);if(tn===null)return tn;if(Vt=tn,en&&Vt&&!Vt.gap&&Wr.nextStart){const rn=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,Wr.nextStart,Yr);if(rn!==null&&Wr.len+rn.len>=Zr)return this.log(`buffer full after gaps in "${Yr}" playlist starting at sn: ${Vt.sn}`),null}return Vt}mapToInitFragWhenRequired(Vt){return Vt!=null&&Vt.initSegment&&!(Vt!=null&&Vt.initSegment.data)&&!this.bitrateTest?Vt.initSegment:Vt}getNextPart(Vt,Hr,Wr){let Yr=-1,Zr=!1,en=!0;for(let tn=0,rn=Vt.length;tn<rn;tn++){const nn=Vt[tn];if(en=en&&!nn.independent,Yr>-1&&Wr<nn.start)break;const on=nn.loaded;on?Yr=-1:(Zr||nn.independent||en)&&nn.fragment===Hr&&(Yr=tn),Zr=on}return Yr}loadedEndOfParts(Vt,Hr){const Wr=Vt[Vt.length-1];return Wr&&Hr>Wr.start&&Wr.loaded}getInitialLiveFragment(Vt,Hr){const Wr=this.fragPrevious;let Yr=null;if(Wr){if(Vt.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${Wr.programDateTime}`),Yr=da(Hr,Wr.endProgramDateTime,this.config.maxFragLookUpTolerance)),!Yr){const Zr=Wr.sn+1;if(Zr>=Vt.startSN&&Zr<=Vt.endSN){const en=Hr[Zr-Vt.startSN];Wr.cc===en.cc&&(Yr=en,this.log(`Live playlist, switching playlist, load frag with next SN: ${Yr.sn}`))}Yr||(Yr=ga(Hr,Wr.cc),Yr&&this.log(`Live playlist, switching playlist, load frag with same CC: ${Yr.sn}`))}}else{const Zr=this.hls.liveSyncPosition;Zr!==null&&(Yr=this.getFragmentAtPosition(Zr,this.bitrateTest?Vt.fragmentEnd:Vt.edge,Vt))}return Yr}getFragmentAtPosition(Vt,Hr,Wr){const{config:Yr}=this;let{fragPrevious:Zr}=this,{fragments:en,endSN:tn}=Wr;const{fragmentHint:rn}=Wr,nn=Yr.maxFragLookUpTolerance,on=Wr.partList,an=!!(Yr.lowLatencyMode&&on!=null&&on.length&&rn);an&&rn&&!this.bitrateTest&&(en=en.concat(rn),tn=rn.sn);let $n;if(Vt<Hr){const ln=Vt>Hr-nn?0:nn;$n=Ct$1(Zr,en,Vt,ln)}else $n=en[en.length-1];if($n){const ln=$n.sn-Wr.startSN,Hn=this.fragmentTracker.getState($n);if((Hn===ae$2.OK||Hn===ae$2.PARTIAL&&$n.gap)&&(Zr=$n),Zr&&$n.sn===Zr.sn&&(!an||on[0].fragment.sn>$n.sn)&&Zr&&$n.level===Zr.level){const jn=en[ln+1];$n.sn<tn&&this.fragmentTracker.getState(jn)!==ae$2.OK?$n=jn:$n=null}}return $n}synchronizeToLiveEdge(Vt){const{config:Hr,media:Wr}=this;if(!Wr)return;const Yr=this.hls.liveSyncPosition,Zr=Wr.currentTime,en=Vt.fragments[0].start,tn=Vt.edge,rn=Zr>=en-Hr.maxFragLookUpTolerance&&Zr<=tn;if(Yr!==null&&Wr.duration>Yr&&(Zr<Yr||!rn)){const nn=Hr.liveMaxLatencyDuration!==void 0?Hr.liveMaxLatencyDuration:Hr.liveMaxLatencyDurationCount*Vt.targetduration;(!rn&&Wr.readyState<4||Zr<tn-nn)&&(this.loadedmetadata||(this.nextLoadPosition=Yr),Wr.readyState&&(this.warn(`Playback: ${Zr.toFixed(3)} is located too far from the end of live sliding playlist: ${tn}, reset currentTime to : ${Yr.toFixed(3)}`),Wr.currentTime=Yr))}}alignPlaylists(Vt,Hr,Wr){const Yr=Vt.fragments.length;if(!Yr)return this.warn("No fragments in live playlist"),0;const Zr=Vt.fragments[0].start,en=!Hr,tn=Vt.alignedSliding&&O$6(Zr);if(en||!tn&&!Zr){const{fragPrevious:rn}=this;Pa(rn,Wr,Vt);const nn=Vt.fragments[0].start;return this.log(`Live playlist sliding: ${nn.toFixed(2)} start-sn: ${Hr?Hr.startSN:"na"}->${Vt.startSN} prev-sn: ${rn?rn.sn:"na"} fragments: ${Yr}`),nn}return Zr}waitForCdnTuneIn(Vt){return Vt.live&&Vt.canBlockReload&&Vt.partTarget&&Vt.tuneInGoal>Math.max(Vt.partHoldBack,Vt.partTarget*3)}setStartPosition(Vt,Hr){let Wr=this.startPosition;if(Wr<Hr&&(Wr=-1),Wr===-1||this.lastCurrentTime===-1){const Yr=this.startTimeOffset!==null,Zr=Yr?this.startTimeOffset:Vt.startTimeOffset;Zr!==null&&O$6(Zr)?(Wr=Hr+Zr,Zr<0&&(Wr+=Vt.totalduration),Wr=Math.min(Math.max(Hr,Wr),Hr+Vt.totalduration),this.log(`Start time offset ${Zr} found in ${Yr?"multivariant":"media"} playlist, adjust startPosition to ${Wr}`),this.startPosition=Wr):Vt.live?Wr=this.hls.liveSyncPosition||Hr:this.startPosition=Wr=0,this.lastCurrentTime=Wr}this.nextLoadPosition=Wr}getLoadPosition(){const{media:Vt}=this;let Hr=0;return this.loadedmetadata&&Vt?Hr=Vt.currentTime:this.nextLoadPosition&&(Hr=this.nextLoadPosition),Hr}handleFragLoadAborted(Vt,Hr){this.transmuxer&&Vt.sn!=="initSegment"&&Vt.stats.aborted&&(this.warn(`Fragment ${Vt.sn}${Hr?" part "+Hr.index:""} of level ${Vt.level} was aborted`),this.resetFragmentLoading(Vt))}resetFragmentLoading(Vt){(!this.fragCurrent||!this.fragContextChanged(Vt)&&this.state!==C$2.FRAG_LOADING_WAITING_RETRY)&&(this.state=C$2.IDLE)}onFragmentOrKeyLoadError(Vt,Hr){if(Hr.chunkMeta&&!Hr.frag){const on=this.getCurrentContext(Hr.chunkMeta);on&&(Hr.frag=on.frag)}const Wr=Hr.frag;if(!Wr||Wr.type!==Vt||!this.levels)return;if(this.fragContextChanged(Wr)){var Yr;this.warn(`Frag load error must match current frag to retry ${Wr.url} > ${(Yr=this.fragCurrent)==null?void 0:Yr.url}`);return}const Zr=Hr.details===L$2.FRAG_GAP;Zr&&this.fragmentTracker.fragBuffered(Wr,!0);const en=Hr.errorAction,{action:tn,retryCount:rn=0,retryConfig:nn}=en||{};if(en&&tn===ce$2.RetryRequest&&nn){this.resetStartWhenNotLoaded(this.levelLastLoaded);const on=Ss(nn,rn);this.warn(`Fragment ${Wr.sn} of ${Vt} ${Wr.level} errored with ${Hr.details}, retrying loading ${rn+1}/${nn.maxNumRetry} in ${on}ms`),en.resolved=!0,this.retryDate=self.performance.now()+on,this.state=C$2.FRAG_LOADING_WAITING_RETRY}else if(nn&&en)if(this.resetFragmentErrors(Vt),rn<nn.maxNumRetry)!Zr&&tn!==ce$2.RemoveAlternatePermanently&&(en.resolved=!0);else{v$2.warn(`${Hr.details} reached or exceeded max retry (${rn})`);return}else(en==null?void 0:en.action)===ce$2.SendAlternateToPenaltyBox?this.state=C$2.WAITING_LEVEL:this.state=C$2.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(Vt){if(this.state===C$2.PARSING||this.state===C$2.PARSED){const Hr=Vt.parent,Wr=this.getFwdBufferInfo(this.mediaBuffer,Hr),Yr=Wr&&Wr.len>.5;Yr&&this.reduceMaxBufferLength(Wr.len);const Zr=!Yr;return Zr&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${Hr} buffer`),Vt.frag&&(this.fragmentTracker.removeFragment(Vt.frag),this.nextLoadPosition=Vt.frag.start),this.resetLoadingState(),Zr}return!1}resetFragmentErrors(Vt){Vt===N$4.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==C$2.STOPPED&&(this.state=C$2.IDLE)}afterBufferFlushed(Vt,Hr,Wr){if(!Vt)return;const Yr=J$4.getBuffered(Vt);this.fragmentTracker.detectEvictedFragments(Hr,Yr,Wr),this.state===C$2.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=C$2.IDLE}resetStartWhenNotLoaded(Vt){if(!this.loadedmetadata){this.startFragRequested=!1;const Hr=Vt?Vt.details:null;Hr!=null&&Hr.live?(this.startPosition=-1,this.setStartPosition(Hr,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(Vt){this.warn(`The loading context changed while buffering fragment ${Vt.sn} of level ${Vt.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(Vt=0){this.fragmentTracker.removeFragmentsInRange(Vt,1/0,this.playlistType,!1,!0)}updateLevelTiming(Vt,Hr,Wr,Yr){var Zr;const en=Wr.details;if(!en){this.warn("level.details undefined");return}if(!Object.keys(Vt.elementaryStreams).reduce((tn,rn)=>{const nn=Vt.elementaryStreams[rn];if(nn){const on=nn.endPTS-nn.startPTS;if(on<=0)return this.warn(`Could not parse fragment ${Vt.sn} ${rn} duration reliably (${on})`),tn||!1;const an=Yr?0:ir(en,Vt,nn.startPTS,nn.endPTS,nn.startDTS,nn.endDTS);return this.hls.trigger(m$2.LEVEL_PTS_UPDATED,{details:en,level:Wr,drift:an,type:rn,frag:Vt,start:nn.startPTS,end:nn.endPTS}),!0}return tn},!1)&&((Zr=this.transmuxer)==null?void 0:Zr.error)===null){const tn=new Error(`Found no media in fragment ${Vt.sn} of level ${Vt.level} resetting transmuxer to fallback to playlist timing`);if(Wr.fragmentError===0&&(Wr.fragmentError++,Vt.gap=!0,this.fragmentTracker.removeFragment(Vt),this.fragmentTracker.fragBuffered(Vt,!0)),this.warn(tn.message),this.hls.trigger(m$2.ERROR,{type:B$5.MEDIA_ERROR,details:L$2.FRAG_PARSING_ERROR,fatal:!1,error:tn,frag:Vt,reason:`Found no media in msn ${Vt.sn} of level "${Wr.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=C$2.PARSED,this.hls.trigger(m$2.FRAG_PARSED,{frag:Vt,part:Hr})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(Vt){Vt.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(Vt){const Hr=this._state;Hr!==Vt&&(this._state=Vt,this.log(`${Hr}->${Vt}`))}get state(){return this._state}}class hr{constructor(){this.chunks=[],this.dataLength=0}push(Vt){this.chunks.push(Vt),this.dataLength+=Vt.length}flush(){const{chunks:Vt,dataLength:Hr}=this;let Wr;if(Vt.length)Vt.length===1?Wr=Vt[0]:Wr=Ka(Vt,Hr);else return new Uint8Array(0);return this.reset(),Wr}reset(){this.chunks.length=0,this.dataLength=0}}function Ka(Kt,Vt){const Hr=new Uint8Array(Vt);let Wr=0;for(let Yr=0;Yr<Kt.length;Yr++){const Zr=Kt[Yr];Hr.set(Zr,Wr),Wr+=Zr.length}return Hr}function Va(){return typeof __HLS_WORKER_BUNDLE__=="function"}function Ha(){const Kt=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),Vt=self.URL.createObjectURL(Kt);return{worker:new self.Worker(Vt),objectURL:Vt}}function Wa(Kt){const Vt=new self.URL(Kt,self.location.href).href;return{worker:new self.Worker(Vt),scriptURL:Vt}}function ve(Kt="",Vt=9e4){return{type:Kt,id:-1,pid:-1,inputTimeScale:Vt,sequenceNumber:-1,samples:[],dropped:0}}class Is{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(Vt,Hr,Wr,Yr){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(Vt){this.initPTS=Vt,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(Vt,Hr){return!1}appendFrame(Vt,Hr,Wr){}demux(Vt,Hr){this.cachedData&&(Vt=pe$1(this.cachedData,Vt),this.cachedData=null);let Wr=st$1(Vt,0),Yr=Wr?Wr.length:0,Zr;const en=this._audioTrack,tn=this._id3Track,rn=Wr?xs(Wr):void 0,nn=Vt.length;for((this.basePTS===null||this.frameIndex===0&&O$6(rn))&&(this.basePTS=Ya(rn,Hr,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),Wr&&Wr.length>0&&tn.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:Wr,type:ye$1.audioId3,duration:Number.POSITIVE_INFINITY});Yr<nn;){if(this.canParse(Vt,Yr)){const on=this.appendFrame(en,Vt,Yr);on?(this.frameIndex++,this.lastPTS=on.sample.pts,Yr+=on.length,Zr=Yr):Yr=nn}else mn(Vt,Yr)?(Wr=st$1(Vt,Yr),tn.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:Wr,type:ye$1.audioId3,duration:Number.POSITIVE_INFINITY}),Yr+=Wr.length,Zr=Yr):Yr++;if(Yr===nn&&Zr!==nn){const on=Me$1(Vt,Zr);this.cachedData?this.cachedData=pe$1(this.cachedData,on):this.cachedData=on}}return{audioTrack:en,videoTrack:ve(),id3Track:tn,textTrack:ve()}}demuxSampleAes(Vt,Hr,Wr){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(Vt){const Hr=this.cachedData;return Hr&&(this.cachedData=null,this.demux(Hr,0)),{audioTrack:this._audioTrack,videoTrack:ve(),id3Track:this._id3Track,textTrack:ve()}}destroy(){}}const Ya=(Kt,Vt,Hr)=>{if(O$6(Kt))return Kt*90;const Wr=Hr?Hr.baseTime*9e4/Hr.timescale:0;return Vt*9e4+Wr};function qa(Kt,Vt,Hr,Wr){let Yr,Zr,en,tn;const rn=navigator.userAgent.toLowerCase(),nn=Wr,on=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Yr=((Vt[Hr+2]&192)>>>6)+1;const an=(Vt[Hr+2]&60)>>>2;if(an>on.length-1){const $n=new Error(`invalid ADTS sampling index:${an}`);Kt.emit(m$2.ERROR,m$2.ERROR,{type:B$5.MEDIA_ERROR,details:L$2.FRAG_PARSING_ERROR,fatal:!0,error:$n,reason:$n.message});return}return en=(Vt[Hr+2]&1)<<2,en|=(Vt[Hr+3]&192)>>>6,v$2.log(`manifest codec:${Wr}, ADTS type:${Yr}, samplingIndex:${an}`),/firefox/i.test(rn)?an>=6?(Yr=5,tn=new Array(4),Zr=an-3):(Yr=2,tn=new Array(2),Zr=an):rn.indexOf("android")!==-1?(Yr=2,tn=new Array(2),Zr=an):(Yr=5,tn=new Array(4),Wr&&(Wr.indexOf("mp4a.40.29")!==-1||Wr.indexOf("mp4a.40.5")!==-1)||!Wr&&an>=6?Zr=an-3:((Wr&&Wr.indexOf("mp4a.40.2")!==-1&&(an>=6&&en===1||/vivaldi/i.test(rn))||!Wr&&en===1)&&(Yr=2,tn=new Array(2)),Zr=an)),tn[0]=Yr<<3,tn[0]|=(an&14)>>1,tn[1]|=(an&1)<<7,tn[1]|=en<<3,Yr===5&&(tn[1]|=(Zr&14)>>1,tn[2]=(Zr&1)<<7,tn[2]|=8,tn[3]=0),{config:tn,samplerate:on[an],channelCount:en,codec:"mp4a.40."+Yr,manifestCodec:nn}}function ur(Kt,Vt){return Kt[Vt]===255&&(Kt[Vt+1]&246)===240}function dr(Kt,Vt){return Kt[Vt+1]&1?7:9}function bs(Kt,Vt){return(Kt[Vt+3]&3)<<11|Kt[Vt+4]<<3|(Kt[Vt+5]&224)>>>5}function ja(Kt,Vt){return Vt+5<Kt.length}function kt(Kt,Vt){return Vt+1<Kt.length&&ur(Kt,Vt)}function za(Kt,Vt){return ja(Kt,Vt)&&ur(Kt,Vt)&&bs(Kt,Vt)<=Kt.length-Vt}function Xa(Kt,Vt){if(kt(Kt,Vt)){const Hr=dr(Kt,Vt);if(Vt+Hr>=Kt.length)return!1;const Wr=bs(Kt,Vt);if(Wr<=Hr)return!1;const Yr=Vt+Wr;return Yr===Kt.length||kt(Kt,Yr)}return!1}function fr(Kt,Vt,Hr,Wr,Yr){if(!Kt.samplerate){const Zr=qa(Vt,Hr,Wr,Yr);if(!Zr)return;Kt.config=Zr.config,Kt.samplerate=Zr.samplerate,Kt.channelCount=Zr.channelCount,Kt.codec=Zr.codec,Kt.manifestCodec=Zr.manifestCodec,v$2.log(`parsed codec:${Kt.codec}, rate:${Zr.samplerate}, channels:${Zr.channelCount}`)}}function gr(Kt){return 1024*9e4/Kt}function Qa(Kt,Vt){const Hr=dr(Kt,Vt);if(Vt+Hr<=Kt.length){const Wr=bs(Kt,Vt)-Hr;if(Wr>0)return{headerLength:Hr,frameLength:Wr}}}function mr(Kt,Vt,Hr,Wr,Yr){const Zr=gr(Kt.samplerate),en=Wr+Yr*Zr,tn=Qa(Vt,Hr);let rn;if(tn){const{frameLength:on,headerLength:an}=tn,$n=an+on,ln=Math.max(0,Hr+$n-Vt.length);ln?(rn=new Uint8Array($n-an),rn.set(Vt.subarray(Hr+an,Vt.length),0)):rn=Vt.subarray(Hr+an,Hr+$n);const Hn={unit:rn,pts:en};return ln||Kt.samples.push(Hn),{sample:Hn,length:$n,missing:ln}}const nn=Vt.length-Hr;return rn=new Uint8Array(nn),rn.set(Vt.subarray(Hr,Vt.length),0),{sample:{unit:rn,pts:en},length:nn,missing:-1}}let ht$1=null;const Ja=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Za=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],eo=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],to=[0,1,1,4];function pr(Kt,Vt,Hr,Wr,Yr){if(Hr+24>Vt.length)return;const Zr=Tr(Vt,Hr);if(Zr&&Hr+Zr.frameLength<=Vt.length){const en=Zr.samplesPerFrame*9e4/Zr.sampleRate,tn=Wr+Yr*en,rn={unit:Vt.subarray(Hr,Hr+Zr.frameLength),pts:tn,dts:tn};return Kt.config=[],Kt.channelCount=Zr.channelCount,Kt.samplerate=Zr.sampleRate,Kt.samples.push(rn),{sample:rn,length:Zr.frameLength,missing:0}}}function Tr(Kt,Vt){const Hr=Kt[Vt+1]>>3&3,Wr=Kt[Vt+1]>>1&3,Yr=Kt[Vt+2]>>4&15,Zr=Kt[Vt+2]>>2&3;if(Hr!==1&&Yr!==0&&Yr!==15&&Zr!==3){const en=Kt[Vt+2]>>1&1,tn=Kt[Vt+3]>>6,rn=Hr===3?3-Wr:Wr===3?3:4,nn=Ja[rn*14+Yr-1]*1e3,on=Za[(Hr===3?0:Hr===2?1:2)*3+Zr],an=tn===3?1:2,$n=eo[Hr][Wr],ln=to[Wr],Hn=$n*8*ln,jn=Math.floor($n*nn/on+en)*ln;if(ht$1===null){const zn=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);ht$1=zn?parseInt(zn[1]):0}return ht$1&&ht$1<=87&&Wr===2&&nn>=224e3&&tn===0&&(Kt[Vt+3]=Kt[Vt+3]|128),{sampleRate:on,channelCount:an,frameLength:jn,samplesPerFrame:Hn}}}function Ds(Kt,Vt){return Kt[Vt]===255&&(Kt[Vt+1]&224)===224&&(Kt[Vt+1]&6)!==0}function Er(Kt,Vt){return Vt+1<Kt.length&&Ds(Kt,Vt)}function so$1(Kt,Vt){return Ds(Kt,Vt)&&4<=Kt.length-Vt}function yr(Kt,Vt){if(Vt+1<Kt.length&&Ds(Kt,Vt)){const Hr=Tr(Kt,Vt);let Wr=4;Hr!=null&&Hr.frameLength&&(Wr=Hr.frameLength);const Yr=Vt+Wr;return Yr===Kt.length||Er(Kt,Yr)}return!1}let io$1=class extends Is{constructor(Vt,Hr){super(),this.observer=void 0,this.config=void 0,this.observer=Vt,this.config=Hr}resetInitSegment(Vt,Hr,Wr,Yr){super.resetInitSegment(Vt,Hr,Wr,Yr),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:Hr,duration:Yr,inputTimeScale:9e4,dropped:0}}static probe(Vt){if(!Vt)return!1;const Hr=st$1(Vt,0);let Wr=(Hr==null?void 0:Hr.length)||0;if(yr(Vt,Wr))return!1;for(let Yr=Vt.length;Wr<Yr;Wr++)if(Xa(Vt,Wr))return v$2.log("ADTS sync word found !"),!0;return!1}canParse(Vt,Hr){return za(Vt,Hr)}appendFrame(Vt,Hr,Wr){fr(Vt,this.observer,Hr,Wr,Vt.manifestCodec);const Yr=mr(Vt,Hr,Wr,this.basePTS,this.frameIndex);if(Yr&&Yr.missing===0)return Yr}};const ro=/\/emsg[-/]ID3/i;class no{constructor(Vt,Hr){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=Hr}resetTimeStamp(){}resetInitSegment(Vt,Hr,Wr,Yr){const Zr=this.videoTrack=ve("video",1),en=this.audioTrack=ve("audio",1),tn=this.txtTrack=ve("text",1);if(this.id3Track=ve("id3",1),this.timeOffset=0,!(Vt!=null&&Vt.byteLength))return;const rn=zi(Vt);if(rn.video){const{id:nn,timescale:on,codec:an}=rn.video;Zr.id=nn,Zr.timescale=tn.timescale=on,Zr.codec=an}if(rn.audio){const{id:nn,timescale:on,codec:an}=rn.audio;en.id=nn,en.timescale=on,en.codec=an}tn.id=Yi.text,Zr.sampleDuration=0,Zr.duration=en.duration=Yr}resetContiguity(){this.remainderData=null}static probe(Vt){return Ln(Vt)}demux(Vt,Hr){this.timeOffset=Hr;let Wr=Vt;const Yr=this.videoTrack,Zr=this.txtTrack;if(this.config.progressive){this.remainderData&&(Wr=pe$1(this.remainderData,Vt));const tn=_n$1(Wr);this.remainderData=tn.remainder,Yr.samples=tn.valid||new Uint8Array}else Yr.samples=Wr;const en=this.extractID3Track(Yr,Hr);return Zr.samples=Bs(Hr,Yr),{videoTrack:Yr,audioTrack:this.audioTrack,id3Track:en,textTrack:this.txtTrack}}flush(){const Vt=this.timeOffset,Hr=this.videoTrack,Wr=this.txtTrack;Hr.samples=this.remainderData||new Uint8Array,this.remainderData=null;const Yr=this.extractID3Track(Hr,this.timeOffset);return Wr.samples=Bs(Vt,Hr),{videoTrack:Hr,audioTrack:ve(),id3Track:Yr,textTrack:ve()}}extractID3Track(Vt,Hr){const Wr=this.id3Track;if(Vt.samples.length){const Yr=H$5(Vt.samples,["emsg"]);Yr&&Yr.forEach(Zr=>{const en=On(Zr);if(ro.test(en.schemeIdUri)){const tn=O$6(en.presentationTime)?en.presentationTime/en.timeScale:Hr+en.presentationTimeDelta/en.timeScale;let rn=en.eventDuration===4294967295?Number.POSITIVE_INFINITY:en.eventDuration/en.timeScale;rn<=.001&&(rn=Number.POSITIVE_INFINITY);const nn=en.payload;Wr.samples.push({data:nn,len:nn.byteLength,dts:tn,pts:tn,type:ye$1.emsg,duration:rn})}})}return Wr}demuxSampleAes(Vt,Hr,Wr){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}const xr=(Kt,Vt)=>{let Hr=0,Wr=5;Vt+=Wr;const Yr=new Uint32Array(1),Zr=new Uint32Array(1),en=new Uint8Array(1);for(;Wr>0;){en[0]=Kt[Vt];const tn=Math.min(Wr,8),rn=8-tn;Zr[0]=4278190080>>>24+rn<<rn,Yr[0]=(en[0]&Zr[0])>>rn,Hr=Hr?Hr<<tn|Yr[0]:Yr[0],Vt+=1,Wr-=tn}return Hr};let ao$1=class extends Is{constructor(Vt){super(),this.observer=void 0,this.observer=Vt}resetInitSegment(Vt,Hr,Wr,Yr){super.resetInitSegment(Vt,Hr,Wr,Yr),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:Hr,duration:Yr,inputTimeScale:9e4,dropped:0}}canParse(Vt,Hr){return Hr+64<Vt.length}appendFrame(Vt,Hr,Wr){const Yr=Sr(Vt,Hr,Wr,this.basePTS,this.frameIndex);if(Yr!==-1)return{sample:Vt.samples[Vt.samples.length-1],length:Yr,missing:0}}static probe(Vt){if(!Vt)return!1;const Hr=st$1(Vt,0);if(!Hr)return!1;const Wr=Hr.length;return Vt[Wr]===11&&Vt[Wr+1]===119&&xs(Hr)!==void 0&&xr(Vt,Wr)<16}};function Sr(Kt,Vt,Hr,Wr,Yr){if(Hr+8>Vt.length||Vt[Hr]!==11||Vt[Hr+1]!==119)return-1;const Zr=Vt[Hr+4]>>6;if(Zr>=3)return-1;const en=[48e3,44100,32e3][Zr],tn=Vt[Hr+4]&63,rn=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][tn*3+Zr]*2;if(Hr+rn>Vt.length)return-1;const nn=Vt[Hr+6]>>5;let on=0;nn===2?on+=2:(nn&1&&nn!==1&&(on+=2),nn&4&&(on+=2));const an=(Vt[Hr+6]<<8|Vt[Hr+7])>>12-on&1,$n=[2,1,2,3,3,4,4,5][nn]+an,ln=Vt[Hr+5]>>3,Hn=Vt[Hr+5]&7,jn=new Uint8Array([Zr<<6|ln<<1|Hn>>2,(Hn&3)<<6|nn<<3|an<<2|tn>>4,tn<<4&224]),zn=1536/en*9e4,Wn=Wr+Yr*zn,ei=Vt.subarray(Hr,Hr+rn);return Kt.config=jn,Kt.channelCount=$n,Kt.samplerate=en,Kt.samples.push({unit:ei,pts:Wn}),rn}class oo{constructor(){this.VideoSample=null}createVideoSample(Vt,Hr,Wr,Yr){return{key:Vt,frame:!1,pts:Hr,dts:Wr,units:[],debug:Yr,length:0}}getLastNalUnit(Vt){var Hr;let Wr=this.VideoSample,Yr;if((!Wr||Wr.units.length===0)&&(Wr=Vt[Vt.length-1]),(Hr=Wr)!=null&&Hr.units){const Zr=Wr.units;Yr=Zr[Zr.length-1]}return Yr}pushAccessUnit(Vt,Hr){if(Vt.units.length&&Vt.frame){if(Vt.pts===void 0){const Wr=Hr.samples,Yr=Wr.length;if(Yr){const Zr=Wr[Yr-1];Vt.pts=Zr.pts,Vt.dts=Zr.dts}else{Hr.dropped++;return}}Hr.samples.push(Vt)}Vt.debug.length&&v$2.log(Vt.pts+"/"+Vt.dts+":"+Vt.debug)}}class di{constructor(Vt){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=Vt,this.bytesAvailable=Vt.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const Vt=this.data,Hr=this.bytesAvailable,Wr=Vt.byteLength-Hr,Yr=new Uint8Array(4),Zr=Math.min(4,Hr);if(Zr===0)throw new Error("no bytes available");Yr.set(Vt.subarray(Wr,Wr+Zr)),this.word=new DataView(Yr.buffer).getUint32(0),this.bitsAvailable=Zr*8,this.bytesAvailable-=Zr}skipBits(Vt){let Hr;Vt=Math.min(Vt,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>Vt?(this.word<<=Vt,this.bitsAvailable-=Vt):(Vt-=this.bitsAvailable,Hr=Vt>>3,Vt-=Hr<<3,this.bytesAvailable-=Hr,this.loadWord(),this.word<<=Vt,this.bitsAvailable-=Vt)}readBits(Vt){let Hr=Math.min(this.bitsAvailable,Vt);const Wr=this.word>>>32-Hr;if(Vt>32&&v$2.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=Hr,this.bitsAvailable>0)this.word<<=Hr;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return Hr=Vt-Hr,Hr>0&&this.bitsAvailable?Wr<<Hr|this.readBits(Hr):Wr}skipLZ(){let Vt;for(Vt=0;Vt<this.bitsAvailable;++Vt)if(this.word&2147483648>>>Vt)return this.word<<=Vt,this.bitsAvailable-=Vt,Vt;return this.loadWord(),Vt+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const Vt=this.skipLZ();return this.readBits(Vt+1)-1}readEG(){const Vt=this.readUEG();return 1&Vt?1+Vt>>>1:-1*(Vt>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(Vt){let Hr=8,Wr=8,Yr;for(let Zr=0;Zr<Vt;Zr++)Wr!==0&&(Yr=this.readEG(),Wr=(Hr+Yr+256)%256),Hr=Wr===0?Hr:Wr}readSPS(){let Vt=0,Hr=0,Wr=0,Yr=0,Zr,en,tn;const rn=this.readUByte.bind(this),nn=this.readBits.bind(this),on=this.readUEG.bind(this),an=this.readBoolean.bind(this),$n=this.skipBits.bind(this),ln=this.skipEG.bind(this),Hn=this.skipUEG.bind(this),jn=this.skipScalingList.bind(this);rn();const zn=rn();if(nn(5),$n(3),rn(),Hn(),zn===100||zn===110||zn===122||zn===244||zn===44||zn===83||zn===86||zn===118||zn===128){const Ts=on();if(Ts===3&&$n(1),Hn(),Hn(),$n(1),an())for(en=Ts!==3?8:12,tn=0;tn<en;tn++)an()&&(tn<6?jn(16):jn(64))}Hn();const Wn=on();if(Wn===0)on();else if(Wn===1)for($n(1),ln(),ln(),Zr=on(),tn=0;tn<Zr;tn++)ln();Hn(),$n(1);const ei=on(),$i=on(),Mi=nn(1);Mi===0&&$n(1),$n(1),an()&&(Vt=on(),Hr=on(),Wr=on(),Yr=on());let Ni=[1,1];if(an()&&an())switch(rn()){case 1:Ni=[1,1];break;case 2:Ni=[12,11];break;case 3:Ni=[10,11];break;case 4:Ni=[16,11];break;case 5:Ni=[40,33];break;case 6:Ni=[24,11];break;case 7:Ni=[20,11];break;case 8:Ni=[32,11];break;case 9:Ni=[80,33];break;case 10:Ni=[18,11];break;case 11:Ni=[15,11];break;case 12:Ni=[64,33];break;case 13:Ni=[160,99];break;case 14:Ni=[4,3];break;case 15:Ni=[3,2];break;case 16:Ni=[2,1];break;case 255:{Ni=[rn()<<8|rn(),rn()<<8|rn()];break}}return{width:Math.ceil((ei+1)*16-Vt*2-Hr*2),height:(2-Mi)*($i+1)*16-(Mi?2:4)*(Wr+Yr),pixelRatio:Ni}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}let lo$1=class extends oo{parseAVCPES(Vt,Hr,Wr,Yr,Zr){const en=this.parseAVCNALu(Vt,Wr.data);let tn=this.VideoSample,rn,nn=!1;Wr.data=null,tn&&en.length&&!Vt.audFound&&(this.pushAccessUnit(tn,Vt),tn=this.VideoSample=this.createVideoSample(!1,Wr.pts,Wr.dts,"")),en.forEach(on=>{var an;switch(on.type){case 1:{let jn=!1;rn=!0;const zn=on.data;if(nn&&zn.length>4){const Wn=new di(zn).readSliceType();(Wn===2||Wn===4||Wn===7||Wn===9)&&(jn=!0)}if(jn){var $n;($n=tn)!=null&&$n.frame&&!tn.key&&(this.pushAccessUnit(tn,Vt),tn=this.VideoSample=null)}tn||(tn=this.VideoSample=this.createVideoSample(!0,Wr.pts,Wr.dts,"")),tn.frame=!0,tn.key=jn;break}case 5:rn=!0,(an=tn)!=null&&an.frame&&!tn.key&&(this.pushAccessUnit(tn,Vt),tn=this.VideoSample=null),tn||(tn=this.VideoSample=this.createVideoSample(!0,Wr.pts,Wr.dts,"")),tn.key=!0,tn.frame=!0;break;case 6:{rn=!0,Qi(on.data,1,Wr.pts,Hr.samples);break}case 7:{var ln,Hn;rn=!0,nn=!0;const jn=on.data,zn=new di(jn).readSPS();if(!Vt.sps||Vt.width!==zn.width||Vt.height!==zn.height||((ln=Vt.pixelRatio)==null?void 0:ln[0])!==zn.pixelRatio[0]||((Hn=Vt.pixelRatio)==null?void 0:Hn[1])!==zn.pixelRatio[1]){Vt.width=zn.width,Vt.height=zn.height,Vt.pixelRatio=zn.pixelRatio,Vt.sps=[jn],Vt.duration=Zr;const Wn=jn.subarray(1,4);let ei="avc1.";for(let $i=0;$i<3;$i++){let Mi=Wn[$i].toString(16);Mi.length<2&&(Mi="0"+Mi),ei+=Mi}Vt.codec=ei}break}case 8:rn=!0,Vt.pps=[on.data];break;case 9:rn=!0,Vt.audFound=!0,tn&&this.pushAccessUnit(tn,Vt),tn=this.VideoSample=this.createVideoSample(!1,Wr.pts,Wr.dts,"");break;case 12:rn=!0;break;default:rn=!1,tn&&(tn.debug+="unknown NAL "+on.type+" ");break}tn&&rn&&tn.units.push(on)}),Yr&&tn&&(this.pushAccessUnit(tn,Vt),this.VideoSample=null)}parseAVCNALu(Vt,Hr){const Wr=Hr.byteLength;let Yr=Vt.naluState||0;const Zr=Yr,en=[];let tn=0,rn,nn,on,an=-1,$n=0;for(Yr===-1&&(an=0,$n=Hr[0]&31,Yr=0,tn=1);tn<Wr;){if(rn=Hr[tn++],!Yr){Yr=rn?0:1;continue}if(Yr===1){Yr=rn?0:2;continue}if(!rn)Yr=3;else if(rn===1){if(nn=tn-Yr-1,an>=0){const ln={data:Hr.subarray(an,nn),type:$n};en.push(ln)}else{const ln=this.getLastNalUnit(Vt.samples);ln&&(Zr&&tn<=4-Zr&&ln.state&&(ln.data=ln.data.subarray(0,ln.data.byteLength-Zr)),nn>0&&(ln.data=pe$1(ln.data,Hr.subarray(0,nn)),ln.state=0))}tn<Wr?(on=Hr[tn]&31,an=tn,$n=on,Yr=0):Yr=-1}else Yr=0}if(an>=0&&Yr>=0){const ln={data:Hr.subarray(an,Wr),type:$n,state:Yr};en.push(ln)}if(en.length===0){const ln=this.getLastNalUnit(Vt.samples);ln&&(ln.data=pe$1(ln.data,Hr))}return Vt.naluState=Yr,en}};class co{constructor(Vt,Hr,Wr){this.keyData=void 0,this.decrypter=void 0,this.keyData=Wr,this.decrypter=new Ls(Hr,{removePKCS7Padding:!1})}decryptBuffer(Vt){return this.decrypter.decrypt(Vt,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(Vt,Hr,Wr){const Yr=Vt[Hr].unit;if(Yr.length<=16)return;const Zr=Yr.subarray(16,Yr.length-Yr.length%16),en=Zr.buffer.slice(Zr.byteOffset,Zr.byteOffset+Zr.length);this.decryptBuffer(en).then(tn=>{const rn=new Uint8Array(tn);Yr.set(rn,16),this.decrypter.isSync()||this.decryptAacSamples(Vt,Hr+1,Wr)})}decryptAacSamples(Vt,Hr,Wr){for(;;Hr++){if(Hr>=Vt.length){Wr();return}if(!(Vt[Hr].unit.length<32)&&(this.decryptAacSample(Vt,Hr,Wr),!this.decrypter.isSync()))return}}getAvcEncryptedData(Vt){const Hr=Math.floor((Vt.length-48)/160)*16+16,Wr=new Int8Array(Hr);let Yr=0;for(let Zr=32;Zr<Vt.length-16;Zr+=160,Yr+=16)Wr.set(Vt.subarray(Zr,Zr+16),Yr);return Wr}getAvcDecryptedUnit(Vt,Hr){const Wr=new Uint8Array(Hr);let Yr=0;for(let Zr=32;Zr<Vt.length-16;Zr+=160,Yr+=16)Vt.set(Wr.subarray(Yr,Yr+16),Zr);return Vt}decryptAvcSample(Vt,Hr,Wr,Yr,Zr){const en=Ji(Zr.data),tn=this.getAvcEncryptedData(en);this.decryptBuffer(tn.buffer).then(rn=>{Zr.data=this.getAvcDecryptedUnit(en,rn),this.decrypter.isSync()||this.decryptAvcSamples(Vt,Hr,Wr+1,Yr)})}decryptAvcSamples(Vt,Hr,Wr,Yr){if(Vt instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;Hr++,Wr=0){if(Hr>=Vt.length){Yr();return}const Zr=Vt[Hr].units;for(;!(Wr>=Zr.length);Wr++){const en=Zr[Wr];if(!(en.data.length<=48||en.type!==1&&en.type!==5)&&(this.decryptAvcSample(Vt,Hr,Wr,Yr,en),!this.decrypter.isSync()))return}}}}const ne$2=188;let _e$2=class kc{constructor(Vt,Hr,Wr){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=Vt,this.config=Hr,this.typeSupported=Wr,this.videoParser=new lo$1}static probe(Vt){const Hr=kc.syncOffset(Vt);return Hr>0&&v$2.warn(`MPEG2-TS detected but first sync word found @ offset ${Hr}`),Hr!==-1}static syncOffset(Vt){const Hr=Vt.length;let Wr=Math.min(ne$2*5,Hr-ne$2)+1,Yr=0;for(;Yr<Wr;){let Zr=!1,en=-1,tn=0;for(let rn=Yr;rn<Hr;rn+=ne$2)if(Vt[rn]===71&&(Hr-rn===ne$2||Vt[rn+ne$2]===71)){if(tn++,en===-1&&(en=rn,en!==0&&(Wr=Math.min(en+ne$2*99,Vt.length-ne$2)+1)),Zr||(Zr=hs(Vt,rn)===0),Zr&&tn>1&&(en===0&&tn>2||rn+ne$2>Wr))return en}else{if(tn)return-1;break}Yr++}return-1}static createTrack(Vt,Hr){return{container:Vt==="video"||Vt==="audio"?"video/mp2t":void 0,type:Vt,id:Yi[Vt],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:Vt==="audio"?Hr:void 0}}resetInitSegment(Vt,Hr,Wr,Yr){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=kc.createTrack("video"),this._audioTrack=kc.createTrack("audio",Yr),this._id3Track=kc.createTrack("id3"),this._txtTrack=kc.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=Hr,this.videoCodec=Wr,this._duration=Yr}resetTimeStamp(){}resetContiguity(){const{_audioTrack:Vt,_videoTrack:Hr,_id3Track:Wr}=this;Vt&&(Vt.pesData=null),Hr&&(Hr.pesData=null),Wr&&(Wr.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(Vt,Hr,Wr=!1,Yr=!1){Wr||(this.sampleAes=null);let Zr;const en=this._videoTrack,tn=this._audioTrack,rn=this._id3Track,nn=this._txtTrack;let on=en.pid,an=en.pesData,$n=tn.pid,ln=rn.pid,Hn=tn.pesData,jn=rn.pesData,zn=null,Wn=this.pmtParsed,ei=this._pmtId,$i=Vt.length;if(this.remainderData&&(Vt=pe$1(this.remainderData,Vt),$i=Vt.length,this.remainderData=null),$i<ne$2&&!Yr)return this.remainderData=Vt,{audioTrack:tn,videoTrack:en,id3Track:rn,textTrack:nn};const Mi=Math.max(0,kc.syncOffset(Vt));$i-=($i-Mi)%ne$2,$i<Vt.byteLength&&!Yr&&(this.remainderData=new Uint8Array(Vt.buffer,$i,Vt.buffer.byteLength-$i));let Ni=0;for(let ps=Mi;ps<$i;ps+=ne$2)if(Vt[ps]===71){const $s=!!(Vt[ps+1]&64),Ws=hs(Vt,ps),Hs=(Vt[ps+3]&48)>>4;let js;if(Hs>1){if(js=ps+5+Vt[ps+4],js===ps+ne$2)continue}else js=ps+4;switch(Ws){case on:$s&&(an&&(Zr=$e$1(an))&&this.videoParser.parseAVCPES(en,nn,Zr,!1,this._duration),an={data:[],size:0}),an&&(an.data.push(Vt.subarray(js,ps+ne$2)),an.size+=ps+ne$2-js);break;case $n:if($s){if(Hn&&(Zr=$e$1(Hn)))switch(tn.segmentCodec){case"aac":this.parseAACPES(tn,Zr);break;case"mp3":this.parseMPEGPES(tn,Zr);break;case"ac3":this.parseAC3PES(tn,Zr);break}Hn={data:[],size:0}}Hn&&(Hn.data.push(Vt.subarray(js,ps+ne$2)),Hn.size+=ps+ne$2-js);break;case ln:$s&&(jn&&(Zr=$e$1(jn))&&this.parseID3PES(rn,Zr),jn={data:[],size:0}),jn&&(jn.data.push(Vt.subarray(js,ps+ne$2)),jn.size+=ps+ne$2-js);break;case 0:$s&&(js+=Vt[js]+1),ei=this._pmtId=ho(Vt,js);break;case ei:{$s&&(js+=Vt[js]+1);const zs=uo(Vt,js,this.typeSupported,Wr);on=zs.videoPid,on>0&&(en.pid=on,en.segmentCodec=zs.segmentVideoCodec),$n=zs.audioPid,$n>0&&(tn.pid=$n,tn.segmentCodec=zs.segmentAudioCodec),ln=zs.id3Pid,ln>0&&(rn.pid=ln),zn!==null&&!Wn&&(v$2.warn(`MPEG-TS PMT found at ${ps} after unknown PID '${zn}'. Backtracking to sync byte @${Mi} to parse all TS packets.`),zn=null,ps=Mi-188),Wn=this.pmtParsed=!0;break}case 17:case 8191:break;default:zn=Ws;break}}else Ni++;if(Ni>0){const ps=new Error(`Found ${Ni} TS packet/s that do not start with 0x47`);this.observer.emit(m$2.ERROR,m$2.ERROR,{type:B$5.MEDIA_ERROR,details:L$2.FRAG_PARSING_ERROR,fatal:!1,error:ps,reason:ps.message})}en.pesData=an,tn.pesData=Hn,rn.pesData=jn;const Ts={audioTrack:tn,videoTrack:en,id3Track:rn,textTrack:nn};return Yr&&this.extractRemainingSamples(Ts),Ts}flush(){const{remainderData:Vt}=this;this.remainderData=null;let Hr;return Vt?Hr=this.demux(Vt,-1,!1,!0):Hr={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(Hr),this.sampleAes?this.decrypt(Hr,this.sampleAes):Hr}extractRemainingSamples(Vt){const{audioTrack:Hr,videoTrack:Wr,id3Track:Yr,textTrack:Zr}=Vt,en=Wr.pesData,tn=Hr.pesData,rn=Yr.pesData;let nn;if(en&&(nn=$e$1(en))?(this.videoParser.parseAVCPES(Wr,Zr,nn,!0,this._duration),Wr.pesData=null):Wr.pesData=en,tn&&(nn=$e$1(tn))){switch(Hr.segmentCodec){case"aac":this.parseAACPES(Hr,nn);break;case"mp3":this.parseMPEGPES(Hr,nn);break;case"ac3":this.parseAC3PES(Hr,nn);break}Hr.pesData=null}else tn!=null&&tn.size&&v$2.log("last AAC PES packet truncated,might overlap between fragments"),Hr.pesData=tn;rn&&(nn=$e$1(rn))?(this.parseID3PES(Yr,nn),Yr.pesData=null):Yr.pesData=rn}demuxSampleAes(Vt,Hr,Wr){const Yr=this.demux(Vt,Wr,!0,!this.config.progressive),Zr=this.sampleAes=new co(this.observer,this.config,Hr);return this.decrypt(Yr,Zr)}decrypt(Vt,Hr){return new Promise(Wr=>{const{audioTrack:Yr,videoTrack:Zr}=Vt;Yr.samples&&Yr.segmentCodec==="aac"?Hr.decryptAacSamples(Yr.samples,0,()=>{Zr.samples?Hr.decryptAvcSamples(Zr.samples,0,0,()=>{Wr(Vt)}):Wr(Vt)}):Zr.samples&&Hr.decryptAvcSamples(Zr.samples,0,0,()=>{Wr(Vt)})})}destroy(){this._duration=0}parseAACPES(Vt,Hr){let Wr=0;const Yr=this.aacOverFlow;let Zr=Hr.data;if(Yr){this.aacOverFlow=null;const an=Yr.missing,$n=Yr.sample.unit.byteLength;if(an===-1)Zr=pe$1(Yr.sample.unit,Zr);else{const ln=$n-an;Yr.sample.unit.set(Zr.subarray(0,an),ln),Vt.samples.push(Yr.sample),Wr=Yr.missing}}let en,tn;for(en=Wr,tn=Zr.length;en<tn-1&&!kt(Zr,en);en++);if(en!==Wr){let an;const $n=en<tn-1;$n?an=`AAC PES did not start with ADTS header,offset:${en}`:an="No ADTS header found in AAC PES";const ln=new Error(an);if(v$2.warn(`parsing error: ${an}`),this.observer.emit(m$2.ERROR,m$2.ERROR,{type:B$5.MEDIA_ERROR,details:L$2.FRAG_PARSING_ERROR,fatal:!1,levelRetry:$n,error:ln,reason:an}),!$n)return}fr(Vt,this.observer,Zr,en,this.audioCodec);let rn;if(Hr.pts!==void 0)rn=Hr.pts;else if(Yr){const an=gr(Vt.samplerate);rn=Yr.sample.pts+an}else{v$2.warn("[tsdemuxer]: AAC PES unknown PTS");return}let nn=0,on;for(;en<tn;)if(on=mr(Vt,Zr,en,rn,nn),en+=on.length,on.missing){this.aacOverFlow=on;break}else for(nn++;en<tn-1&&!kt(Zr,en);en++);}parseMPEGPES(Vt,Hr){const Wr=Hr.data,Yr=Wr.length;let Zr=0,en=0;const tn=Hr.pts;if(tn===void 0){v$2.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;en<Yr;)if(Er(Wr,en)){const rn=pr(Vt,Wr,en,tn,Zr);if(rn)en+=rn.length,Zr++;else break}else en++}parseAC3PES(Vt,Hr){{const Wr=Hr.data,Yr=Hr.pts;if(Yr===void 0){v$2.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const Zr=Wr.length;let en=0,tn=0,rn;for(;tn<Zr&&(rn=Sr(Vt,Wr,tn,Yr,en++))>0;)tn+=rn}}parseID3PES(Vt,Hr){if(Hr.pts===void 0){v$2.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const Wr=se$2({},Hr,{type:this._videoTrack?ye$1.emsg:ye$1.audioId3,duration:Number.POSITIVE_INFINITY});Vt.samples.push(Wr)}};function hs(Kt,Vt){return((Kt[Vt+1]&31)<<8)+Kt[Vt+2]}function ho(Kt,Vt){return(Kt[Vt+10]&31)<<8|Kt[Vt+11]}function uo(Kt,Vt,Hr,Wr){const Yr={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},Zr=(Kt[Vt+1]&15)<<8|Kt[Vt+2],en=Vt+3+Zr-4,tn=(Kt[Vt+10]&15)<<8|Kt[Vt+11];for(Vt+=12+tn;Vt<en;){const rn=hs(Kt,Vt),nn=(Kt[Vt+3]&15)<<8|Kt[Vt+4];switch(Kt[Vt]){case 207:if(!Wr){Wt("ADTS AAC");break}case 15:Yr.audioPid===-1&&(Yr.audioPid=rn);break;case 21:Yr.id3Pid===-1&&(Yr.id3Pid=rn);break;case 219:if(!Wr){Wt("H.264");break}case 27:Yr.videoPid===-1&&(Yr.videoPid=rn,Yr.segmentVideoCodec="avc");break;case 3:case 4:!Hr.mpeg&&!Hr.mp3?v$2.log("MPEG audio found, not supported in this browser"):Yr.audioPid===-1&&(Yr.audioPid=rn,Yr.segmentAudioCodec="mp3");break;case 193:if(!Wr){Wt("AC-3");break}case 129:Hr.ac3?Yr.audioPid===-1&&(Yr.audioPid=rn,Yr.segmentAudioCodec="ac3"):v$2.log("AC-3 audio found, not supported in this browser");break;case 6:if(Yr.audioPid===-1&&nn>0){let on=Vt+5,an=nn;for(;an>2;){switch(Kt[on]){case 106:Hr.ac3!==!0?v$2.log("AC-3 audio found, not supported in this browser for now"):(Yr.audioPid=rn,Yr.segmentAudioCodec="ac3");break}const $n=Kt[on+1]+2;on+=$n,an-=$n}}break;case 194:case 135:v$2.warn("Unsupported EC-3 in M2TS found");break;case 36:v$2.warn("Unsupported HEVC in M2TS found");break}Vt+=nn+5}return Yr}function Wt(Kt){v$2.log(`${Kt} with AES-128-CBC encryption found in unencrypted stream`)}function $e$1(Kt){let Vt=0,Hr,Wr,Yr,Zr,en;const tn=Kt.data;if(!Kt||Kt.size===0)return null;for(;tn[0].length<19&&tn.length>1;)tn[0]=pe$1(tn[0],tn[1]),tn.splice(1,1);if(Hr=tn[0],(Hr[0]<<16)+(Hr[1]<<8)+Hr[2]===1){if(Wr=(Hr[4]<<8)+Hr[5],Wr&&Wr>Kt.size-6)return null;const rn=Hr[7];rn&192&&(Zr=(Hr[9]&14)*536870912+(Hr[10]&255)*4194304+(Hr[11]&254)*16384+(Hr[12]&255)*128+(Hr[13]&254)/2,rn&64?(en=(Hr[14]&14)*536870912+(Hr[15]&255)*4194304+(Hr[16]&254)*16384+(Hr[17]&255)*128+(Hr[18]&254)/2,Zr-en>60*9e4&&(v$2.warn(`${Math.round((Zr-en)/9e4)}s delta between PTS and DTS, align them`),Zr=en)):en=Zr),Yr=Hr[8];let nn=Yr+9;if(Kt.size<=nn)return null;Kt.size-=nn;const on=new Uint8Array(Kt.size);for(let an=0,$n=tn.length;an<$n;an++){Hr=tn[an];let ln=Hr.byteLength;if(nn)if(nn>ln){nn-=ln;continue}else Hr=Hr.subarray(nn),ln-=nn,nn=0;on.set(Hr,Vt),Vt+=ln}return Wr&&(Wr-=Yr+3),{data:on,pts:Zr,dts:en,len:Wr}}return null}class fo extends Is{resetInitSegment(Vt,Hr,Wr,Yr){super.resetInitSegment(Vt,Hr,Wr,Yr),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:Hr,duration:Yr,inputTimeScale:9e4,dropped:0}}static probe(Vt){if(!Vt)return!1;const Hr=st$1(Vt,0);let Wr=(Hr==null?void 0:Hr.length)||0;if(Hr&&Vt[Wr]===11&&Vt[Wr+1]===119&&xs(Hr)!==void 0&&xr(Vt,Wr)<=16)return!1;for(let Yr=Vt.length;Wr<Yr;Wr++)if(yr(Vt,Wr))return v$2.log("MPEG Audio sync word found !"),!0;return!1}canParse(Vt,Hr){return so$1(Vt,Hr)}appendFrame(Vt,Hr,Wr){if(this.basePTS!==null)return pr(Vt,Hr,Wr,this.basePTS,this.frameIndex)}}class fi{static getSilentFrame(Vt,Hr){switch(Vt){case"mp4a.40.2":if(Hr===1)return new Uint8Array([0,200,0,128,35,128]);if(Hr===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(Hr===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(Hr===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(Hr===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(Hr===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(Hr===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(Hr===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(Hr===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const ke$1=Math.pow(2,32)-1;let A$1=class jl{static init(){jl.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let Vt;for(Vt in jl.types)jl.types.hasOwnProperty(Vt)&&(jl.types[Vt]=[Vt.charCodeAt(0),Vt.charCodeAt(1),Vt.charCodeAt(2),Vt.charCodeAt(3)]);const Hr=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Wr=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);jl.HDLR_TYPES={video:Hr,audio:Wr};const Yr=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Zr=new Uint8Array([0,0,0,0,0,0,0,0]);jl.STTS=jl.STSC=jl.STCO=Zr,jl.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),jl.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),jl.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),jl.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const en=new Uint8Array([105,115,111,109]),tn=new Uint8Array([97,118,99,49]),rn=new Uint8Array([0,0,0,1]);jl.FTYP=jl.box(jl.types.ftyp,en,rn,en,tn),jl.DINF=jl.box(jl.types.dinf,jl.box(jl.types.dref,Yr))}static box(Vt,...Hr){let Wr=8,Yr=Hr.length;const Zr=Yr;for(;Yr--;)Wr+=Hr[Yr].byteLength;const en=new Uint8Array(Wr);for(en[0]=Wr>>24&255,en[1]=Wr>>16&255,en[2]=Wr>>8&255,en[3]=Wr&255,en.set(Vt,4),Yr=0,Wr=8;Yr<Zr;Yr++)en.set(Hr[Yr],Wr),Wr+=Hr[Yr].byteLength;return en}static hdlr(Vt){return jl.box(jl.types.hdlr,jl.HDLR_TYPES[Vt])}static mdat(Vt){return jl.box(jl.types.mdat,Vt)}static mdhd(Vt,Hr){Hr*=Vt;const Wr=Math.floor(Hr/(ke$1+1)),Yr=Math.floor(Hr%(ke$1+1));return jl.box(jl.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,Vt>>24&255,Vt>>16&255,Vt>>8&255,Vt&255,Wr>>24,Wr>>16&255,Wr>>8&255,Wr&255,Yr>>24,Yr>>16&255,Yr>>8&255,Yr&255,85,196,0,0]))}static mdia(Vt){return jl.box(jl.types.mdia,jl.mdhd(Vt.timescale,Vt.duration),jl.hdlr(Vt.type),jl.minf(Vt))}static mfhd(Vt){return jl.box(jl.types.mfhd,new Uint8Array([0,0,0,0,Vt>>24,Vt>>16&255,Vt>>8&255,Vt&255]))}static minf(Vt){return Vt.type==="audio"?jl.box(jl.types.minf,jl.box(jl.types.smhd,jl.SMHD),jl.DINF,jl.stbl(Vt)):jl.box(jl.types.minf,jl.box(jl.types.vmhd,jl.VMHD),jl.DINF,jl.stbl(Vt))}static moof(Vt,Hr,Wr){return jl.box(jl.types.moof,jl.mfhd(Vt),jl.traf(Wr,Hr))}static moov(Vt){let Hr=Vt.length;const Wr=[];for(;Hr--;)Wr[Hr]=jl.trak(Vt[Hr]);return jl.box.apply(null,[jl.types.moov,jl.mvhd(Vt[0].timescale,Vt[0].duration)].concat(Wr).concat(jl.mvex(Vt)))}static mvex(Vt){let Hr=Vt.length;const Wr=[];for(;Hr--;)Wr[Hr]=jl.trex(Vt[Hr]);return jl.box.apply(null,[jl.types.mvex,...Wr])}static mvhd(Vt,Hr){Hr*=Vt;const Wr=Math.floor(Hr/(ke$1+1)),Yr=Math.floor(Hr%(ke$1+1)),Zr=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,Vt>>24&255,Vt>>16&255,Vt>>8&255,Vt&255,Wr>>24,Wr>>16&255,Wr>>8&255,Wr&255,Yr>>24,Yr>>16&255,Yr>>8&255,Yr&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return jl.box(jl.types.mvhd,Zr)}static sdtp(Vt){const Hr=Vt.samples||[],Wr=new Uint8Array(4+Hr.length);let Yr,Zr;for(Yr=0;Yr<Hr.length;Yr++)Zr=Hr[Yr].flags,Wr[Yr+4]=Zr.dependsOn<<4|Zr.isDependedOn<<2|Zr.hasRedundancy;return jl.box(jl.types.sdtp,Wr)}static stbl(Vt){return jl.box(jl.types.stbl,jl.stsd(Vt),jl.box(jl.types.stts,jl.STTS),jl.box(jl.types.stsc,jl.STSC),jl.box(jl.types.stsz,jl.STSZ),jl.box(jl.types.stco,jl.STCO))}static avc1(Vt){let Hr=[],Wr=[],Yr,Zr,en;for(Yr=0;Yr<Vt.sps.length;Yr++)Zr=Vt.sps[Yr],en=Zr.byteLength,Hr.push(en>>>8&255),Hr.push(en&255),Hr=Hr.concat(Array.prototype.slice.call(Zr));for(Yr=0;Yr<Vt.pps.length;Yr++)Zr=Vt.pps[Yr],en=Zr.byteLength,Wr.push(en>>>8&255),Wr.push(en&255),Wr=Wr.concat(Array.prototype.slice.call(Zr));const tn=jl.box(jl.types.avcC,new Uint8Array([1,Hr[3],Hr[4],Hr[5],255,224|Vt.sps.length].concat(Hr).concat([Vt.pps.length]).concat(Wr))),rn=Vt.width,nn=Vt.height,on=Vt.pixelRatio[0],an=Vt.pixelRatio[1];return jl.box(jl.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,rn>>8&255,rn&255,nn>>8&255,nn&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),tn,jl.box(jl.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),jl.box(jl.types.pasp,new Uint8Array([on>>24,on>>16&255,on>>8&255,on&255,an>>24,an>>16&255,an>>8&255,an&255])))}static esds(Vt){const Hr=Vt.config.length;return new Uint8Array([0,0,0,0,3,23+Hr,0,1,0,4,15+Hr,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([Hr]).concat(Vt.config).concat([6,1,2]))}static audioStsd(Vt){const Hr=Vt.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,Vt.channelCount,0,16,0,0,0,0,Hr>>8&255,Hr&255,0,0])}static mp4a(Vt){return jl.box(jl.types.mp4a,jl.audioStsd(Vt),jl.box(jl.types.esds,jl.esds(Vt)))}static mp3(Vt){return jl.box(jl.types[".mp3"],jl.audioStsd(Vt))}static ac3(Vt){return jl.box(jl.types["ac-3"],jl.audioStsd(Vt),jl.box(jl.types.dac3,Vt.config))}static stsd(Vt){return Vt.type==="audio"?Vt.segmentCodec==="mp3"&&Vt.codec==="mp3"?jl.box(jl.types.stsd,jl.STSD,jl.mp3(Vt)):Vt.segmentCodec==="ac3"?jl.box(jl.types.stsd,jl.STSD,jl.ac3(Vt)):jl.box(jl.types.stsd,jl.STSD,jl.mp4a(Vt)):jl.box(jl.types.stsd,jl.STSD,jl.avc1(Vt))}static tkhd(Vt){const Hr=Vt.id,Wr=Vt.duration*Vt.timescale,Yr=Vt.width,Zr=Vt.height,en=Math.floor(Wr/(ke$1+1)),tn=Math.floor(Wr%(ke$1+1));return jl.box(jl.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,Hr>>24&255,Hr>>16&255,Hr>>8&255,Hr&255,0,0,0,0,en>>24,en>>16&255,en>>8&255,en&255,tn>>24,tn>>16&255,tn>>8&255,tn&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,Yr>>8&255,Yr&255,0,0,Zr>>8&255,Zr&255,0,0]))}static traf(Vt,Hr){const Wr=jl.sdtp(Vt),Yr=Vt.id,Zr=Math.floor(Hr/(ke$1+1)),en=Math.floor(Hr%(ke$1+1));return jl.box(jl.types.traf,jl.box(jl.types.tfhd,new Uint8Array([0,0,0,0,Yr>>24,Yr>>16&255,Yr>>8&255,Yr&255])),jl.box(jl.types.tfdt,new Uint8Array([1,0,0,0,Zr>>24,Zr>>16&255,Zr>>8&255,Zr&255,en>>24,en>>16&255,en>>8&255,en&255])),jl.trun(Vt,Wr.length+16+20+8+16+8+8),Wr)}static trak(Vt){return Vt.duration=Vt.duration||4294967295,jl.box(jl.types.trak,jl.tkhd(Vt),jl.mdia(Vt))}static trex(Vt){const Hr=Vt.id;return jl.box(jl.types.trex,new Uint8Array([0,0,0,0,Hr>>24,Hr>>16&255,Hr>>8&255,Hr&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(Vt,Hr){const Wr=Vt.samples||[],Yr=Wr.length,Zr=12+16*Yr,en=new Uint8Array(Zr);let tn,rn,nn,on,an,$n;for(Hr+=8+Zr,en.set([Vt.type==="video"?1:0,0,15,1,Yr>>>24&255,Yr>>>16&255,Yr>>>8&255,Yr&255,Hr>>>24&255,Hr>>>16&255,Hr>>>8&255,Hr&255],0),tn=0;tn<Yr;tn++)rn=Wr[tn],nn=rn.duration,on=rn.size,an=rn.flags,$n=rn.cts,en.set([nn>>>24&255,nn>>>16&255,nn>>>8&255,nn&255,on>>>24&255,on>>>16&255,on>>>8&255,on&255,an.isLeading<<2|an.dependsOn,an.isDependedOn<<6|an.hasRedundancy<<4|an.paddingValue<<1|an.isNonSync,an.degradPrio&61440,an.degradPrio&15,$n>>>24&255,$n>>>16&255,$n>>>8&255,$n&255],12+16*tn);return jl.box(jl.types.trun,en)}static initSegment(Vt){jl.types||jl.init();const Hr=jl.moov(Vt);return pe$1(jl.FTYP,Hr)}};A$1.types=void 0;A$1.HDLR_TYPES=void 0;A$1.STTS=void 0;A$1.STSC=void 0;A$1.STCO=void 0;A$1.STSZ=void 0;A$1.VMHD=void 0;A$1.SMHD=void 0;A$1.STSD=void 0;A$1.FTYP=void 0;A$1.DINF=void 0;const vr=9e4;function Cs(Kt,Vt,Hr=1,Wr=!1){const Yr=Kt*Vt*Hr;return Wr?Math.round(Yr):Yr}function go(Kt,Vt,Hr=1,Wr=!1){return Cs(Kt,Vt,1/Hr,Wr)}function Ze(Kt,Vt=!1){return Cs(Kt,1e3,1/vr,Vt)}function mo(Kt,Vt=1){return Cs(Kt,vr,1/Vt)}const po$1=10*1e3,gi=1024,To=1152,Eo=1536;let Ge=null,Yt=null;class Tt{constructor(Vt,Hr,Wr,Yr=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=Vt,this.config=Hr,this.typeSupported=Wr,this.ISGenerated=!1,Ge===null){const Zr=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Ge=Zr?parseInt(Zr[1]):0}if(Yt===null){const Zr=navigator.userAgent.match(/Safari\/(\d+)/i);Yt=Zr?parseInt(Zr[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(Vt){v$2.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=Vt}resetNextTimestamp(){v$2.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){v$2.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(Vt){let Hr=!1;const Wr=Vt.reduce((Yr,Zr)=>{const en=Zr.pts-Yr;return en<-4294967296?(Hr=!0,me(Yr,Zr.pts)):en>0?Yr:Zr.pts},Vt[0].pts);return Hr&&v$2.debug("PTS rollover detected"),Wr}remux(Vt,Hr,Wr,Yr,Zr,en,tn,rn){let nn,on,an,$n,ln,Hn,jn=Zr,zn=Zr;const Wn=Vt.pid>-1,ei=Hr.pid>-1,$i=Hr.samples.length,Mi=Vt.samples.length>0,Ni=tn&&$i>0||$i>1;if((!Wn||Mi)&&(!ei||Ni)||this.ISGenerated||tn){if(this.ISGenerated){var Ts,ps,$s,Ws;const Xs=this.videoTrackConfig;Xs&&(Hr.width!==Xs.width||Hr.height!==Xs.height||((Ts=Hr.pixelRatio)==null?void 0:Ts[0])!==((ps=Xs.pixelRatio)==null?void 0:ps[0])||(($s=Hr.pixelRatio)==null?void 0:$s[1])!==((Ws=Xs.pixelRatio)==null?void 0:Ws[1]))&&this.resetInitSegment()}else an=this.generateIS(Vt,Hr,Zr,en);const Hs=this.isVideoContiguous;let js=-1,zs;if(Ni&&(js=yo(Hr.samples),!Hs&&this.config.forceKeyFrameOnDiscontinuity))if(Hn=!0,js>0){v$2.warn(`[mp4-remuxer]: Dropped ${js} out of ${$i} video samples due to a missing keyframe`);const Xs=this.getVideoStartPts(Hr.samples);Hr.samples=Hr.samples.slice(js),Hr.dropped+=js,zn+=(Hr.samples[0].pts-Xs)/Hr.inputTimeScale,zs=zn}else js===-1&&(v$2.warn(`[mp4-remuxer]: No keyframe found out of ${$i} video samples`),Hn=!1);if(this.ISGenerated){if(Mi&&Ni){const Xs=this.getVideoStartPts(Hr.samples),ia=(me(Vt.samples[0].pts,Xs)-Xs)/Hr.inputTimeScale;jn+=Math.max(0,ia),zn+=Math.max(0,-ia)}if(Mi){if(Vt.samplerate||(v$2.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),an=this.generateIS(Vt,Hr,Zr,en)),on=this.remuxAudio(Vt,jn,this.isAudioContiguous,en,ei||Ni||rn===N$4.AUDIO?zn:void 0),Ni){const Xs=on?on.endPTS-on.startPTS:0;Hr.inputTimeScale||(v$2.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),an=this.generateIS(Vt,Hr,Zr,en)),nn=this.remuxVideo(Hr,zn,Hs,Xs)}}else Ni&&(nn=this.remuxVideo(Hr,zn,Hs,0));nn&&(nn.firstKeyFrame=js,nn.independent=js!==-1,nn.firstKeyFramePTS=zs)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(Wr.samples.length&&(ln=Ar(Wr,Zr,this._initPTS,this._initDTS)),Yr.samples.length&&($n=Lr(Yr,Zr,this._initPTS))),{audio:on,video:nn,initSegment:an,independent:Hn,text:$n,id3:ln}}generateIS(Vt,Hr,Wr,Yr){const Zr=Vt.samples,en=Hr.samples,tn=this.typeSupported,rn={},nn=this._initPTS;let on=!nn||Yr,an="audio/mp4",$n,ln,Hn;if(on&&($n=ln=1/0),Vt.config&&Zr.length){switch(Vt.timescale=Vt.samplerate,Vt.segmentCodec){case"mp3":tn.mpeg?(an="audio/mpeg",Vt.codec=""):tn.mp3&&(Vt.codec="mp3");break;case"ac3":Vt.codec="ac-3";break}rn.audio={id:"audio",container:an,codec:Vt.codec,initSegment:Vt.segmentCodec==="mp3"&&tn.mpeg?new Uint8Array(0):A$1.initSegment([Vt]),metadata:{channelCount:Vt.channelCount}},on&&(Hn=Vt.inputTimeScale,!nn||Hn!==nn.timescale?$n=ln=Zr[0].pts-Math.round(Hn*Wr):on=!1)}if(Hr.sps&&Hr.pps&&en.length){if(Hr.timescale=Hr.inputTimeScale,rn.video={id:"main",container:"video/mp4",codec:Hr.codec,initSegment:A$1.initSegment([Hr]),metadata:{width:Hr.width,height:Hr.height}},on)if(Hn=Hr.inputTimeScale,!nn||Hn!==nn.timescale){const jn=this.getVideoStartPts(en),zn=Math.round(Hn*Wr);ln=Math.min(ln,me(en[0].dts,jn)-zn),$n=Math.min($n,jn-zn)}else on=!1;this.videoTrackConfig={width:Hr.width,height:Hr.height,pixelRatio:Hr.pixelRatio}}if(Object.keys(rn).length)return this.ISGenerated=!0,on?(this._initPTS={baseTime:$n,timescale:Hn},this._initDTS={baseTime:ln,timescale:Hn}):$n=Hn=void 0,{tracks:rn,initPTS:$n,timescale:Hn}}remuxVideo(Vt,Hr,Wr,Yr){const Zr=Vt.inputTimeScale,en=Vt.samples,tn=[],rn=en.length,nn=this._initPTS;let on=this.nextAvcDts,an=8,$n=this.videoSampleDuration,ln,Hn,jn=Number.POSITIVE_INFINITY,zn=Number.NEGATIVE_INFINITY,Wn=!1;if(!Wr||on===null){const Gs=Hr*Zr,Hl=en[0].pts-me(en[0].dts,en[0].pts);Ge&&on!==null&&Math.abs(Gs-Hl-on)<15e3?Wr=!0:on=Gs-Hl}const ei=nn.baseTime*Zr/nn.timescale;for(let Gs=0;Gs<rn;Gs++){const Hl=en[Gs];Hl.pts=me(Hl.pts-ei,on),Hl.dts=me(Hl.dts-ei,on),Hl.dts<en[Gs>0?Gs-1:Gs].dts&&(Wn=!0)}Wn&&en.sort(function(Gs,Hl){const Js=Gs.dts-Hl.dts,sa=Gs.pts-Hl.pts;return Js||sa}),ln=en[0].dts,Hn=en[en.length-1].dts;const $i=Hn-ln,Mi=$i?Math.round($i/(rn-1)):$n||Vt.inputTimeScale/30;if(Wr){const Gs=ln-on,Hl=Gs>Mi,Js=Gs<-1;if((Hl||Js)&&(Hl?v$2.warn(`AVC: ${Ze(Gs,!0)} ms (${Gs}dts) hole between fragments detected at ${Hr.toFixed(3)}`):v$2.warn(`AVC: ${Ze(-Gs,!0)} ms (${Gs}dts) overlapping between fragments detected at ${Hr.toFixed(3)}`),!Js||on>=en[0].pts||Ge)){ln=on;const sa=en[0].pts-Gs;if(Hl)en[0].dts=ln,en[0].pts=sa;else for(let Ca=0;Ca<en.length&&!(en[Ca].dts>sa);Ca++)en[Ca].dts-=Gs,en[Ca].pts-=Gs;v$2.log(`Video: Initial PTS/DTS adjusted: ${Ze(sa,!0)}/${Ze(ln,!0)}, delta: ${Ze(Gs,!0)} ms`)}}ln=Math.max(0,ln);let Ni=0,Ts=0,ps=ln;for(let Gs=0;Gs<rn;Gs++){const Hl=en[Gs],Js=Hl.units,sa=Js.length;let Ca=0;for(let tc=0;tc<sa;tc++)Ca+=Js[tc].data.length;Ts+=Ca,Ni+=sa,Hl.length=Ca,Hl.dts<ps?(Hl.dts=ps,ps+=Mi/4|0||1):ps=Hl.dts,jn=Math.min(Hl.pts,jn),zn=Math.max(Hl.pts,zn)}Hn=en[rn-1].dts;const $s=Ts+4*Ni+8;let Ws;try{Ws=new Uint8Array($s)}catch(Gs){this.observer.emit(m$2.ERROR,m$2.ERROR,{type:B$5.MUX_ERROR,details:L$2.REMUX_ALLOC_ERROR,fatal:!1,error:Gs,bytes:$s,reason:`fail allocating video mdat ${$s}`});return}const Hs=new DataView(Ws.buffer);Hs.setUint32(0,$s),Ws.set(A$1.types.mdat,4);let js=!1,zs=Number.POSITIVE_INFINITY,Xs=Number.POSITIVE_INFINITY,ia=Number.NEGATIVE_INFINITY,Qs=Number.NEGATIVE_INFINITY;for(let Gs=0;Gs<rn;Gs++){const Hl=en[Gs],Js=Hl.units;let sa=0;for(let zl=0,ec=Js.length;zl<ec;zl++){const sc=Js[zl],ac=sc.data,rc=sc.data.byteLength;Hs.setUint32(an,rc),an+=4,Ws.set(ac,an),an+=rc,sa+=4+rc}let Ca;if(Gs<rn-1)$n=en[Gs+1].dts-Hl.dts,Ca=en[Gs+1].pts-Hl.pts;else{const zl=this.config,ec=Gs>0?Hl.dts-en[Gs-1].dts:Mi;if(Ca=Gs>0?Hl.pts-en[Gs-1].pts:Mi,zl.stretchShortVideoTrack&&this.nextAudioPts!==null){const sc=Math.floor(zl.maxBufferHole*Zr),ac=(Yr?jn+Yr*Zr:this.nextAudioPts)-Hl.pts;ac>sc?($n=ac-ec,$n<0?$n=ec:js=!0,v$2.log(`[mp4-remuxer]: It is approximately ${ac/90} ms to the next segment; using duration ${$n/90} ms for the last video frame.`)):$n=ec}else $n=ec}const tc=Math.round(Hl.pts-Hl.dts);zs=Math.min(zs,$n),ia=Math.max(ia,$n),Xs=Math.min(Xs,Ca),Qs=Math.max(Qs,Ca),tn.push(new mi(Hl.key,$n,sa,tc))}if(tn.length){if(Ge){if(Ge<70){const Gs=tn[0].flags;Gs.dependsOn=2,Gs.isNonSync=0}}else if(Yt&&Qs-Xs<ia-zs&&Mi/ia<.025&&tn[0].cts===0){v$2.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let Gs=ln;for(let Hl=0,Js=tn.length;Hl<Js;Hl++){const sa=Gs+tn[Hl].duration,Ca=Gs+tn[Hl].cts;if(Hl<Js-1){const tc=sa+tn[Hl+1].cts;tn[Hl].duration=tc-Ca}else tn[Hl].duration=Hl?tn[Hl-1].duration:Mi;tn[Hl].cts=0,Gs=sa}}}$n=js||!$n?Mi:$n,this.nextAvcDts=on=Hn+$n,this.videoSampleDuration=$n,this.isVideoContiguous=!0;const Zs={data1:A$1.moof(Vt.sequenceNumber++,ln,se$2({},Vt,{samples:tn})),data2:Ws,startPTS:jn/Zr,endPTS:(zn+$n)/Zr,startDTS:ln/Zr,endDTS:on/Zr,type:"video",hasAudio:!1,hasVideo:!0,nb:tn.length,dropped:Vt.dropped};return Vt.samples=[],Vt.dropped=0,Zs}getSamplesPerFrame(Vt){switch(Vt.segmentCodec){case"mp3":return To;case"ac3":return Eo;default:return gi}}remuxAudio(Vt,Hr,Wr,Yr,Zr){const en=Vt.inputTimeScale,tn=Vt.samplerate?Vt.samplerate:en,rn=en/tn,nn=this.getSamplesPerFrame(Vt),on=nn*rn,an=this._initPTS,$n=Vt.segmentCodec==="mp3"&&this.typeSupported.mpeg,ln=[],Hn=Zr!==void 0;let jn=Vt.samples,zn=$n?0:8,Wn=this.nextAudioPts||-1;const ei=Hr*en,$i=an.baseTime*en/an.timescale;if(this.isAudioContiguous=Wr=Wr||jn.length&&Wn>0&&(Yr&&Math.abs(ei-Wn)<9e3||Math.abs(me(jn[0].pts-$i,ei)-Wn)<20*on),jn.forEach(function(Qs){Qs.pts=me(Qs.pts-$i,ei)}),!Wr||Wn<0){if(jn=jn.filter(Qs=>Qs.pts>=0),!jn.length)return;Zr===0?Wn=0:Yr&&!Hn?Wn=Math.max(0,ei):Wn=jn[0].pts}if(Vt.segmentCodec==="aac"){const Qs=this.config.maxAudioFramesDrift;for(let Zs=0,Gs=Wn;Zs<jn.length;Zs++){const Hl=jn[Zs],Js=Hl.pts,sa=Js-Gs,Ca=Math.abs(1e3*sa/en);if(sa<=-Qs*on&&Hn)Zs===0&&(v$2.warn(`Audio frame @ ${(Js/en).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*sa/en)} ms.`),this.nextAudioPts=Wn=Gs=Js);else if(sa>=Qs*on&&Ca<po$1&&Hn){let tc=Math.round(sa/on);Gs=Js-tc*on,Gs<0&&(tc--,Gs+=on),Zs===0&&(this.nextAudioPts=Wn=Gs),v$2.warn(`[mp4-remuxer]: Injecting ${tc} audio frame @ ${(Gs/en).toFixed(3)}s due to ${Math.round(1e3*sa/en)} ms gap.`);for(let zl=0;zl<tc;zl++){const ec=Math.max(Gs,0);let sc=fi.getSilentFrame(Vt.manifestCodec||Vt.codec,Vt.channelCount);sc||(v$2.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),sc=Hl.unit.subarray()),jn.splice(Zs,0,{unit:sc,pts:ec}),Gs+=on,Zs++}}Hl.pts=Gs,Gs+=on}}let Mi=null,Ni=null,Ts,ps=0,$s=jn.length;for(;$s--;)ps+=jn[$s].unit.byteLength;for(let Qs=0,Zs=jn.length;Qs<Zs;Qs++){const Gs=jn[Qs],Hl=Gs.unit;let Js=Gs.pts;if(Ni!==null){const Ca=ln[Qs-1];Ca.duration=Math.round((Js-Ni)/rn)}else if(Wr&&Vt.segmentCodec==="aac"&&(Js=Wn),Mi=Js,ps>0){ps+=zn;try{Ts=new Uint8Array(ps)}catch(Ca){this.observer.emit(m$2.ERROR,m$2.ERROR,{type:B$5.MUX_ERROR,details:L$2.REMUX_ALLOC_ERROR,fatal:!1,error:Ca,bytes:ps,reason:`fail allocating audio mdat ${ps}`});return}$n||(new DataView(Ts.buffer).setUint32(0,ps),Ts.set(A$1.types.mdat,4))}else return;Ts.set(Hl,zn);const sa=Hl.byteLength;zn+=sa,ln.push(new mi(!0,nn,sa,0)),Ni=Js}const Ws=ln.length;if(!Ws)return;const Hs=ln[ln.length-1];this.nextAudioPts=Wn=Ni+rn*Hs.duration;const js=$n?new Uint8Array(0):A$1.moof(Vt.sequenceNumber++,Mi/rn,se$2({},Vt,{samples:ln}));Vt.samples=[];const zs=Mi/en,Xs=Wn/en,ia={data1:js,data2:Ts,startPTS:zs,endPTS:Xs,startDTS:zs,endDTS:Xs,type:"audio",hasAudio:!0,hasVideo:!1,nb:Ws};return this.isAudioContiguous=!0,ia}remuxEmptyAudio(Vt,Hr,Wr,Yr){const Zr=Vt.inputTimeScale,en=Vt.samplerate?Vt.samplerate:Zr,tn=Zr/en,rn=this.nextAudioPts,nn=this._initDTS,on=nn.baseTime*9e4/nn.timescale,an=(rn!==null?rn:Yr.startDTS*Zr)+on,$n=Yr.endDTS*Zr+on,ln=tn*gi,Hn=Math.ceil(($n-an)/ln),jn=fi.getSilentFrame(Vt.manifestCodec||Vt.codec,Vt.channelCount);if(v$2.warn("[mp4-remuxer]: remux empty Audio"),!jn){v$2.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const zn=[];for(let Wn=0;Wn<Hn;Wn++){const ei=an+Wn*ln;zn.push({unit:jn,pts:ei,dts:ei})}return Vt.samples=zn,this.remuxAudio(Vt,Hr,Wr,!1)}}function me(Kt,Vt){let Hr;if(Vt===null)return Kt;for(Vt<Kt?Hr=-8589934592:Hr=8589934592;Math.abs(Kt-Vt)>4294967296;)Kt+=Hr;return Kt}function yo(Kt){for(let Vt=0;Vt<Kt.length;Vt++)if(Kt[Vt].key)return Vt;return-1}function Ar(Kt,Vt,Hr,Wr){const Yr=Kt.samples.length;if(!Yr)return;const Zr=Kt.inputTimeScale;for(let tn=0;tn<Yr;tn++){const rn=Kt.samples[tn];rn.pts=me(rn.pts-Hr.baseTime*Zr/Hr.timescale,Vt*Zr)/Zr,rn.dts=me(rn.dts-Wr.baseTime*Zr/Wr.timescale,Vt*Zr)/Zr}const en=Kt.samples;return Kt.samples=[],{samples:en}}function Lr(Kt,Vt,Hr){const Wr=Kt.samples.length;if(!Wr)return;const Yr=Kt.inputTimeScale;for(let en=0;en<Wr;en++){const tn=Kt.samples[en];tn.pts=me(tn.pts-Hr.baseTime*Yr/Hr.timescale,Vt*Yr)/Yr}Kt.samples.sort((en,tn)=>en.pts-tn.pts);const Zr=Kt.samples;return Kt.samples=[],{samples:Zr}}class mi{constructor(Vt,Hr,Wr,Yr){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=Hr,this.size=Wr,this.cts=Yr,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:Vt?2:1,isNonSync:Vt?0:1}}}class xo{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(Vt){this.initPTS=Vt,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(Vt,Hr,Wr,Yr){this.audioCodec=Hr,this.videoCodec=Wr,this.generateInitSegment(bn(Vt,Yr)),this.emitInitSegment=!0}generateInitSegment(Vt){let{audioCodec:Hr,videoCodec:Wr}=this;if(!(Vt!=null&&Vt.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const Yr=this.initData=zi(Vt);Yr.audio&&(Hr=pi(Yr.audio,X$5.AUDIO)),Yr.video&&(Wr=pi(Yr.video,X$5.VIDEO));const Zr={};Yr.audio&&Yr.video?Zr.audiovideo={container:"video/mp4",codec:Hr+","+Wr,initSegment:Vt,id:"main"}:Yr.audio?Zr.audio={container:"audio/mp4",codec:Hr,initSegment:Vt,id:"audio"}:Yr.video?Zr.video={container:"video/mp4",codec:Wr,initSegment:Vt,id:"main"}:v$2.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=Zr}remux(Vt,Hr,Wr,Yr,Zr,en){var tn,rn;let{initPTS:nn,lastEndTime:on}=this;const an={audio:void 0,video:void 0,text:Yr,id3:Wr,initSegment:void 0};O$6(on)||(on=this.lastEndTime=Zr||0);const $n=Hr.samples;if(!($n!=null&&$n.length))return an;const ln={initPTS:void 0,timescale:1};let Hn=this.initData;if((tn=Hn)!=null&&tn.length||(this.generateInitSegment($n),Hn=this.initData),!((rn=Hn)!=null&&rn.length))return v$2.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),an;this.emitInitSegment&&(ln.tracks=this.initTracks,this.emitInitSegment=!1);const jn=Cn($n,Hn),zn=Dn(Hn,$n),Wn=zn===null?Zr:zn;(So(nn,Wn,Zr,jn)||ln.timescale!==nn.timescale&&en)&&(ln.initPTS=Wn-Zr,nn&&nn.timescale===1&&v$2.warn(`Adjusting initPTS by ${ln.initPTS-nn.baseTime}`),this.initPTS=nn={baseTime:ln.initPTS,timescale:1});const ei=Vt?Wn-nn.baseTime/nn.timescale:on,$i=ei+jn;kn(Hn,$n,nn.baseTime/nn.timescale),jn>0?this.lastEndTime=$i:(v$2.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const Mi=!!Hn.audio,Ni=!!Hn.video;let Ts="";Mi&&(Ts+="audio"),Ni&&(Ts+="video");const ps={data1:$n,startPTS:ei,startDTS:ei,endPTS:$i,endDTS:$i,type:Ts,hasAudio:Mi,hasVideo:Ni,nb:1,dropped:0};return an.audio=ps.type==="audio"?ps:void 0,an.video=ps.type!=="audio"?ps:void 0,an.initSegment=ln,an.id3=Ar(Wr,Zr,nn,nn),Yr.samples.length&&(an.text=Lr(Yr,Zr,nn)),an}}function So(Kt,Vt,Hr,Wr){if(Kt===null)return!0;const Yr=Math.max(Wr,1),Zr=Vt-Kt.baseTime/Kt.timescale;return Math.abs(Zr-Hr)>Yr}function pi(Kt,Vt){const Hr=Kt==null?void 0:Kt.codec;if(Hr&&Hr.length>4)return Hr;if(Vt===X$5.AUDIO){if(Hr==="ec-3"||Hr==="ac-3"||Hr==="alac")return Hr;if(Hr==="fLaC"||Hr==="Opus")return Rt(Hr,!1);const Wr="mp4a.40.5";return v$2.info(`Parsed audio codec "${Hr}" or audio object type not handled. Using "${Wr}"`),Wr}return v$2.warn(`Unhandled video codec "${Hr}"`),Hr==="hvc1"||Hr==="hev1"?"hvc1.1.6.L120.90":Hr==="av01"?"av01.0.04M.08":"avc1.42e01e"}let we;try{we=self.performance.now.bind(self.performance)}catch{v$2.debug("Unable to use Performance API on this environment"),we=qe==null?void 0:qe.Date.now}const Et=[{demux:no,remux:xo},{demux:_e$2,remux:Tt},{demux:io$1,remux:Tt},{demux:fo,remux:Tt}];Et.splice(2,0,{demux:ao$1,remux:Tt});class Ti{constructor(Vt,Hr,Wr,Yr,Zr){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=Vt,this.typeSupported=Hr,this.config=Wr,this.vendor=Yr,this.id=Zr}configure(Vt){this.transmuxConfig=Vt,this.decrypter&&this.decrypter.reset()}push(Vt,Hr,Wr,Yr){const Zr=Wr.transmuxing;Zr.executeStart=we();let en=new Uint8Array(Vt);const{currentTransmuxState:tn,transmuxConfig:rn}=this;Yr&&(this.currentTransmuxState=Yr);const{contiguous:nn,discontinuity:on,trackSwitch:an,accurateTimeOffset:$n,timeOffset:ln,initSegmentChange:Hn}=Yr||tn,{audioCodec:jn,videoCodec:zn,defaultInitPts:Wn,duration:ei,initSegmentData:$i}=rn,Mi=vo(en,Hr);if(Mi&&Mi.method==="AES-128"){const $s=this.getDecrypter();if($s.isSync()){let Ws=$s.softwareDecrypt(en,Mi.key.buffer,Mi.iv.buffer);if(Wr.part>-1&&(Ws=$s.flush()),!Ws)return Zr.executeEnd=we(),qt(Wr);en=new Uint8Array(Ws)}else return this.decryptionPromise=$s.webCryptoDecrypt(en,Mi.key.buffer,Mi.iv.buffer).then(Ws=>{const Hs=this.push(Ws,null,Wr);return this.decryptionPromise=null,Hs}),this.decryptionPromise}const Ni=this.needsProbing(on,an);if(Ni){const $s=this.configureTransmuxer(en);if($s)return v$2.warn(`[transmuxer] ${$s.message}`),this.observer.emit(m$2.ERROR,m$2.ERROR,{type:B$5.MEDIA_ERROR,details:L$2.FRAG_PARSING_ERROR,fatal:!1,error:$s,reason:$s.message}),Zr.executeEnd=we(),qt(Wr)}(on||an||Hn||Ni)&&this.resetInitSegment($i,jn,zn,ei,Hr),(on||Hn||Ni)&&this.resetInitialTimestamp(Wn),nn||this.resetContiguity();const Ts=this.transmux(en,Mi,ln,$n,Wr),ps=this.currentTransmuxState;return ps.contiguous=!0,ps.discontinuity=!1,ps.trackSwitch=!1,Zr.executeEnd=we(),Ts}flush(Vt){const Hr=Vt.transmuxing;Hr.executeStart=we();const{decrypter:Wr,currentTransmuxState:Yr,decryptionPromise:Zr}=this;if(Zr)return Zr.then(()=>this.flush(Vt));const en=[],{timeOffset:tn}=Yr;if(Wr){const an=Wr.flush();an&&en.push(this.push(an,null,Vt))}const{demuxer:rn,remuxer:nn}=this;if(!rn||!nn)return Hr.executeEnd=we(),[qt(Vt)];const on=rn.flush(tn);return yt(on)?on.then(an=>(this.flushRemux(en,an,Vt),en)):(this.flushRemux(en,on,Vt),en)}flushRemux(Vt,Hr,Wr){const{audioTrack:Yr,videoTrack:Zr,id3Track:en,textTrack:tn}=Hr,{accurateTimeOffset:rn,timeOffset:nn}=this.currentTransmuxState;v$2.log(`[transmuxer.ts]: Flushed fragment ${Wr.sn}${Wr.part>-1?" p: "+Wr.part:""} of level ${Wr.level}`);const on=this.remuxer.remux(Yr,Zr,en,tn,nn,rn,!0,this.id);Vt.push({remuxResult:on,chunkMeta:Wr}),Wr.transmuxing.executeEnd=we()}resetInitialTimestamp(Vt){const{demuxer:Hr,remuxer:Wr}=this;!Hr||!Wr||(Hr.resetTimeStamp(Vt),Wr.resetTimeStamp(Vt))}resetContiguity(){const{demuxer:Vt,remuxer:Hr}=this;!Vt||!Hr||(Vt.resetContiguity(),Hr.resetNextTimestamp())}resetInitSegment(Vt,Hr,Wr,Yr,Zr){const{demuxer:en,remuxer:tn}=this;!en||!tn||(en.resetInitSegment(Vt,Hr,Wr,Yr),tn.resetInitSegment(Vt,Hr,Wr,Zr))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(Vt,Hr,Wr,Yr,Zr){let en;return Hr&&Hr.method==="SAMPLE-AES"?en=this.transmuxSampleAes(Vt,Hr,Wr,Yr,Zr):en=this.transmuxUnencrypted(Vt,Wr,Yr,Zr),en}transmuxUnencrypted(Vt,Hr,Wr,Yr){const{audioTrack:Zr,videoTrack:en,id3Track:tn,textTrack:rn}=this.demuxer.demux(Vt,Hr,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(Zr,en,tn,rn,Hr,Wr,!1,this.id),chunkMeta:Yr}}transmuxSampleAes(Vt,Hr,Wr,Yr,Zr){return this.demuxer.demuxSampleAes(Vt,Hr,Wr).then(en=>({remuxResult:this.remuxer.remux(en.audioTrack,en.videoTrack,en.id3Track,en.textTrack,Wr,Yr,!1,this.id),chunkMeta:Zr}))}configureTransmuxer(Vt){const{config:Hr,observer:Wr,typeSupported:Yr,vendor:Zr}=this;let en;for(let $n=0,ln=Et.length;$n<ln;$n++){var tn;if((tn=Et[$n].demux)!=null&&tn.probe(Vt)){en=Et[$n];break}}if(!en)return new Error("Failed to find demuxer by probing fragment data");const rn=this.demuxer,nn=this.remuxer,on=en.remux,an=en.demux;(!nn||!(nn instanceof on))&&(this.remuxer=new on(Wr,Hr,Yr,Zr)),(!rn||!(rn instanceof an))&&(this.demuxer=new an(Wr,Hr,Yr),this.probe=an.probe)}needsProbing(Vt,Hr){return!this.demuxer||!this.remuxer||Vt||Hr}getDecrypter(){let Vt=this.decrypter;return Vt||(Vt=this.decrypter=new Ls(this.config)),Vt}}function vo(Kt,Vt){let Hr=null;return Kt.byteLength>0&&(Vt==null?void 0:Vt.key)!=null&&Vt.iv!==null&&Vt.method!=null&&(Hr=Vt),Hr}const qt=Kt=>({remuxResult:{},chunkMeta:Kt});function yt(Kt){return"then"in Kt&&Kt.then instanceof Function}class Ao{constructor(Vt,Hr,Wr,Yr,Zr){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=Vt,this.videoCodec=Hr,this.initSegmentData=Wr,this.duration=Yr,this.defaultInitPts=Zr||null}}class Lo{constructor(Vt,Hr,Wr,Yr,Zr,en){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=Vt,this.contiguous=Hr,this.accurateTimeOffset=Wr,this.trackSwitch=Yr,this.timeOffset=Zr,this.initSegmentChange=en}}var Rr={exports:{}};(function(Kt){var Vt=Object.prototype.hasOwnProperty,Hr="~";function Wr(){}Object.create&&(Wr.prototype=Object.create(null),new Wr().__proto__||(Hr=!1));function Yr(rn,nn,on){this.fn=rn,this.context=nn,this.once=on||!1}function Zr(rn,nn,on,an,$n){if(typeof on!="function")throw new TypeError("The listener must be a function");var ln=new Yr(on,an||rn,$n),Hn=Hr?Hr+nn:nn;return rn._events[Hn]?rn._events[Hn].fn?rn._events[Hn]=[rn._events[Hn],ln]:rn._events[Hn].push(ln):(rn._events[Hn]=ln,rn._eventsCount++),rn}function en(rn,nn){--rn._eventsCount===0?rn._events=new Wr:delete rn._events[nn]}function tn(){this._events=new Wr,this._eventsCount=0}tn.prototype.eventNames=function(){var rn=[],nn,on;if(this._eventsCount===0)return rn;for(on in nn=this._events)Vt.call(nn,on)&&rn.push(Hr?on.slice(1):on);return Object.getOwnPropertySymbols?rn.concat(Object.getOwnPropertySymbols(nn)):rn},tn.prototype.listeners=function(rn){var nn=Hr?Hr+rn:rn,on=this._events[nn];if(!on)return[];if(on.fn)return[on.fn];for(var an=0,$n=on.length,ln=new Array($n);an<$n;an++)ln[an]=on[an].fn;return ln},tn.prototype.listenerCount=function(rn){var nn=Hr?Hr+rn:rn,on=this._events[nn];return on?on.fn?1:on.length:0},tn.prototype.emit=function(rn,nn,on,an,$n,ln){var Hn=Hr?Hr+rn:rn;if(!this._events[Hn])return!1;var jn=this._events[Hn],zn=arguments.length,Wn,ei;if(jn.fn){switch(jn.once&&this.removeListener(rn,jn.fn,void 0,!0),zn){case 1:return jn.fn.call(jn.context),!0;case 2:return jn.fn.call(jn.context,nn),!0;case 3:return jn.fn.call(jn.context,nn,on),!0;case 4:return jn.fn.call(jn.context,nn,on,an),!0;case 5:return jn.fn.call(jn.context,nn,on,an,$n),!0;case 6:return jn.fn.call(jn.context,nn,on,an,$n,ln),!0}for(ei=1,Wn=new Array(zn-1);ei<zn;ei++)Wn[ei-1]=arguments[ei];jn.fn.apply(jn.context,Wn)}else{var $i=jn.length,Mi;for(ei=0;ei<$i;ei++)switch(jn[ei].once&&this.removeListener(rn,jn[ei].fn,void 0,!0),zn){case 1:jn[ei].fn.call(jn[ei].context);break;case 2:jn[ei].fn.call(jn[ei].context,nn);break;case 3:jn[ei].fn.call(jn[ei].context,nn,on);break;case 4:jn[ei].fn.call(jn[ei].context,nn,on,an);break;default:if(!Wn)for(Mi=1,Wn=new Array(zn-1);Mi<zn;Mi++)Wn[Mi-1]=arguments[Mi];jn[ei].fn.apply(jn[ei].context,Wn)}}return!0},tn.prototype.on=function(rn,nn,on){return Zr(this,rn,nn,on,!1)},tn.prototype.once=function(rn,nn,on){return Zr(this,rn,nn,on,!0)},tn.prototype.removeListener=function(rn,nn,on,an){var $n=Hr?Hr+rn:rn;if(!this._events[$n])return this;if(!nn)return en(this,$n),this;var ln=this._events[$n];if(ln.fn)ln.fn===nn&&(!an||ln.once)&&(!on||ln.context===on)&&en(this,$n);else{for(var Hn=0,jn=[],zn=ln.length;Hn<zn;Hn++)(ln[Hn].fn!==nn||an&&!ln[Hn].once||on&&ln[Hn].context!==on)&&jn.push(ln[Hn]);jn.length?this._events[$n]=jn.length===1?jn[0]:jn:en(this,$n)}return this},tn.prototype.removeAllListeners=function(rn){var nn;return rn?(nn=Hr?Hr+rn:rn,this._events[nn]&&en(this,nn)):(this._events=new Wr,this._eventsCount=0),this},tn.prototype.off=tn.prototype.removeListener,tn.prototype.addListener=tn.prototype.on,tn.prefixed=Hr,tn.EventEmitter=tn,Kt.exports=tn})(Rr);var Ro=Rr.exports,ws=qr(Ro);class Ir{constructor(Vt,Hr,Wr,Yr){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const Zr=Vt.config;this.hls=Vt,this.id=Hr,this.useWorker=!!Zr.enableWorker,this.onTransmuxComplete=Wr,this.onFlush=Yr;const en=(on,an)=>{an=an||{},an.frag=this.frag,an.id=this.id,on===m$2.ERROR&&(this.error=an.error),this.hls.trigger(on,an)};this.observer=new ws,this.observer.on(m$2.FRAG_DECRYPTED,en),this.observer.on(m$2.ERROR,en);const tn=Qe(Zr.preferManagedMediaSource)||{isTypeSupported:()=>!1},rn={mpeg:tn.isTypeSupported("audio/mpeg"),mp3:tn.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:tn.isTypeSupported('audio/mp4; codecs="ac-3"')},nn=navigator.vendor;if(this.useWorker&&typeof Worker<"u"&&(Zr.workerPath||Va())){try{Zr.workerPath?(v$2.log(`loading Web Worker ${Zr.workerPath} for "${Hr}"`),this.workerContext=Wa(Zr.workerPath)):(v$2.log(`injecting Web Worker for "${Hr}"`),this.workerContext=Ha()),this.onwmsg=an=>this.onWorkerMessage(an);const{worker:on}=this.workerContext;on.addEventListener("message",this.onwmsg),on.onerror=an=>{const $n=new Error(`${an.message}  (${an.filename}:${an.lineno})`);Zr.enableWorker=!1,v$2.warn(`Error in "${Hr}" Web Worker, fallback to inline`),this.hls.trigger(m$2.ERROR,{type:B$5.OTHER_ERROR,details:L$2.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:$n})},on.postMessage({cmd:"init",typeSupported:rn,vendor:nn,id:Hr,config:JSON.stringify(Zr)})}catch(on){v$2.warn(`Error setting up "${Hr}" Web Worker, fallback to inline`,on),this.resetWorker(),this.error=null,this.transmuxer=new Ti(this.observer,rn,Zr,nn,Hr)}return}this.transmuxer=new Ti(this.observer,rn,Zr,nn,Hr)}resetWorker(){if(this.workerContext){const{worker:Vt,objectURL:Hr}=this.workerContext;Hr&&self.URL.revokeObjectURL(Hr),Vt.removeEventListener("message",this.onwmsg),Vt.onerror=null,Vt.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const Hr=this.transmuxer;Hr&&(Hr.destroy(),this.transmuxer=null)}const Vt=this.observer;Vt&&Vt.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(Vt,Hr,Wr,Yr,Zr,en,tn,rn,nn,on){var an,$n;nn.transmuxing.start=self.performance.now();const{transmuxer:ln}=this,Hn=en?en.start:Zr.start,jn=Zr.decryptdata,zn=this.frag,Wn=!(zn&&Zr.cc===zn.cc),ei=!(zn&&nn.level===zn.level),$i=zn?nn.sn-zn.sn:-1,Mi=this.part?nn.part-this.part.index:-1,Ni=$i===0&&nn.id>1&&nn.id===(zn==null?void 0:zn.stats.chunkCount),Ts=!ei&&($i===1||$i===0&&(Mi===1||Ni&&Mi<=0)),ps=self.performance.now();(ei||$i||Zr.stats.parsing.start===0)&&(Zr.stats.parsing.start=ps),en&&(Mi||!Ts)&&(en.stats.parsing.start=ps);const $s=!(zn&&((an=Zr.initSegment)==null?void 0:an.url)===(($n=zn.initSegment)==null?void 0:$n.url)),Ws=new Lo(Wn,Ts,rn,ei,Hn,$s);if(!Ts||Wn||$s){v$2.log(`[transmuxer-interface, ${Zr.type}]: Starting new transmux session for sn: ${nn.sn} p: ${nn.part} level: ${nn.level} id: ${nn.id}
        discontinuity: ${Wn}
        trackSwitch: ${ei}
        contiguous: ${Ts}
        accurateTimeOffset: ${rn}
        timeOffset: ${Hn}
        initSegmentChange: ${$s}`);const Hs=new Ao(Wr,Yr,Hr,tn,on);this.configureTransmuxer(Hs)}if(this.frag=Zr,this.part=en,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:Vt,decryptdata:jn,chunkMeta:nn,state:Ws},Vt instanceof ArrayBuffer?[Vt]:[]);else if(ln){const Hs=ln.push(Vt,jn,nn,Ws);yt(Hs)?(ln.async=!0,Hs.then(js=>{this.handleTransmuxComplete(js)}).catch(js=>{this.transmuxerError(js,nn,"transmuxer-interface push error")})):(ln.async=!1,this.handleTransmuxComplete(Hs))}}flush(Vt){Vt.transmuxing.start=self.performance.now();const{transmuxer:Hr}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:Vt});else if(Hr){let Wr=Hr.flush(Vt);yt(Wr)||Hr.async?(yt(Wr)||(Wr=Promise.resolve(Wr)),Wr.then(Yr=>{this.handleFlushResult(Yr,Vt)}).catch(Yr=>{this.transmuxerError(Yr,Vt,"transmuxer-interface flush error")})):this.handleFlushResult(Wr,Vt)}}transmuxerError(Vt,Hr,Wr){this.hls&&(this.error=Vt,this.hls.trigger(m$2.ERROR,{type:B$5.MEDIA_ERROR,details:L$2.FRAG_PARSING_ERROR,chunkMeta:Hr,fatal:!1,error:Vt,err:Vt,reason:Wr}))}handleFlushResult(Vt,Hr){Vt.forEach(Wr=>{this.handleTransmuxComplete(Wr)}),this.onFlush(Hr)}onWorkerMessage(Vt){const Hr=Vt.data,Wr=this.hls;switch(Hr.event){case"init":{var Yr;const Zr=(Yr=this.workerContext)==null?void 0:Yr.objectURL;Zr&&self.URL.revokeObjectURL(Zr);break}case"transmuxComplete":{this.handleTransmuxComplete(Hr.data);break}case"flush":{this.onFlush(Hr.data);break}case"workerLog":v$2[Hr.data.logType]&&v$2[Hr.data.logType](Hr.data.message);break;default:{Hr.data=Hr.data||{},Hr.data.frag=this.frag,Hr.data.id=this.id,Wr.trigger(Hr.event,Hr.data);break}}}configureTransmuxer(Vt){const{transmuxer:Hr}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:Vt}):Hr&&Hr.configure(Vt)}handleTransmuxComplete(Vt){Vt.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(Vt)}}function br(Kt,Vt){if(Kt.length!==Vt.length)return!1;for(let Hr=0;Hr<Kt.length;Hr++)if(!ze(Kt[Hr].attrs,Vt[Hr].attrs))return!1;return!0}function ze(Kt,Vt,Hr){const Wr=Kt["STABLE-RENDITION-ID"];return Wr&&!Hr?Wr===Vt["STABLE-RENDITION-ID"]:!(Hr||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(Yr=>Kt[Yr]!==Vt[Yr])}function us(Kt,Vt){return Vt.label.toLowerCase()===Kt.name.toLowerCase()&&(!Vt.language||Vt.language.toLowerCase()===(Kt.lang||"").toLowerCase())}const Ei=100;class Io extends Rs{constructor(Vt,Hr,Wr){super(Vt,Hr,Wr,"[audio-stream-controller]",N$4.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:Vt}=this;Vt.on(m$2.MEDIA_ATTACHED,this.onMediaAttached,this),Vt.on(m$2.MEDIA_DETACHING,this.onMediaDetaching,this),Vt.on(m$2.MANIFEST_LOADING,this.onManifestLoading,this),Vt.on(m$2.LEVEL_LOADED,this.onLevelLoaded,this),Vt.on(m$2.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),Vt.on(m$2.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),Vt.on(m$2.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),Vt.on(m$2.ERROR,this.onError,this),Vt.on(m$2.BUFFER_RESET,this.onBufferReset,this),Vt.on(m$2.BUFFER_CREATED,this.onBufferCreated,this),Vt.on(m$2.BUFFER_FLUSHING,this.onBufferFlushing,this),Vt.on(m$2.BUFFER_FLUSHED,this.onBufferFlushed,this),Vt.on(m$2.INIT_PTS_FOUND,this.onInitPtsFound,this),Vt.on(m$2.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:Vt}=this;Vt.off(m$2.MEDIA_ATTACHED,this.onMediaAttached,this),Vt.off(m$2.MEDIA_DETACHING,this.onMediaDetaching,this),Vt.off(m$2.MANIFEST_LOADING,this.onManifestLoading,this),Vt.off(m$2.LEVEL_LOADED,this.onLevelLoaded,this),Vt.off(m$2.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),Vt.off(m$2.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),Vt.off(m$2.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),Vt.off(m$2.ERROR,this.onError,this),Vt.off(m$2.BUFFER_RESET,this.onBufferReset,this),Vt.off(m$2.BUFFER_CREATED,this.onBufferCreated,this),Vt.off(m$2.BUFFER_FLUSHING,this.onBufferFlushing,this),Vt.off(m$2.BUFFER_FLUSHED,this.onBufferFlushed,this),Vt.off(m$2.INIT_PTS_FOUND,this.onInitPtsFound,this),Vt.off(m$2.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(Vt,{frag:Hr,id:Wr,initPTS:Yr,timescale:Zr}){if(Wr==="main"){const en=Hr.cc;this.initPTS[Hr.cc]={baseTime:Yr,timescale:Zr},this.log(`InitPTS for cc: ${en} found from main: ${Yr}`),this.videoTrackCC=en,this.state===C$2.WAITING_INIT_PTS&&this.tick()}}startLoad(Vt){if(!this.levels){this.startPosition=Vt,this.state=C$2.STOPPED;return}const Hr=this.lastCurrentTime;this.stopLoad(),this.setInterval(Ei),Hr>0&&Vt===-1?(this.log(`Override startPosition with lastCurrentTime @${Hr.toFixed(3)}`),Vt=Hr,this.state=C$2.IDLE):(this.loadedmetadata=!1,this.state=C$2.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=Vt,this.tick()}doTick(){switch(this.state){case C$2.IDLE:this.doTickIdle();break;case C$2.WAITING_TRACK:{var Vt;const{levels:Wr,trackId:Yr}=this,Zr=Wr==null||(Vt=Wr[Yr])==null?void 0:Vt.details;if(Zr){if(this.waitForCdnTuneIn(Zr))break;this.state=C$2.WAITING_INIT_PTS}break}case C$2.FRAG_LOADING_WAITING_RETRY:{var Hr;const Wr=performance.now(),Yr=this.retryDate;if(!Yr||Wr>=Yr||(Hr=this.media)!=null&&Hr.seeking){const{levels:Zr,trackId:en}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((Zr==null?void 0:Zr[en])||null),this.state=C$2.IDLE}break}case C$2.WAITING_INIT_PTS:{const Wr=this.waitingData;if(Wr){const{frag:Yr,part:Zr,cache:en,complete:tn}=Wr;if(this.initPTS[Yr.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=C$2.FRAG_LOADING;const rn=en.flush(),nn={frag:Yr,part:Zr,payload:rn,networkDetails:null};this._handleFragmentLoadProgress(nn),tn&&super._handleFragmentLoadComplete(nn)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${Yr.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const rn=this.getLoadPosition(),nn=J$4.bufferInfo(this.mediaBuffer,rn,this.config.maxBufferHole);cs(nn.end,this.config.maxFragLookUpTolerance,Yr)<0&&(this.log(`Waiting fragment cc (${Yr.cc}) @ ${Yr.start} cancelled because another fragment at ${nn.end} is needed`),this.clearWaitingFragment())}}else this.state=C$2.IDLE}}this.onTickEnd()}clearWaitingFragment(){const Vt=this.waitingData;Vt&&(this.fragmentTracker.removeFragment(Vt.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=C$2.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:Vt}=this;Vt!=null&&Vt.readyState&&(this.lastCurrentTime=Vt.currentTime)}doTickIdle(){const{hls:Vt,levels:Hr,media:Wr,trackId:Yr}=this,Zr=Vt.config;if(!Wr&&(this.startFragRequested||!Zr.startFragPrefetch)||!(Hr!=null&&Hr[Yr]))return;const en=Hr[Yr],tn=en.details;if(!tn||tn.live&&this.levelLastLoaded!==en||this.waitForCdnTuneIn(tn)){this.state=C$2.WAITING_TRACK;return}const rn=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&rn&&(this.bufferFlushed=!1,this.afterBufferFlushed(rn,X$5.AUDIO,N$4.AUDIO));const nn=this.getFwdBufferInfo(rn,N$4.AUDIO);if(nn===null)return;const{bufferedTrack:on,switchingTrack:an}=this;if(!an&&this._streamEnded(nn,tn)){Vt.trigger(m$2.BUFFER_EOS,{type:"audio"}),this.state=C$2.ENDED;return}const $n=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,N$4.MAIN),ln=nn.len,Hn=this.getMaxBufferLength($n==null?void 0:$n.len),jn=tn.fragments,zn=jn[0].start;let Wn=this.flushing?this.getLoadPosition():nn.end;if(an&&Wr){const Ni=this.getLoadPosition();on&&!ze(an.attrs,on.attrs)&&(Wn=Ni),tn.PTSKnown&&Ni<zn&&(nn.end>zn||nn.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),Wr.currentTime=zn+.05)}if(ln>=Hn&&!an&&Wn<jn[jn.length-1].start)return;let ei=this.getNextFragment(Wn,tn),$i=!1;if(ei&&this.isLoopLoading(ei,Wn)&&($i=!!ei.gap,ei=this.getNextFragmentLoopLoading(ei,tn,nn,N$4.MAIN,Hn)),!ei){this.bufferFlushed=!0;return}const Mi=$n&&ei.start>$n.end+tn.targetduration;if(Mi||!($n!=null&&$n.len)&&nn.len){const Ni=this.getAppendedFrag(ei.start,N$4.MAIN);if(Ni===null||($i||($i=!!Ni.gap||!!Mi&&$n.len===0),Mi&&!$i||$i&&nn.nextStart&&nn.nextStart<Ni.end))return}this.loadFragment(ei,en,Wn)}getMaxBufferLength(Vt){const Hr=super.getMaxBufferLength();return Vt?Math.min(Math.max(Hr,Vt),this.config.maxMaxBufferLength):Hr}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(Vt,{audioTracks:Hr}){this.resetTransmuxer(),this.levels=Hr.map(Wr=>new je$1(Wr))}onAudioTrackSwitching(Vt,Hr){const Wr=!!Hr.url;this.trackId=Hr.id;const{fragCurrent:Yr}=this;Yr&&(Yr.abortRequests(),this.removeUnbufferedFrags(Yr.start)),this.resetLoadingState(),Wr?this.setInterval(Ei):this.resetTransmuxer(),Wr?(this.switchingTrack=Hr,this.state=C$2.IDLE,this.flushAudioIfNeeded(Hr)):(this.switchingTrack=null,this.bufferedTrack=Hr,this.state=C$2.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(Vt,Hr){this.mainDetails=Hr.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(m$2.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(Vt,Hr){var Wr;if(this.mainDetails==null){this.cachedTrackLoadedData=Hr;return}const{levels:Yr}=this,{details:Zr,id:en}=Hr;if(!Yr){this.warn(`Audio tracks were reset while loading level ${en}`);return}this.log(`Audio track ${en} loaded [${Zr.startSN},${Zr.endSN}]${Zr.lastPartSn?`[part-${Zr.lastPartSn}-${Zr.lastPartIndex}]`:""},duration:${Zr.totalduration}`);const tn=Yr[en];let rn=0;if(Zr.live||(Wr=tn.details)!=null&&Wr.live){this.checkLiveUpdate(Zr);const on=this.mainDetails;if(Zr.deltaUpdateFailed||!on)return;if(!tn.details&&Zr.hasProgramDateTime&&on.hasProgramDateTime)wt$1(Zr,on),rn=Zr.fragments[0].start;else{var nn;rn=this.alignPlaylists(Zr,tn.details,(nn=this.levelLastLoaded)==null?void 0:nn.details)}}tn.details=Zr,this.levelLastLoaded=tn,!this.startFragRequested&&(this.mainDetails||!Zr.live)&&this.setStartPosition(tn.details,rn),this.state===C$2.WAITING_TRACK&&!this.waitForCdnTuneIn(Zr)&&(this.state=C$2.IDLE),this.tick()}_handleFragmentLoadProgress(Vt){var Hr;const{frag:Wr,part:Yr,payload:Zr}=Vt,{config:en,trackId:tn,levels:rn}=this;if(!rn){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${Wr.sn} of level ${Wr.level} will not be buffered`);return}const nn=rn[tn];if(!nn){this.warn("Audio track is undefined on fragment load progress");return}const on=nn.details;if(!on){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(Wr.start);return}const an=en.defaultAudioCodec||nn.audioCodec||"mp4a.40.2";let $n=this.transmuxer;$n||($n=this.transmuxer=new Ir(this.hls,N$4.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const ln=this.initPTS[Wr.cc],Hn=(Hr=Wr.initSegment)==null?void 0:Hr.data;if(ln!==void 0){const jn=Yr?Yr.index:-1,zn=jn!==-1,Wn=new As(Wr.level,Wr.sn,Wr.stats.chunkCount,Zr.byteLength,jn,zn);$n.push(Zr,Hn,an,"",Wr,Yr,on.totalduration,!1,Wn,ln)}else{this.log(`Unknown video PTS for cc ${Wr.cc}, waiting for video PTS before demuxing audio frag ${Wr.sn} of [${on.startSN} ,${on.endSN}],track ${tn}`);const{cache:jn}=this.waitingData=this.waitingData||{frag:Wr,part:Yr,cache:new hr,complete:!1};jn.push(new Uint8Array(Zr)),this.waitingVideoCC=this.videoTrackCC,this.state=C$2.WAITING_INIT_PTS}}_handleFragmentLoadComplete(Vt){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(Vt)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(Vt,Hr){const Wr=Hr.tracks.audio;Wr&&(this.mediaBuffer=Wr.buffer||null),Hr.tracks.video&&(this.videoBuffer=Hr.tracks.video.buffer||null)}onFragBuffered(Vt,Hr){const{frag:Wr,part:Yr}=Hr;if(Wr.type!==N$4.AUDIO){if(!this.loadedmetadata&&Wr.type===N$4.MAIN){const Zr=this.videoBuffer||this.media;Zr&&J$4.getBuffered(Zr).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(Wr)){this.warn(`Fragment ${Wr.sn}${Yr?" p: "+Yr.index:""} of level ${Wr.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(Wr.sn!=="initSegment"){this.fragPrevious=Wr;const Zr=this.switchingTrack;Zr&&(this.bufferedTrack=Zr,this.switchingTrack=null,this.hls.trigger(m$2.AUDIO_TRACK_SWITCHED,oe$2({},Zr)))}this.fragBufferedComplete(Wr,Yr)}onError(Vt,Hr){var Wr;if(Hr.fatal){this.state=C$2.ERROR;return}switch(Hr.details){case L$2.FRAG_GAP:case L$2.FRAG_PARSING_ERROR:case L$2.FRAG_DECRYPT_ERROR:case L$2.FRAG_LOAD_ERROR:case L$2.FRAG_LOAD_TIMEOUT:case L$2.KEY_LOAD_ERROR:case L$2.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(N$4.AUDIO,Hr);break;case L$2.AUDIO_TRACK_LOAD_ERROR:case L$2.AUDIO_TRACK_LOAD_TIMEOUT:case L$2.LEVEL_PARSING_ERROR:!Hr.levelRetry&&this.state===C$2.WAITING_TRACK&&((Wr=Hr.context)==null?void 0:Wr.type)===Y$6.AUDIO_TRACK&&(this.state=C$2.IDLE);break;case L$2.BUFFER_APPEND_ERROR:case L$2.BUFFER_FULL_ERROR:if(!Hr.parent||Hr.parent!=="audio")return;if(Hr.details===L$2.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(Hr)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case L$2.INTERNAL_EXCEPTION:this.recoverWorkerError(Hr);break}}onBufferFlushing(Vt,{type:Hr}){Hr!==X$5.VIDEO&&(this.flushing=!0)}onBufferFlushed(Vt,{type:Hr}){if(Hr!==X$5.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===C$2.ENDED&&(this.state=C$2.IDLE);const Wr=this.mediaBuffer||this.media;Wr&&(this.afterBufferFlushed(Wr,Hr,N$4.AUDIO),this.tick())}}_handleTransmuxComplete(Vt){var Hr;const Wr="audio",{hls:Yr}=this,{remuxResult:Zr,chunkMeta:en}=Vt,tn=this.getCurrentContext(en);if(!tn){this.resetWhenMissingContext(en);return}const{frag:rn,part:nn,level:on}=tn,{details:an}=on,{audio:$n,text:ln,id3:Hn,initSegment:jn}=Zr;if(this.fragContextChanged(rn)||!an){this.fragmentTracker.removeFragment(rn);return}if(this.state=C$2.PARSING,this.switchingTrack&&$n&&this.completeAudioSwitch(this.switchingTrack),jn!=null&&jn.tracks){const zn=rn.initSegment||rn;this._bufferInitSegment(on,jn.tracks,zn,en),Yr.trigger(m$2.FRAG_PARSING_INIT_SEGMENT,{frag:zn,id:Wr,tracks:jn.tracks})}if($n){const{startPTS:zn,endPTS:Wn,startDTS:ei,endDTS:$i}=$n;nn&&(nn.elementaryStreams[X$5.AUDIO]={startPTS:zn,endPTS:Wn,startDTS:ei,endDTS:$i}),rn.setElementaryStreamInfo(X$5.AUDIO,zn,Wn,ei,$i),this.bufferFragmentData($n,rn,nn,en)}if(Hn!=null&&(Hr=Hn.samples)!=null&&Hr.length){const zn=se$2({id:Wr,frag:rn,details:an},Hn);Yr.trigger(m$2.FRAG_PARSING_METADATA,zn)}if(ln){const zn=se$2({id:Wr,frag:rn,details:an},ln);Yr.trigger(m$2.FRAG_PARSING_USERDATA,zn)}}_bufferInitSegment(Vt,Hr,Wr,Yr){if(this.state!==C$2.PARSING)return;Hr.video&&delete Hr.video;const Zr=Hr.audio;if(!Zr)return;Zr.id="audio";const en=Vt.audioCodec;this.log(`Init audio buffer, container:${Zr.container}, codecs[level/parsed]=[${en}/${Zr.codec}]`),en&&en.split(",").length===1&&(Zr.levelCodec=en),this.hls.trigger(m$2.BUFFER_CODECS,Hr);const tn=Zr.initSegment;if(tn!=null&&tn.byteLength){const rn={type:"audio",frag:Wr,part:null,chunkMeta:Yr,parent:Wr.type,data:tn};this.hls.trigger(m$2.BUFFER_APPENDING,rn)}this.tickImmediate()}loadFragment(Vt,Hr,Wr){const Yr=this.fragmentTracker.getState(Vt);if(this.fragCurrent=Vt,this.switchingTrack||Yr===ae$2.NOT_LOADED||Yr===ae$2.PARTIAL){var Zr;if(Vt.sn==="initSegment")this._loadInitSegment(Vt,Hr);else if((Zr=Hr.details)!=null&&Zr.live&&!this.initPTS[Vt.cc]){this.log(`Waiting for video PTS in continuity counter ${Vt.cc} of live stream before loading audio fragment ${Vt.sn} of level ${this.trackId}`),this.state=C$2.WAITING_INIT_PTS;const en=this.mainDetails;en&&en.fragments[0].start!==Hr.details.fragments[0].start&&wt$1(Hr.details,en)}else this.startFragRequested=!0,super.loadFragment(Vt,Hr,Wr)}else this.clearTrackerIfNeeded(Vt)}flushAudioIfNeeded(Vt){const{media:Hr,bufferedTrack:Wr}=this,Yr=Wr==null?void 0:Wr.attrs,Zr=Vt.attrs;Hr&&Yr&&(Yr.CHANNELS!==Zr.CHANNELS||Wr.name!==Vt.name||Wr.lang!==Vt.lang)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}completeAudioSwitch(Vt){const{hls:Hr}=this;this.flushAudioIfNeeded(Vt),this.bufferedTrack=Vt,this.switchingTrack=null,Hr.trigger(m$2.AUDIO_TRACK_SWITCHED,oe$2({},Vt))}}class bo extends vs{constructor(Vt){super(Vt,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:Vt}=this;Vt.on(m$2.MANIFEST_LOADING,this.onManifestLoading,this),Vt.on(m$2.MANIFEST_PARSED,this.onManifestParsed,this),Vt.on(m$2.LEVEL_LOADING,this.onLevelLoading,this),Vt.on(m$2.LEVEL_SWITCHING,this.onLevelSwitching,this),Vt.on(m$2.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),Vt.on(m$2.ERROR,this.onError,this)}unregisterListeners(){const{hls:Vt}=this;Vt.off(m$2.MANIFEST_LOADING,this.onManifestLoading,this),Vt.off(m$2.MANIFEST_PARSED,this.onManifestParsed,this),Vt.off(m$2.LEVEL_LOADING,this.onLevelLoading,this),Vt.off(m$2.LEVEL_SWITCHING,this.onLevelSwitching,this),Vt.off(m$2.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),Vt.off(m$2.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(Vt,Hr){this.tracks=Hr.audioTracks||[]}onAudioTrackLoaded(Vt,Hr){const{id:Wr,groupId:Yr,details:Zr}=Hr,en=this.tracksInGroup[Wr];if(!en||en.groupId!==Yr){this.warn(`Audio track with id:${Wr} and group:${Yr} not found in active group ${en==null?void 0:en.groupId}`);return}const tn=en.details;en.details=Hr.details,this.log(`Audio track ${Wr} "${en.name}" lang:${en.lang} group:${Yr} loaded [${Zr.startSN}-${Zr.endSN}]`),Wr===this.trackId&&this.playlistLoaded(Wr,Hr,tn)}onLevelLoading(Vt,Hr){this.switchLevel(Hr.level)}onLevelSwitching(Vt,Hr){this.switchLevel(Hr.level)}switchLevel(Vt){const Hr=this.hls.levels[Vt];if(!Hr)return;const Wr=Hr.audioGroups||null,Yr=this.groupIds;let Zr=this.currentTrack;if(!Wr||(Yr==null?void 0:Yr.length)!==(Wr==null?void 0:Wr.length)||Wr!=null&&Wr.some(tn=>(Yr==null?void 0:Yr.indexOf(tn))===-1)){this.groupIds=Wr,this.trackId=-1,this.currentTrack=null;const tn=this.tracks.filter($n=>!Wr||Wr.indexOf($n.groupId)!==-1);if(tn.length)this.selectDefaultTrack&&!tn.some($n=>$n.default)&&(this.selectDefaultTrack=!1),tn.forEach(($n,ln)=>{$n.id=ln});else if(!Zr&&!this.tracksInGroup.length)return;this.tracksInGroup=tn;const rn=this.hls.config.audioPreference;if(!Zr&&rn){const $n=Le$1(rn,tn,Ue);if($n>-1)Zr=tn[$n];else{const ln=Le$1(rn,this.tracks);Zr=this.tracks[ln]}}let nn=this.findTrackId(Zr);nn===-1&&Zr&&(nn=this.findTrackId(null));const on={audioTracks:tn};this.log(`Updating audio tracks, ${tn.length} track(s) found in group(s): ${Wr==null?void 0:Wr.join(",")}`),this.hls.trigger(m$2.AUDIO_TRACKS_UPDATED,on);const an=this.trackId;if(nn!==-1&&an===-1)this.setAudioTrack(nn);else if(tn.length&&an===-1){var en;const $n=new Error(`No audio track selected for current audio group-ID(s): ${(en=this.groupIds)==null?void 0:en.join(",")} track count: ${tn.length}`);this.warn($n.message),this.hls.trigger(m$2.ERROR,{type:B$5.MEDIA_ERROR,details:L$2.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:$n})}}else this.shouldReloadPlaylist(Zr)&&this.setAudioTrack(this.trackId)}onError(Vt,Hr){Hr.fatal||!Hr.context||Hr.context.type===Y$6.AUDIO_TRACK&&Hr.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(Hr.context.groupId)!==-1)&&(this.requestScheduled=-1,this.checkRetry(Hr))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(Vt){this.selectDefaultTrack=!1,this.setAudioTrack(Vt)}setAudioOption(Vt){const Hr=this.hls;if(Hr.config.audioPreference=Vt,Vt){const Wr=this.allAudioTracks;if(this.selectDefaultTrack=!1,Wr.length){const Yr=this.currentTrack;if(Yr&&We(Vt,Yr,Ue))return Yr;const Zr=Le$1(Vt,this.tracksInGroup,Ue);if(Zr>-1){const en=this.tracksInGroup[Zr];return this.setAudioTrack(Zr),en}else if(Yr){let en=Hr.loadLevel;en===-1&&(en=Hr.firstAutoLevel);const tn=Ia(Vt,Hr.levels,Wr,en,Ue);if(tn===-1)return null;Hr.nextLoadLevel=tn}if(Vt.channels||Vt.audioCodec){const en=Le$1(Vt,Wr);if(en>-1)return Wr[en]}}}return null}setAudioTrack(Vt){const Hr=this.tracksInGroup;if(Vt<0||Vt>=Hr.length){this.warn(`Invalid audio track id: ${Vt}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const Wr=this.currentTrack,Yr=Hr[Vt],Zr=Yr.details&&!Yr.details.live;if(Vt===this.trackId&&Yr===Wr&&Zr||(this.log(`Switching to audio-track ${Vt} "${Yr.name}" lang:${Yr.lang} group:${Yr.groupId} channels:${Yr.channels}`),this.trackId=Vt,this.currentTrack=Yr,this.hls.trigger(m$2.AUDIO_TRACK_SWITCHING,oe$2({},Yr)),Zr))return;const en=this.switchParams(Yr.url,Wr==null?void 0:Wr.details);this.loadPlaylist(en)}findTrackId(Vt){const Hr=this.tracksInGroup;for(let Wr=0;Wr<Hr.length;Wr++){const Yr=Hr[Wr];if(!(this.selectDefaultTrack&&!Yr.default)&&(!Vt||We(Vt,Yr,Ue)))return Wr}if(Vt){const{name:Wr,lang:Yr,assocLang:Zr,characteristics:en,audioCodec:tn,channels:rn}=Vt;for(let nn=0;nn<Hr.length;nn++){const on=Hr[nn];if(We({name:Wr,lang:Yr,assocLang:Zr,characteristics:en,audioCodec:tn,channels:rn},on,Ue))return nn}for(let nn=0;nn<Hr.length;nn++){const on=Hr[nn];if(ze(Vt.attrs,on.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return nn}for(let nn=0;nn<Hr.length;nn++){const on=Hr[nn];if(ze(Vt.attrs,on.attrs,["LANGUAGE"]))return nn}}return-1}loadPlaylist(Vt){const Hr=this.currentTrack;if(this.shouldLoadPlaylist(Hr)&&Hr){super.loadPlaylist();const Wr=Hr.id,Yr=Hr.groupId;let Zr=Hr.url;if(Vt)try{Zr=Vt.addDirectives(Zr)}catch(en){this.warn(`Could not construct new URL with HLS Delivery Directives: ${en}`)}this.log(`loading audio-track playlist ${Wr} "${Hr.name}" lang:${Hr.lang} group:${Yr}`),this.clearTimer(),this.hls.trigger(m$2.AUDIO_TRACK_LOADING,{url:Zr,id:Wr,groupId:Yr,deliveryDirectives:Vt||null})}}}const yi=500;class Do extends Rs{constructor(Vt,Hr,Wr){super(Vt,Hr,Wr,"[subtitle-stream-controller]",N$4.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:Vt}=this;Vt.on(m$2.MEDIA_ATTACHED,this.onMediaAttached,this),Vt.on(m$2.MEDIA_DETACHING,this.onMediaDetaching,this),Vt.on(m$2.MANIFEST_LOADING,this.onManifestLoading,this),Vt.on(m$2.LEVEL_LOADED,this.onLevelLoaded,this),Vt.on(m$2.ERROR,this.onError,this),Vt.on(m$2.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),Vt.on(m$2.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),Vt.on(m$2.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),Vt.on(m$2.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),Vt.on(m$2.BUFFER_FLUSHING,this.onBufferFlushing,this),Vt.on(m$2.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:Vt}=this;Vt.off(m$2.MEDIA_ATTACHED,this.onMediaAttached,this),Vt.off(m$2.MEDIA_DETACHING,this.onMediaDetaching,this),Vt.off(m$2.MANIFEST_LOADING,this.onManifestLoading,this),Vt.off(m$2.LEVEL_LOADED,this.onLevelLoaded,this),Vt.off(m$2.ERROR,this.onError,this),Vt.off(m$2.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),Vt.off(m$2.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),Vt.off(m$2.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),Vt.off(m$2.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),Vt.off(m$2.BUFFER_FLUSHING,this.onBufferFlushing,this),Vt.off(m$2.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(Vt){this.stopLoad(),this.state=C$2.IDLE,this.setInterval(yi),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=Vt,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(Vt,Hr){this.mainDetails=Hr.details}onSubtitleFragProcessed(Vt,Hr){const{frag:Wr,success:Yr}=Hr;if(this.fragPrevious=Wr,this.state=C$2.IDLE,!Yr)return;const Zr=this.tracksBuffered[this.currentTrackId];if(!Zr)return;let en;const tn=Wr.start;for(let nn=0;nn<Zr.length;nn++)if(tn>=Zr[nn].start&&tn<=Zr[nn].end){en=Zr[nn];break}const rn=Wr.start+Wr.duration;en?en.end=rn:(en={start:tn,end:rn},Zr.push(en)),this.fragmentTracker.fragBuffered(Wr),this.fragBufferedComplete(Wr,null)}onBufferFlushing(Vt,Hr){const{startOffset:Wr,endOffset:Yr}=Hr;if(Wr===0&&Yr!==Number.POSITIVE_INFINITY){const Zr=Yr-1;if(Zr<=0)return;Hr.endOffsetSubtitles=Math.max(0,Zr),this.tracksBuffered.forEach(en=>{for(let tn=0;tn<en.length;){if(en[tn].end<=Zr){en.shift();continue}else if(en[tn].start<Zr)en[tn].start=Zr;else break;tn++}}),this.fragmentTracker.removeFragmentsInRange(Wr,Zr,N$4.SUBTITLE)}}onFragBuffered(Vt,Hr){if(!this.loadedmetadata&&Hr.frag.type===N$4.MAIN){var Wr;(Wr=this.media)!=null&&Wr.buffered.length&&(this.loadedmetadata=!0)}}onError(Vt,Hr){const Wr=Hr.frag;(Wr==null?void 0:Wr.type)===N$4.SUBTITLE&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==C$2.STOPPED&&(this.state=C$2.IDLE))}onSubtitleTracksUpdated(Vt,{subtitleTracks:Hr}){if(!this.levels||br(this.levels,Hr)){this.levels=Hr.map(Wr=>new je$1(Wr));return}this.tracksBuffered=[],this.levels=Hr.map(Wr=>{const Yr=new je$1(Wr);return this.tracksBuffered[Yr.id]=[],Yr}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,N$4.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(Vt,Hr){var Wr;if(this.currentTrackId=Hr.id,!((Wr=this.levels)!=null&&Wr.length)||this.currentTrackId===-1){this.clearInterval();return}const Yr=this.levels[this.currentTrackId];Yr!=null&&Yr.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,Yr&&this.setInterval(yi)}onSubtitleTrackLoaded(Vt,Hr){var Wr;const{currentTrackId:Yr,levels:Zr}=this,{details:en,id:tn}=Hr;if(!Zr){this.warn(`Subtitle tracks were reset while loading level ${tn}`);return}const rn=Zr[Yr];if(tn>=Zr.length||tn!==Yr||!rn)return;this.log(`Subtitle track ${tn} loaded [${en.startSN},${en.endSN}]${en.lastPartSn?`[part-${en.lastPartSn}-${en.lastPartIndex}]`:""},duration:${en.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let nn=0;if(en.live||(Wr=rn.details)!=null&&Wr.live){const an=this.mainDetails;if(en.deltaUpdateFailed||!an)return;const $n=an.fragments[0];if(!rn.details)en.hasProgramDateTime&&an.hasProgramDateTime?(wt$1(en,an),nn=en.fragments[0].start):$n&&(nn=$n.start,ls(en,nn));else{var on;nn=this.alignPlaylists(en,rn.details,(on=this.levelLastLoaded)==null?void 0:on.details),nn===0&&$n&&(nn=$n.start,ls(en,nn))}}rn.details=en,this.levelLastLoaded=rn,!this.startFragRequested&&(this.mainDetails||!en.live)&&this.setStartPosition(rn.details,nn),this.tick(),en.live&&!this.fragCurrent&&this.media&&this.state===C$2.IDLE&&(Ct$1(null,en.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),rn.details=void 0))}_handleFragmentLoadComplete(Vt){const{frag:Hr,payload:Wr}=Vt,Yr=Hr.decryptdata,Zr=this.hls;if(!this.fragContextChanged(Hr)&&Wr&&Wr.byteLength>0&&Yr!=null&&Yr.key&&Yr.iv&&Yr.method==="AES-128"){const en=performance.now();this.decrypter.decrypt(new Uint8Array(Wr),Yr.key.buffer,Yr.iv.buffer).catch(tn=>{throw Zr.trigger(m$2.ERROR,{type:B$5.MEDIA_ERROR,details:L$2.FRAG_DECRYPT_ERROR,fatal:!1,error:tn,reason:tn.message,frag:Hr}),tn}).then(tn=>{const rn=performance.now();Zr.trigger(m$2.FRAG_DECRYPTED,{frag:Hr,payload:tn,stats:{tstart:en,tdecrypt:rn}})}).catch(tn=>{this.warn(`${tn.name}: ${tn.message}`),this.state=C$2.IDLE})}}doTick(){if(!this.media){this.state=C$2.IDLE;return}if(this.state===C$2.IDLE){const{currentTrackId:Vt,levels:Hr}=this,Wr=Hr==null?void 0:Hr[Vt];if(!Wr||!Hr.length||!Wr.details)return;const{config:Yr}=this,Zr=this.getLoadPosition(),en=J$4.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],Zr,Yr.maxBufferHole),{end:tn,len:rn}=en,nn=this.getFwdBufferInfo(this.media,N$4.MAIN),on=Wr.details,an=this.getMaxBufferLength(nn==null?void 0:nn.len)+on.levelTargetDuration;if(rn>an)return;const $n=on.fragments,ln=$n.length,Hn=on.edge;let jn=null;const zn=this.fragPrevious;if(tn<Hn){const Wn=Yr.maxFragLookUpTolerance,ei=tn>Hn-Wn?0:Wn;jn=Ct$1(zn,$n,Math.max($n[0].start,tn),ei),!jn&&zn&&zn.start<$n[0].start&&(jn=$n[0])}else jn=$n[ln-1];if(!jn)return;if(jn=this.mapToInitFragWhenRequired(jn),jn.sn!=="initSegment"){const Wn=jn.sn-on.startSN,ei=$n[Wn-1];ei&&ei.cc===jn.cc&&this.fragmentTracker.getState(ei)===ae$2.NOT_LOADED&&(jn=ei)}this.fragmentTracker.getState(jn)===ae$2.NOT_LOADED&&this.loadFragment(jn,Wr,tn)}}getMaxBufferLength(Vt){const Hr=super.getMaxBufferLength();return Vt?Math.max(Hr,Vt):Hr}loadFragment(Vt,Hr,Wr){this.fragCurrent=Vt,Vt.sn==="initSegment"?this._loadInitSegment(Vt,Hr):(this.startFragRequested=!0,super.loadFragment(Vt,Hr,Wr))}get mediaBufferTimeRanges(){return new Co(this.tracksBuffered[this.currentTrackId]||[])}}class Co{constructor(Vt){this.buffered=void 0;const Hr=(Wr,Yr,Zr)=>{if(Yr=Yr>>>0,Yr>Zr-1)throw new DOMException(`Failed to execute '${Wr}' on 'TimeRanges': The index provided (${Yr}) is greater than the maximum bound (${Zr})`);return Vt[Yr][Wr]};this.buffered={get length(){return Vt.length},end(Wr){return Hr("end",Wr,Vt.length)},start(Wr){return Hr("start",Wr,Vt.length)}}}}class wo extends vs{constructor(Vt){super(Vt,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let Hr=null;const Wr=mt$1(this.media.textTracks);for(let Zr=0;Zr<Wr.length;Zr++)if(Wr[Zr].mode==="hidden")Hr=Wr[Zr];else if(Wr[Zr].mode==="showing"){Hr=Wr[Zr];break}const Yr=this.findTrackForTextTrack(Hr);this.subtitleTrack!==Yr&&this.setSubtitleTrack(Yr)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(Vt){this._subtitleDisplay=Vt,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:Vt}=this;Vt.on(m$2.MEDIA_ATTACHED,this.onMediaAttached,this),Vt.on(m$2.MEDIA_DETACHING,this.onMediaDetaching,this),Vt.on(m$2.MANIFEST_LOADING,this.onManifestLoading,this),Vt.on(m$2.MANIFEST_PARSED,this.onManifestParsed,this),Vt.on(m$2.LEVEL_LOADING,this.onLevelLoading,this),Vt.on(m$2.LEVEL_SWITCHING,this.onLevelSwitching,this),Vt.on(m$2.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),Vt.on(m$2.ERROR,this.onError,this)}unregisterListeners(){const{hls:Vt}=this;Vt.off(m$2.MEDIA_ATTACHED,this.onMediaAttached,this),Vt.off(m$2.MEDIA_DETACHING,this.onMediaDetaching,this),Vt.off(m$2.MANIFEST_LOADING,this.onManifestLoading,this),Vt.off(m$2.MANIFEST_PARSED,this.onManifestParsed,this),Vt.off(m$2.LEVEL_LOADING,this.onLevelLoading,this),Vt.off(m$2.LEVEL_SWITCHING,this.onLevelSwitching,this),Vt.off(m$2.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),Vt.off(m$2.ERROR,this.onError,this)}onMediaAttached(Vt,Hr){this.media=Hr.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(Vt){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,Vt)}onMediaDetaching(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),mt$1(this.media.textTracks).forEach(Vt=>{Ve$2(Vt)}),this.subtitleTrack=-1,this.media=null)}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(Vt,Hr){this.tracks=Hr.subtitleTracks}onSubtitleTrackLoaded(Vt,Hr){const{id:Wr,groupId:Yr,details:Zr}=Hr,en=this.tracksInGroup[Wr];if(!en||en.groupId!==Yr){this.warn(`Subtitle track with id:${Wr} and group:${Yr} not found in active group ${en==null?void 0:en.groupId}`);return}const tn=en.details;en.details=Hr.details,this.log(`Subtitle track ${Wr} "${en.name}" lang:${en.lang} group:${Yr} loaded [${Zr.startSN}-${Zr.endSN}]`),Wr===this.trackId&&this.playlistLoaded(Wr,Hr,tn)}onLevelLoading(Vt,Hr){this.switchLevel(Hr.level)}onLevelSwitching(Vt,Hr){this.switchLevel(Hr.level)}switchLevel(Vt){const Hr=this.hls.levels[Vt];if(!Hr)return;const Wr=Hr.subtitleGroups||null,Yr=this.groupIds;let Zr=this.currentTrack;if(!Wr||(Yr==null?void 0:Yr.length)!==(Wr==null?void 0:Wr.length)||Wr!=null&&Wr.some(en=>(Yr==null?void 0:Yr.indexOf(en))===-1)){this.groupIds=Wr,this.trackId=-1,this.currentTrack=null;const en=this.tracks.filter(on=>!Wr||Wr.indexOf(on.groupId)!==-1);if(en.length)this.selectDefaultTrack&&!en.some(on=>on.default)&&(this.selectDefaultTrack=!1),en.forEach((on,an)=>{on.id=an});else if(!Zr&&!this.tracksInGroup.length)return;this.tracksInGroup=en;const tn=this.hls.config.subtitlePreference;if(!Zr&&tn){this.selectDefaultTrack=!1;const on=Le$1(tn,en);if(on>-1)Zr=en[on];else{const an=Le$1(tn,this.tracks);Zr=this.tracks[an]}}let rn=this.findTrackId(Zr);rn===-1&&Zr&&(rn=this.findTrackId(null));const nn={subtitleTracks:en};this.log(`Updating subtitle tracks, ${en.length} track(s) found in "${Wr==null?void 0:Wr.join(",")}" group-id`),this.hls.trigger(m$2.SUBTITLE_TRACKS_UPDATED,nn),rn!==-1&&this.trackId===-1&&this.setSubtitleTrack(rn)}else this.shouldReloadPlaylist(Zr)&&this.setSubtitleTrack(this.trackId)}findTrackId(Vt){const Hr=this.tracksInGroup,Wr=this.selectDefaultTrack;for(let Yr=0;Yr<Hr.length;Yr++){const Zr=Hr[Yr];if(!(Wr&&!Zr.default||!Wr&&!Vt)&&(!Vt||We(Zr,Vt)))return Yr}if(Vt){for(let Yr=0;Yr<Hr.length;Yr++){const Zr=Hr[Yr];if(ze(Vt.attrs,Zr.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return Yr}for(let Yr=0;Yr<Hr.length;Yr++){const Zr=Hr[Yr];if(ze(Vt.attrs,Zr.attrs,["LANGUAGE"]))return Yr}}return-1}findTrackForTextTrack(Vt){if(Vt){const Hr=this.tracksInGroup;for(let Wr=0;Wr<Hr.length;Wr++){const Yr=Hr[Wr];if(us(Yr,Vt))return Wr}}return-1}onError(Vt,Hr){Hr.fatal||!Hr.context||Hr.context.type===Y$6.SUBTITLE_TRACK&&Hr.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(Hr.context.groupId)!==-1)&&this.checkRetry(Hr)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(Vt){this.selectDefaultTrack=!1,this.setSubtitleTrack(Vt)}setSubtitleOption(Vt){if(this.hls.config.subtitlePreference=Vt,Vt){const Hr=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,Hr.length){const Wr=this.currentTrack;if(Wr&&We(Vt,Wr))return Wr;const Yr=Le$1(Vt,this.tracksInGroup);if(Yr>-1){const Zr=this.tracksInGroup[Yr];return this.setSubtitleTrack(Yr),Zr}else{if(Wr)return null;{const Zr=Le$1(Vt,Hr);if(Zr>-1)return Hr[Zr]}}}}return null}loadPlaylist(Vt){super.loadPlaylist();const Hr=this.currentTrack;if(this.shouldLoadPlaylist(Hr)&&Hr){const Wr=Hr.id,Yr=Hr.groupId;let Zr=Hr.url;if(Vt)try{Zr=Vt.addDirectives(Zr)}catch(en){this.warn(`Could not construct new URL with HLS Delivery Directives: ${en}`)}this.log(`Loading subtitle playlist for id ${Wr}`),this.hls.trigger(m$2.SUBTITLE_TRACK_LOADING,{url:Zr,id:Wr,groupId:Yr,deliveryDirectives:Vt||null})}}toggleTrackModes(){const{media:Vt}=this;if(!Vt)return;const Hr=mt$1(Vt.textTracks),Wr=this.currentTrack;let Yr;if(Wr&&(Yr=Hr.filter(Zr=>us(Wr,Zr))[0],Yr||this.warn(`Unable to find subtitle TextTrack with name "${Wr.name}" and language "${Wr.lang}"`)),[].slice.call(Hr).forEach(Zr=>{Zr.mode!=="disabled"&&Zr!==Yr&&(Zr.mode="disabled")}),Yr){const Zr=this.subtitleDisplay?"showing":"hidden";Yr.mode!==Zr&&(Yr.mode=Zr)}}setSubtitleTrack(Vt){const Hr=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=Vt;return}if(Vt<-1||Vt>=Hr.length||!O$6(Vt)){this.warn(`Invalid subtitle track id: ${Vt}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const Wr=this.currentTrack,Yr=Hr[Vt]||null;if(this.trackId=Vt,this.currentTrack=Yr,this.toggleTrackModes(),!Yr){this.hls.trigger(m$2.SUBTITLE_TRACK_SWITCH,{id:Vt});return}const Zr=!!Yr.details&&!Yr.details.live;if(Vt===this.trackId&&Yr===Wr&&Zr)return;this.log(`Switching to subtitle-track ${Vt}`+(Yr?` "${Yr.name}" lang:${Yr.lang} group:${Yr.groupId}`:""));const{id:en,groupId:tn="",name:rn,type:nn,url:on}=Yr;this.hls.trigger(m$2.SUBTITLE_TRACK_SWITCH,{id:en,groupId:tn,name:rn,type:nn,url:on});const an=this.switchParams(Yr.url,Wr==null?void 0:Wr.details);this.loadPlaylist(an)}}class ko{constructor(Vt){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=Vt}append(Vt,Hr,Wr){const Yr=this.queues[Hr];Yr.push(Vt),Yr.length===1&&!Wr&&this.executeNext(Hr)}insertAbort(Vt,Hr){this.queues[Hr].unshift(Vt),this.executeNext(Hr)}appendBlocker(Vt){let Hr;const Wr=new Promise(Zr=>{Hr=Zr}),Yr={execute:Hr,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(Yr,Vt),Wr}executeNext(Vt){const Hr=this.queues[Vt];if(Hr.length){const Wr=Hr[0];try{Wr.execute()}catch(Yr){v$2.warn(`[buffer-operation-queue]: Exception executing "${Vt}" SourceBuffer operation: ${Yr}`),Wr.onError(Yr);const Zr=this.buffers[Vt];Zr!=null&&Zr.updating||this.shiftAndExecuteNext(Vt)}}}shiftAndExecuteNext(Vt){this.queues[Vt].shift(),this.executeNext(Vt)}current(Vt){return this.queues[Vt][0]}}const xi=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;class _o{constructor(Vt){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=Wr=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=Wr=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:Wr,mediaSource:Yr}=this;this.log("Media source opened"),Wr&&(Wr.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(m$2.MEDIA_ATTACHED,{media:Wr,mediaSource:Yr})),Yr&&Yr.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:Wr,_objectUrl:Yr}=this;Wr!==Yr&&v$2.error(`Media element src was set while attaching MediaSource (${Yr} > ${Wr})`)},this.hls=Vt;const Hr="[buffer-controller]";this.appendSource=Vt.config.preferManagedMediaSource,this.log=v$2.log.bind(v$2,Hr),this.warn=v$2.warn.bind(v$2,Hr),this.error=v$2.error.bind(v$2,Hr),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:Vt}=this;Vt.on(m$2.MEDIA_ATTACHING,this.onMediaAttaching,this),Vt.on(m$2.MEDIA_DETACHING,this.onMediaDetaching,this),Vt.on(m$2.MANIFEST_LOADING,this.onManifestLoading,this),Vt.on(m$2.MANIFEST_PARSED,this.onManifestParsed,this),Vt.on(m$2.BUFFER_RESET,this.onBufferReset,this),Vt.on(m$2.BUFFER_APPENDING,this.onBufferAppending,this),Vt.on(m$2.BUFFER_CODECS,this.onBufferCodecs,this),Vt.on(m$2.BUFFER_EOS,this.onBufferEos,this),Vt.on(m$2.BUFFER_FLUSHING,this.onBufferFlushing,this),Vt.on(m$2.LEVEL_UPDATED,this.onLevelUpdated,this),Vt.on(m$2.FRAG_PARSED,this.onFragParsed,this),Vt.on(m$2.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:Vt}=this;Vt.off(m$2.MEDIA_ATTACHING,this.onMediaAttaching,this),Vt.off(m$2.MEDIA_DETACHING,this.onMediaDetaching,this),Vt.off(m$2.MANIFEST_LOADING,this.onManifestLoading,this),Vt.off(m$2.MANIFEST_PARSED,this.onManifestParsed,this),Vt.off(m$2.BUFFER_RESET,this.onBufferReset,this),Vt.off(m$2.BUFFER_APPENDING,this.onBufferAppending,this),Vt.off(m$2.BUFFER_CODECS,this.onBufferCodecs,this),Vt.off(m$2.BUFFER_EOS,this.onBufferEos,this),Vt.off(m$2.BUFFER_FLUSHING,this.onBufferFlushing,this),Vt.off(m$2.LEVEL_UPDATED,this.onLevelUpdated,this),Vt.off(m$2.FRAG_PARSED,this.onFragParsed,this),Vt.off(m$2.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new ko(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(Vt,Hr){let Wr=2;(Hr.audio&&!Hr.video||!Hr.altAudio)&&(Wr=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=Wr,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(Vt,Hr){const Wr=this.media=Hr.media,Yr=Qe(this.appendSource);if(Wr&&Yr){var Zr;const en=this.mediaSource=new Yr;this.log(`created media source: ${(Zr=en.constructor)==null?void 0:Zr.name}`),en.addEventListener("sourceopen",this._onMediaSourceOpen),en.addEventListener("sourceended",this._onMediaSourceEnded),en.addEventListener("sourceclose",this._onMediaSourceClose),en.addEventListener("startstreaming",this._onStartStreaming),en.addEventListener("endstreaming",this._onEndStreaming);const tn=this._objectUrl=self.URL.createObjectURL(en);if(this.appendSource)try{Wr.removeAttribute("src");const rn=self.ManagedMediaSource;Wr.disableRemotePlayback=Wr.disableRemotePlayback||rn&&en instanceof rn,Si(Wr),Po(Wr,tn),Wr.load()}catch{Wr.src=tn}else Wr.src=tn;Wr.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:Vt,mediaSource:Hr,_objectUrl:Wr}=this;if(Hr){if(this.log("media source detaching"),Hr.readyState==="open")try{Hr.endOfStream()}catch(Yr){this.warn(`onMediaDetaching: ${Yr.message} while calling endOfStream`)}this.onBufferReset(),Hr.removeEventListener("sourceopen",this._onMediaSourceOpen),Hr.removeEventListener("sourceended",this._onMediaSourceEnded),Hr.removeEventListener("sourceclose",this._onMediaSourceClose),Hr.removeEventListener("startstreaming",this._onStartStreaming),Hr.removeEventListener("endstreaming",this._onEndStreaming),Vt&&(Vt.removeEventListener("emptied",this._onMediaEmptied),Wr&&self.URL.revokeObjectURL(Wr),this.mediaSrc===Wr?(Vt.removeAttribute("src"),this.appendSource&&Si(Vt),Vt.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(m$2.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(Vt=>{this.resetBuffer(Vt)}),this._initSourceBuffer()}resetBuffer(Vt){const Hr=this.sourceBuffer[Vt];try{if(Hr){var Wr;this.removeBufferListeners(Vt),this.sourceBuffer[Vt]=void 0,(Wr=this.mediaSource)!=null&&Wr.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(Hr)}}catch(Yr){this.warn(`onBufferReset ${Vt}`,Yr)}}onBufferCodecs(Vt,Hr){const Wr=this.getSourceBufferTypes().length,Yr=Object.keys(Hr);if(Yr.forEach(en=>{if(Wr){const rn=this.tracks[en];if(rn&&typeof rn.buffer.changeType=="function"){var tn;const{id:nn,codec:on,levelCodec:an,container:$n,metadata:ln}=Hr[en],Hn=Vs(rn.codec,rn.levelCodec),jn=Hn==null?void 0:Hn.replace(xi,"$1");let zn=Vs(on,an);const Wn=(tn=zn)==null?void 0:tn.replace(xi,"$1");if(zn&&jn!==Wn){en.slice(0,5)==="audio"&&(zn=Rt(zn,this.hls.config.preferManagedMediaSource));const ei=`${$n};codecs=${zn}`;this.appendChangeType(en,ei),this.log(`switching codec ${Hn} to ${zn}`),this.tracks[en]={buffer:rn.buffer,codec:on,container:$n,levelCodec:an,metadata:ln,id:nn}}}}else this.pendingTracks[en]=Hr[en]}),Wr)return;const Zr=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==Zr&&(this.log(`${Zr} bufferCodec event(s) expected ${Yr.join(",")}`),this.bufferCodecEventsExpected=Zr),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks()}appendChangeType(Vt,Hr){const{operationQueue:Wr}=this,Yr={execute:()=>{const Zr=this.sourceBuffer[Vt];Zr&&(this.log(`changing ${Vt} sourceBuffer type to ${Hr}`),Zr.changeType(Hr)),Wr.shiftAndExecuteNext(Vt)},onStart:()=>{},onComplete:()=>{},onError:Zr=>{this.warn(`Failed to change ${Vt} SourceBuffer type`,Zr)}};Wr.append(Yr,Vt,!!this.pendingTracks[Vt])}onBufferAppending(Vt,Hr){const{hls:Wr,operationQueue:Yr,tracks:Zr}=this,{data:en,type:tn,frag:rn,part:nn,chunkMeta:on}=Hr,an=on.buffering[tn],$n=self.performance.now();an.start=$n;const ln=rn.stats.buffering,Hn=nn?nn.stats.buffering:null;ln.start===0&&(ln.start=$n),Hn&&Hn.start===0&&(Hn.start=$n);const jn=Zr.audio;let zn=!1;tn==="audio"&&(jn==null?void 0:jn.container)==="audio/mpeg"&&(zn=!this.lastMpegAudioChunk||on.id===1||this.lastMpegAudioChunk.sn!==on.sn,this.lastMpegAudioChunk=on);const Wn=rn.start,ei={execute:()=>{if(an.executeStart=self.performance.now(),zn){const $i=this.sourceBuffer[tn];if($i){const Mi=Wn-$i.timestampOffset;Math.abs(Mi)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${Wn} (delta: ${Mi}) sn: ${rn.sn})`),$i.timestampOffset=Wn)}}this.appendExecutor(en,tn)},onStart:()=>{},onComplete:()=>{const $i=self.performance.now();an.executeEnd=an.end=$i,ln.first===0&&(ln.first=$i),Hn&&Hn.first===0&&(Hn.first=$i);const{sourceBuffer:Mi}=this,Ni={};for(const Ts in Mi)Ni[Ts]=J$4.getBuffered(Mi[Ts]);this.appendErrors[tn]=0,tn==="audio"||tn==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(m$2.BUFFER_APPENDED,{type:tn,frag:rn,part:nn,chunkMeta:on,parent:rn.type,timeRanges:Ni})},onError:$i=>{const Mi={type:B$5.MEDIA_ERROR,parent:rn.type,details:L$2.BUFFER_APPEND_ERROR,sourceBufferName:tn,frag:rn,part:nn,chunkMeta:on,error:$i,err:$i,fatal:!1};if($i.code===DOMException.QUOTA_EXCEEDED_ERR)Mi.details=L$2.BUFFER_FULL_ERROR;else{const Ni=++this.appendErrors[tn];Mi.details=L$2.BUFFER_APPEND_ERROR,this.warn(`Failed ${Ni}/${Wr.config.appendErrorMaxRetry} times to append segment in "${tn}" sourceBuffer`),Ni>=Wr.config.appendErrorMaxRetry&&(Mi.fatal=!0)}Wr.trigger(m$2.ERROR,Mi)}};Yr.append(ei,tn,!!this.pendingTracks[tn])}onBufferFlushing(Vt,Hr){const{operationQueue:Wr}=this,Yr=Zr=>({execute:this.removeExecutor.bind(this,Zr,Hr.startOffset,Hr.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(m$2.BUFFER_FLUSHED,{type:Zr})},onError:en=>{this.warn(`Failed to remove from ${Zr} SourceBuffer`,en)}});Hr.type?Wr.append(Yr(Hr.type),Hr.type):this.getSourceBufferTypes().forEach(Zr=>{Wr.append(Yr(Zr),Zr)})}onFragParsed(Vt,Hr){const{frag:Wr,part:Yr}=Hr,Zr=[],en=Yr?Yr.elementaryStreams:Wr.elementaryStreams;en[X$5.AUDIOVIDEO]?Zr.push("audiovideo"):(en[X$5.AUDIO]&&Zr.push("audio"),en[X$5.VIDEO]&&Zr.push("video"));const tn=()=>{const rn=self.performance.now();Wr.stats.buffering.end=rn,Yr&&(Yr.stats.buffering.end=rn);const nn=Yr?Yr.stats:Wr.stats;this.hls.trigger(m$2.FRAG_BUFFERED,{frag:Wr,part:Yr,stats:nn,id:Wr.type})};Zr.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${Wr.type} level: ${Wr.level} sn: ${Wr.sn}`),this.blockBuffers(tn,Zr)}onFragChanged(Vt,Hr){this.trimBuffers()}onBufferEos(Vt,Hr){this.getSourceBufferTypes().reduce((Wr,Yr)=>{const Zr=this.sourceBuffer[Yr];return Zr&&(!Hr.type||Hr.type===Yr)&&(Zr.ending=!0,Zr.ended||(Zr.ended=!0,this.log(`${Yr} sourceBuffer now EOS`))),Wr&&!!(!Zr||Zr.ended)},!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(Yr=>{const Zr=this.sourceBuffer[Yr];Zr&&(Zr.ending=!1)});const{mediaSource:Wr}=this;if(!Wr||Wr.readyState!=="open"){Wr&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${Wr.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),Wr.endOfStream()}))}onLevelUpdated(Vt,{details:Hr}){Hr.fragments.length&&(this.details=Hr,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:Vt,details:Hr,media:Wr}=this;if(!Wr||Hr===null||!this.getSourceBufferTypes().length)return;const Yr=Vt.config,Zr=Wr.currentTime,en=Hr.levelTargetDuration,tn=Hr.live&&Yr.liveBackBufferLength!==null?Yr.liveBackBufferLength:Yr.backBufferLength;if(O$6(tn)&&tn>0){const rn=Math.max(tn,en),nn=Math.floor(Zr/en)*en-rn;this.flushBackBuffer(Zr,en,nn)}if(O$6(Yr.frontBufferFlushThreshold)&&Yr.frontBufferFlushThreshold>0){const rn=Math.max(Yr.maxBufferLength,Yr.frontBufferFlushThreshold),nn=Math.max(rn,en),on=Math.floor(Zr/en)*en+nn;this.flushFrontBuffer(Zr,en,on)}}flushBackBuffer(Vt,Hr,Wr){const{details:Yr,sourceBuffer:Zr}=this;this.getSourceBufferTypes().forEach(en=>{const tn=Zr[en];if(tn){const rn=J$4.getBuffered(tn);if(rn.length>0&&Wr>rn.start(0)){if(this.hls.trigger(m$2.BACK_BUFFER_REACHED,{bufferEnd:Wr}),Yr!=null&&Yr.live)this.hls.trigger(m$2.LIVE_BACK_BUFFER_REACHED,{bufferEnd:Wr});else if(tn.ended&&rn.end(rn.length-1)-Vt<Hr*2){this.log(`Cannot flush ${en} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(m$2.BUFFER_FLUSHING,{startOffset:0,endOffset:Wr,type:en})}}})}flushFrontBuffer(Vt,Hr,Wr){const{sourceBuffer:Yr}=this;this.getSourceBufferTypes().forEach(Zr=>{const en=Yr[Zr];if(en){const tn=J$4.getBuffered(en),rn=tn.length;if(rn<2)return;const nn=tn.start(rn-1),on=tn.end(rn-1);if(Wr>nn||Vt>=nn&&Vt<=on)return;if(en.ended&&Vt-on<2*Hr){this.log(`Cannot flush ${Zr} front buffer while SourceBuffer is in ended state`);return}this.hls.trigger(m$2.BUFFER_FLUSHING,{startOffset:nn,endOffset:1/0,type:Zr})}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:Vt,hls:Hr,media:Wr,mediaSource:Yr}=this,Zr=Vt.fragments[0].start+Vt.totalduration,en=Wr.duration,tn=O$6(Yr.duration)?Yr.duration:0;Vt.live&&Hr.config.liveDurationInfinity?(Yr.duration=1/0,this.updateSeekableRange(Vt)):(Zr>tn&&Zr>en||!O$6(en))&&(this.log(`Updating Media Source duration to ${Zr.toFixed(3)}`),Yr.duration=Zr)}updateSeekableRange(Vt){const Hr=this.mediaSource,Wr=Vt.fragments;if(Wr.length&&Vt.live&&Hr!=null&&Hr.setLiveSeekableRange){const Yr=Math.max(0,Wr[0].start),Zr=Math.max(Yr,Yr+Vt.totalduration);this.log(`Media Source duration is set to ${Hr.duration}. Setting seekable range to ${Yr}-${Zr}.`),Hr.setLiveSeekableRange(Yr,Zr)}}checkPendingTracks(){const{bufferCodecEventsExpected:Vt,operationQueue:Hr,pendingTracks:Wr}=this,Yr=Object.keys(Wr).length;if(Yr&&(!Vt||Yr===2||"audiovideo"in Wr)){this.createSourceBuffers(Wr),this.pendingTracks={};const Zr=this.getSourceBufferTypes();if(Zr.length)this.hls.trigger(m$2.BUFFER_CREATED,{tracks:this.tracks}),Zr.forEach(en=>{Hr.executeNext(en)});else{const en=new Error("could not create source buffer for media codec(s)");this.hls.trigger(m$2.ERROR,{type:B$5.MEDIA_ERROR,details:L$2.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:en,reason:en.message})}}}createSourceBuffers(Vt){const{sourceBuffer:Hr,mediaSource:Wr}=this;if(!Wr)throw Error("createSourceBuffers called when mediaSource was null");for(const Yr in Vt)if(!Hr[Yr]){const Zr=Vt[Yr];if(!Zr)throw Error(`source buffer exists for track ${Yr}, however track does not`);let en=Zr.levelCodec||Zr.codec;en&&Yr.slice(0,5)==="audio"&&(en=Rt(en,this.hls.config.preferManagedMediaSource));const tn=`${Zr.container};codecs=${en}`;this.log(`creating sourceBuffer(${tn})`);try{const rn=Hr[Yr]=Wr.addSourceBuffer(tn),nn=Yr;this.addBufferListener(nn,"updatestart",this._onSBUpdateStart),this.addBufferListener(nn,"updateend",this._onSBUpdateEnd),this.addBufferListener(nn,"error",this._onSBUpdateError),this.addBufferListener(nn,"bufferedchange",(on,an)=>{const $n=an.removedRanges;$n!=null&&$n.length&&this.hls.trigger(m$2.BUFFER_FLUSHED,{type:Yr})}),this.tracks[Yr]={buffer:rn,codec:en,container:Zr.container,levelCodec:Zr.levelCodec,metadata:Zr.metadata,id:Zr.id}}catch(rn){this.error(`error while trying to add sourceBuffer: ${rn.message}`),this.hls.trigger(m$2.ERROR,{type:B$5.MEDIA_ERROR,details:L$2.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:rn,sourceBufferName:Yr,mimeType:tn})}}}get mediaSrc(){var Vt;const Hr=((Vt=this.media)==null?void 0:Vt.firstChild)||this.media;return Hr==null?void 0:Hr.src}_onSBUpdateStart(Vt){const{operationQueue:Hr}=this;Hr.current(Vt).onStart()}_onSBUpdateEnd(Vt){var Hr;if(((Hr=this.mediaSource)==null?void 0:Hr.readyState)==="closed"){this.resetBuffer(Vt);return}const{operationQueue:Wr}=this;Wr.current(Vt).onComplete(),Wr.shiftAndExecuteNext(Vt)}_onSBUpdateError(Vt,Hr){var Wr;const Yr=new Error(`${Vt} SourceBuffer error. MediaSource readyState: ${(Wr=this.mediaSource)==null?void 0:Wr.readyState}`);this.error(`${Yr}`,Hr),this.hls.trigger(m$2.ERROR,{type:B$5.MEDIA_ERROR,details:L$2.BUFFER_APPENDING_ERROR,sourceBufferName:Vt,error:Yr,fatal:!1});const Zr=this.operationQueue.current(Vt);Zr&&Zr.onError(Yr)}removeExecutor(Vt,Hr,Wr){const{media:Yr,mediaSource:Zr,operationQueue:en,sourceBuffer:tn}=this,rn=tn[Vt];if(!Yr||!Zr||!rn){this.warn(`Attempting to remove from the ${Vt} SourceBuffer, but it does not exist`),en.shiftAndExecuteNext(Vt);return}const nn=O$6(Yr.duration)?Yr.duration:1/0,on=O$6(Zr.duration)?Zr.duration:1/0,an=Math.max(0,Hr),$n=Math.min(Wr,nn,on);$n>an&&(!rn.ending||rn.ended)?(rn.ended=!1,this.log(`Removing [${an},${$n}] from the ${Vt} SourceBuffer`),rn.remove(an,$n)):en.shiftAndExecuteNext(Vt)}appendExecutor(Vt,Hr){const Wr=this.sourceBuffer[Hr];if(!Wr){if(!this.pendingTracks[Hr])throw new Error(`Attempting to append to the ${Hr} SourceBuffer, but it does not exist`);return}Wr.ended=!1,Wr.appendBuffer(Vt)}blockBuffers(Vt,Hr=this.getSourceBufferTypes()){if(!Hr.length){this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(Vt);return}const{operationQueue:Wr}=this,Yr=Hr.map(Zr=>Wr.appendBlocker(Zr));Promise.all(Yr).then(()=>{Vt(),Hr.forEach(Zr=>{const en=this.sourceBuffer[Zr];en!=null&&en.updating||Wr.shiftAndExecuteNext(Zr)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(Vt,Hr,Wr){const Yr=this.sourceBuffer[Vt];if(!Yr)return;const Zr=Wr.bind(this,Vt);this.listeners[Vt].push({event:Hr,listener:Zr}),Yr.addEventListener(Hr,Zr)}removeBufferListeners(Vt){const Hr=this.sourceBuffer[Vt];Hr&&this.listeners[Vt].forEach(Wr=>{Hr.removeEventListener(Wr.event,Wr.listener)})}}function Si(Kt){const Vt=Kt.querySelectorAll("source");[].slice.call(Vt).forEach(Hr=>{Kt.removeChild(Hr)})}function Po(Kt,Vt){const Hr=self.document.createElement("source");Hr.type="video/mp4",Hr.src=Vt,Kt.appendChild(Hr)}const vi={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Dr=function(Kt){let Vt=Kt;return vi.hasOwnProperty(Kt)&&(Vt=vi[Kt]),String.fromCharCode(Vt)},Ee$1=15,De$1=100,Fo={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Oo={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Mo={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},No={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Uo=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Bo{constructor(){this.time=null,this.verboseLevel=0}log(Vt,Hr){if(this.verboseLevel>=Vt){const Wr=typeof Hr=="function"?Hr():Hr;v$2.log(`${this.time} [${Vt}] ${Wr}`)}}}const Pe$1=function(Kt){const Vt=[];for(let Hr=0;Hr<Kt.length;Hr++)Vt.push(Kt[Hr].toString(16));return Vt};let Cr$1=class{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(Vt){const Hr=["foreground","underline","italics","background","flash"];for(let Wr=0;Wr<Hr.length;Wr++){const Yr=Hr[Wr];Vt.hasOwnProperty(Yr)&&(this[Yr]=Vt[Yr])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(Vt){return this.foreground===Vt.foreground&&this.underline===Vt.underline&&this.italics===Vt.italics&&this.background===Vt.background&&this.flash===Vt.flash}copy(Vt){this.foreground=Vt.foreground,this.underline=Vt.underline,this.italics=Vt.italics,this.background=Vt.background,this.flash=Vt.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};class $o{constructor(){this.uchar=" ",this.penState=new Cr$1}reset(){this.uchar=" ",this.penState.reset()}setChar(Vt,Hr){this.uchar=Vt,this.penState.copy(Hr)}setPenState(Vt){this.penState.copy(Vt)}equals(Vt){return this.uchar===Vt.uchar&&this.penState.equals(Vt.penState)}copy(Vt){this.uchar=Vt.uchar,this.penState.copy(Vt.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class Go{constructor(Vt){this.chars=[],this.pos=0,this.currPenState=new Cr$1,this.cueStartTime=null,this.logger=void 0;for(let Hr=0;Hr<De$1;Hr++)this.chars.push(new $o);this.logger=Vt}equals(Vt){for(let Hr=0;Hr<De$1;Hr++)if(!this.chars[Hr].equals(Vt.chars[Hr]))return!1;return!0}copy(Vt){for(let Hr=0;Hr<De$1;Hr++)this.chars[Hr].copy(Vt.chars[Hr])}isEmpty(){let Vt=!0;for(let Hr=0;Hr<De$1;Hr++)if(!this.chars[Hr].isEmpty()){Vt=!1;break}return Vt}setCursor(Vt){this.pos!==Vt&&(this.pos=Vt),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>De$1&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=De$1)}moveCursor(Vt){const Hr=this.pos+Vt;if(Vt>1)for(let Wr=this.pos+1;Wr<Hr+1;Wr++)this.chars[Wr].setPenState(this.currPenState);this.setCursor(Hr)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(Vt){Vt>=144&&this.backSpace();const Hr=Dr(Vt);if(this.pos>=De$1){this.logger.log(0,()=>"Cannot insert "+Vt.toString(16)+" ("+Hr+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(Hr,this.currPenState),this.moveCursor(1)}clearFromPos(Vt){let Hr;for(Hr=Vt;Hr<De$1;Hr++)this.chars[Hr].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const Vt=[];let Hr=!0;for(let Wr=0;Wr<De$1;Wr++){const Yr=this.chars[Wr].uchar;Yr!==" "&&(Hr=!1),Vt.push(Yr)}return Hr?"":Vt.join("")}setPenStyles(Vt){this.currPenState.setStyles(Vt),this.chars[this.pos].setPenState(this.currPenState)}}class jt{constructor(Vt){this.rows=[],this.currRow=Ee$1-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let Hr=0;Hr<Ee$1;Hr++)this.rows.push(new Go(Vt));this.logger=Vt}reset(){for(let Vt=0;Vt<Ee$1;Vt++)this.rows[Vt].clear();this.currRow=Ee$1-1}equals(Vt){let Hr=!0;for(let Wr=0;Wr<Ee$1;Wr++)if(!this.rows[Wr].equals(Vt.rows[Wr])){Hr=!1;break}return Hr}copy(Vt){for(let Hr=0;Hr<Ee$1;Hr++)this.rows[Hr].copy(Vt.rows[Hr])}isEmpty(){let Vt=!0;for(let Hr=0;Hr<Ee$1;Hr++)if(!this.rows[Hr].isEmpty()){Vt=!1;break}return Vt}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(Vt){this.rows[this.currRow].insertChar(Vt)}setPen(Vt){this.rows[this.currRow].setPenStyles(Vt)}moveCursor(Vt){this.rows[this.currRow].moveCursor(Vt)}setCursor(Vt){this.logger.log(2,"setCursor: "+Vt),this.rows[this.currRow].setCursor(Vt)}setPAC(Vt){this.logger.log(2,()=>"pacData = "+JSON.stringify(Vt));let Hr=Vt.row-1;if(this.nrRollUpRows&&Hr<this.nrRollUpRows-1&&(Hr=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==Hr){for(let tn=0;tn<Ee$1;tn++)this.rows[tn].clear();const Zr=this.currRow+1-this.nrRollUpRows,en=this.lastOutputScreen;if(en){const tn=en.rows[Zr].cueStartTime,rn=this.logger.time;if(tn!==null&&rn!==null&&tn<rn)for(let nn=0;nn<this.nrRollUpRows;nn++)this.rows[Hr-this.nrRollUpRows+nn+1].copy(en.rows[Zr+nn])}}this.currRow=Hr;const Wr=this.rows[this.currRow];if(Vt.indent!==null){const Zr=Vt.indent,en=Math.max(Zr-1,0);Wr.setCursor(Vt.indent),Vt.color=Wr.chars[en].penState.foreground}const Yr={foreground:Vt.color,underline:Vt.underline,italics:Vt.italics,background:"black",flash:!1};this.setPen(Yr)}setBkgData(Vt){this.logger.log(2,()=>"bkgData = "+JSON.stringify(Vt)),this.backSpace(),this.setPen(Vt),this.insertChar(32)}setRollUpRows(Vt){this.nrRollUpRows=Vt}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const Vt=this.currRow+1-this.nrRollUpRows,Hr=this.rows.splice(Vt,1)[0];Hr.clear(),this.rows.splice(this.currRow,0,Hr),this.logger.log(2,"Rolling up")}getDisplayText(Vt){Vt=Vt||!1;const Hr=[];let Wr="",Yr=-1;for(let Zr=0;Zr<Ee$1;Zr++){const en=this.rows[Zr].getTextString();en&&(Yr=Zr+1,Vt?Hr.push("Row "+Yr+": '"+en+"'"):Hr.push(en.trim()))}return Hr.length>0&&(Vt?Wr="["+Hr.join(" | ")+"]":Wr=Hr.join(`
`)),Wr}getTextAndFormat(){return this.rows}}class Ai{constructor(Vt,Hr,Wr){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=Vt,this.outputFilter=Hr,this.mode=null,this.verbose=0,this.displayedMemory=new jt(Wr),this.nonDisplayedMemory=new jt(Wr),this.lastOutputScreen=new jt(Wr),this.currRollUpRow=this.displayedMemory.rows[Ee$1-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=Wr}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Ee$1-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(Vt){this.outputFilter=Vt}setPAC(Vt){this.writeScreen.setPAC(Vt)}setBkgData(Vt){this.writeScreen.setBkgData(Vt)}setMode(Vt){Vt!==this.mode&&(this.mode=Vt,this.logger.log(2,()=>"MODE="+Vt),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=Vt)}insertChars(Vt){for(let Wr=0;Wr<Vt.length;Wr++)this.writeScreen.insertChar(Vt[Wr]);const Hr=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>Hr+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(Vt){this.logger.log(2,"RU("+Vt+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(Vt)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const Vt=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=Vt,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(Vt){this.logger.log(2,"TO("+Vt+") - Tab Offset"),this.writeScreen.moveCursor(Vt)}ccMIDROW(Vt){const Hr={flash:!1};if(Hr.underline=Vt%2===1,Hr.italics=Vt>=46,Hr.italics)Hr.foreground="white";else{const Wr=Math.floor(Vt/2)-16,Yr=["white","green","blue","cyan","red","yellow","magenta"];Hr.foreground=Yr[Wr]}this.logger.log(2,"MIDROW: "+JSON.stringify(Hr)),this.writeScreen.setPen(Hr)}outputDataUpdate(Vt=!1){const Hr=this.logger.time;Hr!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=Hr:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,Hr,this.lastOutputScreen),Vt&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:Hr),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(Vt){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,Vt,this.displayedMemory),this.cueStartTime=Vt))}}class Li{constructor(Vt,Hr,Wr){this.channels=void 0,this.currentChannel=0,this.cmdHistory=Ii(),this.logger=void 0;const Yr=this.logger=new Bo;this.channels=[null,new Ai(Vt,Hr,Yr),new Ai(Vt+1,Wr,Yr)]}getHandler(Vt){return this.channels[Vt].getHandler()}setHandler(Vt,Hr){this.channels[Vt].setHandler(Hr)}addData(Vt,Hr){let Wr,Yr,Zr,en=!1;this.logger.time=Vt;for(let tn=0;tn<Hr.length;tn+=2)if(Yr=Hr[tn]&127,Zr=Hr[tn+1]&127,!(Yr===0&&Zr===0)){if(this.logger.log(3,"["+Pe$1([Hr[tn],Hr[tn+1]])+"] -> ("+Pe$1([Yr,Zr])+")"),Wr=this.parseCmd(Yr,Zr),Wr||(Wr=this.parseMidrow(Yr,Zr)),Wr||(Wr=this.parsePAC(Yr,Zr)),Wr||(Wr=this.parseBackgroundAttributes(Yr,Zr)),!Wr&&(en=this.parseChars(Yr,Zr),en)){const rn=this.currentChannel;rn&&rn>0?this.channels[rn].insertChars(en):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!Wr&&!en&&this.logger.log(2,"Couldn't parse cleaned data "+Pe$1([Yr,Zr])+" orig: "+Pe$1([Hr[tn],Hr[tn+1]]))}}parseCmd(Vt,Hr){const{cmdHistory:Wr}=this,Yr=(Vt===20||Vt===28||Vt===21||Vt===29)&&Hr>=32&&Hr<=47,Zr=(Vt===23||Vt===31)&&Hr>=33&&Hr<=35;if(!(Yr||Zr))return!1;if(Ri(Vt,Hr,Wr))return Ke(null,null,Wr),this.logger.log(3,"Repeated command ("+Pe$1([Vt,Hr])+") is dropped"),!0;const en=Vt===20||Vt===21||Vt===23?1:2,tn=this.channels[en];return Vt===20||Vt===21||Vt===28||Vt===29?Hr===32?tn.ccRCL():Hr===33?tn.ccBS():Hr===34?tn.ccAOF():Hr===35?tn.ccAON():Hr===36?tn.ccDER():Hr===37?tn.ccRU(2):Hr===38?tn.ccRU(3):Hr===39?tn.ccRU(4):Hr===40?tn.ccFON():Hr===41?tn.ccRDC():Hr===42?tn.ccTR():Hr===43?tn.ccRTD():Hr===44?tn.ccEDM():Hr===45?tn.ccCR():Hr===46?tn.ccENM():Hr===47&&tn.ccEOC():tn.ccTO(Hr-32),Ke(Vt,Hr,Wr),this.currentChannel=en,!0}parseMidrow(Vt,Hr){let Wr=0;if((Vt===17||Vt===25)&&Hr>=32&&Hr<=47){if(Vt===17?Wr=1:Wr=2,Wr!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const Yr=this.channels[Wr];return Yr?(Yr.ccMIDROW(Hr),this.logger.log(3,"MIDROW ("+Pe$1([Vt,Hr])+")"),!0):!1}return!1}parsePAC(Vt,Hr){let Wr;const Yr=this.cmdHistory,Zr=(Vt>=17&&Vt<=23||Vt>=25&&Vt<=31)&&Hr>=64&&Hr<=127,en=(Vt===16||Vt===24)&&Hr>=64&&Hr<=95;if(!(Zr||en))return!1;if(Ri(Vt,Hr,Yr))return Ke(null,null,Yr),!0;const tn=Vt<=23?1:2;Hr>=64&&Hr<=95?Wr=tn===1?Fo[Vt]:Mo[Vt]:Wr=tn===1?Oo[Vt]:No[Vt];const rn=this.channels[tn];return rn?(rn.setPAC(this.interpretPAC(Wr,Hr)),Ke(Vt,Hr,Yr),this.currentChannel=tn,!0):!1}interpretPAC(Vt,Hr){let Wr;const Yr={color:null,italics:!1,indent:null,underline:!1,row:Vt};return Hr>95?Wr=Hr-96:Wr=Hr-64,Yr.underline=(Wr&1)===1,Wr<=13?Yr.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(Wr/2)]:Wr<=15?(Yr.italics=!0,Yr.color="white"):Yr.indent=Math.floor((Wr-16)/2)*4,Yr}parseChars(Vt,Hr){let Wr,Yr=null,Zr=null;if(Vt>=25?(Wr=2,Zr=Vt-8):(Wr=1,Zr=Vt),Zr>=17&&Zr<=19){let en;Zr===17?en=Hr+80:Zr===18?en=Hr+112:en=Hr+144,this.logger.log(2,"Special char '"+Dr(en)+"' in channel "+Wr),Yr=[en]}else Vt>=32&&Vt<=127&&(Yr=Hr===0?[Vt]:[Vt,Hr]);if(Yr){const en=Pe$1(Yr);this.logger.log(3,"Char codes =  "+en.join(",")),Ke(Vt,Hr,this.cmdHistory)}return Yr}parseBackgroundAttributes(Vt,Hr){const Wr=(Vt===16||Vt===24)&&Hr>=32&&Hr<=47,Yr=(Vt===23||Vt===31)&&Hr>=45&&Hr<=47;if(!(Wr||Yr))return!1;let Zr;const en={};Vt===16||Vt===24?(Zr=Math.floor((Hr-32)/2),en.background=Uo[Zr],Hr%2===1&&(en.background=en.background+"_semi")):Hr===45?en.background="transparent":(en.foreground="black",Hr===47&&(en.underline=!0));const tn=Vt<=23?1:2;return this.channels[tn].setBkgData(en),Ke(Vt,Hr,this.cmdHistory),!0}reset(){for(let Vt=0;Vt<Object.keys(this.channels).length;Vt++){const Hr=this.channels[Vt];Hr&&Hr.reset()}this.cmdHistory=Ii()}cueSplitAtTime(Vt){for(let Hr=0;Hr<this.channels.length;Hr++){const Wr=this.channels[Hr];Wr&&Wr.cueSplitAtTime(Vt)}}}function Ke(Kt,Vt,Hr){Hr.a=Kt,Hr.b=Vt}function Ri(Kt,Vt,Hr){return Hr.a===Kt&&Hr.b===Vt}function Ii(){return{a:null,b:null}}let ut$1=class{constructor(Vt,Hr){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=Vt,this.trackName=Hr}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(Vt,Hr,Wr){(this.startTime===null||this.startTime>Vt)&&(this.startTime=Vt),this.endTime=Hr,this.screen=Wr,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}};var ks=function(){if(qe!=null&&qe.VTTCue)return self.VTTCue;const Kt=["","lr","rl"],Vt=["start","middle","end","left","right"];function Hr(tn,rn){if(typeof rn!="string"||!Array.isArray(tn))return!1;const nn=rn.toLowerCase();return~tn.indexOf(nn)?nn:!1}function Wr(tn){return Hr(Kt,tn)}function Yr(tn){return Hr(Vt,tn)}function Zr(tn,...rn){let nn=1;for(;nn<arguments.length;nn++){const on=arguments[nn];for(const an in on)tn[an]=on[an]}return tn}function en(tn,rn,nn){const on=this,an={enumerable:!0};on.hasBeenReset=!1;let $n="",ln=!1,Hn=tn,jn=rn,zn=nn,Wn=null,ei="",$i=!0,Mi="auto",Ni="start",Ts=50,ps="middle",$s=50,Ws="middle";Object.defineProperty(on,"id",Zr({},an,{get:function(){return $n},set:function(Hs){$n=""+Hs}})),Object.defineProperty(on,"pauseOnExit",Zr({},an,{get:function(){return ln},set:function(Hs){ln=!!Hs}})),Object.defineProperty(on,"startTime",Zr({},an,{get:function(){return Hn},set:function(Hs){if(typeof Hs!="number")throw new TypeError("Start time must be set to a number.");Hn=Hs,this.hasBeenReset=!0}})),Object.defineProperty(on,"endTime",Zr({},an,{get:function(){return jn},set:function(Hs){if(typeof Hs!="number")throw new TypeError("End time must be set to a number.");jn=Hs,this.hasBeenReset=!0}})),Object.defineProperty(on,"text",Zr({},an,{get:function(){return zn},set:function(Hs){zn=""+Hs,this.hasBeenReset=!0}})),Object.defineProperty(on,"region",Zr({},an,{get:function(){return Wn},set:function(Hs){Wn=Hs,this.hasBeenReset=!0}})),Object.defineProperty(on,"vertical",Zr({},an,{get:function(){return ei},set:function(Hs){const js=Wr(Hs);if(js===!1)throw new SyntaxError("An invalid or illegal string was specified.");ei=js,this.hasBeenReset=!0}})),Object.defineProperty(on,"snapToLines",Zr({},an,{get:function(){return $i},set:function(Hs){$i=!!Hs,this.hasBeenReset=!0}})),Object.defineProperty(on,"line",Zr({},an,{get:function(){return Mi},set:function(Hs){if(typeof Hs!="number"&&Hs!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");Mi=Hs,this.hasBeenReset=!0}})),Object.defineProperty(on,"lineAlign",Zr({},an,{get:function(){return Ni},set:function(Hs){const js=Yr(Hs);if(!js)throw new SyntaxError("An invalid or illegal string was specified.");Ni=js,this.hasBeenReset=!0}})),Object.defineProperty(on,"position",Zr({},an,{get:function(){return Ts},set:function(Hs){if(Hs<0||Hs>100)throw new Error("Position must be between 0 and 100.");Ts=Hs,this.hasBeenReset=!0}})),Object.defineProperty(on,"positionAlign",Zr({},an,{get:function(){return ps},set:function(Hs){const js=Yr(Hs);if(!js)throw new SyntaxError("An invalid or illegal string was specified.");ps=js,this.hasBeenReset=!0}})),Object.defineProperty(on,"size",Zr({},an,{get:function(){return $s},set:function(Hs){if(Hs<0||Hs>100)throw new Error("Size must be between 0 and 100.");$s=Hs,this.hasBeenReset=!0}})),Object.defineProperty(on,"align",Zr({},an,{get:function(){return Ws},set:function(Hs){const js=Yr(Hs);if(!js)throw new SyntaxError("An invalid or illegal string was specified.");Ws=js,this.hasBeenReset=!0}})),on.displayState=void 0}return en.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},en}();class Ko{decode(Vt,Hr){if(!Vt)return"";if(typeof Vt!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(Vt))}}function wr(Kt){function Vt(Wr,Yr,Zr,en){return(Wr|0)*3600+(Yr|0)*60+(Zr|0)+parseFloat(en||0)}const Hr=Kt.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return Hr?parseFloat(Hr[2])>59?Vt(Hr[2],Hr[3],0,Hr[4]):Vt(Hr[1],Hr[2],Hr[3],Hr[4]):null}class Vo{constructor(){this.values=Object.create(null)}set(Vt,Hr){!this.get(Vt)&&Hr!==""&&(this.values[Vt]=Hr)}get(Vt,Hr,Wr){return Wr?this.has(Vt)?this.values[Vt]:Hr[Wr]:this.has(Vt)?this.values[Vt]:Hr}has(Vt){return Vt in this.values}alt(Vt,Hr,Wr){for(let Yr=0;Yr<Wr.length;++Yr)if(Hr===Wr[Yr]){this.set(Vt,Hr);break}}integer(Vt,Hr){/^-?\d+$/.test(Hr)&&this.set(Vt,parseInt(Hr,10))}percent(Vt,Hr){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(Hr)){const Wr=parseFloat(Hr);if(Wr>=0&&Wr<=100)return this.set(Vt,Wr),!0}return!1}}function kr(Kt,Vt,Hr,Wr){const Yr=Wr?Kt.split(Wr):[Kt];for(const Zr in Yr){if(typeof Yr[Zr]!="string")continue;const en=Yr[Zr].split(Hr);if(en.length!==2)continue;const tn=en[0],rn=en[1];Vt(tn,rn)}}const ds=new ks(0,0,""),dt$1=ds.align==="middle"?"middle":"center";function Ho(Kt,Vt,Hr){const Wr=Kt;function Yr(){const tn=wr(Kt);if(tn===null)throw new Error("Malformed timestamp: "+Wr);return Kt=Kt.replace(/^[^\sa-zA-Z-]+/,""),tn}function Zr(tn,rn){const nn=new Vo;kr(tn,function($n,ln){let Hn;switch($n){case"region":for(let jn=Hr.length-1;jn>=0;jn--)if(Hr[jn].id===ln){nn.set($n,Hr[jn].region);break}break;case"vertical":nn.alt($n,ln,["rl","lr"]);break;case"line":Hn=ln.split(","),nn.integer($n,Hn[0]),nn.percent($n,Hn[0])&&nn.set("snapToLines",!1),nn.alt($n,Hn[0],["auto"]),Hn.length===2&&nn.alt("lineAlign",Hn[1],["start",dt$1,"end"]);break;case"position":Hn=ln.split(","),nn.percent($n,Hn[0]),Hn.length===2&&nn.alt("positionAlign",Hn[1],["start",dt$1,"end","line-left","line-right","auto"]);break;case"size":nn.percent($n,ln);break;case"align":nn.alt($n,ln,["start",dt$1,"end","left","right"]);break}},/:/,/\s/),rn.region=nn.get("region",null),rn.vertical=nn.get("vertical","");let on=nn.get("line","auto");on==="auto"&&ds.line===-1&&(on=-1),rn.line=on,rn.lineAlign=nn.get("lineAlign","start"),rn.snapToLines=nn.get("snapToLines",!0),rn.size=nn.get("size",100),rn.align=nn.get("align",dt$1);let an=nn.get("position","auto");an==="auto"&&ds.position===50&&(an=rn.align==="start"||rn.align==="left"?0:rn.align==="end"||rn.align==="right"?100:50),rn.position=an}function en(){Kt=Kt.replace(/^\s+/,"")}if(en(),Vt.startTime=Yr(),en(),Kt.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+Wr);Kt=Kt.slice(3),en(),Vt.endTime=Yr(),en(),Zr(Kt,Vt)}function _r(Kt){return Kt.replace(/<br(?: \/)?>/gi,`
`)}class Wo{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new Ko,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(Vt){const Hr=this;Vt&&(Hr.buffer+=Hr.decoder.decode(Vt,{stream:!0}));function Wr(){let Zr=Hr.buffer,en=0;for(Zr=_r(Zr);en<Zr.length&&Zr[en]!=="\r"&&Zr[en]!==`
`;)++en;const tn=Zr.slice(0,en);return Zr[en]==="\r"&&++en,Zr[en]===`
`&&++en,Hr.buffer=Zr.slice(en),tn}function Yr(Zr){kr(Zr,function(en,tn){},/:/)}try{let Zr="";if(Hr.state==="INITIAL"){if(!/\r\n|\n/.test(Hr.buffer))return this;Zr=Wr();const tn=Zr.match(/^()?WEBVTT([ \t].*)?$/);if(!(tn!=null&&tn[0]))throw new Error("Malformed WebVTT signature.");Hr.state="HEADER"}let en=!1;for(;Hr.buffer;){if(!/\r\n|\n/.test(Hr.buffer))return this;switch(en?en=!1:Zr=Wr(),Hr.state){case"HEADER":/:/.test(Zr)?Yr(Zr):Zr||(Hr.state="ID");continue;case"NOTE":Zr||(Hr.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(Zr)){Hr.state="NOTE";break}if(!Zr)continue;if(Hr.cue=new ks(0,0,""),Hr.state="CUE",Zr.indexOf("-->")===-1){Hr.cue.id=Zr;continue}case"CUE":if(!Hr.cue){Hr.state="BADCUE";continue}try{Ho(Zr,Hr.cue,Hr.regionList)}catch{Hr.cue=null,Hr.state="BADCUE";continue}Hr.state="CUETEXT";continue;case"CUETEXT":{const tn=Zr.indexOf("-->")!==-1;if(!Zr||tn&&(en=!0)){Hr.oncue&&Hr.cue&&Hr.oncue(Hr.cue),Hr.cue=null,Hr.state="ID";continue}if(Hr.cue===null)continue;Hr.cue.text&&(Hr.cue.text+=`
`),Hr.cue.text+=Zr}continue;case"BADCUE":Zr||(Hr.state="ID")}}}catch{Hr.state==="CUETEXT"&&Hr.cue&&Hr.oncue&&Hr.oncue(Hr.cue),Hr.cue=null,Hr.state=Hr.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const Vt=this;try{if((Vt.cue||Vt.state==="HEADER")&&(Vt.buffer+=`

`,Vt.parse()),Vt.state==="INITIAL"||Vt.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(Hr){Vt.onparsingerror&&Vt.onparsingerror(Hr)}return Vt.onflush&&Vt.onflush(),this}}const Yo=/\r\n|\n\r|\n|\r/g,zt=function(Kt,Vt,Hr=0){return Kt.slice(Hr,Hr+Vt.length)===Vt},qo=function(Kt){let Vt=parseInt(Kt.slice(-3));const Hr=parseInt(Kt.slice(-6,-4)),Wr=parseInt(Kt.slice(-9,-7)),Yr=Kt.length>9?parseInt(Kt.substring(0,Kt.indexOf(":"))):0;if(!O$6(Vt)||!O$6(Hr)||!O$6(Wr)||!O$6(Yr))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${Kt}`);return Vt+=1e3*Hr,Vt+=60*1e3*Wr,Vt+=60*60*1e3*Yr,Vt},Xt$1=function(Kt){let Vt=5381,Hr=Kt.length;for(;Hr;)Vt=Vt*33^Kt.charCodeAt(--Hr);return(Vt>>>0).toString()};function _s(Kt,Vt,Hr){return Xt$1(Kt.toString())+Xt$1(Vt.toString())+Xt$1(Hr)}const jo=function(Kt,Vt,Hr){let Wr=Kt[Vt],Yr=Kt[Wr.prevCC];if(!Yr||!Yr.new&&Wr.new){Kt.ccOffset=Kt.presentationOffset=Wr.start,Wr.new=!1;return}for(;(Zr=Yr)!=null&&Zr.new;){var Zr;Kt.ccOffset+=Wr.start-Yr.start,Wr.new=!1,Wr=Yr,Yr=Kt[Wr.prevCC]}Kt.presentationOffset=Hr};function zo(Kt,Vt,Hr,Wr,Yr,Zr,en){const tn=new Wo,rn=Re$1(new Uint8Array(Kt)).trim().replace(Yo,`
`).split(`
`),nn=[],on=Vt?mo(Vt.baseTime,Vt.timescale):0;let an="00:00.000",$n=0,ln=0,Hn,jn=!0;tn.oncue=function(zn){const Wn=Hr[Wr];let ei=Hr.ccOffset;const $i=($n-on)/9e4;if(Wn!=null&&Wn.new&&(ln!==void 0?ei=Hr.ccOffset=Wn.start:jo(Hr,Wr,$i)),$i){if(!Vt){Hn=new Error("Missing initPTS for VTT MPEGTS");return}ei=$i-Hr.presentationOffset}const Mi=zn.endTime-zn.startTime,Ni=me((zn.startTime+ei-ln)*9e4,Yr*9e4)/9e4;zn.startTime=Math.max(Ni,0),zn.endTime=Math.max(Ni+Mi,0);const Ts=zn.text.trim();zn.text=decodeURIComponent(encodeURIComponent(Ts)),zn.id||(zn.id=_s(zn.startTime,zn.endTime,Ts)),zn.endTime>0&&nn.push(zn)},tn.onparsingerror=function(zn){Hn=zn},tn.onflush=function(){if(Hn){en(Hn);return}Zr(nn)},rn.forEach(zn=>{if(jn)if(zt(zn,"X-TIMESTAMP-MAP=")){jn=!1,zn.slice(16).split(",").forEach(Wn=>{zt(Wn,"LOCAL:")?an=Wn.slice(6):zt(Wn,"MPEGTS:")&&($n=parseInt(Wn.slice(7)))});try{ln=qo(an)/1e3}catch(Wn){Hn=Wn}return}else zn===""&&(jn=!1);tn.parse(zn+`
`)}),tn.flush()}const Qt="stpp.ttml.im1t",Pr=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Fr=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Xo={left:"start",center:"center",right:"end",start:"start",end:"end"};function bi(Kt,Vt,Hr,Wr){const Yr=H$5(new Uint8Array(Kt),["mdat"]);if(Yr.length===0){Wr(new Error("Could not parse IMSC1 mdat"));return}const Zr=Yr.map(tn=>Re$1(tn)),en=go(Vt.baseTime,1,Vt.timescale);try{Zr.forEach(tn=>Hr(Qo(tn,en)))}catch(tn){Wr(tn)}}function Qo(Kt,Vt){const Hr=new DOMParser().parseFromString(Kt,"text/xml").getElementsByTagName("tt")[0];if(!Hr)throw new Error("Invalid ttml");const Wr={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},Yr=Object.keys(Wr).reduce((nn,on)=>(nn[on]=Hr.getAttribute(`ttp:${on}`)||Wr[on],nn),{}),Zr=Hr.getAttribute("xml:space")!=="preserve",en=Di(Jt(Hr,"styling","style")),tn=Di(Jt(Hr,"layout","region")),rn=Jt(Hr,"body","[begin]");return[].map.call(rn,nn=>{const on=Or(nn,Zr);if(!on||!nn.hasAttribute("begin"))return null;const an=es(nn.getAttribute("begin"),Yr),$n=es(nn.getAttribute("dur"),Yr);let ln=es(nn.getAttribute("end"),Yr);if(an===null)throw Ci(nn);if(ln===null){if($n===null)throw Ci(nn);ln=an+$n}const Hn=new ks(an-Vt,ln-Vt,on);Hn.id=_s(Hn.startTime,Hn.endTime,Hn.text);const jn=tn[nn.getAttribute("region")],zn=en[nn.getAttribute("style")],Wn=Jo(jn,zn,en),{textAlign:ei}=Wn;if(ei){const $i=Xo[ei];$i&&(Hn.lineAlign=$i),Hn.align=ei}return se$2(Hn,Wn),Hn}).filter(nn=>nn!==null)}function Jt(Kt,Vt,Hr){const Wr=Kt.getElementsByTagName(Vt)[0];return Wr?[].slice.call(Wr.querySelectorAll(Hr)):[]}function Di(Kt){return Kt.reduce((Vt,Hr)=>{const Wr=Hr.getAttribute("xml:id");return Wr&&(Vt[Wr]=Hr),Vt},{})}function Or(Kt,Vt){return[].slice.call(Kt.childNodes).reduce((Hr,Wr,Yr)=>{var Zr;return Wr.nodeName==="br"&&Yr?Hr+`
`:(Zr=Wr.childNodes)!=null&&Zr.length?Or(Wr,Vt):Vt?Hr+Wr.textContent.trim().replace(/\s+/g," "):Hr+Wr.textContent},"")}function Jo(Kt,Vt,Hr){const Wr="http://www.w3.org/ns/ttml#styling";let Yr=null;const Zr=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],en=Kt!=null&&Kt.hasAttribute("style")?Kt.getAttribute("style"):null;return en&&Hr.hasOwnProperty(en)&&(Yr=Hr[en]),Zr.reduce((tn,rn)=>{const nn=Zt(Vt,Wr,rn)||Zt(Kt,Wr,rn)||Zt(Yr,Wr,rn);return nn&&(tn[rn]=nn),tn},{})}function Zt(Kt,Vt,Hr){return Kt&&Kt.hasAttributeNS(Vt,Hr)?Kt.getAttributeNS(Vt,Hr):null}function Ci(Kt){return new Error(`Could not parse ttml timestamp ${Kt}`)}function es(Kt,Vt){if(!Kt)return null;let Hr=wr(Kt);return Hr===null&&(Pr.test(Kt)?Hr=Zo(Kt,Vt):Fr.test(Kt)&&(Hr=el(Kt,Vt))),Hr}function Zo(Kt,Vt){const Hr=Pr.exec(Kt),Wr=(Hr[4]|0)+(Hr[5]|0)/Vt.subFrameRate;return(Hr[1]|0)*3600+(Hr[2]|0)*60+(Hr[3]|0)+Wr/Vt.frameRate}function el(Kt,Vt){const Hr=Fr.exec(Kt),Wr=Number(Hr[1]);switch(Hr[2]){case"h":return Wr*3600;case"m":return Wr*60;case"ms":return Wr*1e3;case"f":return Wr/Vt.frameRate;case"t":return Wr/Vt.tickRate}return Wr}class tl{constructor(Vt){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=ki(),this.captionsProperties=void 0,this.hls=Vt,this.config=Vt.config,this.Cues=Vt.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},Vt.on(m$2.MEDIA_ATTACHING,this.onMediaAttaching,this),Vt.on(m$2.MEDIA_DETACHING,this.onMediaDetaching,this),Vt.on(m$2.MANIFEST_LOADING,this.onManifestLoading,this),Vt.on(m$2.MANIFEST_LOADED,this.onManifestLoaded,this),Vt.on(m$2.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),Vt.on(m$2.FRAG_LOADING,this.onFragLoading,this),Vt.on(m$2.FRAG_LOADED,this.onFragLoaded,this),Vt.on(m$2.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),Vt.on(m$2.FRAG_DECRYPTED,this.onFragDecrypted,this),Vt.on(m$2.INIT_PTS_FOUND,this.onInitPtsFound,this),Vt.on(m$2.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),Vt.on(m$2.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:Vt}=this;Vt.off(m$2.MEDIA_ATTACHING,this.onMediaAttaching,this),Vt.off(m$2.MEDIA_DETACHING,this.onMediaDetaching,this),Vt.off(m$2.MANIFEST_LOADING,this.onManifestLoading,this),Vt.off(m$2.MANIFEST_LOADED,this.onManifestLoaded,this),Vt.off(m$2.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),Vt.off(m$2.FRAG_LOADING,this.onFragLoading,this),Vt.off(m$2.FRAG_LOADED,this.onFragLoaded,this),Vt.off(m$2.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),Vt.off(m$2.FRAG_DECRYPTED,this.onFragDecrypted,this),Vt.off(m$2.INIT_PTS_FOUND,this.onInitPtsFound,this),Vt.off(m$2.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),Vt.off(m$2.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const Vt=new ut$1(this,"textTrack1"),Hr=new ut$1(this,"textTrack2"),Wr=new ut$1(this,"textTrack3"),Yr=new ut$1(this,"textTrack4");this.cea608Parser1=new Li(1,Vt,Hr),this.cea608Parser2=new Li(3,Wr,Yr)}}addCues(Vt,Hr,Wr,Yr,Zr){let en=!1;for(let tn=Zr.length;tn--;){const rn=Zr[tn],nn=sl(rn[0],rn[1],Hr,Wr);if(nn>=0&&(rn[0]=Math.min(rn[0],Hr),rn[1]=Math.max(rn[1],Wr),en=!0,nn/(Wr-Hr)>.5))return}if(en||Zr.push([Hr,Wr]),this.config.renderTextTracksNatively){const tn=this.captionsTracks[Vt];this.Cues.newCue(tn,Hr,Wr,Yr)}else{const tn=this.Cues.newCue(null,Hr,Wr,Yr);this.hls.trigger(m$2.CUES_PARSED,{type:"captions",cues:tn,track:Vt})}}onInitPtsFound(Vt,{frag:Hr,id:Wr,initPTS:Yr,timescale:Zr}){const{unparsedVttFrags:en}=this;Wr==="main"&&(this.initPTS[Hr.cc]={baseTime:Yr,timescale:Zr}),en.length&&(this.unparsedVttFrags=[],en.forEach(tn=>{this.onFragLoaded(m$2.FRAG_LOADED,tn)}))}getExistingTrack(Vt,Hr){const{media:Wr}=this;if(Wr)for(let Yr=0;Yr<Wr.textTracks.length;Yr++){const Zr=Wr.textTracks[Yr];if(wi(Zr,{name:Vt,lang:Hr,attrs:{}}))return Zr}return null}createCaptionsTrack(Vt){this.config.renderTextTracksNatively?this.createNativeTrack(Vt):this.createNonNativeTrack(Vt)}createNativeTrack(Vt){if(this.captionsTracks[Vt])return;const{captionsProperties:Hr,captionsTracks:Wr,media:Yr}=this,{label:Zr,languageCode:en}=Hr[Vt],tn=this.getExistingTrack(Zr,en);if(tn)Wr[Vt]=tn,Ve$2(Wr[Vt]),tr(Wr[Vt],Yr);else{const rn=this.createTextTrack("captions",Zr,en);rn&&(rn[Vt]=!0,Wr[Vt]=rn)}}createNonNativeTrack(Vt){if(this.nonNativeCaptionsTracks[Vt])return;const Hr=this.captionsProperties[Vt];if(!Hr)return;const Wr=Hr.label,Yr={_id:Vt,label:Wr,kind:"captions",default:Hr.media?!!Hr.media.default:!1,closedCaptions:Hr.media};this.nonNativeCaptionsTracks[Vt]=Yr,this.hls.trigger(m$2.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[Yr]})}createTextTrack(Vt,Hr,Wr){const Yr=this.media;if(Yr)return Yr.addTextTrack(Vt,Hr,Wr)}onMediaAttaching(Vt,Hr){this.media=Hr.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:Vt}=this;Object.keys(Vt).forEach(Hr=>{Ve$2(Vt[Hr]),delete Vt[Hr]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=ki(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:Vt}=this;if(!Vt)return;const Hr=Vt.textTracks;if(Hr)for(let Wr=0;Wr<Hr.length;Wr++)Ve$2(Hr[Wr])}onSubtitleTracksUpdated(Vt,Hr){const Wr=Hr.subtitleTracks||[],Yr=Wr.some(Zr=>Zr.textCodec===Qt);if(this.config.enableWebVTT||Yr&&this.config.enableIMSC1){if(br(this.tracks,Wr)){this.tracks=Wr;return}if(this.textTracks=[],this.tracks=Wr,this.config.renderTextTracksNatively){const Zr=this.media,en=Zr?mt$1(Zr.textTracks):null;if(this.tracks.forEach((tn,rn)=>{let nn;if(en){let on=null;for(let an=0;an<en.length;an++)if(en[an]&&wi(en[an],tn)){on=en[an],en[an]=null;break}on&&(nn=on)}if(nn)Ve$2(nn);else{const on=Mr(tn);nn=this.createTextTrack(on,tn.name,tn.lang),nn&&(nn.mode="disabled")}nn&&this.textTracks.push(nn)}),en!=null&&en.length){const tn=en.filter(rn=>rn!==null).map(rn=>rn.label);tn.length&&v$2.warn(`Media element contains unused subtitle tracks: ${tn.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const Zr=this.tracks.map(en=>({label:en.name,kind:en.type.toLowerCase(),default:en.default,subtitleTrack:en}));this.hls.trigger(m$2.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:Zr})}}}onManifestLoaded(Vt,Hr){this.config.enableCEA708Captions&&Hr.captions&&Hr.captions.forEach(Wr=>{const Yr=/(?:CC|SERVICE)([1-4])/.exec(Wr.instreamId);if(!Yr)return;const Zr=`textTrack${Yr[1]}`,en=this.captionsProperties[Zr];en&&(en.label=Wr.name,Wr.lang&&(en.languageCode=Wr.lang),en.media=Wr)})}closedCaptionsForLevel(Vt){const Hr=this.hls.levels[Vt.level];return Hr==null?void 0:Hr.attrs["CLOSED-CAPTIONS"]}onFragLoading(Vt,Hr){this.initCea608Parsers();const{cea608Parser1:Wr,cea608Parser2:Yr,lastCc:Zr,lastSn:en,lastPartIndex:tn}=this;if(!(!this.enabled||!Wr||!Yr)&&Hr.frag.type===N$4.MAIN){var rn,nn;const{cc:on,sn:an}=Hr.frag,$n=(rn=Hr==null||(nn=Hr.part)==null?void 0:nn.index)!=null?rn:-1;an===en+1||an===en&&$n===tn+1||on===Zr||(Wr.reset(),Yr.reset()),this.lastCc=on,this.lastSn=an,this.lastPartIndex=$n}}onFragLoaded(Vt,Hr){const{frag:Wr,payload:Yr}=Hr;if(Wr.type===N$4.SUBTITLE)if(Yr.byteLength){const Zr=Wr.decryptdata,en="stats"in Hr;if(Zr==null||!Zr.encrypted||en){const tn=this.tracks[Wr.level],rn=this.vttCCs;rn[Wr.cc]||(rn[Wr.cc]={start:Wr.start,prevCC:this.prevCC,new:!0},this.prevCC=Wr.cc),tn&&tn.textCodec===Qt?this._parseIMSC1(Wr,Yr):this._parseVTTs(Hr)}}else this.hls.trigger(m$2.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:Wr,error:new Error("Empty subtitle payload")})}_parseIMSC1(Vt,Hr){const Wr=this.hls;bi(Hr,this.initPTS[Vt.cc],Yr=>{this._appendCues(Yr,Vt.level),Wr.trigger(m$2.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:Vt})},Yr=>{v$2.log(`Failed to parse IMSC1: ${Yr}`),Wr.trigger(m$2.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:Vt,error:Yr})})}_parseVTTs(Vt){var Hr;const{frag:Wr,payload:Yr}=Vt,{initPTS:Zr,unparsedVttFrags:en}=this,tn=Zr.length-1;if(!Zr[Wr.cc]&&tn===-1){en.push(Vt);return}const rn=this.hls,nn=(Hr=Wr.initSegment)!=null&&Hr.data?pe$1(Wr.initSegment.data,new Uint8Array(Yr)):Yr;zo(nn,this.initPTS[Wr.cc],this.vttCCs,Wr.cc,Wr.start,on=>{this._appendCues(on,Wr.level),rn.trigger(m$2.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:Wr})},on=>{const an=on.message==="Missing initPTS for VTT MPEGTS";an?en.push(Vt):this._fallbackToIMSC1(Wr,Yr),v$2.log(`Failed to parse VTT cue: ${on}`),!(an&&tn>Wr.cc)&&rn.trigger(m$2.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:Wr,error:on})})}_fallbackToIMSC1(Vt,Hr){const Wr=this.tracks[Vt.level];Wr.textCodec||bi(Hr,this.initPTS[Vt.cc],()=>{Wr.textCodec=Qt,this._parseIMSC1(Vt,Hr)},()=>{Wr.textCodec="wvtt"})}_appendCues(Vt,Hr){const Wr=this.hls;if(this.config.renderTextTracksNatively){const Yr=this.textTracks[Hr];if(!Yr||Yr.mode==="disabled")return;Vt.forEach(Zr=>sr(Yr,Zr))}else{const Yr=this.tracks[Hr];if(!Yr)return;const Zr=Yr.default?"default":"subtitles"+Hr;Wr.trigger(m$2.CUES_PARSED,{type:"subtitles",cues:Vt,track:Zr})}}onFragDecrypted(Vt,Hr){const{frag:Wr}=Hr;Wr.type===N$4.SUBTITLE&&this.onFragLoaded(m$2.FRAG_LOADED,Hr)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(Vt,Hr){this.initCea608Parsers();const{cea608Parser1:Wr,cea608Parser2:Yr}=this;if(!this.enabled||!Wr||!Yr)return;const{frag:Zr,samples:en}=Hr;if(!(Zr.type===N$4.MAIN&&this.closedCaptionsForLevel(Zr)==="NONE"))for(let tn=0;tn<en.length;tn++){const rn=en[tn].bytes;if(rn){const nn=this.extractCea608Data(rn);Wr.addData(en[tn].pts,nn[0]),Yr.addData(en[tn].pts,nn[1])}}}onBufferFlushing(Vt,{startOffset:Hr,endOffset:Wr,endOffsetSubtitles:Yr,type:Zr}){const{media:en}=this;if(!(!en||en.currentTime<Wr)){if(!Zr||Zr==="video"){const{captionsTracks:tn}=this;Object.keys(tn).forEach(rn=>ns(tn[rn],Hr,Wr))}if(this.config.renderTextTracksNatively&&Hr===0&&Yr!==void 0){const{textTracks:tn}=this;Object.keys(tn).forEach(rn=>ns(tn[rn],Hr,Yr))}}}extractCea608Data(Vt){const Hr=[[],[]],Wr=Vt[0]&31;let Yr=2;for(let Zr=0;Zr<Wr;Zr++){const en=Vt[Yr++],tn=127&Vt[Yr++],rn=127&Vt[Yr++];if(!(tn===0&&rn===0)&&4&en){const nn=3&en;(nn===0||nn===1)&&(Hr[nn].push(tn),Hr[nn].push(rn))}}return Hr}}function Mr(Kt){return Kt.characteristics&&/transcribes-spoken-dialog/gi.test(Kt.characteristics)&&/describes-music-and-sound/gi.test(Kt.characteristics)?"captions":"subtitles"}function wi(Kt,Vt){return!!Kt&&Kt.kind===Mr(Vt)&&us(Vt,Kt)}function sl(Kt,Vt,Hr,Wr){return Math.min(Vt,Wr)-Math.max(Kt,Hr)}function ki(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class Ps{constructor(Vt){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=Vt,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(Vt){this.streamController=Vt}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:Vt}=this;Vt.on(m$2.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),Vt.on(m$2.MEDIA_ATTACHING,this.onMediaAttaching,this),Vt.on(m$2.MANIFEST_PARSED,this.onManifestParsed,this),Vt.on(m$2.LEVELS_UPDATED,this.onLevelsUpdated,this),Vt.on(m$2.BUFFER_CODECS,this.onBufferCodecs,this),Vt.on(m$2.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:Vt}=this;Vt.off(m$2.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),Vt.off(m$2.MEDIA_ATTACHING,this.onMediaAttaching,this),Vt.off(m$2.MANIFEST_PARSED,this.onManifestParsed,this),Vt.off(m$2.LEVELS_UPDATED,this.onLevelsUpdated,this),Vt.off(m$2.BUFFER_CODECS,this.onBufferCodecs,this),Vt.off(m$2.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(Vt,Hr){const Wr=this.hls.levels[Hr.droppedLevel];this.isLevelAllowed(Wr)&&this.restrictedLevels.push({bitrate:Wr.bitrate,height:Wr.height,width:Wr.width})}onMediaAttaching(Vt,Hr){this.media=Hr.media instanceof HTMLVideoElement?Hr.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(Vt,Hr){const Wr=this.hls;this.restrictedLevels=[],this.firstLevel=Hr.firstLevel,Wr.config.capLevelToPlayerSize&&Hr.video&&this.startCapping()}onLevelsUpdated(Vt,Hr){this.timer&&O$6(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(Vt,Hr){this.hls.config.capLevelToPlayerSize&&Hr.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const Vt=this.hls.levels;if(Vt.length){const Hr=this.hls,Wr=this.getMaxLevel(Vt.length-1);Wr!==this.autoLevelCapping&&v$2.log(`Setting autoLevelCapping to ${Wr}: ${Vt[Wr].height}p@${Vt[Wr].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),Hr.autoLevelCapping=Wr,Hr.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=Hr.autoLevelCapping}}}getMaxLevel(Vt){const Hr=this.hls.levels;if(!Hr.length)return-1;const Wr=Hr.filter((Yr,Zr)=>this.isLevelAllowed(Yr)&&Zr<=Vt);return this.clientRect=null,Ps.getMaxLevelByMediaSize(Wr,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const Vt=this.media,Hr={width:0,height:0};if(Vt){const Wr=Vt.getBoundingClientRect();Hr.width=Wr.width,Hr.height=Wr.height,!Hr.width&&!Hr.height&&(Hr.width=Wr.right-Wr.left||Vt.width||0,Hr.height=Wr.bottom-Wr.top||Vt.height||0)}return this.clientRect=Hr,Hr}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let Vt=1;if(!this.hls.config.ignoreDevicePixelRatio)try{Vt=self.devicePixelRatio}catch{}return Vt}isLevelAllowed(Vt){return!this.restrictedLevels.some(Hr=>Vt.bitrate===Hr.bitrate&&Vt.width===Hr.width&&Vt.height===Hr.height)}static getMaxLevelByMediaSize(Vt,Hr,Wr){if(!(Vt!=null&&Vt.length))return-1;const Yr=(tn,rn)=>rn?tn.width!==rn.width||tn.height!==rn.height:!0;let Zr=Vt.length-1;const en=Math.max(Hr,Wr);for(let tn=0;tn<Vt.length;tn+=1){const rn=Vt[tn];if((rn.width>=en||rn.height>=en)&&Yr(rn,Vt[tn+1])){Zr=tn;break}}return Zr}}class il{constructor(Vt){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=Vt,this.registerListeners()}setStreamController(Vt){this.streamController=Vt}registerListeners(){this.hls.on(m$2.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(m$2.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(Vt,Hr){const Wr=this.hls.config;if(Wr.capLevelOnFPSDrop){const Yr=Hr.media instanceof self.HTMLVideoElement?Hr.media:null;this.media=Yr,Yr&&typeof Yr.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),Wr.fpsDroppedMonitoringPeriod)}}checkFPS(Vt,Hr,Wr){const Yr=performance.now();if(Hr){if(this.lastTime){const Zr=Yr-this.lastTime,en=Wr-this.lastDroppedFrames,tn=Hr-this.lastDecodedFrames,rn=1e3*en/Zr,nn=this.hls;if(nn.trigger(m$2.FPS_DROP,{currentDropped:en,currentDecoded:tn,totalDroppedFrames:Wr}),rn>0&&en>nn.config.fpsDroppedMonitoringThreshold*tn){let on=nn.currentLevel;v$2.warn("drop FPS ratio greater than max allowed value for currentLevel: "+on),on>0&&(nn.autoLevelCapping===-1||nn.autoLevelCapping>=on)&&(on=on-1,nn.trigger(m$2.FPS_DROP_LEVEL_CAPPING,{level:on,droppedLevel:nn.currentLevel}),nn.autoLevelCapping=on,this.streamController.nextLevelSwitch())}}this.lastTime=Yr,this.lastDroppedFrames=Wr,this.lastDecodedFrames=Hr}}checkFPSInterval(){const Vt=this.media;if(Vt)if(this.isVideoPlaybackQualityAvailable){const Hr=Vt.getVideoPlaybackQuality();this.checkFPS(Vt,Hr.totalVideoFrames,Hr.droppedVideoFrames)}else this.checkFPS(Vt,Vt.webkitDecodedFrameCount,Vt.webkitDroppedFrameCount)}}const ft="[eme]";class Ye{constructor(Vt){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=Ye.CDMCleanupPromise?[Ye.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=v$2.debug.bind(v$2,ft),this.log=v$2.log.bind(v$2,ft),this.warn=v$2.warn.bind(v$2,ft),this.error=v$2.error.bind(v$2,ft),this.hls=Vt,this.config=Vt.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const Vt=this.config;Vt.requestMediaKeySystemAccessFunc=null,Vt.licenseXhrSetup=Vt.licenseResponseCallback=void 0,Vt.drmSystems=Vt.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(m$2.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(m$2.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(m$2.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(m$2.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(m$2.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(m$2.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(m$2.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(m$2.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(Vt){const{drmSystems:Hr,widevineLicenseUrl:Wr}=this.config,Yr=Hr[Vt];if(Yr)return Yr.licenseUrl;if(Vt===Z$2.WIDEVINE&&Wr)return Wr;throw new Error(`no license server URL configured for key-system "${Vt}"`)}getServerCertificateUrl(Vt){const{drmSystems:Hr}=this.config,Wr=Hr[Vt];if(Wr)return Wr.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${Vt}"]`)}attemptKeySystemAccess(Vt){const Hr=this.hls.levels,Wr=(en,tn,rn)=>!!en&&rn.indexOf(en)===tn,Yr=Hr.map(en=>en.audioCodec).filter(Wr),Zr=Hr.map(en=>en.videoCodec).filter(Wr);return Yr.length+Zr.length===0&&Zr.push("avc1.42e01e"),new Promise((en,tn)=>{const rn=nn=>{const on=nn.shift();this.getMediaKeysPromise(on,Yr,Zr).then(an=>en({keySystem:on,mediaKeys:an})).catch(an=>{nn.length?rn(nn):an instanceof ge?tn(an):tn(new ge({type:B$5.KEY_SYSTEM_ERROR,details:L$2.KEY_SYSTEM_NO_ACCESS,error:an,fatal:!0},an.message))})};rn(Vt)})}requestMediaKeySystemAccess(Vt,Hr){const{requestMediaKeySystemAccessFunc:Wr}=this.config;if(typeof Wr!="function"){let Yr=`Configured requestMediaKeySystemAccess is not a function ${Wr}`;return Ki===null&&self.location.protocol==="http:"&&(Yr=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(Yr))}return Wr(Vt,Hr)}getMediaKeysPromise(Vt,Hr,Wr){const Yr=fn(Vt,Hr,Wr,this.config.drmSystemOptions),Zr=this.keySystemAccessPromises[Vt];let en=Zr==null?void 0:Zr.keySystemAccess;if(!en){this.log(`Requesting encrypted media "${Vt}" key-system access with config: ${JSON.stringify(Yr)}`),en=this.requestMediaKeySystemAccess(Vt,Yr);const tn=this.keySystemAccessPromises[Vt]={keySystemAccess:en};return en.catch(rn=>{this.log(`Failed to obtain access to key-system "${Vt}": ${rn}`)}),en.then(rn=>{this.log(`Access for key-system "${rn.keySystem}" obtained`);const nn=this.fetchServerCertificate(Vt);return this.log(`Create media-keys for "${Vt}"`),tn.mediaKeys=rn.createMediaKeys().then(on=>(this.log(`Media-keys created for "${Vt}"`),nn.then(an=>an?this.setMediaKeysServerCertificate(on,Vt,an):on))),tn.mediaKeys.catch(on=>{this.error(`Failed to create media-keys for "${Vt}"}: ${on}`)}),tn.mediaKeys})}return en.then(()=>Zr.mediaKeys)}createMediaKeySessionContext({decryptdata:Vt,keySystem:Hr,mediaKeys:Wr}){this.log(`Creating key-system session "${Hr}" keyId: ${Se$2.hexDump(Vt.keyId||[])}`);const Yr=Wr.createSession(),Zr={decryptdata:Vt,keySystem:Hr,mediaKeys:Wr,mediaKeysSession:Yr,keyStatus:"status-pending"};return this.mediaKeySessions.push(Zr),Zr}renewKeySession(Vt){const Hr=Vt.decryptdata;if(Hr.pssh){const Wr=this.createMediaKeySessionContext(Vt),Yr=this.getKeyIdString(Hr),Zr="cenc";this.keyIdToKeySessionPromise[Yr]=this.generateRequestWithPreferredKeySession(Wr,Zr,Hr.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(Vt)}getKeyIdString(Vt){if(!Vt)throw new Error("Could not read keyId of undefined decryptdata");if(Vt.keyId===null)throw new Error("keyId is null");return Se$2.hexDump(Vt.keyId)}updateKeySession(Vt,Hr){var Wr;const Yr=Vt.mediaKeysSession;return this.log(`Updating key-session "${Yr.sessionId}" for keyID ${Se$2.hexDump(((Wr=Vt.decryptdata)==null?void 0:Wr.keyId)||[])}
      } (data length: ${Hr&&Hr.byteLength})`),Yr.update(Hr)}selectKeySystemFormat(Vt){const Hr=Object.keys(Vt.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${Vt.sn} ${Vt.type}: ${Vt.level}) key formats ${Hr.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(Hr)),this.keyFormatPromise}getKeyFormatPromise(Vt){return new Promise((Hr,Wr)=>{const Yr=Mt(this.config),Zr=Vt.map(Ns).filter(en=>!!en&&Yr.indexOf(en)!==-1);return this.getKeySystemSelectionPromise(Zr).then(({keySystem:en})=>{const tn=Us(en);tn?Hr(tn):Wr(new Error(`Unable to find format for key-system "${en}"`))}).catch(Wr)})}loadKey(Vt){const Hr=Vt.keyInfo.decryptdata,Wr=this.getKeyIdString(Hr),Yr=`(keyId: ${Wr} format: "${Hr.keyFormat}" method: ${Hr.method} uri: ${Hr.uri})`;this.log(`Starting session for key ${Yr}`);let Zr=this.keyIdToKeySessionPromise[Wr];return Zr||(Zr=this.keyIdToKeySessionPromise[Wr]=this.getKeySystemForKeyPromise(Hr).then(({keySystem:en,mediaKeys:tn})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${Vt.frag.sn} ${Vt.frag.type}: ${Vt.frag.level} using key ${Yr}`),this.attemptSetMediaKeys(en,tn).then(()=>{this.throwIfDestroyed();const rn=this.createMediaKeySessionContext({keySystem:en,mediaKeys:tn,decryptdata:Hr});return this.generateRequestWithPreferredKeySession(rn,"cenc",Hr.pssh,"playlist-key")}))),Zr.catch(en=>this.handleError(en))),Zr}throwIfDestroyed(Vt="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(Vt){this.hls&&(this.error(Vt.message),Vt instanceof ge?this.hls.trigger(m$2.ERROR,Vt.data):this.hls.trigger(m$2.ERROR,{type:B$5.KEY_SYSTEM_ERROR,details:L$2.KEY_SYSTEM_NO_KEYS,error:Vt,fatal:!0}))}getKeySystemForKeyPromise(Vt){const Hr=this.getKeyIdString(Vt),Wr=this.keyIdToKeySessionPromise[Hr];if(!Wr){const Yr=Ns(Vt.keyFormat),Zr=Yr?[Yr]:Mt(this.config);return this.attemptKeySystemAccess(Zr)}return Wr}getKeySystemSelectionPromise(Vt){if(Vt.length||(Vt=Mt(this.config)),Vt.length===0)throw new ge({type:B$5.KEY_SYSTEM_ERROR,details:L$2.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(Vt)}_onMediaEncrypted(Vt){const{initDataType:Hr,initData:Wr}=Vt;if(this.debug(`"${Vt.type}" event: init data type: "${Hr}"`),Wr===null)return;let Yr,Zr;if(Hr==="sinf"&&this.config.drmSystems[Z$2.FAIRPLAY]){const on=ie$1(new Uint8Array(Wr));try{const an=Es(JSON.parse(on).sinf),$n=Xi(new Uint8Array(an));if(!$n)return;Yr=$n.subarray(8,24),Zr=Z$2.FAIRPLAY}catch{this.warn('Failed to parse sinf "encrypted" event message initData');return}}else{const on=Un$1(Wr);if(on===null)return;on.version===0&&on.systemId===Gi.WIDEVINE&&on.data&&(Yr=on.data.subarray(8,24)),Zr=dn(on.systemId)}if(!Zr||!Yr)return;const en=Se$2.hexDump(Yr),{keyIdToKeySessionPromise:tn,mediaKeySessions:rn}=this;let nn=tn[en];for(let on=0;on<rn.length;on++){const an=rn[on],$n=an.decryptdata;if($n.pssh||!$n.keyId)continue;const ln=Se$2.hexDump($n.keyId);if(en===ln||$n.uri.replace(/-/g,"").indexOf(en)!==-1){nn=tn[ln],delete tn[ln],$n.pssh=new Uint8Array(Wr),$n.keyId=Yr,nn=tn[en]=nn.then(()=>this.generateRequestWithPreferredKeySession(an,Hr,Wr,"encrypted-event-key-match"));break}}nn||(nn=tn[en]=this.getKeySystemSelectionPromise([Zr]).then(({keySystem:on,mediaKeys:an})=>{var $n;this.throwIfDestroyed();const ln=new it$1("ISO-23001-7",en,($n=Us(on))!=null?$n:"");return ln.pssh=new Uint8Array(Wr),ln.keyId=Yr,this.attemptSetMediaKeys(on,an).then(()=>{this.throwIfDestroyed();const Hn=this.createMediaKeySessionContext({decryptdata:ln,keySystem:on,mediaKeys:an});return this.generateRequestWithPreferredKeySession(Hn,Hr,Wr,"encrypted-event-no-match")})})),nn.catch(on=>this.handleError(on))}_onWaitingForKey(Vt){this.log(`"${Vt.type}" event`)}attemptSetMediaKeys(Vt,Hr){const Wr=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${Vt}"`);const Yr=Promise.all(Wr).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(Hr)});return this.setMediaKeysQueue.push(Yr),Yr.then(()=>{this.log(`Media-keys set for "${Vt}"`),Wr.push(Yr),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(Zr=>Wr.indexOf(Zr)===-1)})}generateRequestWithPreferredKeySession(Vt,Hr,Wr,Yr){var Zr,en;const tn=(Zr=this.config.drmSystems)==null||(en=Zr[Vt.keySystem])==null?void 0:en.generateRequest;if(tn)try{const Hn=tn.call(this.hls,Hr,Wr,Vt);if(!Hn)throw new Error("Invalid response from configured generateRequest filter");Hr=Hn.initDataType,Wr=Vt.decryptdata.pssh=Hn.initData?new Uint8Array(Hn.initData):null}catch(Hn){var rn;if(this.warn(Hn.message),(rn=this.hls)!=null&&rn.config.debug)throw Hn}if(Wr===null)return this.log(`Skipping key-session request for "${Yr}" (no initData)`),Promise.resolve(Vt);const nn=this.getKeyIdString(Vt.decryptdata);this.log(`Generating key-session request for "${Yr}": ${nn} (init data type: ${Hr} length: ${Wr?Wr.byteLength:null})`);const on=new ws,an=Vt._onmessage=Hn=>{const jn=Vt.mediaKeysSession;if(!jn){on.emit("error",new Error("invalid state"));return}const{messageType:zn,message:Wn}=Hn;this.log(`"${zn}" message event for session "${jn.sessionId}" message size: ${Wn.byteLength}`),zn==="license-request"||zn==="license-renewal"?this.renewLicense(Vt,Wn).catch(ei=>{this.handleError(ei),on.emit("error",ei)}):zn==="license-release"?Vt.keySystem===Z$2.FAIRPLAY&&(this.updateKeySession(Vt,is("acknowledged")),this.removeSession(Vt)):this.warn(`unhandled media key message type "${zn}"`)},$n=Vt._onkeystatuseschange=Hn=>{if(!Vt.mediaKeysSession){on.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(Vt);const jn=Vt.keyStatus;on.emit("keyStatus",jn),jn==="expired"&&(this.warn(`${Vt.keySystem} expired for key ${nn}`),this.renewKeySession(Vt))};Vt.mediaKeysSession.addEventListener("message",an),Vt.mediaKeysSession.addEventListener("keystatuseschange",$n);const ln=new Promise((Hn,jn)=>{on.on("error",jn),on.on("keyStatus",zn=>{zn.startsWith("usable")?Hn():zn==="output-restricted"?jn(new ge({type:B$5.KEY_SYSTEM_ERROR,details:L$2.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):zn==="internal-error"?jn(new ge({type:B$5.KEY_SYSTEM_ERROR,details:L$2.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${zn}"`)):zn==="expired"?jn(new Error("key expired while generating request")):this.warn(`unhandled key status change "${zn}"`)})});return Vt.mediaKeysSession.generateRequest(Hr,Wr).then(()=>{var Hn;this.log(`Request generated for key-session "${(Hn=Vt.mediaKeysSession)==null?void 0:Hn.sessionId}" keyId: ${nn}`)}).catch(Hn=>{throw new ge({type:B$5.KEY_SYSTEM_ERROR,details:L$2.KEY_SYSTEM_NO_SESSION,error:Hn,fatal:!1},`Error generating key-session request: ${Hn}`)}).then(()=>ln).catch(Hn=>{throw on.removeAllListeners(),this.removeSession(Vt),Hn}).then(()=>(on.removeAllListeners(),Vt))}onKeyStatusChange(Vt){Vt.mediaKeysSession.keyStatuses.forEach((Hr,Wr)=>{this.log(`key status change "${Hr}" for keyStatuses keyId: ${Se$2.hexDump("buffer"in Wr?new Uint8Array(Wr.buffer,Wr.byteOffset,Wr.byteLength):new Uint8Array(Wr))} session keyId: ${Se$2.hexDump(new Uint8Array(Vt.decryptdata.keyId||[]))} uri: ${Vt.decryptdata.uri}`),Vt.keyStatus=Hr})}fetchServerCertificate(Vt){const Hr=this.config,Wr=Hr.loader,Yr=new Wr(Hr),Zr=this.getServerCertificateUrl(Vt);return Zr?(this.log(`Fetching server certificate for "${Vt}"`),new Promise((en,tn)=>{const rn={responseType:"arraybuffer",url:Zr},nn=Hr.certLoadPolicy.default,on={loadPolicy:nn,timeout:nn.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},an={onSuccess:($n,ln,Hn,jn)=>{en($n.data)},onError:($n,ln,Hn,jn)=>{tn(new ge({type:B$5.KEY_SYSTEM_ERROR,details:L$2.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:Hn,response:oe$2({url:rn.url,data:void 0},$n)},`"${Vt}" certificate request failed (${Zr}). Status: ${$n.code} (${$n.text})`))},onTimeout:($n,ln,Hn)=>{tn(new ge({type:B$5.KEY_SYSTEM_ERROR,details:L$2.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:Hn,response:{url:rn.url,data:void 0}},`"${Vt}" certificate request timed out (${Zr})`))},onAbort:($n,ln,Hn)=>{tn(new Error("aborted"))}};Yr.load(rn,on,an)})):Promise.resolve()}setMediaKeysServerCertificate(Vt,Hr,Wr){return new Promise((Yr,Zr)=>{Vt.setServerCertificate(Wr).then(en=>{this.log(`setServerCertificate ${en?"success":"not supported by CDM"} (${Wr==null?void 0:Wr.byteLength}) on "${Hr}"`),Yr(Vt)}).catch(en=>{Zr(new ge({type:B$5.KEY_SYSTEM_ERROR,details:L$2.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:en,fatal:!0},en.message))})})}renewLicense(Vt,Hr){return this.requestLicense(Vt,new Uint8Array(Hr)).then(Wr=>this.updateKeySession(Vt,new Uint8Array(Wr)).catch(Yr=>{throw new ge({type:B$5.KEY_SYSTEM_ERROR,details:L$2.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:Yr,fatal:!0},Yr.message)}))}unpackPlayReadyKeyMessage(Vt,Hr){const Wr=String.fromCharCode.apply(null,new Uint16Array(Hr.buffer));if(!Wr.includes("PlayReadyKeyMessage"))return Vt.setRequestHeader("Content-Type","text/xml; charset=utf-8"),Hr;const Yr=new DOMParser().parseFromString(Wr,"application/xml"),Zr=Yr.querySelectorAll("HttpHeader");if(Zr.length>0){let on;for(let an=0,$n=Zr.length;an<$n;an++){var en,tn;on=Zr[an];const ln=(en=on.querySelector("name"))==null?void 0:en.textContent,Hn=(tn=on.querySelector("value"))==null?void 0:tn.textContent;ln&&Hn&&Vt.setRequestHeader(ln,Hn)}}const rn=Yr.querySelector("Challenge"),nn=rn==null?void 0:rn.textContent;if(!nn)throw new Error("Cannot find <Challenge> in key message");return is(atob(nn))}setupLicenseXHR(Vt,Hr,Wr,Yr){const Zr=this.config.licenseXhrSetup;return Zr?Promise.resolve().then(()=>{if(!Wr.decryptdata)throw new Error("Key removed");return Zr.call(this.hls,Vt,Hr,Wr,Yr)}).catch(en=>{if(!Wr.decryptdata)throw en;return Vt.open("POST",Hr,!0),Zr.call(this.hls,Vt,Hr,Wr,Yr)}).then(en=>(Vt.readyState||Vt.open("POST",Hr,!0),{xhr:Vt,licenseChallenge:en||Yr})):(Vt.open("POST",Hr,!0),Promise.resolve({xhr:Vt,licenseChallenge:Yr}))}requestLicense(Vt,Hr){const Wr=this.config.keyLoadPolicy.default;return new Promise((Yr,Zr)=>{const en=this.getLicenseServerUrl(Vt.keySystem);this.log(`Sending license request to URL: ${en}`);const tn=new XMLHttpRequest;tn.responseType="arraybuffer",tn.onreadystatechange=()=>{if(!this.hls||!Vt.mediaKeysSession)return Zr(new Error("invalid state"));if(tn.readyState===4)if(tn.status===200){this._requestLicenseFailureCount=0;let rn=tn.response;this.log(`License received ${rn instanceof ArrayBuffer?rn.byteLength:rn}`);const nn=this.config.licenseResponseCallback;if(nn)try{rn=nn.call(this.hls,tn,en,Vt)}catch(on){this.error(on)}Yr(rn)}else{const rn=Wr.errorRetry,nn=rn?rn.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>nn||tn.status>=400&&tn.status<500)Zr(new ge({type:B$5.KEY_SYSTEM_ERROR,details:L$2.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:tn,response:{url:en,data:void 0,code:tn.status,text:tn.statusText}},`License Request XHR failed (${en}). Status: ${tn.status} (${tn.statusText})`));else{const on=nn-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${on} attempts left`),this.requestLicense(Vt,Hr).then(Yr,Zr)}}},Vt.licenseXhr&&Vt.licenseXhr.readyState!==XMLHttpRequest.DONE&&Vt.licenseXhr.abort(),Vt.licenseXhr=tn,this.setupLicenseXHR(tn,en,Vt,Hr).then(({xhr:rn,licenseChallenge:nn})=>{Vt.keySystem==Z$2.PLAYREADY&&(nn=this.unpackPlayReadyKeyMessage(rn,nn)),rn.send(nn)})})}onMediaAttached(Vt,Hr){if(!this.config.emeEnabled)return;const Wr=Hr.media;this.media=Wr,Wr.addEventListener("encrypted",this.onMediaEncrypted),Wr.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const Vt=this.media,Hr=this.mediaKeySessions;Vt&&(Vt.removeEventListener("encrypted",this.onMediaEncrypted),Vt.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},it$1.clearKeyUriToKeyIdMap();const Wr=Hr.length;Ye.CDMCleanupPromise=Promise.all(Hr.map(Yr=>this.removeSession(Yr)).concat(Vt==null?void 0:Vt.setMediaKeys(null).catch(Yr=>{this.log(`Could not clear media keys: ${Yr}`)}))).then(()=>{Wr&&(this.log("finished closing key sessions and clearing media keys"),Hr.length=0)}).catch(Yr=>{this.log(`Could not close sessions and clear media keys: ${Yr}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(Vt,{sessionKeys:Hr}){if(!(!Hr||!this.config.emeEnabled)&&!this.keyFormatPromise){const Wr=Hr.reduce((Yr,Zr)=>(Yr.indexOf(Zr.keyFormat)===-1&&Yr.push(Zr.keyFormat),Yr),[]);this.log(`Selecting key-system from session-keys ${Wr.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(Wr)}}removeSession(Vt){const{mediaKeysSession:Hr,licenseXhr:Wr}=Vt;if(Hr){this.log(`Remove licenses and keys and close session ${Hr.sessionId}`),Vt._onmessage&&(Hr.removeEventListener("message",Vt._onmessage),Vt._onmessage=void 0),Vt._onkeystatuseschange&&(Hr.removeEventListener("keystatuseschange",Vt._onkeystatuseschange),Vt._onkeystatuseschange=void 0),Wr&&Wr.readyState!==XMLHttpRequest.DONE&&Wr.abort(),Vt.mediaKeysSession=Vt.decryptdata=Vt.licenseXhr=void 0;const Yr=this.mediaKeySessions.indexOf(Vt);return Yr>-1&&this.mediaKeySessions.splice(Yr,1),Hr.remove().catch(Zr=>{this.log(`Could not remove session: ${Zr}`)}).then(()=>Hr.close()).catch(Zr=>{this.log(`Could not close session: ${Zr}`)})}}}Ye.CDMCleanupPromise=void 0;class ge extends Error{constructor(Vt,Hr){super(Hr),this.data=void 0,Vt.error||(Vt.error=new Error(Hr)),this.data=Vt,Vt.err=Vt.error}}var he$2;(function(Kt){Kt.MANIFEST="m",Kt.AUDIO="a",Kt.VIDEO="v",Kt.MUXED="av",Kt.INIT="i",Kt.CAPTION="c",Kt.TIMED_TEXT="tt",Kt.KEY="k",Kt.OTHER="o"})(he$2||(he$2={}));var fs;(function(Kt){Kt.DASH="d",Kt.HLS="h",Kt.SMOOTH="s",Kt.OTHER="o"})(fs||(fs={}));var Oe$2;(function(Kt){Kt.OBJECT="CMCD-Object",Kt.REQUEST="CMCD-Request",Kt.SESSION="CMCD-Session",Kt.STATUS="CMCD-Status"})(Oe$2||(Oe$2={}));const rl={[Oe$2.OBJECT]:["br","d","ot","tb"],[Oe$2.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[Oe$2.SESSION]:["cid","pr","sf","sid","st","v"],[Oe$2.STATUS]:["bs","rtp"]};class Xe{constructor(Vt,Hr){this.value=void 0,this.params=void 0,Array.isArray(Vt)&&(Vt=Vt.map(Wr=>Wr instanceof Xe?Wr:new Xe(Wr))),this.value=Vt,this.params=Hr}}class Nr{constructor(Vt){this.description=void 0,this.description=Vt}}const nl="Dict";function al(Kt){return Array.isArray(Kt)?JSON.stringify(Kt):Kt instanceof Map?"Map{}":Kt instanceof Set?"Set{}":typeof Kt=="object"?JSON.stringify(Kt):String(Kt)}function ol(Kt,Vt,Hr,Wr){return new Error(`failed to ${Kt} "${al(Vt)}" as ${Hr}`,{cause:Wr})}const _i="Bare Item",ll="Boolean",cl="Byte Sequence",hl="Decimal",ul="Integer";function dl(Kt){return Kt<-999999999999999||999999999999999<Kt}const fl=/[\x00-\x1f\x7f]+/,gl="Token",ml="Key";function Ie$1(Kt,Vt,Hr){return ol("serialize",Kt,Vt,Hr)}function pl(Kt){if(typeof Kt!="boolean")throw Ie$1(Kt,ll);return Kt?"?1":"?0"}function Tl(Kt){return btoa(String.fromCharCode(...Kt))}function El(Kt){if(ArrayBuffer.isView(Kt)===!1)throw Ie$1(Kt,cl);return`:${Tl(Kt)}:`}function Ur(Kt){if(dl(Kt))throw Ie$1(Kt,ul);return Kt.toString()}function yl(Kt){return`@${Ur(Kt.getTime()/1e3)}`}function Br(Kt,Vt){if(Kt<0)return-Br(-Kt,Vt);const Hr=Math.pow(10,Vt);if(Math.abs(Kt*Hr%1-.5)<Number.EPSILON){const Wr=Math.floor(Kt*Hr);return(Wr%2===0?Wr:Wr+1)/Hr}else return Math.round(Kt*Hr)/Hr}function xl(Kt){const Vt=Br(Kt,3);if(Math.floor(Math.abs(Vt)).toString().length>12)throw Ie$1(Kt,hl);const Hr=Vt.toString();return Hr.includes(".")?Hr:`${Hr}.0`}const Sl="String";function vl(Kt){if(fl.test(Kt))throw Ie$1(Kt,Sl);return`"${Kt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function Al(Kt){return Kt.description||Kt.toString().slice(7,-1)}function Pi(Kt){const Vt=Al(Kt);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(Vt)===!1)throw Ie$1(Vt,gl);return Vt}function gs(Kt){switch(typeof Kt){case"number":if(!O$6(Kt))throw Ie$1(Kt,_i);return Number.isInteger(Kt)?Ur(Kt):xl(Kt);case"string":return vl(Kt);case"symbol":return Pi(Kt);case"boolean":return pl(Kt);case"object":if(Kt instanceof Date)return yl(Kt);if(Kt instanceof Uint8Array)return El(Kt);if(Kt instanceof Nr)return Pi(Kt);default:throw Ie$1(Kt,_i)}}function ms(Kt){if(/^[a-z*][a-z0-9\-_.*]*$/.test(Kt)===!1)throw Ie$1(Kt,ml);return Kt}function Fs(Kt){return Kt==null?"":Object.entries(Kt).map(([Vt,Hr])=>Hr===!0?`;${ms(Vt)}`:`;${ms(Vt)}=${gs(Hr)}`).join("")}function $r$1(Kt){return Kt instanceof Xe?`${gs(Kt.value)}${Fs(Kt.params)}`:gs(Kt)}function Ll(Kt){return`(${Kt.value.map($r$1).join(" ")})${Fs(Kt.params)}`}function Rl(Kt,Vt={whitespace:!0}){if(typeof Kt!="object")throw Ie$1(Kt,nl);const Hr=Kt instanceof Map?Kt.entries():Object.entries(Kt),Wr=Vt!=null&&Vt.whitespace?" ":"";return Array.from(Hr).map(([Yr,Zr])=>{Zr instanceof Xe||(Zr=new Xe(Zr));let en=ms(Yr);return Zr.value===!0?en+=Fs(Zr.params):(en+="=",Array.isArray(Zr.value)?en+=Ll(Zr):en+=$r$1(Zr)),en}).join(`,${Wr}`)}function Il(Kt,Vt){return Rl(Kt,Vt)}const bl=Kt=>Kt==="ot"||Kt==="sf"||Kt==="st",Dl=Kt=>typeof Kt=="number"?O$6(Kt):Kt!=null&&Kt!==""&&Kt!==!1;function Cl(Kt,Vt){const Hr=new URL(Kt),Wr=new URL(Vt);if(Hr.origin!==Wr.origin)return Kt;const Yr=Hr.pathname.split("/").slice(1),Zr=Wr.pathname.split("/").slice(1,-1);for(;Yr[0]===Zr[0];)Yr.shift(),Zr.shift();for(;Zr.length;)Zr.shift(),Yr.unshift("..");return Yr.join("/")}function wl(){try{return crypto.randomUUID()}catch{try{const Kt=URL.createObjectURL(new Blob),Vt=Kt.toString();return URL.revokeObjectURL(Kt),Vt.slice(Vt.lastIndexOf("/")+1)}catch{let Kt=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,Vt=>{const Hr=(Kt+Math.random()*16)%16|0;return Kt=Math.floor(Kt/16),(Vt=="x"?Hr:Hr&3|8).toString(16)})}}}const xt$1=Kt=>Math.round(Kt),kl=(Kt,Vt)=>(Vt!=null&&Vt.baseUrl&&(Kt=Cl(Kt,Vt.baseUrl)),encodeURIComponent(Kt)),gt$1=Kt=>xt$1(Kt/100)*100,_l={br:xt$1,d:xt$1,bl:gt$1,dl:gt$1,mtp:gt$1,nor:kl,rtp:gt$1,tb:xt$1};function Pl(Kt,Vt){const Hr={};if(Kt==null||typeof Kt!="object")return Hr;const Wr=Object.keys(Kt).sort(),Yr=se$2({},_l,Vt==null?void 0:Vt.formatters),Zr=Vt==null?void 0:Vt.filter;return Wr.forEach(en=>{if(Zr!=null&&Zr(en))return;let tn=Kt[en];const rn=Yr[en];rn&&(tn=rn(tn,Vt)),!(en==="v"&&tn===1)&&(en=="pr"&&tn===1||Dl(tn)&&(bl(en)&&typeof tn=="string"&&(tn=new Nr(tn)),Hr[en]=tn))}),Hr}function Gr(Kt,Vt={}){return Kt?Il(Pl(Kt,Vt),se$2({whitespace:!1},Vt)):""}function Fl(Kt,Vt={}){if(!Kt)return{};const Hr=Object.entries(Kt),Wr=Object.entries(rl).concat(Object.entries((Vt==null?void 0:Vt.customHeaderMap)||{})),Yr=Hr.reduce((Zr,en)=>{var tn;const[rn,nn]=en,on=((tn=Wr.find(an=>an[1].includes(rn)))==null?void 0:tn[0])||Oe$2.REQUEST;return Zr[on]!=null||(Zr[on]={}),Zr[on][rn]=nn,Zr},{});return Object.entries(Yr).reduce((Zr,[en,tn])=>(Zr[en]=Gr(tn,Vt),Zr),{})}function Ol(Kt,Vt,Hr){return se$2(Kt,Fl(Vt,Hr))}const Ml="CMCD";function Nl(Kt,Vt={}){if(!Kt)return"";const Hr=Gr(Kt,Vt);return`${Ml}=${encodeURIComponent(Hr)}`}const Fi=/CMCD=[^&#]+/;function Ul(Kt,Vt,Hr){const Wr=Nl(Vt,Hr);if(!Wr)return Kt;if(Fi.test(Kt))return Kt.replace(Fi,Wr);const Yr=Kt.includes("?")?"&":"?";return`${Kt}${Yr}${Wr}`}class Bl{constructor(Vt){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=Yr=>{try{this.apply(Yr,{ot:he$2.MANIFEST,su:!this.initialized})}catch(Zr){v$2.warn("Could not generate manifest CMCD data.",Zr)}},this.applyFragmentData=Yr=>{try{const Zr=Yr.frag,en=this.hls.levels[Zr.level],tn=this.getObjectType(Zr),rn={d:Zr.duration*1e3,ot:tn};(tn===he$2.VIDEO||tn===he$2.AUDIO||tn==he$2.MUXED)&&(rn.br=en.bitrate/1e3,rn.tb=this.getTopBandwidth(tn)/1e3,rn.bl=this.getBufferLength(tn)),this.apply(Yr,rn)}catch(Zr){v$2.warn("Could not generate segment CMCD data.",Zr)}},this.hls=Vt;const Hr=this.config=Vt.config,{cmcd:Wr}=Hr;Wr!=null&&(Hr.pLoader=this.createPlaylistLoader(),Hr.fLoader=this.createFragmentLoader(),this.sid=Wr.sessionId||wl(),this.cid=Wr.contentId,this.useHeaders=Wr.useHeaders===!0,this.includeKeys=Wr.includeKeys,this.registerListeners())}registerListeners(){const Vt=this.hls;Vt.on(m$2.MEDIA_ATTACHED,this.onMediaAttached,this),Vt.on(m$2.MEDIA_DETACHED,this.onMediaDetached,this),Vt.on(m$2.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const Vt=this.hls;Vt.off(m$2.MEDIA_ATTACHED,this.onMediaAttached,this),Vt.off(m$2.MEDIA_DETACHED,this.onMediaDetached,this),Vt.off(m$2.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(Vt,Hr){this.media=Hr.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(Vt,Hr){var Wr,Yr;this.audioBuffer=(Wr=Hr.tracks.audio)==null?void 0:Wr.buffer,this.videoBuffer=(Yr=Hr.tracks.video)==null?void 0:Yr.buffer}createData(){var Vt;return{v:1,sf:fs.HLS,sid:this.sid,cid:this.cid,pr:(Vt=this.media)==null?void 0:Vt.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(Vt,Hr={}){se$2(Hr,this.createData());const Wr=Hr.ot===he$2.INIT||Hr.ot===he$2.VIDEO||Hr.ot===he$2.MUXED;this.starved&&Wr&&(Hr.bs=!0,Hr.su=!0,this.starved=!1),Hr.su==null&&(Hr.su=this.buffering);const{includeKeys:Yr}=this;Yr&&(Hr=Object.keys(Hr).reduce((Zr,en)=>(Yr.includes(en)&&(Zr[en]=Hr[en]),Zr),{})),this.useHeaders?(Vt.headers||(Vt.headers={}),Ol(Vt.headers,Hr)):Vt.url=Ul(Vt.url,Hr)}getObjectType(Vt){const{type:Hr}=Vt;if(Hr==="subtitle")return he$2.TIMED_TEXT;if(Vt.sn==="initSegment")return he$2.INIT;if(Hr==="audio")return he$2.AUDIO;if(Hr==="main")return this.hls.audioTracks.length?he$2.VIDEO:he$2.MUXED}getTopBandwidth(Vt){let Hr=0,Wr;const Yr=this.hls;if(Vt===he$2.AUDIO)Wr=Yr.audioTracks;else{const Zr=Yr.maxAutoLevel,en=Zr>-1?Zr+1:Yr.levels.length;Wr=Yr.levels.slice(0,en)}for(const Zr of Wr)Zr.bitrate>Hr&&(Hr=Zr.bitrate);return Hr>0?Hr:NaN}getBufferLength(Vt){const Hr=this.hls.media,Wr=Vt===he$2.AUDIO?this.audioBuffer:this.videoBuffer;return!Wr||!Hr?NaN:J$4.bufferInfo(Wr,Hr.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:Vt}=this.config,Hr=this.applyPlaylistData,Wr=Vt||this.config.loader;return class{constructor(Yr){this.loader=void 0,this.loader=new Wr(Yr)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(Yr,Zr,en){Hr(Yr),this.loader.load(Yr,Zr,en)}}}createFragmentLoader(){const{fLoader:Vt}=this.config,Hr=this.applyFragmentData,Wr=Vt||this.config.loader;return class{constructor(Yr){this.loader=void 0,this.loader=new Wr(Yr)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(Yr,Zr,en){Hr(Yr),this.loader.load(Yr,Zr,en)}}}}const $l=3e5;class Gl{constructor(Vt){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=Vt,this.log=v$2.log.bind(v$2,"[content-steering]:"),this.registerListeners()}registerListeners(){const Vt=this.hls;Vt.on(m$2.MANIFEST_LOADING,this.onManifestLoading,this),Vt.on(m$2.MANIFEST_LOADED,this.onManifestLoaded,this),Vt.on(m$2.MANIFEST_PARSED,this.onManifestParsed,this),Vt.on(m$2.ERROR,this.onError,this)}unregisterListeners(){const Vt=this.hls;Vt&&(Vt.off(m$2.MANIFEST_LOADING,this.onManifestLoading,this),Vt.off(m$2.MANIFEST_LOADED,this.onManifestLoaded,this),Vt.off(m$2.MANIFEST_PARSED,this.onManifestParsed,this),Vt.off(m$2.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const Vt=this.timeToLoad*1e3-(performance.now()-this.updated);if(Vt>0){this.scheduleRefresh(this.uri,Vt);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(Vt){const Hr=this.levels;Hr&&(this.levels=Hr.filter(Wr=>Wr!==Vt))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(Vt,Hr){const{contentSteering:Wr}=Hr;Wr!==null&&(this.pathwayId=Wr.pathwayId,this.uri=Wr.uri,this.started&&this.startLoad())}onManifestParsed(Vt,Hr){this.audioTracks=Hr.audioTracks,this.subtitleTracks=Hr.subtitleTracks}onError(Vt,Hr){const{errorAction:Wr}=Hr;if((Wr==null?void 0:Wr.action)===ce$2.SendAlternateToPenaltyBox&&Wr.flags===Te$1.MoveAllAlternatesMatchingHost){const Yr=this.levels;let Zr=this.pathwayPriority,en=this.pathwayId;if(Hr.context){const{groupId:tn,pathwayId:rn,type:nn}=Hr.context;tn&&Yr?en=this.getPathwayForGroupId(tn,nn,en):rn&&(en=rn)}en in this.penalizedPathways||(this.penalizedPathways[en]=performance.now()),!Zr&&Yr&&(Zr=Yr.reduce((tn,rn)=>(tn.indexOf(rn.pathwayId)===-1&&tn.push(rn.pathwayId),tn),[])),Zr&&Zr.length>1&&(this.updatePathwayPriority(Zr),Wr.resolved=this.pathwayId!==en),Wr.resolved||v$2.warn(`Could not resolve ${Hr.details} ("${Hr.error.message}") with content-steering for Pathway: ${en} levels: ${Yr&&Yr.length} priorities: ${JSON.stringify(Zr)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(Vt){this.levels=Vt;let Hr=this.getLevelsForPathway(this.pathwayId);if(Hr.length===0){const Wr=Vt[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${Wr}"`),Hr=this.getLevelsForPathway(Wr),this.pathwayId=Wr}return Hr.length!==Vt.length?(this.log(`Found ${Hr.length}/${Vt.length} levels in Pathway "${this.pathwayId}"`),Hr):Vt}getLevelsForPathway(Vt){return this.levels===null?[]:this.levels.filter(Hr=>Vt===Hr.pathwayId)}updatePathwayPriority(Vt){this.pathwayPriority=Vt;let Hr;const Wr=this.penalizedPathways,Yr=performance.now();Object.keys(Wr).forEach(Zr=>{Yr-Wr[Zr]>$l&&delete Wr[Zr]});for(let Zr=0;Zr<Vt.length;Zr++){const en=Vt[Zr];if(en in Wr)continue;if(en===this.pathwayId)return;const tn=this.hls.nextLoadLevel,rn=this.hls.levels[tn];if(Hr=this.getLevelsForPathway(en),Hr.length>0){this.log(`Setting Pathway to "${en}"`),this.pathwayId=en,ar(Hr),this.hls.trigger(m$2.LEVELS_UPDATED,{levels:Hr});const nn=this.hls.levels[tn];rn&&nn&&this.levels&&(nn.attrs["STABLE-VARIANT-ID"]!==rn.attrs["STABLE-VARIANT-ID"]&&nn.bitrate!==rn.bitrate&&this.log(`Unstable Pathways change from bitrate ${rn.bitrate} to ${nn.bitrate}`),this.hls.nextLoadLevel=tn);break}}}getPathwayForGroupId(Vt,Hr,Wr){const Yr=this.getLevelsForPathway(Wr).concat(this.levels||[]);for(let Zr=0;Zr<Yr.length;Zr++)if(Hr===Y$6.AUDIO_TRACK&&Yr[Zr].hasAudioGroup(Vt)||Hr===Y$6.SUBTITLE_TRACK&&Yr[Zr].hasSubtitleGroup(Vt))return Yr[Zr].pathwayId;return Wr}clonePathways(Vt){const Hr=this.levels;if(!Hr)return;const Wr={},Yr={};Vt.forEach(Zr=>{const{ID:en,"BASE-ID":tn,"URI-REPLACEMENT":rn}=Zr;if(Hr.some(on=>on.pathwayId===en))return;const nn=this.getLevelsForPathway(tn).map(on=>{const an=new ee$2(on.attrs);an["PATHWAY-ID"]=en;const $n=an.AUDIO&&`${an.AUDIO}_clone_${en}`,ln=an.SUBTITLES&&`${an.SUBTITLES}_clone_${en}`;$n&&(Wr[an.AUDIO]=$n,an.AUDIO=$n),ln&&(Yr[an.SUBTITLES]=ln,an.SUBTITLES=ln);const Hn=Kr(on.uri,an["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",rn),jn=new je$1({attrs:an,audioCodec:on.audioCodec,bitrate:on.bitrate,height:on.height,name:on.name,url:Hn,videoCodec:on.videoCodec,width:on.width});if(on.audioGroups)for(let zn=1;zn<on.audioGroups.length;zn++)jn.addGroupId("audio",`${on.audioGroups[zn]}_clone_${en}`);if(on.subtitleGroups)for(let zn=1;zn<on.subtitleGroups.length;zn++)jn.addGroupId("text",`${on.subtitleGroups[zn]}_clone_${en}`);return jn});Hr.push(...nn),Oi(this.audioTracks,Wr,rn,en),Oi(this.subtitleTracks,Yr,rn,en)})}loadSteeringManifest(Vt){const Hr=this.hls.config,Wr=Hr.loader;this.loader&&this.loader.destroy(),this.loader=new Wr(Hr);let Yr;try{Yr=new self.URL(Vt)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${Vt}`);return}if(Yr.protocol!=="data:"){const on=(this.hls.bandwidthEstimate||Hr.abrEwmaDefaultEstimate)|0;Yr.searchParams.set("_HLS_pathway",this.pathwayId),Yr.searchParams.set("_HLS_throughput",""+on)}const Zr={responseType:"json",url:Yr.href},en=Hr.steeringManifestLoadPolicy.default,tn=en.errorRetry||en.timeoutRetry||{},rn={loadPolicy:en,timeout:en.maxLoadTimeMs,maxRetry:tn.maxNumRetry||0,retryDelay:tn.retryDelayMs||0,maxRetryDelay:tn.maxRetryDelayMs||0},nn={onSuccess:(on,an,$n,ln)=>{this.log(`Loaded steering manifest: "${Yr}"`);const Hn=on.data;if(Hn.VERSION!==1){this.log(`Steering VERSION ${Hn.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=Hn.TTL;const{"RELOAD-URI":jn,"PATHWAY-CLONES":zn,"PATHWAY-PRIORITY":Wn}=Hn;if(jn)try{this.uri=new self.URL(jn,Yr).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${jn}`);return}this.scheduleRefresh(this.uri||$n.url),zn&&this.clonePathways(zn);const ei={steeringManifest:Hn,url:Yr.toString()};this.hls.trigger(m$2.STEERING_MANIFEST_LOADED,ei),Wn&&this.updatePathwayPriority(Wn)},onError:(on,an,$n,ln)=>{if(this.log(`Error loading steering manifest: ${on.code} ${on.text} (${an.url})`),this.stopLoad(),on.code===410){this.enabled=!1,this.log(`Steering manifest ${an.url} no longer available`);return}let Hn=this.timeToLoad*1e3;if(on.code===429){const jn=this.loader;if(typeof(jn==null?void 0:jn.getResponseHeader)=="function"){const zn=jn.getResponseHeader("Retry-After");zn&&(Hn=parseFloat(zn)*1e3)}this.log(`Steering manifest ${an.url} rate limited`);return}this.scheduleRefresh(this.uri||an.url,Hn)},onTimeout:(on,an,$n)=>{this.log(`Timeout loading steering manifest (${an.url})`),this.scheduleRefresh(this.uri||an.url)}};this.log(`Requesting steering manifest: ${Yr}`),this.loader.load(Zr,rn,nn)}scheduleRefresh(Vt,Hr=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var Wr;const Yr=(Wr=this.hls)==null?void 0:Wr.media;if(Yr&&!Yr.ended){this.loadSteeringManifest(Vt);return}this.scheduleRefresh(Vt,this.timeToLoad*1e3)},Hr)}}function Oi(Kt,Vt,Hr,Wr){Kt&&Object.keys(Vt).forEach(Yr=>{const Zr=Kt.filter(en=>en.groupId===Yr).map(en=>{const tn=se$2({},en);return tn.details=void 0,tn.attrs=new ee$2(tn.attrs),tn.url=tn.attrs.URI=Kr(en.url,en.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",Hr),tn.groupId=tn.attrs["GROUP-ID"]=Vt[Yr],tn.attrs["PATHWAY-ID"]=Wr,tn});Kt.push(...Zr)})}function Kr(Kt,Vt,Hr,Wr){const{HOST:Yr,PARAMS:Zr,[Hr]:en}=Wr;let tn;Vt&&(tn=en==null?void 0:en[Vt],tn&&(Kt=tn));const rn=new self.URL(Kt);return Yr&&!tn&&(rn.host=Yr),Zr&&Object.keys(Zr).sort().forEach(nn=>{nn&&rn.searchParams.set(nn,Zr[nn])}),rn.href}const Kl=/^age:\s*[\d.]+\s*$/im;class Vr{constructor(Vt){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=Vt&&Vt.xhrSetup||null,this.stats=new _t,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null,this.stats=null}abortInternal(){const Vt=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),Vt&&(Vt.onreadystatechange=null,Vt.onprogress=null,Vt.readyState!==4&&(this.stats.aborted=!0,Vt.abort()))}abort(){var Vt;this.abortInternal(),(Vt=this.callbacks)!=null&&Vt.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(Vt,Hr,Wr){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=Vt,this.config=Hr,this.callbacks=Wr,this.loadInternal()}loadInternal(){const{config:Vt,context:Hr}=this;if(!Vt||!Hr)return;const Wr=this.loader=new self.XMLHttpRequest,Yr=this.stats;Yr.loading.first=0,Yr.loaded=0,Yr.aborted=!1;const Zr=this.xhrSetup;Zr?Promise.resolve().then(()=>{if(!this.stats.aborted)return Zr(Wr,Hr.url)}).catch(en=>(Wr.open("GET",Hr.url,!0),Zr(Wr,Hr.url))).then(()=>{this.stats.aborted||this.openAndSendXhr(Wr,Hr,Vt)}).catch(en=>{this.callbacks.onError({code:Wr.status,text:en.message},Hr,Wr,Yr)}):this.openAndSendXhr(Wr,Hr,Vt)}openAndSendXhr(Vt,Hr,Wr){Vt.readyState||Vt.open("GET",Hr.url,!0);const Yr=Hr.headers,{maxTimeToFirstByteMs:Zr,maxLoadTimeMs:en}=Wr.loadPolicy;if(Yr)for(const tn in Yr)Vt.setRequestHeader(tn,Yr[tn]);Hr.rangeEnd&&Vt.setRequestHeader("Range","bytes="+Hr.rangeStart+"-"+(Hr.rangeEnd-1)),Vt.onreadystatechange=this.readystatechange.bind(this),Vt.onprogress=this.loadprogress.bind(this),Vt.responseType=Hr.responseType,self.clearTimeout(this.requestTimeout),Wr.timeout=Zr&&O$6(Zr)?Zr:en,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),Wr.timeout),Vt.send()}readystatechange(){const{context:Vt,loader:Hr,stats:Wr}=this;if(!Vt||!Hr)return;const Yr=Hr.readyState,Zr=this.config;if(!Wr.aborted&&Yr>=2&&(Wr.loading.first===0&&(Wr.loading.first=Math.max(self.performance.now(),Wr.loading.start),Zr.timeout!==Zr.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),Zr.timeout=Zr.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),Zr.loadPolicy.maxLoadTimeMs-(Wr.loading.first-Wr.loading.start)))),Yr===4)){self.clearTimeout(this.requestTimeout),Hr.onreadystatechange=null,Hr.onprogress=null;const en=Hr.status,tn=Hr.responseType!=="text";if(en>=200&&en<300&&(tn&&Hr.response||Hr.responseText!==null)){Wr.loading.end=Math.max(self.performance.now(),Wr.loading.first);const rn=tn?Hr.response:Hr.responseText,nn=Hr.responseType==="arraybuffer"?rn.byteLength:rn.length;if(Wr.loaded=Wr.total=nn,Wr.bwEstimate=Wr.total*8e3/(Wr.loading.end-Wr.loading.first),!this.callbacks)return;const on=this.callbacks.onProgress;if(on&&on(Wr,Vt,rn,Hr),!this.callbacks)return;const an={url:Hr.responseURL,data:rn,code:en};this.callbacks.onSuccess(an,Wr,Vt,Hr)}else{const rn=Zr.loadPolicy.errorRetry,nn=Wr.retry,on={url:Vt.url,data:void 0,code:en};Dt(rn,nn,!1,on)?this.retry(rn):(v$2.error(`${en} while loading ${Vt.url}`),this.callbacks.onError({code:en,text:Hr.statusText},Vt,Hr,Wr))}}}loadtimeout(){var Vt;const Hr=(Vt=this.config)==null?void 0:Vt.loadPolicy.timeoutRetry,Wr=this.stats.retry;if(Dt(Hr,Wr,!0))this.retry(Hr);else{var Yr;v$2.warn(`timeout while loading ${(Yr=this.context)==null?void 0:Yr.url}`);const Zr=this.callbacks;Zr&&(this.abortInternal(),Zr.onTimeout(this.stats,this.context,this.loader))}}retry(Vt){const{context:Hr,stats:Wr}=this;this.retryDelay=Ss(Vt,Wr.retry),Wr.retry++,v$2.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${Hr==null?void 0:Hr.url}, retrying ${Wr.retry}/${Vt.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(Vt){const Hr=this.stats;Hr.loaded=Vt.loaded,Vt.lengthComputable&&(Hr.total=Vt.total)}getCacheAge(){let Vt=null;if(this.loader&&Kl.test(this.loader.getAllResponseHeaders())){const Hr=this.loader.getResponseHeader("age");Vt=Hr?parseFloat(Hr):null}return Vt}getResponseHeader(Vt){return this.loader&&new RegExp(`^${Vt}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(Vt):null}}const Xl=/\s/,Ql={newCue(Kt,Vt,Hr,Wr){const Yr=[];let Zr,en,tn,rn,nn;const on=self.VTTCue||self.TextTrackCue;for(let $n=0;$n<Wr.rows.length;$n++)if(Zr=Wr.rows[$n],tn=!0,rn=0,nn="",!Zr.isEmpty()){var an;for(let jn=0;jn<Zr.chars.length;jn++)Xl.test(Zr.chars[jn].uchar)&&tn?rn++:(nn+=Zr.chars[jn].uchar,tn=!1);Zr.cueStartTime=Vt,Vt===Hr&&(Hr+=1e-4),rn>=16?rn--:rn++;const ln=_r(nn.trim()),Hn=_s(Vt,Hr,ln);Kt!=null&&(an=Kt.cues)!=null&&an.getCueById(Hn)||(en=new on(Vt,Hr,ln),en.id=Hn,en.line=$n+1,en.align="left",en.position=10+Math.min(80,Math.floor(rn*8/32)*10),Yr.push(en))}return Kt&&Yr.length&&(Yr.sort(($n,ln)=>$n.line==="auto"||ln.line==="auto"?0:$n.line>8&&ln.line>8?ln.line-$n.line:$n.line-ln.line),Yr.forEach($n=>sr(Kt,$n))),Yr}},Jl={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null};oe$2(oe$2({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Vr,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:ba,bufferController:_o,capLevelController:Ps,errorController:ma,fpsController:il,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:Ki,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:Jl},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},Zl()),{},{subtitleStreamController:Do,subtitleTrackController:wo,timelineController:tl,audioStreamController:Io,audioTrackController:bo,emeController:Ye,cmcdController:Bl,contentSteeringController:Gl});function Zl(){return{cueHandler:Ql,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}const E$3="Radio",[O$5,G$3]=P$n(E$3),[K$3,se$1]=O$5(E$3),M$5=reactExports.forwardRef((Kt,Vt)=>{const{__scopeRadio:Hr,name:Wr,checked:Yr=!1,required:Zr,disabled:en,value:tn="on",onCheck:rn,...nn}=Kt,[on,an]=reactExports.useState(null),$n=d$I(Vt,jn=>an(jn)),ln=reactExports.useRef(!1),Hn=on?!!on.closest("form"):!0;return reactExports.createElement(K$3,{scope:Hr,checked:Yr,disabled:en},reactExports.createElement(E$l.button,e$1x({type:"button",role:"radio","aria-checked":Yr,"data-state":N$3(Yr),"data-disabled":en?"":void 0,disabled:en,value:tn},nn,{ref:$n,onClick:o$1f(Kt.onClick,jn=>{Yr||rn==null||rn(),Hn&&(ln.current=jn.isPropagationStopped(),ln.current||jn.stopPropagation())})})),Hn&&reactExports.createElement(B$4,{control:on,bubbles:!ln.current,name:Wr,value:tn,checked:Yr,required:Zr,disabled:en,style:{transform:"translateX(-100%)"}}))}),B$4=Kt=>{const{control:Vt,checked:Hr,bubbles:Wr=!0,...Yr}=Kt,Zr=reactExports.useRef(null),en=c$I(Hr),tn=z$d(Vt);return reactExports.useEffect(()=>{const rn=Zr.current,nn=window.HTMLInputElement.prototype,on=Object.getOwnPropertyDescriptor(nn,"checked").set;if(en!==Hr&&on){const an=new Event("click",{bubbles:Wr});on.call(rn,Hr),rn.dispatchEvent(an)}},[en,Hr,Wr]),reactExports.createElement("input",e$1x({type:"radio","aria-hidden":!0,defaultChecked:Hr},Yr,{tabIndex:-1,ref:Zr,style:{...Kt.style,...tn,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function N$3(Kt){return Kt?"checked":"unchecked"}const U=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],P$3="RadioGroup",[z$3,ie]=P$n(P$3,[Ee$5,G$3]),S$2=Ee$5(),H$4=G$3(),[T$4,j$5]=z$3(P$3),W$4=reactExports.forwardRef((Kt,Vt)=>{const{__scopeRadioGroup:Hr,name:Wr,defaultValue:Yr,value:Zr,required:en=!1,disabled:tn=!1,orientation:rn,dir:nn,loop:on=!0,onValueChange:an,...$n}=Kt,ln=S$2(Hr),Hn=i$L(nn),[jn,zn]=g$F({prop:Zr,defaultProp:Yr,onChange:an});return reactExports.createElement(T$4,{scope:Hr,name:Wr,required:en,disabled:tn,value:jn,onValueChange:zn},reactExports.createElement(xe$4,e$1x({asChild:!0},ln,{orientation:rn,dir:Hn,loop:on}),reactExports.createElement(E$l.div,e$1x({role:"radiogroup","aria-required":en,"aria-orientation":rn,"data-disabled":tn?"":void 0,dir:Hn},$n,{ref:Vt}))))}),X$4="RadioGroupItem",Y$5=reactExports.forwardRef((Kt,Vt)=>{const{__scopeRadioGroup:Hr,disabled:Wr,...Yr}=Kt,Zr=j$5(X$4,Hr),en=Zr.disabled||Wr,tn=S$2(Hr),rn=H$4(Hr),nn=reactExports.useRef(null),on=d$I(Vt,nn),an=Zr.value===Yr.value,$n=reactExports.useRef(!1);return reactExports.useEffect(()=>{const ln=jn=>{U.includes(jn.key)&&($n.current=!0)},Hn=()=>$n.current=!1;return document.addEventListener("keydown",ln),document.addEventListener("keyup",Hn),()=>{document.removeEventListener("keydown",ln),document.removeEventListener("keyup",Hn)}},[]),reactExports.createElement(Ce$5,e$1x({asChild:!0},tn,{focusable:!en,active:an}),reactExports.createElement(M$5,e$1x({disabled:en,required:Zr.required,checked:an},rn,Yr,{name:Zr.name,ref:on,onCheck:()=>Zr.onValueChange(Yr.value),onKeyDown:o$1f(ln=>{ln.key==="Enter"&&ln.preventDefault()}),onFocus:o$1f(Yr.onFocus,()=>{var ln;$n.current&&((ln=nn.current)===null||ln===void 0||ln.click())})})))}),ue$1=W$4,fe$1=Y$5,E$2="Popover",[F$3,xe]=P$n(E$2,[tt$2]),x$2=tt$2(),[q$2,l$1]=F$3(E$2),z$2=Kt=>{const{__scopePopover:Vt,children:Hr,open:Wr,defaultOpen:Yr,onOpenChange:Zr,modal:en=!1}=Kt,tn=x$2(Vt),rn=reactExports.useRef(null),[nn,on]=reactExports.useState(!1),[an=!1,$n]=g$F({prop:Wr,defaultProp:Yr,onChange:Zr});return reactExports.createElement(ot$1,tn,reactExports.createElement(q$2,{scope:Vt,contentId:s$C(),triggerRef:rn,open:an,onOpenChange:$n,onOpenToggle:reactExports.useCallback(()=>$n(ln=>!ln),[$n]),hasCustomAnchor:nn,onCustomAnchorAdd:reactExports.useCallback(()=>on(!0),[]),onCustomAnchorRemove:reactExports.useCallback(()=>on(!1),[]),modal:en},Hr))},B$3="PopoverTrigger",J$3=reactExports.forwardRef((Kt,Vt)=>{const{__scopePopover:Hr,...Wr}=Kt,Yr=l$1(B$3,Hr),Zr=x$2(Hr),en=d$I(Vt,Yr.triggerRef),tn=reactExports.createElement(E$l.button,e$1x({type:"button","aria-haspopup":"dialog","aria-expanded":Yr.open,"aria-controls":Yr.contentId,"data-state":w$4(Yr.open)},Wr,{ref:en,onClick:o$1f(Kt.onClick,Yr.onOpenToggle)}));return Yr.hasCustomAnchor?tn:reactExports.createElement(rt$3,e$1x({asChild:!0},Zr),tn)}),Q$3="PopoverPortal",[Ce$2,W$3]=F$3(Q$3,{forceMount:void 0}),P$2="PopoverContent",X$3=reactExports.forwardRef((Kt,Vt)=>{const Hr=W$3(P$2,Kt.__scopePopover),{forceMount:Wr=Hr.forceMount,...Yr}=Kt,Zr=l$1(P$2,Kt.__scopePopover);return reactExports.createElement(P$m,{present:Wr||Zr.open},Zr.modal?reactExports.createElement(Y$4,e$1x({},Yr,{ref:Vt})):reactExports.createElement(ee$1,e$1x({},Yr,{ref:Vt})))}),Y$4=reactExports.forwardRef((Kt,Vt)=>{const Hr=l$1(P$2,Kt.__scopePopover),Wr=reactExports.useRef(null),Yr=d$I(Vt,Wr),Zr=reactExports.useRef(!1);return reactExports.useEffect(()=>{const en=Wr.current;if(en)return E$g(en)},[]),reactExports.createElement(i$b,{as:b$r,allowPinchZoom:!0},reactExports.createElement(R$2,e$1x({},Kt,{ref:Yr,trapFocus:Hr.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:o$1f(Kt.onCloseAutoFocus,en=>{var tn;en.preventDefault(),Zr.current||(tn=Hr.triggerRef.current)===null||tn===void 0||tn.focus()}),onPointerDownOutside:o$1f(Kt.onPointerDownOutside,en=>{const tn=en.detail.originalEvent,rn=tn.button===0&&tn.ctrlKey===!0,nn=tn.button===2||rn;Zr.current=nn},{checkForDefaultPrevented:!1}),onFocusOutside:o$1f(Kt.onFocusOutside,en=>en.preventDefault(),{checkForDefaultPrevented:!1})})))}),ee$1=reactExports.forwardRef((Kt,Vt)=>{const Hr=l$1(P$2,Kt.__scopePopover),Wr=reactExports.useRef(!1),Yr=reactExports.useRef(!1);return reactExports.createElement(R$2,e$1x({},Kt,{ref:Vt,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:Zr=>{var en;if((en=Kt.onCloseAutoFocus)===null||en===void 0||en.call(Kt,Zr),!Zr.defaultPrevented){var tn;Wr.current||(tn=Hr.triggerRef.current)===null||tn===void 0||tn.focus(),Zr.preventDefault()}Wr.current=!1,Yr.current=!1},onInteractOutside:Zr=>{var en,tn;(en=Kt.onInteractOutside)===null||en===void 0||en.call(Kt,Zr),Zr.defaultPrevented||(Wr.current=!0,Zr.detail.originalEvent.type==="pointerdown"&&(Yr.current=!0));const rn=Zr.target;!((tn=Hr.triggerRef.current)===null||tn===void 0)&&tn.contains(rn)&&Zr.preventDefault(),Zr.detail.originalEvent.type==="focusin"&&Yr.current&&Zr.preventDefault()}}))}),R$2=reactExports.forwardRef((Kt,Vt)=>{const{__scopePopover:Hr,trapFocus:Wr,onOpenAutoFocus:Yr,onCloseAutoFocus:Zr,disableOutsidePointerEvents:en,onEscapeKeyDown:tn,onPointerDownOutside:rn,onFocusOutside:nn,onInteractOutside:on,...an}=Kt,$n=l$1(P$2,Hr),ln=x$2(Hr);return c$h(),reactExports.createElement(X$b,{asChild:!0,loop:!0,trapped:Wr,onMountAutoFocus:Yr,onUnmountAutoFocus:Zr},reactExports.createElement(ie$4,{asChild:!0,disableOutsidePointerEvents:en,onInteractOutside:on,onEscapeKeyDown:tn,onPointerDownOutside:rn,onFocusOutside:nn,onDismiss:()=>$n.onOpenChange(!1)},reactExports.createElement(at$3,e$1x({"data-state":w$4($n.open),role:"dialog",id:$n.contentId},ln,an,{ref:Vt,style:{...an.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))}),oe$1="PopoverClose",ce$1=reactExports.forwardRef((Kt,Vt)=>{const{__scopePopover:Hr,...Wr}=Kt,Yr=l$1(oe$1,Hr);return reactExports.createElement(E$l.button,e$1x({type:"button"},Wr,{ref:Vt,onClick:o$1f(Kt.onClick,()=>Yr.onOpenChange(!1))}))}),te$1=reactExports.forwardRef((Kt,Vt)=>{const{__scopePopover:Hr,...Wr}=Kt,Yr=x$2(Hr);return reactExports.createElement(nt$3,e$1x({},Yr,Wr,{ref:Vt}))});function w$4(Kt){return Kt?"open":"closed"}const he$1=z$2,Oe$1=J$3,_e$1=X$3,Ae=ce$1,Ee=te$1;function c$3(Kt,[Vt,Hr]){return Math.min(Hr,Math.max(Vt,Kt))}const p$4=reactExports.forwardRef((Kt,Vt)=>reactExports.createElement(E$l.span,e$1x({},Kt,{ref:Vt,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...Kt.style}}))),nt=[" ","Enter","ArrowUp","ArrowDown"],ct=[" ","Enter"],pe="Select",[fe,ue,rt]=N$n(pe),[ce,Xt]=P$n(pe,[rt,tt$2]),Ce$1=tt$2(),[st,J$2]=ce(pe),[lt,at]=ce(pe),it=Kt=>{const{__scopeSelect:Vt,children:Hr,open:Wr,defaultOpen:Yr,onOpenChange:Zr,value:en,defaultValue:tn,onValueChange:rn,dir:nn,name:on,autoComplete:an,disabled:$n,required:ln}=Kt,Hn=Ce$1(Vt),[jn,zn]=reactExports.useState(null),[Wn,ei]=reactExports.useState(null),[$i,Mi]=reactExports.useState(!1),Ni=i$L(nn),[Ts=!1,ps]=g$F({prop:Wr,defaultProp:Yr,onChange:Zr}),[$s,Ws]=g$F({prop:en,defaultProp:tn,onChange:rn}),Hs=reactExports.useRef(null),js=jn?!!jn.closest("form"):!0,[zs,Xs]=reactExports.useState(new Set),ia=Array.from(zs).map(Qs=>Qs.props.value).join(";");return reactExports.createElement(ot$1,Hn,reactExports.createElement(st,{required:ln,scope:Vt,trigger:jn,onTriggerChange:zn,valueNode:Wn,onValueNodeChange:ei,valueNodeHasChildren:$i,onValueNodeHasChildrenChange:Mi,contentId:s$C(),value:$s,onValueChange:Ws,open:Ts,onOpenChange:ps,dir:Ni,triggerPointerDownPosRef:Hs,disabled:$n},reactExports.createElement(fe.Provider,{scope:Vt},reactExports.createElement(lt,{scope:Kt.__scopeSelect,onNativeOptionAdd:reactExports.useCallback(Qs=>{Xs(Zs=>new Set(Zs).add(Qs))},[]),onNativeOptionRemove:reactExports.useCallback(Qs=>{Xs(Zs=>{const Gs=new Set(Zs);return Gs.delete(Qs),Gs})},[])},Hr)),js?reactExports.createElement(Ve$1,{key:ia,"aria-hidden":!0,required:ln,tabIndex:-1,name:on,autoComplete:an,value:$s,onChange:Qs=>Ws(Qs.target.value),disabled:$n},$s===void 0?reactExports.createElement("option",{value:""}):null,Array.from(zs)):null))},dt="SelectTrigger",pt=reactExports.forwardRef((Kt,Vt)=>{const{__scopeSelect:Hr,disabled:Wr=!1,...Yr}=Kt,Zr=Ce$1(Hr),en=J$2(dt,Hr),tn=en.disabled||Wr,rn=d$I(Vt,en.onTriggerChange),nn=ue(Hr),[on,an,$n]=He$1(Hn=>{const jn=nn().filter(ei=>!ei.disabled),zn=jn.find(ei=>ei.value===en.value),Wn=Be$1(jn,Hn,zn);Wn!==void 0&&en.onValueChange(Wn.value)}),ln=()=>{tn||(en.onOpenChange(!0),$n())};return reactExports.createElement(rt$3,e$1x({asChild:!0},Zr),reactExports.createElement(E$l.button,e$1x({type:"button",role:"combobox","aria-controls":en.contentId,"aria-expanded":en.open,"aria-required":en.required,"aria-autocomplete":"none",dir:en.dir,"data-state":en.open?"open":"closed",disabled:tn,"data-disabled":tn?"":void 0,"data-placeholder":Le(en.value)?"":void 0},Yr,{ref:rn,onClick:o$1f(Yr.onClick,Hn=>{Hn.currentTarget.focus()}),onPointerDown:o$1f(Yr.onPointerDown,Hn=>{const jn=Hn.target;jn.hasPointerCapture(Hn.pointerId)&&jn.releasePointerCapture(Hn.pointerId),Hn.button===0&&Hn.ctrlKey===!1&&(ln(),en.triggerPointerDownPosRef.current={x:Math.round(Hn.pageX),y:Math.round(Hn.pageY)},Hn.preventDefault())}),onKeyDown:o$1f(Yr.onKeyDown,Hn=>{const jn=on.current!=="";!(Hn.ctrlKey||Hn.altKey||Hn.metaKey)&&Hn.key.length===1&&an(Hn.key),!(jn&&Hn.key===" ")&&nt.includes(Hn.key)&&(ln(),Hn.preventDefault())})})))}),ne$1="SelectContent",ut=reactExports.forwardRef((Kt,Vt)=>{const Hr=J$2(ne$1,Kt.__scopeSelect),[Wr,Yr]=reactExports.useState();if(e$1w(()=>{Yr(new DocumentFragment)},[]),!Hr.open){const Zr=Wr;return Zr?reactDomExports.createPortal(reactExports.createElement(Ne,{scope:Kt.__scopeSelect},reactExports.createElement(fe.Slot,{scope:Kt.__scopeSelect},reactExports.createElement("div",null,Kt.children))),Zr):null}return reactExports.createElement(mt,e$1x({},Kt,{ref:Vt}))}),K$2=10,[Ne,Q$2]=ce(ne$1),mt=reactExports.forwardRef((Kt,Vt)=>{const{__scopeSelect:Hr,position:Wr="item-aligned",onCloseAutoFocus:Yr,onEscapeKeyDown:Zr,onPointerDownOutside:en,side:tn,sideOffset:rn,align:nn,alignOffset:on,arrowPadding:an,collisionBoundary:$n,collisionPadding:ln,sticky:Hn,hideWhenDetached:jn,avoidCollisions:zn,...Wn}=Kt,ei=J$2(ne$1,Hr),[$i,Mi]=reactExports.useState(null),[Ni,Ts]=reactExports.useState(null),ps=d$I(Vt,rc=>Mi(rc)),[$s,Ws]=reactExports.useState(null),[Hs,js]=reactExports.useState(null),zs=ue(Hr),[Xs,ia]=reactExports.useState(!1),Qs=reactExports.useRef(!1);reactExports.useEffect(()=>{if($i)return E$g($i)},[$i]),c$h();const Zs=reactExports.useCallback(rc=>{const[uc,...pc]=zs().map(Ec=>Ec.ref.current),[cc]=pc.slice(-1),$c=document.activeElement;for(const Ec of rc)if(Ec===$c||(Ec==null||Ec.scrollIntoView({block:"nearest"}),Ec===uc&&Ni&&(Ni.scrollTop=0),Ec===cc&&Ni&&(Ni.scrollTop=Ni.scrollHeight),Ec==null||Ec.focus(),document.activeElement!==$c))return},[zs,Ni]),Gs=reactExports.useCallback(()=>Zs([$s,$i]),[Zs,$s,$i]);reactExports.useEffect(()=>{Xs&&Gs()},[Xs,Gs]);const{onOpenChange:Hl,triggerPointerDownPosRef:Js}=ei;reactExports.useEffect(()=>{if($i){let rc={x:0,y:0};const uc=cc=>{var $c,Ec,Zi,qs;rc={x:Math.abs(Math.round(cc.pageX)-(($c=(Ec=Js.current)===null||Ec===void 0?void 0:Ec.x)!==null&&$c!==void 0?$c:0)),y:Math.abs(Math.round(cc.pageY)-((Zi=(qs=Js.current)===null||qs===void 0?void 0:qs.y)!==null&&Zi!==void 0?Zi:0))}},pc=cc=>{rc.x<=10&&rc.y<=10?cc.preventDefault():$i.contains(cc.target)||Hl(!1),document.removeEventListener("pointermove",uc),Js.current=null};return Js.current!==null&&(document.addEventListener("pointermove",uc),document.addEventListener("pointerup",pc,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",uc),document.removeEventListener("pointerup",pc,{capture:!0})}}},[$i,Hl,Js]),reactExports.useEffect(()=>{const rc=()=>Hl(!1);return window.addEventListener("blur",rc),window.addEventListener("resize",rc),()=>{window.removeEventListener("blur",rc),window.removeEventListener("resize",rc)}},[Hl]);const[sa,Ca]=He$1(rc=>{const uc=zs().filter($c=>!$c.disabled),pc=uc.find($c=>$c.ref.current===document.activeElement),cc=Be$1(uc,rc,pc);cc&&setTimeout(()=>cc.ref.current.focus())}),tc=reactExports.useCallback((rc,uc,pc)=>{const cc=!Qs.current&&!pc;(ei.value!==void 0&&ei.value===uc||cc)&&(Ws(rc),cc&&(Qs.current=!0))},[ei.value]),zl=reactExports.useCallback(()=>$i==null?void 0:$i.focus(),[$i]),ec=reactExports.useCallback((rc,uc,pc)=>{const cc=!Qs.current&&!pc;(ei.value!==void 0&&ei.value===uc||cc)&&js(rc)},[ei.value]),sc=Wr==="popper"?Te:$t,ac=sc===Te?{side:tn,sideOffset:rn,align:nn,alignOffset:on,arrowPadding:an,collisionBoundary:$n,collisionPadding:ln,sticky:Hn,hideWhenDetached:jn,avoidCollisions:zn}:{};return reactExports.createElement(Ne,{scope:Hr,content:$i,viewport:Ni,onViewportChange:Ts,itemRefCallback:tc,selectedItem:$s,onItemLeave:zl,itemTextRefCallback:ec,focusSelectedItem:Gs,selectedItemText:Hs,position:Wr,isPositioned:Xs,searchRef:sa},reactExports.createElement(i$b,{as:b$r,allowPinchZoom:!0},reactExports.createElement(X$b,{asChild:!0,trapped:ei.open,onMountAutoFocus:rc=>{rc.preventDefault()},onUnmountAutoFocus:o$1f(Yr,rc=>{var uc;(uc=ei.trigger)===null||uc===void 0||uc.focus({preventScroll:!0}),rc.preventDefault()})},reactExports.createElement(ie$4,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:Zr,onPointerDownOutside:en,onFocusOutside:rc=>rc.preventDefault(),onDismiss:()=>ei.onOpenChange(!1)},reactExports.createElement(sc,e$1x({role:"listbox",id:ei.contentId,"data-state":ei.open?"open":"closed",dir:ei.dir,onContextMenu:rc=>rc.preventDefault()},Wn,ac,{onPlaced:()=>ia(!0),ref:ps,style:{display:"flex",flexDirection:"column",outline:"none",...Wn.style},onKeyDown:o$1f(Wn.onKeyDown,rc=>{const uc=rc.ctrlKey||rc.altKey||rc.metaKey;if(rc.key==="Tab"&&rc.preventDefault(),!uc&&rc.key.length===1&&Ca(rc.key),["ArrowUp","ArrowDown","Home","End"].includes(rc.key)){let pc=zs().filter(cc=>!cc.disabled).map(cc=>cc.ref.current);if(["ArrowUp","End"].includes(rc.key)&&(pc=pc.slice().reverse()),["ArrowUp","ArrowDown"].includes(rc.key)){const cc=rc.target,$c=pc.indexOf(cc);pc=pc.slice($c+1)}setTimeout(()=>Zs(pc)),rc.preventDefault()}})}))))))}),$t=reactExports.forwardRef((Kt,Vt)=>{const{__scopeSelect:Hr,onPlaced:Wr,...Yr}=Kt,Zr=J$2(ne$1,Hr),en=Q$2(ne$1,Hr),[tn,rn]=reactExports.useState(null),[nn,on]=reactExports.useState(null),an=d$I(Vt,ps=>on(ps)),$n=ue(Hr),ln=reactExports.useRef(!1),Hn=reactExports.useRef(!0),{viewport:jn,selectedItem:zn,selectedItemText:Wn,focusSelectedItem:ei}=en,$i=reactExports.useCallback(()=>{if(Zr.trigger&&Zr.valueNode&&tn&&nn&&jn&&zn&&Wn){const ps=Zr.trigger.getBoundingClientRect(),$s=nn.getBoundingClientRect(),Ws=Zr.valueNode.getBoundingClientRect(),Hs=Wn.getBoundingClientRect();if(Zr.dir!=="rtl"){const cc=Hs.left-$s.left,$c=Ws.left-cc,Ec=ps.left-$c,Zi=ps.width+Ec,qs=Math.max(Zi,$s.width),ql=window.innerWidth-K$2,Vl=c$3($c,[K$2,ql-qs]);tn.style.minWidth=Zi+"px",tn.style.left=Vl+"px"}else{const cc=$s.right-Hs.right,$c=window.innerWidth-Ws.right-cc,Ec=window.innerWidth-ps.right-$c,Zi=ps.width+Ec,qs=Math.max(Zi,$s.width),ql=window.innerWidth-K$2,Vl=c$3($c,[K$2,ql-qs]);tn.style.minWidth=Zi+"px",tn.style.right=Vl+"px"}const js=$n(),zs=window.innerHeight-K$2*2,Xs=jn.scrollHeight,ia=window.getComputedStyle(nn),Qs=parseInt(ia.borderTopWidth,10),Zs=parseInt(ia.paddingTop,10),Gs=parseInt(ia.borderBottomWidth,10),Hl=parseInt(ia.paddingBottom,10),Js=Qs+Zs+Xs+Hl+Gs,sa=Math.min(zn.offsetHeight*5,Js),Ca=window.getComputedStyle(jn),tc=parseInt(Ca.paddingTop,10),zl=parseInt(Ca.paddingBottom,10),ec=ps.top+ps.height/2-K$2,sc=zs-ec,ac=zn.offsetHeight/2,rc=zn.offsetTop+ac,uc=Qs+Zs+rc,pc=Js-uc;if(uc<=ec){const cc=zn===js[js.length-1].ref.current;tn.style.bottom="0px";const $c=nn.clientHeight-jn.offsetTop-jn.offsetHeight,Ec=Math.max(sc,ac+(cc?zl:0)+$c+Gs),Zi=uc+Ec;tn.style.height=Zi+"px"}else{const cc=zn===js[0].ref.current;tn.style.top="0px";const $c=Math.max(ec,Qs+jn.offsetTop+(cc?tc:0)+ac)+pc;tn.style.height=$c+"px",jn.scrollTop=uc-ec+jn.offsetTop}tn.style.margin=`${K$2}px 0`,tn.style.minHeight=sa+"px",tn.style.maxHeight=zs+"px",Wr==null||Wr(),requestAnimationFrame(()=>ln.current=!0)}},[$n,Zr.trigger,Zr.valueNode,tn,nn,jn,zn,Wn,Zr.dir,Wr]);e$1w(()=>$i(),[$i]);const[Mi,Ni]=reactExports.useState();e$1w(()=>{nn&&Ni(window.getComputedStyle(nn).zIndex)},[nn]);const Ts=reactExports.useCallback(ps=>{ps&&Hn.current===!0&&($i(),ei==null||ei(),Hn.current=!1)},[$i,ei]);return reactExports.createElement(vt,{scope:Hr,contentWrapper:tn,shouldExpandOnScrollRef:ln,onScrollButtonChange:Ts},reactExports.createElement("div",{ref:rn,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Mi}},reactExports.createElement(E$l.div,e$1x({},Yr,{ref:an,style:{boxSizing:"border-box",maxHeight:"100%",...Yr.style}}))))}),Te=reactExports.forwardRef((Kt,Vt)=>{const{__scopeSelect:Hr,align:Wr="start",collisionPadding:Yr=K$2,...Zr}=Kt,en=Ce$1(Hr);return reactExports.createElement(at$3,e$1x({},en,Zr,{ref:Vt,align:Wr,collisionPadding:Yr,style:{boxSizing:"border-box",...Zr.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[vt,ye]=ce(ne$1,{}),ht="SelectGroup",[gt,xt]=ce(ht),St="SelectLabel",wt=reactExports.forwardRef((Kt,Vt)=>{const{__scopeSelect:Hr,...Wr}=Kt,Yr=xt(St,Hr);return reactExports.createElement(E$l.div,e$1x({id:Yr.id},Wr,{ref:Vt}))}),Se$1="SelectItem",[bt,Me]=ce(Se$1),Ct=reactExports.forwardRef((Kt,Vt)=>{const{__scopeSelect:Hr,value:Wr,disabled:Yr=!1,textValue:Zr,...en}=Kt,tn=J$2(Se$1,Hr),rn=Q$2(Se$1,Hr),nn=tn.value===Wr,[on,an]=reactExports.useState(Zr??""),[$n,ln]=reactExports.useState(!1),Hn=d$I(Vt,Wn=>{var ei;return(ei=rn.itemRefCallback)===null||ei===void 0?void 0:ei.call(rn,Wn,Wr,Yr)}),jn=s$C(),zn=()=>{Yr||(tn.onValueChange(Wr),tn.onOpenChange(!1))};if(Wr==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return reactExports.createElement(bt,{scope:Hr,value:Wr,disabled:Yr,textId:jn,isSelected:nn,onItemTextChange:reactExports.useCallback(Wn=>{an(ei=>{var $i;return ei||(($i=Wn==null?void 0:Wn.textContent)!==null&&$i!==void 0?$i:"").trim()})},[])},reactExports.createElement(fe.ItemSlot,{scope:Hr,value:Wr,disabled:Yr,textValue:on},reactExports.createElement(E$l.div,e$1x({role:"option","aria-labelledby":jn,"data-highlighted":$n?"":void 0,"aria-selected":nn&&$n,"data-state":nn?"checked":"unchecked","aria-disabled":Yr||void 0,"data-disabled":Yr?"":void 0,tabIndex:Yr?void 0:-1},en,{ref:Hn,onFocus:o$1f(en.onFocus,()=>ln(!0)),onBlur:o$1f(en.onBlur,()=>ln(!1)),onPointerUp:o$1f(en.onPointerUp,zn),onPointerMove:o$1f(en.onPointerMove,Wn=>{if(Yr){var ei;(ei=rn.onItemLeave)===null||ei===void 0||ei.call(rn)}else Wn.currentTarget.focus({preventScroll:!0})}),onPointerLeave:o$1f(en.onPointerLeave,Wn=>{if(Wn.currentTarget===document.activeElement){var ei;(ei=rn.onItemLeave)===null||ei===void 0||ei.call(rn)}}),onKeyDown:o$1f(en.onKeyDown,Wn=>{var ei;((ei=rn.searchRef)===null||ei===void 0?void 0:ei.current)!==""&&Wn.key===" "||(ct.includes(Wn.key)&&zn(),Wn.key===" "&&Wn.preventDefault())})}))))});function Le(Kt){return Kt===""||Kt===void 0}const Ve$1=reactExports.forwardRef((Kt,Vt)=>{const{value:Hr,...Wr}=Kt,Yr=reactExports.useRef(null),Zr=d$I(Vt,Yr),en=c$I(Hr);return reactExports.useEffect(()=>{const tn=Yr.current,rn=window.HTMLSelectElement.prototype,nn=Object.getOwnPropertyDescriptor(rn,"value").set;if(en!==Hr&&nn){const on=new Event("change",{bubbles:!0});nn.call(tn,Hr),tn.dispatchEvent(on)}},[en,Hr]),reactExports.createElement(p$4,{asChild:!0},reactExports.createElement("select",e$1x({},Wr,{ref:Zr,defaultValue:Hr})))});Ve$1.displayName="BubbleSelect";function He$1(Kt){const Vt=o$1e(Kt),Hr=reactExports.useRef(""),Wr=reactExports.useRef(0),Yr=reactExports.useCallback(en=>{const tn=Hr.current+en;Vt(tn),function rn(nn){Hr.current=nn,window.clearTimeout(Wr.current),nn!==""&&(Wr.current=window.setTimeout(()=>rn(""),1e3))}(tn)},[Vt]),Zr=reactExports.useCallback(()=>{Hr.current="",window.clearTimeout(Wr.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(Wr.current),[]),[Hr,Yr,Zr]}function Be$1(Kt,Vt,Hr){const Wr=Vt.length>1&&Array.from(Vt).every(tn=>tn===Vt[0])?Vt[0]:Vt,Yr=Hr?Kt.indexOf(Hr):-1;let Zr=It(Kt,Math.max(Yr,0));Wr.length===1&&(Zr=Zr.filter(tn=>tn!==Hr));const en=Zr.find(tn=>tn.textValue.toLowerCase().startsWith(Wr.toLowerCase()));return en!==Hr?en:void 0}function It(Kt,Vt){return Kt.map((Hr,Wr)=>Kt[(Vt+Wr)%Kt.length])}const so=it,lo=pt,ao=ut,io=wt,po=Ct;var e$4={exports:{}};(function(module){//! openseadragon 2.4.2
//! Built on 2020-03-05
//! Git commit: v2.4.2-0-c450749
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
function OpenSeadragon(Kt){return new OpenSeadragon.Viewer(Kt)}(function(Kt){Kt.version={versionStr:"2.4.2",major:parseInt("2",10),minor:parseInt("4",10),revision:parseInt("2",10)};var Vt={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},Hr=Object.prototype.toString,Wr=Object.prototype.hasOwnProperty;Kt.isFunction=function(Yr){return Kt.type(Yr)==="function"},Kt.isArray=Array.isArray||function(Yr){return Kt.type(Yr)==="array"},Kt.isWindow=function(Yr){return Yr&&typeof Yr=="object"&&"setInterval"in Yr},Kt.type=function(Yr){return Yr==null?String(Yr):Vt[Hr.call(Yr)]||"object"},Kt.isPlainObject=function(Yr){if(!Yr||OpenSeadragon.type(Yr)!=="object"||Yr.nodeType||Kt.isWindow(Yr)||Yr.constructor&&!Wr.call(Yr,"constructor")&&!Wr.call(Yr.constructor.prototype,"isPrototypeOf"))return!1;var Zr;for(var en in Yr)Zr=en;return Zr===void 0||Wr.call(Yr,Zr)},Kt.isEmptyObject=function(Yr){for(var Zr in Yr)return!1;return!0},Kt.freezeObject=function(Yr){return Object.freeze?Kt.freezeObject=Object.freeze:Kt.freezeObject=function(Zr){return Zr},Kt.freezeObject(Yr)},Kt.supportsCanvas=function(){var Yr=document.createElement("canvas");return!!(Kt.isFunction(Yr.getContext)&&Yr.getContext("2d"))}(),Kt.isCanvasTainted=function(Yr){var Zr=!1;try{Yr.getContext("2d").getImageData(0,0,1,1)}catch{Zr=!0}return Zr},Kt.pixelDensityRatio=function(){if(Kt.supportsCanvas){var Yr=document.createElement("canvas").getContext("2d"),Zr=window.devicePixelRatio||1,en=Yr.webkitBackingStorePixelRatio||Yr.mozBackingStorePixelRatio||Yr.msBackingStorePixelRatio||Yr.oBackingStorePixelRatio||Yr.backingStorePixelRatio||1;return Math.max(Zr,1)/en}else return 1}()})(OpenSeadragon),function($){$.extend=function(){var Kt,Vt,Hr,Wr,Yr,Zr,en=arguments[0]||{},tn=arguments.length,rn=!1,nn=1;for(typeof en=="boolean"&&(rn=en,en=arguments[1]||{},nn=2),typeof en!="object"&&!OpenSeadragon.isFunction(en)&&(en={}),tn===nn&&(en=this,--nn);nn<tn;nn++)if(Kt=arguments[nn],Kt!==null||Kt!==void 0)for(Vt in Kt)Hr=en[Vt],Wr=Kt[Vt],en!==Wr&&(rn&&Wr&&(OpenSeadragon.isPlainObject(Wr)||(Yr=OpenSeadragon.isArray(Wr)))?(Yr?(Yr=!1,Zr=Hr&&OpenSeadragon.isArray(Hr)?Hr:[]):Zr=Hr&&OpenSeadragon.isPlainObject(Hr)?Hr:{},en[Vt]=OpenSeadragon.extend(rn,Zr,Wr)):Wr!==void 0&&(en[Vt]=Wr));return en};var isIOSDevice=function(){if(typeof navigator!="object")return!1;var Kt=navigator.userAgent;return typeof Kt!="string"?!1:Kt.indexOf("iPhone")!==-1||Kt.indexOf("iPad")!==-1||Kt.indexOf("iPod")!==-1};$.extend($,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:isIOSDevice(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"]},SIGNAL:"----seadragon----",delegate:function(Kt,Vt){return function(){var Hr=arguments;return Hr===void 0&&(Hr=[]),Vt.apply(Kt,Hr)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(Kt){return typeof Kt=="string"&&(Kt=document.getElementById(Kt)),Kt},getElementPosition:function(Kt){var Vt=new $.Point,Hr,Wr;for(Kt=$.getElement(Kt),Hr=$.getElementStyle(Kt).position=="fixed",Wr=getOffsetParent(Kt,Hr);Wr;)Vt.x+=Kt.offsetLeft,Vt.y+=Kt.offsetTop,Hr&&(Vt=Vt.plus($.getPageScroll())),Kt=Wr,Hr=$.getElementStyle(Kt).position=="fixed",Wr=getOffsetParent(Kt,Hr);return Vt},getElementOffset:function(Kt){Kt=$.getElement(Kt);var Vt=Kt&&Kt.ownerDocument,Hr,Wr,Yr={top:0,left:0};return Vt?(Hr=Vt.documentElement,typeof Kt.getBoundingClientRect<"u"&&(Yr=Kt.getBoundingClientRect()),Wr=Vt==Vt.window?Vt:Vt.nodeType===9?Vt.defaultView||Vt.parentWindow:!1,new $.Point(Yr.left+(Wr.pageXOffset||Hr.scrollLeft)-(Hr.clientLeft||0),Yr.top+(Wr.pageYOffset||Hr.scrollTop)-(Hr.clientTop||0))):new $.Point},getElementSize:function(Kt){return Kt=$.getElement(Kt),new $.Point(Kt.clientWidth,Kt.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(Kt){return Kt=$.getElement(Kt),Kt.currentStyle}:function(Kt){return Kt=$.getElement(Kt),window.getComputedStyle(Kt,"")},getCssPropertyWithVendorPrefix:function(Kt){var Vt={};return $.getCssPropertyWithVendorPrefix=function(Hr){if(Vt[Hr]!==void 0)return Vt[Hr];var Wr=document.createElement("div").style,Yr=null;if(Wr[Hr]!==void 0)Yr=Hr;else for(var Zr=["Webkit","Moz","MS","O","webkit","moz","ms","o"],en=$.capitalizeFirstLetter(Hr),tn=0;tn<Zr.length;tn++){var rn=Zr[tn]+en;if(Wr[rn]!==void 0){Yr=rn;break}}return Vt[Hr]=Yr,Yr},$.getCssPropertyWithVendorPrefix(Kt)},capitalizeFirstLetter:function(Kt){return Kt.charAt(0).toUpperCase()+Kt.slice(1)},positiveModulo:function(Kt,Vt){var Hr=Kt%Vt;return Hr<0&&(Hr+=Vt),Hr},pointInElement:function(Kt,Vt){Kt=$.getElement(Kt);var Hr=$.getElementOffset(Kt),Wr=$.getElementSize(Kt);return Vt.x>=Hr.x&&Vt.x<Hr.x+Wr.x&&Vt.y<Hr.y+Wr.y&&Vt.y>=Hr.y},getEvent:function(Kt){return Kt?$.getEvent=function(Vt){return Vt}:$.getEvent=function(){return window.event},$.getEvent(Kt)},getMousePosition:function(Kt){if(typeof Kt.pageX=="number")$.getMousePosition=function(Vt){var Hr=new $.Point;return Vt=$.getEvent(Vt),Hr.x=Vt.pageX,Hr.y=Vt.pageY,Hr};else if(typeof Kt.clientX=="number")$.getMousePosition=function(Vt){var Hr=new $.Point;return Vt=$.getEvent(Vt),Hr.x=Vt.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,Hr.y=Vt.clientY+document.body.scrollTop+document.documentElement.scrollTop,Hr};else throw new Error("Unknown event mouse position, no known technique.");return $.getMousePosition(Kt)},getPageScroll:function(){var Kt=document.documentElement||{},Vt=document.body||{};if(typeof window.pageXOffset=="number")$.getPageScroll=function(){return new $.Point(window.pageXOffset,window.pageYOffset)};else if(Vt.scrollLeft||Vt.scrollTop)$.getPageScroll=function(){return new $.Point(document.body.scrollLeft,document.body.scrollTop)};else if(Kt.scrollLeft||Kt.scrollTop)$.getPageScroll=function(){return new $.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)};else return new $.Point(0,0);return $.getPageScroll()},setPageScroll:function(Kt){if(typeof window.scrollTo<"u")$.setPageScroll=function(Wr){window.scrollTo(Wr.x,Wr.y)};else{var Vt=$.getPageScroll();if(Vt.x===Kt.x&&Vt.y===Kt.y)return;document.body.scrollLeft=Kt.x,document.body.scrollTop=Kt.y;var Hr=$.getPageScroll();if(Hr.x!==Vt.x&&Hr.y!==Vt.y){$.setPageScroll=function(Wr){document.body.scrollLeft=Wr.x,document.body.scrollTop=Wr.y};return}if(document.documentElement.scrollLeft=Kt.x,document.documentElement.scrollTop=Kt.y,Hr=$.getPageScroll(),Hr.x!==Vt.x&&Hr.y!==Vt.y){$.setPageScroll=function(Wr){document.documentElement.scrollLeft=Wr.x,document.documentElement.scrollTop=Wr.y};return}$.setPageScroll=function(Wr){}}return $.setPageScroll(Kt)},getWindowSize:function(){var Kt=document.documentElement||{},Vt=document.body||{};if(typeof window.innerWidth=="number")$.getWindowSize=function(){return new $.Point(window.innerWidth,window.innerHeight)};else if(Kt.clientWidth||Kt.clientHeight)$.getWindowSize=function(){return new $.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else if(Vt.clientWidth||Vt.clientHeight)$.getWindowSize=function(){return new $.Point(document.body.clientWidth,document.body.clientHeight)};else throw new Error("Unknown window size, no known technique.");return $.getWindowSize()},makeCenteredNode:function(Kt){Kt=$.getElement(Kt);var Vt=[$.makeNeutralElement("div"),$.makeNeutralElement("div"),$.makeNeutralElement("div")];return $.extend(Vt[0].style,{display:"table",height:"100%",width:"100%"}),$.extend(Vt[1].style,{display:"table-row"}),$.extend(Vt[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),Vt[0].appendChild(Vt[1]),Vt[1].appendChild(Vt[2]),Vt[2].appendChild(Kt),Vt[0]},makeNeutralElement:function(Kt){var Vt=document.createElement(Kt),Hr=Vt.style;return Hr.background="transparent none",Hr.border="none",Hr.margin="0px",Hr.padding="0px",Hr.position="static",Vt},now:function(){return Date.now?$.now=Date.now:$.now=function(){return new Date().getTime()},$.now()},makeTransparentImage:function(Kt){return $.makeTransparentImage=function(Vt){var Hr=$.makeNeutralElement("img");return Hr.src=Vt,Hr},$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<7&&($.makeTransparentImage=function(Vt){var Hr=$.makeNeutralElement("img"),Wr=null;return Wr=$.makeNeutralElement("span"),Wr.style.display="inline-block",Hr.onload=function(){Wr.style.width=Wr.style.width||Hr.width+"px",Wr.style.height=Wr.style.height||Hr.height+"px",Hr.onload=null,Hr=null},Hr.src=Vt,Wr.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+Vt+"', sizingMethod='scale')",Wr}),$.makeTransparentImage(Kt)},setElementOpacity:function(Kt,Vt,Hr){var Wr,Yr;Kt=$.getElement(Kt),Hr&&!$.Browser.alpha&&(Vt=Math.round(Vt)),$.Browser.opacity?Kt.style.opacity=Vt<1?Vt:"":Vt<1?(Wr=Math.round(100*Vt),Yr="alpha(opacity="+Wr+")",Kt.style.filter=Yr):Kt.style.filter=""},setElementTouchActionNone:function(Kt){Kt=$.getElement(Kt),typeof Kt.style.touchAction<"u"?Kt.style.touchAction="none":typeof Kt.style.msTouchAction<"u"&&(Kt.style.msTouchAction="none")},addClass:function(Kt,Vt){Kt=$.getElement(Kt),Kt.className?(" "+Kt.className+" ").indexOf(" "+Vt+" ")===-1&&(Kt.className+=" "+Vt):Kt.className=Vt},indexOf:function(Kt,Vt,Hr){return Array.prototype.indexOf?this.indexOf=function(Wr,Yr,Zr){return Wr.indexOf(Yr,Zr)}:this.indexOf=function(Wr,Yr,Zr){var en,tn=Zr||0,rn;if(!Wr)throw new TypeError;if(rn=Wr.length,rn===0||tn>=rn)return-1;for(tn<0&&(tn=rn-Math.abs(tn)),en=tn;en<rn;en++)if(Wr[en]===Yr)return en;return-1},this.indexOf(Kt,Vt,Hr)},removeClass:function(Kt,Vt){var Hr,Wr=[],Yr;for(Kt=$.getElement(Kt),Hr=Kt.className.split(/\s+/),Yr=0;Yr<Hr.length;Yr++)Hr[Yr]&&Hr[Yr]!==Vt&&Wr.push(Hr[Yr]);Kt.className=Wr.join(" ")},addEvent:function(){if(window.addEventListener)return function(Kt,Vt,Hr,Wr){Kt=$.getElement(Kt),Kt.addEventListener(Vt,Hr,Wr)};if(window.attachEvent)return function(Kt,Vt,Hr,Wr){Kt=$.getElement(Kt),Kt.attachEvent("on"+Vt,Hr)};throw new Error("No known event model.")}(),removeEvent:function(){if(window.removeEventListener)return function(Kt,Vt,Hr,Wr){Kt=$.getElement(Kt),Kt.removeEventListener(Vt,Hr,Wr)};if(window.detachEvent)return function(Kt,Vt,Hr,Wr){Kt=$.getElement(Kt),Kt.detachEvent("on"+Vt,Hr)};throw new Error("No known event model.")}(),cancelEvent:function(Kt){Kt=$.getEvent(Kt),Kt.preventDefault?$.cancelEvent=function(Vt){Vt.preventDefault()}:$.cancelEvent=function(Vt){Vt=$.getEvent(Vt),Vt.cancel=!0,Vt.returnValue=!1},$.cancelEvent(Kt)},stopEvent:function(Kt){Kt=$.getEvent(Kt),Kt.stopPropagation?$.stopEvent=function(Vt){Vt.stopPropagation()}:$.stopEvent=function(Vt){Vt=$.getEvent(Vt),Vt.cancelBubble=!0},$.stopEvent(Kt)},createCallback:function(Kt,Vt){var Hr=[],Wr;for(Wr=2;Wr<arguments.length;Wr++)Hr.push(arguments[Wr]);return function(){var Yr=Hr.concat([]),Zr;for(Zr=0;Zr<arguments.length;Zr++)Yr.push(arguments[Zr]);return Vt.apply(Kt,Yr)}},getUrlParameter:function(Kt){var Vt=URLPARAMS[Kt];return Vt||null},getUrlProtocol:function(Kt){var Vt=Kt.match(/^([a-z]+:)\/\//i);return Vt===null?window.location.protocol:Vt[1].toLowerCase()},createAjaxRequest:function(Kt){var Vt;try{Vt=!!new ActiveXObject("Microsoft.XMLHTTP")}catch{Vt=!1}if(Vt)window.XMLHttpRequest?$.createAjaxRequest=function(Hr){return Hr?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:$.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else if(window.XMLHttpRequest)$.createAjaxRequest=function(){return new XMLHttpRequest};else throw new Error("Browser doesn't support XMLHttpRequest.");return $.createAjaxRequest(Kt)},makeAjaxRequest:function(Kt,Vt,Hr){var Wr,Yr,Zr;$.isPlainObject(Kt)&&(Vt=Kt.success,Hr=Kt.error,Wr=Kt.withCredentials,Yr=Kt.headers,Zr=Kt.responseType||null,Kt=Kt.url);var en=$.getUrlProtocol(Kt),tn=$.createAjaxRequest(en==="file:");if(!$.isFunction(Vt))throw new Error("makeAjaxRequest requires a success callback");tn.onreadystatechange=function(){tn.readyState==4&&(tn.onreadystatechange=function(){},tn.status>=200&&tn.status<300||tn.status===0&&en!=="http:"&&en!=="https:"?Vt(tn):($.console.log("AJAX request returned %d: %s",tn.status,Kt),$.isFunction(Hr)&&Hr(tn)))};try{if(tn.open("GET",Kt,!0),Zr&&(tn.responseType=Zr),Yr)for(var rn in Yr)Object.prototype.hasOwnProperty.call(Yr,rn)&&Yr[rn]&&tn.setRequestHeader(rn,Yr[rn]);Wr&&(tn.withCredentials=!0),tn.send(null)}catch($n){var nn=$n.message,on=$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<10;if(on&&typeof $n.number<"u"&&$n.number==-2147024891&&(nn+=`
See http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain`),$.console.log("%s while making AJAX request: %s",$n.name,nn),tn.onreadystatechange=function(){},window.XDomainRequest){var an=new window.XDomainRequest;if(an){an.onload=function(ln){$.isFunction(Vt)&&Vt({responseText:an.responseText,status:200,statusText:"OK"})},an.onerror=function(ln){$.isFunction(Hr)&&Hr({responseText:an.responseText,status:444,statusText:"An error happened. Due to an XDomainRequest deficiency we can not extract any information about this error. Upgrade your browser."})};try{an.open("GET",Kt),an.send()}catch{$.isFunction(Hr)&&Hr(tn,$n)}}}else $.isFunction(Hr)&&Hr(tn,$n)}return tn},jsonp:function(Kt){var Vt,Hr=Kt.url,Wr=document.head||document.getElementsByTagName("head")[0]||document.documentElement,Yr=Kt.callbackName||"openseadragon"+$.now(),Zr=window[Yr],en="$1"+Yr+"$2",tn=Kt.param||"callback",rn=Kt.callback;Hr=Hr.replace(/(\=)\?(&|$)|\?\?/i,en),Hr+=(/\?/.test(Hr)?"&":"?")+tn+"="+Yr,window[Yr]=function(nn){if(Zr)window[Yr]=Zr;else try{delete window[Yr]}catch{}rn&&$.isFunction(rn)&&rn(nn)},Vt=document.createElement("script"),(Kt.async!==void 0||Kt.async!==!1)&&(Vt.async="async"),Kt.scriptCharset&&(Vt.charset=Kt.scriptCharset),Vt.src=Hr,Vt.onload=Vt.onreadystatechange=function(nn,on){(on||!Vt.readyState||/loaded|complete/.test(Vt.readyState))&&(Vt.onload=Vt.onreadystatechange=null,Wr&&Vt.parentNode&&Wr.removeChild(Vt),Vt=void 0)},Wr.insertBefore(Vt,Wr.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(Kt){if(window.DOMParser)$.parseXml=function(Vt){var Hr=null,Wr;return Wr=new DOMParser,Hr=Wr.parseFromString(Vt,"text/xml"),Hr};else if(window.ActiveXObject)$.parseXml=function(Vt){var Hr=null;return Hr=new ActiveXObject("Microsoft.XMLDOM"),Hr.async=!1,Hr.loadXML(Vt),Hr};else throw new Error("Browser doesn't support XML DOM.");return $.parseXml(Kt)},parseJSON:function(string){return window.JSON&&window.JSON.parse?$.parseJSON=window.JSON.parse:$.parseJSON=function(string){return eval("("+string+")")},$.parseJSON(string)},imageFormatSupported:function(Kt){return Kt=Kt||"",!!FILEFORMATS[Kt.toLowerCase()]}});var nullfunction=function(Kt){};$.console=window.console||{log:nullfunction,debug:nullfunction,info:nullfunction,warn:nullfunction,error:nullfunction,assert:nullfunction},$.Browser={vendor:$.BROWSERS.UNKNOWN,version:0,alpha:!0};var FILEFORMATS={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},URLPARAMS={};(function(){var Kt=navigator.appVersion,Vt=navigator.userAgent,Hr;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(Vt.substring(Vt.indexOf("MSIE")+5,Vt.indexOf(";",Vt.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(Vt.indexOf("Firefox")>=0?($.Browser.vendor=$.BROWSERS.FIREFOX,$.Browser.version=parseFloat(Vt.substring(Vt.indexOf("Firefox")+8))):Vt.indexOf("Safari")>=0?($.Browser.vendor=Vt.indexOf("Chrome")>=0?$.BROWSERS.CHROME:$.BROWSERS.SAFARI,$.Browser.version=parseFloat(Vt.substring(Vt.substring(0,Vt.indexOf("Safari")).lastIndexOf("/")+1,Vt.indexOf("Safari")))):(Hr=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),Hr.exec(Vt)!==null&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":$.Browser.vendor=$.BROWSERS.OPERA,$.Browser.version=parseFloat(Kt);break}var Wr=window.location.search.substring(1),Yr=Wr.split("&"),Zr,en,tn;for(tn=0;tn<Yr.length;tn++)if(Zr=Yr[tn],en=Zr.indexOf("="),en>0){var rn=Zr.substring(0,en),nn=Zr.substring(en+1);try{URLPARAMS[rn]=decodeURIComponent(nn)}catch{$.console.error("Ignoring malformed URL parameter: %s=%s",rn,nn)}}$.Browser.alpha=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9||$.Browser.vendor==$.BROWSERS.CHROME&&$.Browser.version<2),$.Browser.opacity=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9)})(),function(Kt){var Vt=Kt.requestAnimationFrame||Kt.mozRequestAnimationFrame||Kt.webkitRequestAnimationFrame||Kt.msRequestAnimationFrame,Hr=Kt.cancelAnimationFrame||Kt.mozCancelAnimationFrame||Kt.webkitCancelAnimationFrame||Kt.msCancelAnimationFrame;if(Vt&&Hr)$.requestAnimationFrame=function(){return Vt.apply(Kt,arguments)},$.cancelAnimationFrame=function(){return Hr.apply(Kt,arguments)};else{var Wr=[],Yr=[],Zr=0,en;$.requestAnimationFrame=function(tn){return Wr.push([++Zr,tn]),en||(en=setInterval(function(){if(Wr.length){var rn=$.now(),nn=Yr;for(Yr=Wr,Wr=nn;Yr.length;)Yr.shift()[1](rn)}else clearInterval(en),en=void 0},1e3/50)),Zr},$.cancelAnimationFrame=function(tn){var rn,nn;for(rn=0,nn=Wr.length;rn<nn;rn+=1)if(Wr[rn][0]===tn){Wr.splice(rn,1);return}for(rn=0,nn=Yr.length;rn<nn;rn+=1)if(Yr[rn][0]===tn){Yr.splice(rn,1);return}}}}(window);function getOffsetParent(Kt,Vt){return Vt&&Kt!=document.body?document.body:Kt.offsetParent}}(OpenSeadragon),function(Kt,Vt){module.exports?module.exports=Vt():Kt.OpenSeadragon=Vt()}(u$s,function(){return OpenSeadragon}),function(Kt){var Vt={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(Vt.supportsFullScreen=!0,Vt.getFullScreenElement=function(){return document.fullscreenElement},Vt.requestFullScreen=function(Hr){return Hr.requestFullscreen()},Vt.exitFullScreen=function(){document.exitFullscreen()},Vt.fullScreenEventName="fullscreenchange",Vt.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(Vt.supportsFullScreen=!0,Vt.getFullScreenElement=function(){return document.msFullscreenElement},Vt.requestFullScreen=function(Hr){return Hr.msRequestFullscreen()},Vt.exitFullScreen=function(){document.msExitFullscreen()},Vt.fullScreenEventName="MSFullscreenChange",Vt.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(Vt.supportsFullScreen=!0,Vt.getFullScreenElement=function(){return document.webkitFullscreenElement},Vt.requestFullScreen=function(Hr){return Hr.webkitRequestFullscreen()},Vt.exitFullScreen=function(){document.webkitExitFullscreen()},Vt.fullScreenEventName="webkitfullscreenchange",Vt.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(Vt.supportsFullScreen=!0,Vt.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},Vt.requestFullScreen=function(Hr){return Hr.webkitRequestFullScreen()},Vt.exitFullScreen=function(){document.webkitCancelFullScreen()},Vt.fullScreenEventName="webkitfullscreenchange",Vt.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(Vt.supportsFullScreen=!0,Vt.getFullScreenElement=function(){return document.mozFullScreenElement},Vt.requestFullScreen=function(Hr){return Hr.mozRequestFullScreen()},Vt.exitFullScreen=function(){document.mozCancelFullScreen()},Vt.fullScreenEventName="mozfullscreenchange",Vt.fullScreenErrorEventName="mozfullscreenerror"),Vt.isFullScreen=function(){return Vt.getFullScreenElement()!==null},Vt.cancelFullScreen=function(){Kt.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),Vt.exitFullScreen()},Kt.extend(Kt,Vt)}(OpenSeadragon),function(Kt){Kt.EventSource=function(){this.events={}},Kt.EventSource.prototype={addOnceHandler:function(Vt,Hr,Wr,Yr){var Zr=this;Yr=Yr||1;var en=0,tn=function(rn){en++,en===Yr&&Zr.removeHandler(Vt,tn),Hr(rn)};this.addHandler(Vt,tn,Wr)},addHandler:function(Vt,Hr,Wr){var Yr=this.events[Vt];Yr||(this.events[Vt]=Yr=[]),Hr&&Kt.isFunction(Hr)&&(Yr[Yr.length]={handler:Hr,userData:Wr||null})},removeHandler:function(Vt,Hr){var Wr=this.events[Vt],Yr=[],Zr;if(Wr&&Kt.isArray(Wr)){for(Zr=0;Zr<Wr.length;Zr++)Wr[Zr].handler!==Hr&&Yr.push(Wr[Zr]);this.events[Vt]=Yr}},removeAllHandlers:function(Vt){if(Vt)this.events[Vt]=[];else for(var Hr in this.events)this.events[Hr]=[]},getHandler:function(Vt){var Hr=this.events[Vt];return!Hr||!Hr.length?null:(Hr=Hr.length===1?[Hr[0]]:Array.apply(null,Hr),function(Wr,Yr){var Zr,en=Hr.length;for(Zr=0;Zr<en;Zr++)Hr[Zr]&&(Yr.eventSource=Wr,Yr.userData=Hr[Zr].userData,Hr[Zr].handler(Yr))})},raiseEvent:function(Vt,Hr){var Wr=this.getHandler(Vt);Wr&&(Hr||(Hr={}),Wr(this,Hr))}}}(OpenSeadragon),function(Kt){var Vt=[],Hr={};Kt.MouseTracker=function(rs){Vt.push(this);var ts=arguments;Kt.isPlainObject(rs)||(rs={element:ts[0],clickTimeThreshold:ts[1],clickDistThreshold:ts[2]}),this.hash=Math.random(),this.element=Kt.getElement(rs.element),this.clickTimeThreshold=rs.clickTimeThreshold||Kt.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=rs.clickDistThreshold||Kt.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=rs.dblClickTimeThreshold||Kt.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=rs.dblClickDistThreshold||Kt.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=rs.userData||null,this.stopDelay=rs.stopDelay||50,this.enterHandler=rs.enterHandler||null,this.exitHandler=rs.exitHandler||null,this.pressHandler=rs.pressHandler||null,this.nonPrimaryPressHandler=rs.nonPrimaryPressHandler||null,this.releaseHandler=rs.releaseHandler||null,this.nonPrimaryReleaseHandler=rs.nonPrimaryReleaseHandler||null,this.moveHandler=rs.moveHandler||null,this.scrollHandler=rs.scrollHandler||null,this.clickHandler=rs.clickHandler||null,this.dblClickHandler=rs.dblClickHandler||null,this.dragHandler=rs.dragHandler||null,this.dragEndHandler=rs.dragEndHandler||null,this.pinchHandler=rs.pinchHandler||null,this.stopHandler=rs.stopHandler||null,this.keyDownHandler=rs.keyDownHandler||null,this.keyUpHandler=rs.keyUpHandler||null,this.keyHandler=rs.keyHandler||null,this.focusHandler=rs.focusHandler||null,this.blurHandler=rs.blurHandler||null;var Ks=this;Hr[this.hash]={click:function(Ys){Hn(Ks,Ys)},dblclick:function(Ys){jn(Ks,Ys)},keydown:function(Ys){zn(Ks,Ys)},keyup:function(Ys){Wn(Ks,Ys)},keypress:function(Ys){ei(Ks,Ys)},focus:function(Ys){$i(Ks,Ys)},blur:function(Ys){Mi(Ks,Ys)},wheel:function(Ys){Ni(Ks,Ys)},mousewheel:function(Ys){Ts(Ks,Ys)},DOMMouseScroll:function(Ys){Ts(Ks,Ys)},MozMousePixelScroll:function(Ys){Ts(Ks,Ys)},mouseenter:function(Ys){Ws(Ks,Ys)},mouseleave:function(Ys){zs(Ks,Ys)},mouseover:function(Ys){Hs(Ks,Ys)},mouseout:function(Ys){Xs(Ks,Ys)},mousedown:function(Ys){Zs(Ks,Ys)},mouseup:function(Ys){Gs(Ks,Ys)},mouseupcaptured:function(Ys){Hl(Ks,Ys)},mousemove:function(Ys){sa(Ks,Ys)},mousemovecaptured:function(Ys){Ca(Ks,Ys)},touchstart:function(Ys){ec(Ks,Ys)},touchend:function(Ys){sc(Ks,Ys)},touchendcaptured:function(Ys){ac(Ks,Ys)},touchmove:function(Ys){uc(Ks,Ys)},touchmovecaptured:function(Ys){pc(Ks,Ys)},touchcancel:function(Ys){$c(Ks,Ys)},gesturestart:function(Ys){Ec(Ks,Ys)},gesturechange:function(Ys){Zi(Ks,Ys)},pointerover:function(Ys){qs(Ks,Ys)},MSPointerOver:function(Ys){qs(Ks,Ys)},pointerout:function(Ys){ql(Ks,Ys)},MSPointerOut:function(Ys){ql(Ks,Ys)},pointerdown:function(Ys){Vl(Ks,Ys)},MSPointerDown:function(Ys){Vl(Ks,Ys)},pointerup:function(Ys){Wl(Ks,Ys)},MSPointerUp:function(Ys){Wl(Ks,Ys)},pointermove:function(Ys){wc(Ks,Ys)},MSPointerMove:function(Ys){wc(Ks,Ys)},pointercancel:function(Ys){fc(Ks,Ys)},MSPointerCancel:function(Ys){fc(Ks,Ys)},pointerupcaptured:function(Ys){hc(Ks,Ys)},pointermovecaptured:function(Ys){xc(Ks,Ys)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null},rs.startDisabled||this.setTracking(!0)},Kt.MouseTracker.prototype={destroy:function(){var rs;for(Zr(this),this.element=null,rs=0;rs<Vt.length;rs++)if(Vt[rs]===this){Vt.splice(rs,1);break}Hr[this.hash]=null,delete Hr[this.hash]},isTracking:function(){return Hr[this.hash].tracking},setTracking:function(rs){return rs?Yr(this):Zr(this),this},getActivePointersListsExceptType:function(rs){for(var ts=Hr[this.hash],Ks=[],Ys=0;Ys<ts.activePointersLists.length;++Ys)ts.activePointersLists[Ys].type!==rs&&Ks.push(ts.activePointersLists[Ys]);return Ks},getActivePointersListByType:function(rs){var ts=Hr[this.hash],Ks,Ys=ts.activePointersLists.length,Yl;for(Ks=0;Ks<Ys;Ks++)if(ts.activePointersLists[Ks].type===rs)return ts.activePointersLists[Ks];return Yl=new Kt.MouseTracker.GesturePointList(rs),ts.activePointersLists.push(Yl),Yl},getActivePointerCount:function(){var rs=Hr[this.hash],ts,Ks=rs.activePointersLists.length,Ys=0;for(ts=0;ts<Ks;ts++)Ys+=rs.activePointersLists[ts].getLength();return Ys},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},Kt.MouseTracker.resetAllMouseTrackers=function(){for(var rs=0;rs<Vt.length;rs++)Vt[rs].isTracking()&&(Vt[rs].setTracking(!1),Vt[rs].setTracking(!0))},Kt.MouseTracker.gesturePointVelocityTracker=function(){var rs=[],ts=0,Ks=0,Ys=function(ic,dc){return ic.hash.toString()+dc.type+dc.id.toString()},Yl=function(){var ic,dc=rs.length,gc,vc,Sc=Kt.now(),mc,Pc,_c;for(mc=Sc-Ks,Ks=Sc,ic=0;ic<dc;ic++)gc=rs[ic],vc=gc.gPoint,vc.direction=Math.atan2(vc.currentPos.y-gc.lastPos.y,vc.currentPos.x-gc.lastPos.x),Pc=gc.lastPos.distanceTo(vc.currentPos),gc.lastPos=vc.currentPos,_c=1e3*Pc/(mc+1),vc.speed=.75*_c+.25*vc.speed},lc=function(ic,dc){var gc=Ys(ic,dc);rs.push({guid:gc,gPoint:dc,lastPos:dc.currentPos}),rs.length===1&&(Ks=Kt.now(),ts=window.setInterval(Yl,50))},oc=function(ic,dc){var gc=Ys(ic,dc),vc,Sc=rs.length;for(vc=0;vc<Sc;vc++)if(rs[vc].guid===gc){rs.splice(vc,1),Sc--,Sc===0&&window.clearInterval(ts);break}};return{addPoint:lc,removePoint:oc}}(),Kt.MouseTracker.captureElement=document,Kt.MouseTracker.wheelEventName=Kt.Browser.vendor==Kt.BROWSERS.IE&&Kt.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",Kt.MouseTracker.supportsMouseCapture=function(){var rs=document.createElement("div");return Kt.isFunction(rs.setCapture)&&Kt.isFunction(rs.releaseCapture)}(),Kt.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",Kt.MouseTracker.wheelEventName],Kt.MouseTracker.wheelEventName=="DOMMouseScroll"&&Kt.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent&&(window.navigator.pointerEnabled||Kt.Browser.vendor!==Kt.BROWSERS.IE)?(Kt.MouseTracker.havePointerEvents=!0,Kt.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),Kt.MouseTracker.unprefixedPointerEvents=!0,navigator.maxTouchPoints?Kt.MouseTracker.maxTouchPoints=navigator.maxTouchPoints:Kt.MouseTracker.maxTouchPoints=0,Kt.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?(Kt.MouseTracker.havePointerEvents=!0,Kt.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),Kt.MouseTracker.unprefixedPointerEvents=!1,navigator.msMaxTouchPoints?Kt.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints:Kt.MouseTracker.maxTouchPoints=0,Kt.MouseTracker.haveMouseEnter=!1):(Kt.MouseTracker.havePointerEvents=!1,Kt.Browser.vendor===Kt.BROWSERS.IE&&Kt.Browser.version<9?(Kt.MouseTracker.subscribeEvents.push("mouseenter","mouseleave"),Kt.MouseTracker.haveMouseEnter=!0):(Kt.MouseTracker.subscribeEvents.push("mouseover","mouseout"),Kt.MouseTracker.haveMouseEnter=!1),Kt.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove"),"ontouchstart"in window&&Kt.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&Kt.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),Kt.MouseTracker.mousePointerId="legacy-mouse",Kt.MouseTracker.maxTouchPoints=10),Kt.MouseTracker.GesturePointList=function(rs){this._gPoints=[],this.type=rs,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},Kt.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(rs){return this._gPoints.push(rs)},removeById:function(rs){var ts,Ks=this._gPoints.length;for(ts=0;ts<Ks;ts++)if(this._gPoints[ts].id===rs){this._gPoints.splice(ts,1);break}return this._gPoints.length},getByIndex:function(rs){return rs<this._gPoints.length?this._gPoints[rs]:null},getById:function(rs){var ts,Ks=this._gPoints.length;for(ts=0;ts<Ks;ts++)if(this._gPoints[ts].id===rs)return this._gPoints[ts];return null},getPrimary:function(rs){var ts,Ks=this._gPoints.length;for(ts=0;ts<Ks;ts++)if(this._gPoints[ts].isPrimary)return this._gPoints[ts];return null},addContact:function(){++this.contacts,this.contacts>1&&(this.type==="mouse"||this.type==="pen")&&(this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};function Wr(rs){var ts=Hr[rs.hash],Ks,Ys=ts.activePointersLists.length;for(Ks=0;Ks<Ys;Ks++)ts.activePointersLists[Ks].captureCount>0&&(Kt.removeEvent(Kt.MouseTracker.captureElement,"mousemove",ts.mousemovecaptured,!0),Kt.removeEvent(Kt.MouseTracker.captureElement,"mouseup",ts.mouseupcaptured,!0),Kt.removeEvent(Kt.MouseTracker.captureElement,Kt.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",ts.pointermovecaptured,!0),Kt.removeEvent(Kt.MouseTracker.captureElement,Kt.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",ts.pointerupcaptured,!0),Kt.removeEvent(Kt.MouseTracker.captureElement,"touchmove",ts.touchmovecaptured,!0),Kt.removeEvent(Kt.MouseTracker.captureElement,"touchend",ts.touchendcaptured,!0),ts.activePointersLists[Ks].captureCount=0);for(Ks=0;Ks<Ys;Ks++)ts.activePointersLists.pop()}function Yr(rs){var ts=Hr[rs.hash],Ks,Ys;if(!ts.tracking){for(Ys=0;Ys<Kt.MouseTracker.subscribeEvents.length;Ys++)Ks=Kt.MouseTracker.subscribeEvents[Ys],Kt.addEvent(rs.element,Ks,ts[Ks],!1);Wr(rs),ts.tracking=!0}}function Zr(rs){var ts=Hr[rs.hash],Ks,Ys;if(ts.tracking){for(Ys=0;Ys<Kt.MouseTracker.subscribeEvents.length;Ys++)Ks=Kt.MouseTracker.subscribeEvents[Ys],Kt.removeEvent(rs.element,Ks,ts[Ks],!1);Wr(rs),ts.tracking=!1}}function en(rs,ts){var Ks=Hr[rs.hash];if(ts==="pointerevent")return{upName:Kt.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",upHandler:Ks.pointerupcaptured,moveName:Kt.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",moveHandler:Ks.pointermovecaptured};if(ts==="mouse")return{upName:"mouseup",upHandler:Ks.mouseupcaptured,moveName:"mousemove",moveHandler:Ks.mousemovecaptured};if(ts==="touch")return{upName:"touchend",upHandler:Ks.touchendcaptured,moveName:"touchmove",moveHandler:Ks.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function tn(rs,ts,Ks){var Ys=rs.getActivePointersListByType(ts),Yl;Ys.captureCount+=Ks||1,Ys.captureCount===1&&(Kt.Browser.vendor===Kt.BROWSERS.IE&&Kt.Browser.version<9?rs.element.setCapture(!0):(Yl=en(rs,Kt.MouseTracker.havePointerEvents?"pointerevent":ts),Mc&&Nc(window.top)&&Kt.addEvent(window.top,Yl.upName,Yl.upHandler,!0),Kt.addEvent(Kt.MouseTracker.captureElement,Yl.upName,Yl.upHandler,!0),Kt.addEvent(Kt.MouseTracker.captureElement,Yl.moveName,Yl.moveHandler,!0)))}function rn(rs,ts,Ks){var Ys=rs.getActivePointersListByType(ts),Yl;Ys.captureCount-=Ks||1,Ys.captureCount===0&&(Kt.Browser.vendor===Kt.BROWSERS.IE&&Kt.Browser.version<9?rs.element.releaseCapture():(Yl=en(rs,Kt.MouseTracker.havePointerEvents?"pointerevent":ts),Mc&&Nc(window.top)&&Kt.removeEvent(window.top,Yl.upName,Yl.upHandler,!0),Kt.removeEvent(Kt.MouseTracker.captureElement,Yl.moveName,Yl.moveHandler,!0),Kt.removeEvent(Kt.MouseTracker.captureElement,Yl.upName,Yl.upHandler,!0)))}function nn(rs){var ts;if(Kt.MouseTracker.unprefixedPointerEvents)ts=rs.pointerType;else switch(rs.pointerType){case 2:ts="touch";break;case 3:ts="pen";break;case 4:ts="mouse";break;default:ts=""}return ts}function on(rs){return Kt.getMousePosition(rs)}function an(rs,ts){return $n(on(rs),ts)}function $n(rs,ts){var Ks=Kt.getElementOffset(ts);return rs.minus(Ks)}function ln(rs,ts){return new Kt.Point((rs.x+ts.x)/2,(rs.y+ts.y)/2)}function Hn(rs,ts){rs.clickHandler&&Kt.cancelEvent(ts)}function jn(rs,ts){rs.dblClickHandler&&Kt.cancelEvent(ts)}function zn(rs,ts){var Ks;rs.keyDownHandler&&(ts=Kt.getEvent(ts),Ks=rs.keyDownHandler({eventSource:rs,keyCode:ts.keyCode?ts.keyCode:ts.charCode,ctrl:ts.ctrlKey,shift:ts.shiftKey,alt:ts.altKey,meta:ts.metaKey,originalEvent:ts,preventDefaultAction:!1,userData:rs.userData}),Ks||Kt.cancelEvent(ts))}function Wn(rs,ts){var Ks;rs.keyUpHandler&&(ts=Kt.getEvent(ts),Ks=rs.keyUpHandler({eventSource:rs,keyCode:ts.keyCode?ts.keyCode:ts.charCode,ctrl:ts.ctrlKey,shift:ts.shiftKey,alt:ts.altKey,meta:ts.metaKey,originalEvent:ts,preventDefaultAction:!1,userData:rs.userData}),Ks||Kt.cancelEvent(ts))}function ei(rs,ts){var Ks;rs.keyHandler&&(ts=Kt.getEvent(ts),Ks=rs.keyHandler({eventSource:rs,keyCode:ts.keyCode?ts.keyCode:ts.charCode,ctrl:ts.ctrlKey,shift:ts.shiftKey,alt:ts.altKey,meta:ts.metaKey,originalEvent:ts,preventDefaultAction:!1,userData:rs.userData}),Ks||Kt.cancelEvent(ts))}function $i(rs,ts){var Ks;rs.focusHandler&&(ts=Kt.getEvent(ts),Ks=rs.focusHandler({eventSource:rs,originalEvent:ts,preventDefaultAction:!1,userData:rs.userData}),Ks===!1&&Kt.cancelEvent(ts))}function Mi(rs,ts){var Ks;rs.blurHandler&&(ts=Kt.getEvent(ts),Ks=rs.blurHandler({eventSource:rs,originalEvent:ts,preventDefaultAction:!1,userData:rs.userData}),Ks===!1&&Kt.cancelEvent(ts))}function Ni(rs,ts){ps(rs,ts,ts)}function Ts(rs,ts){ts=Kt.getEvent(ts);var Ks={target:ts.target||ts.srcElement,type:"wheel",shiftKey:ts.shiftKey||!1,clientX:ts.clientX,clientY:ts.clientY,pageX:ts.pageX?ts.pageX:ts.clientX,pageY:ts.pageY?ts.pageY:ts.clientY,deltaMode:ts.type=="MozMousePixelScroll"?0:1,deltaX:0,deltaZ:0};Kt.MouseTracker.wheelEventName=="mousewheel"?Ks.deltaY=-ts.wheelDelta/Kt.DEFAULT_SETTINGS.pixelsPerWheelLine:Ks.deltaY=ts.detail,ps(rs,Ks,ts)}function ps(rs,ts,Ks){var Ys=0,Yl;Ys=ts.deltaY<0?1:-1,rs.scrollHandler&&(Yl=rs.scrollHandler({eventSource:rs,pointerType:"mouse",position:an(ts,rs.element),scroll:Ys,shift:ts.shiftKey,isTouchEvent:!1,originalEvent:Ks,preventDefaultAction:!1,userData:rs.userData}),Yl===!1&&Kt.cancelEvent(Ks))}function $s(rs,ts){if(rs===ts)return!1;for(;ts&&ts!==rs;)ts=ts.parentNode;return ts===rs}function Ws(rs,ts){ts=Kt.getEvent(ts),js(rs,ts)}function Hs(rs,ts){ts=Kt.getEvent(ts),!(ts.currentTarget===ts.relatedTarget||$s(ts.currentTarget,ts.relatedTarget))&&js(rs,ts)}function js(rs,ts){var Ks={id:Kt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:on(ts),currentTime:Kt.now()};Cc(rs,ts,[Ks])}function zs(rs,ts){ts=Kt.getEvent(ts),ia(rs,ts)}function Xs(rs,ts){ts=Kt.getEvent(ts),!(ts.currentTarget===ts.relatedTarget||$s(ts.currentTarget,ts.relatedTarget))&&ia(rs,ts)}function ia(rs,ts){var Ks={id:Kt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:on(ts),currentTime:Kt.now()};Rc(rs,ts,[Ks])}function Qs(rs){return Kt.Browser.vendor===Kt.BROWSERS.IE&&Kt.Browser.version<9?rs===1?0:rs===2?2:rs===4?1:-1:rs}function Zs(rs,ts){var Ks;ts=Kt.getEvent(ts),Ks={id:Kt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:on(ts),currentTime:Kt.now()},Ic(rs,ts,[Ks],Qs(ts.button))&&(Kt.stopEvent(ts),tn(rs,"mouse")),(rs.clickHandler||rs.dblClickHandler||rs.pressHandler||rs.dragHandler||rs.dragEndHandler)&&Kt.cancelEvent(ts)}function Gs(rs,ts){Js(rs,ts)}function Hl(rs,ts){Js(rs,ts),Kt.stopEvent(ts)}function Js(rs,ts){var Ks;ts=Kt.getEvent(ts),Ks={id:Kt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:on(ts),currentTime:Kt.now()},Ac(rs,ts,[Ks],Qs(ts.button))&&rn(rs,"mouse")}function sa(rs,ts){tc(rs,ts)}function Ca(rs,ts){tc(rs,ts),Kt.stopEvent(ts)}function tc(rs,ts){var Ks;ts=Kt.getEvent(ts),Ks={id:Kt.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:on(ts),currentTime:Kt.now()},Oc(rs,ts,[Ks])}function zl(rs,ts,Ks){var Ys,Yl=Ks.getLength(),lc=[];if(Ks.type==="touch"||Ks.contacts>0){for(Ys=0;Ys<Yl;Ys++)lc.push(Ks.getByIndex(Ys));lc.length>0&&(Ac(rs,ts,lc,0),Ks.captureCount=1,rn(rs,Ks.type),Rc(rs,ts,lc))}}function ec(rs,ts){var Ks,Ys,Yl,lc=ts.changedTouches.length,oc=[],ic,dc=rs.getActivePointersListByType("touch");for(Ks=Kt.now(),dc.getLength()>ts.touches.length-lc&&(Kt.console.warn("Tracked touch contact count doesn't match event.touches.length. Removing all tracked touch pointers."),zl(rs,ts,dc)),Ys=0;Ys<lc;Ys++)oc.push({id:ts.changedTouches[Ys].identifier,type:"touch",currentPos:on(ts.changedTouches[Ys]),currentTime:Ks});for(Cc(rs,ts,oc),Ys=0;Ys<Vt.length;Ys++)if(Vt[Ys]!==rs&&Vt[Ys].isTracking()&&$s(Vt[Ys].element,rs.element)){for(ic=[],Yl=0;Yl<lc;Yl++)ic.push({id:ts.changedTouches[Yl].identifier,type:"touch",currentPos:on(ts.changedTouches[Yl]),currentTime:Ks});Cc(Vt[Ys],ts,ic)}Ic(rs,ts,oc,0)&&(Kt.stopEvent(ts),tn(rs,"touch",lc)),Kt.cancelEvent(ts)}function sc(rs,ts){rc(rs,ts)}function ac(rs,ts){rc(rs,ts),Kt.stopEvent(ts)}function rc(rs,ts){var Ks,Ys,Yl,lc=ts.changedTouches.length,oc=[],ic;for(Ks=Kt.now(),Ys=0;Ys<lc;Ys++)oc.push({id:ts.changedTouches[Ys].identifier,type:"touch",currentPos:on(ts.changedTouches[Ys]),currentTime:Ks});for(Ac(rs,ts,oc,0)&&rn(rs,"touch",lc),Rc(rs,ts,oc),Ys=0;Ys<Vt.length;Ys++)if(Vt[Ys]!==rs&&Vt[Ys].isTracking()&&$s(Vt[Ys].element,rs.element)){for(ic=[],Yl=0;Yl<lc;Yl++)ic.push({id:ts.changedTouches[Yl].identifier,type:"touch",currentPos:on(ts.changedTouches[Yl]),currentTime:Ks});Rc(Vt[Ys],ts,ic)}Kt.cancelEvent(ts)}function uc(rs,ts){cc(rs,ts)}function pc(rs,ts){cc(rs,ts),Kt.stopEvent(ts)}function cc(rs,ts){var Ks,Ys=ts.changedTouches.length,Yl=[];for(Ks=0;Ks<Ys;Ks++)Yl.push({id:ts.changedTouches[Ks].identifier,type:"touch",currentPos:on(ts.changedTouches[Ks]),currentTime:Kt.now()});Oc(rs,ts,Yl),Kt.cancelEvent(ts)}function $c(rs,ts){var Ks=rs.getActivePointersListByType("touch");zl(rs,ts,Ks)}function Ec(rs,ts){return ts.stopPropagation(),ts.preventDefault(),!1}function Zi(rs,ts){return ts.stopPropagation(),ts.preventDefault(),!1}function qs(rs,ts){var Ks;ts.currentTarget===ts.relatedTarget||$s(ts.currentTarget,ts.relatedTarget)||(Ks={id:ts.pointerId,type:nn(ts),isPrimary:ts.isPrimary,currentPos:on(ts),currentTime:Kt.now()},Cc(rs,ts,[Ks]))}function ql(rs,ts){var Ks;ts.currentTarget===ts.relatedTarget||$s(ts.currentTarget,ts.relatedTarget)||(Ks={id:ts.pointerId,type:nn(ts),isPrimary:ts.isPrimary,currentPos:on(ts),currentTime:Kt.now()},Rc(rs,ts,[Ks]))}function Vl(rs,ts){var Ks;Ks={id:ts.pointerId,type:nn(ts),isPrimary:ts.isPrimary,currentPos:on(ts),currentTime:Kt.now()},Ic(rs,ts,[Ks],ts.button)&&(Kt.stopEvent(ts),tn(rs,Ks.type)),(rs.clickHandler||rs.dblClickHandler||rs.pressHandler||rs.dragHandler||rs.dragEndHandler||rs.pinchHandler)&&Kt.cancelEvent(ts)}function Wl(rs,ts){nc(rs,ts)}function hc(rs,ts){var Ks=rs.getActivePointersListByType(nn(ts));Ks.getById(ts.pointerId)&&nc(rs,ts),Kt.stopEvent(ts)}function nc(rs,ts){var Ks;Ks={id:ts.pointerId,type:nn(ts),isPrimary:ts.isPrimary,currentPos:on(ts),currentTime:Kt.now()},Ac(rs,ts,[Ks],ts.button)&&rn(rs,Ks.type)}function wc(rs,ts){bc(rs,ts)}function xc(rs,ts){var Ks=rs.getActivePointersListByType(nn(ts));Ks.getById(ts.pointerId)&&bc(rs,ts),Kt.stopEvent(ts)}function bc(rs,ts){var Ks;Ks={id:ts.pointerId,type:nn(ts),isPrimary:ts.isPrimary,currentPos:on(ts),currentTime:Kt.now()},Oc(rs,ts,[Ks])}function fc(rs,ts){var Ks;Ks={id:ts.pointerId,type:nn(ts)},Su(rs,ts,[Ks])}function Tc(rs,ts){return Object.prototype.hasOwnProperty.call(ts,"isPrimary")||(rs.getLength()===0?ts.isPrimary=!0:ts.isPrimary=!1),ts.speed=0,ts.direction=0,ts.contactPos=ts.currentPos,ts.contactTime=ts.currentTime,ts.lastPos=ts.currentPos,ts.lastTime=ts.currentTime,rs.add(ts)}function yc(rs,ts){var Ks,Ys;return rs.getById(ts.id)?(Ks=rs.removeById(ts.id),Object.prototype.hasOwnProperty.call(ts,"isPrimary")||(Ys=rs.getPrimary(),Ys||(Ys=rs.getByIndex(0),Ys&&(Ys.isPrimary=!0)))):Ks=rs.getLength(),Ks}function Cc(rs,ts,Ks){var Ys=rs.getActivePointersListByType(Ks[0].type),Yl,lc=Ks.length,oc,ic,dc;for(Yl=0;Yl<lc;Yl++)oc=Ks[Yl],ic=Ys.getById(oc.id),ic?(ic.insideElement=!0,ic.lastPos=ic.currentPos,ic.lastTime=ic.currentTime,ic.currentPos=oc.currentPos,ic.currentTime=oc.currentTime,oc=ic):(oc.captured=!1,oc.insideElementPressed=!1,oc.insideElement=!0,Tc(Ys,oc)),rs.enterHandler&&(dc=rs.enterHandler({eventSource:rs,pointerType:oc.type,position:$n(oc.currentPos,rs.element),buttons:Ys.buttons,pointers:rs.getActivePointerCount(),insideElementPressed:oc.insideElementPressed,buttonDownAny:Ys.buttons!==0,isTouchEvent:oc.type==="touch",originalEvent:ts,preventDefaultAction:!1,userData:rs.userData}),dc===!1&&Kt.cancelEvent(ts))}function Rc(rs,ts,Ks){var Ys=rs.getActivePointersListByType(Ks[0].type),Yl,lc=Ks.length,oc,ic,dc;for(Yl=0;Yl<lc;Yl++)oc=Ks[Yl],ic=Ys.getById(oc.id),ic&&(ic.captured?(ic.insideElement=!1,ic.lastPos=ic.currentPos,ic.lastTime=ic.currentTime,ic.currentPos=oc.currentPos,ic.currentTime=oc.currentTime):yc(Ys,ic),oc=ic),rs.exitHandler&&(dc=rs.exitHandler({eventSource:rs,pointerType:oc.type,position:oc.currentPos&&$n(oc.currentPos,rs.element),buttons:Ys.buttons,pointers:rs.getActivePointerCount(),insideElementPressed:ic?ic.insideElementPressed:!1,buttonDownAny:Ys.buttons!==0,isTouchEvent:oc.type==="touch",originalEvent:ts,preventDefaultAction:!1,userData:rs.userData}),dc===!1&&Kt.cancelEvent(ts))}function Ic(rs,ts,Ks,Ys){var Yl=Hr[rs.hash],lc,oc=rs.getActivePointersListByType(Ks[0].type),ic,dc=Ks.length,gc,vc;typeof ts.buttons<"u"?oc.buttons=ts.buttons:Kt.Browser.vendor===Kt.BROWSERS.IE&&Kt.Browser.version<9?Ys===0?oc.buttons+=1:Ys===1?oc.buttons+=4:Ys===2?oc.buttons+=2:Ys===3?oc.buttons+=8:Ys===4?oc.buttons+=16:Ys===5&&(oc.buttons+=32):Ys===0?oc.buttons|=1:Ys===1?oc.buttons|=4:Ys===2?oc.buttons|=2:Ys===3?oc.buttons|=8:Ys===4?oc.buttons|=16:Ys===5&&(oc.buttons|=32);var Sc=rs.getActivePointersListsExceptType(Ks[0].type);for(ic=0;ic<Sc.length;ic++)zl(rs,ts,Sc[ic]);if(Ys!==0)return rs.nonPrimaryPressHandler&&(lc=rs.nonPrimaryPressHandler({eventSource:rs,pointerType:Ks[0].type,position:$n(Ks[0].currentPos,rs.element),button:Ys,buttons:oc.buttons,isTouchEvent:Ks[0].type==="touch",originalEvent:ts,preventDefaultAction:!1,userData:rs.userData}),lc===!1&&Kt.cancelEvent(ts)),!1;for(ic=0;ic<dc;ic++)gc=Ks[ic],vc=oc.getById(gc.id),vc?(vc.captured=!0,vc.insideElementPressed=!0,vc.insideElement=!0,vc.contactPos=gc.currentPos,vc.contactTime=gc.currentTime,vc.lastPos=vc.currentPos,vc.lastTime=vc.currentTime,vc.currentPos=gc.currentPos,vc.currentTime=gc.currentTime,gc=vc):(gc.captured=!0,gc.insideElementPressed=!0,gc.insideElement=!0,Tc(oc,gc)),oc.addContact(),(rs.dragHandler||rs.dragEndHandler||rs.pinchHandler)&&Kt.MouseTracker.gesturePointVelocityTracker.addPoint(rs,gc),oc.contacts===1?rs.pressHandler&&(lc=rs.pressHandler({eventSource:rs,pointerType:gc.type,position:$n(gc.contactPos,rs.element),buttons:oc.buttons,isTouchEvent:gc.type==="touch",originalEvent:ts,preventDefaultAction:!1,userData:rs.userData}),lc===!1&&Kt.cancelEvent(ts)):oc.contacts===2&&rs.pinchHandler&&gc.type==="touch"&&(Yl.pinchGPoints=oc.asArray(),Yl.lastPinchDist=Yl.currentPinchDist=Yl.pinchGPoints[0].currentPos.distanceTo(Yl.pinchGPoints[1].currentPos),Yl.lastPinchCenter=Yl.currentPinchCenter=ln(Yl.pinchGPoints[0].currentPos,Yl.pinchGPoints[1].currentPos));return!0}function Ac(rs,ts,Ks,Ys){var Yl=Hr[rs.hash],lc=rs.getActivePointersListByType(Ks[0].type),oc,ic,dc,gc,vc=Ks.length,Sc,mc,Pc=!1,_c=!1,Lc;if(typeof ts.buttons<"u"?lc.buttons=ts.buttons:Kt.Browser.vendor===Kt.BROWSERS.IE&&Kt.Browser.version<9?Ys===0?lc.buttons-=1:Ys===1?lc.buttons-=4:Ys===2?lc.buttons-=2:Ys===3?lc.buttons-=8:Ys===4?lc.buttons-=16:Ys===5&&(lc.buttons-=32):Ys===0?lc.buttons^=-2:Ys===1?lc.buttons^=-5:Ys===2?lc.buttons^=-3:Ys===3?lc.buttons^=-9:Ys===4?lc.buttons^=-17:Ys===5&&(lc.buttons^=-33),Ys!==0){rs.nonPrimaryReleaseHandler&&(oc=rs.nonPrimaryReleaseHandler({eventSource:rs,pointerType:Ks[0].type,position:$n(Ks[0].currentPos,rs.element),button:Ys,buttons:lc.buttons,isTouchEvent:Ks[0].type==="touch",originalEvent:ts,preventDefaultAction:!1,userData:rs.userData}),oc===!1&&Kt.cancelEvent(ts));var Cu=rs.getActivePointersListByType("mouse");return zl(rs,ts,Cu),!1}if(typeof Ks[0].currentPos>"u")return zl(rs,ts,lc),!1;for(gc=0;gc<vc;gc++)Sc=Ks[gc],mc=lc.getById(Sc.id),mc&&(mc.captured&&(mc.captured=!1,Pc=!0,_c=!0),mc.lastPos=mc.currentPos,mc.lastTime=mc.currentTime,mc.currentPos=Sc.currentPos,mc.currentTime=Sc.currentTime,mc.insideElement||yc(lc,mc),ic=mc.currentPos,dc=mc.currentTime,_c?(lc.removeContact(),(rs.dragHandler||rs.dragEndHandler||rs.pinchHandler)&&Kt.MouseTracker.gesturePointVelocityTracker.removePoint(rs,mc),lc.contacts===0?(rs.releaseHandler&&(oc=rs.releaseHandler({eventSource:rs,pointerType:mc.type,position:$n(ic,rs.element),buttons:lc.buttons,insideElementPressed:mc.insideElementPressed,insideElementReleased:mc.insideElement,isTouchEvent:mc.type==="touch",originalEvent:ts,preventDefaultAction:!1,userData:rs.userData}),oc===!1&&Kt.cancelEvent(ts)),rs.dragEndHandler&&!mc.currentPos.equals(mc.contactPos)&&(oc=rs.dragEndHandler({eventSource:rs,pointerType:mc.type,position:$n(mc.currentPos,rs.element),speed:mc.speed,direction:mc.direction,shift:ts.shiftKey,isTouchEvent:mc.type==="touch",originalEvent:ts,preventDefaultAction:!1,userData:rs.userData}),oc===!1&&Kt.cancelEvent(ts)),(rs.clickHandler||rs.dblClickHandler)&&mc.insideElement&&(Lc=dc-mc.contactTime<=rs.clickTimeThreshold&&mc.contactPos.distanceTo(ic)<=rs.clickDistThreshold,rs.clickHandler&&(oc=rs.clickHandler({eventSource:rs,pointerType:mc.type,position:$n(mc.currentPos,rs.element),quick:Lc,shift:ts.shiftKey,isTouchEvent:mc.type==="touch",originalEvent:ts,preventDefaultAction:!1,userData:rs.userData}),oc===!1&&Kt.cancelEvent(ts)),rs.dblClickHandler&&Lc&&(lc.clicks++,lc.clicks===1?(Yl.lastClickPos=ic,Yl.dblClickTimeOut=setTimeout(function(){lc.clicks=0},rs.dblClickTimeThreshold)):lc.clicks===2&&(clearTimeout(Yl.dblClickTimeOut),lc.clicks=0,Yl.lastClickPos.distanceTo(ic)<=rs.dblClickDistThreshold&&(oc=rs.dblClickHandler({eventSource:rs,pointerType:mc.type,position:$n(mc.currentPos,rs.element),shift:ts.shiftKey,isTouchEvent:mc.type==="touch",originalEvent:ts,preventDefaultAction:!1,userData:rs.userData}),oc===!1&&Kt.cancelEvent(ts)),Yl.lastClickPos=null)))):lc.contacts===2&&rs.pinchHandler&&mc.type==="touch"&&(Yl.pinchGPoints=lc.asArray(),Yl.lastPinchDist=Yl.currentPinchDist=Yl.pinchGPoints[0].currentPos.distanceTo(Yl.pinchGPoints[1].currentPos),Yl.lastPinchCenter=Yl.currentPinchCenter=ln(Yl.pinchGPoints[0].currentPos,Yl.pinchGPoints[1].currentPos))):rs.releaseHandler&&(oc=rs.releaseHandler({eventSource:rs,pointerType:mc.type,position:$n(ic,rs.element),buttons:lc.buttons,insideElementPressed:mc.insideElementPressed,insideElementReleased:mc.insideElement,isTouchEvent:mc.type==="touch",originalEvent:ts,preventDefaultAction:!1,userData:rs.userData}),oc===!1&&Kt.cancelEvent(ts)));return Pc}function Oc(rs,ts,Ks){var Ys=Hr[rs.hash],Yl=rs.getActivePointersListByType(Ks[0].type),lc,oc=Ks.length,ic,dc,gc,vc,Sc;for(typeof ts.buttons<"u"&&(Yl.buttons=ts.buttons),lc=0;lc<oc;lc++)ic=Ks[lc],dc=Yl.getById(ic.id),dc?(Object.prototype.hasOwnProperty.call(ic,"isPrimary")&&(dc.isPrimary=ic.isPrimary),dc.lastPos=dc.currentPos,dc.lastTime=dc.currentTime,dc.currentPos=ic.currentPos,dc.currentTime=ic.currentTime):(ic.captured=!1,ic.insideElementPressed=!1,ic.insideElement=!0,Tc(Yl,ic));rs.stopHandler&&Ks[0].type==="mouse"&&(clearTimeout(rs.stopTimeOut),rs.stopTimeOut=setTimeout(function(){Tu(rs,ts,Ks[0].type)},rs.stopDelay)),Yl.contacts===0?rs.moveHandler&&(Sc=rs.moveHandler({eventSource:rs,pointerType:Ks[0].type,position:$n(Ks[0].currentPos,rs.element),buttons:Yl.buttons,isTouchEvent:Ks[0].type==="touch",originalEvent:ts,preventDefaultAction:!1,userData:rs.userData}),Sc===!1&&Kt.cancelEvent(ts)):Yl.contacts===1?(rs.moveHandler&&(dc=Yl.asArray()[0],Sc=rs.moveHandler({eventSource:rs,pointerType:dc.type,position:$n(dc.currentPos,rs.element),buttons:Yl.buttons,isTouchEvent:dc.type==="touch",originalEvent:ts,preventDefaultAction:!1,userData:rs.userData}),Sc===!1&&Kt.cancelEvent(ts)),rs.dragHandler&&(dc=Yl.asArray()[0],vc=dc.currentPos.minus(dc.lastPos),Sc=rs.dragHandler({eventSource:rs,pointerType:dc.type,position:$n(dc.currentPos,rs.element),buttons:Yl.buttons,delta:vc,speed:dc.speed,direction:dc.direction,shift:ts.shiftKey,isTouchEvent:dc.type==="touch",originalEvent:ts,preventDefaultAction:!1,userData:rs.userData}),Sc===!1&&Kt.cancelEvent(ts))):Yl.contacts===2&&(rs.moveHandler&&(gc=Yl.asArray(),Sc=rs.moveHandler({eventSource:rs,pointerType:gc[0].type,position:$n(ln(gc[0].currentPos,gc[1].currentPos),rs.element),buttons:Yl.buttons,isTouchEvent:gc[0].type==="touch",originalEvent:ts,preventDefaultAction:!1,userData:rs.userData}),Sc===!1&&Kt.cancelEvent(ts)),rs.pinchHandler&&Ks[0].type==="touch"&&(vc=Ys.pinchGPoints[0].currentPos.distanceTo(Ys.pinchGPoints[1].currentPos),vc!=Ys.currentPinchDist&&(Ys.lastPinchDist=Ys.currentPinchDist,Ys.currentPinchDist=vc,Ys.lastPinchCenter=Ys.currentPinchCenter,Ys.currentPinchCenter=ln(Ys.pinchGPoints[0].currentPos,Ys.pinchGPoints[1].currentPos),Sc=rs.pinchHandler({eventSource:rs,pointerType:"touch",gesturePoints:Ys.pinchGPoints,lastCenter:$n(Ys.lastPinchCenter,rs.element),center:$n(Ys.currentPinchCenter,rs.element),lastDistance:Ys.lastPinchDist,distance:Ys.currentPinchDist,shift:ts.shiftKey,originalEvent:ts,preventDefaultAction:!1,userData:rs.userData}),Sc===!1&&Kt.cancelEvent(ts))))}function Su(rs,ts,Ks){Ac(rs,ts,Ks,0),Rc(rs,ts,Ks)}function Tu(rs,ts,Ks){rs.stopHandler&&rs.stopHandler({eventSource:rs,pointerType:Ks,position:an(ts,rs.element),buttons:rs.getActivePointersListByType(Ks).buttons,isTouchEvent:Ks==="touch",originalEvent:ts,preventDefaultAction:!1,userData:rs.userData})}var Mc=function(){try{return window.self!==window.top}catch{return!0}}();function Nc(rs){try{return rs.addEventListener&&rs.removeEventListener}catch{return!1}}}(OpenSeadragon),function(Kt){Kt.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},Kt.Control=function(Vt,Hr,Wr){var Yr=Vt.parentNode;typeof Hr=="number"&&(Kt.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),Hr={anchor:Hr}),Hr.attachToViewer=typeof Hr.attachToViewer>"u"?!0:Hr.attachToViewer,this.autoFade=typeof Hr.autoFade>"u"?!0:Hr.autoFade,this.element=Vt,this.anchor=Hr.anchor,this.container=Wr,this.anchor==Kt.ControlAnchor.ABSOLUTE?(this.wrapper=Kt.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top=typeof Hr.top=="number"?Hr.top+"px":Hr.top,this.wrapper.style.left=typeof Hr.left=="number"?Hr.left+"px":Hr.left,this.wrapper.style.height=typeof Hr.height=="number"?Hr.height+"px":Hr.height,this.wrapper.style.width=typeof Hr.width=="number"?Hr.width+"px":Hr.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=Kt.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==Kt.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),Hr.attachToViewer?this.anchor==Kt.ControlAnchor.TOP_RIGHT||this.anchor==Kt.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):Yr.appendChild(this.wrapper)},Kt.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return this.wrapper.style.display!="none"},setVisible:function(Vt){this.wrapper.style.display=Vt?this.anchor==Kt.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(Vt){this.element[Kt.SIGNAL]&&Kt.Browser.vendor==Kt.BROWSERS.IE?Kt.setElementOpacity(this.element,Vt,!0):Kt.setElementOpacity(this.wrapper,Vt,!0)}}}(OpenSeadragon),function(Kt){Kt.ControlDock=function(Hr){var Wr=["topleft","topright","bottomright","bottomleft"],Yr,Zr;for(Kt.extend(!0,this,{id:"controldock-"+Kt.now()+"-"+Math.floor(Math.random()*1e6),container:Kt.makeNeutralElement("div"),controls:[]},Hr),this.container.onsubmit=function(){return!1},this.element&&(this.element=Kt.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),Zr=0;Zr<Wr.length;Zr++)Yr=Wr[Zr],this.controls[Yr]=Kt.makeNeutralElement("div"),this.controls[Yr].style.position="absolute",Yr.match("left")&&(this.controls[Yr].style.left="0px"),Yr.match("right")&&(this.controls[Yr].style.right="0px"),Yr.match("top")&&(this.controls[Yr].style.top="0px"),Yr.match("bottom")&&(this.controls[Yr].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},Kt.ControlDock.prototype={addControl:function(Hr,Wr){Hr=Kt.getElement(Hr);var Yr=null;if(!(Vt(this,Hr)>=0)){switch(Wr.anchor){case Kt.ControlAnchor.TOP_RIGHT:Yr=this.controls.topright,Hr.style.position="relative",Hr.style.paddingRight="0px",Hr.style.paddingTop="0px";break;case Kt.ControlAnchor.BOTTOM_RIGHT:Yr=this.controls.bottomright,Hr.style.position="relative",Hr.style.paddingRight="0px",Hr.style.paddingBottom="0px";break;case Kt.ControlAnchor.BOTTOM_LEFT:Yr=this.controls.bottomleft,Hr.style.position="relative",Hr.style.paddingLeft="0px",Hr.style.paddingBottom="0px";break;case Kt.ControlAnchor.TOP_LEFT:Yr=this.controls.topleft,Hr.style.position="relative",Hr.style.paddingLeft="0px",Hr.style.paddingTop="0px";break;case Kt.ControlAnchor.ABSOLUTE:Yr=this.container,Hr.style.margin="0px",Hr.style.padding="0px";break;default:case Kt.ControlAnchor.NONE:Yr=this.container,Hr.style.margin="0px",Hr.style.padding="0px";break}this.controls.push(new Kt.Control(Hr,Wr,Yr)),Hr.style.display="inline-block"}},removeControl:function(Hr){Hr=Kt.getElement(Hr);var Wr=Vt(this,Hr);return Wr>=0&&(this.controls[Wr].destroy(),this.controls.splice(Wr,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var Hr;for(Hr=this.controls.length-1;Hr>=0;Hr--)if(this.controls[Hr].isVisible())return!0;return!1},setControlsEnabled:function(Hr){var Wr;for(Wr=this.controls.length-1;Wr>=0;Wr--)this.controls[Wr].setVisible(Hr);return this}};function Vt(Hr,Wr){var Yr=Hr.controls,Zr;for(Zr=Yr.length-1;Zr>=0;Zr--)if(Yr[Zr].element==Wr)return Zr;return-1}}(OpenSeadragon),function(Kt){Kt.Placement=Kt.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(OpenSeadragon),function(Kt){var Vt={},Hr=1;Kt.Viewer=function(Zi){var qs=arguments,ql=this,Vl;if(Kt.isPlainObject(Zi)||(Zi={id:qs[0],xmlPath:qs.length>1?qs[1]:void 0,prefixUrl:qs.length>2?qs[2]:void 0,controls:qs.length>3?qs[3]:void 0,overlays:qs.length>4?qs[4]:void 0}),Zi.config&&(Kt.extend(!0,Zi,Zi.config),delete Zi.config),Kt.extend(!0,this,{id:Zi.id,hash:Zi.hash||Hr++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},Kt.DEFAULT_SETTINGS,Zi),typeof this.hash>"u")throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(typeof Vt[this.hash]<"u"&&Kt.console.warn("Hash "+this.hash+" has already been used."),Vt[this.hash]={fsBoundsDelta:new Kt.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._lastScrollTime=Kt.now(),Kt.EventSource.call(this),this.addHandler("open-failed",function(Wl){var hc=Kt.getString("Errors.OpenFailed",Wl.eventSource,Wl.message);ql._showMessage(hc)}),Kt.ControlDock.call(this,Zi),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=Kt.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(Wl){Wl.width="100%",Wl.height="100%",Wl.overflow="hidden",Wl.position="absolute",Wl.top="0px",Wl.left="0px"}(this.canvas.style),Kt.setElementTouchActionNone(this.canvas),Zi.tabIndex!==""&&(this.canvas.tabIndex=Zi.tabIndex===void 0?0:Zi.tabIndex),this.container.className="openseadragon-container",function(Wl){Wl.width="100%",Wl.height="100%",Wl.position="relative",Wl.overflow="hidden",Wl.left="0px",Wl.top="0px",Wl.textAlign="left"}(this.container.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new Kt.MouseTracker({element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:Kt.delegate(this,Hn),keyHandler:Kt.delegate(this,jn),clickHandler:Kt.delegate(this,zn),dblClickHandler:Kt.delegate(this,Wn),dragHandler:Kt.delegate(this,ei),dragEndHandler:Kt.delegate(this,$i),enterHandler:Kt.delegate(this,Mi),exitHandler:Kt.delegate(this,Ni),pressHandler:Kt.delegate(this,Ts),releaseHandler:Kt.delegate(this,ps),nonPrimaryPressHandler:Kt.delegate(this,$s),nonPrimaryReleaseHandler:Kt.delegate(this,Ws),scrollHandler:Kt.delegate(this,js),pinchHandler:Kt.delegate(this,Hs)}),this.outerTracker=new Kt.MouseTracker({element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:Kt.delegate(this,zs),exitHandler:Kt.delegate(this,Xs)}),this.toolbar&&(this.toolbar=new Kt.ControlDock({element:this.toolbar})),this.bindStandardControls(),Vt[this.hash].prevContainerSize=Wr(this.container),this.world=new Kt.World({viewer:this}),this.world.addHandler("add-item",function(Wl){ql.source=ql.world.getItemAt(0).source,Vt[ql.hash].forceRedraw=!0,ql._updateRequestId||(ql._updateRequestId=tn(ql,ia))}),this.world.addHandler("remove-item",function(Wl){ql.world.getItemCount()?ql.source=ql.world.getItemAt(0).source:ql.source=null,Vt[ql.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(Wl){ql.viewport&&ql.viewport._setContentBounds(ql.world.getHomeBounds(),ql.world.getContentFactor())}),this.world.addHandler("item-index-change",function(Wl){ql.source=ql.world.getItemAt(0).source}),this.viewport=new Kt.Viewport({containerSize:Vt[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new Kt.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:Zi.timeout}),this.tileCache=new Kt.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new Kt.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=Kt.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(Vl=this.buttons.buttons.indexOf(this.rotateLeft),this.buttons.buttons.splice(Vl,1),this.buttons.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(Vl=this.buttons.buttons.indexOf(this.rotateRight),this.buttons.buttons.splice(Vl,1),this.buttons.element.removeChild(this.rotateRight.element))),this.showNavigator&&(this.navigator=new Kt.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),Vl=0;Vl<this.customControls.length;Vl++)this.addControl(this.customControls[Vl].id,{anchor:this.customControls[Vl].anchor});Kt.requestAnimationFrame(function(){nn(ql)}),this.imageSmoothingEnabled!==void 0&&!this.imageSmoothingEnabled&&this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled)},Kt.extend(Kt.Viewer.prototype,Kt.EventSource.prototype,Kt.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(Zi){return Kt.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(Zi)},openTileSource:function(Zi){return Kt.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(Zi)},open:function(Zi,qs){var ql=this;if(this.close(),!!Zi){if(this.sequenceMode&&Kt.isArray(Zi)){this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),typeof qs<"u"&&!isNaN(qs)&&(this.initialPage=qs),this.tileSources=Zi,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex);return}if(Kt.isArray(Zi)||(Zi=[Zi]),!!Zi.length){this._opening=!0;for(var Vl=Zi.length,Wl=0,hc=0,nc,wc=function(){if(Wl+hc===Vl)if(Wl){(ql._firstOpen||!ql.preserveViewport)&&(ql.viewport.goHome(!0),ql.viewport.update()),ql._firstOpen=!1;var fc=Zi[0];if(fc.tileSource&&(fc=fc.tileSource),ql.overlays&&!ql.preserveOverlays)for(var Tc=0;Tc<ql.overlays.length;Tc++)ql.currentOverlays[Tc]=Zr(ql,ql.overlays[Tc]);ql._drawOverlays(),ql._opening=!1,ql.raiseEvent("open",{source:fc})}else ql._opening=!1,ql.raiseEvent("open-failed",nc)},xc=function(fc){(!Kt.isPlainObject(fc)||!fc.tileSource)&&(fc={tileSource:fc}),fc.index!==void 0&&(Kt.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete fc.index),fc.collectionImmediately===void 0&&(fc.collectionImmediately=!0);var Tc=fc.success;fc.success=function(Cc){if(Wl++,fc.tileSource.overlays)for(var Rc=0;Rc<fc.tileSource.overlays.length;Rc++)ql.addOverlay(fc.tileSource.overlays[Rc]);Tc&&Tc(Cc),wc()};var yc=fc.error;fc.error=function(Cc){hc++,nc||(nc=Cc),yc&&yc(Cc),wc()},ql.addTiledImage(fc)},bc=0;bc<Zi.length;bc++)xc(Zi[bc]);return this}}},close:function(){return Vt[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),Vt[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(Vt[this.hash]){if(this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this._updateRequestId!==null&&(Kt.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.removeAllHandlers(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),Vt[this.hash]=null,delete Vt[this.hash],this.canvas=null,this.container=null,this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(Zi){return this.innerTracker.setTracking(Zi),this.outerTracker.setTracking(Zi),this.raiseEvent("mouse-enabled",{enabled:Zi}),this},areControlsEnabled:function(){var Zi=this.controls.length,qs;for(qs=0;qs<this.controls.length;qs++)Zi=Zi&&this.controls[qs].isVisible();return Zi},setControlsEnabled:function(Zi){return Zi?an(this):nn(this),this.raiseEvent("controls-enabled",{enabled:Zi}),this},setDebugMode:function(Zi){for(var qs=0;qs<this.world.getItemCount();qs++)this.world.getItemAt(qs).debugMode=Zi;this.debugMode=Zi,this.forceRedraw()},isFullPage:function(){return Vt[this.hash].fullPage},setFullPage:function(Zi){var qs=document.body,ql=qs.style,Vl=document.documentElement.style,Wl=this,hc,nc;if(Zi==this.isFullPage())return this;var wc={fullPage:Zi,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",wc),wc.preventDefaultAction)return this;if(Zi){for(this.elementSize=Kt.getElementSize(this.element),this.pageScroll=Kt.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=ql.margin,this.docMargin=Vl.margin,ql.margin="0",Vl.margin="0",this.bodyPadding=ql.padding,this.docPadding=Vl.padding,ql.padding="0",Vl.padding="0",this.bodyWidth=ql.width,this.docWidth=Vl.width,ql.width="100%",Vl.width="100%",this.bodyHeight=ql.height,this.docHeight=Vl.height,ql.height="100%",Vl.height="100%",this.previousBody=[],Vt[this.hash].prevElementParent=this.element.parentNode,Vt[this.hash].prevNextSibling=this.element.nextSibling,Vt[this.hash].prevElementWidth=this.element.style.width,Vt[this.hash].prevElementHeight=this.element.style.height,hc=qs.childNodes.length,nc=0;nc<hc;nc++)this.previousBody.push(qs.childNodes[0]),qs.removeChild(qs.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,qs.appendChild(this.toolbar.element),Kt.addClass(this.toolbar.element,"fullpage")),Kt.addClass(this.element,"fullpage"),qs.appendChild(this.element),this.element.style.height=Kt.getWindowSize().y+"px",this.element.style.width=Kt.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=Kt.getElementSize(this.element).y-Kt.getElementSize(this.toolbar.element).y+"px"),Vt[this.hash].fullPage=!0,Kt.delegate(this,zs)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,ql.margin=this.bodyMargin,Vl.margin=this.docMargin,ql.padding=this.bodyPadding,Vl.padding=this.docPadding,ql.width=this.bodyWidth,Vl.width=this.docWidth,ql.height=this.bodyHeight,Vl.height=this.docHeight,qs.removeChild(this.element),hc=this.previousBody.length,nc=0;nc<hc;nc++)qs.appendChild(this.previousBody.shift());Kt.removeClass(this.element,"fullpage"),Vt[this.hash].prevElementParent.insertBefore(this.element,Vt[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(qs.removeChild(this.toolbar.element),Kt.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=Vt[this.hash].prevElementWidth,this.element.style.height=Vt[this.hash].prevElementHeight;var xc=0,bc=function(){Kt.setPageScroll(Wl.pageScroll);var fc=Kt.getPageScroll();xc++,xc<10&&(fc.x!==Wl.pageScroll.x||fc.y!==Wl.pageScroll.y)&&Kt.requestAnimationFrame(bc)};Kt.requestAnimationFrame(bc),Vt[this.hash].fullPage=!1,Kt.delegate(this,Xs)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:Zi}),this},setFullScreen:function(Zi){var qs=this;if(!Kt.supportsFullScreen)return this.setFullPage(Zi);if(Kt.isFullScreen()===Zi)return this;var ql={fullScreen:Zi,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",ql),ql.preventDefaultAction)return this;if(Zi){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var Vl=function(){var Wl=Kt.isFullScreen();Wl||(Kt.removeEvent(document,Kt.fullScreenEventName,Vl),Kt.removeEvent(document,Kt.fullScreenErrorEventName,Vl),qs.setFullPage(!1),qs.isFullPage()&&(qs.element.style.width=qs.fullPageStyleWidth,qs.element.style.height=qs.fullPageStyleHeight)),qs.navigator&&qs.viewport&&setTimeout(function(){qs.navigator.update(qs.viewport)}),qs.raiseEvent("full-screen",{fullScreen:Wl})};Kt.addEvent(document,Kt.fullScreenEventName,Vl),Kt.addEvent(document,Kt.fullScreenErrorEventName,Vl),Kt.requestFullScreen(document.body)}else Kt.exitFullScreen();return this},isVisible:function(){return this.container.style.visibility!="hidden"},setVisible:function(Zi){return this.container.style.visibility=Zi?"":"hidden",this.raiseEvent("visible",{visible:Zi}),this},addTiledImage:function(Zi){Kt.console.assert(Zi,"[Viewer.addTiledImage] options is required"),Kt.console.assert(Zi.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),Kt.console.assert(!Zi.replace||Zi.index>-1&&Zi.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var qs=this;Zi.replace&&(Zi.replaceItem=qs.world.getItemAt(Zi.index)),this._hideMessage(),Zi.placeholderFillStyle===void 0&&(Zi.placeholderFillStyle=this.placeholderFillStyle),Zi.opacity===void 0&&(Zi.opacity=this.opacity),Zi.preload===void 0&&(Zi.preload=this.preload),Zi.compositeOperation===void 0&&(Zi.compositeOperation=this.compositeOperation),Zi.crossOriginPolicy===void 0&&(Zi.crossOriginPolicy=Zi.tileSource.crossOriginPolicy!==void 0?Zi.tileSource.crossOriginPolicy:this.crossOriginPolicy),Zi.ajaxWithCredentials===void 0&&(Zi.ajaxWithCredentials=this.ajaxWithCredentials),Zi.loadTilesWithAjax===void 0&&(Zi.loadTilesWithAjax=this.loadTilesWithAjax),Zi.ajaxHeaders===void 0||Zi.ajaxHeaders===null?Zi.ajaxHeaders=this.ajaxHeaders:Kt.isPlainObject(Zi.ajaxHeaders)&&Kt.isPlainObject(this.ajaxHeaders)&&(Zi.ajaxHeaders=Kt.extend({},this.ajaxHeaders,Zi.ajaxHeaders));var ql={options:Zi};function Vl(nc){for(var wc=0;wc<qs._loadQueue.length;wc++)if(qs._loadQueue[wc]===ql){qs._loadQueue.splice(wc,1);break}qs._loadQueue.length===0&&Wl(ql),qs.raiseEvent("add-item-failed",nc),Zi.error&&Zi.error(nc)}function Wl(nc){qs.collectionMode&&(qs.world.arrange({immediately:nc.options.collectionImmediately,rows:qs.collectionRows,columns:qs.collectionColumns,layout:qs.collectionLayout,tileSize:qs.collectionTileSize,tileMargin:qs.collectionTileMargin}),qs.world.setAutoRefigureSizes(!0))}if(Kt.isArray(Zi.tileSource)){setTimeout(function(){Vl({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:Zi.tileSource,options:Zi})});return}this._loadQueue.push(ql);function hc(){for(var nc,wc,xc;qs._loadQueue.length&&(nc=qs._loadQueue[0],!!nc.tileSource);){if(qs._loadQueue.splice(0,1),nc.options.replace){var bc=qs.world.getIndexOfItem(nc.options.replaceItem);bc!=-1&&(nc.options.index=bc),qs.world.removeItem(nc.options.replaceItem)}wc=new Kt.TiledImage({viewer:qs,source:nc.tileSource,viewport:qs.viewport,drawer:qs.drawer,tileCache:qs.tileCache,imageLoader:qs.imageLoader,x:nc.options.x,y:nc.options.y,width:nc.options.width,height:nc.options.height,fitBounds:nc.options.fitBounds,fitBoundsPlacement:nc.options.fitBoundsPlacement,clip:nc.options.clip,placeholderFillStyle:nc.options.placeholderFillStyle,opacity:nc.options.opacity,preload:nc.options.preload,degrees:nc.options.degrees,compositeOperation:nc.options.compositeOperation,springStiffness:qs.springStiffness,animationTime:qs.animationTime,minZoomImageRatio:qs.minZoomImageRatio,wrapHorizontal:qs.wrapHorizontal,wrapVertical:qs.wrapVertical,immediateRender:qs.immediateRender,blendTime:qs.blendTime,alwaysBlend:qs.alwaysBlend,minPixelRatio:qs.minPixelRatio,smoothTileEdgesMinZoom:qs.smoothTileEdgesMinZoom,iOSDevice:qs.iOSDevice,crossOriginPolicy:nc.options.crossOriginPolicy,ajaxWithCredentials:nc.options.ajaxWithCredentials,loadTilesWithAjax:nc.options.loadTilesWithAjax,ajaxHeaders:nc.options.ajaxHeaders,debugMode:qs.debugMode}),qs.collectionMode&&qs.world.setAutoRefigureSizes(!1),qs.world.addItem(wc,{index:nc.options.index}),qs._loadQueue.length===0&&Wl(nc),qs.world.getItemCount()===1&&!qs.preserveViewport&&qs.viewport.goHome(!0),qs.navigator&&(xc=Kt.extend({},nc.options,{replace:!1,originalTiledImage:wc,tileSource:nc.tileSource}),qs.navigator.addTiledImage(xc)),nc.options.success&&nc.options.success({item:wc})}}Yr(this,Zi.tileSource,Zi,function(nc){ql.tileSource=nc,hc()},function(nc){nc.options=Zi,Vl(nc),hc()})},addSimpleImage:function(Zi){Kt.console.assert(Zi,"[Viewer.addSimpleImage] options is required"),Kt.console.assert(Zi.url,"[Viewer.addSimpleImage] options.url is required");var qs=Kt.extend({},Zi,{tileSource:{type:"image",url:Zi.url}});delete qs.url,this.addTiledImage(qs)},addLayer:function(Zi){var qs=this;Kt.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var ql=Kt.extend({},Zi,{success:function(Vl){qs.raiseEvent("add-layer",{options:Zi,drawer:Vl.item})},error:function(Vl){qs.raiseEvent("add-layer-failed",Vl)}});return this.addTiledImage(ql),this},getLayerAtLevel:function(Zi){return Kt.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(Zi)},getLevelOfLayer:function(Zi){return Kt.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(Zi)},getLayersCount:function(){return Kt.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(Zi,qs){return Kt.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(Zi,qs)},removeLayer:function(Zi){return Kt.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(Zi)},forceRedraw:function(){return Vt[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var Zi=Kt.delegate(this,$n),qs=Kt.delegate(this,ln),ql=Kt.delegate(this,Ec),Vl=Kt.delegate(this,$c),Wl=this.navImages,hc=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(hc=!1),this.previousButton=new Kt.Button({element:this.previousButton?Kt.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Kt.getString("Tooltips.PreviousPage"),srcRest:Gs(this.prefixUrl,Wl.previous.REST),srcGroup:Gs(this.prefixUrl,Wl.previous.GROUP),srcHover:Gs(this.prefixUrl,Wl.previous.HOVER),srcDown:Gs(this.prefixUrl,Wl.previous.DOWN),onRelease:Vl,onFocus:Zi,onBlur:qs}),this.nextButton=new Kt.Button({element:this.nextButton?Kt.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Kt.getString("Tooltips.NextPage"),srcRest:Gs(this.prefixUrl,Wl.next.REST),srcGroup:Gs(this.prefixUrl,Wl.next.GROUP),srcHover:Gs(this.prefixUrl,Wl.next.HOVER),srcDown:Gs(this.prefixUrl,Wl.next.DOWN),onRelease:ql,onFocus:Zi,onBlur:qs}),this.navPrevNextWrap||this.previousButton.disable(),(!this.tileSources||!this.tileSources.length)&&this.nextButton.disable(),hc&&(this.paging=new Kt.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:Kt.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||Kt.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var Zi=Kt.delegate(this,Hl),qs=Kt.delegate(this,sa),ql=Kt.delegate(this,zl),Vl=Kt.delegate(this,Js),Wl=Kt.delegate(this,ec),hc=Kt.delegate(this,ac),nc=Kt.delegate(this,rc),wc=Kt.delegate(this,uc),xc=Kt.delegate(this,pc),bc=Kt.delegate(this,cc),fc=Kt.delegate(this,$n),Tc=Kt.delegate(this,ln),yc=this.navImages,Cc=[],Rc=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(Rc=!1),this.showZoomControl&&(Cc.push(this.zoomInButton=new Kt.Button({element:this.zoomInButton?Kt.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Kt.getString("Tooltips.ZoomIn"),srcRest:Gs(this.prefixUrl,yc.zoomIn.REST),srcGroup:Gs(this.prefixUrl,yc.zoomIn.GROUP),srcHover:Gs(this.prefixUrl,yc.zoomIn.HOVER),srcDown:Gs(this.prefixUrl,yc.zoomIn.DOWN),onPress:Zi,onRelease:qs,onClick:ql,onEnter:Zi,onExit:qs,onFocus:fc,onBlur:Tc})),Cc.push(this.zoomOutButton=new Kt.Button({element:this.zoomOutButton?Kt.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Kt.getString("Tooltips.ZoomOut"),srcRest:Gs(this.prefixUrl,yc.zoomOut.REST),srcGroup:Gs(this.prefixUrl,yc.zoomOut.GROUP),srcHover:Gs(this.prefixUrl,yc.zoomOut.HOVER),srcDown:Gs(this.prefixUrl,yc.zoomOut.DOWN),onPress:Vl,onRelease:qs,onClick:Wl,onEnter:Vl,onExit:qs,onFocus:fc,onBlur:Tc}))),this.showHomeControl&&Cc.push(this.homeButton=new Kt.Button({element:this.homeButton?Kt.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Kt.getString("Tooltips.Home"),srcRest:Gs(this.prefixUrl,yc.home.REST),srcGroup:Gs(this.prefixUrl,yc.home.GROUP),srcHover:Gs(this.prefixUrl,yc.home.HOVER),srcDown:Gs(this.prefixUrl,yc.home.DOWN),onRelease:hc,onFocus:fc,onBlur:Tc})),this.showFullPageControl&&Cc.push(this.fullPageButton=new Kt.Button({element:this.fullPageButton?Kt.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Kt.getString("Tooltips.FullPage"),srcRest:Gs(this.prefixUrl,yc.fullpage.REST),srcGroup:Gs(this.prefixUrl,yc.fullpage.GROUP),srcHover:Gs(this.prefixUrl,yc.fullpage.HOVER),srcDown:Gs(this.prefixUrl,yc.fullpage.DOWN),onRelease:nc,onFocus:fc,onBlur:Tc})),this.showRotationControl&&(Cc.push(this.rotateLeftButton=new Kt.Button({element:this.rotateLeftButton?Kt.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Kt.getString("Tooltips.RotateLeft"),srcRest:Gs(this.prefixUrl,yc.rotateleft.REST),srcGroup:Gs(this.prefixUrl,yc.rotateleft.GROUP),srcHover:Gs(this.prefixUrl,yc.rotateleft.HOVER),srcDown:Gs(this.prefixUrl,yc.rotateleft.DOWN),onRelease:wc,onFocus:fc,onBlur:Tc})),Cc.push(this.rotateRightButton=new Kt.Button({element:this.rotateRightButton?Kt.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Kt.getString("Tooltips.RotateRight"),srcRest:Gs(this.prefixUrl,yc.rotateright.REST),srcGroup:Gs(this.prefixUrl,yc.rotateright.GROUP),srcHover:Gs(this.prefixUrl,yc.rotateright.HOVER),srcDown:Gs(this.prefixUrl,yc.rotateright.DOWN),onRelease:xc,onFocus:fc,onBlur:Tc}))),this.showFlipControl&&Cc.push(this.flipButton=new Kt.Button({element:this.flipButton?Kt.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:Kt.getString("Tooltips.Flip"),srcRest:Gs(this.prefixUrl,yc.flip.REST),srcGroup:Gs(this.prefixUrl,yc.flip.GROUP),srcHover:Gs(this.prefixUrl,yc.flip.HOVER),srcDown:Gs(this.prefixUrl,yc.flip.DOWN),onRelease:bc,onFocus:fc,onBlur:Tc})),Rc&&(this.buttons=new Kt.ButtonGroup({buttons:Cc,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",Kt.delegate(this,sc)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||Kt.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||Kt.ControlAnchor.TOP_LEFT}))),this},currentPage:function(){return this._sequenceIndex},goToPage:function(Zi){return this.tileSources&&Zi>=0&&Zi<this.tileSources.length&&(this._sequenceIndex=Zi,this._updateSequenceButtons(Zi),this.open(this.tileSources[Zi]),this.referenceStrip&&this.referenceStrip.setFocus(Zi),this.raiseEvent("page",{page:Zi})),this},addOverlay:function(Zi,qs,ql,Vl){var Wl;if(Kt.isPlainObject(Zi)?Wl=Zi:Wl={element:Zi,location:qs,placement:ql,onDraw:Vl},Zi=Kt.getElement(Wl.element),en(this.currentOverlays,Zi)>=0)return this;var hc=Zr(this,Wl);return this.currentOverlays.push(hc),hc.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:Zi,location:Wl.location,placement:Wl.placement}),this},updateOverlay:function(Zi,qs,ql){var Vl;return Zi=Kt.getElement(Zi),Vl=en(this.currentOverlays,Zi),Vl>=0&&(this.currentOverlays[Vl].update(qs,ql),Vt[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:Zi,location:qs,placement:ql})),this},removeOverlay:function(Zi){var qs;return Zi=Kt.getElement(Zi),qs=en(this.currentOverlays,Zi),qs>=0&&(this.currentOverlays[qs].destroy(),this.currentOverlays.splice(qs,1),Vt[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:Zi})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return Vt[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(Zi){var qs;return Zi=Kt.getElement(Zi),qs=en(this.currentOverlays,Zi),qs>=0?this.currentOverlays[qs]:null},_updateSequenceButtons:function(Zi){this.nextButton&&(!this.tileSources||this.tileSources.length-1===Zi?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(Zi>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(Zi){this._hideMessage();var qs=Kt.makeNeutralElement("div");qs.appendChild(document.createTextNode(Zi)),this.messageDiv=Kt.makeCenteredNode(qs),Kt.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var Zi=this.messageDiv;Zi&&(Zi.parentNode.removeChild(Zi),delete this.messageDiv)},gestureSettingsByDeviceType:function(Zi){switch(Zi){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var Zi,qs=this.currentOverlays.length;for(Zi=0;Zi<qs;Zi++)this.currentOverlays[Zi].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new Kt.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else Kt.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')}});function Wr(Zi){return Zi=Kt.getElement(Zi),new Kt.Point(Zi.clientWidth===0?1:Zi.clientWidth,Zi.clientHeight===0?1:Zi.clientHeight)}function Yr(Zi,qs,ql,Vl,Wl){var hc=Zi;if(Kt.type(qs)=="string"){if(qs.match(/^\s*<.*>\s*$/))qs=Kt.parseXml(qs);else if(qs.match(/^\s*[\{\[].*[\}\]]\s*$/))try{var nc=Kt.parseJSON(qs);qs=nc}catch{}}function wc(xc,bc){xc.ready?Vl(xc):(xc.addHandler("ready",function(){Vl(xc)}),xc.addHandler("open-failed",function(fc){Wl({message:fc.message,source:bc})}))}setTimeout(function(){if(Kt.type(qs)=="string")qs=new Kt.TileSource({url:qs,crossOriginPolicy:ql.crossOriginPolicy!==void 0?ql.crossOriginPolicy:Zi.crossOriginPolicy,ajaxWithCredentials:Zi.ajaxWithCredentials,ajaxHeaders:Zi.ajaxHeaders,useCanvas:Zi.useCanvas,success:function(Tc){Vl(Tc.tileSource)}}),qs.addHandler("open-failed",function(Tc){Wl(Tc)});else if(Kt.isPlainObject(qs)||qs.nodeType)if(qs.crossOriginPolicy===void 0&&(ql.crossOriginPolicy!==void 0||Zi.crossOriginPolicy!==void 0)&&(qs.crossOriginPolicy=ql.crossOriginPolicy!==void 0?ql.crossOriginPolicy:Zi.crossOriginPolicy),qs.ajaxWithCredentials===void 0&&(qs.ajaxWithCredentials=Zi.ajaxWithCredentials),qs.useCanvas===void 0&&(qs.useCanvas=Zi.useCanvas),Kt.isFunction(qs.getTileUrl)){var xc=new Kt.TileSource(qs);xc.getTileUrl=qs.getTileUrl,Vl(xc)}else{var bc=Kt.TileSource.determineType(hc,qs);if(!bc){Wl({message:"Unable to load TileSource",source:qs});return}var fc=bc.prototype.configure.apply(hc,[qs]);wc(new bc(fc),qs)}else wc(qs,qs)})}function Zr(Zi,qs){if(qs instanceof Kt.Overlay)return qs;var ql=null;if(qs.element)ql=Kt.getElement(qs.element);else{var Vl=qs.id?qs.id:"openseadragon-overlay-"+Math.floor(Math.random()*1e7);ql=Kt.getElement(qs.id),ql||(ql=document.createElement("a"),ql.href="#/overlay/"+Vl),ql.id=Vl,Kt.addClass(ql,qs.className?qs.className:"openseadragon-overlay")}var Wl=qs.location,hc=qs.width,nc=qs.height;if(!Wl){var wc=qs.x,xc=qs.y;if(qs.px!==void 0){var bc=Zi.viewport.imageToViewportRectangle(new Kt.Rect(qs.px,qs.py,hc||0,nc||0));wc=bc.x,xc=bc.y,hc=hc!==void 0?bc.width:void 0,nc=nc!==void 0?bc.height:void 0}Wl=new Kt.Point(wc,xc)}var fc=qs.placement;return fc&&Kt.type(fc)==="string"&&(fc=Kt.Placement[qs.placement.toUpperCase()]),new Kt.Overlay({element:ql,location:Wl,placement:fc,onDraw:qs.onDraw,checkResize:qs.checkResize,width:hc,height:nc,rotationMode:qs.rotationMode})}function en(Zi,qs){var ql;for(ql=Zi.length-1;ql>=0;ql--)if(Zi[ql].element===qs)return ql;return-1}function tn(Zi,qs){return Kt.requestAnimationFrame(function(){qs(Zi)})}function rn(Zi){Kt.requestAnimationFrame(function(){on(Zi)})}function nn(Zi){Zi.autoHideControls&&(Zi.controlsShouldFade=!0,Zi.controlsFadeBeginTime=Kt.now()+Zi.controlsFadeDelay,window.setTimeout(function(){rn(Zi)},Zi.controlsFadeDelay))}function on(Zi){var qs,ql,Vl,Wl;if(Zi.controlsShouldFade){for(qs=Kt.now(),ql=qs-Zi.controlsFadeBeginTime,Vl=1-ql/Zi.controlsFadeLength,Vl=Math.min(1,Vl),Vl=Math.max(0,Vl),Wl=Zi.controls.length-1;Wl>=0;Wl--)Zi.controls[Wl].autoFade&&Zi.controls[Wl].setOpacity(Vl);Vl>0&&rn(Zi)}}function an(Zi){var qs;for(Zi.controlsShouldFade=!1,qs=Zi.controls.length-1;qs>=0;qs--)Zi.controls[qs].setOpacity(1)}function $n(){an(this)}function ln(){nn(this)}function Hn(Zi){var qs={originalEvent:Zi.originalEvent,preventDefaultAction:Zi.preventDefaultAction,preventVerticalPan:Zi.preventVerticalPan,preventHorizontalPan:Zi.preventHorizontalPan};if(this.raiseEvent("canvas-key",qs),!qs.preventDefaultAction&&!Zi.ctrl&&!Zi.alt&&!Zi.meta)switch(Zi.keyCode){case 38:return qs.preventVerticalPan||(Zi.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Kt.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 40:return qs.preventVerticalPan||(Zi.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Kt.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 37:return qs.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Kt.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;case 39:return qs.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Kt.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;default:return!0}else return!0}function jn(Zi){var qs={originalEvent:Zi.originalEvent,preventDefaultAction:Zi.preventDefaultAction,preventVerticalPan:Zi.preventVerticalPan,preventHorizontalPan:Zi.preventHorizontalPan};if(this.raiseEvent("canvas-key",qs),!qs.preventDefaultAction&&!Zi.ctrl&&!Zi.alt&&!Zi.meta)switch(Zi.keyCode){case 43:case 61:return this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),!1;case 45:return this.viewport.zoomBy(.9),this.viewport.applyConstraints(),!1;case 48:return this.viewport.goHome(),this.viewport.applyConstraints(),!1;case 119:case 87:return qs.preventVerticalPan||(Zi.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Kt.Point(0,-40))),this.viewport.applyConstraints()),!1;case 115:case 83:return qs.preventVerticalPan||(Zi.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Kt.Point(0,40))),this.viewport.applyConstraints()),!1;case 97:return qs.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Kt.Point(-40,0))),this.viewport.applyConstraints()),!1;case 100:return qs.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new Kt.Point(40,0))),this.viewport.applyConstraints()),!1;case 114:return this.viewport.flipped?this.viewport.setRotation(Kt.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)):this.viewport.setRotation(Kt.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 82:return this.viewport.flipped?this.viewport.setRotation(Kt.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)):this.viewport.setRotation(Kt.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 102:return this.viewport.toggleFlip(),!1;default:return!0}else return!0}function zn(Zi){var qs,ql=document.activeElement==this.canvas;ql||this.canvas.focus(),this.viewport.flipped&&(Zi.position.x=this.viewport.getContainerSize().x-Zi.position.x);var Vl={tracker:Zi.eventSource,position:Zi.position,quick:Zi.quick,shift:Zi.shift,originalEvent:Zi.originalEvent,preventDefaultAction:Zi.preventDefaultAction};this.raiseEvent("canvas-click",Vl),!Vl.preventDefaultAction&&this.viewport&&Zi.quick&&(qs=this.gestureSettingsByDeviceType(Zi.pointerType),qs.clickToZoom&&(this.viewport.zoomBy(Zi.shift?1/this.zoomPerClick:this.zoomPerClick,qs.zoomToRefPoint?this.viewport.pointFromPixel(Zi.position,!0):null),this.viewport.applyConstraints()))}function Wn(Zi){var qs,ql={tracker:Zi.eventSource,position:Zi.position,shift:Zi.shift,originalEvent:Zi.originalEvent,preventDefaultAction:Zi.preventDefaultAction};this.raiseEvent("canvas-double-click",ql),!ql.preventDefaultAction&&this.viewport&&(qs=this.gestureSettingsByDeviceType(Zi.pointerType),qs.dblClickToZoom&&(this.viewport.zoomBy(Zi.shift?1/this.zoomPerClick:this.zoomPerClick,qs.zoomToRefPoint?this.viewport.pointFromPixel(Zi.position,!0):null),this.viewport.applyConstraints()))}function ei(Zi){var qs,ql={tracker:Zi.eventSource,position:Zi.position,delta:Zi.delta,speed:Zi.speed,direction:Zi.direction,shift:Zi.shift,originalEvent:Zi.originalEvent,preventDefaultAction:Zi.preventDefaultAction};if(this.raiseEvent("canvas-drag",ql),!ql.preventDefaultAction&&this.viewport){if(qs=this.gestureSettingsByDeviceType(Zi.pointerType),this.panHorizontal||(Zi.delta.x=0),this.panVertical||(Zi.delta.y=0),this.viewport.flipped&&(Zi.delta.x=-Zi.delta.x),this.constrainDuringPan){var Vl=this.viewport.deltaPointsFromPixels(Zi.delta.negate());this.viewport.centerSpringX.target.value+=Vl.x,this.viewport.centerSpringY.target.value+=Vl.y;var Wl=this.viewport.getBounds(),hc=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=Vl.x,this.viewport.centerSpringY.target.value-=Vl.y,Wl.x!=hc.x&&(Zi.delta.x=0),Wl.y!=hc.y&&(Zi.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(Zi.delta.negate()),qs.flickEnabled&&!this.constrainDuringPan)}}function $i(Zi){if(!Zi.preventDefaultAction&&this.viewport){var qs=this.gestureSettingsByDeviceType(Zi.pointerType);if(qs.flickEnabled&&Zi.speed>=qs.flickMinSpeed){var ql=0;this.panHorizontal&&(ql=qs.flickMomentum*Zi.speed*Math.cos(Zi.direction));var Vl=0;this.panVertical&&(Vl=qs.flickMomentum*Zi.speed*Math.sin(Zi.direction));var Wl=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),hc=this.viewport.pointFromPixel(new Kt.Point(Wl.x-ql,Wl.y-Vl));this.viewport.panTo(hc,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",{tracker:Zi.eventSource,position:Zi.position,speed:Zi.speed,direction:Zi.direction,shift:Zi.shift,originalEvent:Zi.originalEvent})}function Mi(Zi){this.raiseEvent("canvas-enter",{tracker:Zi.eventSource,pointerType:Zi.pointerType,position:Zi.position,buttons:Zi.buttons,pointers:Zi.pointers,insideElementPressed:Zi.insideElementPressed,buttonDownAny:Zi.buttonDownAny,originalEvent:Zi.originalEvent})}function Ni(Zi){window.location!=window.parent.location&&Kt.MouseTracker.resetAllMouseTrackers(),this.raiseEvent("canvas-exit",{tracker:Zi.eventSource,pointerType:Zi.pointerType,position:Zi.position,buttons:Zi.buttons,pointers:Zi.pointers,insideElementPressed:Zi.insideElementPressed,buttonDownAny:Zi.buttonDownAny,originalEvent:Zi.originalEvent})}function Ts(Zi){this.raiseEvent("canvas-press",{tracker:Zi.eventSource,pointerType:Zi.pointerType,position:Zi.position,insideElementPressed:Zi.insideElementPressed,insideElementReleased:Zi.insideElementReleased,originalEvent:Zi.originalEvent})}function ps(Zi){this.raiseEvent("canvas-release",{tracker:Zi.eventSource,pointerType:Zi.pointerType,position:Zi.position,insideElementPressed:Zi.insideElementPressed,insideElementReleased:Zi.insideElementReleased,originalEvent:Zi.originalEvent})}function $s(Zi){this.raiseEvent("canvas-nonprimary-press",{tracker:Zi.eventSource,position:Zi.position,pointerType:Zi.pointerType,button:Zi.button,buttons:Zi.buttons,originalEvent:Zi.originalEvent})}function Ws(Zi){this.raiseEvent("canvas-nonprimary-release",{tracker:Zi.eventSource,position:Zi.position,pointerType:Zi.pointerType,button:Zi.button,buttons:Zi.buttons,originalEvent:Zi.originalEvent})}function Hs(Zi){var qs,ql,Vl,Wl;if(!Zi.preventDefaultAction&&this.viewport&&(qs=this.gestureSettingsByDeviceType(Zi.pointerType),qs.pinchToZoom&&(ql=this.viewport.pointFromPixel(Zi.center,!0),Vl=this.viewport.pointFromPixel(Zi.lastCenter,!0),Wl=Vl.minus(ql),this.panHorizontal||(Wl.x=0),this.panVertical||(Wl.y=0),this.viewport.zoomBy(Zi.distance/Zi.lastDistance,ql,!0),qs.zoomToRefPoint&&this.viewport.panBy(Wl,!0),this.viewport.applyConstraints()),qs.pinchRotate)){var hc=Math.atan2(Zi.gesturePoints[0].currentPos.y-Zi.gesturePoints[1].currentPos.y,Zi.gesturePoints[0].currentPos.x-Zi.gesturePoints[1].currentPos.x),nc=Math.atan2(Zi.gesturePoints[0].lastPos.y-Zi.gesturePoints[1].lastPos.y,Zi.gesturePoints[0].lastPos.x-Zi.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(hc-nc)*(180/Math.PI))}return this.raiseEvent("canvas-pinch",{tracker:Zi.eventSource,gesturePoints:Zi.gesturePoints,lastCenter:Zi.lastCenter,center:Zi.center,lastDistance:Zi.lastDistance,distance:Zi.distance,shift:Zi.shift,originalEvent:Zi.originalEvent}),!1}function js(Zi){var qs,ql,Vl,Wl;if(Vl=Kt.now(),Wl=Vl-this._lastScrollTime,Wl>this.minScrollDeltaTime){if(this._lastScrollTime=Vl,this.viewport.flipped&&(Zi.position.x=this.viewport.getContainerSize().x-Zi.position.x),!Zi.preventDefaultAction&&this.viewport&&(qs=this.gestureSettingsByDeviceType(Zi.pointerType),qs.scrollToZoom&&(ql=Math.pow(this.zoomPerScroll,Zi.scroll),this.viewport.zoomBy(ql,qs.zoomToRefPoint?this.viewport.pointFromPixel(Zi.position,!0):null),this.viewport.applyConstraints())),this.raiseEvent("canvas-scroll",{tracker:Zi.eventSource,position:Zi.position,scroll:Zi.scroll,shift:Zi.shift,originalEvent:Zi.originalEvent}),qs&&qs.scrollToZoom)return!1}else if(qs=this.gestureSettingsByDeviceType(Zi.pointerType),qs&&qs.scrollToZoom)return!1}function zs(Zi){Vt[this.hash].mouseInside=!0,an(this),this.raiseEvent("container-enter",{tracker:Zi.eventSource,position:Zi.position,buttons:Zi.buttons,pointers:Zi.pointers,insideElementPressed:Zi.insideElementPressed,buttonDownAny:Zi.buttonDownAny,originalEvent:Zi.originalEvent})}function Xs(Zi){Zi.pointers<1&&(Vt[this.hash].mouseInside=!1,Vt[this.hash].animating||nn(this)),this.raiseEvent("container-exit",{tracker:Zi.eventSource,position:Zi.position,buttons:Zi.buttons,pointers:Zi.pointers,insideElementPressed:Zi.insideElementPressed,buttonDownAny:Zi.buttonDownAny,originalEvent:Zi.originalEvent})}function ia(Zi){Qs(Zi),Zi.isOpen()?Zi._updateRequestId=tn(Zi,ia):Zi._updateRequestId=!1}function Qs(Zi){if(!Zi._opening){if(Zi.autoResize){var qs=Wr(Zi.container),ql=Vt[Zi.hash].prevContainerSize;if(!qs.equals(ql)){var Vl=Zi.viewport;if(Zi.preserveImageSizeOnResize){var Wl=ql.x/qs.x,hc=Vl.getZoom()*Wl,nc=Vl.getCenter();Vl.resize(qs,!1),Vl.zoomTo(hc,null,!0),Vl.panTo(nc,!0)}else{var wc=Vl.getBounds();Vl.resize(qs,!0),Vl.fitBoundsWithConstraints(wc,!0)}Vt[Zi.hash].prevContainerSize=qs,Vt[Zi.hash].forceRedraw=!0}}var xc=Zi.viewport.update(),bc=Zi.world.update()||xc;xc&&Zi.raiseEvent("viewport-change"),Zi.referenceStrip&&(bc=Zi.referenceStrip.update(Zi.viewport)||bc),!Vt[Zi.hash].animating&&bc&&(Zi.raiseEvent("animation-start"),an(Zi)),(bc||Vt[Zi.hash].forceRedraw||Zi.world.needsDraw())&&(Zs(Zi),Zi._drawOverlays(),Zi.navigator&&Zi.navigator.update(Zi.viewport),Vt[Zi.hash].forceRedraw=!1,bc&&Zi.raiseEvent("animation")),Vt[Zi.hash].animating&&!bc&&(Zi.raiseEvent("animation-finish"),Vt[Zi.hash].mouseInside||nn(Zi)),Vt[Zi.hash].animating=bc}}function Zs(Zi){Zi.imageLoader.clear(),Zi.drawer.clear(),Zi.world.draw(),Zi.raiseEvent("update-viewport",{})}function Gs(Zi,qs){return Zi?Zi+qs:qs}function Hl(){Vt[this.hash].lastZoomTime=Kt.now(),Vt[this.hash].zoomFactor=this.zoomPerSecond,Vt[this.hash].zooming=!0,Ca(this)}function Js(){Vt[this.hash].lastZoomTime=Kt.now(),Vt[this.hash].zoomFactor=1/this.zoomPerSecond,Vt[this.hash].zooming=!0,Ca(this)}function sa(){Vt[this.hash].zooming=!1}function Ca(Zi){Kt.requestAnimationFrame(Kt.delegate(Zi,tc))}function tc(){var Zi,qs,ql;Vt[this.hash].zooming&&this.viewport&&(Zi=Kt.now(),qs=Zi-Vt[this.hash].lastZoomTime,ql=Math.pow(Vt[this.hash].zoomFactor,qs/1e3),this.viewport.zoomBy(ql),this.viewport.applyConstraints(),Vt[this.hash].lastZoomTime=Zi,Ca(this))}function zl(){this.viewport&&(Vt[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function ec(){this.viewport&&(Vt[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function sc(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function ac(){this.viewport&&this.viewport.goHome()}function rc(){this.isFullPage()&&!Kt.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function uc(){if(this.viewport){var Zi=this.viewport.getRotation();this.viewport.flipped?Zi=Kt.positiveModulo(Zi+this.rotationIncrement,360):Zi=Kt.positiveModulo(Zi-this.rotationIncrement,360),this.viewport.setRotation(Zi)}}function pc(){if(this.viewport){var Zi=this.viewport.getRotation();this.viewport.flipped?Zi=Kt.positiveModulo(Zi-this.rotationIncrement,360):Zi=Kt.positiveModulo(Zi+this.rotationIncrement,360),this.viewport.setRotation(Zi)}}function cc(){this.viewport.toggleFlip()}function $c(){var Zi=this._sequenceIndex-1;this.navPrevNextWrap&&Zi<0&&(Zi+=this.tileSources.length),this.goToPage(Zi)}function Ec(){var Zi=this._sequenceIndex+1;this.navPrevNextWrap&&Zi>=this.tileSources.length&&(Zi=0),this.goToPage(Zi)}}(OpenSeadragon),function(Kt){Kt.Navigator=function(tn){var rn=tn.viewer,nn=this,on,an;tn.id?(this.element=document.getElementById(tn.id),tn.controlOptions={anchor:Kt.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(tn.id="navigator-"+Kt.now(),this.element=Kt.makeNeutralElement("div"),tn.controlOptions={anchor:Kt.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:tn.autoFade},tn.position&&(tn.position=="BOTTOM_RIGHT"?tn.controlOptions.anchor=Kt.ControlAnchor.BOTTOM_RIGHT:tn.position=="BOTTOM_LEFT"?tn.controlOptions.anchor=Kt.ControlAnchor.BOTTOM_LEFT:tn.position=="TOP_RIGHT"?tn.controlOptions.anchor=Kt.ControlAnchor.TOP_RIGHT:tn.position=="TOP_LEFT"?tn.controlOptions.anchor=Kt.ControlAnchor.TOP_LEFT:tn.position=="ABSOLUTE"&&(tn.controlOptions.anchor=Kt.ControlAnchor.ABSOLUTE,tn.controlOptions.top=tn.top,tn.controlOptions.left=tn.left,tn.controlOptions.height=tn.height,tn.controlOptions.width=tn.width))),this.element.id=tn.id,this.element.className+=" navigator",tn=Kt.extend(!0,{sizeRatio:Kt.DEFAULT_SETTINGS.navigatorSizeRatio},tn,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:tn.autoResize,minZoomImageRatio:1,background:tn.background,opacity:tn.opacity,borderColor:tn.borderColor,displayRegionColor:tn.displayRegionColor}),tn.minPixelRatio=this.minPixelRatio=rn.minPixelRatio,Kt.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new Kt.Point(1,1),this.totalBorderWidths=new Kt.Point(this.borderWidth*2,this.borderWidth*2).minus(this.fudge),tn.controlOptions.anchor!=Kt.ControlAnchor.NONE&&function(Hn,jn){Hn.margin="0px",Hn.border=jn+"px solid "+tn.borderColor,Hn.padding="0px",Hn.background=tn.background,Hn.opacity=tn.opacity,Hn.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=Kt.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(Hn,jn){Hn.position="relative",Hn.top="0px",Hn.left="0px",Hn.fontSize="0px",Hn.overflow="hidden",Hn.border=jn+"px solid "+tn.displayRegionColor,Hn.margin="0px",Hn.padding="0px",Hn.background="transparent",Hn.float="left",Hn.cssFloat="left",Hn.styleFloat="left",Hn.zIndex=999999999,Hn.cursor="default"}(this.displayRegion.style,this.borderWidth),this.displayRegionContainer=Kt.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",rn.addControl(this.element,tn.controlOptions),this._resizeWithViewer=tn.controlOptions.anchor!=Kt.ControlAnchor.ABSOLUTE&&tn.controlOptions.anchor!=Kt.ControlAnchor.NONE,tn.width&&tn.height?(this.setWidth(tn.width),this.setHeight(tn.height)):this._resizeWithViewer&&(on=Kt.getElementSize(rn.element),this.element.style.height=Math.round(on.y*tn.sizeRatio)+"px",this.element.style.width=Math.round(on.x*tn.sizeRatio)+"px",this.oldViewerSize=on,an=Kt.getElementSize(this.element),this.elementArea=an.x*an.y),this.oldContainerSize=new Kt.Point(0,0),Kt.Viewer.apply(this,[tn]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer);function $n(Hn){Zr(nn.displayRegionContainer,Hn),Zr(nn.displayRegion,-Hn),nn.viewport.setRotation(Hn)}if(tn.navigatorRotate){var ln=tn.viewer.viewport?tn.viewer.viewport.getRotation():tn.viewer.degrees||0;$n(ln),tn.viewer.addHandler("rotate",function(Hn){$n(Hn.degrees)})}this.innerTracker.destroy(),this.innerTracker=new Kt.MouseTracker({element:this.element,dragHandler:Kt.delegate(this,Hr),clickHandler:Kt.delegate(this,Vt),releaseHandler:Kt.delegate(this,Wr),scrollHandler:Kt.delegate(this,Yr)}),this.addHandler("reset-size",function(){nn.viewport&&nn.viewport.goHome(!0)}),rn.world.addHandler("item-index-change",function(Hn){window.setTimeout(function(){var jn=nn.world.getItemAt(Hn.previousIndex);nn.world.setItemIndex(jn,Hn.newIndex)},1)}),rn.world.addHandler("remove-item",function(Hn){var jn=Hn.item,zn=nn._getMatchingItem(jn);zn&&nn.world.removeItem(zn)}),this.update(rn.viewport)},Kt.extend(Kt.Navigator.prototype,Kt.EventSource.prototype,Kt.Viewer.prototype,{updateSize:function(){if(this.viewport){var tn=new Kt.Point(this.container.clientWidth===0?1:this.container.clientWidth,this.container.clientHeight===0?1:this.container.clientHeight);tn.equals(this.oldContainerSize)||(this.viewport.resize(tn,!0),this.viewport.goHome(!0),this.oldContainerSize=tn,this.drawer.clear(),this.world.draw())}},setWidth:function(tn){this.width=tn,this.element.style.width=typeof tn=="number"?tn+"px":tn,this._resizeWithViewer=!1},setHeight:function(tn){this.height=tn,this.element.style.height=typeof tn=="number"?tn+"px":tn,this._resizeWithViewer=!1},setFlip:function(tn){return this.viewport.setFlip(tn),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(tn){en(this.displayRegion,tn),en(this.canvas,tn),en(this.element,tn)},update:function(tn){var rn,nn,on,an,$n,ln;if(rn=Kt.getElementSize(this.viewer.element),this._resizeWithViewer&&rn.x&&rn.y&&!rn.equals(this.oldViewerSize)&&(this.oldViewerSize=rn,this.maintainSizeRatio||!this.elementArea?(nn=rn.x*this.sizeRatio,on=rn.y*this.sizeRatio):(nn=Math.sqrt(this.elementArea*(rn.x/rn.y)),on=this.elementArea/nn),this.element.style.width=Math.round(nn)+"px",this.element.style.height=Math.round(on)+"px",this.elementArea||(this.elementArea=nn*on),this.updateSize()),tn&&this.viewport){an=tn.getBoundsNoRotate(!0),$n=this.viewport.pixelFromPointNoRotate(an.getTopLeft(),!1),ln=this.viewport.pixelFromPointNoRotate(an.getBottomRight(),!1).minus(this.totalBorderWidths);var Hn=this.displayRegion.style;Hn.display=this.world.getItemCount()?"block":"none",Hn.top=Math.round($n.y)+"px",Hn.left=Math.round($n.x)+"px";var jn=Math.abs($n.x-ln.x),zn=Math.abs($n.y-ln.y);Hn.width=Math.round(Math.max(jn,0))+"px",Hn.height=Math.round(Math.max(zn,0))+"px"}},addTiledImage:function(tn){var rn=this,nn=tn.originalTiledImage;delete tn.original;var on=Kt.extend({},tn,{success:function(an){var $n=an.item;$n._originalForNavigator=nn,rn._matchBounds($n,nn,!0);function ln(){rn._matchBounds($n,nn)}function Hn(){rn._matchOpacity($n,nn)}function jn(){rn._matchCompositeOperation($n,nn)}nn.addHandler("bounds-change",ln),nn.addHandler("clip-change",ln),nn.addHandler("opacity-change",Hn),nn.addHandler("composite-operation-change",jn)}});return Kt.Viewer.prototype.addTiledImage.apply(this,[on])},_getMatchingItem:function(tn){for(var rn=this.world.getItemCount(),nn,on=0;on<rn;on++)if(nn=this.world.getItemAt(on),nn._originalForNavigator===tn)return nn;return null},_matchBounds:function(tn,rn,nn){var on=rn.getBoundsNoRotate();tn.setPosition(on.getTopLeft(),nn),tn.setWidth(on.width,nn),tn.setRotation(rn.getRotation(),nn),tn.setClip(rn.getClip())},_matchOpacity:function(tn,rn){tn.setOpacity(rn.opacity)},_matchCompositeOperation:function(tn,rn){tn.setCompositeOperation(rn.compositeOperation)}});function Vt(tn){var rn={tracker:tn.eventSource,position:tn.position,quick:tn.quick,shift:tn.shift,originalEvent:tn.originalEvent,preventDefaultAction:tn.preventDefaultAction};if(this.viewer.raiseEvent("navigator-click",rn),!rn.preventDefaultAction&&tn.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(tn.position.x=this.viewport.getContainerSize().x-tn.position.x);var nn=this.viewport.pointFromPixel(tn.position);this.panVertical?this.panHorizontal||(nn.x=this.viewer.viewport.getCenter(!0).x):nn.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(nn),this.viewer.viewport.applyConstraints()}}function Hr(tn){var rn={tracker:tn.eventSource,position:tn.position,delta:tn.delta,speed:tn.speed,direction:tn.direction,shift:tn.shift,originalEvent:tn.originalEvent,preventDefaultAction:tn.preventDefaultAction};this.viewer.raiseEvent("navigator-drag",rn),!rn.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(tn.delta.x=0),this.panVertical||(tn.delta.y=0),this.viewer.viewport.flipped&&(tn.delta.x=-tn.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(tn.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function Wr(tn){tn.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function Yr(tn){return this.viewer.raiseEvent("navigator-scroll",{tracker:tn.eventSource,position:tn.position,scroll:tn.scroll,shift:tn.shift,originalEvent:tn.originalEvent}),!1}function Zr(tn,rn){en(tn,"rotate("+rn+"deg)")}function en(tn,rn){tn.style.webkitTransform=rn,tn.style.mozTransform=rn,tn.style.msTransform=rn,tn.style.oTransform=rn,tn.style.transform=rn}}(OpenSeadragon),function(Kt){var Vt={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};Kt.extend(Kt,{getString:function(Hr){var Wr=Hr.split("."),Yr=null,Zr=arguments,en=Vt,tn;for(tn=0;tn<Wr.length-1;tn++)en=en[Wr[tn]]||{};return Yr=en[Wr[tn]],typeof Yr!="string"&&(Kt.console.log("Untranslated source string:",Hr),Yr=""),Yr.replace(/\{\d+\}/g,function(rn){var nn=parseInt(rn.match(/\d+/),10)+1;return nn<Zr.length?Zr[nn]:""})},setString:function(Hr,Wr){var Yr=Hr.split("."),Zr=Vt,en;for(en=0;en<Yr.length-1;en++)Zr[Yr[en]]||(Zr[Yr[en]]={}),Zr=Zr[Yr[en]];Zr[Yr[en]]=Wr}})}(OpenSeadragon),function(Kt){Kt.Point=function(Vt,Hr){this.x=typeof Vt=="number"?Vt:0,this.y=typeof Hr=="number"?Hr:0},Kt.Point.prototype={clone:function(){return new Kt.Point(this.x,this.y)},plus:function(Vt){return new Kt.Point(this.x+Vt.x,this.y+Vt.y)},minus:function(Vt){return new Kt.Point(this.x-Vt.x,this.y-Vt.y)},times:function(Vt){return new Kt.Point(this.x*Vt,this.y*Vt)},divide:function(Vt){return new Kt.Point(this.x/Vt,this.y/Vt)},negate:function(){return new Kt.Point(-this.x,-this.y)},distanceTo:function(Vt){return Math.sqrt(Math.pow(this.x-Vt.x,2)+Math.pow(this.y-Vt.y,2))},squaredDistanceTo:function(Vt){return Math.pow(this.x-Vt.x,2)+Math.pow(this.y-Vt.y,2)},apply:function(Vt){return new Kt.Point(Vt(this.x),Vt(this.y))},equals:function(Vt){return Vt instanceof Kt.Point&&this.x===Vt.x&&this.y===Vt.y},rotate:function(Vt,Hr){Hr=Hr||new Kt.Point(0,0);var Wr,Yr;if(Vt%90===0){var Zr=Kt.positiveModulo(Vt,360);switch(Zr){case 0:Wr=1,Yr=0;break;case 90:Wr=0,Yr=1;break;case 180:Wr=-1,Yr=0;break;case 270:Wr=0,Yr=-1;break}}else{var en=Vt*Math.PI/180;Wr=Math.cos(en),Yr=Math.sin(en)}var tn=Wr*(this.x-Hr.x)-Yr*(this.y-Hr.y)+Hr.x,rn=Yr*(this.x-Hr.x)+Wr*(this.y-Hr.y)+Hr.y;return new Kt.Point(tn,rn)},toString:function(){return"("+Math.round(this.x*100)/100+","+Math.round(this.y*100)/100+")"}}}(OpenSeadragon),function(Kt){Kt.TileSource=function(Hr,Wr,Yr,Zr,en,tn){var rn=this,nn=arguments,on,an;if(Kt.isPlainObject(Hr)?on=Hr:on={width:nn[0],height:nn[1],tileSize:nn[2],tileOverlap:nn[3],minLevel:nn[4],maxLevel:nn[5]},Kt.EventSource.call(this),Kt.extend(!0,this,on),!this.success){for(an=0;an<arguments.length;an++)if(Kt.isFunction(arguments[an])){this.success=arguments[an];break}}this.success&&this.addHandler("ready",function($n){rn.success($n)}),Kt.type(arguments[0])=="string"&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new Kt.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=on.width&&on.height?on.width/on.height:1,this.dimensions=new Kt.Point(on.width,on.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=on.tileOverlap?on.tileOverlap:0,this.minLevel=on.minLevel?on.minLevel:0,this.maxLevel=on.maxLevel!==void 0&&on.maxLevel!==null?on.maxLevel:on.width&&on.height?Math.ceil(Math.log(Math.max(on.width,on.height))/Math.log(2)):0,this.success&&Kt.isFunction(this.success)&&this.success(this))},Kt.TileSource.prototype={getTileSize:function(Hr){return Kt.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(Hr){return this._tileWidth?this._tileWidth:this.getTileSize(Hr)},getTileHeight:function(Hr){return this._tileHeight?this._tileHeight:this.getTileSize(Hr)},getLevelScale:function(Hr){var Wr={},Yr;for(Yr=0;Yr<=this.maxLevel;Yr++)Wr[Yr]=1/Math.pow(2,this.maxLevel-Yr);return this.getLevelScale=function(Zr){return Wr[Zr]},this.getLevelScale(Hr)},getNumTiles:function(Hr){var Wr=this.getLevelScale(Hr),Yr=Math.ceil(Wr*this.dimensions.x/this.getTileWidth(Hr)),Zr=Math.ceil(Wr*this.dimensions.y/this.getTileHeight(Hr));return new Kt.Point(Yr,Zr)},getPixelRatio:function(Hr){var Wr=this.dimensions.times(this.getLevelScale(Hr)),Yr=1/Wr.x,Zr=1/Wr.y;return new Kt.Point(Yr,Zr)},getClosestLevel:function(){var Hr,Wr;for(Hr=this.minLevel+1;Hr<=this.maxLevel&&(Wr=this.getNumTiles(Hr),!(Wr.x>1||Wr.y>1));Hr++);return Hr-1},getTileAtPoint:function(Hr,Wr){var Yr=Wr.x>=0&&Wr.x<=1&&Wr.y>=0&&Wr.y<=1/this.aspectRatio;Kt.console.assert(Yr,"[TileSource.getTileAtPoint] must be called with a valid point.");var Zr=this.dimensions.x*this.getLevelScale(Hr),en=Wr.x*Zr,tn=Wr.y*Zr,rn=Math.floor(en/this.getTileWidth(Hr)),nn=Math.floor(tn/this.getTileHeight(Hr));Wr.x>=1&&(rn=this.getNumTiles(Hr).x-1);var on=1e-15;return Wr.y>=1/this.aspectRatio-on&&(nn=this.getNumTiles(Hr).y-1),new Kt.Point(rn,nn)},getTileBounds:function(Hr,Wr,Yr,Zr){var en=this.dimensions.times(this.getLevelScale(Hr)),tn=this.getTileWidth(Hr),rn=this.getTileHeight(Hr),nn=Wr===0?0:tn*Wr-this.tileOverlap,on=Yr===0?0:rn*Yr-this.tileOverlap,an=tn+(Wr===0?1:2)*this.tileOverlap,$n=rn+(Yr===0?1:2)*this.tileOverlap,ln=1/en.x;return an=Math.min(an,en.x-nn),$n=Math.min($n,en.y-on),Zr?new Kt.Rect(0,0,an,$n):new Kt.Rect(nn*ln,on*ln,an*ln,$n*ln)},getImageInfo:function(Hr){var Wr=this,Yr,Zr,en,tn,rn,nn,on;Hr&&(rn=Hr.split("/"),nn=rn[rn.length-1],on=nn.lastIndexOf("."),on>-1&&(rn[rn.length-1]=nn.slice(0,on))),Zr=function(an){typeof an=="string"&&(an=Kt.parseXml(an));var $n=Kt.TileSource.determineType(Wr,an,Hr);if(!$n){Wr.raiseEvent("open-failed",{message:"Unable to load TileSource",source:Hr});return}tn=$n.prototype.configure.apply(Wr,[an,Hr]),tn.ajaxWithCredentials===void 0&&(tn.ajaxWithCredentials=Wr.ajaxWithCredentials),en=new $n(tn),Wr.ready=!0,Wr.raiseEvent("ready",{tileSource:en})},Hr.match(/\.js$/)?(Yr=Hr.split("/").pop().replace(".js",""),Kt.jsonp({url:Hr,async:!1,callbackName:Yr,callback:Zr})):Kt.makeAjaxRequest({url:Hr,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(an){var $n=Vt(an);Zr($n)},error:function(an,$n){var ln;try{ln="HTTP "+an.status+" attempting to load TileSource"}catch{var Hn;typeof $n>"u"||!$n.toString?Hn="Unknown error":Hn=$n.toString(),ln=Hn+" attempting to load TileSource"}Wr.raiseEvent("open-failed",{message:ln,source:Hr})}})},supports:function(Hr,Wr){return!1},configure:function(Hr,Wr){throw new Error("Method not implemented.")},getTileUrl:function(Hr,Wr,Yr){throw new Error("Method not implemented.")},getTileAjaxHeaders:function(Hr,Wr,Yr){return{}},tileExists:function(Hr,Wr,Yr){var Zr=this.getNumTiles(Hr);return Hr>=this.minLevel&&Hr<=this.maxLevel&&Wr>=0&&Yr>=0&&Wr<Zr.x&&Yr<Zr.y}},Kt.extend(!0,Kt.TileSource.prototype,Kt.EventSource.prototype);function Vt(Hr){var Wr=Hr.responseText,Yr=Hr.status,Zr,en;if(Hr){if(Hr.status!==200&&Hr.status!==0)throw Yr=Hr.status,Zr=Yr==404?"Not Found":Hr.statusText,new Error(Kt.getString("Errors.Status",Yr,Zr))}else throw new Error(Kt.getString("Errors.Security"));if(Wr.match(/\s*<.*/))try{en=Hr.responseXML&&Hr.responseXML.documentElement?Hr.responseXML:Kt.parseXml(Wr)}catch{en=Hr.responseText}else if(Wr.match(/\s*[\{\[].*/))try{en=Kt.parseJSON(Wr)}catch{en=Wr}else en=Wr;return en}Kt.TileSource.determineType=function(Hr,Wr,Yr){var Zr;for(Zr in OpenSeadragon)if(Zr.match(/.+TileSource$/)&&Kt.isFunction(OpenSeadragon[Zr])&&Kt.isFunction(OpenSeadragon[Zr].prototype.supports)&&OpenSeadragon[Zr].prototype.supports.call(Hr,Wr,Yr))return OpenSeadragon[Zr];Kt.console.error("No TileSource was able to open %s %s",Yr,Wr)}}(OpenSeadragon),function(Kt){Kt.DziTileSource=function(Wr,Yr,Zr,en,tn,rn,nn,on,an){var $n,ln,Hn,jn;if(Kt.isPlainObject(Wr)?jn=Wr:jn={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=jn.tilesUrl,this.fileFormat=jn.fileFormat,this.displayRects=jn.displayRects,this.displayRects)for($n=this.displayRects.length-1;$n>=0;$n--)for(ln=this.displayRects[$n],Hn=ln.minLevel;Hn<=ln.maxLevel;Hn++)this._levelRects[Hn]||(this._levelRects[Hn]=[]),this._levelRects[Hn].push(ln);Kt.TileSource.apply(this,[jn])},Kt.extend(Kt.DziTileSource.prototype,Kt.TileSource.prototype,{supports:function(Wr,Yr){var Zr;return Wr.Image?Zr=Wr.Image.xmlns:Wr.documentElement&&(Wr.documentElement.localName=="Image"||Wr.documentElement.tagName=="Image")&&(Zr=Wr.documentElement.namespaceURI),Zr=(Zr||"").toLowerCase(),Zr.indexOf("schemas.microsoft.com/deepzoom/2008")!==-1||Zr.indexOf("schemas.microsoft.com/deepzoom/2009")!==-1},configure:function(Wr,Yr){var Zr;return Kt.isPlainObject(Wr)?Zr=Hr(this,Wr):Zr=Vt(this,Wr),Yr&&!Zr.tilesUrl&&(Zr.tilesUrl=Yr.replace(/([^\/]+?)(\.(dzi|xml|js)?(\?[^\/]*)?)?\/?$/,"$1_files/"),Yr.search(/\.(dzi|xml|js)\?/)!=-1?Zr.queryParams=Yr.match(/\?.*/):Zr.queryParams=""),Zr},getTileUrl:function(Wr,Yr,Zr){return[this.tilesUrl,Wr,"/",Yr,"_",Zr,".",this.fileFormat,this.queryParams].join("")},tileExists:function(Wr,Yr,Zr){var en=this._levelRects[Wr],tn,rn,nn,on,an,$n,ln;if(this.minLevel&&Wr<this.minLevel||this.maxLevel&&Wr>this.maxLevel)return!1;if(!en||!en.length)return!0;for(ln=en.length-1;ln>=0;ln--)if(tn=en[ln],!(Wr<tn.minLevel||Wr>tn.maxLevel)&&(rn=this.getLevelScale(Wr),nn=tn.x*rn,on=tn.y*rn,an=nn+tn.width*rn,$n=on+tn.height*rn,nn=Math.floor(nn/this._tileWidth),on=Math.floor(on/this._tileWidth),an=Math.ceil(an/this._tileWidth),$n=Math.ceil($n/this._tileWidth),nn<=Yr&&Yr<an&&on<=Zr&&Zr<$n))return!0;return!1}});function Vt(Wr,Yr){if(!Yr||!Yr.documentElement)throw new Error(Kt.getString("Errors.Xml"));var Zr=Yr.documentElement,en=Zr.localName||Zr.tagName,tn=Yr.documentElement.namespaceURI,rn=null,nn=[],on,an,$n,ln,Hn;if(en=="Image")try{if(ln=Zr.getElementsByTagName("Size")[0],ln===void 0&&(ln=Zr.getElementsByTagNameNS(tn,"Size")[0]),rn={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:Zr.getAttribute("Url"),Format:Zr.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(Zr.getAttribute("Overlap"),10),TileSize:parseInt(Zr.getAttribute("TileSize"),10),Size:{Height:parseInt(ln.getAttribute("Height"),10),Width:parseInt(ln.getAttribute("Width"),10)}}},!Kt.imageFormatSupported(rn.Image.Format))throw new Error(Kt.getString("Errors.ImageFormat",rn.Image.Format.toUpperCase()));for(on=Zr.getElementsByTagName("DisplayRect"),on===void 0&&(on=Zr.getElementsByTagNameNS(tn,"DisplayRect")[0]),Hn=0;Hn<on.length;Hn++)an=on[Hn],$n=an.getElementsByTagName("Rect")[0],$n===void 0&&($n=an.getElementsByTagNameNS(tn,"Rect")[0]),nn.push({Rect:{X:parseInt($n.getAttribute("X"),10),Y:parseInt($n.getAttribute("Y"),10),Width:parseInt($n.getAttribute("Width"),10),Height:parseInt($n.getAttribute("Height"),10),MinLevel:parseInt(an.getAttribute("MinLevel"),10),MaxLevel:parseInt(an.getAttribute("MaxLevel"),10)}});return nn.length&&(rn.Image.DisplayRect=nn),Hr(Wr,rn)}catch(Wn){throw Wn instanceof Error?Wn:new Error(Kt.getString("Errors.Dzi"))}else{if(en=="Collection")throw new Error(Kt.getString("Errors.Dzc"));if(en=="Error"){var jn=Zr.getElementsByTagName("Message")[0],zn=jn.firstChild.nodeValue;throw new Error(zn)}}throw new Error(Kt.getString("Errors.Dzi"))}function Hr(Wr,Yr){var Zr=Yr.Image,en=Zr.Url,tn=Zr.Format,rn=Zr.Size,nn=Zr.DisplayRect||[],on=parseInt(rn.Width,10),an=parseInt(rn.Height,10),$n=parseInt(Zr.TileSize,10),ln=parseInt(Zr.Overlap,10),Hn=[],jn,zn;for(zn=0;zn<nn.length;zn++)jn=nn[zn].Rect,Hn.push(new Kt.DisplayRect(parseInt(jn.X,10),parseInt(jn.Y,10),parseInt(jn.Width,10),parseInt(jn.Height,10),parseInt(jn.MinLevel,10),parseInt(jn.MaxLevel,10)));return Kt.extend(!0,{width:on,height:an,tileSize:$n,tileOverlap:ln,minLevel:null,maxLevel:null,tilesUrl:en,fileFormat:tn,displayRects:Hn},Yr)}}(OpenSeadragon),function(Kt){Kt.IIIFTileSource=function(Zr){if(Kt.extend(!0,this,Zr),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(Zr.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=Zr.version,this.tile_width&&this.tile_height)Zr.tileWidth=this.tile_width,Zr.tileHeight=this.tile_height;else if(this.tile_width)Zr.tileSize=this.tile_width;else if(this.tile_height)Zr.tileSize=this.tile_height;else if(this.tiles)if(this.tiles.length==1)Zr.tileWidth=this.tiles[0].width,Zr.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var en=0;en<this.tiles.length;en++)for(var tn=0;tn<this.tiles[en].scaleFactors.length;tn++){var rn=this.tiles[en].scaleFactors[tn];this.scale_factors.push(rn),Zr.tileSizePerScaleFactor[rn]={width:this.tiles[en].width,height:this.tiles[en].height||this.tiles[en].width}}}else if(Vt(Zr)){for(var nn=Math.min(this.height,this.width),on=[256,512,1024],an=[],$n=0;$n<on.length;$n++)on[$n]<=nn&&an.push(on[$n]);an.length>0?Zr.tileSize=Math.max.apply(null,an):Zr.tileSize=nn}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,Zr.levels=Hr(this),Kt.extend(!0,Zr,{width:Zr.levels[Zr.levels.length-1].width,height:Zr.levels[Zr.levels.length-1].height,tileSize:Math.max(Zr.height,Zr.width),tileOverlap:0,minLevel:0,maxLevel:Zr.levels.length-1}),this.levels=Zr.levels):Kt.console.error("Nothing in the info.json to construct image pyramids from");if(!Zr.maxLevel&&!this.emulateLegacyImagePyramid)if(!this.scale_factors)Zr.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)));else{var ln=Math.max.apply(null,this.scale_factors);Zr.maxLevel=Math.round(Math.log(ln)*Math.LOG2E)}Kt.TileSource.apply(this,[Zr])},Kt.extend(Kt.IIIFTileSource.prototype,Kt.TileSource.prototype,{supports:function(Zr,en){return Zr.protocol&&Zr.protocol=="http://iiif.io/api/image"||Zr["@context"]&&(Zr["@context"]=="http://library.stanford.edu/iiif/image-api/1.1/context.json"||Zr["@context"]=="http://iiif.io/api/image/1/context.json")||Zr.profile&&Zr.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")===0||Zr.identifier&&Zr.width&&Zr.height?!0:!!(Zr.documentElement&&Zr.documentElement.tagName=="info"&&Zr.documentElement.namespaceURI=="http://library.stanford.edu/iiif/image-api/ns/")},configure:function(Zr,en){if(Kt.isPlainObject(Zr)){if(!Zr["@context"])Zr["@context"]="http://iiif.io/api/image/1.0/context.json",Zr["@id"]=en.replace("/info.json",""),Zr.version=1;else{var tn=Zr["@context"];if(Array.isArray(tn)){for(var rn=0;rn<tn.length;rn++)if(typeof tn[rn]=="string"&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(tn[rn])||tn[rn]==="http://library.stanford.edu/iiif/image-api/1.1/context.json")){tn=tn[rn];break}}switch(tn){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":Zr.version=1;break;case"http://iiif.io/api/image/2/context.json":Zr.version=2;break;case"http://iiif.io/api/image/3/context.json":Zr.version=3;break;default:Kt.console.error("Data has a @context property which contains no known IIIF context URI.")}}if(!Zr["@id"]&&Zr.id&&(Zr["@id"]=Zr.id),Zr.preferredFormats){for(var nn=0;nn<Zr.preferredFormats.length;nn++)if(OpenSeadragon.imageFormatSupported(Zr.preferredFormats[nn])){Zr.tileFormat=Zr.preferredFormats[nn];break}}return Zr}else{var on=Wr(Zr);return on["@context"]="http://iiif.io/api/image/1.0/context.json",on["@id"]=en.replace("/info.xml",""),on.version=1,on}},getTileWidth:function(Zr){if(this.emulateLegacyImagePyramid)return Kt.TileSource.prototype.getTileWidth.call(this,Zr);var en=Math.pow(2,this.maxLevel-Zr);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[en]?this.tileSizePerScaleFactor[en].width:this._tileWidth},getTileHeight:function(Zr){if(this.emulateLegacyImagePyramid)return Kt.TileSource.prototype.getTileHeight.call(this,Zr);var en=Math.pow(2,this.maxLevel-Zr);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[en]?this.tileSizePerScaleFactor[en].height:this._tileHeight},getLevelScale:function(Zr){if(this.emulateLegacyImagePyramid){var en=NaN;return this.levels.length>0&&Zr>=this.minLevel&&Zr<=this.maxLevel&&(en=this.levels[Zr].width/this.levels[this.maxLevel].width),en}return Kt.TileSource.prototype.getLevelScale.call(this,Zr)},getNumTiles:function(Zr){if(this.emulateLegacyImagePyramid){var en=this.getLevelScale(Zr);return en?new Kt.Point(1,1):new Kt.Point(0,0)}return Kt.TileSource.prototype.getNumTiles.call(this,Zr)},getTileAtPoint:function(Zr,en){return this.emulateLegacyImagePyramid?new Kt.Point(0,0):Kt.TileSource.prototype.getTileAtPoint.call(this,Zr,en)},getTileUrl:function(Zr,en,tn){if(this.emulateLegacyImagePyramid){var rn=null;return this.levels.length>0&&Zr>=this.minLevel&&Zr<=this.maxLevel&&(rn=this.levels[Zr].url),rn}var nn="0",on=Math.pow(.5,this.maxLevel-Zr),an=Math.ceil(this.width*on),$n=Math.ceil(this.height*on),ln,Hn,jn,zn,Wn,ei,$i,Mi,Ni,Ts,ps,$s,Ws,Hs;return ln=this.getTileWidth(Zr),Hn=this.getTileHeight(Zr),jn=Math.ceil(ln/on),zn=Math.ceil(Hn/on),this.version===1?Ws="native."+this.tileFormat:Ws="default."+this.tileFormat,an<ln&&$n<Hn?(this.version===2&&an===this.width||this.version===3&&an===this.width&&$n===this.height?Ts="max":this.version===3?Ts=an+","+$n:Ts=an+",",Wn="full"):(ei=en*jn,$i=tn*zn,Mi=Math.min(jn,this.width-ei),Ni=Math.min(zn,this.height-$i),en===0&&tn===0&&Mi===this.width&&Ni===this.height?Wn="full":Wn=[ei,$i,Mi,Ni].join(","),ps=Math.ceil(Mi*on),$s=Math.ceil(Ni*on),this.version===2&&ps===this.width||this.version===3&&ps===this.width&&$s===this.height?Ts="max":this.version===3?Ts=ps+","+$s:Ts=ps+","),Hs=[this["@id"],Wn,Ts,nn,Ws].join("/"),Hs},__testonly__:{canBeTiled:Vt,constructLevels:Hr}});function Vt(Zr){var en=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"],tn=Array.isArray(Zr.profile)?Zr.profile[0]:Zr.profile,rn=en.indexOf(tn)!==-1,nn=!1;return Zr.version===2&&Zr.profile.length>1&&Zr.profile[1].supports&&(nn=Zr.profile[1].supports.indexOf("sizeByW")!==-1),Zr.version===3&&Zr.extraFeatures&&(nn=Zr.extraFeatures.indexOf("sizeByWh")!==-1),!rn||nn}function Hr(Zr){for(var en=[],tn=0;tn<Zr.sizes.length;tn++)en.push({url:Zr["@id"]+"/full/"+Zr.sizes[tn].width+","+(Zr.version===3?Zr.sizes[tn].height:"")+"/0/default."+Zr.tileFormat,width:Zr.sizes[tn].width,height:Zr.sizes[tn].height});return en.sort(function(rn,nn){return rn.width-nn.width})}function Wr(Zr){if(!Zr||!Zr.documentElement)throw new Error(Kt.getString("Errors.Xml"));var en=Zr.documentElement,tn=en.tagName,rn=null;if(tn=="info")try{return rn={},Yr(en,rn),rn}catch(nn){throw nn instanceof Error?nn:new Error(Kt.getString("Errors.IIIF"))}throw new Error(Kt.getString("Errors.IIIF"))}function Yr(Zr,en,tn){var rn,nn;if(Zr.nodeType==3&&tn)nn=Zr.nodeValue.trim(),nn.match(/^\d*$/)&&(nn=Number(nn)),en[tn]?(Kt.isArray(en[tn])||(en[tn]=[en[tn]]),en[tn].push(nn)):en[tn]=nn;else if(Zr.nodeType==1)for(rn=0;rn<Zr.childNodes.length;rn++)Yr(Zr.childNodes[rn],en,Zr.nodeName)}}(OpenSeadragon),function(Kt){Kt.OsmTileSource=function(Vt,Hr,Wr,Yr,Zr){var en;Kt.isPlainObject(Vt)?en=Vt:en={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},(!en.width||!en.height)&&(en.width=65572864,en.height=65572864),en.tileSize||(en.tileSize=256,en.tileOverlap=0),en.tilesUrl||(en.tilesUrl="http://tile.openstreetmap.org/"),en.minLevel=8,Kt.TileSource.apply(this,[en])},Kt.extend(Kt.OsmTileSource.prototype,Kt.TileSource.prototype,{supports:function(Vt,Hr){return Vt.type&&Vt.type=="openstreetmaps"},configure:function(Vt,Hr){return Vt},getTileUrl:function(Vt,Hr,Wr){return this.tilesUrl+(Vt-8)+"/"+Hr+"/"+Wr+".png"}})}(OpenSeadragon),function(Kt){Kt.TmsTileSource=function(Vt,Hr,Wr,Yr,Zr){var en;Kt.isPlainObject(Vt)?en=Vt:en={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var tn=Math.ceil(en.width/256)*256,rn=Math.ceil(en.height/256)*256,nn;tn>rn?nn=tn/256:nn=rn/256,en.maxLevel=Math.ceil(Math.log(nn)/Math.log(2))-1,en.tileSize=256,en.width=tn,en.height=rn,Kt.TileSource.apply(this,[en])},Kt.extend(Kt.TmsTileSource.prototype,Kt.TileSource.prototype,{supports:function(Vt,Hr){return Vt.type&&Vt.type=="tiledmapservice"},configure:function(Vt,Hr){return Vt},getTileUrl:function(Vt,Hr,Wr){var Yr=this.getNumTiles(Vt).y-1;return this.tilesUrl+Vt+"/"+Hr+"/"+(Yr-Wr)+".png"}})}(OpenSeadragon),function(Kt){Kt.ZoomifyTileSource=function(Vt){Vt.tileSize=256;var Hr={x:Vt.width,y:Vt.height};for(Vt.imageSizes=[{x:Vt.width,y:Vt.height}],Vt.gridSize=[this._getGridSize(Vt.width,Vt.height,Vt.tileSize)];parseInt(Hr.x,10)>Vt.tileSize||parseInt(Hr.y,10)>Vt.tileSize;)Hr.x=Math.floor(Hr.x/2),Hr.y=Math.floor(Hr.y/2),Vt.imageSizes.push({x:Hr.x,y:Hr.y}),Vt.gridSize.push(this._getGridSize(Hr.x,Hr.y,Vt.tileSize));Vt.imageSizes.reverse(),Vt.gridSize.reverse(),Vt.minLevel=0,Vt.maxLevel=Vt.gridSize.length-1,OpenSeadragon.TileSource.apply(this,[Vt])},Kt.extend(Kt.ZoomifyTileSource.prototype,Kt.TileSource.prototype,{_getGridSize:function(Vt,Hr,Wr){return{x:Math.ceil(Vt/Wr),y:Math.ceil(Hr/Wr)}},_calculateAbsoluteTileNumber:function(Vt,Hr,Wr){for(var Yr=0,Zr={},en=0;en<Vt;en++)Zr=this.gridSize[en],Yr+=Zr.x*Zr.y;return Zr=this.gridSize[Vt],Yr+=Zr.x*Wr+Hr,Yr},supports:function(Vt,Hr){return Vt.type&&Vt.type=="zoomifytileservice"},configure:function(Vt,Hr){return Vt},getTileUrl:function(Vt,Hr,Wr){var Yr=0,Zr=this._calculateAbsoluteTileNumber(Vt,Hr,Wr);return Yr=Math.floor(Zr/256),this.tilesUrl+"TileGroup"+Yr+"/"+Vt+"-"+Hr+"-"+Wr+".jpg"}})}(OpenSeadragon),function(Kt){Kt.LegacyTileSource=function(Yr){var Zr,en,tn;Kt.isArray(Yr)&&(Zr={type:"legacy-image-pyramid",levels:Yr}),Zr.levels=Vt(Zr.levels),Zr.levels.length>0?(en=Zr.levels[Zr.levels.length-1].width,tn=Zr.levels[Zr.levels.length-1].height):(en=0,tn=0,Kt.console.error("No supported image formats found")),Kt.extend(!0,Zr,{width:en,height:tn,tileSize:Math.max(tn,en),tileOverlap:0,minLevel:0,maxLevel:Zr.levels.length>0?Zr.levels.length-1:0}),Kt.TileSource.apply(this,[Zr]),this.levels=Zr.levels},Kt.extend(Kt.LegacyTileSource.prototype,Kt.TileSource.prototype,{supports:function(Yr,Zr){return Yr.type&&Yr.type=="legacy-image-pyramid"||Yr.documentElement&&Yr.documentElement.getAttribute("type")=="legacy-image-pyramid"},configure:function(Yr,Zr){var en;return Kt.isPlainObject(Yr)?en=Wr(this,Yr):en=Hr(this,Yr),en},getLevelScale:function(Yr){var Zr=NaN;return this.levels.length>0&&Yr>=this.minLevel&&Yr<=this.maxLevel&&(Zr=this.levels[Yr].width/this.levels[this.maxLevel].width),Zr},getNumTiles:function(Yr){var Zr=this.getLevelScale(Yr);return Zr?new Kt.Point(1,1):new Kt.Point(0,0)},getTileUrl:function(Yr,Zr,en){var tn=null;return this.levels.length>0&&Yr>=this.minLevel&&Yr<=this.maxLevel&&(tn=this.levels[Yr].url),tn}});function Vt(Yr){var Zr=[],en,tn;for(tn=0;tn<Yr.length;tn++)en=Yr[tn],en.height&&en.width&&en.url?Zr.push({url:en.url,width:Number(en.width),height:Number(en.height)}):Kt.console.error("Unsupported image format: %s",en.url?en.url:"<no URL>");return Zr.sort(function(rn,nn){return rn.height-nn.height})}function Hr(Yr,Zr){if(!Zr||!Zr.documentElement)throw new Error(Kt.getString("Errors.Xml"));var en=Zr.documentElement,tn=en.tagName,rn=null,nn=[],on,an;if(tn=="image")try{for(rn={type:en.getAttribute("type"),levels:[]},nn=en.getElementsByTagName("level"),an=0;an<nn.length;an++)on=nn[an],rn.levels.push({url:on.getAttribute("url"),width:parseInt(on.getAttribute("width"),10),height:parseInt(on.getAttribute("height"),10)});return Wr(Yr,rn)}catch($n){throw $n instanceof Error?$n:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if(tn=="collection")throw new Error("Legacy Image Pyramid Collections not yet supported.");if(tn=="error")throw new Error("Error: "+Zr)}throw new Error("Unknown element "+tn)}function Wr(Yr,Zr){return Zr.levels}}(OpenSeadragon),function(Kt){Kt.ImageTileSource=function(Vt){Vt=Kt.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},Vt),Kt.TileSource.apply(this,[Vt])},Kt.extend(Kt.ImageTileSource.prototype,Kt.TileSource.prototype,{supports:function(Vt,Hr){return Vt.type&&Vt.type==="image"},configure:function(Vt,Hr){return Vt},getImageInfo:function(Vt){var Hr=this._image=new Image,Wr=this;this.crossOriginPolicy&&(Hr.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(Hr.useCredentials=this.ajaxWithCredentials),Kt.addEvent(Hr,"load",function(){Wr.width=Object.prototype.hasOwnProperty.call(Hr,"naturalWidth")?Hr.naturalWidth:Hr.width,Wr.height=Object.prototype.hasOwnProperty.call(Hr,"naturalHeight")?Hr.naturalHeight:Hr.height,Wr.aspectRatio=Wr.width/Wr.height,Wr.dimensions=new Kt.Point(Wr.width,Wr.height),Wr._tileWidth=Wr.width,Wr._tileHeight=Wr.height,Wr.tileOverlap=0,Wr.minLevel=0,Wr.levels=Wr._buildLevels(),Wr.maxLevel=Wr.levels.length-1,Wr.ready=!0,Wr.raiseEvent("ready",{tileSource:Wr})}),Kt.addEvent(Hr,"error",function(){Wr.raiseEvent("open-failed",{message:"Error loading image at "+Vt,source:Vt})}),Hr.src=Vt},getLevelScale:function(Vt){var Hr=NaN;return Vt>=this.minLevel&&Vt<=this.maxLevel&&(Hr=this.levels[Vt].width/this.levels[this.maxLevel].width),Hr},getNumTiles:function(Vt){var Hr=this.getLevelScale(Vt);return Hr?new Kt.Point(1,1):new Kt.Point(0,0)},getTileUrl:function(Vt,Hr,Wr){var Yr=null;return Vt>=this.minLevel&&Vt<=this.maxLevel&&(Yr=this.levels[Vt].url),Yr},getContext2D:function(Vt,Hr,Wr){var Yr=null;return Vt>=this.minLevel&&Vt<=this.maxLevel&&(Yr=this.levels[Vt].context2D),Yr},_buildLevels:function(){var Vt=[{url:this._image.src,width:Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,height:Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height}];if(!this.buildPyramid||!Kt.supportsCanvas||!this.useCanvas)return delete this._image,Vt;var Hr=Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,Wr=Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height,Yr=document.createElement("canvas"),Zr=Yr.getContext("2d");if(Yr.width=Hr,Yr.height=Wr,Zr.drawImage(this._image,0,0,Hr,Wr),Vt[0].context2D=Zr,delete this._image,Kt.isCanvasTainted(Yr))return Vt;for(;Hr>=2&&Wr>=2;){Hr=Math.floor(Hr/2),Wr=Math.floor(Wr/2);var en=document.createElement("canvas"),tn=en.getContext("2d");en.width=Hr,en.height=Wr,tn.drawImage(Yr,0,0,Hr,Wr),Vt.splice(0,0,{context2D:tn,width:Hr,height:Wr}),Yr=en,Zr=tn}return Vt}})}(OpenSeadragon),function(Kt){Kt.TileSourceCollection=function(Vt,Hr,Wr,Yr){Kt.console.error("TileSourceCollection is deprecated; use World instead")}}(OpenSeadragon),function(Kt){Kt.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},Kt.Button=function(tn){var rn=this;Kt.EventSource.call(this),Kt.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:Kt.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:Kt.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},tn),this.element=tn.element||Kt.makeNeutralElement("div"),tn.element||(this.imgRest=Kt.makeTransparentImage(this.srcRest),this.imgGroup=Kt.makeTransparentImage(this.srcGroup),this.imgHover=Kt.makeTransparentImage(this.srcHover),this.imgDown=Kt.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position="relative",Kt.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",Kt.Browser.vendor==Kt.BROWSERS.FIREFOX&&Kt.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=Kt.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new Kt.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(nn){nn.insideElementPressed?(Zr(rn,Kt.ButtonState.DOWN),rn.raiseEvent("enter",{originalEvent:nn.originalEvent})):nn.buttonDownAny||Zr(rn,Kt.ButtonState.HOVER)},focusHandler:function(nn){this.enterHandler(nn),rn.raiseEvent("focus",{originalEvent:nn.originalEvent})},exitHandler:function(nn){en(rn,Kt.ButtonState.GROUP),nn.insideElementPressed&&rn.raiseEvent("exit",{originalEvent:nn.originalEvent})},blurHandler:function(nn){this.exitHandler(nn),rn.raiseEvent("blur",{originalEvent:nn.originalEvent})},pressHandler:function(nn){Zr(rn,Kt.ButtonState.DOWN),rn.raiseEvent("press",{originalEvent:nn.originalEvent})},releaseHandler:function(nn){nn.insideElementPressed&&nn.insideElementReleased?(en(rn,Kt.ButtonState.HOVER),rn.raiseEvent("release",{originalEvent:nn.originalEvent})):nn.insideElementPressed?en(rn,Kt.ButtonState.GROUP):Zr(rn,Kt.ButtonState.HOVER)},clickHandler:function(nn){nn.quick&&rn.raiseEvent("click",{originalEvent:nn.originalEvent})},keyHandler:function(nn){return nn.keyCode===13?(rn.raiseEvent("click",{originalEvent:nn.originalEvent}),rn.raiseEvent("release",{originalEvent:nn.originalEvent}),!1):!0}}),en(this,Kt.ButtonState.REST)},Kt.extend(Kt.Button.prototype,Kt.EventSource.prototype,{notifyGroupEnter:function(){Zr(this,Kt.ButtonState.GROUP)},notifyGroupExit:function(){en(this,Kt.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,Kt.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,Kt.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}});function Vt(tn){Kt.requestAnimationFrame(function(){Hr(tn)})}function Hr(tn){var rn,nn,on;tn.shouldFade&&(rn=Kt.now(),nn=rn-tn.fadeBeginTime,on=1-nn/tn.fadeLength,on=Math.min(1,on),on=Math.max(0,on),tn.imgGroup&&Kt.setElementOpacity(tn.imgGroup,on,!0),on>0&&Vt(tn))}function Wr(tn){tn.shouldFade=!0,tn.fadeBeginTime=Kt.now()+tn.fadeDelay,window.setTimeout(function(){Vt(tn)},tn.fadeDelay)}function Yr(tn){tn.shouldFade=!1,tn.imgGroup&&Kt.setElementOpacity(tn.imgGroup,1,!0)}function Zr(tn,rn){tn.element.disabled||(rn>=Kt.ButtonState.GROUP&&tn.currentState==Kt.ButtonState.REST&&(Yr(tn),tn.currentState=Kt.ButtonState.GROUP),rn>=Kt.ButtonState.HOVER&&tn.currentState==Kt.ButtonState.GROUP&&(tn.imgHover&&(tn.imgHover.style.visibility=""),tn.currentState=Kt.ButtonState.HOVER),rn>=Kt.ButtonState.DOWN&&tn.currentState==Kt.ButtonState.HOVER&&(tn.imgDown&&(tn.imgDown.style.visibility=""),tn.currentState=Kt.ButtonState.DOWN))}function en(tn,rn){tn.element.disabled||(rn<=Kt.ButtonState.HOVER&&tn.currentState==Kt.ButtonState.DOWN&&(tn.imgDown&&(tn.imgDown.style.visibility="hidden"),tn.currentState=Kt.ButtonState.HOVER),rn<=Kt.ButtonState.GROUP&&tn.currentState==Kt.ButtonState.HOVER&&(tn.imgHover&&(tn.imgHover.style.visibility="hidden"),tn.currentState=Kt.ButtonState.GROUP),rn<=Kt.ButtonState.REST&&tn.currentState==Kt.ButtonState.GROUP&&(Wr(tn),tn.currentState=Kt.ButtonState.REST))}}(OpenSeadragon),function(Kt){Kt.ButtonGroup=function(Vt){Kt.extend(!0,this,{buttons:[],clickTimeThreshold:Kt.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:Kt.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},Vt);var Hr=this.buttons.concat([]),Wr=this,Yr;if(this.element=Vt.element||Kt.makeNeutralElement("div"),!Vt.group)for(this.element.style.display="inline-block",Yr=0;Yr<Hr.length;Yr++)this.element.appendChild(Hr[Yr].element);Kt.setElementTouchActionNone(this.element),this.tracker=new Kt.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(Zr){var en;for(en=0;en<Wr.buttons.length;en++)Wr.buttons[en].notifyGroupEnter()},exitHandler:function(Zr){var en;if(!Zr.insideElementPressed)for(en=0;en<Wr.buttons.length;en++)Wr.buttons[en].notifyGroupExit()}})},Kt.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}}}(OpenSeadragon),function(Kt){Kt.Rect=function(Vt,Hr,Wr,Yr,Zr){this.x=typeof Vt=="number"?Vt:0,this.y=typeof Hr=="number"?Hr:0,this.width=typeof Wr=="number"?Wr:0,this.height=typeof Yr=="number"?Yr:0,this.degrees=typeof Zr=="number"?Zr:0,this.degrees=Kt.positiveModulo(this.degrees,360);var en,tn;this.degrees>=270?(en=this.getTopRight(),this.x=en.x,this.y=en.y,tn=this.height,this.height=this.width,this.width=tn,this.degrees-=270):this.degrees>=180?(en=this.getBottomRight(),this.x=en.x,this.y=en.y,this.degrees-=180):this.degrees>=90&&(en=this.getBottomLeft(),this.x=en.x,this.y=en.y,tn=this.height,this.height=this.width,this.width=tn,this.degrees-=90)},Kt.Rect.fromSummits=function(Vt,Hr,Wr){var Yr=Vt.distanceTo(Hr),Zr=Vt.distanceTo(Wr),en=Hr.minus(Vt),tn=Math.atan(en.y/en.x);return en.x<0?tn+=Math.PI:en.y<0&&(tn+=2*Math.PI),new Kt.Rect(Vt.x,Vt.y,Yr,Zr,tn/Math.PI*180)},Kt.Rect.prototype={clone:function(){return new Kt.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new Kt.Point(this.x,this.y)},getBottomRight:function(){return new Kt.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new Kt.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new Kt.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new Kt.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new Kt.Point(this.width,this.height)},equals:function(Vt){return Vt instanceof Kt.Rect&&this.x===Vt.x&&this.y===Vt.y&&this.width===Vt.width&&this.height===Vt.height&&this.degrees===Vt.degrees},times:function(Vt){return new Kt.Rect(this.x*Vt,this.y*Vt,this.width*Vt,this.height*Vt,this.degrees)},translate:function(Vt){return new Kt.Rect(this.x+Vt.x,this.y+Vt.y,this.width,this.height,this.degrees)},union:function(Vt){var Hr=this.getBoundingBox(),Wr=Vt.getBoundingBox(),Yr=Math.min(Hr.x,Wr.x),Zr=Math.min(Hr.y,Wr.y),en=Math.max(Hr.x+Hr.width,Wr.x+Wr.width),tn=Math.max(Hr.y+Hr.height,Wr.y+Wr.height);return new Kt.Rect(Yr,Zr,en-Yr,tn-Zr)},intersection:function(Vt){var Hr=1e-10,Wr=[],Yr=this.getTopLeft();Vt.containsPoint(Yr,Hr)&&Wr.push(Yr);var Zr=this.getTopRight();Vt.containsPoint(Zr,Hr)&&Wr.push(Zr);var en=this.getBottomLeft();Vt.containsPoint(en,Hr)&&Wr.push(en);var tn=this.getBottomRight();Vt.containsPoint(tn,Hr)&&Wr.push(tn);var rn=Vt.getTopLeft();this.containsPoint(rn,Hr)&&Wr.push(rn);var nn=Vt.getTopRight();this.containsPoint(nn,Hr)&&Wr.push(nn);var on=Vt.getBottomLeft();this.containsPoint(on,Hr)&&Wr.push(on);var an=Vt.getBottomRight();this.containsPoint(an,Hr)&&Wr.push(an);for(var $n=this._getSegments(),ln=Vt._getSegments(),Hn=0;Hn<$n.length;Hn++)for(var jn=$n[Hn],zn=0;zn<ln.length;zn++){var Wn=ln[zn],ei=$i(jn[0],jn[1],Wn[0],Wn[1]);ei&&Wr.push(ei)}function $i(Hs,js,zs,Xs){var ia=js.minus(Hs),Qs=Xs.minus(zs),Zs=-Qs.x*ia.y+ia.x*Qs.y;if(Zs===0)return null;var Gs=(ia.x*(Hs.y-zs.y)-ia.y*(Hs.x-zs.x))/Zs,Hl=(Qs.x*(Hs.y-zs.y)-Qs.y*(Hs.x-zs.x))/Zs;return-Hr<=Gs&&Gs<=1-Hr&&-Hr<=Hl&&Hl<=1-Hr?new Kt.Point(Hs.x+Hl*ia.x,Hs.y+Hl*ia.y):null}if(Wr.length===0)return null;for(var Mi=Wr[0].x,Ni=Wr[0].x,Ts=Wr[0].y,ps=Wr[0].y,$s=1;$s<Wr.length;$s++){var Ws=Wr[$s];Ws.x<Mi&&(Mi=Ws.x),Ws.x>Ni&&(Ni=Ws.x),Ws.y<Ts&&(Ts=Ws.y),Ws.y>ps&&(ps=Ws.y)}return new Kt.Rect(Mi,Ts,Ni-Mi,ps-Ts)},_getSegments:function(){var Vt=this.getTopLeft(),Hr=this.getTopRight(),Wr=this.getBottomLeft(),Yr=this.getBottomRight();return[[Vt,Hr],[Hr,Yr],[Yr,Wr],[Wr,Vt]]},rotate:function(Vt,Hr){if(Vt=Kt.positiveModulo(Vt,360),Vt===0)return this.clone();Hr=Hr||this.getCenter();var Wr=this.getTopLeft().rotate(Vt,Hr),Yr=this.getTopRight().rotate(Vt,Hr),Zr=Yr.minus(Wr);Zr=Zr.apply(function(tn){var rn=1e-15;return Math.abs(tn)<rn?0:tn});var en=Math.atan(Zr.y/Zr.x);return Zr.x<0?en+=Math.PI:Zr.y<0&&(en+=2*Math.PI),new Kt.Rect(Wr.x,Wr.y,this.width,this.height,en/Math.PI*180)},getBoundingBox:function(){if(this.degrees===0)return this.clone();var Vt=this.getTopLeft(),Hr=this.getTopRight(),Wr=this.getBottomLeft(),Yr=this.getBottomRight(),Zr=Math.min(Vt.x,Hr.x,Wr.x,Yr.x),en=Math.max(Vt.x,Hr.x,Wr.x,Yr.x),tn=Math.min(Vt.y,Hr.y,Wr.y,Yr.y),rn=Math.max(Vt.y,Hr.y,Wr.y,Yr.y);return new Kt.Rect(Zr,tn,en-Zr,rn-tn)},getIntegerBoundingBox:function(){var Vt=this.getBoundingBox(),Hr=Math.floor(Vt.x),Wr=Math.floor(Vt.y),Yr=Math.ceil(Vt.width+Vt.x-Hr),Zr=Math.ceil(Vt.height+Vt.y-Wr);return new Kt.Rect(Hr,Wr,Yr,Zr)},containsPoint:function(Vt,Hr){Hr=Hr||0;var Wr=this.getTopLeft(),Yr=this.getTopRight(),Zr=this.getBottomLeft(),en=Yr.minus(Wr),tn=Zr.minus(Wr);return(Vt.x-Wr.x)*en.x+(Vt.y-Wr.y)*en.y>=-Hr&&(Vt.x-Yr.x)*en.x+(Vt.y-Yr.y)*en.y<=Hr&&(Vt.x-Wr.x)*tn.x+(Vt.y-Wr.y)*tn.y>=-Hr&&(Vt.x-Zr.x)*tn.x+(Vt.y-Zr.y)*tn.y<=Hr},toString:function(){return"["+Math.round(this.x*100)/100+", "+Math.round(this.y*100)/100+", "+Math.round(this.width*100)/100+"x"+Math.round(this.height*100)/100+", "+Math.round(this.degrees*100)/100+"deg]"}}}(OpenSeadragon),function(Kt){var Vt={};Kt.ReferenceStrip=function(nn){var on=this,an=nn.viewer,$n=Kt.getElementSize(an.element),ln,Hn,jn;for(nn.id||(nn.id="referencestrip-"+Kt.now(),this.element=Kt.makeNeutralElement("div"),this.element.id=nn.id,this.element.className="referencestrip"),nn=Kt.extend(!0,{sizeRatio:Kt.DEFAULT_SETTINGS.referenceStripSizeRatio,position:Kt.DEFAULT_SETTINGS.referenceStripPosition,scroll:Kt.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:Kt.DEFAULT_SETTINGS.clickTimeThreshold},nn,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),Kt.extend(this,nn),Vt[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,Hn=this.element.style,Hn.marginTop="0px",Hn.marginRight="0px",Hn.marginBottom="0px",Hn.marginLeft="0px",Hn.left="0px",Hn.bottom="0px",Hn.border="0px",Hn.background="#000",Hn.position="relative",Kt.setElementTouchActionNone(this.element),Kt.setElementOpacity(this.element,.8),this.viewer=an,this.innerTracker=new Kt.MouseTracker({element:this.element,dragHandler:Kt.delegate(this,Hr),scrollHandler:Kt.delegate(this,Wr),enterHandler:Kt.delegate(this,Zr),exitHandler:Kt.delegate(this,en),keyDownHandler:Kt.delegate(this,tn),keyHandler:Kt.delegate(this,rn)}),nn.width&&nn.height?(this.element.style.width=nn.width+"px",this.element.style.height=nn.height+"px",an.addControl(this.element,{anchor:Kt.ControlAnchor.BOTTOM_LEFT})):nn.scroll=="horizontal"?(this.element.style.width=$n.x*nn.sizeRatio*an.tileSources.length+12*an.tileSources.length+"px",this.element.style.height=$n.y*nn.sizeRatio+"px",an.addControl(this.element,{anchor:Kt.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=$n.y*nn.sizeRatio*an.tileSources.length+12*an.tileSources.length+"px",this.element.style.width=$n.x*nn.sizeRatio+"px",an.addControl(this.element,{anchor:Kt.ControlAnchor.TOP_LEFT})),this.panelWidth=$n.x*this.sizeRatio+8,this.panelHeight=$n.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},jn=0;jn<an.tileSources.length;jn++)ln=Kt.makeNeutralElement("div"),ln.id=this.element.id+"-"+jn,ln.style.width=on.panelWidth+"px",ln.style.height=on.panelHeight+"px",ln.style.display="inline",ln.style.float="left",ln.style.cssFloat="left",ln.style.styleFloat="left",ln.style.padding="2px",Kt.setElementTouchActionNone(ln),ln.innerTracker=new Kt.MouseTracker({element:ln,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(zn){zn.eventSource.dragging=Kt.now()},releaseHandler:function(zn){var Wn=zn.eventSource,ei=Wn.element.id,$i=Number(ei.split("-")[2]),Mi=Kt.now();zn.insideElementPressed&&zn.insideElementReleased&&Wn.dragging&&Mi-Wn.dragging<Wn.clickTimeThreshold&&(Wn.dragging=null,an.goToPage($i))}}),this.element.appendChild(ln),ln.activePanel=!1,this.panels.push(ln);Yr(this,this.scroll=="vertical"?$n.y:$n.x,0),this.setFocus(0)},Kt.extend(Kt.ReferenceStrip.prototype,Kt.EventSource.prototype,Kt.Viewer.prototype,{setFocus:function(nn){var on=this.element.querySelector("#"+this.element.id+"-"+nn),an=Kt.getElementSize(this.viewer.canvas),$n=Number(this.element.style.width.replace("px","")),ln=Number(this.element.style.height.replace("px","")),Hn=-Number(this.element.style.marginLeft.replace("px","")),jn=-Number(this.element.style.marginTop.replace("px","")),zn;this.currentSelected!==on&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=on,this.currentSelected.style.background="#999",this.scroll=="horizontal"?(zn=Number(nn)*(this.panelWidth+3),zn>Hn+an.x-this.panelWidth?(zn=Math.min(zn,$n-an.x),this.element.style.marginLeft=-zn+"px",Yr(this,an.x,-zn)):zn<Hn&&(zn=Math.max(0,zn-an.x/2),this.element.style.marginLeft=-zn+"px",Yr(this,an.x,-zn))):(zn=Number(nn)*(this.panelHeight+3),zn>jn+an.y-this.panelHeight?(zn=Math.min(zn,ln-an.y),this.element.style.marginTop=-zn+"px",Yr(this,an.y,-zn)):zn<jn&&(zn=Math.max(0,zn-an.y/2),this.element.style.marginTop=-zn+"px",Yr(this,an.y,-zn))),this.currentPage=nn,Zr.call(this,{eventSource:this.innerTracker}))},update:function(){return Vt[this.id].animating?(Kt.console.log("image reference strip update"),!0):!1},destroy:function(){if(this.miniViewers)for(var nn in this.miniViewers)this.miniViewers[nn].destroy();this.element&&this.element.parentNode.removeChild(this.element)}});function Hr(nn){var on=Number(this.element.style.marginLeft.replace("px","")),an=Number(this.element.style.marginTop.replace("px","")),$n=Number(this.element.style.width.replace("px","")),ln=Number(this.element.style.height.replace("px","")),Hn=Kt.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&(this.scroll=="horizontal"?-nn.delta.x>0?on>-($n-Hn.x)&&(this.element.style.marginLeft=on+nn.delta.x*2+"px",Yr(this,Hn.x,on+nn.delta.x*2)):-nn.delta.x<0&&on<0&&(this.element.style.marginLeft=on+nn.delta.x*2+"px",Yr(this,Hn.x,on+nn.delta.x*2)):-nn.delta.y>0?an>-(ln-Hn.y)&&(this.element.style.marginTop=an+nn.delta.y*2+"px",Yr(this,Hn.y,an+nn.delta.y*2)):-nn.delta.y<0&&an<0&&(this.element.style.marginTop=an+nn.delta.y*2+"px",Yr(this,Hn.y,an+nn.delta.y*2))),!1}function Wr(nn){var on=Number(this.element.style.marginLeft.replace("px","")),an=Number(this.element.style.marginTop.replace("px","")),$n=Number(this.element.style.width.replace("px","")),ln=Number(this.element.style.height.replace("px","")),Hn=Kt.getElementSize(this.viewer.canvas);return this.element&&(this.scroll=="horizontal"?nn.scroll>0?on>-($n-Hn.x)&&(this.element.style.marginLeft=on-nn.scroll*60+"px",Yr(this,Hn.x,on-nn.scroll*60)):nn.scroll<0&&on<0&&(this.element.style.marginLeft=on-nn.scroll*60+"px",Yr(this,Hn.x,on-nn.scroll*60)):nn.scroll<0?an>Hn.y-ln&&(this.element.style.marginTop=an+nn.scroll*60+"px",Yr(this,Hn.y,an+nn.scroll*60)):nn.scroll>0&&an<0&&(this.element.style.marginTop=an+nn.scroll*60+"px",Yr(this,Hn.y,an+nn.scroll*60))),!1}function Yr(nn,on,an){var $n,ln,Hn,jn,zn,Wn,ei;for(nn.scroll=="horizontal"?$n=nn.panelWidth:$n=nn.panelHeight,ln=Math.ceil(on/$n)+5,Hn=Math.ceil((Math.abs(an)+on)/$n)+1,ln=Hn-ln,ln=ln<0?0:ln,Wn=ln;Wn<Hn&&Wn<nn.panels.length;Wn++)if(ei=nn.panels[Wn],!ei.activePanel){var $i,Mi=nn.viewer.tileSources[Wn];Mi.referenceStripThumbnailUrl?$i={type:"image",url:Mi.referenceStripThumbnailUrl}:$i=Mi,jn=new Kt.Viewer({id:ei.id,tileSources:[$i],element:ei,navigatorSizeRatio:nn.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:nn.viewer.loadTilesWithAjax,ajaxHeaders:nn.viewer.ajaxHeaders,useCanvas:nn.useCanvas}),jn.displayRegion=Kt.makeNeutralElement("div"),jn.displayRegion.id=ei.id+"-displayregion",jn.displayRegion.className="displayregion",zn=jn.displayRegion.style,zn.position="relative",zn.top="0px",zn.left="0px",zn.fontSize="0px",zn.overflow="hidden",zn.float="left",zn.cssFloat="left",zn.styleFloat="left",zn.zIndex=999999999,zn.cursor="default",zn.width=nn.panelWidth-4+"px",zn.height=nn.panelHeight-4+"px",jn.displayRegion.innerTracker=new Kt.MouseTracker({element:jn.displayRegion,startDisabled:!0}),ei.getElementsByTagName("div")[0].appendChild(jn.displayRegion),nn.miniViewers[ei.id]=jn,ei.activePanel=!0}}function Zr(nn){var on=nn.eventSource.element;return this.scroll=="horizontal"?on.style.marginBottom="0px":on.style.marginLeft="0px",!1}function en(nn){var on=nn.eventSource.element;return this.scroll=="horizontal"?on.style.marginBottom="-"+Kt.getElementSize(on).y/2+"px":on.style.marginLeft="-"+Kt.getElementSize(on).x/2+"px",!1}function tn(nn){if(!nn.preventDefaultAction&&!nn.ctrl&&!nn.alt&&!nn.meta)switch(nn.keyCode){case 38:return Wr.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 40:return Wr.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 37:return Wr.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 39:return Wr.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}else return!0}function rn(nn){if(!nn.preventDefaultAction&&!nn.ctrl&&!nn.alt&&!nn.meta)switch(nn.keyCode){case 61:return Wr.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:return Wr.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 48:case 119:case 87:return Wr.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 115:case 83:return Wr.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 97:return Wr.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 100:return Wr.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}else return!0}}(OpenSeadragon),function(Kt){Kt.DisplayRect=function(Vt,Hr,Wr,Yr,Zr,en){Kt.Rect.apply(this,[Vt,Hr,Wr,Yr]),this.minLevel=Zr,this.maxLevel=en},Kt.extend(Kt.DisplayRect.prototype,Kt.Rect.prototype)}(OpenSeadragon),function(Kt){Kt.Spring=function(Hr){var Wr=arguments;typeof Hr!="object"&&(Hr={initial:Wr.length&&typeof Wr[0]=="number"?Wr[0]:void 0,springStiffness:Wr.length>1?Wr[1].springStiffness:5,animationTime:Wr.length>1?Wr[1].animationTime:1.5}),Kt.console.assert(typeof Hr.springStiffness=="number"&&Hr.springStiffness!==0,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),Kt.console.assert(typeof Hr.animationTime=="number"&&Hr.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),Hr.exponential&&(this._exponential=!0,delete Hr.exponential),Kt.extend(!0,this,Hr),this.current={value:typeof this.initial=="number"?this.initial:this._exponential?0:1,time:Kt.now()},Kt.console.assert(!this._exponential||this.current.value!==0,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},Kt.Spring.prototype={resetTo:function(Hr){Kt.console.assert(!this._exponential||Hr!==0,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=Hr,this.start.time=this.target.time=this.current.time=Kt.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(Hr){Kt.console.assert(!this._exponential||Hr!==0,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=Hr,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(Hr){this.start.value+=Hr,this.target.value+=Hr,this._exponential&&(Kt.console.assert(this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(Hr){this._exponential=Hr,this._exponential&&(Kt.console.assert(this.current.value!==0&&this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=Kt.now();var Hr,Wr;this._exponential?(Hr=this.start._logValue,Wr=this.target._logValue):(Hr=this.start.value,Wr=this.target.value);var Yr=this.current.time>=this.target.time?Wr:Hr+(Wr-Hr)*Vt(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),Zr=this.current.value;return this._exponential?this.current.value=Math.exp(Yr):this.current.value=Yr,Zr!=this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}};function Vt(Hr,Wr){return(1-Math.exp(Hr*-Wr))/(1-Math.exp(-Hr))}}(OpenSeadragon),function(Kt){function Vt(Wr){Kt.extend(!0,this,{timeout:Kt.DEFAULT_SETTINGS.timeout,jobId:null},Wr),this.image=null}Vt.prototype={errorMsg:null,start:function(){var Wr=this,Yr=this.abort;this.image=new Image,this.image.onload=function(){Wr.finish(!0)},this.image.onabort=this.image.onerror=function(){Wr.errorMsg="Image load aborted",Wr.finish(!1)},this.jobId=window.setTimeout(function(){Wr.errorMsg="Image load exceeded timeout ("+Wr.timeout+" ms)",Wr.finish(!1)},this.timeout),this.loadWithAjax?(this.request=Kt.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",success:function(Zr){var en;try{en=new window.Blob([Zr.response])}catch(on){var tn=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(on.name==="TypeError"&&tn){var rn=new tn;rn.append(Zr.response),en=rn.getBlob()}}en.size===0&&(Wr.errorMsg="Empty image response.",Wr.finish(!1));var nn=(window.URL||window.webkitURL).createObjectURL(en);Wr.image.src=nn},error:function(Zr){Wr.errorMsg="Image load aborted - XHR error",Wr.finish(!1)}}),this.abort=function(){Wr.request.abort(),typeof Yr=="function"&&Yr()}):(this.crossOriginPolicy!==!1&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(Wr){this.image.onload=this.image.onerror=this.image.onabort=null,Wr||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},Kt.ImageLoader=function(Wr){Kt.extend(!0,this,{jobLimit:Kt.DEFAULT_SETTINGS.imageLoaderLimit,timeout:Kt.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},Wr)},Kt.ImageLoader.prototype={addJob:function(Wr){var Yr=this,Zr=function(rn){Hr(Yr,rn,Wr.callback)},en={src:Wr.src,loadWithAjax:Wr.loadWithAjax,ajaxHeaders:Wr.loadWithAjax?Wr.ajaxHeaders:null,crossOriginPolicy:Wr.crossOriginPolicy,ajaxWithCredentials:Wr.ajaxWithCredentials,callback:Zr,abort:Wr.abort,timeout:this.timeout},tn=new Vt(en);!this.jobLimit||this.jobsInProgress<this.jobLimit?(tn.start(),this.jobsInProgress++):this.jobQueue.push(tn)},clear:function(){for(var Wr=0;Wr<this.jobQueue.length;Wr++){var Yr=this.jobQueue[Wr];typeof Yr.abort=="function"&&Yr.abort()}this.jobQueue=[]}};function Hr(Wr,Yr,Zr){var en;Wr.jobsInProgress--,(!Wr.jobLimit||Wr.jobsInProgress<Wr.jobLimit)&&Wr.jobQueue.length>0&&(en=Wr.jobQueue.shift(),en.start(),Wr.jobsInProgress++),Zr(Yr.image,Yr.errorMsg,Yr.request)}}(OpenSeadragon),function(Kt){Kt.Tile=function(Vt,Hr,Wr,Yr,Zr,en,tn,rn,nn,on){this.level=Vt,this.x=Hr,this.y=Wr,this.bounds=Yr,this.sourceBounds=on,this.exists=Zr,this.url=en,this.context2D=tn,this.loadWithAjax=rn,this.ajaxHeaders=nn,this.ajaxHeaders?this.cacheKey=this.url+"+"+JSON.stringify(this.ajaxHeaders):this.cacheKey=this.url,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},Kt.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(Vt){if(!this.cacheImageRecord){Kt.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString());return}if(!this.loaded){Kt.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}this.element||(this.element=Kt.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=Vt&&Vt.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",Kt.setElementOpacity(this.element,this.opacity)},drawCanvas:function(Vt,Hr,Wr,Yr){var Zr=this.position.times(Kt.pixelDensityRatio),en=this.size.times(Kt.pixelDensityRatio),tn;if(!this.context2D&&!this.cacheImageRecord){Kt.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString());return}if(tn=this.context2D||this.cacheImageRecord.getRenderedContext(),!this.loaded||!tn){Kt.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}Vt.save(),Vt.globalAlpha=this.opacity,typeof Wr=="number"&&Wr!==1&&(Zr=Zr.times(Wr),en=en.times(Wr)),Yr instanceof Kt.Point&&(Zr=Zr.plus(Yr)),Vt.globalAlpha===1&&this._hasTransparencyChannel()&&Vt.clearRect(Zr.x,Zr.y,en.x,en.y),Hr({context:Vt,tile:this,rendered:tn});var rn,nn;this.sourceBounds?(rn=Math.min(this.sourceBounds.width,tn.canvas.width),nn=Math.min(this.sourceBounds.height,tn.canvas.height)):(rn=tn.canvas.width,nn=tn.canvas.height),Vt.drawImage(tn.canvas,0,0,rn,nn,Zr.x,Zr.y,en.x,en.y),Vt.restore()},getScaleForEdgeSmoothing:function(){var Vt;if(this.cacheImageRecord)Vt=this.cacheImageRecord.getRenderedContext();else if(this.context2D)Vt=this.context2D;else return Kt.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;return Vt.canvas.width/(this.size.x*Kt.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(Vt,Hr,Wr){var Yr=Math.max(1,Math.ceil((Wr.x-Hr.x)/2)),Zr=Math.max(1,Math.ceil((Wr.y-Hr.y)/2));return new Kt.Point(Yr,Zr).minus(this.position.times(Kt.pixelDensityRatio).times(Vt||1).apply(function(en){return en%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(Kt){Kt.OverlayPlacement=Kt.Placement,Kt.OverlayRotationMode=Kt.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),Kt.Overlay=function(Vt,Hr,Wr){var Yr;Kt.isPlainObject(Vt)?Yr=Vt:Yr={element:Vt,location:Hr,placement:Wr},this.element=Yr.element,this.style=Yr.element.style,this._init(Yr)},Kt.Overlay.prototype={_init:function(Vt){this.location=Vt.location,this.placement=Vt.placement===void 0?Kt.Placement.TOP_LEFT:Vt.placement,this.onDraw=Vt.onDraw,this.checkResize=Vt.checkResize===void 0?!0:Vt.checkResize,this.width=Vt.width===void 0?null:Vt.width,this.height=Vt.height===void 0?null:Vt.height,this.rotationMode=Vt.rotationMode||Kt.OverlayRotationMode.EXACT,this.location instanceof Kt.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=Kt.Placement.TOP_LEFT),this.scales=this.width!==null&&this.height!==null,this.bounds=new Kt.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(Vt,Hr){var Wr=Kt.Placement.properties[this.placement];Wr&&(Wr.isHorizontallyCentered?Vt.x-=Hr.x/2:Wr.isRight&&(Vt.x-=Hr.x),Wr.isVerticallyCentered?Vt.y-=Hr.y/2:Wr.isBottom&&(Vt.y-=Hr.y))},destroy:function(){var Vt=this.element,Hr=this.style;Vt.parentNode&&(Vt.parentNode.removeChild(Vt),Vt.prevElementParent&&(Hr.display="none",document.body.appendChild(Vt))),this.onDraw=null,Hr.top="",Hr.left="",Hr.position="",this.width!==null&&(Hr.width=""),this.height!==null&&(Hr.height="");var Wr=Kt.getCssPropertyWithVendorPrefix("transformOrigin"),Yr=Kt.getCssPropertyWithVendorPrefix("transform");Wr&&Yr&&(Hr[Wr]="",Hr[Yr]="")},drawHTML:function(Vt,Hr){var Wr=this.element;Wr.parentNode!==Vt&&(Wr.prevElementParent=Wr.parentNode,Wr.prevNextSibling=Wr.nextSibling,Vt.appendChild(Wr),this.style.position="absolute",this.size=Kt.getElementSize(Wr));var Yr=this._getOverlayPositionAndSize(Hr),Zr=Yr.position,en=this.size=Yr.size,tn=Yr.rotate;if(this.onDraw)this.onDraw(Zr,en,this.element);else{var rn=this.style;rn.left=Zr.x+"px",rn.top=Zr.y+"px",this.width!==null&&(rn.width=en.x+"px"),this.height!==null&&(rn.height=en.y+"px");var nn=Kt.getCssPropertyWithVendorPrefix("transformOrigin"),on=Kt.getCssPropertyWithVendorPrefix("transform");nn&&on&&(tn?(rn[nn]=this._getTransformOrigin(),rn[on]="rotate("+tn+"deg)"):(rn[nn]="",rn[on]="")),rn.display!=="none"&&(rn.display="block")}},_getOverlayPositionAndSize:function(Vt){var Hr=Vt.pixelFromPoint(this.location,!0),Wr=this._getSizeInPixels(Vt);this.adjust(Hr,Wr);var Yr=0;if(Vt.degrees&&this.rotationMode!==Kt.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===Kt.OverlayRotationMode.BOUNDING_BOX&&this.width!==null&&this.height!==null){var Zr=new Kt.Rect(Hr.x,Hr.y,Wr.x,Wr.y),en=this._getBoundingBox(Zr,Vt.degrees);Hr=en.getTopLeft(),Wr=en.getSize()}else Yr=Vt.degrees;return{position:Hr,size:Wr,rotate:Yr}},_getSizeInPixels:function(Vt){var Hr=this.size.x,Wr=this.size.y;if(this.width!==null||this.height!==null){var Yr=Vt.deltaPixelsFromPointsNoRotate(new Kt.Point(this.width||0,this.height||0),!0);this.width!==null&&(Hr=Yr.x),this.height!==null&&(Wr=Yr.y)}if(this.checkResize&&(this.width===null||this.height===null)){var Zr=this.size=Kt.getElementSize(this.element);this.width===null&&(Hr=Zr.x),this.height===null&&(Wr=Zr.y)}return new Kt.Point(Hr,Wr)},_getBoundingBox:function(Vt,Hr){var Wr=this._getPlacementPoint(Vt);return Vt.rotate(Hr,Wr).getBoundingBox()},_getPlacementPoint:function(Vt){var Hr=new Kt.Point(Vt.x,Vt.y),Wr=Kt.Placement.properties[this.placement];return Wr&&(Wr.isHorizontallyCentered?Hr.x+=Vt.width/2:Wr.isRight&&(Hr.x+=Vt.width),Wr.isVerticallyCentered?Hr.y+=Vt.height/2:Wr.isBottom&&(Hr.y+=Vt.height)),Hr},_getTransformOrigin:function(){var Vt="",Hr=Kt.Placement.properties[this.placement];return Hr&&(Hr.isLeft?Vt="left":Hr.isRight&&(Vt="right"),Hr.isTop?Vt+=" top":Hr.isBottom&&(Vt+=" bottom")),Vt},update:function(Vt,Hr){var Wr=Kt.isPlainObject(Vt)?Vt:{location:Vt,placement:Hr};this._init({location:Wr.location||this.location,placement:Wr.placement!==void 0?Wr.placement:this.placement,onDraw:Wr.onDraw||this.onDraw,checkResize:Wr.checkResize||this.checkResize,width:Wr.width!==void 0?Wr.width:this.width,height:Wr.height!==void 0?Wr.height:this.height,rotationMode:Wr.rotationMode||this.rotationMode})},getBounds:function(Vt){Kt.console.assert(Vt,"A viewport must now be passed to Overlay.getBounds.");var Hr=this.width,Wr=this.height;if(Hr===null||Wr===null){var Yr=Vt.deltaPointsFromPixelsNoRotate(this.size,!0);Hr===null&&(Hr=Yr.x),Wr===null&&(Wr=Yr.y)}var Zr=this.location.clone();return this.adjust(Zr,new Kt.Point(Hr,Wr)),this._adjustBoundsForRotation(Vt,new Kt.Rect(Zr.x,Zr.y,Hr,Wr))},_adjustBoundsForRotation:function(Vt,Hr){if(!Vt||Vt.degrees===0||this.rotationMode===Kt.OverlayRotationMode.EXACT)return Hr;if(this.rotationMode===Kt.OverlayRotationMode.BOUNDING_BOX){if(this.width===null||this.height===null)return Hr;var Wr=this._getOverlayPositionAndSize(Vt);return Vt.viewerElementToViewportRectangle(new Kt.Rect(Wr.position.x,Wr.position.y,Wr.size.x,Wr.size.y))}return Hr.rotate(-Vt.degrees,this._getPlacementPoint(Hr))}}}(OpenSeadragon),function(Kt){Kt.Drawer=function(Vt){Kt.console.assert(Vt.viewer,"[Drawer] options.viewer is required");var Hr=arguments;if(Kt.isPlainObject(Vt)||(Vt={source:Hr[0],viewport:Hr[1],element:Hr[2]}),Kt.console.assert(Vt.viewport,"[Drawer] options.viewport is required"),Kt.console.assert(Vt.element,"[Drawer] options.element is required"),Vt.source&&Kt.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=Vt.viewer,this.viewport=Vt.viewport,this.debugGridColor=typeof Vt.debugGridColor=="string"?[Vt.debugGridColor]:Vt.debugGridColor||Kt.DEFAULT_SETTINGS.debugGridColor,Vt.opacity&&Kt.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=Kt.supportsCanvas&&(this.viewer?this.viewer.useCanvas:!0),this.container=Kt.getElement(Vt.element),this.canvas=Kt.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var Wr=this._calculateCanvasSize();this.canvas.width=Wr.x,this.canvas.height=Wr.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",Kt.setElementOpacity(this.canvas,this.opacity,!0),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},Kt.Drawer.prototype={addOverlay:function(Vt,Hr,Wr,Yr){return Kt.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(Vt,Hr,Wr,Yr),this},updateOverlay:function(Vt,Hr,Wr){return Kt.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(Vt,Hr,Wr),this},removeOverlay:function(Vt){return Kt.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(Vt),this},clearOverlays:function(){return Kt.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(Vt){var Hr=this.viewport.pixelFromPointNoRotate(Vt,!0);return new Kt.Point(Hr.x*Kt.pixelDensityRatio,Hr.y*Kt.pixelDensityRatio)},clipWithPolygons:function(Vt,Hr){if(this.useCanvas){var Wr=this._getContext(Hr);Wr.beginPath(),Vt.forEach(function(Yr){Yr.forEach(function(Zr,en){Wr[en===0?"moveTo":"lineTo"](Zr.x,Zr.y)})}),Wr.clip()}},setOpacity:function(Vt){Kt.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var Hr=this.viewer.world,Wr=0;Wr<Hr.getItemCount();Wr++)Hr.getItemAt(Wr).setOpacity(Vt);return this},getOpacity:function(){Kt.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var Vt=this.viewer.world,Hr=0,Wr=0;Wr<Vt.getItemCount();Wr++){var Yr=Vt.getItemAt(Wr).getOpacity();Yr>Hr&&(Hr=Yr)}return Hr},needsUpdate:function(){return Kt.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return Kt.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return Kt.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return Kt.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var Vt=this._calculateCanvasSize();if((this.canvas.width!=Vt.x||this.canvas.height!=Vt.y)&&(this.canvas.width=Vt.x,this.canvas.height=Vt.y,this._updateImageSmoothingEnabled(this.context),this.sketchCanvas!==null)){var Hr=this._calculateSketchCanvasSize();this.sketchCanvas.width=Hr.x,this.sketchCanvas.height=Hr.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(Vt,Hr){if(this.useCanvas){var Wr=this._getContext(Vt);if(Hr)Wr.clearRect(Hr.x,Hr.y,Hr.width,Hr.height);else{var Yr=Wr.canvas;Wr.clearRect(0,0,Yr.width,Yr.height)}}},viewportToDrawerRectangle:function(Vt){var Hr=this.viewport.pixelFromPointNoRotate(Vt.getTopLeft(),!0),Wr=this.viewport.deltaPixelsFromPointsNoRotate(Vt.getSize(),!0);return new Kt.Rect(Hr.x*Kt.pixelDensityRatio,Hr.y*Kt.pixelDensityRatio,Wr.x*Kt.pixelDensityRatio,Wr.y*Kt.pixelDensityRatio)},drawTile:function(Vt,Hr,Wr,Yr,Zr){if(Kt.console.assert(Vt,"[Drawer.drawTile] tile is required"),Kt.console.assert(Hr,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var en=this._getContext(Wr);Yr=Yr||1,Vt.drawCanvas(en,Hr,Yr,Zr)}else Vt.drawHTML(this.canvas)},_getContext:function(Vt){var Hr=this.context;if(Vt){if(this.sketchCanvas===null){this.sketchCanvas=document.createElement("canvas");var Wr=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=Wr.x,this.sketchCanvas.height=Wr.y,this.sketchContext=this.sketchCanvas.getContext("2d"),this.viewport.getRotation()===0){var Yr=this;this.viewer.addHandler("rotate",function Zr(){if(Yr.viewport.getRotation()!==0){Yr.viewer.removeHandler("rotate",Zr);var en=Yr._calculateSketchCanvasSize();Yr.sketchCanvas.width=en.x,Yr.sketchCanvas.height=en.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}Hr=this.sketchContext}return Hr},saveContext:function(Vt){this.useCanvas&&this._getContext(Vt).save()},restoreContext:function(Vt){this.useCanvas&&this._getContext(Vt).restore()},setClip:function(Vt,Hr){if(this.useCanvas){var Wr=this._getContext(Hr);Wr.beginPath(),Wr.rect(Vt.x,Vt.y,Vt.width,Vt.height),Wr.clip()}},drawRectangle:function(Vt,Hr,Wr){if(this.useCanvas){var Yr=this._getContext(Wr);Yr.save(),Yr.fillStyle=Hr,Yr.fillRect(Vt.x,Vt.y,Vt.width,Vt.height),Yr.restore()}},blendSketch:function(Vt,Hr,Wr,Yr){var Zr=Vt;if(Kt.isPlainObject(Zr)||(Zr={opacity:Vt,scale:Hr,translate:Wr,compositeOperation:Yr}),!(!this.useCanvas||!this.sketchCanvas)){Vt=Zr.opacity,Yr=Zr.compositeOperation;var en=Zr.bounds;if(this.context.save(),this.context.globalAlpha=Vt,Yr&&(this.context.globalCompositeOperation=Yr),en)en.x<0&&(en.width+=en.x,en.x=0),en.x+en.width>this.canvas.width&&(en.width=this.canvas.width-en.x),en.y<0&&(en.height+=en.y,en.y=0),en.y+en.height>this.canvas.height&&(en.height=this.canvas.height-en.y),this.context.drawImage(this.sketchCanvas,en.x,en.y,en.width,en.height,en.x,en.y,en.width,en.height);else{Hr=Zr.scale||1,Wr=Zr.translate;var tn=Wr instanceof Kt.Point?Wr:new Kt.Point(0,0),rn=0,nn=0;if(Wr){var on=this.sketchCanvas.width-this.canvas.width,an=this.sketchCanvas.height-this.canvas.height;rn=Math.round(on/2),nn=Math.round(an/2)}this.context.drawImage(this.sketchCanvas,tn.x-rn*Hr,tn.y-nn*Hr,(this.canvas.width+2*rn)*Hr,(this.canvas.height+2*nn)*Hr,-rn,-nn,this.canvas.width+2*rn,this.canvas.height+2*nn)}this.context.restore()}},drawDebugInfo:function(Vt,Hr,Wr,Yr){if(this.useCanvas){var Zr=this.viewer.world.getIndexOfItem(Yr)%this.debugGridColor.length,en=this.context;en.save(),en.lineWidth=2*Kt.pixelDensityRatio,en.font="small-caps bold "+13*Kt.pixelDensityRatio+"px arial",en.strokeStyle=this.debugGridColor[Zr],en.fillStyle=this.debugGridColor[Zr],this.viewport.degrees!==0&&this._offsetForRotation({degrees:this.viewport.degrees}),Yr.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:Yr.getRotation(!0),point:Yr.viewport.pixelFromPointNoRotate(Yr._getRotationPoint(!0),!0)}),Yr.viewport.degrees===0&&Yr.getRotation(!0)%360===0&&Yr._drawer.viewer.viewport.getFlip()&&Yr._drawer._flip(),en.strokeRect(Vt.position.x*Kt.pixelDensityRatio,Vt.position.y*Kt.pixelDensityRatio,Vt.size.x*Kt.pixelDensityRatio,Vt.size.y*Kt.pixelDensityRatio);var tn=(Vt.position.x+Vt.size.x/2)*Kt.pixelDensityRatio,rn=(Vt.position.y+Vt.size.y/2)*Kt.pixelDensityRatio;en.translate(tn,rn),en.rotate(Math.PI/180*-this.viewport.degrees),en.translate(-tn,-rn),Vt.x===0&&Vt.y===0&&(en.fillText("Zoom: "+this.viewport.getZoom(),Vt.position.x*Kt.pixelDensityRatio,(Vt.position.y-30)*Kt.pixelDensityRatio),en.fillText("Pan: "+this.viewport.getBounds().toString(),Vt.position.x*Kt.pixelDensityRatio,(Vt.position.y-20)*Kt.pixelDensityRatio)),en.fillText("Level: "+Vt.level,(Vt.position.x+10)*Kt.pixelDensityRatio,(Vt.position.y+20)*Kt.pixelDensityRatio),en.fillText("Column: "+Vt.x,(Vt.position.x+10)*Kt.pixelDensityRatio,(Vt.position.y+30)*Kt.pixelDensityRatio),en.fillText("Row: "+Vt.y,(Vt.position.x+10)*Kt.pixelDensityRatio,(Vt.position.y+40)*Kt.pixelDensityRatio),en.fillText("Order: "+Wr+" of "+Hr,(Vt.position.x+10)*Kt.pixelDensityRatio,(Vt.position.y+50)*Kt.pixelDensityRatio),en.fillText("Size: "+Vt.size.toString(),(Vt.position.x+10)*Kt.pixelDensityRatio,(Vt.position.y+60)*Kt.pixelDensityRatio),en.fillText("Position: "+Vt.position.toString(),(Vt.position.x+10)*Kt.pixelDensityRatio,(Vt.position.y+70)*Kt.pixelDensityRatio),this.viewport.degrees!==0&&this._restoreRotationChanges(),Yr.getRotation(!0)%360!==0&&this._restoreRotationChanges(),Yr.viewport.degrees===0&&Yr.getRotation(!0)%360===0&&Yr._drawer.viewer.viewport.getFlip()&&Yr._drawer._flip(),en.restore()}},debugRect:function(Vt){if(this.useCanvas){var Hr=this.context;Hr.save(),Hr.lineWidth=2*Kt.pixelDensityRatio,Hr.strokeStyle=this.debugGridColor[0],Hr.fillStyle=this.debugGridColor[0],Hr.strokeRect(Vt.x*Kt.pixelDensityRatio,Vt.y*Kt.pixelDensityRatio,Vt.width*Kt.pixelDensityRatio,Vt.height*Kt.pixelDensityRatio),Hr.restore()}},setImageSmoothingEnabled:function(Vt){this.useCanvas&&(this._imageSmoothingEnabled=Vt,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(Vt){Vt.msImageSmoothingEnabled=this._imageSmoothingEnabled,Vt.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(Vt){var Hr=this._getContext(Vt).canvas;return new Kt.Point(Hr.width,Hr.height)},getCanvasCenter:function(){return new Kt.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(Vt){var Hr=Vt.point?Vt.point.times(Kt.pixelDensityRatio):this.getCanvasCenter(),Wr=this._getContext(Vt.useSketch);Wr.save(),Wr.translate(Hr.x,Hr.y),this.viewer.viewport.flipped?(Wr.rotate(Math.PI/180*-Vt.degrees),Wr.scale(-1,1)):Wr.rotate(Math.PI/180*Vt.degrees),Wr.translate(-Hr.x,-Hr.y)},_flip:function(Vt){Vt=Vt||{};var Hr=Vt.point?Vt.point.times(Kt.pixelDensityRatio):this.getCanvasCenter(),Wr=this._getContext(Vt.useSketch);Wr.translate(Hr.x,0),Wr.scale(-1,1),Wr.translate(-Hr.x,0)},_restoreRotationChanges:function(Vt){var Hr=this._getContext(Vt);Hr.restore()},_calculateCanvasSize:function(){var Vt=Kt.pixelDensityRatio,Hr=this.viewport.getContainerSize();return{x:Math.round(Hr.x*Vt),y:Math.round(Hr.y*Vt)}},_calculateSketchCanvasSize:function(){var Vt=this._calculateCanvasSize();if(this.viewport.getRotation()===0)return Vt;var Hr=Math.ceil(Math.sqrt(Vt.x*Vt.x+Vt.y*Vt.y));return{x:Hr,y:Hr}}}}(OpenSeadragon),function(Kt){Kt.Viewport=function(Vt){var Hr=arguments;Hr.length&&Hr[0]instanceof Kt.Point&&(Vt={containerSize:Hr[0],contentSize:Hr[1],config:Hr[2]}),Vt.config&&(Kt.extend(!0,Vt,Vt.config),delete Vt.config),this._margins=Kt.extend({left:0,top:0,right:0,bottom:0},Vt.margins||{}),delete Vt.margins,Kt.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:Kt.DEFAULT_SETTINGS.springStiffness,animationTime:Kt.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:Kt.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:Kt.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:Kt.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:Kt.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:Kt.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:Kt.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:Kt.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:Kt.DEFAULT_SETTINGS.maxZoomLevel,degrees:Kt.DEFAULT_SETTINGS.degrees,flipped:Kt.DEFAULT_SETTINGS.flipped,homeFillsViewer:Kt.DEFAULT_SETTINGS.homeFillsViewer},Vt),this._updateContainerInnerSize(),this.centerSpringX=new Kt.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new Kt.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new Kt.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new Kt.Rect(0,0,1,1),1),this.goHome(!0),this.update()},Kt.Viewport.prototype={resetContentSize:function(Vt){return Kt.console.assert(Vt,"[Viewport.resetContentSize] contentSize is required"),Kt.console.assert(Vt instanceof Kt.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),Kt.console.assert(Vt.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),Kt.console.assert(Vt.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new Kt.Rect(0,0,1,Vt.y/Vt.x),Vt.x),this},setHomeBounds:function(Vt,Hr){Kt.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(Vt,Hr)},_setContentBounds:function(Vt,Hr){Kt.console.assert(Vt,"[Viewport._setContentBounds] bounds is required"),Kt.console.assert(Vt instanceof Kt.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),Kt.console.assert(Vt.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),Kt.console.assert(Vt.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=Vt.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(Hr),this._contentBounds=Vt.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(Hr),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:Hr,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var Vt=this._contentAspectRatio/this.getAspectRatio(),Hr;return this.homeFillsViewer?Hr=Vt>=1?Vt:1:Hr=Vt>=1?1:Vt,Hr/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var Vt=this._contentBounds.getCenter(),Hr=1/this.getHomeZoom(),Wr=Hr/this.getAspectRatio();return new Kt.Rect(Vt.x-Hr/2,Vt.y-Wr/2,Hr,Wr)},goHome:function(Vt){return this.viewer&&this.viewer.raiseEvent("home",{immediately:Vt}),this.fitBounds(this.getHomeBounds(),Vt)},getMinZoom:function(){var Vt=this.getHomeZoom(),Hr=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*Vt;return Hr},getMaxZoom:function(){var Vt=this.maxZoomLevel;return Vt||(Vt=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,Vt/=this._contentBounds.width),Math.max(Vt,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new Kt.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return Kt.extend({},this._margins)},setMargins:function(Vt){Kt.console.assert(Kt.type(Vt)==="object","[Viewport.setMargins] margins must be an object"),this._margins=Kt.extend({left:0,top:0,right:0,bottom:0},Vt),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(Vt){return this.getBoundsNoRotate(Vt).rotate(-this.getRotation())},getBoundsNoRotate:function(Vt){var Hr=this.getCenter(Vt),Wr=1/this.getZoom(Vt),Yr=Wr/this.getAspectRatio();return new Kt.Rect(Hr.x-Wr/2,Hr.y-Yr/2,Wr,Yr)},getBoundsWithMargins:function(Vt){return this.getBoundsNoRotateWithMargins(Vt).rotate(-this.getRotation(),this.getCenter(Vt))},getBoundsNoRotateWithMargins:function(Vt){var Hr=this.getBoundsNoRotate(Vt),Wr=this._containerInnerSize.x*this.getZoom(Vt);return Hr.x-=this._margins.left/Wr,Hr.y-=this._margins.top/Wr,Hr.width+=(this._margins.left+this._margins.right)/Wr,Hr.height+=(this._margins.top+this._margins.bottom)/Wr,Hr},getCenter:function(Vt){var Hr=new Kt.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),Wr=new Kt.Point(this.centerSpringX.target.value,this.centerSpringY.target.value),Yr,Zr,en,tn,rn,nn,on,an;return Vt?Hr:this.zoomPoint?(Yr=this.pixelFromPoint(this.zoomPoint,!0),Zr=this.getZoom(),en=1/Zr,tn=en/this.getAspectRatio(),rn=new Kt.Rect(Hr.x-en/2,Hr.y-tn/2,en,tn),nn=this._pixelFromPoint(this.zoomPoint,rn),on=nn.minus(Yr),an=on.divide(this._containerInnerSize.x*Zr),Wr.plus(an)):Wr},getZoom:function(Vt){return Vt?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(Vt){return Math.max(Math.min(Vt,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(Vt){var Hr=new Kt.Rect(Vt.x,Vt.y,Vt.width,Vt.height);if(!this.wrapHorizontal){var Wr=this.visibilityRatio*Hr.width,Yr=Hr.x+Hr.width,Zr=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width,en=this._contentBoundsNoRotate.x-Yr+Wr,tn=Zr-Hr.x-Wr;Wr>this._contentBoundsNoRotate.width?Hr.x+=(en+tn)/2:tn<0?Hr.x+=tn:en>0&&(Hr.x+=en)}if(!this.wrapVertical){var rn=this.visibilityRatio*Hr.height,nn=Hr.y+Hr.height,on=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,an=this._contentBoundsNoRotate.y-nn+rn,$n=on-Hr.y-rn;rn>this._contentBoundsNoRotate.height?Hr.y+=(an+$n)/2:$n<0?Hr.y+=$n:an>0&&(Hr.y+=an)}return Hr},_raiseConstraintsEvent:function(Vt){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:Vt})},applyConstraints:function(Vt){var Hr=this.getZoom(),Wr=this._applyZoomConstraints(Hr);Hr!==Wr&&this.zoomTo(Wr,this.zoomPoint,Vt);var Yr=this.getBoundsNoRotate(),Zr=this._applyBoundaryConstraints(Yr);return this._raiseConstraintsEvent(Vt),(Yr.x!==Zr.x||Yr.y!==Zr.y||Vt)&&this.fitBounds(Zr.rotate(-this.getRotation()),Vt),this},ensureVisible:function(Vt){return this.applyConstraints(Vt)},_fitBounds:function(Vt,Hr){Hr=Hr||{};var Wr=Hr.immediately||!1,Yr=Hr.constraints||!1,Zr=this.getAspectRatio(),en=Vt.getCenter(),tn=new Kt.Rect(Vt.x,Vt.y,Vt.width,Vt.height,Vt.degrees+this.getRotation()).getBoundingBox();tn.getAspectRatio()>=Zr?tn.height=tn.width/Zr:tn.width=tn.height*Zr,tn.x=en.x-tn.width/2,tn.y=en.y-tn.height/2;var rn=1/tn.width;if(Yr){var nn=tn.getAspectRatio(),on=this._applyZoomConstraints(rn);rn!==on&&(rn=on,tn.width=1/rn,tn.x=en.x-tn.width/2,tn.height=tn.width/nn,tn.y=en.y-tn.height/2),tn=this._applyBoundaryConstraints(tn),en=tn.getCenter(),this._raiseConstraintsEvent(Wr)}if(Wr)return this.panTo(en,!0),this.zoomTo(rn,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var an=this.getBounds(),$n=this.getZoom();if($n===0||Math.abs(rn/$n-1)<1e-8)return this.zoomTo(rn,!0),this.panTo(en,Wr);tn=tn.rotate(-this.getRotation());var ln=tn.getTopLeft().times(rn).minus(an.getTopLeft().times($n)).divide(rn-$n);return this.zoomTo(rn,ln,Wr)},fitBounds:function(Vt,Hr){return this._fitBounds(Vt,{immediately:Hr,constraints:!1})},fitBoundsWithConstraints:function(Vt,Hr){return this._fitBounds(Vt,{immediately:Hr,constraints:!0})},fitVertically:function(Vt){var Hr=new Kt.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(Hr,Vt)},fitHorizontally:function(Vt){var Hr=new Kt.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(Hr,Vt)},getConstrainedBounds:function(Vt){var Hr,Wr;return Hr=this.getBounds(Vt),Wr=this._applyBoundaryConstraints(Hr),Wr},panBy:function(Vt,Hr){var Wr=new Kt.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(Wr.plus(Vt),Hr)},panTo:function(Vt,Hr){return Hr?(this.centerSpringX.resetTo(Vt.x),this.centerSpringY.resetTo(Vt.y)):(this.centerSpringX.springTo(Vt.x),this.centerSpringY.springTo(Vt.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:Vt,immediately:Hr}),this},zoomBy:function(Vt,Hr,Wr){return this.zoomTo(this.zoomSpring.target.value*Vt,Hr,Wr)},zoomTo:function(Vt,Hr,Wr){var Yr=this;return this.zoomPoint=Hr instanceof Kt.Point&&!isNaN(Hr.x)&&!isNaN(Hr.y)?Hr:null,Wr?this._adjustCenterSpringsForZoomPoint(function(){Yr.zoomSpring.resetTo(Vt)}):this.zoomSpring.springTo(Vt),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:Vt,refPoint:Hr,immediately:Wr}),this},setRotation:function(Vt){return!this.viewer||!this.viewer.drawer.canRotate()?this:(this.degrees=Kt.positiveModulo(Vt,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:Vt}),this)},getRotation:function(){return this.degrees},resize:function(Vt,Hr){var Wr=this.getBoundsNoRotate(),Yr=Wr,Zr;return this.containerSize.x=Vt.x,this.containerSize.y=Vt.y,this._updateContainerInnerSize(),Hr&&(Zr=Vt.x/this.containerSize.x,Yr.width=Wr.width*Zr,Yr.height=Yr.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:Vt,maintain:Hr}),this.fitBounds(Yr,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new Kt.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var Vt=this;this._adjustCenterSpringsForZoomPoint(function(){Vt.zoomSpring.update()}),this.centerSpringX.update(),this.centerSpringY.update();var Hr=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,Hr},_adjustCenterSpringsForZoomPoint:function(Vt){if(this.zoomPoint){var Hr=this.pixelFromPoint(this.zoomPoint,!0);Vt();var Wr=this.pixelFromPoint(this.zoomPoint,!0),Yr=Wr.minus(Hr),Zr=this.deltaPointsFromPixels(Yr,!0);this.centerSpringX.shiftBy(Zr.x),this.centerSpringY.shiftBy(Zr.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else Vt()},deltaPixelsFromPointsNoRotate:function(Vt,Hr){return Vt.times(this._containerInnerSize.x*this.getZoom(Hr))},deltaPixelsFromPoints:function(Vt,Hr){return this.deltaPixelsFromPointsNoRotate(Vt.rotate(this.getRotation()),Hr)},deltaPointsFromPixelsNoRotate:function(Vt,Hr){return Vt.divide(this._containerInnerSize.x*this.getZoom(Hr))},deltaPointsFromPixels:function(Vt,Hr){return this.deltaPointsFromPixelsNoRotate(Vt,Hr).rotate(-this.getRotation())},pixelFromPointNoRotate:function(Vt,Hr){return this._pixelFromPointNoRotate(Vt,this.getBoundsNoRotate(Hr))},pixelFromPoint:function(Vt,Hr){return this._pixelFromPoint(Vt,this.getBoundsNoRotate(Hr))},_pixelFromPointNoRotate:function(Vt,Hr){return Vt.minus(Hr.getTopLeft()).times(this._containerInnerSize.x/Hr.width).plus(new Kt.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(Vt,Hr){return this._pixelFromPointNoRotate(Vt.rotate(this.getRotation(),this.getCenter(!0)),Hr)},pointFromPixelNoRotate:function(Vt,Hr){var Wr=this.getBoundsNoRotate(Hr);return Vt.minus(new Kt.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/Wr.width).plus(Wr.getTopLeft())},pointFromPixel:function(Vt,Hr){return this.pointFromPixelNoRotate(Vt,Hr).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(Vt,Hr){var Wr=this._contentBoundsNoRotate.width;return new Kt.Point(Vt*this._contentSizeNoRotate.x/Wr,Hr*this._contentSizeNoRotate.x/Wr)},viewportToImageCoordinates:function(Vt,Hr){if(Vt instanceof Kt.Point)return this.viewportToImageCoordinates(Vt.x,Vt.y);if(this.viewer){var Wr=this.viewer.world.getItemCount();if(Wr>1)Kt.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(Wr===1){var Yr=this.viewer.world.getItemAt(0);return Yr.viewportToImageCoordinates(Vt,Hr,!0)}}return this._viewportToImageDelta(Vt-this._contentBoundsNoRotate.x,Hr-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(Vt,Hr){var Wr=this._contentBoundsNoRotate.width;return new Kt.Point(Vt/this._contentSizeNoRotate.x*Wr,Hr/this._contentSizeNoRotate.x*Wr)},imageToViewportCoordinates:function(Vt,Hr){if(Vt instanceof Kt.Point)return this.imageToViewportCoordinates(Vt.x,Vt.y);if(this.viewer){var Wr=this.viewer.world.getItemCount();if(Wr>1)Kt.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(Wr===1){var Yr=this.viewer.world.getItemAt(0);return Yr.imageToViewportCoordinates(Vt,Hr,!0)}}var Zr=this._imageToViewportDelta(Vt,Hr);return Zr.x+=this._contentBoundsNoRotate.x,Zr.y+=this._contentBoundsNoRotate.y,Zr},imageToViewportRectangle:function(Vt,Hr,Wr,Yr){var Zr=Vt;if(Zr instanceof Kt.Rect||(Zr=new Kt.Rect(Vt,Hr,Wr,Yr)),this.viewer){var en=this.viewer.world.getItemCount();if(en>1)Kt.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(en===1){var tn=this.viewer.world.getItemAt(0);return tn.imageToViewportRectangle(Vt,Hr,Wr,Yr,!0)}}var rn=this.imageToViewportCoordinates(Zr.x,Zr.y),nn=this._imageToViewportDelta(Zr.width,Zr.height);return new Kt.Rect(rn.x,rn.y,nn.x,nn.y,Zr.degrees)},viewportToImageRectangle:function(Vt,Hr,Wr,Yr){var Zr=Vt;if(Zr instanceof Kt.Rect||(Zr=new Kt.Rect(Vt,Hr,Wr,Yr)),this.viewer){var en=this.viewer.world.getItemCount();if(en>1)Kt.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(en===1){var tn=this.viewer.world.getItemAt(0);return tn.viewportToImageRectangle(Vt,Hr,Wr,Yr,!0)}}var rn=this.viewportToImageCoordinates(Zr.x,Zr.y),nn=this._viewportToImageDelta(Zr.width,Zr.height);return new Kt.Rect(rn.x,rn.y,nn.x,nn.y,Zr.degrees)},viewerElementToImageCoordinates:function(Vt){var Hr=this.pointFromPixel(Vt,!0);return this.viewportToImageCoordinates(Hr)},imageToViewerElementCoordinates:function(Vt){var Hr=this.imageToViewportCoordinates(Vt);return this.pixelFromPoint(Hr,!0)},windowToImageCoordinates:function(Vt){Kt.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var Hr=Vt.minus(Kt.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(Hr)},imageToWindowCoordinates:function(Vt){Kt.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer.");var Hr=this.imageToViewerElementCoordinates(Vt);return Hr.plus(Kt.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(Vt){return this.pointFromPixel(Vt,!0)},viewportToViewerElementCoordinates:function(Vt){return this.pixelFromPoint(Vt,!0)},viewerElementToViewportRectangle:function(Vt){return Kt.Rect.fromSummits(this.pointFromPixel(Vt.getTopLeft(),!0),this.pointFromPixel(Vt.getTopRight(),!0),this.pointFromPixel(Vt.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(Vt){return Kt.Rect.fromSummits(this.pixelFromPoint(Vt.getTopLeft(),!0),this.pixelFromPoint(Vt.getTopRight(),!0),this.pixelFromPoint(Vt.getBottomLeft(),!0))},windowToViewportCoordinates:function(Vt){Kt.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var Hr=Vt.minus(Kt.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(Hr)},viewportToWindowCoordinates:function(Vt){Kt.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer.");var Hr=this.viewportToViewerElementCoordinates(Vt);return Hr.plus(Kt.getElementPosition(this.viewer.element))},viewportToImageZoom:function(Vt){if(this.viewer){var Hr=this.viewer.world.getItemCount();if(Hr>1)Kt.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(Hr===1){var Wr=this.viewer.world.getItemAt(0);return Wr.viewportToImageZoom(Vt)}}var Yr=this._contentSizeNoRotate.x,Zr=this._containerInnerSize.x,en=this._contentBoundsNoRotate.width,tn=Zr/Yr*en;return Vt*tn},imageToViewportZoom:function(Vt){if(this.viewer){var Hr=this.viewer.world.getItemCount();if(Hr>1)Kt.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(Hr===1){var Wr=this.viewer.world.getItemAt(0);return Wr.imageToViewportZoom(Vt)}}var Yr=this._contentSizeNoRotate.x,Zr=this._containerInnerSize.x,en=this._contentBoundsNoRotate.width,tn=Yr/Zr/en;return Vt*tn},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(Vt){return this.flipped===Vt?this:(this.flipped=Vt,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:Vt}),this)}}}(OpenSeadragon),function(Kt){Kt.TiledImage=function(zn){var Wn=this;Kt.console.assert(zn.tileCache,"[TiledImage] options.tileCache is required"),Kt.console.assert(zn.drawer,"[TiledImage] options.drawer is required"),Kt.console.assert(zn.viewer,"[TiledImage] options.viewer is required"),Kt.console.assert(zn.imageLoader,"[TiledImage] options.imageLoader is required"),Kt.console.assert(zn.source,"[TiledImage] options.source is required"),Kt.console.assert(!zn.clip||zn.clip instanceof Kt.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),Kt.EventSource.call(this),this._tileCache=zn.tileCache,delete zn.tileCache,this._drawer=zn.drawer,delete zn.drawer,this._imageLoader=zn.imageLoader,delete zn.imageLoader,zn.clip instanceof Kt.Rect&&(this._clip=zn.clip.clone()),delete zn.clip;var ei=zn.x||0;delete zn.x;var $i=zn.y||0;delete zn.y,this.normHeight=zn.source.dimensions.y/zn.source.dimensions.x,this.contentAspectX=zn.source.dimensions.x/zn.source.dimensions.y;var Mi=1;zn.width?(Mi=zn.width,delete zn.width,zn.height&&(Kt.console.error("specifying both width and height to a tiledImage is not supported"),delete zn.height)):zn.height&&(Mi=zn.height/this.normHeight,delete zn.height);var Ni=zn.fitBounds;delete zn.fitBounds;var Ts=zn.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete zn.fitBoundsPlacement;var ps=zn.degrees||0;delete zn.degrees,Kt.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:Kt.DEFAULT_SETTINGS.springStiffness,animationTime:Kt.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:Kt.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:Kt.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:Kt.DEFAULT_SETTINGS.wrapVertical,immediateRender:Kt.DEFAULT_SETTINGS.immediateRender,blendTime:Kt.DEFAULT_SETTINGS.blendTime,alwaysBlend:Kt.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:Kt.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:Kt.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:Kt.DEFAULT_SETTINGS.iOSDevice,debugMode:Kt.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:Kt.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:Kt.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:Kt.DEFAULT_SETTINGS.placeholderFillStyle,opacity:Kt.DEFAULT_SETTINGS.opacity,preload:Kt.DEFAULT_SETTINGS.preload,compositeOperation:Kt.DEFAULT_SETTINGS.compositeOperation},zn),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new Kt.Spring({initial:ei,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new Kt.Spring({initial:$i,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new Kt.Spring({initial:Mi,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new Kt.Spring({initial:ps,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),Ni&&this.fitBounds(Ni,Ts,!0),this._drawingHandler=function($s){Wn.viewer.raiseEvent("tile-drawing",Kt.extend({tiledImage:Wn},$s))}},Kt.extend(Kt.TiledImage.prototype,Kt.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(zn){zn!==this._fullyLoaded&&(this._fullyLoaded=zn,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=Kt.now(),this._needsDraw=!0},update:function(){var zn=this._xSpring.update(),Wn=this._ySpring.update(),ei=this._scaleSpring.update(),$i=this._degreesSpring.update();return zn||Wn||ei||$i?(this._updateForScale(),this._needsDraw=!0,!0):!1},draw:function(){this.opacity!==0||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset()},getBounds:function(zn){return this.getBoundsNoRotate(zn).rotate(this.getRotation(zn),this._getRotationPoint(zn))},getBoundsNoRotate:function(zn){return zn?new Kt.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new Kt.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return Kt.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(zn){var Wn=this.getBoundsNoRotate(zn);if(this._clip){var ei=zn?this._worldWidthCurrent:this._worldWidthTarget,$i=ei/this.source.dimensions.x,Mi=this._clip.times($i);Wn=new Kt.Rect(Wn.x+Mi.x,Wn.y+Mi.y,Mi.width,Mi.height)}return Wn.rotate(this.getRotation(zn),this._getRotationPoint(zn))},getContentSize:function(){return new Kt.Point(this.source.dimensions.x,this.source.dimensions.y)},_viewportToImageDelta:function(zn,Wn,ei){var $i=ei?this._scaleSpring.current.value:this._scaleSpring.target.value;return new Kt.Point(zn*(this.source.dimensions.x/$i),Wn*(this.source.dimensions.y*this.contentAspectX/$i))},viewportToImageCoordinates:function(zn,Wn,ei){var $i;return zn instanceof Kt.Point?(ei=Wn,$i=zn):$i=new Kt.Point(zn,Wn),$i=$i.rotate(-this.getRotation(ei),this._getRotationPoint(ei)),ei?this._viewportToImageDelta($i.x-this._xSpring.current.value,$i.y-this._ySpring.current.value):this._viewportToImageDelta($i.x-this._xSpring.target.value,$i.y-this._ySpring.target.value)},_imageToViewportDelta:function(zn,Wn,ei){var $i=ei?this._scaleSpring.current.value:this._scaleSpring.target.value;return new Kt.Point(zn/this.source.dimensions.x*$i,Wn/this.source.dimensions.y/this.contentAspectX*$i)},imageToViewportCoordinates:function(zn,Wn,ei){zn instanceof Kt.Point&&(ei=Wn,Wn=zn.y,zn=zn.x);var $i=this._imageToViewportDelta(zn,Wn);return ei?($i.x+=this._xSpring.current.value,$i.y+=this._ySpring.current.value):($i.x+=this._xSpring.target.value,$i.y+=this._ySpring.target.value),$i.rotate(this.getRotation(ei),this._getRotationPoint(ei))},imageToViewportRectangle:function(zn,Wn,ei,$i,Mi){var Ni=zn;Ni instanceof Kt.Rect?Mi=Wn:Ni=new Kt.Rect(zn,Wn,ei,$i);var Ts=this.imageToViewportCoordinates(Ni.getTopLeft(),Mi),ps=this._imageToViewportDelta(Ni.width,Ni.height,Mi);return new Kt.Rect(Ts.x,Ts.y,ps.x,ps.y,Ni.degrees+this.getRotation(Mi))},viewportToImageRectangle:function(zn,Wn,ei,$i,Mi){var Ni=zn;zn instanceof Kt.Rect?Mi=Wn:Ni=new Kt.Rect(zn,Wn,ei,$i);var Ts=this.viewportToImageCoordinates(Ni.getTopLeft(),Mi),ps=this._viewportToImageDelta(Ni.width,Ni.height,Mi);return new Kt.Rect(Ts.x,Ts.y,ps.x,ps.y,Ni.degrees-this.getRotation(Mi))},viewerElementToImageCoordinates:function(zn){var Wn=this.viewport.pointFromPixel(zn,!0);return this.viewportToImageCoordinates(Wn)},imageToViewerElementCoordinates:function(zn){var Wn=this.imageToViewportCoordinates(zn);return this.viewport.pixelFromPoint(Wn,!0)},windowToImageCoordinates:function(zn){var Wn=zn.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(Wn)},imageToWindowCoordinates:function(zn){var Wn=this.imageToViewerElementCoordinates(zn);return Wn.plus(OpenSeadragon.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(zn){var Wn=this._scaleSpring.current.value;return zn=zn.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new Kt.Rect((zn.x-this._xSpring.current.value)/Wn,(zn.y-this._ySpring.current.value)/Wn,zn.width/Wn,zn.height/Wn,zn.degrees)},viewportToImageZoom:function(zn){var Wn=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return Wn*zn},imageToViewportZoom:function(zn){var Wn=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return zn/Wn},setPosition:function(zn,Wn){var ei=this._xSpring.target.value===zn.x&&this._ySpring.target.value===zn.y;if(Wn){if(ei&&this._xSpring.current.value===zn.x&&this._ySpring.current.value===zn.y)return;this._xSpring.resetTo(zn.x),this._ySpring.resetTo(zn.y),this._needsDraw=!0}else{if(ei)return;this._xSpring.springTo(zn.x),this._ySpring.springTo(zn.y),this._needsDraw=!0}ei||this._raiseBoundsChange()},setWidth:function(zn,Wn){this._setScale(zn,Wn)},setHeight:function(zn,Wn){this._setScale(zn/this.normHeight,Wn)},setCroppingPolygons:function(zn){var Wn=function($i){return $i instanceof Kt.Point||typeof $i.x=="number"&&typeof $i.y=="number"},ei=function($i){return $i.map(function(Mi){try{if(Wn(Mi))return{x:Mi.x,y:Mi.y};throw new Error}catch{throw new Error("A Provided cropping polygon point is not supported")}})};try{if(!Kt.isArray(zn))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=zn.map(function($i){return ei($i)})}catch($i){Kt.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),Kt.console.error($i),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(zn,Wn,ei){Wn=Wn||Kt.Placement.CENTER;var $i=Kt.Placement.properties[Wn],Mi=this.contentAspectX,Ni=0,Ts=0,ps=1,$s=1;if(this._clip&&(Mi=this._clip.getAspectRatio(),ps=this._clip.width/this.source.dimensions.x,$s=this._clip.height/this.source.dimensions.y,zn.getAspectRatio()>Mi?(Ni=this._clip.x/this._clip.height*zn.height,Ts=this._clip.y/this._clip.height*zn.height):(Ni=this._clip.x/this._clip.width*zn.width,Ts=this._clip.y/this._clip.width*zn.width)),zn.getAspectRatio()>Mi){var Ws=zn.height/$s,Hs=0;$i.isHorizontallyCentered?Hs=(zn.width-zn.height*Mi)/2:$i.isRight&&(Hs=zn.width-zn.height*Mi),this.setPosition(new Kt.Point(zn.x-Ni+Hs,zn.y-Ts),ei),this.setHeight(Ws,ei)}else{var js=zn.width/ps,zs=0;$i.isVerticallyCentered?zs=(zn.height-zn.width/Mi)/2:$i.isBottom&&(zs=zn.height-zn.width/Mi),this.setPosition(new Kt.Point(zn.x-Ni,zn.y-Ts+zs),ei),this.setWidth(js,ei)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(zn){Kt.console.assert(!zn||zn instanceof Kt.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),zn instanceof Kt.Rect?this._clip=zn.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getOpacity:function(){return this.opacity},setOpacity:function(zn){zn!==this.opacity&&(this.opacity=zn,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(zn){this._preload=!!zn,this._needsDraw=!0},getRotation:function(zn){return zn?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(zn,Wn){this._degreesSpring.target.value===zn&&this._degreesSpring.isAtTargetValue()||(Wn?this._degreesSpring.resetTo(zn):this._degreesSpring.springTo(zn),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(zn){return this.getBoundsNoRotate(zn).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(zn){zn!==this.compositeOperation&&(this.compositeOperation=zn,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(zn,Wn){var ei=this._scaleSpring.target.value===zn;if(Wn){if(ei&&this._scaleSpring.current.value===zn)return;this._scaleSpring.resetTo(zn),this._updateForScale(),this._needsDraw=!0}else{if(ei)return;this._scaleSpring.springTo(zn),this._updateForScale(),this._needsDraw=!0}ei||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var zn=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),Wn=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,ei=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(Wn/this.minPixelRatio)/Math.log(2))));return ei=Math.max(ei,this.source.minLevel||0),zn=Math.min(zn,ei),{lowestLevel:zn,highestLevel:ei}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;){var zn=this.lastDrawn.pop();zn.beingDrawn=!1}var Wn=this.viewport,ei=this._viewportToTiledImageRectangle(Wn.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var $i=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(ei=ei.intersection($i),ei===null)return}for(var Mi=this._getLevelsInterval(),Ni=Mi.lowestLevel,Ts=Mi.highestLevel,ps=null,$s=!1,Ws=Kt.now(),Hs=Ts;Hs>=Ni;Hs--){var js=!1,zs=Wn.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Hs),!0).x*this._scaleSpring.current.value;if(Hs===Ni||!$s&&zs>=this.minPixelRatio)js=!0,$s=!0;else if(!$s)continue;var Xs=Wn.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Hs),!1).x*this._scaleSpring.current.value,ia=Wn.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,Qs=this.immediateRender?1:ia,Zs=Math.min(1,(zs-.5)/.5),Gs=Qs/Math.abs(Qs-Xs);if(ps=Vt(this,$s,js,Hs,Zs,Gs,ei,Ws,ps),nn(this.coverage,Hs))break}Hn(this,this.lastDrawn),ps&&!ps.context2D?(Yr(this,ps,Ws),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(this._tilesLoading===0)},_getCornerTiles:function(zn,Wn,ei){var $i,Mi;this.wrapHorizontal?($i=Kt.positiveModulo(Wn.x,1),Mi=Kt.positiveModulo(ei.x,1)):($i=Math.max(0,Wn.x),Mi=Math.min(1,ei.x));var Ni,Ts,ps=1/this.source.aspectRatio;this.wrapVertical?(Ni=Kt.positiveModulo(Wn.y,ps),Ts=Kt.positiveModulo(ei.y,ps)):(Ni=Math.max(0,Wn.y),Ts=Math.min(ps,ei.y));var $s=this.source.getTileAtPoint(zn,new Kt.Point($i,Ni)),Ws=this.source.getTileAtPoint(zn,new Kt.Point(Mi,Ts)),Hs=this.source.getNumTiles(zn);return this.wrapHorizontal&&($s.x+=Hs.x*Math.floor(Wn.x),Ws.x+=Hs.x*Math.floor(ei.x)),this.wrapVertical&&($s.y+=Hs.y*Math.floor(Wn.y/ps),Ws.y+=Hs.y*Math.floor(ei.y/ps)),{topLeft:$s,bottomRight:Ws}}});function Vt(zn,Wn,ei,$i,Mi,Ni,Ts,ps,$s){var Ws=Ts.getBoundingBox().getTopLeft(),Hs=Ts.getBoundingBox().getBottomRight();zn.viewer&&zn.viewer.raiseEvent("update-level",{tiledImage:zn,havedrawn:Wn,level:$i,opacity:Mi,visibility:Ni,drawArea:Ts,topleft:Ws,bottomright:Hs,currenttime:ps,best:$s}),$n(zn.coverage,$i),$n(zn.loadingCoverage,$i);for(var js=zn._getCornerTiles($i,Ws,Hs),zs=js.topLeft,Xs=js.bottomRight,ia=zn.source.getNumTiles($i),Qs=zn.viewport.pixelFromPoint(zn.viewport.getCenter()),Zs=zs.x;Zs<=Xs.x;Zs++)for(var Gs=zs.y;Gs<=Xs.y;Gs++){if(!zn.wrapHorizontal&&!zn.wrapVertical){var Hl=zn.source.getTileBounds($i,Zs,Gs);if(Ts.intersection(Hl)===null)continue}$s=Hr(zn,ei,Wn,Zs,Gs,$i,Mi,Ni,Qs,ia,ps,$s)}return $s}function Hr(zn,Wn,ei,$i,Mi,Ni,Ts,ps,$s,Ws,Hs,js){var zs=Wr($i,Mi,Ni,zn,zn.source,zn.tilesMatrix,Hs,Ws,zn._worldWidthCurrent,zn._worldHeightCurrent),Xs=ei;zn.viewer&&zn.viewer.raiseEvent("update-tile",{tiledImage:zn,tile:zs}),an(zn.coverage,Ni,$i,Mi,!1);var ia=zs.loaded||zs.loading||on(zn.loadingCoverage,Ni,$i,Mi);if(an(zn.loadingCoverage,Ni,$i,Mi,ia),!zs.exists||(Wn&&!Xs&&(on(zn.coverage,Ni,$i,Mi)?an(zn.coverage,Ni,$i,Mi,!0):Xs=!0),!Xs))return js;if(tn(zs,zn.source.tileOverlap,zn.viewport,$s,ps,zn),!zs.loaded)if(zs.context2D)en(zn,zs);else{var Qs=zn._tileCache.getImageRecord(zs.cacheKey);if(Qs){var Zs=Qs.getImage();en(zn,zs,Zs)}}if(zs.loaded){var Gs=rn(zn,zs,$i,Mi,Ni,Ts,Hs);Gs&&(zn._needsDraw=!0)}else zs.loading?zn._tilesLoading++:ia||(js=ln(js,zs));return js}function Wr(zn,Wn,ei,$i,Mi,Ni,Ts,ps,$s,Ws){var Hs,js,zs,Xs,ia,Qs,Zs,Gs,Hl;return Ni[ei]||(Ni[ei]={}),Ni[ei][zn]||(Ni[ei][zn]={}),Ni[ei][zn][Wn]||(Hs=(ps.x+zn%ps.x)%ps.x,js=(ps.y+Wn%ps.y)%ps.y,zs=Mi.getTileBounds(ei,Hs,js),Xs=Mi.getTileBounds(ei,Hs,js,!0),ia=Mi.tileExists(ei,Hs,js),Qs=Mi.getTileUrl(ei,Hs,js),$i.loadTilesWithAjax?(Zs=Mi.getTileAjaxHeaders(ei,Hs,js),Kt.isPlainObject($i.ajaxHeaders)&&(Zs=Kt.extend({},$i.ajaxHeaders,Zs))):Zs=null,Gs=Mi.getContext2D?Mi.getContext2D(ei,Hs,js):void 0,zs.x+=(zn-Hs)/ps.x,zs.y+=Ws/$s*((Wn-js)/ps.y),Hl=new Kt.Tile(ei,zn,Wn,zs,ia,Qs,Gs,$i.loadTilesWithAjax,Zs,Xs),Hs===ps.x-1&&(Hl.isRightMost=!0),js===ps.y-1&&(Hl.isBottomMost=!0),Ni[ei][zn][Wn]=Hl),Hl=Ni[ei][zn][Wn],Hl.lastTouchTime=Ts,Hl}function Yr(zn,Wn,ei){Wn.loading=!0,zn._imageLoader.addJob({src:Wn.url,loadWithAjax:Wn.loadWithAjax,ajaxHeaders:Wn.ajaxHeaders,crossOriginPolicy:zn.crossOriginPolicy,ajaxWithCredentials:zn.ajaxWithCredentials,callback:function($i,Mi,Ni){Zr(zn,Wn,ei,$i,Mi,Ni)},abort:function(){Wn.loading=!1}})}function Zr(zn,Wn,ei,$i,Mi,Ni){if(!$i){Kt.console.log("Tile %s failed to load: %s - error: %s",Wn,Wn.url,Mi),zn.viewer.raiseEvent("tile-load-failed",{tile:Wn,tiledImage:zn,time:ei,message:Mi,tileRequest:Ni}),Wn.loading=!1,Wn.exists=!1;return}if(ei<zn.lastResetTime){Kt.console.log("Ignoring tile %s loaded before reset: %s",Wn,Wn.url),Wn.loading=!1;return}var Ts=function(){var ps=zn.source.getClosestLevel();en(zn,Wn,$i,ps,Ni)};zn._midDraw?window.setTimeout(Ts,1):Ts()}function en(zn,Wn,ei,$i,Mi){var Ni=0;function Ts(){return Ni++,ps}function ps(){Ni--,Ni===0&&(Wn.loading=!1,Wn.loaded=!0,Wn.context2D||zn._tileCache.cacheTile({image:ei,tile:Wn,cutoff:$i,tiledImage:zn}),zn._needsDraw=!0)}zn.viewer.raiseEvent("tile-loaded",{tile:Wn,tiledImage:zn,tileRequest:Mi,image:ei,getCompletionCallback:Ts}),Ts()()}function tn(zn,Wn,ei,$i,Mi,Ni){var Ts=zn.bounds.getTopLeft();Ts.x*=Ni._scaleSpring.current.value,Ts.y*=Ni._scaleSpring.current.value,Ts.x+=Ni._xSpring.current.value,Ts.y+=Ni._ySpring.current.value;var ps=zn.bounds.getSize();ps.x*=Ni._scaleSpring.current.value,ps.y*=Ni._scaleSpring.current.value;var $s=ei.pixelFromPointNoRotate(Ts,!0),Ws=ei.pixelFromPointNoRotate(Ts,!1),Hs=ei.deltaPixelsFromPointsNoRotate(ps,!0),js=ei.deltaPixelsFromPointsNoRotate(ps,!1),zs=Ws.plus(js.divide(2)),Xs=$i.squaredDistanceTo(zs);Wn||(Hs=Hs.plus(new Kt.Point(1,1))),zn.isRightMost&&Ni.wrapHorizontal&&(Hs.x+=.75),zn.isBottomMost&&Ni.wrapVertical&&(Hs.y+=.75),zn.position=$s,zn.size=Hs,zn.squaredDistance=Xs,zn.visibility=Mi}function rn(zn,Wn,ei,$i,Mi,Ni,Ts){var ps=1e3*zn.blendTime,$s,Ws;if(Wn.blendStart||(Wn.blendStart=Ts),$s=Ts-Wn.blendStart,Ws=ps?Math.min(1,$s/ps):1,zn.alwaysBlend&&(Ws*=Ni),Wn.opacity=Ws,zn.lastDrawn.push(Wn),Ws===1)an(zn.coverage,Mi,ei,$i,!0),zn._hasOpaqueTile=!0;else if($s<ps)return!0;return!1}function nn(zn,Wn,ei,$i){var Mi,Ni,Ts,ps;if(!zn[Wn])return!1;if(ei===void 0||$i===void 0){Mi=zn[Wn];for(Ts in Mi)if(Object.prototype.hasOwnProperty.call(Mi,Ts)){Ni=Mi[Ts];for(ps in Ni)if(Object.prototype.hasOwnProperty.call(Ni,ps)&&!Ni[ps])return!1}return!0}return zn[Wn][ei]===void 0||zn[Wn][ei][$i]===void 0||zn[Wn][ei][$i]===!0}function on(zn,Wn,ei,$i){return ei===void 0||$i===void 0?nn(zn,Wn+1):nn(zn,Wn+1,2*ei,2*$i)&&nn(zn,Wn+1,2*ei,2*$i+1)&&nn(zn,Wn+1,2*ei+1,2*$i)&&nn(zn,Wn+1,2*ei+1,2*$i+1)}function an(zn,Wn,ei,$i,Mi){if(!zn[Wn]){Kt.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",Wn);return}zn[Wn][ei]||(zn[Wn][ei]={}),zn[Wn][ei][$i]=Mi}function $n(zn,Wn){zn[Wn]={}}function ln(zn,Wn){return!zn||Wn.visibility>zn.visibility||Wn.visibility==zn.visibility&&Wn.squaredDistance<zn.squaredDistance?Wn:zn}function Hn(zn,Wn){if(!(zn.opacity===0||Wn.length===0&&!zn.placeholderFillStyle)){var ei=Wn[0],$i;ei&&($i=zn.opacity<1||zn.compositeOperation&&zn.compositeOperation!=="source-over"||!zn._isBottomItem()&&ei._hasTransparencyChannel());var Mi,Ni,Ts=zn.viewport.getZoom(!0),ps=zn.viewportToImageZoom(Ts);Wn.length>1&&ps>zn.smoothTileEdgesMinZoom&&!zn.iOSDevice&&zn.getRotation(!0)%360===0&&Kt.supportsCanvas&&($i=!0,Mi=ei.getScaleForEdgeSmoothing(),Ni=ei.getTranslationForEdgeSmoothing(Mi,zn._drawer.getCanvasSize(!1),zn._drawer.getCanvasSize(!0)));var $s;$i&&(Mi||($s=zn.viewport.viewportToViewerElementRectangle(zn.getClippedBounds(!0)).getIntegerBoundingBox(),zn._drawer.viewer.viewport.getFlip()&&(zn.viewport.degrees!==0||zn.getRotation(!0)%360!==0)&&($s.x=zn._drawer.viewer.container.clientWidth-($s.x+$s.width)),$s=$s.times(Kt.pixelDensityRatio)),zn._drawer._clear(!0,$s)),Mi||(zn.viewport.degrees!==0&&zn._drawer._offsetForRotation({degrees:zn.viewport.degrees,useSketch:$i}),zn.getRotation(!0)%360!==0&&zn._drawer._offsetForRotation({degrees:zn.getRotation(!0),point:zn.viewport.pixelFromPointNoRotate(zn._getRotationPoint(!0),!0),useSketch:$i}),zn.viewport.degrees===0&&zn.getRotation(!0)%360===0&&zn._drawer.viewer.viewport.getFlip()&&zn._drawer._flip());var Ws=!1;if(zn._clip){zn._drawer.saveContext($i);var Hs=zn.imageToViewportRectangle(zn._clip,!0);Hs=Hs.rotate(-zn.getRotation(!0),zn._getRotationPoint(!0));var js=zn._drawer.viewportToDrawerRectangle(Hs);Mi&&(js=js.times(Mi)),Ni&&(js=js.translate(Ni)),zn._drawer.setClip(js,$i),Ws=!0}if(zn._croppingPolygons){zn._drawer.saveContext($i);try{var zs=zn._croppingPolygons.map(function(Zs){return Zs.map(function(Gs){var Hl=zn.imageToViewportCoordinates(Gs.x,Gs.y,!0).rotate(-zn.getRotation(!0),zn._getRotationPoint(!0)),Js=zn._drawer.viewportCoordToDrawerCoord(Hl);return Mi&&(Js=Js.times(Mi)),Js})});zn._drawer.clipWithPolygons(zs,$i)}catch(Zs){Kt.console.error(Zs)}Ws=!0}if(zn.placeholderFillStyle&&zn._hasOpaqueTile===!1){var Xs=zn._drawer.viewportToDrawerRectangle(zn.getBounds(!0));Mi&&(Xs=Xs.times(Mi)),Ni&&(Xs=Xs.translate(Ni));var ia=null;typeof zn.placeholderFillStyle=="function"?ia=zn.placeholderFillStyle(zn,zn._drawer.context):ia=zn.placeholderFillStyle,zn._drawer.drawRectangle(Xs,ia,$i)}for(var Qs=Wn.length-1;Qs>=0;Qs--)ei=Wn[Qs],zn._drawer.drawTile(ei,zn._drawingHandler,$i,Mi,Ni),ei.beingDrawn=!0,zn.viewer&&zn.viewer.raiseEvent("tile-drawn",{tiledImage:zn,tile:ei});Ws&&zn._drawer.restoreContext($i),Mi||(zn.getRotation(!0)%360!==0&&zn._drawer._restoreRotationChanges($i),zn.viewport.degrees!==0&&zn._drawer._restoreRotationChanges($i)),$i&&(Mi&&(zn.viewport.degrees!==0&&zn._drawer._offsetForRotation({degrees:zn.viewport.degrees,useSketch:!1}),zn.getRotation(!0)%360!==0&&zn._drawer._offsetForRotation({degrees:zn.getRotation(!0),point:zn.viewport.pixelFromPointNoRotate(zn._getRotationPoint(!0),!0),useSketch:!1})),zn._drawer.blendSketch({opacity:zn.opacity,scale:Mi,translate:Ni,compositeOperation:zn.compositeOperation,bounds:$s}),Mi&&(zn.getRotation(!0)%360!==0&&zn._drawer._restoreRotationChanges(!1),zn.viewport.degrees!==0&&zn._drawer._restoreRotationChanges(!1))),Mi||zn.viewport.degrees===0&&zn.getRotation(!0)%360===0&&zn._drawer.viewer.viewport.getFlip()&&zn._drawer._flip(),jn(zn,Wn)}}function jn(zn,Wn){if(zn.debugMode)for(var ei=Wn.length-1;ei>=0;ei--){var $i=Wn[ei];try{zn._drawer.drawDebugInfo($i,Wn.length,ei,zn)}catch(Mi){Kt.console.error(Mi)}}}}(OpenSeadragon),function(Kt){var Vt=function(Wr){Kt.console.assert(Wr,"[TileCache.cacheTile] options is required"),Kt.console.assert(Wr.tile,"[TileCache.cacheTile] options.tile is required"),Kt.console.assert(Wr.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=Wr.tile,this.tiledImage=Wr.tiledImage},Hr=function(Wr){Kt.console.assert(Wr,"[ImageRecord] options is required"),Kt.console.assert(Wr.image,"[ImageRecord] options.image is required"),this._image=Wr.image,this._tiles=[]};Hr.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var Wr=document.createElement("canvas");Wr.width=this._image.width,Wr.height=this._image.height,this._renderedContext=Wr.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(Wr){Kt.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=Wr},addTile:function(Wr){Kt.console.assert(Wr,"[ImageRecord.addTile] tile is required"),this._tiles.push(Wr)},removeTile:function(Wr){for(var Yr=0;Yr<this._tiles.length;Yr++)if(this._tiles[Yr]===Wr){this._tiles.splice(Yr,1);return}Kt.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",Wr)},getTileCount:function(){return this._tiles.length}},Kt.TileCache=function(Wr){Wr=Wr||{},this._maxImageCacheCount=Wr.maxImageCacheCount||Kt.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},Kt.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(Wr){Kt.console.assert(Wr,"[TileCache.cacheTile] options is required"),Kt.console.assert(Wr.tile,"[TileCache.cacheTile] options.tile is required"),Kt.console.assert(Wr.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),Kt.console.assert(Wr.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var Yr=Wr.cutoff||0,Zr=this._tilesLoaded.length,en=this._imagesLoaded[Wr.tile.cacheKey];if(en||(Kt.console.assert(Wr.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),en=this._imagesLoaded[Wr.tile.cacheKey]=new Hr({image:Wr.image}),this._imagesLoadedCount++),en.addTile(Wr.tile),Wr.tile.cacheImageRecord=en,this._imagesLoadedCount>this._maxImageCacheCount){for(var tn=null,rn=-1,nn=null,on,an,$n,ln,Hn,jn,zn=this._tilesLoaded.length-1;zn>=0;zn--)if(jn=this._tilesLoaded[zn],on=jn.tile,!(on.level<=Yr||on.beingDrawn)){if(!tn){tn=on,rn=zn,nn=jn;continue}ln=on.lastTouchTime,an=tn.lastTouchTime,Hn=on.level,$n=tn.level,(ln<an||ln==an&&Hn>$n)&&(tn=on,rn=zn,nn=jn)}tn&&rn>=0&&(this._unloadTile(nn),Zr=rn)}this._tilesLoaded[Zr]=new Vt({tile:Wr.tile,tiledImage:Wr.tiledImage})},clearTilesFor:function(Wr){Kt.console.assert(Wr,"[TileCache.clearTilesFor] tiledImage is required");for(var Yr,Zr=0;Zr<this._tilesLoaded.length;++Zr)Yr=this._tilesLoaded[Zr],Yr.tiledImage===Wr&&(this._unloadTile(Yr),this._tilesLoaded.splice(Zr,1),Zr--)},getImageRecord:function(Wr){return Kt.console.assert(Wr,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[Wr]},_unloadTile:function(Wr){Kt.console.assert(Wr,"[TileCache._unloadTile] tileRecord is required");var Yr=Wr.tile,Zr=Wr.tiledImage;Yr.unload(),Yr.cacheImageRecord=null;var en=this._imagesLoaded[Yr.cacheKey];en.removeTile(Yr),en.getTileCount()||(en.destroy(),delete this._imagesLoaded[Yr.cacheKey],this._imagesLoadedCount--),Zr.viewer.raiseEvent("tile-unloaded",{tile:Yr,tiledImage:Zr})}}}(OpenSeadragon),function(Kt){Kt.World=function(Vt){var Hr=this;Kt.console.assert(Vt.viewer,"[World] options.viewer is required"),Kt.EventSource.call(this),this.viewer=Vt.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(Wr){Hr._autoRefigureSizes?Hr._figureSizes():Hr._needsSizesFigured=!0},this._figureSizes()},Kt.extend(Kt.World.prototype,Kt.EventSource.prototype,{addItem:function(Vt,Hr){if(Kt.console.assert(Vt,"[World.addItem] item is required"),Kt.console.assert(Vt instanceof Kt.TiledImage,"[World.addItem] only TiledImages supported at this time"),Hr=Hr||{},Hr.index!==void 0){var Wr=Math.max(0,Math.min(this._items.length,Hr.index));this._items.splice(Wr,0,Vt)}else this._items.push(Vt);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,Vt.addHandler("bounds-change",this._delegatedFigureSizes),Vt.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:Vt})},getItemAt:function(Vt){return Kt.console.assert(Vt!==void 0,"[World.getItemAt] index is required"),this._items[Vt]},getIndexOfItem:function(Vt){return Kt.console.assert(Vt,"[World.getIndexOfItem] item is required"),Kt.indexOf(this._items,Vt)},getItemCount:function(){return this._items.length},setItemIndex:function(Vt,Hr){Kt.console.assert(Vt,"[World.setItemIndex] item is required"),Kt.console.assert(Hr!==void 0,"[World.setItemIndex] index is required");var Wr=this.getIndexOfItem(Vt);if(Hr>=this._items.length)throw new Error("Index bigger than number of layers.");Hr===Wr||Wr===-1||(this._items.splice(Wr,1),this._items.splice(Hr,0,Vt),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:Vt,previousIndex:Wr,newIndex:Hr}))},removeItem:function(Vt){Kt.console.assert(Vt,"[World.removeItem] item is required");var Hr=Kt.indexOf(this._items,Vt);Hr!==-1&&(Vt.removeHandler("bounds-change",this._delegatedFigureSizes),Vt.removeHandler("clip-change",this._delegatedFigureSizes),Vt.destroy(),this._items.splice(Hr,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(Vt))},removeAll:function(){this.viewer._cancelPendingImages();var Vt,Hr;for(Hr=0;Hr<this._items.length;Hr++)Vt=this._items[Hr],Vt.removeHandler("bounds-change",this._delegatedFigureSizes),Vt.removeHandler("clip-change",this._delegatedFigureSizes),Vt.destroy();var Wr=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,Hr=0;Hr<Wr.length;Hr++)Vt=Wr[Hr],this._raiseRemoveItem(Vt)},resetItems:function(){for(var Vt=0;Vt<this._items.length;Vt++)this._items[Vt].reset()},update:function(){for(var Vt=!1,Hr=0;Hr<this._items.length;Hr++)Vt=this._items[Hr].update()||Vt;return Vt},draw:function(){for(var Vt=0;Vt<this._items.length;Vt++)this._items[Vt].draw();this._needsDraw=!1},needsDraw:function(){for(var Vt=0;Vt<this._items.length;Vt++)if(this._items[Vt].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(Vt){this._autoRefigureSizes=Vt,Vt&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(Vt){Vt=Vt||{};var Hr=Vt.immediately||!1,Wr=Vt.layout||Kt.DEFAULT_SETTINGS.collectionLayout,Yr=Vt.rows||Kt.DEFAULT_SETTINGS.collectionRows,Zr=Vt.columns||Kt.DEFAULT_SETTINGS.collectionColumns,en=Vt.tileSize||Kt.DEFAULT_SETTINGS.collectionTileSize,tn=Vt.tileMargin||Kt.DEFAULT_SETTINGS.collectionTileMargin,rn=en+tn,nn;!Vt.rows&&Zr?nn=Zr:nn=Math.ceil(this._items.length/Yr);var on=0,an=0,$n,ln,Hn,jn,zn;this.setAutoRefigureSizes(!1);for(var Wn=0;Wn<this._items.length;Wn++)Wn&&Wn%nn===0&&(Wr==="horizontal"?(an+=rn,on=0):(on+=rn,an=0)),$n=this._items[Wn],ln=$n.getBounds(),ln.width>ln.height?Hn=en:Hn=en*(ln.width/ln.height),jn=Hn*(ln.height/ln.width),zn=new Kt.Point(on+(en-Hn)/2,an+(en-jn)/2),$n.setPosition(zn,Hr),$n.setWidth(Hn,Hr),Wr==="horizontal"?on+=rn:an+=rn;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var Vt=this._homeBounds?this._homeBounds.clone():null,Hr=this._contentSize?this._contentSize.clone():null,Wr=this._contentFactor||0;if(!this._items.length)this._homeBounds=new Kt.Rect(0,0,1,1),this._contentSize=new Kt.Point(1,1),this._contentFactor=1;else{var Yr=this._items[0],Zr=Yr.getBounds();this._contentFactor=Yr.getContentSize().x/Zr.width;for(var en=Yr.getClippedBounds().getBoundingBox(),tn=en.x,rn=en.y,nn=en.x+en.width,on=en.y+en.height,an=1;an<this._items.length;an++)Yr=this._items[an],Zr=Yr.getBounds(),this._contentFactor=Math.max(this._contentFactor,Yr.getContentSize().x/Zr.width),en=Yr.getClippedBounds().getBoundingBox(),tn=Math.min(tn,en.x),rn=Math.min(rn,en.y),nn=Math.max(nn,en.x+en.width),on=Math.max(on,en.y+en.height);this._homeBounds=new Kt.Rect(tn,rn,nn-tn,on-rn),this._contentSize=new Kt.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}(this._contentFactor!==Wr||!this._homeBounds.equals(Vt)||!this._contentSize.equals(Hr))&&this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(Vt){this.raiseEvent("remove-item",{item:Vt})}})}(OpenSeadragon)})(e$4);const v$1="Switch",[M$4,V$3]=P$n(v$1),[z$1,A]=M$4(v$1),N$2=reactExports.forwardRef((Kt,Vt)=>{const{__scopeSwitch:Hr,name:Wr,checked:Yr,defaultChecked:Zr,required:en,disabled:tn,value:rn="on",onCheckedChange:nn,...on}=Kt,[an,$n]=reactExports.useState(null),ln=d$I(Vt,ei=>$n(ei)),Hn=reactExports.useRef(!1),jn=an?!!an.closest("form"):!0,[zn=!1,Wn]=g$F({prop:Yr,defaultProp:Zr,onChange:nn});return reactExports.createElement(z$1,{scope:Hr,checked:zn,disabled:tn},reactExports.createElement(E$l.button,e$1x({type:"button",role:"switch","aria-checked":zn,"aria-required":en,"data-state":w$3(zn),"data-disabled":tn?"":void 0,disabled:tn,value:rn},on,{ref:ln,onClick:o$1f(Kt.onClick,ei=>{Wn($i=>!$i),jn&&(Hn.current=ei.isPropagationStopped(),Hn.current||ei.stopPropagation())})})),jn&&reactExports.createElement(D$4,{control:an,bubbles:!Hn.current,name:Wr,value:rn,checked:zn,required:en,disabled:tn,style:{transform:"translateX(-100%)"}}))}),O$4="SwitchThumb",j$4=reactExports.forwardRef((Kt,Vt)=>{const{__scopeSwitch:Hr,...Wr}=Kt,Yr=A(O$4,Hr);return reactExports.createElement(E$l.span,e$1x({"data-state":w$3(Yr.checked),"data-disabled":Yr.disabled?"":void 0},Wr,{ref:Vt}))}),D$4=Kt=>{const{control:Vt,checked:Hr,bubbles:Wr=!0,...Yr}=Kt,Zr=reactExports.useRef(null),en=c$I(Hr),tn=z$d(Vt);return reactExports.useEffect(()=>{const rn=Zr.current,nn=window.HTMLInputElement.prototype,on=Object.getOwnPropertyDescriptor(nn,"checked").set;if(en!==Hr&&on){const an=new Event("click",{bubbles:Wr});on.call(rn,Hr),rn.dispatchEvent(an)}},[en,Hr,Wr]),reactExports.createElement("input",e$1x({type:"checkbox","aria-hidden":!0,defaultChecked:Hr},Yr,{tabIndex:-1,ref:Zr,style:{...Kt.style,...tn,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function w$3(Kt){return Kt?"checked":"unchecked"}const Y$3=N$2,Z$1=j$4;typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const i$2=[];for(let Kt=0;Kt<256;++Kt)i$2.push((Kt+256).toString(16).slice(1));const q$1={background:"transparent",canvasBackgroundColor:"#6662",canvasHeight:"61.8vh",ignoreCaptionLabels:[],informationPanel:{open:!0,renderAbout:!0,renderSupplementing:!0,renderToggle:!0},openSeadragon:{},requestHeaders:{"Content-Type":"application/json"},showIIIFBadge:!0,showTitle:!0,withCredentials:!1};var ae$1;const W$2={activeCanvas:"",activeManifest:"",collection:{},configOptions:q$1,customDisplays:[],informationOpen:(ae$1=q$1==null?void 0:q$1.informationPanel)==null?void 0:ae$1.open,isLoaded:!1,vault:new Fe$1};React.createContext(W$2);React.createContext(W$2);const _$1=209,Pt={colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:`hsl(${_$1} 100% 38.2%)`,accentMuted:`hsl(${_$1} 80% 61.8%)`,accentAlt:`hsl(${_$1} 80% 30%)`,secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},J$1={xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"},{styled:d$5,css:$r,keyframes:K$1,createTheme:Cr}=ve$1({theme:Pt,media:J$1});d$5("div",{display:"flex",flexDirection:"column",alignItems:"center"});d$5("p",{fontWeight:"bold",fontSize:"x-large"});d$5("span",{fontSize:"medium"});const $e=d$5("div",{position:"relative",zIndex:"0"}),Ce=d$5("div",{display:"flex",flexDirection:"row",overflow:"hidden","@sm":{flexDirection:"column"}}),ke=d$5("div",{display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"1",width:"61.8%","@sm":{width:"100%"}}),Se=d$5(ae$a,{display:"none",border:"none",padding:"0",transition:"$all",opacity:"1",background:"#6663",margin:"1rem 0",borderRadius:"6px","&[data-information-panel='false']":{opacity:"0",marginTop:"-59px"},"@sm":{display:"flex","> span":{display:"flex",flexGrow:"1",fontSize:"0.8333em",justifyContent:"center",padding:"0.5rem",fontFamily:"inherit"}}}),Ie=d$5(se$b,{width:"100%",display:"flex"});d$5("aside",{display:"flex",flexGrow:"1",flexShrink:"0",width:"38.2%",maxHeight:"100%","@sm":{width:"100%"}});d$5("div",{display:"flex",flexDirection:"column",fontSmooth:"auto",webkitFontSmoothing:"antialiased","> div":{display:"flex",flexDirection:"column",flexGrow:"1",justifyContent:"flex-start","@sm":{[`& ${Ce}`]:{flexGrow:"1"},[`& ${ke}`]:{flexGrow:"0"}}},"@sm":{padding:"0"},"&[data-information-panel-open='true']":{"@sm":{position:"fixed",height:"100%",width:"100%",top:"0",left:"0",zIndex:"2500000000",[`& ${$e}`]:{display:"none"},[`& ${Se}`]:{margin:"1rem"},[`& ${Ie}`]:{height:"100%"}}}});d$5(Z$3,{display:"flex",flexDirection:"column",width:"100%",height:"100%",flexGrow:"1",flexShrink:"0",position:"relative",zIndex:"1",maskImage:"linear-gradient(180deg, rgba(0, 0, 0, 1) calc(100% - 2rem), transparent 100%)","@sm":{marginTop:"0.5rem",boxShadow:"none"}});d$5(ee$3,{display:"flex",flexGrow:"0",margin:"0 1.618rem",borderBottom:"4px solid #6663","@sm":{margin:"0 1rem"}});d$5(te$2,{display:"flex",position:"relative",padding:"0.5rem 1rem",background:"none",backgroundColor:"transparent",fontFamily:"inherit",border:"none",opacity:"0.7",fontSize:"1rem",marginRight:"1rem",lineHeight:"1rem",whiteSpace:"nowrap",cursor:"pointer",fontWeight:400,transition:"$all","&::after":{width:"0",height:"4px",content:"",position:"absolute",bottom:"-4px",left:"0",transition:"$all"},"&[data-state='active']":{opacity:"1",fontWeight:700,"&::after":{width:"100%",backgroundColor:"$accent"}}});d$5(oe$3,{display:"flex",flexGrow:"1",flexShrink:"0",position:"absolute",top:"0",left:"0","&[data-state='active']":{width:"100%",height:"calc(100% - 2rem)",padding:"1.618rem 0"}});d$5("div",{position:"relative",height:"100%",width:"100%",overflowY:"scroll"});d$5("div",{padding:" 0 1.618rem 2rem",display:"flex",flexDirection:"column",overflow:"scroll",position:"absolute",fontWeight:"400",fontSize:"1rem",zIndex:"0",img:{maxWidth:"100px",maxHeight:"100px",objectFit:"contain",color:"transparent",margin:"0 0 1rem",borderRadius:"3px",backgroundColor:"$secondaryMuted"},video:{display:"none"},"a, a:visited":{color:"$accent"},p:{fontSize:"1rem",lineHeight:"1.45em",margin:"0"},dl:{margin:"0",dt:{fontWeight:"700",margin:"1rem 0 0.25rem"},dd:{margin:"0"}},".manifest-property-title":{fontWeight:"700",margin:"1rem 0 0.25rem"},"ul, ol":{padding:"0",margin:"0",li:{fontSize:"1rem",lineHeight:"1.45em",listStyle:"none",margin:"0.25rem 0 0.25rem"}}});d$5("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"});d$5("span",{});d$5("img",{objectFit:"cover"});d$5("a",{});reactExports.createContext(void 0);d$5("span",{});d$5("span",{});d$5("dl",{});d$5("li",{});d$5("ul",{});d$5("dl",{});d$5("li",{});d$5("ul",{});const se=K$1({from:{transform:"rotate(360deg)"},to:{transform:"rotate(0deg)"}});d$5(ue$1,{display:"flex",flexDirection:"column",width:"100%"});const Re=d$5(fe$1,{position:"relative",cursor:"pointer",display:"flex",width:"100%",justifyContent:"space-between",textAlign:"left",margin:"0",padding:"0.5rem 1.618rem",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",color:"inherit",border:"none",background:"none","@sm":{padding:"0.5rem 1rem",fontSize:"0.8333rem"},"&::before":{content:"",width:"12px",height:"12px",borderRadius:"12px",position:"absolute",backgroundColor:"$primaryMuted",opacity:"0",left:"8px",marginTop:"3px",boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",opacity:"0",clipPath:"polygon(100% 50%, 0 100%, 0 0)",left:"13px",marginTop:"6px",boxSizing:"content-box","@sm":{content:"unset"}},strong:{marginLeft:"1rem"},"&:hover":{color:"$accent","&::before":{backgroundColor:"$accent",opacity:"1"},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",clipPath:"polygon(100% 50%, 0 100%, 0 0)",opacity:"1"}},"&[aria-checked='true']":{backgroundColor:"#6663","&::before":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accentMuted",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1s linear infinite",animationName:se,boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accent",clipPath:"polygon(100% 0, 100% 100%, 0 0)",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1.5s linear infinite",animationName:se,boxSizing:"content-box","@sm":{content:"unset"}}}});d$5("ul",{listStyle:"none",paddingLeft:"1rem",position:"relative","&&:first-child":{paddingLeft:"0"},"& li ul":{[`& ${Re}`]:{backgroundColor:"unset","&::before":{content:"none"},"&::after":{content:"none"}}},"&:first-child":{margin:"0 0 1.618rem"}});const Oe=d$5("div",{position:"absolute",right:"1rem",top:"1rem",display:"flex",justifyContent:"flex-end",zIndex:"1"});d$5("input",{flexGrow:"1",border:"none",backgroundColor:"$secondaryMuted",color:"$primary",marginRight:"1rem",height:"2rem",padding:"0 1rem",borderRadius:"2rem",fontFamily:"inherit",fontSize:"1rem",lineHeight:"1rem",boxShadow:"inset 1px 1px 2px #0003","&::placeholder":{color:"$primaryMuted"}});d$5("button",{display:"flex",background:"none",border:"none",width:"2rem !important",height:"2rem !important",padding:"0",margin:"0",fontWeight:"700",borderRadius:"2rem",backgroundColor:"$accent",color:"$secondary",cursor:"pointer",boxSizing:"content-box !important",transition:"$all",svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",opacity:"1",filter:"drop-shadow(5px 5px 5px #000D)",boxSizing:"inherit",transition:"$all"},"&:disabled":{backgroundColor:"transparent",boxShadow:"none",svg:{opacity:"0.25"}}});d$5("div",{display:"flex",marginRight:"0.618rem",backgroundColor:"$accentAlt",borderRadius:"2rem",boxShadow:"5px 5px 5px #0003",color:"$secondary",alignItems:"center","> span":{display:"flex",margin:"0 0.5rem",fontSize:"0.7222rem"}});d$5("div",{display:"flex",position:"relative",zIndex:"1",width:"100%",padding:"0",transition:"$all",variants:{isToggle:{true:{paddingTop:"2.618rem",[`& ${Oe}`]:{width:"calc(100% - 2rem)","@sm":{width:"calc(100% - 2rem)"}}}}}});d$5(ue$1,{display:"flex",flexDirection:"row",flexGrow:"1",padding:"1.618rem",overflowX:"scroll",position:"relative",zIndex:"0"});const Nn=()=>React.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 112v288M400 256H112"}),Gn=()=>React.createElement(React.Fragment,null,React.createElement("path",{d:"M232 416a23.88 23.88 0 01-14.2-4.68 8.27 8.27 0 01-.66-.51L125.76 336H56a24 24 0 01-24-24V200a24 24 0 0124-24h69.75l91.37-74.81a8.27 8.27 0 01.66-.51A24 24 0 01256 120v272a24 24 0 01-24 24zm-106.18-80zm-.27-159.86zM320 336a16 16 0 01-14.29-23.19c9.49-18.87 14.3-38 14.3-56.81 0-19.38-4.66-37.94-14.25-56.73a16 16 0 0128.5-14.54C346.19 208.12 352 231.44 352 256c0 23.86-6 47.81-17.7 71.19A16 16 0 01320 336z"}),React.createElement("path",{d:"M368 384a16 16 0 01-13.86-24C373.05 327.09 384 299.51 384 256c0-44.17-10.93-71.56-29.82-103.94a16 16 0 0127.64-16.12C402.92 172.11 416 204.81 416 256c0 50.43-13.06 83.29-34.13 120a16 16 0 01-13.87 8z"}),React.createElement("path",{d:"M416 432a16 16 0 01-13.39-24.74C429.85 365.47 448 323.76 448 256c0-66.5-18.18-108.62-45.49-151.39a16 16 0 1127-17.22C459.81 134.89 480 181.74 480 256c0 64.75-14.66 113.63-50.6 168.74A16 16 0 01416 432z"})),qn=()=>React.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}),_n=()=>React.createElement("path",{d:"M416 64H96a64.07 64.07 0 00-64 64v256a64.07 64.07 0 0064 64h320a64.07 64.07 0 0064-64V128a64.07 64.07 0 00-64-64zm-80 64a48 48 0 11-48 48 48.05 48.05 0 0148-48zM96 416a32 32 0 01-32-32v-67.63l94.84-84.3a48.06 48.06 0 0165.8 1.9l64.95 64.81L172.37 416zm352-32a32 32 0 01-32 32H217.63l121.42-121.42a47.72 47.72 0 0161.64-.16L448 333.84z"}),Zn=()=>React.createElement("path",{d:"M464 384.39a32 32 0 01-13-2.77 15.77 15.77 0 01-2.71-1.54l-82.71-58.22A32 32 0 01352 295.7v-79.4a32 32 0 0113.58-26.16l82.71-58.22a15.77 15.77 0 012.71-1.54 32 32 0 0145 29.24v192.76a32 32 0 01-32 32zM268 400H84a68.07 68.07 0 01-68-68V180a68.07 68.07 0 0168-68h184.48A67.6 67.6 0 01336 179.52V332a68.07 68.07 0 01-68 68z"}),He=d$5("svg",{display:"inline-flex",variants:{isLarge:{true:{height:"4rem",width:"4rem"}},isMedium:{true:{height:"2rem",width:"2rem"}},isSmall:{true:{height:"1rem",width:"1rem"}}}}),Un=({children:Kt})=>React.createElement("title",null,Kt),k$3=Kt=>React.createElement(He,{...Kt,"data-testid":"icon-svg",role:"img",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},Kt.children);k$3.Title=Un;k$3.Add=Nn;k$3.Audio=Gn;k$3.Close=qn;k$3.Image=_n;k$3.Video=Zn;const Xn=K$1({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),Yn=K$1({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),Pe=d$5(Ee,{fill:"$secondaryAlt"}),Jn=d$5(Ae,{position:"absolute",right:"0",top:"0",padding:"0.5rem",margin:"0",cursor:"pointer",border:"none",background:"none",fill:"inherit","&:hover":{opacity:"0.75"}}),Kn=d$5(_e$1,{border:"none",backgroundColor:"white",fill:"inhrerit",padding:"1rem 2rem 1rem 1rem",width:"auto",minWidth:"200px",maxWidth:"350px",borderRadius:"3px",boxShadow:"5px 5px 13px #0002",animationDuration:"0.3s",animationTimingFunction:"cubic-bezier(0.16, 1, 0.3, 1)",'&[data-side="top"]':{animationName:Yn},'&[data-side="bottom"]':{animationName:Xn},'&[data-align="end"]':{[`& ${Pe}`]:{margin:"0 0.7rem"}}}),Qn=d$5(Oe$1,{display:"inline-flex",padding:"0.5rem 0",margin:"0 0.5rem 0 0",cursor:"pointer",border:"none",background:"none","> button, > span":{margin:"0"}}),ea=d$5(he$1,{boxSizing:"content-box"}),ta=Kt=>React.createElement(Qn,{...Kt},Kt.children),na=Kt=>React.createElement(Kn,{...Kt},React.createElement(Pe,null),React.createElement(Jn,null,React.createElement(k$3,{isSmall:!0},React.createElement(k$3.Close,null))),Kt.children),V$2=({children:Kt})=>React.createElement(ea,null,Kt);V$2.Trigger=ta;V$2.Content=na;const X$2=d$5("div",{boxSizing:"border-box",display:"inline-flex",alignItems:"center",borderRadius:"5px",padding:"$1",marginBottom:"$2",marginRight:"$2",backgroundColor:"$lightGrey",color:"$richBlack50",textTransform:"uppercase",fontSize:"$2",objectFit:"contain",lineHeight:"1em !important","&:last-child":{marginRight:"0"},[`${He}`]:{position:"absolute",left:"$1",height:"$3",width:"$3"},variants:{isIcon:{true:{position:"relative",paddingLeft:"$5"}}}}),Y$2=d$5("span",{display:"flex"});d$5("span",{display:"flex",width:"1.2111rem",height:"0.7222rem"});d$5("span",{display:"inline-flex",marginLeft:"5px",marginBottom:"-1px"});d$5(fe$1,{display:"flex",flexShrink:"0",margin:"0 1.618rem 0 0",padding:"0",cursor:"pointer",background:"none",border:"none",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",textAlign:"left","&:last-child":{marginRight:"1rem"},figure:{margin:"0",width:"161.8px","> div":{position:"relative",display:"flex",backgroundColor:"$secondaryAlt",width:"inherit",height:"100px",overflow:"hidden",borderRadius:"3px",transition:"$all",img:{width:"100%",height:"100%",objectFit:"cover",filter:"blur(0)",transform:"scale3d(1, 1, 1)",transition:"$all",color:"transparent"},[`& ${Y$2}`]:{position:"absolute",right:"0",bottom:"0",[`& ${X$2}`]:{margin:"0",paddingLeft:"0",fontSize:"0.7222rem",backgroundColor:"#000d",color:"$secondary",fill:"$secondary",borderBottomLeftRadius:"0",borderTopRightRadius:"0"}}},figcaption:{marginTop:"0.5rem",fontWeight:"400",fontSize:"0.8333rem",display:"-webkit-box",overflow:"hidden",MozBoxOrient:"vertical",WebkitBoxOrient:"vertical",WebkitLineClamp:"5","@sm":{fontSize:"0.8333rem"}}},"&[aria-checked='true']":{figure:{"> div":{backgroundColor:"$primaryAlt","&::before":{position:"absolute",zIndex:"1",color:"$secondaryMuted",content:"Active Item",textTransform:"uppercase",fontWeight:"700",fontSize:"0.6111rem",letterSpacing:"0.03rem",display:"flex",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center",textAlign:"center",textShadow:"5px 5px 5px #0003"},img:{opacity:"0.3",transform:"scale3d(1.1, 1.1, 1.1)",filter:"blur(2px)"},[`& ${Y$2}`]:{[`& ${X$2}`]:{backgroundColor:"$accent"}}}},figcaption:{fontWeight:"700"}}});const Ve=d$5("button",{background:"none",border:"none",cursor:"zoom-in",width:"100%",height:"100%",margin:"0",padding:"0",transition:"$all","& img":{width:"100%",height:"100%",objectFit:"contain",color:"transparent",transition:"$all"},variants:{isMedia:{true:{cursor:"pointer"}}}}),Be=d$5("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",backgroundColor:"$primary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&#rotateRight":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&#rotateLeft":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&#reset":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}}),je=d$5(Be,{position:"absolute",width:"2rem",top:"1rem",right:"1rem",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",transition:"$all",borderRadius:"50%",backgroundColor:"$accent",cursor:"pointer","&:hover, &:focus":{backgroundColor:"$accent !important"},variants:{isInteractive:{true:{"&:hover":{opacity:"1"}},false:{}},isMedia:{true:{cursor:"pointer !important"}}},compoundVariants:[{isInteractive:!1,isMedia:!0,css:{top:"50%",right:"50%",width:"4rem",height:"4rem",transform:"translate(50%,-50%)"}}]});d$5("div",{position:"relative",zIndex:"0",display:"flex",flexDirection:"column",gap:"1rem","&:hover":{[`${je}`]:{backgroundColor:"$accent"},[`${Ve}`]:{backgroundColor:"#6662",img:{filter:"brightness(0.85)"}}}});d$5("div",{});d$5("svg",{height:"19px",color:"$accent",fill:"$accent",stroke:"$accent",display:"flex",margin:"0.25rem 0.85rem"});d$5(lo,{fontSize:"1.25rem",fontWeight:"400",fontFamily:"inherit",alignSelf:"flex-start",flexGrow:"1",cursor:"pointer",transition:"$all",border:"1px solid #6663",boxShadow:"2px 2px 5px #0001",borderRadius:"3px",display:"flex",alignItems:"center",paddingLeft:"0.5rem",width:"100%","@sm":{fontSize:"1rem"}});d$5(ao,{borderRadius:"3px",boxShadow:"3px 3px 8px #0003",backgroundColor:"$secondary",marginTop:"2.25rem",marginLeft:"6px",paddingBottom:"0.25rem",maxHeight:"calc(61.8vh - 2.5rem) !important",borderTopLeftRadius:"0",border:"1px solid $secondaryMuted",maxWidth:"90vw"});d$5(po,{display:"flex",alignItems:"center",fontFamily:"inherit",padding:"0.25rem 0.5rem",color:"$primary",fontWeight:"400",fontSize:"0.8333rem",cursor:"pointer",backgroundColor:"$secondary",width:"calc(100% - 1rem)","> span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},'&[data-state="checked"]':{fontWeight:"700",color:"$primary !important"},"&:hover":{color:"$accent"},img:{width:"31px",height:"31px",marginRight:"0.5rem",borderRadius:"3px"}});d$5(io,{color:"$primaryMuted",fontFamily:"inherit",fontSize:"0.85rem",padding:"0.5rem 1rem 0.5rem 0.5rem",display:"flex",alignItems:"center",marginBottom:"0.25rem",borderRadius:"3px",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",backgroundColor:"$secondaryMuted"});const De=d$5(so,{position:"relative",zIndex:"5",width:"100%"});d$5("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}});d$5("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"});d$5("div",{width:"100%",height:"61.8vh",maxHeight:"100vh",background:"black",backgroundSize:"contain",color:"white",position:"relative",zIndex:"1",overflow:"hidden"});d$5("div",{position:"absolute",zIndex:"1",top:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}});const Ta=d$5("canvas",{position:"absolute",width:"100%",height:"100%",zIndex:"0"});React.forwardRef((Kt,Vt)=>{const Hr=React.useRef(null),Wr=reactExports.useCallback(()=>{var Zr,en;if((Zr=Vt.current)!=null&&Zr.currentTime&&((en=Vt.current)==null?void 0:en.currentTime)>0)return;const tn=Vt.current;if(!tn)return;const rn=new AudioContext,nn=rn.createMediaElementSource(tn),on=rn.createAnalyser(),an=Hr.current;if(!an)return;an.width=tn.offsetWidth,an.height=tn.offsetHeight;const $n=an.getContext("2d");nn.connect(on),on.connect(rn.destination),on.fftSize=256;const ln=on.frequencyBinCount,Hn=new Uint8Array(ln);setInterval(function(){Yr(on,$n,ln,Hn,an.width,an.height)},20)},[Vt]);React.useEffect(()=>{!Vt||!Vt.current||(Vt.current.onplay=Wr)},[Wr,Vt]);function Yr(Zr,en,tn,rn,nn,on){const an=nn/tn*2.6;let $n,ln=0;Zr.getByteFrequencyData(rn),en.fillStyle="#000000",en.fillRect(0,0,nn,on);for(let Hn=0;Hn<tn;Hn++)$n=rn[Hn]*2,en.fillStyle="rgba(78, 42, 132, 1)",en.fillRect(ln,on-$n,an,$n),ln+=an+6}return React.createElement(Ta,{ref:Hr,role:"presentation"})});d$5("div",{position:"relative",backgroundColor:"$primaryAlt",display:"flex",flexGrow:"0",flexShrink:"1",maxHeight:"500px",zIndex:"1",video:{backgroundColor:"transparent",objectFit:"contain",width:"100%",height:"100%",position:"relative",zIndex:"1"}});d$5(V$2.Trigger,{width:"30px",padding:"5px"});d$5(V$2.Content,{display:"flex",flexDirection:"column",fontSize:"0.8333rem",border:"none",boxShadow:"2px 2px 5px #0003",zIndex:"2",button:{display:"flex",textDecoration:"none",marginBottom:"0.5em",color:"$accentAlt",cursor:"pointer",background:"$secondary",border:"none","&:last-child":{marginBottom:"0"}}});d$5("span",{fontSize:"1.33rem",alignSelf:"flex-start",flexGrow:"0",flexShrink:"1",padding:"1rem","@sm":{fontSize:"1rem"},"&.visually-hidden":{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"}});d$5("header",{display:"flex",backgroundColor:"transparent !important",justifyContent:"space-between",alignItems:"flex-start",width:"100%",[`> ${De}`]:{flexGrow:"1",flexShrink:"0"},form:{flexGrow:"0",flexShrink:"1"}});d$5("div",{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",padding:"1rem",flexShrink:"0",flexGrow:"1"});d$5("span",{display:"flex",alignContent:"center",alignItems:"center",padding:"0.125rem 0.25rem 0",marginTop:"-0.125rem",marginLeft:"0.5rem",backgroundColor:"$accent",color:"$secondary",borderRadius:"3px",fontSize:"0.6111rem",textTransform:"uppercase",lineHeight:"1em"});d$5(Y$3,{all:"unset",height:"2rem",width:"3.236rem",backgroundColor:"#6663",borderRadius:"9999px",position:"relative",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px $secondaryAlt"},'&[data-state="checked"]':{backgroundColor:"$accent",boxShadow:"inset 2px 2px 5px #0003"}});d$5(Z$1,{display:"block",height:"calc(2rem - 12px)",width:"calc(2rem - 12px)",backgroundColor:"$secondary",borderRadius:"100%",boxShadow:"2px 2px 5px #0001",transition:"$all",transform:"translateX(6px)",willChange:"transform",'&[data-state="checked"]':{transform:"translateX(calc(1.236rem + 6px))"}});d$5("label",{fontSize:"0.8333rem",fontWeight:"400",lineHeight:"1em",userSelect:"none",cursor:"pointer",paddingRight:"0.618rem"});d$5("form",{display:"flex",flexShrink:"0",flexGrow:"1",alignItems:"center",marginLeft:"1.618rem"});function h$4(Kt,Vt,{checkForDefaultPrevented:Hr=!0}={}){return function(Wr){if(Kt==null||Kt(Wr),Hr===!1||!Wr.defaultPrevented)return Vt==null?void 0:Vt(Wr)}}function c$2(Kt,Vt){typeof Kt=="function"?Kt(Vt):Kt!=null&&(Kt.current=Vt)}function u$2(...Kt){return Vt=>Kt.forEach(Hr=>c$2(Hr,Vt))}function i$1(...Kt){return reactExports.useCallback(u$2(...Kt),Kt)}function $(Kt,Vt){const Hr=reactExports.createContext(Vt);function Wr(Zr){const{children:en,...tn}=Zr,rn=reactExports.useMemo(()=>tn,Object.values(tn));return m$K.jsx(Hr.Provider,{value:rn,children:en})}function Yr(Zr){const en=reactExports.useContext(Hr);if(en)return en;if(Vt!==void 0)return Vt;throw new Error(`\`${Zr}\` must be used within \`${Kt}\``)}return Wr.displayName=Kt+"Provider",[Wr,Yr]}function j$3(Kt,Vt=[]){let Hr=[];function Wr(Zr,en){const tn=reactExports.createContext(en),rn=Hr.length;Hr=[...Hr,en];function nn(an){const{scope:$n,children:ln,...Hn}=an,jn=($n==null?void 0:$n[Kt][rn])||tn,zn=reactExports.useMemo(()=>Hn,Object.values(Hn));return m$K.jsx(jn.Provider,{value:zn,children:ln})}function on(an,$n){const ln=($n==null?void 0:$n[Kt][rn])||tn,Hn=reactExports.useContext(ln);if(Hn)return Hn;if(en!==void 0)return en;throw new Error(`\`${an}\` must be used within \`${Zr}\``)}return nn.displayName=Zr+"Provider",[nn,on]}const Yr=()=>{const Zr=Hr.map(en=>reactExports.createContext(en));return function(en){const tn=(en==null?void 0:en[Kt])||Zr;return reactExports.useMemo(()=>({[`__scope${Kt}`]:{...en,[Kt]:tn}}),[en,tn])}};return Yr.scopeName=Kt,[Wr,P$1(Yr,...Vt)]}function P$1(...Kt){const Vt=Kt[0];if(Kt.length===1)return Vt;const Hr=()=>{const Wr=Kt.map(Yr=>({useScope:Yr(),scopeName:Yr.scopeName}));return function(Yr){const Zr=Wr.reduce((en,{useScope:tn,scopeName:rn})=>{const nn=tn(Yr)[`__scope${rn}`];return{...en,...nn}},{});return reactExports.useMemo(()=>({[`__scope${Vt.scopeName}`]:Zr}),[Zr])}};return Hr.scopeName=Vt.scopeName,Hr}var o$5=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{};function o$4(Kt){const Vt=reactExports.useRef(Kt);return reactExports.useEffect(()=>{Vt.current=Kt}),reactExports.useMemo(()=>(...Hr)=>{var Wr;return(Wr=Vt.current)==null?void 0:Wr.call(Vt,...Hr)},[])}var d$4=reactExports.forwardRef((Kt,Vt)=>{const{children:Hr,...Wr}=Kt,Yr=reactExports.Children.toArray(Hr),Zr=Yr.find(g$2);if(Zr){const en=Zr.props.children,tn=Yr.map(rn=>rn===Zr?reactExports.Children.count(en)>1?reactExports.Children.only(null):reactExports.isValidElement(en)?en.props.children:null:rn);return m$K.jsx(f$5,{...Wr,ref:Vt,children:reactExports.isValidElement(en)?reactExports.cloneElement(en,void 0,tn):null})}return m$K.jsx(f$5,{...Wr,ref:Vt,children:Hr})});d$4.displayName="Slot";var f$5=reactExports.forwardRef((Kt,Vt)=>{const{children:Hr,...Wr}=Kt;if(reactExports.isValidElement(Hr)){const Yr=h$3(Hr);return reactExports.cloneElement(Hr,{...y$1(Wr,Hr.props),ref:Vt?u$2(Vt,Yr):Yr})}return reactExports.Children.count(Hr)>1?reactExports.Children.only(null):null});f$5.displayName="SlotClone";var m$1=({children:Kt})=>m$K.jsx(m$K.Fragment,{children:Kt});function g$2(Kt){return reactExports.isValidElement(Kt)&&Kt.type===m$1}function y$1(Kt,Vt){const Hr={...Vt};for(const Wr in Vt){const Yr=Kt[Wr],Zr=Vt[Wr];/^on[A-Z]/.test(Wr)?Yr&&Zr?Hr[Wr]=(...en)=>{Zr(...en),Yr(...en)}:Yr&&(Hr[Wr]=Yr):Wr==="style"?Hr[Wr]={...Yr,...Zr}:Wr==="className"&&(Hr[Wr]=[Yr,Zr].filter(Boolean).join(" "))}return{...Kt,...Hr}}function h$3(Kt){var Vt,Hr;let Wr=(Vt=Object.getOwnPropertyDescriptor(Kt.props,"ref"))==null?void 0:Vt.get,Yr=Wr&&"isReactWarning"in Wr&&Wr.isReactWarning;return Yr?Kt.ref:(Wr=(Hr=Object.getOwnPropertyDescriptor(Kt,"ref"))==null?void 0:Hr.get,Yr=Wr&&"isReactWarning"in Wr&&Wr.isReactWarning,Yr?Kt.props.ref:Kt.props.ref||Kt.ref)}var c$1=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],v=c$1.reduce((Kt,Vt)=>{const Hr=reactExports.forwardRef((Wr,Yr)=>{const{asChild:Zr,...en}=Wr,tn=Zr?d$4:Vt;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m$K.jsx(tn,{...en,ref:Yr})});return Hr.displayName=`Primitive.${Vt}`,{...Kt,[Vt]:Hr}},{});function h$2(Kt,Vt){Kt&&reactDomExports.flushSync(()=>Kt.dispatchEvent(Vt))}function p$3(Kt,Vt=globalThis==null?void 0:globalThis.document){const Hr=o$4(Kt);reactExports.useEffect(()=>{const Wr=Yr=>{Yr.key==="Escape"&&Hr(Yr)};return Vt.addEventListener("keydown",Wr,{capture:!0}),()=>Vt.removeEventListener("keydown",Wr,{capture:!0})},[Hr,Vt])}var j$2="DismissableLayer",p$2="dismissableLayer.update",z="dismissableLayer.pointerDownOutside",H$3="dismissableLayer.focusOutside",L$1,T$3=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),M$3=reactExports.forwardRef((Kt,Vt)=>{const{disableOutsidePointerEvents:Hr=!1,onEscapeKeyDown:Wr,onPointerDownOutside:Yr,onFocusOutside:Zr,onInteractOutside:en,onDismiss:tn,...rn}=Kt,nn=reactExports.useContext(T$3),[on,an]=reactExports.useState(null),$n=(on==null?void 0:on.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,ln]=reactExports.useState({}),Hn=i$1(Vt,ps=>an(ps)),jn=Array.from(nn.layers),[zn]=[...nn.layersWithOutsidePointerEventsDisabled].slice(-1),Wn=jn.indexOf(zn),ei=on?jn.indexOf(on):-1,$i=nn.layersWithOutsidePointerEventsDisabled.size>0,Mi=ei>=Wn,Ni=q(ps=>{const $s=ps.target,Ws=[...nn.branches].some(Hs=>Hs.contains($s));!Mi||Ws||(Yr==null||Yr(ps),en==null||en(ps),ps.defaultPrevented||tn==null||tn())},$n),Ts=G$2(ps=>{const $s=ps.target;[...nn.branches].some(Ws=>Ws.contains($s))||(Zr==null||Zr(ps),en==null||en(ps),ps.defaultPrevented||tn==null||tn())},$n);return p$3(ps=>{ei===nn.layers.size-1&&(Wr==null||Wr(ps),!ps.defaultPrevented&&tn&&(ps.preventDefault(),tn()))},$n),reactExports.useEffect(()=>{if(on)return Hr&&(nn.layersWithOutsidePointerEventsDisabled.size===0&&(L$1=$n.body.style.pointerEvents,$n.body.style.pointerEvents="none"),nn.layersWithOutsidePointerEventsDisabled.add(on)),nn.layers.add(on),O$3(),()=>{Hr&&nn.layersWithOutsidePointerEventsDisabled.size===1&&($n.body.style.pointerEvents=L$1)}},[on,$n,Hr,nn]),reactExports.useEffect(()=>()=>{on&&(nn.layers.delete(on),nn.layersWithOutsidePointerEventsDisabled.delete(on),O$3())},[on,nn]),reactExports.useEffect(()=>{const ps=()=>ln({});return document.addEventListener(p$2,ps),()=>document.removeEventListener(p$2,ps)},[]),m$K.jsx(v.div,{...rn,ref:Hn,style:{pointerEvents:$i?Mi?"auto":"none":void 0,...Kt.style},onFocusCapture:h$4(Kt.onFocusCapture,Ts.onFocusCapture),onBlurCapture:h$4(Kt.onBlurCapture,Ts.onBlurCapture),onPointerDownCapture:h$4(Kt.onPointerDownCapture,Ni.onPointerDownCapture)})});M$3.displayName=j$2;var X$1="DismissableLayerBranch",Y$1=reactExports.forwardRef((Kt,Vt)=>{const Hr=reactExports.useContext(T$3),Wr=reactExports.useRef(null),Yr=i$1(Vt,Wr);return reactExports.useEffect(()=>{const Zr=Wr.current;if(Zr)return Hr.branches.add(Zr),()=>{Hr.branches.delete(Zr)}},[Hr.branches]),m$K.jsx(v.div,{...Kt,ref:Yr})});Y$1.displayName=X$1;function q(Kt,Vt=globalThis==null?void 0:globalThis.document){const Hr=o$4(Kt),Wr=reactExports.useRef(!1),Yr=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const Zr=tn=>{if(tn.target&&!Wr.current){let rn=function(){B$2(z,Hr,nn,{discrete:!0})};const nn={originalEvent:tn};tn.pointerType==="touch"?(Vt.removeEventListener("click",Yr.current),Yr.current=rn,Vt.addEventListener("click",Yr.current,{once:!0})):rn()}else Vt.removeEventListener("click",Yr.current);Wr.current=!1},en=window.setTimeout(()=>{Vt.addEventListener("pointerdown",Zr)},0);return()=>{window.clearTimeout(en),Vt.removeEventListener("pointerdown",Zr),Vt.removeEventListener("click",Yr.current)}},[Vt,Hr]),{onPointerDownCapture:()=>Wr.current=!0}}function G$2(Kt,Vt=globalThis==null?void 0:globalThis.document){const Hr=o$4(Kt),Wr=reactExports.useRef(!1);return reactExports.useEffect(()=>{const Yr=Zr=>{Zr.target&&!Wr.current&&B$2(H$3,Hr,{originalEvent:Zr},{discrete:!1})};return Vt.addEventListener("focusin",Yr),()=>Vt.removeEventListener("focusin",Yr)},[Vt,Hr]),{onFocusCapture:()=>Wr.current=!0,onBlurCapture:()=>Wr.current=!1}}function O$3(){const Kt=new CustomEvent(p$2);document.dispatchEvent(Kt)}function B$2(Kt,Vt,Hr,{discrete:Wr}){const Yr=Hr.originalEvent.target,Zr=new CustomEvent(Kt,{bubbles:!1,cancelable:!0,detail:Hr});Vt&&Yr.addEventListener(Kt,Vt,{once:!0}),Wr?h$2(Yr,Zr):Yr.dispatchEvent(Zr)}var F$2="focusScope.autoFocusOnMount",T$2="focusScope.autoFocusOnUnmount",N$1={bubbles:!1,cancelable:!0},K="FocusScope",k$2=reactExports.forwardRef((Kt,Vt)=>{const{loop:Hr=!1,trapped:Wr=!1,onMountAutoFocus:Yr,onUnmountAutoFocus:Zr,...en}=Kt,[tn,rn]=reactExports.useState(null),nn=o$4(Yr),on=o$4(Zr),an=reactExports.useRef(null),$n=i$1(Vt,jn=>rn(jn)),ln=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(Wr){let jn=function($i){if(ln.paused||!tn)return;const Mi=$i.target;tn.contains(Mi)?an.current=Mi:f$4(an.current,{select:!0})},zn=function($i){if(ln.paused||!tn)return;const Mi=$i.relatedTarget;Mi!==null&&(tn.contains(Mi)||f$4(an.current,{select:!0}))},Wn=function($i){if(document.activeElement===document.body)for(const Mi of $i)Mi.removedNodes.length>0&&f$4(tn)};document.addEventListener("focusin",jn),document.addEventListener("focusout",zn);const ei=new MutationObserver(Wn);return tn&&ei.observe(tn,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",jn),document.removeEventListener("focusout",zn),ei.disconnect()}}},[Wr,tn,ln.paused]),reactExports.useEffect(()=>{if(tn){S$1.add(ln);const jn=document.activeElement;if(!tn.contains(jn)){const zn=new CustomEvent(F$2,N$1);tn.addEventListener(F$2,nn),tn.dispatchEvent(zn),zn.defaultPrevented||(w$2(V$1(I$2(tn)),{select:!0}),document.activeElement===jn&&f$4(tn))}return()=>{tn.removeEventListener(F$2,nn),setTimeout(()=>{const zn=new CustomEvent(T$2,N$1);tn.addEventListener(T$2,on),tn.dispatchEvent(zn),zn.defaultPrevented||f$4(jn??document.body,{select:!0}),tn.removeEventListener(T$2,on),S$1.remove(ln)},0)}}},[tn,nn,on,ln]);const Hn=reactExports.useCallback(jn=>{if(!Hr&&!Wr||ln.paused)return;const zn=jn.key==="Tab"&&!jn.altKey&&!jn.ctrlKey&&!jn.metaKey,Wn=document.activeElement;if(zn&&Wn){const ei=jn.currentTarget,[$i,Mi]=x$1(ei);$i&&Mi?!jn.shiftKey&&Wn===Mi?(jn.preventDefault(),Hr&&f$4($i,{select:!0})):jn.shiftKey&&Wn===$i&&(jn.preventDefault(),Hr&&f$4(Mi,{select:!0})):Wn===ei&&jn.preventDefault()}},[Hr,Wr,ln.paused]);return m$K.jsx(v.div,{tabIndex:-1,...en,ref:$n,onKeyDown:Hn})});k$2.displayName=K;function w$2(Kt,{select:Vt=!1}={}){const Hr=document.activeElement;for(const Wr of Kt)if(f$4(Wr,{select:Vt}),document.activeElement!==Hr)return}function x$1(Kt){const Vt=I$2(Kt),Hr=O$2(Vt,Kt),Wr=O$2(Vt.reverse(),Kt);return[Hr,Wr]}function I$2(Kt){const Vt=[],Hr=document.createTreeWalker(Kt,NodeFilter.SHOW_ELEMENT,{acceptNode:Wr=>{const Yr=Wr.tagName==="INPUT"&&Wr.type==="hidden";return Wr.disabled||Wr.hidden||Yr?NodeFilter.FILTER_SKIP:Wr.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;Hr.nextNode();)Vt.push(Hr.currentNode);return Vt}function O$2(Kt,Vt){for(const Hr of Kt)if(!D$3(Hr,{upTo:Vt}))return Hr}function D$3(Kt,{upTo:Vt}){if(getComputedStyle(Kt).visibility==="hidden")return!0;for(;Kt;){if(Vt!==void 0&&Kt===Vt)return!1;if(getComputedStyle(Kt).display==="none")return!0;Kt=Kt.parentElement}return!1}function H$2(Kt){return Kt instanceof HTMLInputElement&&"select"in Kt}function f$4(Kt,{select:Vt=!1}={}){if(Kt&&Kt.focus){const Hr=document.activeElement;Kt.focus({preventScroll:!0}),Kt!==Hr&&H$2(Kt)&&Vt&&Kt.select()}}var S$1=j$1();function j$1(){let Kt=[];return{add(Vt){const Hr=Kt[0];Vt!==Hr&&(Hr==null||Hr.pause()),Kt=C$1(Kt,Vt),Kt.unshift(Vt)},remove(Vt){var Hr;Kt=C$1(Kt,Vt),(Hr=Kt[0])==null||Hr.resume()}}}function C$1(Kt,Vt){const Hr=[...Kt],Wr=Hr.indexOf(Vt);return Wr!==-1&&Hr.splice(Wr,1),Hr}function V$1(Kt){return Kt.filter(Vt=>Vt.tagName!=="A")}var p$1="Portal",d$3=reactExports.forwardRef((Kt,Vt)=>{var Hr;const{container:Wr,...Yr}=Kt,[Zr,en]=reactExports.useState(!1);o$5(()=>en(!0),[]);const tn=Wr||Zr&&((Hr=globalThis==null?void 0:globalThis.document)==null?void 0:Hr.body);return tn?O$u.createPortal(m$K.jsx(v.div,{...Yr,ref:Vt}),tn):null});d$3.displayName=p$1;function E$1(Kt,Vt){return reactExports.useReducer((Hr,Wr)=>Vt[Hr][Wr]??Hr,Kt)}var M$2=Kt=>{const{present:Vt,children:Hr}=Kt,Wr=R$1(Vt),Yr=typeof Hr=="function"?Hr({present:Wr.isPresent}):reactExports.Children.only(Hr),Zr=i$1(Wr.ref,T$1(Yr));return typeof Hr=="function"||Wr.isPresent?reactExports.cloneElement(Yr,{ref:Zr}):null};M$2.displayName="Presence";function R$1(Kt){const[Vt,Hr]=reactExports.useState(),Wr=reactExports.useRef({}),Yr=reactExports.useRef(Kt),Zr=reactExports.useRef("none"),en=Kt?"mounted":"unmounted",[tn,rn]=E$1(en,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const nn=d$2(Wr.current);Zr.current=tn==="mounted"?nn:"none"},[tn]),o$5(()=>{const nn=Wr.current,on=Yr.current;if(on!==Kt){const an=Zr.current,$n=d$2(nn);Kt?rn("MOUNT"):$n==="none"||(nn==null?void 0:nn.display)==="none"?rn("UNMOUNT"):rn(on&&an!==$n?"ANIMATION_OUT":"UNMOUNT"),Yr.current=Kt}},[Kt,rn]),o$5(()=>{if(Vt){const nn=an=>{const $n=d$2(Wr.current).includes(an.animationName);an.target===Vt&&$n&&reactDomExports.flushSync(()=>rn("ANIMATION_END"))},on=an=>{an.target===Vt&&(Zr.current=d$2(Wr.current))};return Vt.addEventListener("animationstart",on),Vt.addEventListener("animationcancel",nn),Vt.addEventListener("animationend",nn),()=>{Vt.removeEventListener("animationstart",on),Vt.removeEventListener("animationcancel",nn),Vt.removeEventListener("animationend",nn)}}else rn("ANIMATION_END")},[Vt,rn]),{isPresent:["mounted","unmountSuspended"].includes(tn),ref:reactExports.useCallback(nn=>{nn&&(Wr.current=getComputedStyle(nn)),Hr(nn)},[])}}function d$2(Kt){return(Kt==null?void 0:Kt.animationName)||"none"}function T$1(Kt){var Vt,Hr;let Wr=(Vt=Object.getOwnPropertyDescriptor(Kt.props,"ref"))==null?void 0:Vt.get,Yr=Wr&&"isReactWarning"in Wr&&Wr.isReactWarning;return Yr?Kt.ref:(Wr=(Hr=Object.getOwnPropertyDescriptor(Kt,"ref"))==null?void 0:Hr.get,Yr=Wr&&"isReactWarning"in Wr&&Wr.isReactWarning,Yr?Kt.props.ref:Kt.props.ref||Kt.ref)}var t=0;function a$4(){reactExports.useEffect(()=>{const Kt=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",Kt[0]??n()),document.body.insertAdjacentElement("beforeend",Kt[1]??n()),t++,()=>{t===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(Vt=>Vt.remove()),t--}},[])}function n(){const Kt=document.createElement("span");return Kt.setAttribute("data-radix-focus-guard",""),Kt.tabIndex=0,Kt.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",Kt}var r$1="right-scroll-bar-position",a$3="width-before-scroll-bar",l="with-scroll-bars-hidden",e$3="--removed-body-scroll-bar-size",a$2=v$z(),o$3=function(){},m=reactExports.forwardRef(function(Kt,Vt){var Hr=reactExports.useRef(null),Wr=reactExports.useState({onScrollCapture:o$3,onWheelCapture:o$3,onTouchMoveCapture:o$3}),Yr=Wr[0],Zr=Wr[1],en=Kt.forwardProps,tn=Kt.children,rn=Kt.className,nn=Kt.removeScrollBar,on=Kt.enabled,an=Kt.shards,$n=Kt.sideCar,ln=Kt.noIsolation,Hn=Kt.inert,jn=Kt.allowPinchZoom,zn=Kt.as,Wn=zn===void 0?"div":zn,ei=Kt.gapMode,$i=c$D(Kt,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),Mi=$n,Ni=v$y([Hr,Vt]),Ts=p$w(p$w({},$i),Yr);return reactExports.createElement(reactExports.Fragment,null,on&&reactExports.createElement(Mi,{sideCar:a$2,removeScrollBar:nn,shards:an,noIsolation:ln,inert:Hn,setCallbacks:Zr,allowPinchZoom:!!jn,lockRef:Hr,gapMode:ei}),en?reactExports.cloneElement(reactExports.Children.only(tn),p$w(p$w({},Ts),{ref:Ni})):reactExports.createElement(Wn,p$w({},Ts,{className:rn,ref:Ni}),tn))});m.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};m.classNames={fullWidth:a$3,zeroRight:r$1};var a$1={left:0,top:0,right:0,gap:0},e$2=function(Kt){return parseInt(Kt||"",10)||0},o$2=function(Kt){var Vt=window.getComputedStyle(document.body),Hr=Vt[Kt==="padding"?"paddingLeft":"marginLeft"],Wr=Vt[Kt==="padding"?"paddingTop":"marginTop"],Yr=Vt[Kt==="padding"?"paddingRight":"marginRight"];return[e$2(Hr),e$2(Wr),e$2(Yr)]},f$3=function(Kt){if(Kt===void 0&&(Kt="margin"),typeof window>"u")return a$1;var Vt=o$2(Kt),Hr=document.documentElement.clientWidth,Wr=window.innerWidth;return{left:Vt[0],top:Vt[1],right:Vt[2],gap:Math.max(0,Wr-Hr+Vt[2]-Vt[0])}},b$2=s$m(),e$1="data-scroll-locked",h$1=function(Kt,Vt,Hr,Wr){var Yr=Kt.left,Zr=Kt.top,en=Kt.right,tn=Kt.gap;return Hr===void 0&&(Hr="margin"),`
  .`.concat(l,` {
   overflow: hidden `).concat(Wr,`;
   padding-right: `).concat(tn,"px ").concat(Wr,`;
  }
  body[`).concat(e$1,`] {
    overflow: hidden `).concat(Wr,`;
    overscroll-behavior: contain;
    `).concat([Vt&&"position: relative ".concat(Wr,";"),Hr==="margin"&&`
    padding-left: `.concat(Yr,`px;
    padding-top: `).concat(Zr,`px;
    padding-right: `).concat(en,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(tn,"px ").concat(Wr,`;
    `),Hr==="padding"&&"padding-right: ".concat(tn,"px ").concat(Wr,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(r$1,` {
    right: `).concat(tn,"px ").concat(Wr,`;
  }
  
  .`).concat(a$3,` {
    margin-right: `).concat(tn,"px ").concat(Wr,`;
  }
  
  .`).concat(r$1," .").concat(r$1,` {
    right: 0 `).concat(Wr,`;
  }
  
  .`).concat(a$3," .").concat(a$3,` {
    margin-right: 0 `).concat(Wr,`;
  }
  
  body[`).concat(e$1,`] {
    `).concat(e$3,": ").concat(tn,`px;
  }
`)},u$1=function(){var Kt=parseInt(document.body.getAttribute(e$1)||"0",10);return isFinite(Kt)?Kt:0},x=function(){reactExports.useEffect(function(){return document.body.setAttribute(e$1,(u$1()+1).toString()),function(){var Kt=u$1()-1;Kt<=0?document.body.removeAttribute(e$1):document.body.setAttribute(e$1,Kt.toString())}},[])},C=function(Kt){var Vt=Kt.noRelative,Hr=Kt.noImportant,Wr=Kt.gapMode,Yr=Wr===void 0?"margin":Wr;x();var Zr=reactExports.useMemo(function(){return f$3(Yr)},[Yr]);return reactExports.createElement(b$2,{styles:h$1(Zr,!Vt,Yr,Hr?"":"!important")})},r=!1;if(typeof window<"u")try{var e=Object.defineProperty({},"passive",{get:function(){return r=!0,!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch{r=!1}var a=r?{passive:!1}:!1,p=function(Kt){return Kt.tagName==="TEXTAREA"},w$1=function(Kt,Vt){var Hr=window.getComputedStyle(Kt);return Hr[Vt]!=="hidden"&&!(Hr.overflowY===Hr.overflowX&&!p(Kt)&&Hr[Vt]==="visible")},y=function(Kt){return w$1(Kt,"overflowY")},H$1=function(Kt){return w$1(Kt,"overflowX")},R=function(Kt,Vt){var Hr=Vt.ownerDocument,Wr=Vt;do{typeof ShadowRoot<"u"&&Wr instanceof ShadowRoot&&(Wr=Wr.host);var Yr=g$1(Kt,Wr);if(Yr){var Zr=b$1(Kt,Wr),en=Zr[1],tn=Zr[2];if(en>tn)return!0}Wr=Wr.parentNode}while(Wr&&Wr!==Hr.body);return!1},B$1=function(Kt){var Vt=Kt.scrollTop,Hr=Kt.scrollHeight,Wr=Kt.clientHeight;return[Vt,Hr,Wr]},V=function(Kt){var Vt=Kt.scrollLeft,Hr=Kt.scrollWidth,Wr=Kt.clientWidth;return[Vt,Hr,Wr]},g$1=function(Kt,Vt){return Kt==="v"?y(Vt):H$1(Vt)},b$1=function(Kt,Vt){return Kt==="v"?B$1(Vt):V(Vt)},D$2=function(Kt,Vt){return Kt==="h"&&Vt==="rtl"?-1:1},W$1=function(Kt,Vt,Hr,Wr,Yr){var Zr=D$2(Kt,window.getComputedStyle(Vt).direction),en=Zr*Wr,tn=Hr.target,rn=Vt.contains(tn),nn=!1,on=en>0,an=0,$n=0;do{var ln=b$1(Kt,tn),Hn=ln[0],jn=ln[1],zn=ln[2],Wn=jn-zn-Zr*Hn;(Hn||Wn)&&g$1(Kt,tn)&&(an+=Wn,$n+=Hn),tn instanceof ShadowRoot?tn=tn.host:tn=tn.parentNode}while(!rn&&tn!==document.body||rn&&(Vt.contains(tn)||Vt===tn));return(on&&(Yr&&Math.abs(an)<1||!Yr&&en>an)||!on&&(Yr&&Math.abs($n)<1||!Yr&&-en>$n))&&(nn=!0),nn},k$1=function(Kt){return"changedTouches"in Kt?[Kt.changedTouches[0].clientX,Kt.changedTouches[0].clientY]:[0,0]},Y=function(Kt){return[Kt.deltaX,Kt.deltaY]},B=function(Kt){return Kt&&"current"in Kt?Kt.current:Kt},F$1=function(Kt,Vt){return Kt[0]===Vt[0]&&Kt[1]===Vt[1]},O$1=function(Kt){return`
  .block-interactivity-`.concat(Kt,` {pointer-events: none;}
  .allow-interactivity-`).concat(Kt,` {pointer-events: all;}
`)},Q$1=0,f$2=[];function G$1(Kt){var Vt=reactExports.useRef([]),Hr=reactExports.useRef([0,0]),Wr=reactExports.useRef(),Yr=reactExports.useState(Q$1++)[0],Zr=reactExports.useState(s$m)[0],en=reactExports.useRef(Kt);reactExports.useEffect(function(){en.current=Kt},[Kt]),reactExports.useEffect(function(){if(Kt.inert){document.body.classList.add("block-interactivity-".concat(Yr));var jn=l$s([Kt.lockRef.current],(Kt.shards||[]).map(B),!0).filter(Boolean);return jn.forEach(function(zn){return zn.classList.add("allow-interactivity-".concat(Yr))}),function(){document.body.classList.remove("block-interactivity-".concat(Yr)),jn.forEach(function(zn){return zn.classList.remove("allow-interactivity-".concat(Yr))})}}},[Kt.inert,Kt.lockRef.current,Kt.shards]);var tn=reactExports.useCallback(function(jn,zn){if("touches"in jn&&jn.touches.length===2)return!en.current.allowPinchZoom;var Wn=k$1(jn),ei=Hr.current,$i="deltaX"in jn?jn.deltaX:ei[0]-Wn[0],Mi="deltaY"in jn?jn.deltaY:ei[1]-Wn[1],Ni,Ts=jn.target,ps=Math.abs($i)>Math.abs(Mi)?"h":"v";if("touches"in jn&&ps==="h"&&Ts.type==="range")return!1;var $s=R(ps,Ts);if(!$s)return!0;if($s?Ni=ps:(Ni=ps==="v"?"h":"v",$s=R(ps,Ts)),!$s)return!1;if(!Wr.current&&"changedTouches"in jn&&($i||Mi)&&(Wr.current=Ni),!Ni)return!0;var Ws=Wr.current||Ni;return W$1(Ws,zn,jn,Ws==="h"?$i:Mi,!0)},[]),rn=reactExports.useCallback(function(jn){var zn=jn;if(!(!f$2.length||f$2[f$2.length-1]!==Zr)){var Wn="deltaY"in zn?Y(zn):k$1(zn),ei=Vt.current.filter(function(Ni){return Ni.name===zn.type&&(Ni.target===zn.target||zn.target===Ni.shadowParent)&&F$1(Ni.delta,Wn)})[0];if(ei&&ei.should){zn.cancelable&&zn.preventDefault();return}if(!ei){var $i=(en.current.shards||[]).map(B).filter(Boolean).filter(function(Ni){return Ni.contains(zn.target)}),Mi=$i.length>0?tn(zn,$i[0]):!en.current.noIsolation;Mi&&zn.cancelable&&zn.preventDefault()}}},[]),nn=reactExports.useCallback(function(jn,zn,Wn,ei){var $i={name:jn,delta:zn,target:Wn,should:ei,shadowParent:Z(Wn)};Vt.current.push($i),setTimeout(function(){Vt.current=Vt.current.filter(function(Mi){return Mi!==$i})},1)},[]),on=reactExports.useCallback(function(jn){Hr.current=k$1(jn),Wr.current=void 0},[]),an=reactExports.useCallback(function(jn){nn(jn.type,Y(jn),jn.target,tn(jn,Kt.lockRef.current))},[]),$n=reactExports.useCallback(function(jn){nn(jn.type,k$1(jn),jn.target,tn(jn,Kt.lockRef.current))},[]);reactExports.useEffect(function(){return f$2.push(Zr),Kt.setCallbacks({onScrollCapture:an,onWheelCapture:an,onTouchMoveCapture:$n}),document.addEventListener("wheel",rn,a),document.addEventListener("touchmove",rn,a),document.addEventListener("touchstart",on,a),function(){f$2=f$2.filter(function(jn){return jn!==Zr}),document.removeEventListener("wheel",rn,a),document.removeEventListener("touchmove",rn,a),document.removeEventListener("touchstart",on,a)}},[]);var ln=Kt.removeScrollBar,Hn=Kt.inert;return reactExports.createElement(reactExports.Fragment,null,Hn?reactExports.createElement(Zr,{styles:O$1(Yr)}):null,ln?reactExports.createElement(C,{gapMode:Kt.gapMode}):null)}function Z(Kt){for(var Vt=null;Kt!==null;)Kt instanceof ShadowRoot&&(Vt=Kt.host,Kt=Kt.host),Kt=Kt.parentNode;return Vt}const f$1=p$u(a$2,G$1);var o$1=reactExports.forwardRef(function(Kt,Vt){return reactExports.createElement(m,p$w({},Kt,{ref:Vt,sideCar:f$1}))});o$1.classNames=m.classNames;const i=o$1;var _="Dialog",[P,_e]=j$3(_),[J,u]=P(_),I$1="DialogTrigger",Q=reactExports.forwardRef((Kt,Vt)=>{const{__scopeDialog:Hr,...Wr}=Kt,Yr=u(I$1,Hr),Zr=i$1(Vt,Yr.triggerRef);return m$K.jsx(v.button,{type:"button","aria-haspopup":"dialog","aria-expanded":Yr.open,"aria-controls":Yr.contentId,"data-state":N(Yr.open),...Wr,ref:Zr,onClick:h$4(Kt.onClick,Yr.onOpenToggle)})});Q.displayName=I$1;var h="DialogPortal",[X,O]=P(h,{forceMount:void 0}),D$1="DialogOverlay",j=reactExports.forwardRef((Kt,Vt)=>{const Hr=O(D$1,Kt.__scopeDialog),{forceMount:Wr=Hr.forceMount,...Yr}=Kt,Zr=u(D$1,Kt.__scopeDialog);return Zr.modal?m$K.jsx(M$2,{present:Wr||Zr.open,children:m$K.jsx(ee,{...Yr,ref:Vt})}):null});j.displayName=D$1;var ee=reactExports.forwardRef((Kt,Vt)=>{const{__scopeDialog:Hr,...Wr}=Kt,Yr=u(D$1,Hr);return m$K.jsx(i,{as:d$4,allowPinchZoom:!0,shards:[Yr.contentRef],children:m$K.jsx(v.div,{"data-state":N(Yr.open),...Wr,ref:Vt,style:{pointerEvents:"auto",...Wr.style}})})}),f="DialogContent",T=reactExports.forwardRef((Kt,Vt)=>{const Hr=O(f,Kt.__scopeDialog),{forceMount:Wr=Hr.forceMount,...Yr}=Kt,Zr=u(f,Kt.__scopeDialog);return m$K.jsx(M$2,{present:Wr||Zr.open,children:Zr.modal?m$K.jsx(te,{...Yr,ref:Vt}):m$K.jsx(oe,{...Yr,ref:Vt})})});T.displayName=f;var te=reactExports.forwardRef((Kt,Vt)=>{const Hr=u(f,Kt.__scopeDialog),Wr=reactExports.useRef(null),Yr=i$1(Vt,Hr.contentRef,Wr);return reactExports.useEffect(()=>{const Zr=Wr.current;if(Zr)return E$g(Zr)},[]),m$K.jsx(b,{...Kt,ref:Yr,trapFocus:Hr.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:h$4(Kt.onCloseAutoFocus,Zr=>{var en;Zr.preventDefault(),(en=Hr.triggerRef.current)==null||en.focus()}),onPointerDownOutside:h$4(Kt.onPointerDownOutside,Zr=>{const en=Zr.detail.originalEvent,tn=en.button===0&&en.ctrlKey===!0;(en.button===2||tn)&&Zr.preventDefault()}),onFocusOutside:h$4(Kt.onFocusOutside,Zr=>Zr.preventDefault())})}),oe=reactExports.forwardRef((Kt,Vt)=>{const Hr=u(f,Kt.__scopeDialog),Wr=reactExports.useRef(!1),Yr=reactExports.useRef(!1);return m$K.jsx(b,{...Kt,ref:Vt,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:Zr=>{var en,tn;(en=Kt.onCloseAutoFocus)==null||en.call(Kt,Zr),Zr.defaultPrevented||(Wr.current||(tn=Hr.triggerRef.current)==null||tn.focus(),Zr.preventDefault()),Wr.current=!1,Yr.current=!1},onInteractOutside:Zr=>{var en,tn;(en=Kt.onInteractOutside)==null||en.call(Kt,Zr),Zr.defaultPrevented||(Wr.current=!0,Zr.detail.originalEvent.type==="pointerdown"&&(Yr.current=!0));const rn=Zr.target;(tn=Hr.triggerRef.current)!=null&&tn.contains(rn)&&Zr.preventDefault(),Zr.detail.originalEvent.type==="focusin"&&Yr.current&&Zr.preventDefault()}})}),b=reactExports.forwardRef((Kt,Vt)=>{const{__scopeDialog:Hr,trapFocus:Wr,onOpenAutoFocus:Yr,onCloseAutoFocus:Zr,...en}=Kt,tn=u(f,Hr),rn=reactExports.useRef(null),nn=i$1(Vt,rn);return a$4(),m$K.jsxs(m$K.Fragment,{children:[m$K.jsx(k$2,{asChild:!0,loop:!0,trapped:Wr,onMountAutoFocus:Yr,onUnmountAutoFocus:Zr,children:m$K.jsx(M$3,{role:"dialog",id:tn.contentId,"aria-describedby":tn.descriptionId,"aria-labelledby":tn.titleId,"data-state":N(tn.open),...en,ref:nn,onDismiss:()=>tn.onOpenChange(!1)})}),m$K.jsxs(m$K.Fragment,{children:[m$K.jsx(re,{titleId:tn.titleId}),m$K.jsx(ae,{contentRef:rn,descriptionId:tn.descriptionId})]})]})}),E="DialogTitle",M$1=reactExports.forwardRef((Kt,Vt)=>{const{__scopeDialog:Hr,...Wr}=Kt,Yr=u(E,Hr);return m$K.jsx(v.h2,{id:Yr.titleId,...Wr,ref:Vt})});M$1.displayName=E;var w="DialogDescription",F=reactExports.forwardRef((Kt,Vt)=>{const{__scopeDialog:Hr,...Wr}=Kt,Yr=u(w,Hr);return m$K.jsx(v.p,{id:Yr.descriptionId,...Wr,ref:Vt})});F.displayName=w;var S="DialogClose",W=reactExports.forwardRef((Kt,Vt)=>{const{__scopeDialog:Hr,...Wr}=Kt,Yr=u(S,Hr);return m$K.jsx(v.button,{type:"button",...Wr,ref:Vt,onClick:h$4(Kt.onClick,()=>Yr.onOpenChange(!1))})});W.displayName=S;function N(Kt){return Kt?"open":"closed"}var k="DialogTitleWarning",[he,G]=$(k,{contentName:f,titleName:E,docsSlug:"dialog"}),re=({titleId:Kt})=>{const Vt=G(k),Hr=`\`${Vt.contentName}\` requires a \`${Vt.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${Vt.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${Vt.docsSlug}`;return reactExports.useEffect(()=>{Kt&&(document.getElementById(Kt)||console.error(Hr))},[Hr,Kt]),null},ne="DialogDescriptionWarning",ae=({contentRef:Kt,descriptionId:Vt})=>{const Hr=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${G(ne).contentName}}.`;return reactExports.useEffect(()=>{var Wr;const Yr=(Wr=Kt.current)==null?void 0:Wr.getAttribute("aria-describedby");Vt&&Yr&&(document.getElementById(Vt)||console.warn(Hr))},[Hr,Kt,Vt]),null};/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */g$i("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);reactExports.createContext(void 0);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */g$i("CheckSquare2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */g$i("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);let d$1;typeof window<"u"?d$1=window:typeof self<"u"?d$1=self:d$1=global;d$1.clearTimeout;d$1.setTimeout;d$1.cancelAnimationFrame||d$1.mozCancelAnimationFrame||d$1.webkitCancelAnimationFrame;d$1.requestAnimationFrame||d$1.mozRequestAnimationFrame||d$1.webkitRequestAnimationFrame;/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */g$i("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */g$i("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const g=209,M={colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:`hsl(${g} 100% 38.2%)`,accentMuted:`hsl(${g} 80% 61.8%)`,accentAlt:`hsl(${g} 80% 30%)`,secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},I={xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"},{styled:o,css:D,keyframes:H,createTheme:L}=ve$1({theme:M,media:I});o("span",{});o("img",{objectFit:"cover"});o("a",{});reactExports.createContext(void 0);o("span",{});o("span",{});o("dl",{});o("li",{});o("ul",{});o("dl",{});o("li",{});o("ul",{});/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */g$i("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */g$i("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */g$i("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */g$i("ListTree",[["path",{d:"M21 12h-8",key:"1bmf0i"}],["path",{d:"M21 6H8",key:"1pqkrb"}],["path",{d:"M21 18h-8",key:"1tm79t"}],["path",{d:"M3 6v4c0 1.1.9 2 2 2h3",key:"1ywdgy"}],["path",{d:"M3 10v6c0 1.1.9 2 2 2h3",key:"2wc746"}]]);const c=Kt=>Kt.onClick?m$K.jsx("button",{className:"w-full border-0 text-left hover:bg-transparent",onClick:()=>Kt.onClick(Kt.item),type:"button",children:Kt.children}):Kt.children,d=Kt=>{const Vt=reactExports.useMemo(()=>Kt.attributes.slice(0,3).map(Hr=>Hr.render?Hr.render(Kt.item):Kt.item[Hr.name]),[Kt.attributes,Kt.item]);return m$K.jsx("li",{className:i$K({"bg-primary/20":Kt.isHighlight},{"hover:bg-primary/20":!!Kt.onClick}),children:m$K.jsx(c,{...Kt,children:m$K.jsxs("div",{className:"py-3 px-4",onPointerEnter:Kt.onPointerEnter?()=>Kt.onPointerEnter(Kt.item):void 0,onPointerLeave:Kt.onPointerLeave?()=>Kt.onPointerLeave(Kt.item):void 0,children:[m$K.jsx("p",{className:"font-bold text-neutral-800",children:Kt.title}),Kt.attributes&&Vt.some(Boolean)&&m$K.jsx("ul",{className:"list-none",children:Kt.attributes.slice(0,3).map((Hr,Wr)=>m$K.jsx(m$K.Fragment,{children:!!Vt[Wr]&&m$K.jsxs("li",{className:"text-sm text-neutral-800 flex gap-2 items-center list-none pl-5 pt-1",children:[m$K.jsx(ao$2,{className:"min-w-[13px]",name:Hr.icon||"bullet",size:13}),Vt[Wr]]},Hr.name)}))})]})})})};reactExports.memo(d);const RecordDetailPanel_stories={title:"Components/Core Data/RecordDetailPanel",component:RecordDetailPanel$1},sampleData=[{title:"Related People",items:[{name:"Kazuya Miyuki"},{name:"Eijun Sawamura"}],icon:"person",count:!0},{title:"Related Organizations",items:[{name:"Seido High School Baseball Club"},{name:"Yakushi High School Baseball Club"}],icon:"occupation",count:!0}],Default=()=>jsxRuntimeExports.jsx(RecordDetailPanel$1,{relations:sampleData,title:"West Tokyo Qualifiers Quarterfinal",detailItems:[{text:"July 27",icon:"date"},{text:"Meiji Jinju Stadium",icon:"location"}],children:jsxRuntimeExports.jsxs("p",{children:["Arcu imperdiet sit sit viverra id volutpat commodo."," ",jsxRuntimeExports.jsx("span",{className:"font-bold",children:"Tempor sem malesuada porttitor congue."})," ","Nibh aenean vitae blandit vitae sapien ac varius mattis. Aliquam vitae purus arcu eros enim tempus parturient orci fames."]})}),WithViewDetail=()=>jsxRuntimeExports.jsx(RecordDetailPanel$1,{relations:sampleData,detailPageUrl:"#",title:"West Tokyo Qualifiers Quarterfinal",detailItems:[{text:"July 27",icon:"date"},{text:"Meiji Jinju Stadium",icon:"location"}],children:jsxRuntimeExports.jsxs("p",{children:["Arcu imperdiet sit sit viverra id volutpat commodo."," ",jsxRuntimeExports.jsx("span",{className:"font-bold",children:"Tempor sem malesuada porttitor congue."})," ","Nibh aenean vitae blandit vitae sapien ac varius mattis. Aliquam vitae purus arcu eros enim tempus parturient orci fames."]})}),WithIcon=()=>jsxRuntimeExports.jsx(RecordDetailPanel$1,{relations:sampleData,title:"West Tokyo Qualifiers Quarterfinal",detailItems:[{text:"July 27",icon:"date"},{text:"Meiji Jinju Stadium",icon:"location"}],icon:"participants",children:jsxRuntimeExports.jsxs("p",{children:["Arcu imperdiet sit sit viverra id volutpat commodo."," ",jsxRuntimeExports.jsx("span",{className:"font-bold",children:"Tempor sem malesuada porttitor congue."})," ","Nibh aenean vitae blandit vitae sapien ac varius mattis. Aliquam vitae purus arcu eros enim tempus parturient orci fames."]})}),WithClose=()=>jsxRuntimeExports.jsx(RecordDetailPanel$1,{relations:sampleData,title:"West Tokyo Qualifiers Quarterfinal",detailItems:[{text:"July 27",icon:"date"},{text:"Meiji Jinju Stadium",icon:"location"}],onClose:action("close"),children:jsxRuntimeExports.jsxs("p",{children:["Arcu imperdiet sit sit viverra id volutpat commodo."," ",jsxRuntimeExports.jsx("span",{className:"font-bold",children:"Tempor sem malesuada porttitor congue."})," ","Nibh aenean vitae blandit vitae sapien ac varius mattis. Aliquam vitae purus arcu eros enim tempus parturient orci fames."]})}),WithBreadcrumbs=()=>jsxRuntimeExports.jsx(RecordDetailPanel$1,{relations:sampleData,title:"West Tokyo Qualifiers Quarterfinal",detailItems:[{text:"July 27",icon:"date"},{text:"Meiji Jinju Stadium",icon:"location"}],breadcrumbs:["West Tokyo Qualifiers Semifinal","West Tokyo Qualifiers Quarterfinal"],onGoBack:action("back"),children:jsxRuntimeExports.jsxs("p",{children:["Arcu imperdiet sit sit viverra id volutpat commodo."," ",jsxRuntimeExports.jsx("span",{className:"font-bold",children:"Tempor sem malesuada porttitor congue."})," ","Nibh aenean vitae blandit vitae sapien ac varius mattis. Aliquam vitae purus arcu eros enim tempus parturient orci fames."]})}),FixedWidthAndHeight=()=>jsxRuntimeExports.jsx(RecordDetailPanel$1,{relations:sampleData,title:"West Tokyo Qualifiers Quarterfinal",detailItems:[{text:"July 27",icon:"date"},{text:"Meiji Jinju Stadium",icon:"location"}],breadcrumbs:["West Tokyo Qualifiers Semifinal","West Tokyo Qualifiers Quarterfinal"],onGoBack:action("back"),classNames:{root:"w-[380px] h-[560px]"},onClose:action("close"),detailPageUrl:"#",children:jsxRuntimeExports.jsxs("p",{children:["Arcu imperdiet sit sit viverra id volutpat commodo."," ",jsxRuntimeExports.jsx("span",{className:"font-bold",children:"Tempor sem malesuada porttitor congue."})," ","Nibh aenean vitae blandit vitae sapien ac varius mattis. Aliquam vitae purus arcu eros enim tempus parturient orci fames. Lorem ipsum odor amet, consectetuer adipiscing elit. Fringilla morbi diam vehicula nostra gravida faucibus consequat sociosqu. Platea taciti ridiculus nostra feugiat hac elit quisque. Magnis risus natoque sagittis finibus ridiculus aenean ac posuere. Euismod ridiculus placerat dictum himenaeos odio aenean magnis magna. Maximus justo curabitur purus porttitor dictum penatibus lacus. Nisl lectus finibus sollicitudin; arcu adipiscing urna fermentum facilisis. Natoque blandit elit viverra penatibus facilisis. Praesent habitant volutpat efficitur in lacus lacinia torquent. Cras ultricies mus ante et dapibus dolor vivamus nunc. Velit interdum litora lobortis ultrices sollicitudin molestie ut."]})}),WithCounts=()=>jsxRuntimeExports.jsx(RecordDetailPanel$1,{relations:sampleData,title:"West Tokyo Qualifiers Quarterfinal",count:!0,detailItems:[{text:"July 27",icon:"date"},{text:"Meiji Jinju Stadium",icon:"location"}],children:jsxRuntimeExports.jsxs("p",{children:["Arcu imperdiet sit sit viverra id volutpat commodo."," ",jsxRuntimeExports.jsx("span",{className:"font-bold",children:"Tempor sem malesuada porttitor congue."})," ","Nibh aenean vitae blandit vitae sapien ac varius mattis. Aliquam vitae purus arcu eros enim tempus parturient orci fames."]})}),UnmountOnClose=()=>{const[Kt,Vt]=reactExports.useState(!0),[Hr,Wr]=reactExports.useState(null);return reactExports.useEffect(()=>{setTimeout(()=>{Wr(jsxRuntimeExports.jsxs("p",{children:["Arcu imperdiet sit sit viverra id volutpat commodo."," ",jsxRuntimeExports.jsx("span",{className:"font-bold",children:"Tempor sem malesuada porttitor congue."})," ","Nibh aenean vitae blandit vitae sapien ac varius mattis. Aliquam vitae purus arcu eros enim tempus parturient orci fames. Lorem ipsum odor amet, consectetuer adipiscing elit. Fringilla morbi diam vehicula nostra gravida faucibus consequat sociosqu. Platea taciti ridiculus nostra feugiat hac elit quisque. Magnis risus natoque sagittis finibus ridiculus aenean ac posuere. Euismod ridiculus placerat dictum himenaeos odio aenean magnis magna. Maximus justo curabitur purus porttitor dictum penatibus lacus. Nisl lectus finibus sollicitudin; arcu adipiscing urna fermentum facilisis. Natoque blandit elit viverra penatibus facilisis. Praesent habitant volutpat efficitur in lacus lacinia torquent. Cras ultricies mus ante et dapibus dolor vivamus nunc. Velit interdum litora lobortis ultrices sollicitudin molestie ut."]}))},200)},[]),Kt&&jsxRuntimeExports.jsx(RecordDetailPanel$1,{relations:sampleData,title:"West Tokyo Qualifiers Quarterfinal",detailItems:[{text:"July 27",icon:"date"},{text:"Meiji Jinju Stadium",icon:"location"}],breadcrumbs:["West Tokyo Qualifiers Semifinal","West Tokyo Qualifiers Quarterfinal"],onGoBack:action("back"),classNames:{root:"w-[380px] h-[560px]"},onClose:()=>{Vt(!1)},detailPageUrl:"#",children:Hr})},NoRelatedRecords=()=>jsxRuntimeExports.jsx(RecordDetailPanel$1,{title:"West Tokyo Qualifiers Quarterfinal",detailItems:[{text:"July 27",icon:"date"},{text:"Meiji Jinju Stadium",icon:"location"}],children:jsxRuntimeExports.jsxs("p",{children:["Arcu imperdiet sit sit viverra id volutpat commodo."," ",jsxRuntimeExports.jsx("span",{className:"font-bold",children:"Tempor sem malesuada porttitor congue."})," ","Nibh aenean vitae blandit vitae sapien ac varius mattis. Aliquam vitae purus arcu eros enim tempus parturient orci fames."]})}),WithLoadingDelay=()=>{const[Kt,Vt]=reactExports.useState(!0);return reactExports.useEffect(()=>{setTimeout(()=>{Vt(!1)},3e3)},[]),jsxRuntimeExports.jsx(RecordDetailPanel$1,{loading:Kt,relations:sampleData,title:"West Tokyo Qualifiers Quarterfinal",detailItems:[{text:"July 27",icon:"date"},{text:"Meiji Jinju Stadium",icon:"location"}],children:jsxRuntimeExports.jsxs("p",{children:["Arcu imperdiet sit sit viverra id volutpat commodo."," ",jsxRuntimeExports.jsx("span",{className:"font-bold",children:"Tempor sem malesuada porttitor congue."})," ","Nibh aenean vitae blandit vitae sapien ac varius mattis. Aliquam vitae purus arcu eros enim tempus parturient orci fames."]})})},Test=()=>jsxRuntimeExports.jsxs(RecordDetailPanel$1,{classNames:{root:"w-[380px] h-[560px]"},detailPageUrl:"#",icon:"location",onClose:action("close"),relations:[{title:"Planification evenement new",items:[{name:"Planification Salton City"}]},{title:"Pays",items:[{name:"tats-Unis (Californie)"}]}],title:"Saltaire",children:[jsxRuntimeExports.jsx(C$g,{items:[{label:"Serial Number",value:"1976"},{label:"Periode Planification",value:"1851-1853"},{label:"Annee Planification",value:"1851"},{label:"Autre Nom Ou Localisation",value:"(prs de Bradford)"},{label:"Autres informations 1",value:"Site du patrimoine mondial."},{label:"Autres informations 2",value:`"Saltaire was built by Titus Salt to replace his woolen mills in Bradford by a single large factory and a new town for the work force. He selected a greenfield site crossed by a canal and railway, and between 1851 and 1871 completed a model industrial town of 820 dwellings and a population of 4,389. The town was endowed with a variety of community buildings and parks, and although the residentiel density of thirty-two houses (170 persons) per acre (eighty houses or 420 persons per hectare) appears crowded by today's standards, it represented a marked improvement on working-class living conditions of the time" (source: Pacione, Michael. 2009. Urban geography: a global perspective. Taylor & Francis. ( la page 166)).`}]}),jsxRuntimeExports.jsxs("p",{className:"text-sm py-4",children:["Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse et mollis magna. Donec sed turpis sit amet purus condimentum sollicitudin id non nulla. Maecenas sit amet tellus fermentum, luctus risus fringilla, sollicitudin nisl. Nulla vitae tortor gravida, facilisis velit at, rhoncus justo. Aenean et hendrerit neque. Aliquam neque nunc, aliquet bibendum facilisis pellentesque, sagittis eu ligula. Suspendisse a nulla eget orci viverra elementum eu eu velit.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Suspendisse sed dolor tincidunt orci consectetur ultricies et eget nisi. Donec cursus cursus fringilla. In turpis quam, aliquet quis elit rhoncus, tempor tristique nisl. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Nunc a sapien quis sapien lacinia posuere in sit amet lectus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Morbi metus felis, scelerisque vitae est varius, interdum posuere lectus. Morbi malesuada sagittis molestie. Pellentesque auctor ipsum et orci efficitur commodo. Etiam elit dui, suscipit eu consectetur a, hendrerit in urna. Quisque vitae sapien enim. Fusce ornare eget eros maximus ultrices. Sed dignissim odio quis eros accumsan, at auctor metus tempus.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Sed ut faucibus ante, vitae maximus tellus. Sed non mi sit amet lacus hendrerit accumsan a in lacus. Donec gravida varius nulla et scelerisque. Proin porttitor, nulla eget aliquet congue, magna libero tempor orci, quis laoreet ipsum nisi ut odio. Integer dignissim volutpat pretium. Vivamus lacus ante, scelerisque et metus et, imperdiet ornare ex. Nam condimentum, odio in feugiat accumsan, diam ligula varius velit, quis malesuada felis augue at tellus. Aliquam rhoncus nisl eu nulla laoreet aliquam. Donec lectus arcu, ullamcorper sit amet lacinia sed, pulvinar et nibh. In iaculis felis congue diam feugiat pharetra. Nam non arcu arcu. Fusce ex felis, porttitor sit amet metus quis, ornare bibendum quam. Quisque at mauris urna. Praesent feugiat luctus interdum.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Vivamus sed ultrices nunc, et auctor ante. Fusce sit amet porta lectus. Aliquam dapibus vitae dui commodo ornare. In efficitur, nisi sit amet tempor vehicula, nisi lectus maximus libero, sed dapibus massa augue nec nulla. Vestibulum sed tortor euismod, malesuada lacus quis, aliquam tellus. Proin sodales turpis velit, eget placerat dui maximus quis. Donec vulputate libero et ultrices tincidunt. Curabitur placerat placerat quam, sit amet iaculis ex pulvinar in. Nulla tincidunt mattis ex, eget varius sem blandit eu. Cras vulputate, massa ac lacinia hendrerit, purus libero sodales massa, in varius nisl leo et dui. In hac habitasse platea dictumst.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Praesent tempor placerat dignissim. Vivamus mi lorem, auctor at ipsum bibendum, semper pellentesque ante. Donec convallis feugiat arcu a volutpat. Suspendisse eu felis est. Nam fringilla ipsum vulputate justo commodo, eget pretium ante consequat. Donec ullamcorper arcu eu vestibulum finibus. Aliquam massa metus, ullamcorper at euismod vel, maximus ut neque. In a est a nibh auctor condimentum mattis quis mi. Nunc accumsan malesuada nisi non viverra. Mauris id eros magna. Nam pulvinar ullamcorper justo ac finibus. Mauris faucibus sapien eu ex porta, ut condimentum lectus accumsan. Nullam id ex ac nunc vehicula volutpat eu eget mauris. Etiam vitae bibendum eros."]})]});Default.__docgenInfo={description:"",methods:[],displayName:"Default"};WithViewDetail.__docgenInfo={description:"",methods:[],displayName:"WithViewDetail"};WithIcon.__docgenInfo={description:"",methods:[],displayName:"WithIcon"};WithClose.__docgenInfo={description:"",methods:[],displayName:"WithClose"};WithBreadcrumbs.__docgenInfo={description:"",methods:[],displayName:"WithBreadcrumbs"};FixedWidthAndHeight.__docgenInfo={description:"",methods:[],displayName:"FixedWidthAndHeight"};WithCounts.__docgenInfo={description:"",methods:[],displayName:"WithCounts"};UnmountOnClose.__docgenInfo={description:"",methods:[],displayName:"UnmountOnClose"};NoRelatedRecords.__docgenInfo={description:"",methods:[],displayName:"NoRelatedRecords"};WithLoadingDelay.__docgenInfo={description:"",methods:[],displayName:"WithLoadingDelay"};Test.__docgenInfo={description:"",methods:[],displayName:"Test"};var Fc,Bc,jc;Default.parameters={...Default.parameters,docs:{...(Fc=Default.parameters)==null?void 0:Fc.docs,source:{originalSource:`() => <RecordDetailPanel relations={sampleData} title='West Tokyo Qualifiers Quarterfinal' detailItems={[{
  text: 'July 27',
  icon: 'date'
}, {
  text: 'Meiji Jinju Stadium',
  icon: 'location'
}]}>
    <p>
      Arcu imperdiet sit sit viverra id volutpat commodo.
      {' '}
      <span className='font-bold'>Tempor sem malesuada porttitor congue.</span>
      {' '}
      Nibh aenean vitae blandit vitae sapien ac varius mattis.
      Aliquam vitae purus arcu eros enim tempus parturient orci fames.
    </p>
  </RecordDetailPanel>`,...(jc=(Bc=Default.parameters)==null?void 0:Bc.docs)==null?void 0:jc.source}}};var Uc,Hc,qc;WithViewDetail.parameters={...WithViewDetail.parameters,docs:{...(Uc=WithViewDetail.parameters)==null?void 0:Uc.docs,source:{originalSource:`() => <RecordDetailPanel relations={sampleData} detailPageUrl='#' title='West Tokyo Qualifiers Quarterfinal' detailItems={[{
  text: 'July 27',
  icon: 'date'
}, {
  text: 'Meiji Jinju Stadium',
  icon: 'location'
}]}>
    <p>
      Arcu imperdiet sit sit viverra id volutpat commodo.
      {' '}
      <span className='font-bold'>Tempor sem malesuada porttitor congue.</span>
      {' '}
      Nibh aenean vitae blandit vitae sapien ac varius mattis.
      Aliquam vitae purus arcu eros enim tempus parturient orci fames.
    </p>
  </RecordDetailPanel>`,...(qc=(Hc=WithViewDetail.parameters)==null?void 0:Hc.docs)==null?void 0:qc.source}}};var zc,Vc,Wc;WithIcon.parameters={...WithIcon.parameters,docs:{...(zc=WithIcon.parameters)==null?void 0:zc.docs,source:{originalSource:`() => <RecordDetailPanel relations={sampleData} title='West Tokyo Qualifiers Quarterfinal' detailItems={[{
  text: 'July 27',
  icon: 'date'
}, {
  text: 'Meiji Jinju Stadium',
  icon: 'location'
}]} icon='participants'>
    <p>
      Arcu imperdiet sit sit viverra id volutpat commodo.
      {' '}
      <span className='font-bold'>Tempor sem malesuada porttitor congue.</span>
      {' '}
      Nibh aenean vitae blandit vitae sapien ac varius mattis.
      Aliquam vitae purus arcu eros enim tempus parturient orci fames.
    </p>
  </RecordDetailPanel>`,...(Wc=(Vc=WithIcon.parameters)==null?void 0:Vc.docs)==null?void 0:Wc.source}}};var Gc,Kc,Yc;WithClose.parameters={...WithClose.parameters,docs:{...(Gc=WithClose.parameters)==null?void 0:Gc.docs,source:{originalSource:`() => <RecordDetailPanel relations={sampleData} title='West Tokyo Qualifiers Quarterfinal' detailItems={[{
  text: 'July 27',
  icon: 'date'
}, {
  text: 'Meiji Jinju Stadium',
  icon: 'location'
}]} onClose={action('close')}>
    <p>
      Arcu imperdiet sit sit viverra id volutpat commodo.
      {' '}
      <span className='font-bold'>Tempor sem malesuada porttitor congue.</span>
      {' '}
      Nibh aenean vitae blandit vitae sapien ac varius mattis.
      Aliquam vitae purus arcu eros enim tempus parturient orci fames.
    </p>
  </RecordDetailPanel>`,...(Yc=(Kc=WithClose.parameters)==null?void 0:Kc.docs)==null?void 0:Yc.source}}};var Xc,Zc,Qc;WithBreadcrumbs.parameters={...WithBreadcrumbs.parameters,docs:{...(Xc=WithBreadcrumbs.parameters)==null?void 0:Xc.docs,source:{originalSource:`() => <RecordDetailPanel relations={sampleData} title='West Tokyo Qualifiers Quarterfinal' detailItems={[{
  text: 'July 27',
  icon: 'date'
}, {
  text: 'Meiji Jinju Stadium',
  icon: 'location'
}]} breadcrumbs={['West Tokyo Qualifiers Semifinal', 'West Tokyo Qualifiers Quarterfinal']} onGoBack={action('back')}>
    <p>
      Arcu imperdiet sit sit viverra id volutpat commodo.
      {' '}
      <span className='font-bold'>Tempor sem malesuada porttitor congue.</span>
      {' '}
      Nibh aenean vitae blandit vitae sapien ac varius mattis.
      Aliquam vitae purus arcu eros enim tempus parturient orci fames.
    </p>
  </RecordDetailPanel>`,...(Qc=(Zc=WithBreadcrumbs.parameters)==null?void 0:Zc.docs)==null?void 0:Qc.source}}};var Jc,eu,tu;FixedWidthAndHeight.parameters={...FixedWidthAndHeight.parameters,docs:{...(Jc=FixedWidthAndHeight.parameters)==null?void 0:Jc.docs,source:{originalSource:`() => <RecordDetailPanel relations={sampleData} title='West Tokyo Qualifiers Quarterfinal' detailItems={[{
  text: 'July 27',
  icon: 'date'
}, {
  text: 'Meiji Jinju Stadium',
  icon: 'location'
}]} breadcrumbs={['West Tokyo Qualifiers Semifinal', 'West Tokyo Qualifiers Quarterfinal']} onGoBack={action('back')} classNames={{
  root: 'w-[380px] h-[560px]'
}} onClose={action('close')} detailPageUrl='#'>
    <p>
      Arcu imperdiet sit sit viverra id volutpat commodo.
      {' '}
      <span className='font-bold'>Tempor sem malesuada porttitor congue.</span>
      {' '}
      Nibh aenean vitae blandit vitae sapien ac varius mattis.
      Aliquam vitae purus arcu eros enim tempus parturient orci fames.
      Lorem ipsum odor amet, consectetuer adipiscing elit.
      Fringilla morbi diam vehicula nostra gravida faucibus consequat sociosqu.
      Platea taciti ridiculus nostra feugiat hac elit quisque.
      Magnis risus natoque sagittis finibus ridiculus aenean ac posuere.
      Euismod ridiculus placerat dictum himenaeos odio aenean magnis magna.
      Maximus justo curabitur purus porttitor dictum penatibus lacus. Nisl lectus finibus sollicitudin;
      arcu adipiscing urna fermentum facilisis. Natoque blandit elit viverra penatibus facilisis.
      Praesent habitant volutpat efficitur in lacus lacinia torquent.
      Cras ultricies mus ante et dapibus dolor vivamus nunc.
      Velit interdum litora lobortis ultrices sollicitudin molestie ut.
    </p>
  </RecordDetailPanel>`,...(tu=(eu=FixedWidthAndHeight.parameters)==null?void 0:eu.docs)==null?void 0:tu.source}}};var ru,nu,iu;WithCounts.parameters={...WithCounts.parameters,docs:{...(ru=WithCounts.parameters)==null?void 0:ru.docs,source:{originalSource:`() => <RecordDetailPanel relations={sampleData} title='West Tokyo Qualifiers Quarterfinal' count detailItems={[{
  text: 'July 27',
  icon: 'date'
}, {
  text: 'Meiji Jinju Stadium',
  icon: 'location'
}]}>
    <p>
      Arcu imperdiet sit sit viverra id volutpat commodo.
      {' '}
      <span className='font-bold'>Tempor sem malesuada porttitor congue.</span>
      {' '}
      Nibh aenean vitae blandit vitae sapien ac varius mattis.
      Aliquam vitae purus arcu eros enim tempus parturient orci fames.
    </p>
  </RecordDetailPanel>`,...(iu=(nu=WithCounts.parameters)==null?void 0:nu.docs)==null?void 0:iu.source}}};var ou,su,au;UnmountOnClose.parameters={...UnmountOnClose.parameters,docs:{...(ou=UnmountOnClose.parameters)==null?void 0:ou.docs,source:{originalSource:`() => {
  const [show, setShow] = useState(true);
  const [content, setContent] = useState(null);
  useEffect(() => {
    setTimeout(() => {
      setContent(<p>
          Arcu imperdiet sit sit viverra id volutpat commodo.
          {' '}
          <span className='font-bold'>Tempor sem malesuada porttitor congue.</span>
          {' '}
          Nibh aenean vitae blandit vitae sapien ac varius mattis.
          Aliquam vitae purus arcu eros enim tempus parturient orci fames.
          Lorem ipsum odor amet, consectetuer adipiscing elit.
          Fringilla morbi diam vehicula nostra gravida faucibus consequat sociosqu.
          Platea taciti ridiculus nostra feugiat hac elit quisque.
          Magnis risus natoque sagittis finibus ridiculus aenean ac posuere.
          Euismod ridiculus placerat dictum himenaeos odio aenean magnis magna.
          Maximus justo curabitur purus porttitor dictum penatibus lacus. Nisl lectus finibus sollicitudin;
          arcu adipiscing urna fermentum facilisis. Natoque blandit elit viverra penatibus facilisis.
          Praesent habitant volutpat efficitur in lacus lacinia torquent.
          Cras ultricies mus ante et dapibus dolor vivamus nunc.
          Velit interdum litora lobortis ultrices sollicitudin molestie ut.
        </p>);
    }, 200);
  }, []);
  return show && <RecordDetailPanel relations={sampleData} title='West Tokyo Qualifiers Quarterfinal' detailItems={[{
    text: 'July 27',
    icon: 'date'
  }, {
    text: 'Meiji Jinju Stadium',
    icon: 'location'
  }]} breadcrumbs={['West Tokyo Qualifiers Semifinal', 'West Tokyo Qualifiers Quarterfinal']} onGoBack={action('back')} classNames={{
    root: 'w-[380px] h-[560px]'
  }} onClose={() => {
    setShow(false);
  }} detailPageUrl='#'>
    {content}
  </RecordDetailPanel>;
}`,...(au=(su=UnmountOnClose.parameters)==null?void 0:su.docs)==null?void 0:au.source}}};var lu,cu,uu;NoRelatedRecords.parameters={...NoRelatedRecords.parameters,docs:{...(lu=NoRelatedRecords.parameters)==null?void 0:lu.docs,source:{originalSource:`() => <RecordDetailPanel title='West Tokyo Qualifiers Quarterfinal' detailItems={[{
  text: 'July 27',
  icon: 'date'
}, {
  text: 'Meiji Jinju Stadium',
  icon: 'location'
}]}>
    <p>
      Arcu imperdiet sit sit viverra id volutpat commodo.
      {' '}
      <span className='font-bold'>Tempor sem malesuada porttitor congue.</span>
      {' '}
      Nibh aenean vitae blandit vitae sapien ac varius mattis.
      Aliquam vitae purus arcu eros enim tempus parturient orci fames.
    </p>
  </RecordDetailPanel>`,...(uu=(cu=NoRelatedRecords.parameters)==null?void 0:cu.docs)==null?void 0:uu.source}}};var du,hu,fu;WithLoadingDelay.parameters={...WithLoadingDelay.parameters,docs:{...(du=WithLoadingDelay.parameters)==null?void 0:du.docs,source:{originalSource:`() => {
  const [loading, setLoading] = useState(true);
  useEffect(() => {
    setTimeout(() => {
      setLoading(false);
    }, 3000);
  }, []);
  return <RecordDetailPanel loading={loading} relations={sampleData} title='West Tokyo Qualifiers Quarterfinal' detailItems={[{
    text: 'July 27',
    icon: 'date'
  }, {
    text: 'Meiji Jinju Stadium',
    icon: 'location'
  }]}>
      <p>
        Arcu imperdiet sit sit viverra id volutpat commodo.
        {' '}
        <span className='font-bold'>Tempor sem malesuada porttitor congue.</span>
        {' '}
        Nibh aenean vitae blandit vitae sapien ac varius mattis.
        Aliquam vitae purus arcu eros enim tempus parturient orci fames.
      </p>
    </RecordDetailPanel>;
}`,...(fu=(hu=WithLoadingDelay.parameters)==null?void 0:hu.docs)==null?void 0:fu.source}}};var pu,mu,gu;Test.parameters={...Test.parameters,docs:{...(pu=Test.parameters)==null?void 0:pu.docs,source:{originalSource:`() => <RecordDetailPanel classNames={{
  root: 'w-[380px] h-[560px]'
}} detailPageUrl='#' icon='location' onClose={action('close')} relations={[{
  title: 'Planification evenement new',
  items: [{
    name: 'Planification Salton City'
  }]
}, {
  title: 'Pays',
  items: [{
    name: 'tats-Unis (Californie)'
  }]
}]} title='Saltaire'>
    <KeyValueList items={[{
    label: 'Serial Number',
    value: '1976'
  }, {
    label: 'Periode Planification',
    value: '1851-1853'
  }, {
    label: 'Annee Planification',
    value: '1851'
  }, {
    label: 'Autre Nom Ou Localisation',
    value: '(prs de Bradford)'
  }, {
    label: 'Autres informations 1',
    value: 'Site du patrimoine mondial.'
  }, {
    label: 'Autres informations 2',
    value: '"Saltaire was built by Titus Salt to replace his woolen mills in Bradford by a single large factory and a new town for the work force. He selected a greenfield site crossed by a canal and railway, and between 1851 and 1871 completed a model industrial town of 820 dwellings and a population of 4,389. The town was endowed with a variety of community buildings and parks, and although the residentiel density of thirty-two houses (170 persons) per acre (eighty houses or 420 persons per hectare) appears crowded by today\\'s standards, it represented a marked improvement on working-class living conditions of the time" (source: Pacione, Michael. 2009. Urban geography: a global perspective. Taylor & Francis. ( la page 166)).'
  }]} />
    <p className='text-sm py-4'>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse et mollis magna. Donec sed turpis sit amet purus condimentum sollicitudin id non nulla. Maecenas sit amet tellus fermentum, luctus risus fringilla, sollicitudin nisl. Nulla vitae tortor gravida, facilisis velit at, rhoncus justo. Aenean et hendrerit neque. Aliquam neque nunc, aliquet bibendum facilisis pellentesque, sagittis eu ligula. Suspendisse a nulla eget orci viverra elementum eu eu velit.
      <br />
      <br />
      Suspendisse sed dolor tincidunt orci consectetur ultricies et eget nisi. Donec cursus cursus fringilla. In turpis quam, aliquet quis elit rhoncus, tempor tristique nisl. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Nunc a sapien quis sapien lacinia posuere in sit amet lectus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Morbi metus felis, scelerisque vitae est varius, interdum posuere lectus. Morbi malesuada sagittis molestie. Pellentesque auctor ipsum et orci efficitur commodo. Etiam elit dui, suscipit eu consectetur a, hendrerit in urna. Quisque vitae sapien enim. Fusce ornare eget eros maximus ultrices. Sed dignissim odio quis eros accumsan, at auctor metus tempus.
      <br />
      <br />
      Sed ut faucibus ante, vitae maximus tellus. Sed non mi sit amet lacus hendrerit accumsan a in lacus. Donec gravida varius nulla et scelerisque. Proin porttitor, nulla eget aliquet congue, magna libero tempor orci, quis laoreet ipsum nisi ut odio. Integer dignissim volutpat pretium. Vivamus lacus ante, scelerisque et metus et, imperdiet ornare ex. Nam condimentum, odio in feugiat accumsan, diam ligula varius velit, quis malesuada felis augue at tellus. Aliquam rhoncus nisl eu nulla laoreet aliquam. Donec lectus arcu, ullamcorper sit amet lacinia sed, pulvinar et nibh. In iaculis felis congue diam feugiat pharetra. Nam non arcu arcu. Fusce ex felis, porttitor sit amet metus quis, ornare bibendum quam. Quisque at mauris urna. Praesent feugiat luctus interdum.
      <br />
      <br />
      Vivamus sed ultrices nunc, et auctor ante. Fusce sit amet porta lectus. Aliquam dapibus vitae dui commodo ornare. In efficitur, nisi sit amet tempor vehicula, nisi lectus maximus libero, sed dapibus massa augue nec nulla. Vestibulum sed tortor euismod, malesuada lacus quis, aliquam tellus. Proin sodales turpis velit, eget placerat dui maximus quis. Donec vulputate libero et ultrices tincidunt. Curabitur placerat placerat quam, sit amet iaculis ex pulvinar in. Nulla tincidunt mattis ex, eget varius sem blandit eu. Cras vulputate, massa ac lacinia hendrerit, purus libero sodales massa, in varius nisl leo et dui. In hac habitasse platea dictumst.
      <br />
      <br />
      Praesent tempor placerat dignissim. Vivamus mi lorem, auctor at ipsum bibendum, semper pellentesque ante. Donec convallis feugiat arcu a volutpat. Suspendisse eu felis est. Nam fringilla ipsum vulputate justo commodo, eget pretium ante consequat. Donec ullamcorper arcu eu vestibulum finibus. Aliquam massa metus, ullamcorper at euismod vel, maximus ut neque. In a est a nibh auctor condimentum mattis quis mi. Nunc accumsan malesuada nisi non viverra. Mauris id eros magna. Nam pulvinar ullamcorper justo ac finibus. Mauris faucibus sapien eu ex porta, ut condimentum lectus accumsan. Nullam id ex ac nunc vehicula volutpat eu eget mauris. Etiam vitae bibendum eros.
    </p>
  </RecordDetailPanel>`,...(gu=(mu=Test.parameters)==null?void 0:mu.docs)==null?void 0:gu.source}}};const __namedExportsOrder=["Default","WithViewDetail","WithIcon","WithClose","WithBreadcrumbs","FixedWidthAndHeight","WithCounts","UnmountOnClose","NoRelatedRecords","WithLoadingDelay","Test"];export{Default,FixedWidthAndHeight,NoRelatedRecords,Test,UnmountOnClose,WithBreadcrumbs,WithClose,WithCounts,WithIcon,WithLoadingDelay,WithViewDetail,__namedExportsOrder,RecordDetailPanel_stories as default};
