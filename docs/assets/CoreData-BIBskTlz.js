import{r as a}from"./index-C0dDX-lL.js";const g=a.createContext({baseUrl:void 0,projectIds:void 0}),P=(n,e,s,t,r={})=>{const i=`${n}/core_data/public/v1/${e}/${s}/${t}`,u=new URLSearchParams(r);return`${i}?${u}`},S=(n,e,s,t={})=>{const r=`${n}/core_data/public/v1/${e}/${s}`,i=new URLSearchParams(t);return`${r}?${i}`},o={buildNestedUrl:P,buildUrl:S};class d{constructor(e,s){if(this.constructor===d)throw new TypeError('Abstract class "BaseService" cannot be instantiated directly.');this.baseUrl=e,this.projectIds=s}fetchOne(e,s={}){const t=o.buildUrl(this.baseUrl,this.getRoute(),e,this.getSearchParams(s));return fetch(t).then(r=>r.json())}fetchRelatedEvents(e,s={}){const t=o.buildNestedUrl(this.baseUrl,this.getRoute(),e,"events",this.getSearchParams(s));return fetch(t).then(r=>r.json())}fetchRelatedItems(e,s={}){const t=o.buildNestedUrl(this.baseUrl,this.getRoute(),e,"items",this.getSearchParams(s));return fetch(t).then(r=>r.json())}fetchRelatedManifests(e,s={}){const t=o.buildNestedUrl(this.baseUrl,this.getRoute(),e,"manifests",this.getSearchParams(s));return fetch(t).then(r=>r.json())}fetchRelatedMedia(e,s={}){const t=o.buildNestedUrl(this.baseUrl,this.getRoute(),e,"media_contents",this.getSearchParams(s));return fetch(t).then(r=>r.json())}fetchRelatedOrganizations(e,s={}){const t=o.buildNestedUrl(this.baseUrl,this.getRoute(),e,"organizations",this.getSearchParams(s));return fetch(t).then(r=>r.json())}fetchRelatedPeople(e,s={}){const t=o.buildNestedUrl(this.baseUrl,this.getRoute(),e,"people",this.getSearchParams(s));return fetch(t).then(r=>r.json())}fetchRelatedPlaces(e,s={}){const t=o.buildNestedUrl(this.baseUrl,this.getRoute(),e,"places",this.getSearchParams(s));return fetch(t).then(r=>r.json())}fetchRelatedTaxonomies(e,s={}){const t=o.buildNestedUrl(this.baseUrl,this.getRoute(),e,"taxonomies",this.getSearchParams(s));return fetch(t).then(r=>r.json())}getRoute(){}getSearchParams(e){return{project_ids:this.projectIds,...e}}}class j extends d{getRoute(){return"events"}}class v extends d{getRoute(){return"places"}}const x=1,N=(n,e={},s=[])=>{const[t,r]=a.useState(),[i,u]=a.useState(!1),[c,b]=a.useState(x);a.useContext(g);const h=a.useMemo(()=>(t==null?void 0:t.list)||{},[t]),f=a.useMemo(()=>c===h.pages,[c,h.pages]),U=a.useMemo(()=>c===1,[c]),m=a.useCallback(()=>b(l=>l+1),[]),p=a.useCallback(l=>b(l),[]),R=a.useCallback(()=>b(l=>l-1),[]);return a.useEffect(()=>{u(!0),n({...e,page:c}).then(l=>r(l)).finally(()=>u(!1))},[...s,c]),{count:h.count,data:t,isNextDisabled:f,isPreviousDisabled:U,loading:i,onNext:m,onPageChange:p,onPrevious:R,page:c,pages:h.pages}},$=()=>{const{baseUrl:n,projectIds:e}=a.useContext(g);return new j(n,e)},E=()=>{const{baseUrl:n,projectIds:e}=a.useContext(g);return new v(n,e)};export{g as C,N as a,E as b,$ as u};
