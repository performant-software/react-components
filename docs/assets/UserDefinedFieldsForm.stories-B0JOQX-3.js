import{r as y,j as n}from"./iframe-DlkFaX8z.js";import{F as l}from"./Form-CsBXw-n-.js";import{v as f,A as C}from"./index.es99-BWhpmzPg.js";import{f as F}from"./index.es28-DMkb6T92.js";import{_ as D,U as x}from"./UserDefinedFields-CvfBlci9.js";import"./extends-CCbyfPlC.js";import"./inheritsLoose-1HkgTRWY.js";import"./setPrototypeOf-DgZC2w_0.js";import"./getElementType-DMivt9zn.js";import"./Button-DiWRmrG2.js";import"./Icon-DIroxkwR.js";import"./Label-DBlcapIP.js";import"./ModernAutoControlledComponent-fLFZ-Jlb.js";import"./assertThisInitialized-B9jnkVVz.js";import"./includes-DG0_oYZ4.js";import"./toFinite-BMffxGsR.js";import"./forEach-TObsvMxQ.js";import"./Dimmer-Bt5A9HuE.js";import"./Portal-DOieImQz.js";import"./keyboardKey-DhEzKjiY.js";import"./map-CS-mLOkU.js";import"./Checkbox-LfsPLwOo.js";import"./_baseSet-BlZTtD8w.js";import"./_baseAssignValue-BBmoV9w8.js";import"./Dropdown-CTwKZmNK.js";import"./without-DJhzUgq0.js";import"./isArrayLikeObject-DYLPBMdc.js";import"./isEmpty-Ckntcdr7.js";import"./deburr-C7CGyvmO.js";import"./index-DgX0Vt3E.js";import"./_arrayReduce-CrxnWFSq.js";import"./filter-CgxhgZfY.js";import"./Input-DE0eqoBP.js";import"./index.es35-NGGuPWEW.js";import"./index.es33-DtPjK9u-.js";import"./index.es29-8Ge-CBmt.js";import"./index.es12-D5UKL4Jz.js";import"./index.es3-0X2a2fub.js";import"./useDrop-ClcA2lXk.js";import"./index-CWxjPE5V.js";import"./index.es26-DOmo7jf1.js";import"./index.es15-bsM45xBi.js";class j{toData(r){return{id:r.id,accuracy:r.accuracy,description:r.description,end_date:r.endDate,range:r.range,start_date:r.startDate,_destroy:r._destroy}}toFuzzyDate(r){return r?{id:r.id,accuracy:r.accuracy,description:r.description,endDate:r.end_date,range:r.range,startDate:r.start_date,_destroy:r._destroy}:null}toPayload(r,_){const p=r[_];return p?{[_]:this.toData(p)}:null}}const h=new j,w={boolean:"Boolean",date:"Date",fuzzyDate:"FuzzyDate",number:"Number",richText:"RichText",select:"Select",string:"String",text:"Text"},T={DataTypes:w},{DataTypes:c}=T,b=t=>{const[r,_]=y.useState(t.fields||[]),p=y.useCallback(e=>`user_defined[${e.uuid}]`,[]),s=y.useCallback(e=>t.isError(p(e)),[p,t.isError]),m=y.useCallback((e,o)=>{t.onChange({...t.data,[e.uuid]:o}),t.onClearValidationError&&t.onClearValidationError(p(e))},[p,t.data,t.onChange,t.onClearValidationError]),q=y.useCallback((e,o)=>{let u;const i=t.data&&t.data[e.uuid];return e.data_type===c.string&&(u=n.jsx(l.Input,{error:s(e),label:e.column_name,required:e.required,onChange:(a,{value:d})=>m(e,d),value:i||""},o)),e.data_type===c.number&&(u=n.jsx(l.Input,{error:s(e),label:e.column_name,required:e.required,onChange:(a,{value:d})=>m(e,d),value:i||0,type:"number"},o)),e.data_type===c.select&&(u=n.jsx(l.Dropdown,{clearable:!0,error:s(e),label:e.column_name,multiple:e.allow_multiple,required:e.required,options:D.map(e.options,a=>({key:a,value:a,text:a})),onChange:(a,{value:d})=>m(e,d),selectOnBlur:!1,selection:!0,value:e.allow_multiple?i||[]:i||""},o)),e.data_type===c.text&&(u=n.jsx(l.TextArea,{error:s(e),label:e.column_name,required:e.required,onChange:(a,{value:d})=>m(e,d),value:i||""},o)),e.data_type===c.date&&(u=n.jsx(l.Input,{error:s(e),label:e.column_name,required:e.required,children:n.jsx(f,{onChange:a=>m(e,a&&a.toISOString()),value:i&&new Date(i)})},o)),e.data_type===c.fuzzyDate&&(u=n.jsx(l.Input,{error:s(e),label:e.column_name,required:e.required,children:n.jsx(C,{centered:!1,date:h.toFuzzyDate(i)||{},onChange:a=>m(e,h.toData(a)),title:e.column_name})},o)),e.data_type===c.boolean&&(u=n.jsx(l.Checkbox,{checked:!!i,error:s(e),label:e.column_name,onChange:(a,{checked:d})=>m(e,d)},o)),e.data_type===c.richText&&(u=n.jsx(l.Input,{error:s(e),label:e.column_name,required:e.required,children:n.jsx(F,{onChange:a=>m(e,a),value:i})},o)),u},[t.data,s,m]);return y.useEffect(()=>{if(t.fields)return;const e={defineable_id:t.defineableId,defineable_type:t.defineableType,per_page:0,required:t.required,sort_by:"order",table_name:t.tableName};x.fetchAll(e).then(({data:o})=>_(o.user_defined_fields))},[]),n.jsx(n.Fragment,{children:D.map(r,q.bind(void 0))})};b.__docgenInfo={description:"",methods:[],displayName:"UserDefinedFieldsForm",props:{data:{required:!0,flowType:{name:"any"},description:""},defineableId:{required:!1,flowType:{name:"number"},description:""},defineableType:{required:!1,flowType:{name:"string"},description:""},fields:{required:!1,flowType:{name:"Array"},description:""},isError:{required:!0,flowType:{name:"signature",type:"function",raw:"(key: string) => boolean",signature:{arguments:[{name:"key",type:{name:"string"}}],return:{name:"boolean"}}},description:""},onChange:{required:!0,flowType:{name:"signature",type:"function",raw:"(obj: any) => void",signature:{arguments:[{name:"obj",type:{name:"any"}}],return:{name:"void"}}},description:""},onClearValidationError:{required:!0,flowType:{name:"signature",type:"function",raw:"(...keys: Array<string>) => void",signature:{arguments:[{name:"keys",type:{name:"Array",elements:[{name:"string"}],raw:"Array<string>"},rest:!0}],return:{name:"void"}}},description:""},required:{required:!1,flowType:{name:"boolean"},description:""},tableName:{required:!1,flowType:{name:"string"},description:""}}};const _e={title:"Components/User Defined Fields/UserDefinedFieldsForm",component:b},g=()=>{const[t,r]=y.useState({});return n.jsx(l,{children:n.jsx(b,{data:t,isError:()=>!1,onChange:r})})};g.__docgenInfo={description:"",methods:[],displayName:"Default"};g.parameters={...g.parameters,docs:{...g.parameters?.docs,source:{originalSource:`() => {
  const [data, setData] = useState({});
  return <Form>
      <UserDefinedFieldsForm data={data} isError={() => false} onChange={setData} />
    </Form>;
}`,...g.parameters?.docs?.source}}};const be=["Default"];export{g as Default,be as __namedExportsOrder,_e as default};
