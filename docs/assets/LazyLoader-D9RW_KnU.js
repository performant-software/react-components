import{_ as S}from"./extends-CCbyfPlC.js";import{_ as Y}from"./inheritsLoose-1HkgTRWY.js";import{m as L,a as _,g as $}from"./getElementType-DMFQxvJl.js";import{f as k}from"./forEach-t8Zrn7U4.js";import{w as E}from"./without-B65ne6dp.js";import{i as I}from"./includes-X8sRVAnC.js";import{r as U,R as y,j as z}from"./iframe-FoyjJkLC.js";import{e as R}from"./index-B2V_OAJb.js";import{i as C,R as M}from"./Portal-4bHDrQld.js";import{I as D}from"./Label-CV3ai1CB.js";import{L as j}from"./Loader-BDL_g7LH.js";const N=function(o){return typeof o=="number"||typeof o=="string"?[o,o]:o};var B=function(o){Y(b,o);function b(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=o.call.apply(o,[this].concat(n))||this,e.calculations={bottomPassed:!1,bottomVisible:!1,fits:!1,passing:!1,offScreen:!1,onScreen:!1,topPassed:!1,topVisible:!1},e.firedCallbacks=[],e.ref=U.createRef(),e.fire=function(s,i,l){var r=s.callback,f=s.name;l===void 0&&(l=!1);var p=e.props,d=p.continuous,v=p.once,m=e.calculations[i]!==l,u=d||e.calculations[i]!==e.oldCalculations[i];m&&u&&e.execute(r,f),v||(e.firedCallbacks=E(e.firedCallbacks,f))},e.handleUpdate=function(){e.ticking||(e.ticking=!0,e.frameId=requestAnimationFrame(e.update))},e.update=function(){if(e.mounted){e.ticking=!1,e.oldCalculations=e.calculations,e.calculations=e.computeCalculations(),e.pageYOffset=e.getPageYOffset();var s=e.props,i=s.onBottomPassed,l=s.onBottomPassedReverse,r=s.onBottomVisible,f=s.onBottomVisibleReverse,p=s.onPassing,d=s.onPassingReverse,v=s.onTopPassed,m=s.onTopPassedReverse,u=s.onTopVisible,O=s.onTopVisibleReverse,x=s.onOffScreen,V=s.onOnScreen,g=s.updateOn,T={bottomPassed:{callback:i,name:"onBottomPassed"},bottomVisible:{callback:r,name:"onBottomVisible"},passing:{callback:p,name:"onPassing"},offScreen:{callback:x,name:"onOffScreen"},onScreen:{callback:V,name:"onOnScreen"},topPassed:{callback:v,name:"onTopPassed"},topVisible:{callback:u,name:"onTopVisible"}},w={bottomPassed:{callback:l,name:"onBottomPassedReverse"},bottomVisible:{callback:f,name:"onBottomVisibleReverse"},passing:{callback:d,name:"onPassingReverse"},topPassed:{callback:m,name:"onTopPassedReverse"},topVisible:{callback:O,name:"onTopVisibleReverse"}};L(e.props,"onUpdate",null,S({},e.props,{calculations:e.calculations})),e.fireOnPassed(),k(w,function(h,P){return e.fire(h,P,!0)}),k(T,function(h,P){return e.fire(h,P)}),g==="repaint"&&e.handleUpdate()}},e}var c=b.prototype;return c.componentDidMount=function(){if(this.mounted=!0,!!C()){var t=this.props,n=t.context,a=t.fireOnMount,s=t.updateOn;this.pageYOffset=this.getPageYOffset(),this.attachHandlers(n,s),a&&this.update()}},c.componentDidUpdate=function(t){var n=t.continuous!==this.props.continuous||t.once!==this.props.once||t.updateOn!==this.props.updateOn;n&&(this.firedCallbacks=[]),(t.context!==this.props.context||t.updateOn!==this.props.updateOn)&&(this.unattachHandlers(t.context),this.attachHandlers(this.props.context,this.props.updateOn))},c.componentWillUnmount=function(){var t=this.props.context;this.unattachHandlers(t),this.mounted=!1},c.attachHandlers=function(t,n){if(n==="events"){t&&(R.sub("resize",this.handleUpdate,{target:t}),R.sub("scroll",this.handleUpdate,{target:t}));return}this.handleUpdate()},c.unattachHandlers=function(t){t&&(R.unsub("resize",this.handleUpdate,{target:t}),R.unsub("scroll",this.handleUpdate,{target:t})),this.frameId&&cancelAnimationFrame(this.frameId)},c.execute=function(t,n){var a=this.props.continuous;t&&(!a&&I(this.firedCallbacks,n)||(t(null,S({},this.props,{calculations:this.calculations})),this.firedCallbacks.push(n)))},c.fireOnPassed=function(){var t=this,n=this.calculations,a=n.percentagePassed,s=n.pixelsPassed,i=this.props.onPassed;k(i,function(l,r){var f=Number(r);if(f&&s>=f){t.execute(l,r);return}var p=(""+r).match(/^(\d+)%$/);if(p){var d=Number(p[1])/100;a>=d&&t.execute(l,r)}})},c.computeCalculations=function(){var t=this.props.offset,n=this.ref.current.getBoundingClientRect(),a=n.bottom,s=n.height,i=n.top,l=n.width,r=N(t),f=r[0],p=r[1],d=this.getPageYOffset(),v=d>this.pageYOffset?"down":"up",m=i<f,u=a<p,O=u?0:Math.max(i*-1,0),x=O/s,V=a>=p&&a<=window.innerHeight,g=i>=f&&i<=window.innerHeight,T=g&&V,w=m&&!u,h=(g||m)&&!u,P=!h;return{bottomPassed:u,bottomVisible:V,direction:v,fits:T,height:s,passing:w,percentagePassed:x,pixelsPassed:O,offScreen:P,onScreen:h,topPassed:m,topVisible:g,width:l}},c.getPageYOffset=function(){var t=this.props.context;return t?t===window?window.pageYOffset:t.scrollTop:0},c.render=function(){var t=this.props.children,n=_(b,this.props),a=$(b,this.props);return y.createElement(M,{innerRef:this.ref},y.createElement(n,a,t))},b}(U.Component);B.handledProps=["as","children","context","continuous","fireOnMount","offset","onBottomPassed","onBottomPassedReverse","onBottomVisible","onBottomVisibleReverse","onOffScreen","onOnScreen","onPassed","onPassing","onPassingReverse","onTopPassed","onTopPassedReverse","onTopVisible","onTopVisibleReverse","onUpdate","once","updateOn"];B.propTypes={};B.defaultProps={context:C()?window:null,continuous:!1,offset:[0,0],once:!0,updateOn:"events"};const H=o=>z.jsx(D,{className:"lazy-loader",size:o.size,children:z.jsx(j,{active:o.active})});H.defaultProps={active:!1,size:"small"};H.__docgenInfo={description:"",methods:[],displayName:"LazyLoader",props:{active:{required:!1,flowType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},size:{required:!1,flowType:{name:"string"},description:"",defaultValue:{value:"'small'",computed:!1}}}};export{H as L,B as V};
