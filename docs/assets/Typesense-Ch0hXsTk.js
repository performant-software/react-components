import"./index.es34-CKA3wZ_D.js";import"./index-C0dDX-lL.js";import{J as vt}from"./index.es32-BTIyvxwU.js";import{g as _r,c as g,a as ht}from"./_commonjsHelpers-BosuxZz1.js";import{b as Br,r as ge,a as we}from"./createClass-D0eOxKhW.js";import{b as Kr}from"./index-B7gOQl76.js";import{r as Wr}from"./___vite-browser-external_commonjs-proxy-DRaEfepn.js";import{s as zr}from"./slicedToArray-DCh25bEK.js";import{a as Qr}from"./toPropertyKey-BcUJYDQU.js";import{r as Jr}from"./toConsumableArray-D8uIIZwh.js";import{d as Xr}from"./defineProperty-DcNpp85p.js";import{_ as te}from"./index-default-C_maRo4o.js";import{a as Yr,f as Vr}from"./index-DnNB6xa5.js";var Zr=String.prototype.replace,en=/%20/g,it={RFC1738:"RFC1738",RFC3986:"RFC3986"},dt={default:it.RFC3986,formatters:{RFC1738:function(d){return Zr.call(d,en,"+")},RFC3986:function(d){return String(d)}},RFC1738:it.RFC1738,RFC3986:it.RFC3986},tn=dt,at=Object.prototype.hasOwnProperty,ne=Array.isArray,Z=function(){for(var d=[],l=0;l<256;++l)d.push("%"+((l<16?"0":"")+l.toString(16)).toUpperCase());return d}(),rn=function(l){for(;l.length>1;){var v=l.pop(),y=v.obj[v.prop];if(ne(y)){for(var h=[],f=0;f<y.length;++f)typeof y[f]<"u"&&h.push(y[f]);v.obj[v.prop]=h}}},gr=function(l,v){for(var y=v&&v.plainObjects?Object.create(null):{},h=0;h<l.length;++h)typeof l[h]<"u"&&(y[h]=l[h]);return y},nn=function d(l,v,y){if(!v)return l;if(typeof v!="object"){if(ne(l))l.push(v);else if(l&&typeof l=="object")(y&&(y.plainObjects||y.allowPrototypes)||!at.call(Object.prototype,v))&&(l[v]=!0);else return[l,v];return l}if(!l||typeof l!="object")return[l].concat(v);var h=l;return ne(l)&&!ne(v)&&(h=gr(l,y)),ne(l)&&ne(v)?(v.forEach(function(f,i){if(at.call(l,i)){var s=l[i];s&&typeof s=="object"&&f&&typeof f=="object"?l[i]=d(s,f,y):l.push(f)}else l[i]=f}),l):Object.keys(v).reduce(function(f,i){var s=v[i];return at.call(f,i)?f[i]=d(f[i],s,y):f[i]=s,f},h)},an=function(l,v){return Object.keys(v).reduce(function(y,h){return y[h]=v[h],y},l)},on=function(d,l,v){var y=d.replace(/\+/g," ");if(v==="iso-8859-1")return y.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(y)}catch{return y}},un=function(l,v,y,h,f){if(l.length===0)return l;var i=l;if(typeof l=="symbol"?i=Symbol.prototype.toString.call(l):typeof l!="string"&&(i=String(l)),y==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});for(var s="",t=0;t<i.length;++t){var e=i.charCodeAt(t);if(e===45||e===46||e===95||e===126||e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||f===tn.RFC1738&&(e===40||e===41)){s+=i.charAt(t);continue}if(e<128){s=s+Z[e];continue}if(e<2048){s=s+(Z[192|e>>6]+Z[128|e&63]);continue}if(e<55296||e>=57344){s=s+(Z[224|e>>12]+Z[128|e>>6&63]+Z[128|e&63]);continue}t+=1,e=65536+((e&1023)<<10|i.charCodeAt(t)&1023),s+=Z[240|e>>18]+Z[128|e>>12&63]+Z[128|e>>6&63]+Z[128|e&63]}return s},sn=function(l){for(var v=[{obj:{o:l},prop:"o"}],y=[],h=0;h<v.length;++h)for(var f=v[h],i=f.obj[f.prop],s=Object.keys(i),t=0;t<s.length;++t){var e=s[t],u=i[e];typeof u=="object"&&u!==null&&y.indexOf(u)===-1&&(v.push({obj:i,prop:e}),y.push(u))}return rn(v),l},cn=function(l){return Object.prototype.toString.call(l)==="[object RegExp]"},ln=function(l){return!l||typeof l!="object"?!1:!!(l.constructor&&l.constructor.isBuffer&&l.constructor.isBuffer(l))},fn=function(l,v){return[].concat(l,v)},hn=function(l,v){if(ne(l)){for(var y=[],h=0;h<l.length;h+=1)y.push(v(l[h]));return y}return v(l)},wr={arrayToObject:gr,assign:an,combine:fn,compact:sn,decode:on,encode:un,isBuffer:ln,isRegExp:cn,maybeMap:hn,merge:nn},lt=wr,ye=dt,dn=Object.prototype.hasOwnProperty,yt={brackets:function(l){return l+"[]"},comma:"comma",indices:function(l,v){return l+"["+v+"]"},repeat:function(l){return l}},ie=Array.isArray,pn=String.prototype.split,vn=Array.prototype.push,br=function(d,l){vn.apply(d,ie(l)?l:[l])},yn=Date.prototype.toISOString,_t=ye.default,B={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:lt.encode,encodeValuesOnly:!1,format:_t,formatter:ye.formatters[_t],indices:!1,serializeDate:function(l){return yn.call(l)},skipNulls:!1,strictNullHandling:!1},_n=function(l){return typeof l=="string"||typeof l=="number"||typeof l=="boolean"||typeof l=="symbol"||typeof l=="bigint"},gn=function d(l,v,y,h,f,i,s,t,e,u,r,c,a,o){var n=l;if(typeof s=="function"?n=s(v,n):n instanceof Date?n=u(n):y==="comma"&&ie(n)&&(n=lt.maybeMap(n,function(j){return j instanceof Date?u(j):j})),n===null){if(h)return i&&!a?i(v,B.encoder,o,"key",r):v;n=""}if(_n(n)||lt.isBuffer(n)){if(i){var p=a?v:i(v,B.encoder,o,"key",r);if(y==="comma"&&a){for(var _=pn.call(String(n),","),m="",w=0;w<_.length;++w)m+=(w===0?"":",")+c(i(_[w],B.encoder,o,"value",r));return[c(p)+"="+m]}return[c(p)+"="+c(i(n,B.encoder,o,"value",r))]}return[c(v)+"="+c(String(n))]}var R=[];if(typeof n>"u")return R;var b;if(y==="comma"&&ie(n))b=[{value:n.length>0?n.join(",")||null:void 0}];else if(ie(s))b=s;else{var E=Object.keys(n);b=t?E.sort(t):E}for(var q=0;q<b.length;++q){var T=b[q],N=typeof T=="object"&&typeof T.value<"u"?T.value:n[T];if(!(f&&N===null)){var M=ie(n)?typeof y=="function"?y(v,T):v:v+(e?"."+T:"["+T+"]");br(R,d(N,M,y,h,f,i,s,t,e,u,r,c,a,o))}}return R},wn=function(l){if(!l)return B;if(l.encoder!==null&&typeof l.encoder<"u"&&typeof l.encoder!="function")throw new TypeError("Encoder has to be a function.");var v=l.charset||B.charset;if(typeof l.charset<"u"&&l.charset!=="utf-8"&&l.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var y=ye.default;if(typeof l.format<"u"){if(!dn.call(ye.formatters,l.format))throw new TypeError("Unknown format option provided.");y=l.format}var h=ye.formatters[y],f=B.filter;return(typeof l.filter=="function"||ie(l.filter))&&(f=l.filter),{addQueryPrefix:typeof l.addQueryPrefix=="boolean"?l.addQueryPrefix:B.addQueryPrefix,allowDots:typeof l.allowDots>"u"?B.allowDots:!!l.allowDots,charset:v,charsetSentinel:typeof l.charsetSentinel=="boolean"?l.charsetSentinel:B.charsetSentinel,delimiter:typeof l.delimiter>"u"?B.delimiter:l.delimiter,encode:typeof l.encode=="boolean"?l.encode:B.encode,encoder:typeof l.encoder=="function"?l.encoder:B.encoder,encodeValuesOnly:typeof l.encodeValuesOnly=="boolean"?l.encodeValuesOnly:B.encodeValuesOnly,filter:f,format:y,formatter:h,serializeDate:typeof l.serializeDate=="function"?l.serializeDate:B.serializeDate,skipNulls:typeof l.skipNulls=="boolean"?l.skipNulls:B.skipNulls,sort:typeof l.sort=="function"?l.sort:null,strictNullHandling:typeof l.strictNullHandling=="boolean"?l.strictNullHandling:B.strictNullHandling}},bn=function(d,l){var v=d,y=wn(l),h,f;typeof y.filter=="function"?(f=y.filter,v=f("",v)):ie(y.filter)&&(f=y.filter,h=f);var i=[];if(typeof v!="object"||v===null)return"";var s;l&&l.arrayFormat in yt?s=l.arrayFormat:l&&"indices"in l?s=l.indices?"indices":"repeat":s="indices";var t=yt[s];h||(h=Object.keys(v)),y.sort&&h.sort(y.sort);for(var e=0;e<h.length;++e){var u=h[e];y.skipNulls&&v[u]===null||br(i,gn(v[u],u,t,y.strictNullHandling,y.skipNulls,y.encode?y.encoder:null,y.filter,y.sort,y.allowDots,y.serializeDate,y.format,y.formatter,y.encodeValuesOnly,y.charset))}var r=i.join(y.delimiter),c=y.addQueryPrefix===!0?"?":"";return y.charsetSentinel&&(y.charset==="iso-8859-1"?c+="utf8=%26%2310003%3B&":c+="utf8=%E2%9C%93&"),r.length>0?c+r:""},oe=wr,ft=Object.prototype.hasOwnProperty,mn=Array.isArray,G={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:oe.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Sn=function(d){return d.replace(/&#(\d+);/g,function(l,v){return String.fromCharCode(parseInt(v,10))})},mr=function(d,l){return d&&typeof d=="string"&&l.comma&&d.indexOf(",")>-1?d.split(","):d},Rn="utf8=%26%2310003%3B",On="utf8=%E2%9C%93",Cn=function(l,v){var y={},h=v.ignoreQueryPrefix?l.replace(/^\?/,""):l,f=v.parameterLimit===1/0?void 0:v.parameterLimit,i=h.split(v.delimiter,f),s=-1,t,e=v.charset;if(v.charsetSentinel)for(t=0;t<i.length;++t)i[t].indexOf("utf8=")===0&&(i[t]===On?e="utf-8":i[t]===Rn&&(e="iso-8859-1"),s=t,t=i.length);for(t=0;t<i.length;++t)if(t!==s){var u=i[t],r=u.indexOf("]="),c=r===-1?u.indexOf("="):r+1,a,o;c===-1?(a=v.decoder(u,G.decoder,e,"key"),o=v.strictNullHandling?null:""):(a=v.decoder(u.slice(0,c),G.decoder,e,"key"),o=oe.maybeMap(mr(u.slice(c+1),v),function(n){return v.decoder(n,G.decoder,e,"value")})),o&&v.interpretNumericEntities&&e==="iso-8859-1"&&(o=Sn(o)),u.indexOf("[]=")>-1&&(o=mn(o)?[o]:o),ft.call(y,a)?y[a]=oe.combine(y[a],o):y[a]=o}return y},En=function(d,l,v,y){for(var h=y?l:mr(l,v),f=d.length-1;f>=0;--f){var i,s=d[f];if(s==="[]"&&v.parseArrays)i=[].concat(h);else{i=v.plainObjects?Object.create(null):{};var t=s.charAt(0)==="["&&s.charAt(s.length-1)==="]"?s.slice(1,-1):s,e=parseInt(t,10);!v.parseArrays&&t===""?i={0:h}:!isNaN(e)&&s!==t&&String(e)===t&&e>=0&&v.parseArrays&&e<=v.arrayLimit?(i=[],i[e]=h):t!=="__proto__"&&(i[t]=h)}h=i}return h},Pn=function(l,v,y,h){if(l){var f=y.allowDots?l.replace(/\.([^.[]+)/g,"[$1]"):l,i=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,t=y.depth>0&&i.exec(f),e=t?f.slice(0,t.index):f,u=[];if(e){if(!y.plainObjects&&ft.call(Object.prototype,e)&&!y.allowPrototypes)return;u.push(e)}for(var r=0;y.depth>0&&(t=s.exec(f))!==null&&r<y.depth;){if(r+=1,!y.plainObjects&&ft.call(Object.prototype,t[1].slice(1,-1))&&!y.allowPrototypes)return;u.push(t[1])}return t&&u.push("["+f.slice(t.index)+"]"),En(u,v,y,h)}},Tn=function(l){if(!l)return G;if(l.decoder!==null&&l.decoder!==void 0&&typeof l.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof l.charset<"u"&&l.charset!=="utf-8"&&l.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var v=typeof l.charset>"u"?G.charset:l.charset;return{allowDots:typeof l.allowDots>"u"?G.allowDots:!!l.allowDots,allowPrototypes:typeof l.allowPrototypes=="boolean"?l.allowPrototypes:G.allowPrototypes,arrayLimit:typeof l.arrayLimit=="number"?l.arrayLimit:G.arrayLimit,charset:v,charsetSentinel:typeof l.charsetSentinel=="boolean"?l.charsetSentinel:G.charsetSentinel,comma:typeof l.comma=="boolean"?l.comma:G.comma,decoder:typeof l.decoder=="function"?l.decoder:G.decoder,delimiter:typeof l.delimiter=="string"||oe.isRegExp(l.delimiter)?l.delimiter:G.delimiter,depth:typeof l.depth=="number"||l.depth===!1?+l.depth:G.depth,ignoreQueryPrefix:l.ignoreQueryPrefix===!0,interpretNumericEntities:typeof l.interpretNumericEntities=="boolean"?l.interpretNumericEntities:G.interpretNumericEntities,parameterLimit:typeof l.parameterLimit=="number"?l.parameterLimit:G.parameterLimit,parseArrays:l.parseArrays!==!1,plainObjects:typeof l.plainObjects=="boolean"?l.plainObjects:G.plainObjects,strictNullHandling:typeof l.strictNullHandling=="boolean"?l.strictNullHandling:G.strictNullHandling}},xn=function(d,l){var v=Tn(l);if(d===""||d===null||typeof d>"u")return v.plainObjects?Object.create(null):{};for(var y=typeof d=="string"?Cn(d,v):d,h=v.plainObjects?Object.create(null):{},f=Object.keys(y),i=0;i<f.length;++i){var s=f[i],t=Pn(s,y[s],v,typeof d=="string");h=oe.merge(h,t,v)}return oe.compact(h)},An=bn,jn=xn,kn=dt,qn={formats:kn,parse:jn,stringify:An};const gt=_r(qn);function ae(d){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{fallback:function(){}},v=l.fallback;return typeof window>"u"?v():d({window})}function _e(d){"@babel/helpers - typeof";return _e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},_e(d)}function Nn(d,l){if(!(d instanceof l))throw new TypeError("Cannot call a class as a function")}function wt(d,l){for(var v=0;v<l.length;v++){var y=l[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(d,Sr(y.key),y)}}function Dn(d,l,v){return l&&wt(d.prototype,l),v&&wt(d,v),Object.defineProperty(d,"prototype",{writable:!1}),d}function K(d,l,v){return l=Sr(l),l in d?Object.defineProperty(d,l,{value:v,enumerable:!0,configurable:!0,writable:!0}):d[l]=v,d}function Sr(d){var l=Mn(d,"string");return _e(l)==="symbol"?l:String(l)}function Mn(d,l){if(_e(d)!=="object"||d===null)return d;var v=d[Symbol.toPrimitive];if(v!==void 0){var y=v.call(d,l||"default");if(_e(y)!=="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(d)}var bt=function(l){l&&(window.document.title=l)},Fn=function(){function d(l){var v=this,y=l.windowTitle,h=l.writeDelay,f=h===void 0?400:h,i=l.createURL,s=l.parseURL,t=l.getLocation,e=l.start,u=l.dispose,r=l.push,c=l.cleanUrlOnDispose;Nn(this,d),K(this,"$$type","ais.browser"),K(this,"windowTitle",void 0),K(this,"writeDelay",void 0),K(this,"_createURL",void 0),K(this,"parseURL",void 0),K(this,"getLocation",void 0),K(this,"writeTimer",void 0),K(this,"_onPopState",void 0),K(this,"inPopState",!1),K(this,"isDisposed",!1),K(this,"latestAcknowledgedHistory",0),K(this,"_start",void 0),K(this,"_dispose",void 0),K(this,"_push",void 0),K(this,"_cleanUrlOnDispose",void 0),this.windowTitle=y,this.writeTimer=void 0,this.writeDelay=f,this._createURL=i,this.parseURL=s,this.getLocation=t,this._start=e,this._dispose=u,this._push=r,this._cleanUrlOnDispose=typeof c>"u"?!0:c,ae(function(a){var o=a.window,n=v.windowTitle&&v.windowTitle(v.read());bt(n),v.latestAcknowledgedHistory=o.history.length})}return Dn(d,[{key:"read",value:function(){return this.parseURL({qsModule:gt,location:this.getLocation()})}},{key:"write",value:function(v){var y=this;ae(function(h){var f=h.window,i=y.createURL(v),s=y.windowTitle&&y.windowTitle(v);y.writeTimer&&clearTimeout(y.writeTimer),y.writeTimer=setTimeout(function(){bt(s),y.shouldWrite(i)&&(y._push?y._push(i):f.history.pushState(v,s||"",i),y.latestAcknowledgedHistory=f.history.length),y.inPopState=!1,y.writeTimer=void 0},y.writeDelay)})}},{key:"onUpdate",value:function(v){var y=this;this._start&&this._start(function(){v(y.read())}),this._onPopState=function(){y.writeTimer&&(clearTimeout(y.writeTimer),y.writeTimer=void 0),y.inPopState=!0,v(y.read())},ae(function(h){var f=h.window;f.addEventListener("popstate",y._onPopState)})}},{key:"createURL",value:function(v){var y=this._createURL({qsModule:gt,routeState:v,location:this.getLocation()});return y}},{key:"dispose",value:function(){var v=this;this._dispose&&this._dispose(),this.isDisposed=!0,ae(function(y){var h=y.window;v._onPopState&&h.removeEventListener("popstate",v._onPopState)}),this.writeTimer&&clearTimeout(this.writeTimer),this._cleanUrlOnDispose&&this.write({})}},{key:"start",value:function(){this.isDisposed=!1}},{key:"shouldWrite",value:function(v){var y=this;return ae(function(h){var f=h.window,i=!(y.isDisposed&&y.latestAcknowledgedHistory!==f.history.length);return!y.inPopState&&i&&v!==f.location.href})}}]),d}();function Hn(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=d.createURL,v=l===void 0?function(o){var n=o.qsModule,p=o.routeState,_=o.location,m=_.protocol,w=_.hostname,R=_.port,b=R===void 0?"":R,E=_.pathname,q=_.hash,T=n.stringify(p),N=b===""?"":":".concat(b);return T?"".concat(m,"//").concat(w).concat(N).concat(E,"?").concat(T).concat(q):"".concat(m,"//").concat(w).concat(N).concat(E).concat(q)}:l,y=d.parseURL,h=y===void 0?function(o){var n=o.qsModule,p=o.location;return n.parse(p.search.slice(1),{arrayLimit:99})}:y,f=d.writeDelay,i=f===void 0?400:f,s=d.windowTitle,t=d.getLocation,e=t===void 0?function(){return ae(function(o){var n=o.window;return n.location},{fallback:function(){throw new Error("You need to provide `getLocation` to the `history` router in environments where `window` does not exist.")}})}:t,u=d.start,r=d.dispose,c=d.push,a=d.cleanUrlOnDispose;return new Fn({createURL:v,parseURL:h,writeDelay:i,windowTitle:s,getLocation:e,start:u,dispose:r,push:c,cleanUrlOnDispose:a})}var Rr={},Or={exports:{}};(function(d){function l(v){return v&&v.__esModule?v:{default:v}}d.exports=l,d.exports.__esModule=!0,d.exports.default=d.exports})(Or);var be=Or.exports,ot={exports:{}},mt;function Ln(){return mt||(mt=1,function(d){var l=Br().default;function v(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */d.exports=v=function(){return h},d.exports.__esModule=!0,d.exports.default=d.exports;var y,h={},f=Object.prototype,i=f.hasOwnProperty,s=Object.defineProperty||function(C,S,O){C[S]=O.value},t=typeof Symbol=="function"?Symbol:{},e=t.iterator||"@@iterator",u=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function c(C,S,O){return Object.defineProperty(C,S,{value:O,enumerable:!0,configurable:!0,writable:!0}),C[S]}try{c({},"")}catch{c=function(O,P,A){return O[P]=A}}function a(C,S,O,P){var A=S&&S.prototype instanceof R?S:R,k=Object.create(A.prototype),H=new $(P||[]);return s(k,"_invoke",{value:L(C,O,H)}),k}function o(C,S,O){try{return{type:"normal",arg:C.call(S,O)}}catch(P){return{type:"throw",arg:P}}}h.wrap=a;var n="suspendedStart",p="suspendedYield",_="executing",m="completed",w={};function R(){}function b(){}function E(){}var q={};c(q,e,function(){return this});var T=Object.getPrototypeOf,N=T&&T(T(X([])));N&&N!==f&&i.call(N,e)&&(q=N);var M=E.prototype=R.prototype=Object.create(q);function j(C){["next","throw","return"].forEach(function(S){c(C,S,function(O){return this._invoke(S,O)})})}function D(C,S){function O(A,k,H,F){var I=o(C[A],C,k);if(I.type!=="throw"){var z=I.arg,Q=z.value;return Q&&l(Q)=="object"&&i.call(Q,"__await")?S.resolve(Q.__await).then(function(Y){O("next",Y,H,F)},function(Y){O("throw",Y,H,F)}):S.resolve(Q).then(function(Y){z.value=Y,H(z)},function(Y){return O("throw",Y,H,F)})}F(I.arg)}var P;s(this,"_invoke",{value:function(k,H){function F(){return new S(function(I,z){O(k,H,I,z)})}return P=P?P.then(F,F):F()}})}function L(C,S,O){var P=n;return function(A,k){if(P===_)throw new Error("Generator is already running");if(P===m){if(A==="throw")throw k;return{value:y,done:!0}}for(O.method=A,O.arg=k;;){var H=O.delegate;if(H){var F=W(H,O);if(F){if(F===w)continue;return F}}if(O.method==="next")O.sent=O._sent=O.arg;else if(O.method==="throw"){if(P===n)throw P=m,O.arg;O.dispatchException(O.arg)}else O.method==="return"&&O.abrupt("return",O.arg);P=_;var I=o(C,S,O);if(I.type==="normal"){if(P=O.done?m:p,I.arg===w)continue;return{value:I.arg,done:O.done}}I.type==="throw"&&(P=m,O.method="throw",O.arg=I.arg)}}}function W(C,S){var O=S.method,P=C.iterator[O];if(P===y)return S.delegate=null,O==="throw"&&C.iterator.return&&(S.method="return",S.arg=y,W(C,S),S.method==="throw")||O!=="return"&&(S.method="throw",S.arg=new TypeError("The iterator does not provide a '"+O+"' method")),w;var A=o(P,C.iterator,S.arg);if(A.type==="throw")return S.method="throw",S.arg=A.arg,S.delegate=null,w;var k=A.arg;return k?k.done?(S[C.resultName]=k.value,S.next=C.nextLoc,S.method!=="return"&&(S.method="next",S.arg=y),S.delegate=null,w):k:(S.method="throw",S.arg=new TypeError("iterator result is not an object"),S.delegate=null,w)}function J(C){var S={tryLoc:C[0]};1 in C&&(S.catchLoc=C[1]),2 in C&&(S.finallyLoc=C[2],S.afterLoc=C[3]),this.tryEntries.push(S)}function x(C){var S=C.completion||{};S.type="normal",delete S.arg,C.completion=S}function $(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(J,this),this.reset(!0)}function X(C){if(C||C===""){var S=C[e];if(S)return S.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var O=-1,P=function A(){for(;++O<C.length;)if(i.call(C,O))return A.value=C[O],A.done=!1,A;return A.value=y,A.done=!0,A};return P.next=P}}throw new TypeError(l(C)+" is not iterable")}return b.prototype=E,s(M,"constructor",{value:E,configurable:!0}),s(E,"constructor",{value:b,configurable:!0}),b.displayName=c(E,r,"GeneratorFunction"),h.isGeneratorFunction=function(C){var S=typeof C=="function"&&C.constructor;return!!S&&(S===b||(S.displayName||S.name)==="GeneratorFunction")},h.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,E):(C.__proto__=E,c(C,r,"GeneratorFunction")),C.prototype=Object.create(M),C},h.awrap=function(C){return{__await:C}},j(D.prototype),c(D.prototype,u,function(){return this}),h.AsyncIterator=D,h.async=function(C,S,O,P,A){A===void 0&&(A=Promise);var k=new D(a(C,S,O,P),A);return h.isGeneratorFunction(S)?k:k.next().then(function(H){return H.done?H.value:k.next()})},j(M),c(M,r,"Generator"),c(M,e,function(){return this}),c(M,"toString",function(){return"[object Generator]"}),h.keys=function(C){var S=Object(C),O=[];for(var P in S)O.push(P);return O.reverse(),function A(){for(;O.length;){var k=O.pop();if(k in S)return A.value=k,A.done=!1,A}return A.done=!0,A}},h.values=X,$.prototype={constructor:$,reset:function(S){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(x),!S)for(var O in this)O.charAt(0)==="t"&&i.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=y)},stop:function(){this.done=!0;var S=this.tryEntries[0].completion;if(S.type==="throw")throw S.arg;return this.rval},dispatchException:function(S){if(this.done)throw S;var O=this;function P(z,Q){return H.type="throw",H.arg=S,O.next=z,Q&&(O.method="next",O.arg=y),!!Q}for(var A=this.tryEntries.length-1;A>=0;--A){var k=this.tryEntries[A],H=k.completion;if(k.tryLoc==="root")return P("end");if(k.tryLoc<=this.prev){var F=i.call(k,"catchLoc"),I=i.call(k,"finallyLoc");if(F&&I){if(this.prev<k.catchLoc)return P(k.catchLoc,!0);if(this.prev<k.finallyLoc)return P(k.finallyLoc)}else if(F){if(this.prev<k.catchLoc)return P(k.catchLoc,!0)}else{if(!I)throw new Error("try statement without catch or finally");if(this.prev<k.finallyLoc)return P(k.finallyLoc)}}}},abrupt:function(S,O){for(var P=this.tryEntries.length-1;P>=0;--P){var A=this.tryEntries[P];if(A.tryLoc<=this.prev&&i.call(A,"finallyLoc")&&this.prev<A.finallyLoc){var k=A;break}}k&&(S==="break"||S==="continue")&&k.tryLoc<=O&&O<=k.finallyLoc&&(k=null);var H=k?k.completion:{};return H.type=S,H.arg=O,k?(this.method="next",this.next=k.finallyLoc,w):this.complete(H)},complete:function(S,O){if(S.type==="throw")throw S.arg;return S.type==="break"||S.type==="continue"?this.next=S.arg:S.type==="return"?(this.rval=this.arg=S.arg,this.method="return",this.next="end"):S.type==="normal"&&O&&(this.next=O),w},finish:function(S){for(var O=this.tryEntries.length-1;O>=0;--O){var P=this.tryEntries[O];if(P.finallyLoc===S)return this.complete(P.completion,P.afterLoc),x(P),w}},catch:function(S){for(var O=this.tryEntries.length-1;O>=0;--O){var P=this.tryEntries[O];if(P.tryLoc===S){var A=P.completion;if(A.type==="throw"){var k=A.arg;x(P)}return k}}throw new Error("illegal catch attempt")},delegateYield:function(S,O,P){return this.delegate={iterator:X(S),resultName:O,nextLoc:P},this.method==="next"&&(this.arg=y),w}},h}d.exports=v,d.exports.__esModule=!0,d.exports.default=d.exports}(ot)),ot.exports}var ut,St;function Cr(){if(St)return ut;St=1;var d=Ln()();ut=d;try{regeneratorRuntime=d}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=d:Function("r","regeneratorRuntime = r")(d)}return ut}var st={exports:{}},Rt;function Er(){return Rt||(Rt=1,function(d){function l(y,h,f,i,s,t,e){try{var u=y[t](e),r=u.value}catch(c){f(c);return}u.done?h(r):Promise.resolve(r).then(i,s)}function v(y){return function(){var h=this,f=arguments;return new Promise(function(i,s){var t=y.apply(h,f);function e(r){l(t,i,s,e,u,"next",r)}function u(r){l(t,i,s,e,u,"throw",r)}e(void 0)})}}d.exports=v,d.exports.__esModule=!0,d.exports.default=d.exports}(st)),st.exports}var se={},Ot;function Un(){if(Ot)return se;Ot=1;var d=be;Object.defineProperty(se,"__esModule",{value:!0}),se.Configuration=void 0;var l=d(ge()),v=d(we()),y=function(){function h(){var f,i,s,t,e,u,r,c,a,o,n,p,_,m=this,w,R,b,E,q,T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,l.default)(this,h),this.server=T.server||{nodes:[{host:"localhost",port:"8108",path:"",protocol:"http"}]},this.server.cacheSearchResultsForSeconds=(f=this.server.cacheSearchResultsForSeconds)!==null&&f!==void 0?f:2*60,this.additionalSearchParameters=(i=T.additionalSearchParameters)!==null&&i!==void 0?i:{},this.additionalSearchParameters.query_by=(s=(t=this.additionalSearchParameters.queryBy)!==null&&t!==void 0?t:this.additionalSearchParameters.query_by)!==null&&s!==void 0?s:"",this.additionalSearchParameters.preset=(e=(u=this.additionalSearchParameters.preset)!==null&&u!==void 0?u:this.additionalSearchParameters.preset)!==null&&e!==void 0?e:"",this.additionalSearchParameters.sort_by=(r=(c=this.additionalSearchParameters.sortBy)!==null&&c!==void 0?c:this.additionalSearchParameters.sort_by)!==null&&r!==void 0?r:"",this.additionalSearchParameters.highlight_full_fields=(a=(o=this.additionalSearchParameters.highlightFullFields)!==null&&o!==void 0?o:this.additionalSearchParameters.highlight_full_fields)!==null&&a!==void 0?a:this.additionalSearchParameters.query_by,this.geoLocationField=(n=T.geoLocationField)!==null&&n!==void 0?n:"_geoloc",this.facetableFieldsWithSpecialCharacters=(p=T.facetableFieldsWithSpecialCharacters)!==null&&p!==void 0?p:[],this.collectionSpecificSearchParameters=(_=T.collectionSpecificSearchParameters)!==null&&_!==void 0?_:{},Object.keys(this.collectionSpecificSearchParameters).forEach(function(N){var M,j,D,L,W,J,x=m.collectionSpecificSearchParameters[N];x.query_by=(M=x.queryBy)!==null&&M!==void 0?M:x.query_by,x.preset=(j=x.preset)!==null&&j!==void 0?j:x.preset,x.sort_by=(D=x.sortBy)!==null&&D!==void 0?D:x.sort_by,x.highlight_full_fields=(L=(W=(J=x.highlightFullFields)!==null&&J!==void 0?J:x.highlight_full_fields)!==null&&W!==void 0?W:m.additionalSearchParameters.highlight_full_fields)!==null&&L!==void 0?L:x.query_by,Object.keys(x).forEach(function($){return x[$]===void 0?delete x[$]:{}})}),this.renderingContent=T.renderingContent,this.flattenGroupedHits=(w=T.flattenGroupedHits)!==null&&w!==void 0?w:!0,this.facetByOptions=(R=T.facetByOptions)!==null&&R!==void 0?R:{},this.filterByOptions=(b=T.filterByOptions)!==null&&b!==void 0?b:{},this.collectionSpecificFacetByOptions=(E=T.collectionSpecificFacetByOptions)!==null&&E!==void 0?E:{},this.collectionSpecificFilterByOptions=(q=T.collectionSpecificFilterByOptions)!==null&&q!==void 0?q:{}}return(0,v.default)(h,[{key:"validate",value:function(){if((this.additionalSearchParameters.queryBy||Object.values(this.collectionSpecificSearchParameters).some(function(i){return i.queryBy}))&&console.warn("[typesense-instantsearch-adapter] Please use snake_cased versions of parameters in additionalSearchParameters instead of camelCased parameters. For example: Use query_by instead of queryBy. camelCased parameters will be deprecated in a future version. We're making this change so that parameter names are identical to the ones sent to Typesense (which are all snake_cased), and to also keep the types for these parameters in sync with the types defined in typesense-js."),this.additionalSearchParameters.query_by.length===0&&this.additionalSearchParameters.preset.length===0&&(Object.keys(this.collectionSpecificSearchParameters).length===0||Object.values(this.collectionSpecificSearchParameters).some(function(i){return(i.query_by||"").length===0&&(i.preset||"").length===0})))throw new Error("[typesense-instantsearch-adapter] Missing parameter: One of additionalSearchParameters.query_by or additionalSearchParameters.preset needs to be set, or all collectionSpecificSearchParameters need to have either .query_by or .preset set.")}}]),h}();return se.Configuration=y,se}var ee={},Se={},Re={},ct={exports:{}},Ct;function In(){return Ct||(Ct=1,function(d){(function(l,v){d.exports?d.exports=v():l.log=v()})(g,function(){var l=function(){},v="undefined",y=typeof window!==v&&typeof window.navigator!==v&&/Trident\/|MSIE /.test(window.navigator.userAgent),h=["trace","debug","info","warn","error"],f={},i=null;function s(n,p){var _=n[p];if(typeof _.bind=="function")return _.bind(n);try{return Function.prototype.bind.call(_,n)}catch{return function(){return Function.prototype.apply.apply(_,[n,arguments])}}}function t(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function e(n){return n==="debug"&&(n="log"),typeof console===v?!1:n==="trace"&&y?t:console[n]!==void 0?s(console,n):console.log!==void 0?s(console,"log"):l}function u(){for(var n=this.getLevel(),p=0;p<h.length;p++){var _=h[p];this[_]=p<n?l:this.methodFactory(_,n,this.name)}if(this.log=this.debug,typeof console===v&&n<this.levels.SILENT)return"No console available for logging"}function r(n){return function(){typeof console!==v&&(u.call(this),this[n].apply(this,arguments))}}function c(n,p,_){return e(n)||r.apply(this,arguments)}function a(n,p){var _=this,m,w,R,b="loglevel";typeof n=="string"?b+=":"+n:typeof n=="symbol"&&(b=void 0);function E(j){var D=(h[j]||"silent").toUpperCase();if(!(typeof window===v||!b)){try{window.localStorage[b]=D;return}catch{}try{window.document.cookie=encodeURIComponent(b)+"="+D+";"}catch{}}}function q(){var j;if(!(typeof window===v||!b)){try{j=window.localStorage[b]}catch{}if(typeof j===v)try{var D=window.document.cookie,L=encodeURIComponent(b),W=D.indexOf(L+"=");W!==-1&&(j=/^([^;]+)/.exec(D.slice(W+L.length+1))[1])}catch{}return _.levels[j]===void 0&&(j=void 0),j}}function T(){if(!(typeof window===v||!b)){try{window.localStorage.removeItem(b)}catch{}try{window.document.cookie=encodeURIComponent(b)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function N(j){var D=j;if(typeof D=="string"&&_.levels[D.toUpperCase()]!==void 0&&(D=_.levels[D.toUpperCase()]),typeof D=="number"&&D>=0&&D<=_.levels.SILENT)return D;throw new TypeError("log.setLevel() called with invalid level: "+j)}_.name=n,_.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},_.methodFactory=p||c,_.getLevel=function(){return R??w??m},_.setLevel=function(j,D){return R=N(j),D!==!1&&E(R),u.call(_)},_.setDefaultLevel=function(j){w=N(j),q()||_.setLevel(j,!1)},_.resetLevel=function(){R=null,T(),u.call(_)},_.enableAll=function(j){_.setLevel(_.levels.TRACE,j)},_.disableAll=function(j){_.setLevel(_.levels.SILENT,j)},_.rebuild=function(){if(i!==_&&(m=N(i.getLevel())),u.call(_),i===_)for(var j in f)f[j].rebuild()},m=N(i?i.getLevel():"WARN");var M=q();M!=null&&(R=N(M)),u.call(_)}i=new a,i.getLogger=function(p){if(typeof p!="symbol"&&typeof p!="string"||p==="")throw new TypeError("You must supply a name when creating a logger.");var _=f[p];return _||(_=f[p]=new a(p,i.methodFactory)),_};var o=typeof window!==v?window.log:void 0;return i.noConflict=function(){return typeof window!==v&&window.log===i&&(window.log=o),i},i.getLoggers=function(){return f},i.default=i,i})}(ct)),ct.exports}var U={},Oe={},Ce={},Et;function V(){if(Et)return Ce;Et=1;var d=g&&g.__extends||function(){var v=function(y,h){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(f[s]=i[s])},v(y,h)};return function(y,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");v(y,h);function f(){this.constructor=y}y.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(Ce,"__esModule",{value:!0});var l=function(v){d(y,v);function y(h){var f=this.constructor,i=v.call(this,h)||this;return i.name=f.name,Object.setPrototypeOf(i,f.prototype),i}return y}(Error);return Ce.default=l,Ce}var Pt;function $n(){if(Pt)return Oe;Pt=1;var d=g&&g.__extends||function(){var h=function(f,i){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,t){s.__proto__=t}||function(s,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])},h(f,i)};return function(f,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");h(f,i);function s(){this.constructor=f}f.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}}(),l=g&&g.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Oe,"__esModule",{value:!0});var v=l(V()),y=function(h){d(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f}(v.default);return Oe.default=y,Oe}var Ee={},Tt;function Gn(){if(Tt)return Ee;Tt=1;var d=g&&g.__extends||function(){var h=function(f,i){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,t){s.__proto__=t}||function(s,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])},h(f,i)};return function(f,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");h(f,i);function s(){this.constructor=f}f.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}}(),l=g&&g.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Ee,"__esModule",{value:!0});var v=l(V()),y=function(h){d(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f}(v.default);return Ee.default=y,Ee}var Pe={},xt;function Bn(){if(xt)return Pe;xt=1;var d=g&&g.__extends||function(){var h=function(f,i){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,t){s.__proto__=t}||function(s,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])},h(f,i)};return function(f,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");h(f,i);function s(){this.constructor=f}f.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}}(),l=g&&g.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Pe,"__esModule",{value:!0});var v=l(V()),y=function(h){d(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f}(v.default);return Pe.default=y,Pe}var Te={},At;function Kn(){if(At)return Te;At=1;var d=g&&g.__extends||function(){var h=function(f,i){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,t){s.__proto__=t}||function(s,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])},h(f,i)};return function(f,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");h(f,i);function s(){this.constructor=f}f.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}}(),l=g&&g.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Te,"__esModule",{value:!0});var v=l(V()),y=function(h){d(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f}(v.default);return Te.default=y,Te}var xe={},jt;function Wn(){if(jt)return xe;jt=1;var d=g&&g.__extends||function(){var h=function(f,i){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,t){s.__proto__=t}||function(s,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])},h(f,i)};return function(f,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");h(f,i);function s(){this.constructor=f}f.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}}(),l=g&&g.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(xe,"__esModule",{value:!0});var v=l(V()),y=function(h){d(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f}(v.default);return xe.default=y,xe}var Ae={},kt;function zn(){if(kt)return Ae;kt=1;var d=g&&g.__extends||function(){var h=function(f,i){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,t){s.__proto__=t}||function(s,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])},h(f,i)};return function(f,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");h(f,i);function s(){this.constructor=f}f.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}}(),l=g&&g.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Ae,"__esModule",{value:!0});var v=l(V()),y=function(h){d(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f}(v.default);return Ae.default=y,Ae}var je={},qt;function Qn(){if(qt)return je;qt=1;var d=g&&g.__extends||function(){var h=function(f,i){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,t){s.__proto__=t}||function(s,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])},h(f,i)};return function(f,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");h(f,i);function s(){this.constructor=f}f.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}}(),l=g&&g.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(je,"__esModule",{value:!0});var v=l(V()),y=function(h){d(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f}(v.default);return je.default=y,je}var ke={},Nt;function Jn(){if(Nt)return ke;Nt=1;var d=g&&g.__extends||function(){var h=function(f,i){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,t){s.__proto__=t}||function(s,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])},h(f,i)};return function(f,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");h(f,i);function s(){this.constructor=f}f.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}}(),l=g&&g.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(ke,"__esModule",{value:!0});var v=l(V()),y=function(h){d(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f}(v.default);return ke.default=y,ke}var qe={},Dt;function Xn(){if(Dt)return qe;Dt=1;var d=g&&g.__extends||function(){var h=function(f,i){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,t){s.__proto__=t}||function(s,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])},h(f,i)};return function(f,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");h(f,i);function s(){this.constructor=f}f.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}}(),l=g&&g.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(qe,"__esModule",{value:!0});var v=l(V()),y=function(h){d(f,h);function f(i,s){var t=h.call(this,i)||this;return t.importResults=s,t}return f}(v.default);return qe.default=y,qe}var Mt;function me(){if(Mt)return U;Mt=1;var d=g&&g.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(U,"__esModule",{value:!0}),U.ImportError=U.TypesenseError=U.ServerError=U.RequestUnauthorized=U.RequestMalformed=U.ObjectUnprocessable=U.ObjectNotFound=U.ObjectAlreadyExists=U.MissingConfigurationError=U.HTTPError=void 0;var l=d($n());U.HTTPError=l.default;var v=d(Gn());U.MissingConfigurationError=v.default;var y=d(Bn());U.ObjectAlreadyExists=y.default;var h=d(Kn());U.ObjectNotFound=h.default;var f=d(Wn());U.ObjectUnprocessable=f.default;var i=d(zn());U.RequestMalformed=i.default;var s=d(Qn());U.RequestUnauthorized=s.default;var t=d(Jn());U.ServerError=t.default;var e=d(Xn());U.ImportError=e.default;var u=d(V());return U.TypesenseError=u.default,U}var Ft;function Pr(){if(Ft)return Re;Ft=1;var d=g&&g.__assign||function(){return d=Object.assign||function(s){for(var t,e=1,u=arguments.length;e<u;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},d.apply(this,arguments)},l=g&&g.__createBinding||(Object.create?function(s,t,e,u){u===void 0&&(u=e);var r=Object.getOwnPropertyDescriptor(t,e);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(s,u,r)}:function(s,t,e,u){u===void 0&&(u=e),s[u]=t[e]}),v=g&&g.__setModuleDefault||(Object.create?function(s,t){Object.defineProperty(s,"default",{enumerable:!0,value:t})}:function(s,t){s.default=t}),y=g&&g.__importStar||function(s){if(s&&s.__esModule)return s;var t={};if(s!=null)for(var e in s)e!=="default"&&Object.prototype.hasOwnProperty.call(s,e)&&l(t,s,e);return v(t,s),t};Object.defineProperty(Re,"__esModule",{value:!0});var h=y(In()),f=me(),i=function(){function s(t){var e=this;this.nodes=t.nodes||[],this.nodes=this.nodes.map(function(u){return e.setDefaultPathInNode(u)}).map(function(u){return e.setDefaultPortInNode(u)}).map(function(u){return d({},u)}),t.randomizeNodes==null&&(t.randomizeNodes=!0),t.randomizeNodes===!0&&this.shuffleArray(this.nodes),this.nearestNode=t.nearestNode,this.nearestNode=this.setDefaultPathInNode(this.nearestNode),this.nearestNode=this.setDefaultPortInNode(this.nearestNode),this.connectionTimeoutSeconds=t.connectionTimeoutSeconds||t.timeoutSeconds||5,this.healthcheckIntervalSeconds=t.healthcheckIntervalSeconds||60,this.numRetries=t.numRetries||this.nodes.length+(this.nearestNode==null?0:1)||3,this.retryIntervalSeconds=t.retryIntervalSeconds||.1,this.apiKey=t.apiKey,this.sendApiKeyAsQueryParam=t.sendApiKeyAsQueryParam,this.cacheSearchResultsForSeconds=t.cacheSearchResultsForSeconds||0,this.useServerSideSearchCache=t.useServerSideSearchCache||!1,this.logger=t.logger||h,this.logLevel=t.logLevel||"warn",this.logger.setLevel(this.logLevel),this.additionalHeaders=t.additionalHeaders,this.showDeprecationWarnings(t),this.validate()}return s.prototype.validate=function(){if(this.nodes==null||this.nodes.length===0||this.validateNodes())throw new f.MissingConfigurationError("Ensure that nodes[].protocol, nodes[].host and nodes[].port are set");if(this.nearestNode!=null&&this.isNodeMissingAnyParameters(this.nearestNode))throw new f.MissingConfigurationError("Ensure that nearestNodes.protocol, nearestNodes.host and nearestNodes.port are set");if(this.apiKey==null)throw new f.MissingConfigurationError("Ensure that apiKey is set");return!0},s.prototype.validateNodes=function(){var t=this;return this.nodes.some(function(e){return t.isNodeMissingAnyParameters(e)})},s.prototype.isNodeMissingAnyParameters=function(t){return!["protocol","host","port","path"].every(function(e){return t.hasOwnProperty(e)})&&t.url==null},s.prototype.setDefaultPathInNode=function(t){return t!=null&&!t.hasOwnProperty("path")&&(t.path=""),t},s.prototype.setDefaultPortInNode=function(t){if(t!=null&&!t.hasOwnProperty("port")&&t.hasOwnProperty("protocol"))switch(t.protocol){case"https":t.port=443;break;case"http":t.port=80;break}return t},s.prototype.showDeprecationWarnings=function(t){t.timeoutSeconds&&this.logger.warn("Deprecation warning: timeoutSeconds is now renamed to connectionTimeoutSeconds"),t.masterNode&&this.logger.warn("Deprecation warning: masterNode is now consolidated to nodes, starting with Typesense Server v0.12"),t.readReplicaNodes&&this.logger.warn("Deprecation warning: readReplicaNodes is now consolidated to nodes, starting with Typesense Server v0.12")},s.prototype.shuffleArray=function(t){for(var e,u=t.length-1;u>0;u--){var r=Math.floor(Math.random()*(u+1));e=[t[r],t[u]],t[u]=e[0],t[r]=e[1]}},s}();return Re.default=i,Re}var Ne={},Ht;function Tr(){if(Ht)return Ne;Ht=1;var d=g&&g.__awaiter||function(u,r,c,a){function o(n){return n instanceof c?n:new c(function(p){p(n)})}return new(c||(c=Promise))(function(n,p){function _(R){try{w(a.next(R))}catch(b){p(b)}}function m(R){try{w(a.throw(R))}catch(b){p(b)}}function w(R){R.done?n(R.value):o(R.value).then(_,m)}w((a=a.apply(u,r||[])).next())})},l=g&&g.__generator||function(u,r){var c={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},a,o,n,p;return p={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function _(w){return function(R){return m([w,R])}}function m(w){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(n=w[0]&2?o.return:w[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,w[1])).done)return n;switch(o=0,n&&(w=[w[0]&2,n.value]),w[0]){case 0:case 1:n=w;break;case 4:return c.label++,{value:w[1],done:!1};case 5:c.label++,o=w[1],w=[0];continue;case 7:w=c.ops.pop(),c.trys.pop();continue;default:if(n=c.trys,!(n=n.length>0&&n[n.length-1])&&(w[0]===6||w[0]===2)){c=0;continue}if(w[0]===3&&(!n||w[1]>n[0]&&w[1]<n[3])){c.label=w[1];break}if(w[0]===6&&c.label<n[1]){c.label=n[1],n=w;break}if(n&&c.label<n[2]){c.label=n[2],c.ops.push(w);break}n[2]&&c.ops.pop(),c.trys.pop();continue}w=r.call(u,c)}catch(R){w=[6,R],o=0}finally{a=n=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},v=g&&g.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Ne,"__esModule",{value:!0});var y=v(Kr),h=me(),f=v(V()),i="X-TYPESENSE-API-KEY",s=!0,t=!1,e=function(){function u(r){this.configuration=r,this.apiKey=this.configuration.apiKey,this.nodes=this.configuration.nodes==null?this.configuration.nodes:JSON.parse(JSON.stringify(this.configuration.nodes)),this.nearestNode=this.configuration.nearestNode==null?this.configuration.nearestNode:JSON.parse(JSON.stringify(this.configuration.nearestNode)),this.connectionTimeoutSeconds=this.configuration.connectionTimeoutSeconds,this.healthcheckIntervalSeconds=this.configuration.healthcheckIntervalSeconds,this.numRetriesPerRequest=this.configuration.numRetries,this.retryIntervalSeconds=this.configuration.retryIntervalSeconds,this.sendApiKeyAsQueryParam=this.configuration.sendApiKeyAsQueryParam,this.additionalUserHeaders=this.configuration.additionalHeaders,this.logger=this.configuration.logger,this.initializeMetadataForNodes(),this.currentNodeIndex=-1}return u.prototype.get=function(r,c,a){c===void 0&&(c={});var o=a===void 0?{}:a,n=o.abortSignal,p=n===void 0?null:n,_=o.responseType,m=_===void 0?void 0:_;return d(this,void 0,void 0,function(){return l(this,function(w){return[2,this.performRequest("get",r,{queryParameters:c,abortSignal:p,responseType:m})]})})},u.prototype.delete=function(r,c){return c===void 0&&(c={}),d(this,void 0,void 0,function(){return l(this,function(a){return[2,this.performRequest("delete",r,{queryParameters:c})]})})},u.prototype.post=function(r,c,a,o){return c===void 0&&(c={}),a===void 0&&(a={}),o===void 0&&(o={}),d(this,void 0,void 0,function(){return l(this,function(n){return[2,this.performRequest("post",r,{queryParameters:a,bodyParameters:c,additionalHeaders:o})]})})},u.prototype.put=function(r,c,a){return c===void 0&&(c={}),a===void 0&&(a={}),d(this,void 0,void 0,function(){return l(this,function(o){return[2,this.performRequest("put",r,{queryParameters:a,bodyParameters:c})]})})},u.prototype.patch=function(r,c,a){return c===void 0&&(c={}),a===void 0&&(a={}),d(this,void 0,void 0,function(){return l(this,function(o){return[2,this.performRequest("patch",r,{queryParameters:a,bodyParameters:c})]})})},u.prototype.performRequest=function(r,c,a){var o,n,p,_=a.queryParameters,m=_===void 0?null:_,w=a.bodyParameters,R=w===void 0?null:w,b=a.additionalHeaders,E=b===void 0?{}:b,q=a.abortSignal,T=q===void 0?null:q,N=a.responseType,M=N===void 0?void 0:N,j=a.skipConnectionTimeout,D=j===void 0?!1:j;return d(this,void 0,void 0,function(){var L,W,J,x,$,X;return l(this,function(C){switch(C.label){case 0:this.configuration.validate(),L=Date.now(),this.logger.debug("Request #".concat(L,": Performing ").concat(r.toUpperCase()," request: ").concat(c)),J=function(S){var O,P,A,k,H,F,I;return l(this,function(z){switch(z.label){case 0:if(O=x.getNextNode(L),x.logger.debug("Request #".concat(L,": Attempting ").concat(r.toUpperCase()," request Try #").concat(S," to Node ").concat(O.index)),T&&T.aborted)return[2,{value:Promise.reject(new Error("Request aborted by caller."))}];P=void 0,z.label=1;case 1:return z.trys.push([1,3,5,6]),A={method:r,url:x.uriFor(c,O),headers:Object.assign({},x.defaultHeaders(),E,x.additionalUserHeaders),maxContentLength:1/0,maxBodyLength:1/0,responseType:M,validateStatus:function(Q){return Q>0},transformResponse:[function(Q,Y){var pt=Q;return Y!==void 0&&typeof Q=="string"&&Y["content-type"]&&Y["content-type"].startsWith("application/json")&&(pt=JSON.parse(Q)),pt}]},D!==!0&&(A.timeout=x.connectionTimeoutSeconds*1e3),m&&Object.keys(m).length!==0&&(A.params=m),x.sendApiKeyAsQueryParam&&(A.params=A.params||{},A.params["x-typesense-api-key"]=x.apiKey),R&&(typeof R=="string"&&R.length!==0||typeof R=="object"&&Object.keys(R).length!==0)&&(A.data=R),T&&(k=y.default.CancelToken,H=k.source(),P=function(){return H.cancel()},T.addEventListener("abort",P),A.cancelToken=H.token),[4,(0,y.default)(A)];case 2:if(F=z.sent(),F.status>=1&&F.status<=499&&x.setNodeHealthcheck(O,s),x.logger.debug("Request #".concat(L,": Request to Node ").concat(O.index," was made. Response Code was ").concat(F.status,".")),F.status>=200&&F.status<300)return[2,{value:Promise.resolve(F.data)}];if(F.status<500)return[2,{value:Promise.reject(x.customErrorForResponse(F,(o=F.data)===null||o===void 0?void 0:o.message))}];throw x.customErrorForResponse(F,(n=F.data)===null||n===void 0?void 0:n.message);case 3:return I=z.sent(),x.setNodeHealthcheck(O,t),W=I,x.logger.warn("Request #".concat(L,": Request to Node ").concat(O.index,' failed due to "').concat(I.code," ").concat(I.message).concat(I.response==null?"":" - "+JSON.stringify((p=I.response)===null||p===void 0?void 0:p.data),'"')),x.logger.warn("Request #".concat(L,": Sleeping for ").concat(x.retryIntervalSeconds,"s and then retrying request...")),[4,x.timer(x.retryIntervalSeconds)];case 4:return z.sent(),[3,6];case 5:return T&&P&&T.removeEventListener("abort",P),[7];case 6:return[2]}})},x=this,$=1,C.label=1;case 1:return $<=this.numRetriesPerRequest+1?[5,J($)]:[3,4];case 2:if(X=C.sent(),typeof X=="object")return[2,X.value];C.label=3;case 3:return $++,[3,1];case 4:return this.logger.debug("Request #".concat(L,": No retries left. Raising last error")),[2,Promise.reject(W)]}})})},u.prototype.getNextNode=function(r){if(r===void 0&&(r=0),this.nearestNode!=null){if(this.logger.debug("Request #".concat(r,": Nodes Health: Node ").concat(this.nearestNode.index," is ").concat(this.nearestNode.isHealthy===!0?"Healthy":"Unhealthy")),this.nearestNode.isHealthy===!0||this.nodeDueForHealthcheck(this.nearestNode,r))return this.logger.debug("Request #".concat(r,": Updated current node to Node ").concat(this.nearestNode.index)),this.nearestNode;this.logger.debug("Request #".concat(r,": Falling back to individual nodes"))}this.logger.debug("Request #".concat(r,": Nodes Health: ").concat(this.nodes.map(function(o){return"Node ".concat(o.index," is ").concat(o.isHealthy===!0?"Healthy":"Unhealthy")}).join(" || ")));for(var c=this.nodes[0],a=0;a<=this.nodes.length;a++)if(this.currentNodeIndex=(this.currentNodeIndex+1)%this.nodes.length,c=this.nodes[this.currentNodeIndex],c.isHealthy===!0||this.nodeDueForHealthcheck(c,r))return this.logger.debug("Request #".concat(r,": Updated current node to Node ").concat(c.index)),c;return this.logger.debug("Request #".concat(r,": No healthy nodes were found. Returning the next node, Node ").concat(c.index)),c},u.prototype.nodeDueForHealthcheck=function(r,c){c===void 0&&(c=0);var a=Date.now()-r.lastAccessTimestamp>this.healthcheckIntervalSeconds*1e3;return a&&this.logger.debug("Request #".concat(c,": Node ").concat(r.index," has exceeded healtcheckIntervalSeconds of ").concat(this.healthcheckIntervalSeconds,". Adding it back into rotation.")),a},u.prototype.initializeMetadataForNodes=function(){var r=this;this.nearestNode!=null&&(this.nearestNode.index="nearestNode",this.setNodeHealthcheck(this.nearestNode,s)),this.nodes.forEach(function(c,a){c.index=a,r.setNodeHealthcheck(c,s)})},u.prototype.setNodeHealthcheck=function(r,c){r.isHealthy=c,r.lastAccessTimestamp=Date.now()},u.prototype.uriFor=function(r,c){return c.url!=null?"".concat(c.url).concat(r):"".concat(c.protocol,"://").concat(c.host,":").concat(c.port).concat(c.path).concat(r)},u.prototype.defaultHeaders=function(){var r={};return this.sendApiKeyAsQueryParam||(r[i]=this.apiKey),r["Content-Type"]="application/json",r},u.prototype.timer=function(r){return d(this,void 0,void 0,function(){return l(this,function(c){return[2,new Promise(function(a){return setTimeout(a,r*1e3)})]})})},u.prototype.customErrorForResponse=function(r,c){var a="Request failed with HTTP code ".concat(r.status);typeof c=="string"&&c.trim()!==""&&(a+=" | Server said: ".concat(c));var o=new f.default(a);return r.status===400?o=new h.RequestMalformed(a):r.status===401?o=new h.RequestUnauthorized(a):r.status===404?o=new h.ObjectNotFound(a):r.status===409?o=new h.ObjectAlreadyExists(a):r.status===422?o=new h.ObjectUnprocessable(a):r.status>=500&&r.status<=599?o=new h.ServerError(a):o=new h.HTTPError(a),o.httpStatus=r.status,o},u}();return Ne.default=e,Ne}var De={},Lt;function re(){if(Lt)return De;Lt=1;var d=g&&g.__awaiter||function(h,f,i,s){function t(e){return e instanceof i?e:new i(function(u){u(e)})}return new(i||(i=Promise))(function(e,u){function r(o){try{a(s.next(o))}catch(n){u(n)}}function c(o){try{a(s.throw(o))}catch(n){u(n)}}function a(o){o.done?e(o.value):t(o.value).then(r,c)}a((s=s.apply(h,f||[])).next())})},l=g&&g.__generator||function(h,f){var i={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},s,t,e,u;return u={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function r(a){return function(o){return c([a,o])}}function c(a){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,t&&(e=a[0]&2?t.return:a[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,a[1])).done)return e;switch(t=0,e&&(a=[a[0]&2,e.value]),a[0]){case 0:case 1:e=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,t=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(e=i.trys,!(e=e.length>0&&e[e.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!e||a[1]>e[0]&&a[1]<e[3])){i.label=a[1];break}if(a[0]===6&&i.label<e[1]){i.label=e[1],e=a;break}if(e&&i.label<e[2]){i.label=e[2],i.ops.push(a);break}e[2]&&i.ops.pop(),i.trys.pop();continue}a=f.call(h,i)}catch(o){a=[6,o],t=0}finally{s=e=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(De,"__esModule",{value:!0});var v="/collections",y=function(){function h(f){this.apiCall=f}return h.prototype.create=function(f,i){return i===void 0&&(i={}),d(this,void 0,void 0,function(){return l(this,function(s){return[2,this.apiCall.post(v,f,i)]})})},h.prototype.retrieve=function(){return d(this,void 0,void 0,function(){return l(this,function(f){return[2,this.apiCall.get(v)]})})},Object.defineProperty(h,"RESOURCEPATH",{get:function(){return v},enumerable:!1,configurable:!0}),h}();return De.default=y,De}var Me={},Fe={},ce={},He={},Ut;function xr(){if(Ut)return He;Ut=1;var d=g&&g.__awaiter||function(i,s,t,e){function u(r){return r instanceof t?r:new t(function(c){c(r)})}return new(t||(t=Promise))(function(r,c){function a(p){try{n(e.next(p))}catch(_){c(_)}}function o(p){try{n(e.throw(p))}catch(_){c(_)}}function n(p){p.done?r(p.value):u(p.value).then(a,o)}n((e=e.apply(i,s||[])).next())})},l=g&&g.__generator||function(i,s){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},e,u,r,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(n){return function(p){return o([n,p])}}function o(n){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,u&&(r=n[0]&2?u.return:n[0]?u.throw||((r=u.return)&&r.call(u),0):u.next)&&!(r=r.call(u,n[1])).done)return r;switch(u=0,r&&(n=[n[0]&2,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,u=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!r||n[1]>r[0]&&n[1]<r[3])){t.label=n[1];break}if(n[0]===6&&t.label<r[1]){t.label=r[1],r=n;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(n);break}r[2]&&t.ops.pop(),t.trys.pop();continue}n=s.call(i,t)}catch(p){n=[6,p],u=0}finally{e=r=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},v=g&&g.__spreadArray||function(i,s,t){if(t||arguments.length===2)for(var e=0,u=s.length,r;e<u;e++)(r||!(e in s))&&(r||(r=Array.prototype.slice.call(s,0,e)),r[e]=s[e]);return i.concat(r||Array.prototype.slice.call(s))};Object.defineProperty(He,"__esModule",{value:!0});var y=2*60,h=100,f=function(){function i(){this.responseCache=new Map,this.responsePromiseCache=new Map}return i.prototype.clearCache=function(){this.responseCache=new Map,this.responsePromiseCache=new Map},i.prototype.perform=function(s,t,e,u){return d(this,void 0,void 0,function(){var r,c,a,o,n,p,_,m,R,w,R,b,E,q,N,T,N;return l(this,function(M){switch(M.label){case 0:if(r=u.cacheResponseForSeconds,c=r===void 0?y:r,a=u.maxSize,o=a===void 0?h:a,n=c<=0||o<=0,n)return[2,t.call.apply(t,v([s],e,!1))];if(p=JSON.stringify(e),_=this.responseCache.get(p),m=Date.now(),_){if(R=m-_.requestTimestamp<c*1e3,R)return this.responseCache.delete(p),this.responseCache.set(p,_),[2,Promise.resolve(_.response)];this.responseCache.delete(p)}if(w=this.responsePromiseCache.get(p),w){if(R=m-w.requestTimestamp<c*1e3,R)return this.responsePromiseCache.delete(p),this.responsePromiseCache.set(p,w),[2,w.responsePromise];this.responsePromiseCache.delete(p)}return b=t.call.apply(t,v([s],e,!1)),this.responsePromiseCache.set(p,{requestTimestamp:m,responsePromise:b}),[4,b];case 1:return E=M.sent(),this.responseCache.set(p,{requestTimestamp:m,response:E}),q=this.responseCache.size>o,q&&(N=this.responseCache.keys().next().value,this.responseCache.delete(N)),T=this.responsePromiseCache.size>o,T&&(N=this.responsePromiseCache.keys().next().value,this.responsePromiseCache.delete(N)),[2,E]}})})},i}();return He.default=f,He}var It;function Ar(){if(It)return ce;It=1;var d=g&&g.__awaiter||function(s,t,e,u){function r(c){return c instanceof e?c:new e(function(a){a(c)})}return new(e||(e=Promise))(function(c,a){function o(_){try{p(u.next(_))}catch(m){a(m)}}function n(_){try{p(u.throw(_))}catch(m){a(m)}}function p(_){_.done?c(_.value):r(_.value).then(o,n)}p((u=u.apply(s,t||[])).next())})},l=g&&g.__generator||function(s,t){var e={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},u,r,c,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(p){return function(_){return n([p,_])}}function n(p){if(u)throw new TypeError("Generator is already executing.");for(;e;)try{if(u=1,r&&(c=p[0]&2?r.return:p[0]?r.throw||((c=r.return)&&c.call(r),0):r.next)&&!(c=c.call(r,p[1])).done)return c;switch(r=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return e.label++,{value:p[1],done:!1};case 5:e.label++,r=p[1],p=[0];continue;case 7:p=e.ops.pop(),e.trys.pop();continue;default:if(c=e.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){e=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){e.label=p[1];break}if(p[0]===6&&e.label<c[1]){e.label=c[1],c=p;break}if(c&&e.label<c[2]){e.label=c[2],e.ops.push(p);break}c[2]&&e.ops.pop(),e.trys.pop();continue}p=t.call(s,e)}catch(_){p=[6,_],r=0}finally{u=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},v=g&&g.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ce,"__esModule",{value:!0}),ce.SearchOnlyDocuments=void 0;var y=v(xr()),h=v(re()),f="/documents",i=function(){function s(t,e,u){this.collectionName=t,this.apiCall=e,this.configuration=u,this.requestWithCache=new y.default}return s.prototype.clearCache=function(){this.requestWithCache.clearCache()},s.prototype.search=function(t,e){var u=e===void 0?{}:e,r=u.cacheSearchResultsForSeconds,c=r===void 0?this.configuration.cacheSearchResultsForSeconds:r,a=u.abortSignal,o=a===void 0?null:a;return d(this,void 0,void 0,function(){var n,p,_;return l(this,function(m){n={},this.configuration.useServerSideSearchCache===!0&&(n.use_cache=!0);for(p in t)Array.isArray(t[p])&&(n[p]=t[p].join(","));return _=Object.assign({},t,n),[2,this.requestWithCache.perform(this.apiCall,this.apiCall.get,[this.endpointPath("search"),_,{abortSignal:o}],{cacheResponseForSeconds:c})]})})},s.prototype.endpointPath=function(t){return"".concat(h.default.RESOURCEPATH,"/").concat(this.collectionName).concat(f).concat(t===void 0?"":"/"+t)},Object.defineProperty(s,"RESOURCEPATH",{get:function(){return f},enumerable:!1,configurable:!0}),s}();return ce.SearchOnlyDocuments=i,ce}var $t;function jr(){if($t)return Fe;$t=1;var d=g&&g.__extends||function(){var i=function(s,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,u){e.__proto__=u}||function(e,u){for(var r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r])},i(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(s,t);function e(){this.constructor=s}s.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),l=g&&g.__awaiter||function(i,s,t,e){function u(r){return r instanceof t?r:new t(function(c){c(r)})}return new(t||(t=Promise))(function(r,c){function a(p){try{n(e.next(p))}catch(_){c(_)}}function o(p){try{n(e.throw(p))}catch(_){c(_)}}function n(p){p.done?r(p.value):u(p.value).then(a,o)}n((e=e.apply(i,s||[])).next())})},v=g&&g.__generator||function(i,s){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},e,u,r,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(n){return function(p){return o([n,p])}}function o(n){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,u&&(r=n[0]&2?u.return:n[0]?u.throw||((r=u.return)&&r.call(u),0):u.next)&&!(r=r.call(u,n[1])).done)return r;switch(u=0,r&&(n=[n[0]&2,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,u=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!r||n[1]>r[0]&&n[1]<r[3])){t.label=n[1];break}if(n[0]===6&&t.label<r[1]){t.label=r[1],r=n;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(n);break}r[2]&&t.ops.pop(),t.trys.pop();continue}n=s.call(i,t)}catch(p){n=[6,p],u=0}finally{e=r=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}};Object.defineProperty(Fe,"__esModule",{value:!0});var y=me(),h=Ar(),f=function(i){d(s,i);function s(t,e,u){return i.call(this,t,e,u)||this}return s.prototype.create=function(t,e){return e===void 0&&(e={}),l(this,void 0,void 0,function(){return v(this,function(u){if(!t)throw new Error("No document provided");return[2,this.apiCall.post(this.endpointPath(),t,e)]})})},s.prototype.upsert=function(t,e){return e===void 0&&(e={}),l(this,void 0,void 0,function(){return v(this,function(u){if(!t)throw new Error("No document provided");return[2,this.apiCall.post(this.endpointPath(),t,Object.assign({},e,{action:"upsert"}))]})})},s.prototype.update=function(t,e){return e===void 0&&(e={}),l(this,void 0,void 0,function(){return v(this,function(u){if(!t)throw new Error("No document provided");return e.filter_by!=null?[2,this.apiCall.patch(this.endpointPath(),t,Object.assign({},e))]:[2,this.apiCall.post(this.endpointPath(),t,Object.assign({},e,{action:"update"}))]})})},s.prototype.delete=function(t){return t===void 0&&(t={}),l(this,void 0,void 0,function(){return v(this,function(e){return typeof t=="string"?[2,this.apiCall.delete(this.endpointPath(t),t)]:[2,this.apiCall.delete(this.endpointPath(),t)]})})},s.prototype.createMany=function(t,e){return e===void 0&&(e={}),l(this,void 0,void 0,function(){return v(this,function(u){return this.configuration.logger.warn("createMany is deprecated and will be removed in a future version. Use import instead, which now takes both an array of documents or a JSONL string of documents"),[2,this.import(t,e)]})})},s.prototype.import=function(t,e){return e===void 0&&(e={}),l(this,void 0,void 0,function(){var u,r,c,a;return v(this,function(o){switch(o.label){case 0:if(Array.isArray(t))try{u=t.map(function(n){return JSON.stringify(n)}).join(`
`)}catch(n){throw RangeError instanceof n&&(n!=null&&n.includes("Too many properties to enumerate"))?new Error("".concat(n,`
          It looks like you have reached a Node.js limit that restricts the number of keys in an Object: https://stackoverflow.com/questions/9282869/are-there-limits-to-the-number-of-properties-in-a-javascript-object

          Please try reducing the number of keys in your document, or using CURL to import your data.
          `)):new Error(n)}else u=t;return[4,this.apiCall.performRequest("post",this.endpointPath("import"),{queryParameters:e,bodyParameters:u,additionalHeaders:{"Content-Type":"text/plain"},skipConnectionTimeout:!0})];case 1:if(r=o.sent(),Array.isArray(t)){if(c=r.split(`
`).map(function(n){return JSON.parse(n)}),a=c.filter(function(n){return n.success===!1}),a.length>0)throw new y.ImportError("".concat(c.length-a.length," documents imported successfully, ").concat(a.length," documents failed during import. Use `error.importResults` from the raised exception to get a detailed error reason for each document."),c);return[2,c]}else return[2,r]}})})},s.prototype.export=function(t){return t===void 0&&(t={}),l(this,void 0,void 0,function(){return v(this,function(e){return[2,this.apiCall.get(this.endpointPath("export"),t)]})})},s.prototype.exportStream=function(t){return t===void 0&&(t={}),l(this,void 0,void 0,function(){return v(this,function(e){return[2,this.apiCall.get(this.endpointPath("export"),t,{responseType:"stream"})]})})},s}(h.SearchOnlyDocuments);return Fe.default=f,Fe}var Le={},Gt;function kr(){if(Gt)return Le;Gt=1;var d=g&&g.__awaiter||function(i,s,t,e){function u(r){return r instanceof t?r:new t(function(c){c(r)})}return new(t||(t=Promise))(function(r,c){function a(p){try{n(e.next(p))}catch(_){c(_)}}function o(p){try{n(e.throw(p))}catch(_){c(_)}}function n(p){p.done?r(p.value):u(p.value).then(a,o)}n((e=e.apply(i,s||[])).next())})},l=g&&g.__generator||function(i,s){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},e,u,r,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(n){return function(p){return o([n,p])}}function o(n){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,u&&(r=n[0]&2?u.return:n[0]?u.throw||((r=u.return)&&r.call(u),0):u.next)&&!(r=r.call(u,n[1])).done)return r;switch(u=0,r&&(n=[n[0]&2,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,u=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!r||n[1]>r[0]&&n[1]<r[3])){t.label=n[1];break}if(n[0]===6&&t.label<r[1]){t.label=r[1],r=n;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(n);break}r[2]&&t.ops.pop(),t.trys.pop();continue}n=s.call(i,t)}catch(p){n=[6,p],u=0}finally{e=r=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},v=g&&g.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Le,"__esModule",{value:!0});var y=v(re()),h="/overrides",f=function(){function i(s,t){this.collectionName=s,this.apiCall=t}return i.prototype.upsert=function(s,t){return d(this,void 0,void 0,function(){return l(this,function(e){return[2,this.apiCall.put(this.endpointPath(s),t)]})})},i.prototype.retrieve=function(){return d(this,void 0,void 0,function(){return l(this,function(s){return[2,this.apiCall.get(this.endpointPath())]})})},i.prototype.endpointPath=function(s){return"".concat(y.default.RESOURCEPATH,"/").concat(this.collectionName).concat(i.RESOURCEPATH).concat(s===void 0?"":"/"+s)},Object.defineProperty(i,"RESOURCEPATH",{get:function(){return h},enumerable:!1,configurable:!0}),i}();return Le.default=f,Le}var Ue={},Bt;function Yn(){if(Bt)return Ue;Bt=1;var d=g&&g.__awaiter||function(i,s,t,e){function u(r){return r instanceof t?r:new t(function(c){c(r)})}return new(t||(t=Promise))(function(r,c){function a(p){try{n(e.next(p))}catch(_){c(_)}}function o(p){try{n(e.throw(p))}catch(_){c(_)}}function n(p){p.done?r(p.value):u(p.value).then(a,o)}n((e=e.apply(i,s||[])).next())})},l=g&&g.__generator||function(i,s){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},e,u,r,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(n){return function(p){return o([n,p])}}function o(n){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,u&&(r=n[0]&2?u.return:n[0]?u.throw||((r=u.return)&&r.call(u),0):u.next)&&!(r=r.call(u,n[1])).done)return r;switch(u=0,r&&(n=[n[0]&2,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,u=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!r||n[1]>r[0]&&n[1]<r[3])){t.label=n[1];break}if(n[0]===6&&t.label<r[1]){t.label=r[1],r=n;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(n);break}r[2]&&t.ops.pop(),t.trys.pop();continue}n=s.call(i,t)}catch(p){n=[6,p],u=0}finally{e=r=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},v=g&&g.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ue,"__esModule",{value:!0});var y=v(re()),h=v(kr()),f=function(){function i(s,t,e){this.collectionName=s,this.overrideId=t,this.apiCall=e}return i.prototype.retrieve=function(){return d(this,void 0,void 0,function(){return l(this,function(s){return[2,this.apiCall.get(this.endpointPath())]})})},i.prototype.delete=function(){return d(this,void 0,void 0,function(){return l(this,function(s){return[2,this.apiCall.delete(this.endpointPath())]})})},i.prototype.endpointPath=function(){return"".concat(y.default.RESOURCEPATH,"/").concat(this.collectionName).concat(h.default.RESOURCEPATH,"/").concat(this.overrideId)},i}();return Ue.default=f,Ue}var Ie={},Kt;function qr(){if(Kt)return Ie;Kt=1;var d=g&&g.__awaiter||function(i,s,t,e){function u(r){return r instanceof t?r:new t(function(c){c(r)})}return new(t||(t=Promise))(function(r,c){function a(p){try{n(e.next(p))}catch(_){c(_)}}function o(p){try{n(e.throw(p))}catch(_){c(_)}}function n(p){p.done?r(p.value):u(p.value).then(a,o)}n((e=e.apply(i,s||[])).next())})},l=g&&g.__generator||function(i,s){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},e,u,r,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(n){return function(p){return o([n,p])}}function o(n){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,u&&(r=n[0]&2?u.return:n[0]?u.throw||((r=u.return)&&r.call(u),0):u.next)&&!(r=r.call(u,n[1])).done)return r;switch(u=0,r&&(n=[n[0]&2,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,u=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!r||n[1]>r[0]&&n[1]<r[3])){t.label=n[1];break}if(n[0]===6&&t.label<r[1]){t.label=r[1],r=n;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(n);break}r[2]&&t.ops.pop(),t.trys.pop();continue}n=s.call(i,t)}catch(p){n=[6,p],u=0}finally{e=r=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},v=g&&g.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ie,"__esModule",{value:!0});var y=v(re()),h="/synonyms",f=function(){function i(s,t){this.collectionName=s,this.apiCall=t}return i.prototype.upsert=function(s,t){return d(this,void 0,void 0,function(){return l(this,function(e){return[2,this.apiCall.put(this.endpointPath(s),t)]})})},i.prototype.retrieve=function(){return d(this,void 0,void 0,function(){return l(this,function(s){return[2,this.apiCall.get(this.endpointPath())]})})},i.prototype.endpointPath=function(s){return"".concat(y.default.RESOURCEPATH,"/").concat(this.collectionName).concat(i.RESOURCEPATH).concat(s===void 0?"":"/"+s)},Object.defineProperty(i,"RESOURCEPATH",{get:function(){return h},enumerable:!1,configurable:!0}),i}();return Ie.default=f,Ie}var $e={},Wt;function Vn(){if(Wt)return $e;Wt=1;var d=g&&g.__awaiter||function(i,s,t,e){function u(r){return r instanceof t?r:new t(function(c){c(r)})}return new(t||(t=Promise))(function(r,c){function a(p){try{n(e.next(p))}catch(_){c(_)}}function o(p){try{n(e.throw(p))}catch(_){c(_)}}function n(p){p.done?r(p.value):u(p.value).then(a,o)}n((e=e.apply(i,s||[])).next())})},l=g&&g.__generator||function(i,s){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},e,u,r,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(n){return function(p){return o([n,p])}}function o(n){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,u&&(r=n[0]&2?u.return:n[0]?u.throw||((r=u.return)&&r.call(u),0):u.next)&&!(r=r.call(u,n[1])).done)return r;switch(u=0,r&&(n=[n[0]&2,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,u=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!r||n[1]>r[0]&&n[1]<r[3])){t.label=n[1];break}if(n[0]===6&&t.label<r[1]){t.label=r[1],r=n;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(n);break}r[2]&&t.ops.pop(),t.trys.pop();continue}n=s.call(i,t)}catch(p){n=[6,p],u=0}finally{e=r=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},v=g&&g.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty($e,"__esModule",{value:!0});var y=v(re()),h=v(qr()),f=function(){function i(s,t,e){this.collectionName=s,this.synonymId=t,this.apiCall=e}return i.prototype.retrieve=function(){return d(this,void 0,void 0,function(){return l(this,function(s){return[2,this.apiCall.get(this.endpointPath())]})})},i.prototype.delete=function(){return d(this,void 0,void 0,function(){return l(this,function(s){return[2,this.apiCall.delete(this.endpointPath())]})})},i.prototype.endpointPath=function(){return"".concat(y.default.RESOURCEPATH,"/").concat(this.collectionName).concat(h.default.RESOURCEPATH,"/").concat(this.synonymId)},i}();return $e.default=f,$e}var le={},zt;function Zn(){if(zt)return le;zt=1;var d=g&&g.__awaiter||function(i,s,t,e){function u(r){return r instanceof t?r:new t(function(c){c(r)})}return new(t||(t=Promise))(function(r,c){function a(p){try{n(e.next(p))}catch(_){c(_)}}function o(p){try{n(e.throw(p))}catch(_){c(_)}}function n(p){p.done?r(p.value):u(p.value).then(a,o)}n((e=e.apply(i,s||[])).next())})},l=g&&g.__generator||function(i,s){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},e,u,r,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(n){return function(p){return o([n,p])}}function o(n){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,u&&(r=n[0]&2?u.return:n[0]?u.throw||((r=u.return)&&r.call(u),0):u.next)&&!(r=r.call(u,n[1])).done)return r;switch(u=0,r&&(n=[n[0]&2,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,u=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!r||n[1]>r[0]&&n[1]<r[3])){t.label=n[1];break}if(n[0]===6&&t.label<r[1]){t.label=r[1],r=n;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(n);break}r[2]&&t.ops.pop(),t.trys.pop();continue}n=s.call(i,t)}catch(p){n=[6,p],u=0}finally{e=r=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},v=g&&g.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(le,"__esModule",{value:!0}),le.Document=void 0;var y=v(re()),h=v(jr()),f=function(){function i(s,t,e){this.collectionName=s,this.documentId=t,this.apiCall=e}return i.prototype.retrieve=function(){return d(this,void 0,void 0,function(){return l(this,function(s){return[2,this.apiCall.get(this.endpointPath())]})})},i.prototype.delete=function(){return d(this,void 0,void 0,function(){return l(this,function(s){return[2,this.apiCall.delete(this.endpointPath())]})})},i.prototype.update=function(s,t){return t===void 0&&(t={}),d(this,void 0,void 0,function(){return l(this,function(e){return[2,this.apiCall.patch(this.endpointPath(),s,t)]})})},i.prototype.endpointPath=function(){return"".concat(y.default.RESOURCEPATH,"/").concat(this.collectionName).concat(h.default.RESOURCEPATH,"/").concat(this.documentId)},i}();return le.Document=f,le}var Qt;function ei(){if(Qt)return Me;Qt=1;var d=g&&g.__awaiter||function(c,a,o,n){function p(_){return _ instanceof o?_:new o(function(m){m(_)})}return new(o||(o=Promise))(function(_,m){function w(E){try{b(n.next(E))}catch(q){m(q)}}function R(E){try{b(n.throw(E))}catch(q){m(q)}}function b(E){E.done?_(E.value):p(E.value).then(w,R)}b((n=n.apply(c,a||[])).next())})},l=g&&g.__generator||function(c,a){var o={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},n,p,_,m;return m={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function w(b){return function(E){return R([b,E])}}function R(b){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,p&&(_=b[0]&2?p.return:b[0]?p.throw||((_=p.return)&&_.call(p),0):p.next)&&!(_=_.call(p,b[1])).done)return _;switch(p=0,_&&(b=[b[0]&2,_.value]),b[0]){case 0:case 1:_=b;break;case 4:return o.label++,{value:b[1],done:!1};case 5:o.label++,p=b[1],b=[0];continue;case 7:b=o.ops.pop(),o.trys.pop();continue;default:if(_=o.trys,!(_=_.length>0&&_[_.length-1])&&(b[0]===6||b[0]===2)){o=0;continue}if(b[0]===3&&(!_||b[1]>_[0]&&b[1]<_[3])){o.label=b[1];break}if(b[0]===6&&o.label<_[1]){o.label=_[1],_=b;break}if(_&&o.label<_[2]){o.label=_[2],o.ops.push(b);break}_[2]&&o.ops.pop(),o.trys.pop();continue}b=a.call(c,o)}catch(E){b=[6,E],p=0}finally{n=_=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},v=g&&g.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Me,"__esModule",{value:!0});var y=v(re()),h=v(jr()),f=me(),i=v(kr()),s=v(Yn()),t=v(qr()),e=v(Vn()),u=Zn(),r=function(){function c(a,o,n){this.name=a,this.apiCall=o,this.configuration=n,this.individualDocuments={},this.individualOverrides={},this.individualSynonyms={},this.name=a,this.apiCall=o,this.configuration=n,this._documents=new h.default(this.name,this.apiCall,this.configuration),this._overrides=new i.default(this.name,this.apiCall),this._synonyms=new t.default(this.name,this.apiCall)}return c.prototype.retrieve=function(){return d(this,void 0,void 0,function(){return l(this,function(a){return[2,this.apiCall.get(this.endpointPath())]})})},c.prototype.update=function(a){return d(this,void 0,void 0,function(){return l(this,function(o){return[2,this.apiCall.patch(this.endpointPath(),a)]})})},c.prototype.delete=function(){return d(this,void 0,void 0,function(){return l(this,function(a){return[2,this.apiCall.delete(this.endpointPath())]})})},c.prototype.exists=function(){return d(this,void 0,void 0,function(){var a;return l(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.retrieve()];case 1:return o.sent(),[2,!0];case 2:if(a=o.sent(),a instanceof f.ObjectNotFound)return[2,!1];throw a;case 3:return[2]}})})},c.prototype.documents=function(a){return a?(this.individualDocuments[a]===void 0&&(this.individualDocuments[a]=new u.Document(this.name,a,this.apiCall)),this.individualDocuments[a]):this._documents},c.prototype.overrides=function(a){return a===void 0?this._overrides:(this.individualOverrides[a]===void 0&&(this.individualOverrides[a]=new s.default(this.name,a,this.apiCall)),this.individualOverrides[a])},c.prototype.synonyms=function(a){return a===void 0?this._synonyms:(this.individualSynonyms[a]===void 0&&(this.individualSynonyms[a]=new e.default(this.name,a,this.apiCall)),this.individualSynonyms[a])},c.prototype.endpointPath=function(){return"".concat(y.default.RESOURCEPATH,"/").concat(this.name)},c}();return Me.default=r,Me}var Ge={},Jt;function Nr(){if(Jt)return Ge;Jt=1;var d=g&&g.__awaiter||function(h,f,i,s){function t(e){return e instanceof i?e:new i(function(u){u(e)})}return new(i||(i=Promise))(function(e,u){function r(o){try{a(s.next(o))}catch(n){u(n)}}function c(o){try{a(s.throw(o))}catch(n){u(n)}}function a(o){o.done?e(o.value):t(o.value).then(r,c)}a((s=s.apply(h,f||[])).next())})},l=g&&g.__generator||function(h,f){var i={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},s,t,e,u;return u={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function r(a){return function(o){return c([a,o])}}function c(a){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,t&&(e=a[0]&2?t.return:a[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,a[1])).done)return e;switch(t=0,e&&(a=[a[0]&2,e.value]),a[0]){case 0:case 1:e=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,t=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(e=i.trys,!(e=e.length>0&&e[e.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!e||a[1]>e[0]&&a[1]<e[3])){i.label=a[1];break}if(a[0]===6&&i.label<e[1]){i.label=e[1],e=a;break}if(e&&i.label<e[2]){i.label=e[2],i.ops.push(a);break}e[2]&&i.ops.pop(),i.trys.pop();continue}a=f.call(h,i)}catch(o){a=[6,o],t=0}finally{s=e=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(Ge,"__esModule",{value:!0});var v="/aliases",y=function(){function h(f){this.apiCall=f}return h.prototype.upsert=function(f,i){return d(this,void 0,void 0,function(){return l(this,function(s){return[2,this.apiCall.put(this.endpointPath(f),i)]})})},h.prototype.retrieve=function(){return d(this,void 0,void 0,function(){return l(this,function(f){return[2,this.apiCall.get(v)]})})},h.prototype.endpointPath=function(f){return"".concat(h.RESOURCEPATH,"/").concat(f)},Object.defineProperty(h,"RESOURCEPATH",{get:function(){return v},enumerable:!1,configurable:!0}),h}();return Ge.default=y,Ge}var Be={},Xt;function ti(){if(Xt)return Be;Xt=1;var d=g&&g.__awaiter||function(f,i,s,t){function e(u){return u instanceof s?u:new s(function(r){r(u)})}return new(s||(s=Promise))(function(u,r){function c(n){try{o(t.next(n))}catch(p){r(p)}}function a(n){try{o(t.throw(n))}catch(p){r(p)}}function o(n){n.done?u(n.value):e(n.value).then(c,a)}o((t=t.apply(f,i||[])).next())})},l=g&&g.__generator||function(f,i){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},t,e,u,r;return r={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function c(o){return function(n){return a([o,n])}}function a(o){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,e&&(u=o[0]&2?e.return:o[0]?e.throw||((u=e.return)&&u.call(e),0):e.next)&&!(u=u.call(e,o[1])).done)return u;switch(e=0,u&&(o=[o[0]&2,u.value]),o[0]){case 0:case 1:u=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,e=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(o[0]===6||o[0]===2)){s=0;continue}if(o[0]===3&&(!u||o[1]>u[0]&&o[1]<u[3])){s.label=o[1];break}if(o[0]===6&&s.label<u[1]){s.label=u[1],u=o;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(o);break}u[2]&&s.ops.pop(),s.trys.pop();continue}o=i.call(f,s)}catch(n){o=[6,n],e=0}finally{t=u=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},v=g&&g.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(Be,"__esModule",{value:!0});var y=v(Nr()),h=function(){function f(i,s){this.name=i,this.apiCall=s}return f.prototype.retrieve=function(){return d(this,void 0,void 0,function(){return l(this,function(i){return[2,this.apiCall.get(this.endpointPath())]})})},f.prototype.delete=function(){return d(this,void 0,void 0,function(){return l(this,function(i){return[2,this.apiCall.delete(this.endpointPath())]})})},f.prototype.endpointPath=function(){return"".concat(y.default.RESOURCEPATH,"/").concat(this.name)},f}();return Be.default=h,Be}var Ke={},Yt;function Dr(){if(Yt)return Ke;Yt=1;var d=g&&g.__awaiter||function(f,i,s,t){function e(u){return u instanceof s?u:new s(function(r){r(u)})}return new(s||(s=Promise))(function(u,r){function c(n){try{o(t.next(n))}catch(p){r(p)}}function a(n){try{o(t.throw(n))}catch(p){r(p)}}function o(n){n.done?u(n.value):e(n.value).then(c,a)}o((t=t.apply(f,i||[])).next())})},l=g&&g.__generator||function(f,i){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},t,e,u,r;return r={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function c(o){return function(n){return a([o,n])}}function a(o){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,e&&(u=o[0]&2?e.return:o[0]?e.throw||((u=e.return)&&u.call(e),0):e.next)&&!(u=u.call(e,o[1])).done)return u;switch(e=0,u&&(o=[o[0]&2,u.value]),o[0]){case 0:case 1:u=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,e=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(o[0]===6||o[0]===2)){s=0;continue}if(o[0]===3&&(!u||o[1]>u[0]&&o[1]<u[3])){s.label=o[1];break}if(o[0]===6&&s.label<u[1]){s.label=u[1],u=o;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(o);break}u[2]&&s.ops.pop(),s.trys.pop();continue}o=i.call(f,s)}catch(n){o=[6,n],e=0}finally{t=u=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(Ke,"__esModule",{value:!0});var v=Wr,y="/keys",h=function(){function f(i){this.apiCall=i,this.apiCall=i}return f.prototype.create=function(i){return d(this,void 0,void 0,function(){return l(this,function(s){return[2,this.apiCall.post(f.RESOURCEPATH,i)]})})},f.prototype.retrieve=function(){return d(this,void 0,void 0,function(){return l(this,function(i){return[2,this.apiCall.get(y)]})})},f.prototype.generateScopedSearchKey=function(i,s){var t=JSON.stringify(s),e=Buffer.from((0,v.createHmac)("sha256",i).update(t).digest("base64")),u=i.substr(0,4),r="".concat(e).concat(u).concat(t);return Buffer.from(r).toString("base64")},Object.defineProperty(f,"RESOURCEPATH",{get:function(){return y},enumerable:!1,configurable:!0}),f}();return Ke.default=h,Ke}var We={},Vt;function ri(){if(Vt)return We;Vt=1;var d=g&&g.__awaiter||function(f,i,s,t){function e(u){return u instanceof s?u:new s(function(r){r(u)})}return new(s||(s=Promise))(function(u,r){function c(n){try{o(t.next(n))}catch(p){r(p)}}function a(n){try{o(t.throw(n))}catch(p){r(p)}}function o(n){n.done?u(n.value):e(n.value).then(c,a)}o((t=t.apply(f,i||[])).next())})},l=g&&g.__generator||function(f,i){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},t,e,u,r;return r={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function c(o){return function(n){return a([o,n])}}function a(o){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,e&&(u=o[0]&2?e.return:o[0]?e.throw||((u=e.return)&&u.call(e),0):e.next)&&!(u=u.call(e,o[1])).done)return u;switch(e=0,u&&(o=[o[0]&2,u.value]),o[0]){case 0:case 1:u=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,e=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(o[0]===6||o[0]===2)){s=0;continue}if(o[0]===3&&(!u||o[1]>u[0]&&o[1]<u[3])){s.label=o[1];break}if(o[0]===6&&s.label<u[1]){s.label=u[1],u=o;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(o);break}u[2]&&s.ops.pop(),s.trys.pop();continue}o=i.call(f,s)}catch(n){o=[6,n],e=0}finally{t=u=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},v=g&&g.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(We,"__esModule",{value:!0});var y=v(Dr()),h=function(){function f(i,s){this.id=i,this.apiCall=s}return f.prototype.retrieve=function(){return d(this,void 0,void 0,function(){return l(this,function(i){return[2,this.apiCall.get(this.endpointPath())]})})},f.prototype.delete=function(){return d(this,void 0,void 0,function(){return l(this,function(i){return[2,this.apiCall.delete(this.endpointPath())]})})},f.prototype.endpointPath=function(){return"".concat(y.default.RESOURCEPATH,"/").concat(this.id)},f}();return We.default=h,We}var ze={},Zt;function ni(){if(Zt)return ze;Zt=1;var d=g&&g.__awaiter||function(h,f,i,s){function t(e){return e instanceof i?e:new i(function(u){u(e)})}return new(i||(i=Promise))(function(e,u){function r(o){try{a(s.next(o))}catch(n){u(n)}}function c(o){try{a(s.throw(o))}catch(n){u(n)}}function a(o){o.done?e(o.value):t(o.value).then(r,c)}a((s=s.apply(h,f||[])).next())})},l=g&&g.__generator||function(h,f){var i={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},s,t,e,u;return u={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function r(a){return function(o){return c([a,o])}}function c(a){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,t&&(e=a[0]&2?t.return:a[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,a[1])).done)return e;switch(t=0,e&&(a=[a[0]&2,e.value]),a[0]){case 0:case 1:e=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,t=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(e=i.trys,!(e=e.length>0&&e[e.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!e||a[1]>e[0]&&a[1]<e[3])){i.label=a[1];break}if(a[0]===6&&i.label<e[1]){i.label=e[1],e=a;break}if(e&&i.label<e[2]){i.label=e[2],i.ops.push(a);break}e[2]&&i.ops.pop(),i.trys.pop();continue}a=f.call(h,i)}catch(o){a=[6,o],t=0}finally{s=e=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(ze,"__esModule",{value:!0});var v="/debug",y=function(){function h(f){this.apiCall=f}return h.prototype.retrieve=function(){return d(this,void 0,void 0,function(){return l(this,function(f){return[2,this.apiCall.get(v)]})})},h}();return ze.default=y,ze}var Qe={},er;function ii(){if(er)return Qe;er=1;var d=g&&g.__awaiter||function(h,f,i,s){function t(e){return e instanceof i?e:new i(function(u){u(e)})}return new(i||(i=Promise))(function(e,u){function r(o){try{a(s.next(o))}catch(n){u(n)}}function c(o){try{a(s.throw(o))}catch(n){u(n)}}function a(o){o.done?e(o.value):t(o.value).then(r,c)}a((s=s.apply(h,f||[])).next())})},l=g&&g.__generator||function(h,f){var i={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},s,t,e,u;return u={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function r(a){return function(o){return c([a,o])}}function c(a){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,t&&(e=a[0]&2?t.return:a[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,a[1])).done)return e;switch(t=0,e&&(a=[a[0]&2,e.value]),a[0]){case 0:case 1:e=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,t=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(e=i.trys,!(e=e.length>0&&e[e.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!e||a[1]>e[0]&&a[1]<e[3])){i.label=a[1];break}if(a[0]===6&&i.label<e[1]){i.label=e[1],e=a;break}if(e&&i.label<e[2]){i.label=e[2],i.ops.push(a);break}e[2]&&i.ops.pop(),i.trys.pop();continue}a=f.call(h,i)}catch(o){a=[6,o],t=0}finally{s=e=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(Qe,"__esModule",{value:!0});var v="/metrics.json",y=function(){function h(f){this.apiCall=f}return h.prototype.retrieve=function(){return d(this,void 0,void 0,function(){return l(this,function(f){return[2,this.apiCall.get(v)]})})},h}();return Qe.default=y,Qe}var Je={},tr;function ai(){if(tr)return Je;tr=1;var d=g&&g.__awaiter||function(h,f,i,s){function t(e){return e instanceof i?e:new i(function(u){u(e)})}return new(i||(i=Promise))(function(e,u){function r(o){try{a(s.next(o))}catch(n){u(n)}}function c(o){try{a(s.throw(o))}catch(n){u(n)}}function a(o){o.done?e(o.value):t(o.value).then(r,c)}a((s=s.apply(h,f||[])).next())})},l=g&&g.__generator||function(h,f){var i={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},s,t,e,u;return u={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function r(a){return function(o){return c([a,o])}}function c(a){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,t&&(e=a[0]&2?t.return:a[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,a[1])).done)return e;switch(t=0,e&&(a=[a[0]&2,e.value]),a[0]){case 0:case 1:e=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,t=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(e=i.trys,!(e=e.length>0&&e[e.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!e||a[1]>e[0]&&a[1]<e[3])){i.label=a[1];break}if(a[0]===6&&i.label<e[1]){i.label=e[1],e=a;break}if(e&&i.label<e[2]){i.label=e[2],i.ops.push(a);break}e[2]&&i.ops.pop(),i.trys.pop();continue}a=f.call(h,i)}catch(o){a=[6,o],t=0}finally{s=e=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(Je,"__esModule",{value:!0});var v="/health",y=function(){function h(f){this.apiCall=f}return h.prototype.retrieve=function(){return d(this,void 0,void 0,function(){return l(this,function(f){return[2,this.apiCall.get(v)]})})},h}();return Je.default=y,Je}var Xe={},rr;function oi(){if(rr)return Xe;rr=1;var d=g&&g.__awaiter||function(h,f,i,s){function t(e){return e instanceof i?e:new i(function(u){u(e)})}return new(i||(i=Promise))(function(e,u){function r(o){try{a(s.next(o))}catch(n){u(n)}}function c(o){try{a(s.throw(o))}catch(n){u(n)}}function a(o){o.done?e(o.value):t(o.value).then(r,c)}a((s=s.apply(h,f||[])).next())})},l=g&&g.__generator||function(h,f){var i={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},s,t,e,u;return u={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function r(a){return function(o){return c([a,o])}}function c(a){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,t&&(e=a[0]&2?t.return:a[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,a[1])).done)return e;switch(t=0,e&&(a=[a[0]&2,e.value]),a[0]){case 0:case 1:e=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,t=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(e=i.trys,!(e=e.length>0&&e[e.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!e||a[1]>e[0]&&a[1]<e[3])){i.label=a[1];break}if(a[0]===6&&i.label<e[1]){i.label=e[1],e=a;break}if(e&&i.label<e[2]){i.label=e[2],i.ops.push(a);break}e[2]&&i.ops.pop(),i.trys.pop();continue}a=f.call(h,i)}catch(o){a=[6,o],t=0}finally{s=e=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(Xe,"__esModule",{value:!0});var v="/operations",y=function(){function h(f){this.apiCall=f}return h.prototype.perform=function(f,i){return i===void 0&&(i={}),d(this,void 0,void 0,function(){return l(this,function(s){return[2,this.apiCall.post("".concat(v,"/").concat(f),{},i)]})})},h}();return Xe.default=y,Xe}var Ye={},nr;function Mr(){if(nr)return Ye;nr=1;var d=g&&g.__awaiter||function(i,s,t,e){function u(r){return r instanceof t?r:new t(function(c){c(r)})}return new(t||(t=Promise))(function(r,c){function a(p){try{n(e.next(p))}catch(_){c(_)}}function o(p){try{n(e.throw(p))}catch(_){c(_)}}function n(p){p.done?r(p.value):u(p.value).then(a,o)}n((e=e.apply(i,s||[])).next())})},l=g&&g.__generator||function(i,s){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},e,u,r,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(n){return function(p){return o([n,p])}}function o(n){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,u&&(r=n[0]&2?u.return:n[0]?u.throw||((r=u.return)&&r.call(u),0):u.next)&&!(r=r.call(u,n[1])).done)return r;switch(u=0,r&&(n=[n[0]&2,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,u=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!r||n[1]>r[0]&&n[1]<r[3])){t.label=n[1];break}if(n[0]===6&&t.label<r[1]){t.label=r[1],r=n;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(n);break}r[2]&&t.ops.pop(),t.trys.pop();continue}n=s.call(i,t)}catch(p){n=[6,p],u=0}finally{e=r=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},v=g&&g.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ye,"__esModule",{value:!0});var y=v(xr()),h="/multi_search",f=function(){function i(s,t,e){e===void 0&&(e=!1),this.apiCall=s,this.configuration=t,this.useTextContentType=e,this.requestWithCache=new y.default}return i.prototype.clearCache=function(){this.requestWithCache.clearCache()},i.prototype.perform=function(s,t,e){t===void 0&&(t={});var u=e===void 0?{}:e,r=u.cacheSearchResultsForSeconds,c=r===void 0?this.configuration.cacheSearchResultsForSeconds:r;return d(this,void 0,void 0,function(){var a,o,n;return l(this,function(p){return a={},this.useTextContentType&&(a["content-type"]="text/plain"),o={},this.configuration.useServerSideSearchCache===!0&&(o.use_cache=!0),n=Object.assign({},t,o),[2,this.requestWithCache.perform(this.apiCall,this.apiCall.post,[h,s,n,a],{cacheResponseForSeconds:c})]})})},i}();return Ye.default=f,Ye}var Ve={},ir;function Fr(){if(ir)return Ve;ir=1;var d=g&&g.__awaiter||function(h,f,i,s){function t(e){return e instanceof i?e:new i(function(u){u(e)})}return new(i||(i=Promise))(function(e,u){function r(o){try{a(s.next(o))}catch(n){u(n)}}function c(o){try{a(s.throw(o))}catch(n){u(n)}}function a(o){o.done?e(o.value):t(o.value).then(r,c)}a((s=s.apply(h,f||[])).next())})},l=g&&g.__generator||function(h,f){var i={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},s,t,e,u;return u={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function r(a){return function(o){return c([a,o])}}function c(a){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,t&&(e=a[0]&2?t.return:a[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,a[1])).done)return e;switch(t=0,e&&(a=[a[0]&2,e.value]),a[0]){case 0:case 1:e=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,t=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(e=i.trys,!(e=e.length>0&&e[e.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!e||a[1]>e[0]&&a[1]<e[3])){i.label=a[1];break}if(a[0]===6&&i.label<e[1]){i.label=e[1],e=a;break}if(e&&i.label<e[2]){i.label=e[2],i.ops.push(a);break}e[2]&&i.ops.pop(),i.trys.pop();continue}a=f.call(h,i)}catch(o){a=[6,o],t=0}finally{s=e=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(Ve,"__esModule",{value:!0});var v="/presets",y=function(){function h(f){this.apiCall=f}return h.prototype.upsert=function(f,i){return d(this,void 0,void 0,function(){return l(this,function(s){return[2,this.apiCall.put(this.endpointPath(f),i)]})})},h.prototype.retrieve=function(){return d(this,void 0,void 0,function(){return l(this,function(f){return[2,this.apiCall.get(this.endpointPath())]})})},h.prototype.endpointPath=function(f){return"".concat(h.RESOURCEPATH).concat(f===void 0?"":"/"+f)},Object.defineProperty(h,"RESOURCEPATH",{get:function(){return v},enumerable:!1,configurable:!0}),h}();return Ve.default=y,Ve}var Ze={},ar;function ui(){if(ar)return Ze;ar=1;var d=g&&g.__awaiter||function(f,i,s,t){function e(u){return u instanceof s?u:new s(function(r){r(u)})}return new(s||(s=Promise))(function(u,r){function c(n){try{o(t.next(n))}catch(p){r(p)}}function a(n){try{o(t.throw(n))}catch(p){r(p)}}function o(n){n.done?u(n.value):e(n.value).then(c,a)}o((t=t.apply(f,i||[])).next())})},l=g&&g.__generator||function(f,i){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},t,e,u,r;return r={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function c(o){return function(n){return a([o,n])}}function a(o){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,e&&(u=o[0]&2?e.return:o[0]?e.throw||((u=e.return)&&u.call(e),0):e.next)&&!(u=u.call(e,o[1])).done)return u;switch(e=0,u&&(o=[o[0]&2,u.value]),o[0]){case 0:case 1:u=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,e=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(o[0]===6||o[0]===2)){s=0;continue}if(o[0]===3&&(!u||o[1]>u[0]&&o[1]<u[3])){s.label=o[1];break}if(o[0]===6&&s.label<u[1]){s.label=u[1],u=o;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(o);break}u[2]&&s.ops.pop(),s.trys.pop();continue}o=i.call(f,s)}catch(n){o=[6,n],e=0}finally{t=u=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},v=g&&g.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(Ze,"__esModule",{value:!0});var y=v(Fr()),h=function(){function f(i,s){this.presetId=i,this.apiCall=s}return f.prototype.retrieve=function(){return d(this,void 0,void 0,function(){return l(this,function(i){return[2,this.apiCall.get(this.endpointPath())]})})},f.prototype.delete=function(){return d(this,void 0,void 0,function(){return l(this,function(i){return[2,this.apiCall.delete(this.endpointPath())]})})},f.prototype.endpointPath=function(){return"".concat(y.default.RESOURCEPATH,"/").concat(this.presetId)},f}();return Ze.default=h,Ze}var et={},tt={},or;function Hr(){if(or)return tt;or=1;var d=g&&g.__awaiter||function(h,f,i,s){function t(e){return e instanceof i?e:new i(function(u){u(e)})}return new(i||(i=Promise))(function(e,u){function r(o){try{a(s.next(o))}catch(n){u(n)}}function c(o){try{a(s.throw(o))}catch(n){u(n)}}function a(o){o.done?e(o.value):t(o.value).then(r,c)}a((s=s.apply(h,f||[])).next())})},l=g&&g.__generator||function(h,f){var i={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},s,t,e,u;return u={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function r(a){return function(o){return c([a,o])}}function c(a){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,t&&(e=a[0]&2?t.return:a[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,a[1])).done)return e;switch(t=0,e&&(a=[a[0]&2,e.value]),a[0]){case 0:case 1:e=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,t=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(e=i.trys,!(e=e.length>0&&e[e.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!e||a[1]>e[0]&&a[1]<e[3])){i.label=a[1];break}if(a[0]===6&&i.label<e[1]){i.label=e[1],e=a;break}if(e&&i.label<e[2]){i.label=e[2],i.ops.push(a);break}e[2]&&i.ops.pop(),i.trys.pop();continue}a=f.call(h,i)}catch(o){a=[6,o],t=0}finally{s=e=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(tt,"__esModule",{value:!0});var v="/analytics/rules",y=function(){function h(f){this.apiCall=f,this.apiCall=f}return h.prototype.upsert=function(f,i){return d(this,void 0,void 0,function(){return l(this,function(s){return[2,this.apiCall.put(this.endpointPath(f),i)]})})},h.prototype.retrieve=function(){return d(this,void 0,void 0,function(){return l(this,function(f){return[2,this.apiCall.get(this.endpointPath())]})})},h.prototype.endpointPath=function(f){return"".concat(h.RESOURCEPATH).concat(f===void 0?"":"/"+f)},Object.defineProperty(h,"RESOURCEPATH",{get:function(){return v},enumerable:!1,configurable:!0}),h}();return tt.default=y,tt}var rt={},ur;function si(){if(ur)return rt;ur=1;var d=g&&g.__awaiter||function(f,i,s,t){function e(u){return u instanceof s?u:new s(function(r){r(u)})}return new(s||(s=Promise))(function(u,r){function c(n){try{o(t.next(n))}catch(p){r(p)}}function a(n){try{o(t.throw(n))}catch(p){r(p)}}function o(n){n.done?u(n.value):e(n.value).then(c,a)}o((t=t.apply(f,i||[])).next())})},l=g&&g.__generator||function(f,i){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},t,e,u,r;return r={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function c(o){return function(n){return a([o,n])}}function a(o){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,e&&(u=o[0]&2?e.return:o[0]?e.throw||((u=e.return)&&u.call(e),0):e.next)&&!(u=u.call(e,o[1])).done)return u;switch(e=0,u&&(o=[o[0]&2,u.value]),o[0]){case 0:case 1:u=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,e=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(o[0]===6||o[0]===2)){s=0;continue}if(o[0]===3&&(!u||o[1]>u[0]&&o[1]<u[3])){s.label=o[1];break}if(o[0]===6&&s.label<u[1]){s.label=u[1],u=o;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(o);break}u[2]&&s.ops.pop(),s.trys.pop();continue}o=i.call(f,s)}catch(n){o=[6,n],e=0}finally{t=u=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},v=g&&g.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(rt,"__esModule",{value:!0});var y=v(Hr()),h=function(){function f(i,s){this.name=i,this.apiCall=s}return f.prototype.retrieve=function(){return d(this,void 0,void 0,function(){return l(this,function(i){return[2,this.apiCall.get(this.endpointPath())]})})},f.prototype.delete=function(){return d(this,void 0,void 0,function(){return l(this,function(i){return[2,this.apiCall.delete(this.endpointPath())]})})},f.prototype.endpointPath=function(){return"".concat(y.default.RESOURCEPATH,"/").concat(this.name)},f}();return rt.default=h,rt}var sr;function ci(){if(sr)return et;sr=1;var d=g&&g.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(et,"__esModule",{value:!0});var l=d(Hr()),v=d(si()),y="/analytics",h=function(){function f(i){this.apiCall=i,this.individualAnalyticsRules={},this.apiCall=i,this._analyticsRules=new l.default(this.apiCall)}return f.prototype.rules=function(i){return i===void 0?this._analyticsRules:(this.individualAnalyticsRules[i]===void 0&&(this.individualAnalyticsRules[i]=new v.default(i,this.apiCall)),this.individualAnalyticsRules[i])},Object.defineProperty(f,"RESOURCEPATH",{get:function(){return y},enumerable:!1,configurable:!0}),f}();return et.default=h,et}var cr;function li(){if(cr)return Se;cr=1;var d=g&&g.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(Se,"__esModule",{value:!0});var l=d(Pr()),v=d(Tr()),y=d(re()),h=d(ei()),f=d(Nr()),i=d(ti()),s=d(Dr()),t=d(ri()),e=d(ni()),u=d(ii()),r=d(ai()),c=d(oi()),a=d(Mr()),o=d(Fr()),n=d(ui()),p=d(ci()),_=function(){function m(w){var R;w.sendApiKeyAsQueryParam=(R=w.sendApiKeyAsQueryParam)!==null&&R!==void 0?R:!1,this.configuration=new l.default(w),this.apiCall=new v.default(this.configuration),this.debug=new e.default(this.apiCall),this.metrics=new u.default(this.apiCall),this.health=new r.default(this.apiCall),this.operations=new c.default(this.apiCall),this.multiSearch=new a.default(this.apiCall,this.configuration),this._collections=new y.default(this.apiCall),this.individualCollections={},this._aliases=new f.default(this.apiCall),this.individualAliases={},this._keys=new s.default(this.apiCall),this.individualKeys={},this._presets=new o.default(this.apiCall),this.individualPresets={},this.analytics=new p.default(this.apiCall)}return m.prototype.collections=function(w){return w===void 0?this._collections:(this.individualCollections[w]===void 0&&(this.individualCollections[w]=new h.default(w,this.apiCall,this.configuration)),this.individualCollections[w])},m.prototype.aliases=function(w){return w===void 0?this._aliases:(this.individualAliases[w]===void 0&&(this.individualAliases[w]=new i.default(w,this.apiCall)),this.individualAliases[w])},m.prototype.keys=function(w){return w===void 0?this._keys:(this.individualKeys[w]===void 0&&(this.individualKeys[w]=new t.default(w,this.apiCall)),this.individualKeys[w])},m.prototype.presets=function(w){return w===void 0?this._presets:(this.individualPresets[w]===void 0&&(this.individualPresets[w]=new n.default(w,this.apiCall)),this.individualPresets[w])},m}();return Se.default=_,Se}var nt={},fe={},lr;function fi(){if(lr)return fe;lr=1,Object.defineProperty(fe,"__esModule",{value:!0}),fe.SearchOnlyCollection=void 0;var d=Ar(),l=function(){function v(y,h,f){this.name=y,this.apiCall=h,this.configuration=f,this._documents=new d.SearchOnlyDocuments(this.name,this.apiCall,this.configuration)}return v.prototype.documents=function(){return this._documents},v}();return fe.SearchOnlyCollection=l,fe}var fr;function hi(){if(fr)return nt;fr=1;var d=g&&g.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(nt,"__esModule",{value:!0});var l=d(Pr()),v=d(Tr()),y=d(Mr()),h=fi(),f=function(){function i(s){var t;s.sendApiKeyAsQueryParam=(t=s.sendApiKeyAsQueryParam)!==null&&t!==void 0?t:!0,s.sendApiKeyAsQueryParam===!0&&(s.apiKey||"").length>2e3&&(console.warn("[typesense] API Key is longer than 2000 characters which is over the allowed limit, so disabling sending it as a query parameter."),s.sendApiKeyAsQueryParam=!1),this.configuration=new l.default(s),this.apiCall=new v.default(this.configuration),this.multiSearch=new y.default(this.apiCall,this.configuration,!0),this.individualCollections={}}return i.prototype.clearCache=function(){this.multiSearch.clearCache(),Object.entries(this.individualCollections).forEach(function(s){s[0];var t=s[1];t.documents().clearCache()})},i.prototype.collections=function(s){if(s)return this.individualCollections[s]===void 0&&(this.individualCollections[s]=new h.SearchOnlyCollection(s,this.apiCall,this.configuration)),this.individualCollections[s];throw new Error("Typesense.SearchClient only supports search operations, so the collectionName that needs to be searched must be specified. Use Typesense.Client if you need to access the collection object.")},i}();return nt.default=f,nt}var hr;function di(){if(hr)return ee;hr=1;var d=g&&g.__createBinding||(Object.create?function(s,t,e,u){u===void 0&&(u=e);var r=Object.getOwnPropertyDescriptor(t,e);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(s,u,r)}:function(s,t,e,u){u===void 0&&(u=e),s[u]=t[e]}),l=g&&g.__setModuleDefault||(Object.create?function(s,t){Object.defineProperty(s,"default",{enumerable:!0,value:t})}:function(s,t){s.default=t}),v=g&&g.__importStar||function(s){if(s&&s.__esModule)return s;var t={};if(s!=null)for(var e in s)e!=="default"&&Object.prototype.hasOwnProperty.call(s,e)&&d(t,s,e);return l(t,s),t},y=g&&g.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ee,"__esModule",{value:!0}),ee.Errors=ee.SearchClient=ee.Client=void 0;var h=y(li());ee.Client=h.default;var f=y(hi());ee.SearchClient=f.default;var i=v(me());return ee.Errors=i,ee.default={Client:h.default,SearchClient:f.default,Errors:i},ee}var he={};const Lr=ht(zr);var dr;function pi(){if(dr)return he;dr=1;var d=be;Object.defineProperty(he,"__esModule",{value:!0}),he.SearchRequestAdapter=void 0;var l=d(Cr()),v=d(Er()),y=d(Lr),h=d(ge()),f=d(we()),i=function(){function s(t,e,u){(0,h.default)(this,s),this.instantsearchRequests=t,this.typesenseClient=e,this.configuration=u,this.additionalSearchParameters=u.additionalSearchParameters,this.collectionSpecificSearchParameters=u.collectionSpecificSearchParameters}return(0,f.default)(s,[{key:"_shouldUseExactMatchForField",value:function(e,u){var r,c;return!(((r=this.configuration.collectionSpecificFilterByOptions)===null||r===void 0||(r=r[u])===null||r===void 0||(r=r[e])===null||r===void 0?void 0:r.exactMatch)===!1||((c=this.configuration.filterByOptions)===null||c===void 0||(c=c[e])===null||c===void 0?void 0:c.exactMatch)===!1)}},{key:"_adaptFacetFilters",value:function(e,u){var r=this,c="";if(!e)return c;var a=e.map(function(o){if(Array.isArray(o)){var n={};o.forEach(function(x){var $=r._parseFacetFilter(x),X=$.fieldName,C=$.fieldValue;n[X]=n[X]||[],n[X].push(C)}),Object.keys(n).length>1&&console.error("[Typesense-Instantsearch-Adapter] Typesense does not support cross-field ORs at the moment. The adapter could not OR values between these fields: ".concat(Object.keys(n).join(",")));var p=Object.keys(n)[0],_=n[p],m=_.reduce(function(x,$){return $.startsWith("-")&&!r._isNumber($)?x[0].push($.substring(1)):x[1].push($),x},[[],[]]),w=(0,y.default)(m,2),R=w[0],b=w[1],E=[];if(b.length>0){var q=r._shouldUseExactMatchForField(p,u)?":=":":";E.push("".concat(p).concat(q,"[").concat(b.map(function(x){return r._escapeFacetValue(x)}).join(","),"]"))}if(R.length>0){var T=r._shouldUseExactMatchForField(p,u)?":!=":":!";E.push("".concat(p).concat(T,"[").concat(R.map(function(x){return r._escapeFacetValue(x)}).join(","),"]"))}var N=E.filter(function(x){return x}).join(" && ");return N}else{var M=r._parseFacetFilter(o),j=M.fieldName,D=M.fieldValue,L;if(D.startsWith("-")&&!r._isNumber(D)){var W=r._shouldUseExactMatchForField(j,u)?":!=":":!";L="".concat(j).concat(W,"[").concat(r._escapeFacetValue(D.substring(1)),"]")}else{var J=r._shouldUseExactMatchForField(j,u)?":=":":";L="".concat(j).concat(J,"[").concat(r._escapeFacetValue(D),"]")}return L}});return c=a.join(" && "),c}},{key:"_parseFacetFilter",value:function(e){var u,r,c,a,o;if(((u=this.configuration.facetableFieldsWithSpecialCharacters)===null||u===void 0?void 0:u.length)>0){var n=this.configuration.facetableFieldsWithSpecialCharacters.flat().map(function(p){return p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")});if(r=new RegExp("^(".concat(n.join("|"),"):(.*)$")),c=e.match(r),c!=null)return a="".concat(c[1]),o="".concat(c[2]),{fieldName:a,fieldValue:o}}return r=this.constructor.DEFAULT_FACET_FILTER_STRING_MATCHING_REGEX,c=e.match(r),c==null?console.error("[Typesense-Instantsearch-Adapter] Parsing failed for a facet filter `".concat(e,"` with the Regex `").concat(r,"`. If you have field names with special characters, be sure to add them to a parameter called `facetableFieldsWithSpecialCharacters` when instantiating the adapter.")):(a="".concat(c[1]).concat(c[2]),o="".concat(c[3])),{fieldName:a,fieldValue:o}}},{key:"_escapeFacetValue",value:function(e){return typeof e=="boolean"||e==="true"||e==="false"||this._isNumber(e)?e:"`".concat(e,"`")}},{key:"_isNumber",value:function(e){return Number.isInteger(e%1)||!!(e%1)}},{key:"_adaptNumericFilters",value:function(e){var u=this,r="";if(!e)return r;var c={};e.forEach(function(o){var n=u._parseNumericFilter(o),p=n.fieldName,_=n.operator,m=n.fieldValue;c[p]=c[p]||{},c[p][_]=m});var a=[];return Object.keys(c).forEach(function(o){c[o]["<="]!=null&&c[o][">="]!=null?a.push("".concat(o,":=[").concat(c[o][">="],"..").concat(c[o]["<="],"]")):c[o]["<="]!=null?a.push("".concat(o,":<=").concat(c[o]["<="])):c[o][">="]!=null?a.push("".concat(o,":>=").concat(c[o][">="])):c[o]["="]!=null?a.push("".concat(o,":=").concat(c[o]["="])):console.warn("[Typesense-Instantsearch-Adapter] Unsupported operator found ".concat(JSON.stringify(c[o])))}),r=a.join(" && "),r}},{key:"_parseNumericFilter",value:function(e){var u,r,c,a,o,n;if(((u=this.configuration.facetableFieldsWithSpecialCharacters)===null||u===void 0?void 0:u.length)>0){var p=this.configuration.facetableFieldsWithSpecialCharacters.map(function(b){return b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")});if(r=new RegExp("^(".concat(p.join("|"),")(<=|>=|>|<|=)(.*)$")),c=e.match(r),c!=null){var _=c,m=(0,y.default)(_,4);return a=m[1],o=m[2],n=m[3],{fieldName:a,operator:o,fieldValue:n}}}if(r=this.constructor.DEFAULT_NUMERIC_FILTER_STRING_MATCHING_REGEX,c=e.match(r),c==null)console.error("[Typesense-Instantsearch-Adapter] Parsing failed for a numeric filter `".concat(e,"` with the Regex `").concat(r,"`. If you have field names with special characters, be sure to add them to a parameter called `facetableFieldsWithSpecialCharacters` when instantiating the adapter."));else{var w=c,R=(0,y.default)(w,4);a=R[1],o=R[2],n=R[3]}return{fieldName:a,operator:o,fieldValue:n}}},{key:"_adaptGeoFilter",value:function(e){var u=e.insideBoundingBox,r=e.aroundRadius,c=e.aroundLatLng,a=e.insidePolygon;if(u){var o,n,p,_;if(Array.isArray(u)){var m=u.flat(),w=(0,y.default)(m,4);o=w[0],n=w[1],p=w[2],_=w[3]}else{var R=u.split(","),b=(0,y.default)(R,4);o=b[0],n=b[1],p=b[2],_=b[3]}return"".concat(this.configuration.geoLocationField,":(").concat(o,", ").concat(n,", ").concat(o,", ").concat(_,", ").concat(p,", ").concat(_,", ").concat(p,", ").concat(n,")")}if(c||r){if(!r||r==="all")throw new Error("[Typesense-Instantsearch-Adapter] In Typesense, geo-filtering around a lat/lng also requires a numerical radius. So the `aroundRadius` parameter is required when `aroundLatLng` is used. If you intend to just geo-sort around a lat/long, you want to use the sortBy InstantSearch widget (or a virtual sortBy custom widget).");var E="".concat(parseFloat(r)/1e3," km");return"".concat(this.configuration.geoLocationField,":(").concat(c,", ").concat(E,")")}if(a){var q=a;return Array.isArray(a)&&(q=a.flat().join(",")),"".concat(this.configuration.geoLocationField,":(").concat(q,")")}}},{key:"_adaptFilters",value:function(e,u){var r=[];return e.filters&&r.push(e.filters),r.push(this._adaptFacetFilters(e.facetFilters,u)),r.push(this._adaptNumericFilters(e.numericFilters)),r.push(this._adaptGeoFilter(e)),r.filter(function(c){return c&&c!==""}).join(" && ")}},{key:"_adaptIndexName",value:function(e){return e.match(this.constructor.INDEX_NAME_MATCHING_REGEX)[1]}},{key:"_adaptSortBy",value:function(e){return e.match(this.constructor.INDEX_NAME_MATCHING_REGEX)[3]}},{key:"_adaptFacetBy",value:function(e,u){var r=this;return[e].flat().map(function(c){var a;return(a=r.configuration.collectionSpecificFacetByOptions)!==null&&a!==void 0&&(a=a[u])!==null&&a!==void 0&&a[c]?"".concat(c).concat(r.configuration.collectionSpecificFacetByOptions[u][c]):r.configuration.facetByOptions[c]?"".concat(c).concat(r.configuration.facetByOptions[c]):c}).join(",")}},{key:"_buildSearchParameters",value:function(e){for(var u=e.params,r=e.indexName,c=this._adaptIndexName(r),a={},o=0,n=Object.entries(this.additionalSearchParameters);o<n.length;o++){var p=(0,y.default)(n[o],2),_=p[0],m=p[1];a[this._camelToSnakeCase(_)]=m}if(this.collectionSpecificSearchParameters[c])for(var w=0,R=Object.entries(this.collectionSpecificSearchParameters[c]);w<R.length;w++){var b=(0,y.default)(R[w],2),E=b[0],q=b[1];a[this._camelToSnakeCase(E)]=q}var T=Object.assign({},a),N=this._adaptSortBy(r);return Object.assign(T,{collection:c,q:u.query===""||u.query===void 0?"*":u.query,facet_by:a.facet_by||this._adaptFacetBy(u.facets,c),filter_by:this._adaptFilters(u,c)||a.filter_by,sort_by:N||a.sort_by,max_facet_values:u.maxValuesPerFacet,page:(u.page||0)+1}),u.hitsPerPage&&(T.per_page=u.hitsPerPage),u.facetQuery&&(T.facet_query="".concat(u.facetName,":").concat(u.facetQuery),T.per_page=0),u.typesenseVectorQuery&&(T.vector_query=u.typesenseVectorQuery),Object.fromEntries(Object.entries(T).filter(function(M){var j=(0,y.default)(M,2);j[0];var D=j[1];return D!=null&&D!==""}))}},{key:"_camelToSnakeCase",value:function(e){return e.split(/(?=[A-Z])/).join("_").toLowerCase()}},{key:"request",value:function(){var t=(0,v.default)(l.default.mark(function u(){var r=this,c;return l.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return c=this.instantsearchRequests.map(function(n){return r._buildSearchParameters(n)}),o.abrupt("return",this.typesenseClient.multiSearch.perform({searches:c}));case 2:case"end":return o.stop()}},u,this)}));function e(){return t.apply(this,arguments)}return e}()}],[{key:"INDEX_NAME_MATCHING_REGEX",get:function(){return new RegExp("^(.+?)(?=(/sort/(.*))|$)")}},{key:"DEFAULT_FACET_FILTER_STRING_MATCHING_REGEX",get:function(){return new RegExp("(.*)((?!:).):(?!:)(.*)")}},{key:"DEFAULT_NUMERIC_FILTER_STRING_MATCHING_REGEX",get:function(){return new RegExp("(.*?)(<=|>=|>|<|=)(.*)")}}]),s}();return he.SearchRequestAdapter=i,he}var de={};const vi=ht(Qr),yi=ht(Xr);var pe={},pr;function Ur(){if(pr)return pe;pr=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.utils=void 0;var d={_adaptHighlightTag:function(v,y,h){return v.replace(new RegExp("<mark>","g"),y||"<mark>").replace(new RegExp("</mark>","g"),h||"</mark>")},_adaptNumberOfPages:function(){var v=this.typesenseResponse.found/this.typesenseResponse.request_params.per_page;return Number.isFinite(v)?Math.ceil(v):1}};return pe.utils=d,pe}var vr;function _i(){if(vr)return de;vr=1;var d=be;Object.defineProperty(de,"__esModule",{value:!0}),de.SearchResponseAdapter=void 0;var l=d(vi),v=d(Lr),y=d(Jr()),h=d(yi),f=d(ge()),i=d(we()),s=Ur();function t(r,c){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);c&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),a.push.apply(a,o)}return a}function e(r){for(var c=1;c<arguments.length;c++){var a=arguments[c]!=null?arguments[c]:{};c%2?t(Object(a),!0).forEach(function(o){(0,h.default)(r,o,a[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(a,o))})}return r}var u=function(){function r(c,a,o){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];(0,f.default)(this,r),this.typesenseResponse=c,this.instantsearchRequest=a,this.configuration=o,this.allTypesenseResponses=n}return(0,i.default)(r,[{key:"_adaptGroupedHits",value:function(a){var o=this,n=[];return n=a.map(function(p){var _=o._adaptHits(p.hits);return _.forEach(function(m){m.group_key=m._group_key=p.group_key,p.found&&(m._group_found=p.found)}),_}),this.configuration.flattenGroupedHits?n=n.flat():n=n.map(function(p){return e(e({},p[0]),{},{_grouped_hits:p})}),n}},{key:"_adaptHits",value:function(a){var o=this,n=[];return n=a.map(function(p){var _=e({},p.document);_.objectID=p.document.id,_._snippetResult=o._adaptHighlightResult(p,"snippet"),_._highlightResult=o._adaptHighlightResult(p,"value"),_._rawTypesenseHit=p,["text_match","geo_distance_meters","curated","text_match_info","hybrid_search_info","vector_distance"].forEach(function(w){Object.keys(p).includes(w)&&!Object.keys(_).includes(w)&&(_[w]=p[w])});var m=_[o.configuration.geoLocationField];return m&&(_._geoloc={lat:m[0],lng:m[1]}),_}),n}},{key:"_adaptHighlightResult",value:function(a,o){var n={};return a.highlight!=null&&this.isHighlightPost0240RCN32Format(a.highlight)?this.adaptHighlightObject(a,n,o):this.adaptHighlightsArray(a,n,o),n}},{key:"isHighlightPost0240RCN32Format",value:function(a){return a.full==null&&a.snippet==null}},{key:"adaptHighlightsArray",value:function(a,o,n){var p=this;Object.assign.apply(Object,[o].concat((0,y.default)(Object.entries(a.document).map(function(_){var m=(0,v.default)(_,2),w=m[0],R=m[1];return(0,h.default)({},w,{value:R,matchLevel:"none",matchedWords:[]})})))),a.highlights.forEach(function(_){o[_.field]={value:_[n]||_["".concat(n,"s")],matchLevel:"full",matchedWords:_.matched_tokens},_.indices&&(o[_.field].matchedIndices=_.indices)}),Object.entries(o).forEach(function(_){var m=(0,v.default)(_,2),w=m[0],R=m[1],b=w,E=R.value,q=R.matchLevel,T=R.matchedWords,N=R.matchedIndices;E==null?o[b]=p._adaptHighlightNullValue():Array.isArray(E)?(o[b]=[],a.document[b].forEach(function(M,j){N&&N.includes(j)?o[b].push({value:p._adaptHighlightTag("".concat(E[N.indexOf(j)]),p.instantsearchRequest.params.highlightPreTag,p.instantsearchRequest.params.highlightPostTag),matchLevel:q,matchedWords:T[j]}):(0,l.default)(M)==="object"?o[b].push(p._adaptHighlightInObjectValue(M,{},n)):o[b].push({value:"".concat(M),matchLevel:"none",matchedWords:[]})})):(0,l.default)(E)==="object"?o[b]=p._adaptHighlightInObjectValue(E,{},n):o[b].value=p._adaptHighlightTag("".concat(E),p.instantsearchRequest.params.highlightPreTag,p.instantsearchRequest.params.highlightPostTag)})}},{key:"adaptHighlightObject",value:function(a,o,n){Object.assign(o,this._adaptHighlightInObjectValue(a.document,a.highlight,n))}},{key:"_adaptHighlightInObjectValue",value:function(a,o,n){var p=this;return Object.assign.apply(Object,[{}].concat((0,y.default)(Object.entries(a).map(function(_){var m=(0,v.default)(_,2),w=m[0],R=m[1],b;if(R==null)b=p._adaptHighlightNullValue();else if(Array.isArray(R)){var E;b=p._adaptHighlightInArrayValue(R,(E=o==null?void 0:o[w])!==null&&E!==void 0?E:[],n)}else if((0,l.default)(R)==="object"){var q;b=p._adaptHighlightInObjectValue(R,(q=o==null?void 0:o[w])!==null&&q!==void 0?q:{},n)}else b=p._adaptHighlightInPrimitiveValue(R,o==null?void 0:o[w],n);return(0,h.default)({},w,b)}))))}},{key:"_adaptHighlightInArrayValue",value:function(a,o,n){var p=this;return a.map(function(_,m){var w;if(_==null)w=p._adaptHighlightNullValue();else if(Array.isArray(_)){var R;w=p._adaptHighlightInArrayValue(_,(R=o==null?void 0:o[m])!==null&&R!==void 0?R:[],n)}else if((0,l.default)(_)==="object"){var b;w=p._adaptHighlightInObjectValue(_,(b=o==null?void 0:o[m])!==null&&b!==void 0?b:{},n)}else w=p._adaptHighlightInPrimitiveValue(_,o==null?void 0:o[m],n);return w})}},{key:"_adaptHighlightInPrimitiveValue",value:function(a,o,n){if(o!=null){var p,_;return{value:this._adaptHighlightTag("".concat((p=(_=o[n])!==null&&_!==void 0?_:o.highlight)!==null&&p!==void 0?p:o.snippet),this.instantsearchRequest.params.highlightPreTag,this.instantsearchRequest.params.highlightPostTag),matchLevel:(o.matched_tokens||[]).length>0?"full":"none",matchedWords:o.matched_tokens||[]}}else return{value:this._adaptHighlightTag("".concat(a),this.instantsearchRequest.params.highlightPreTag,this.instantsearchRequest.params.highlightPostTag),matchLevel:"none",matchedWords:[]}}},{key:"_adaptHighlightNullValue",value:function(){return{value:"",matchLevel:"none",matchedWords:[]}}},{key:"_adaptFacets",value:function(a){var o={};return a.forEach(function(n){Object.assign(o,(0,h.default)({},n.field_name,Object.assign.apply(Object,[{}].concat((0,y.default)(n.counts.map(function(p){return(0,h.default)({},p.value,p.count)}))))))}),o}},{key:"_adaptFacetStats",value:function(a){var o={};return a.forEach(function(n){Object.keys(n.stats).length>0&&Object.assign(o,(0,h.default)({},n.field_name,n.stats))}),o}},{key:"_adaptRenderingContent",value:function(a){var o,n=Object.assign({},this.configuration.renderingContent);return((o=n.facetOrdering)===null||o===void 0||(o=o.facets)===null||o===void 0?void 0:o.order)==null&&(n.facetOrdering=n.facetOrdering||{},n.facetOrdering.facets=n.facetOrdering.facets||{},n.facetOrdering.facets.order=(0,y.default)(new Set(a.map(function(p){return p.field_name}).concat(this.allTypesenseResponses.map(function(p){return p.facet_counts||[]}).flat().map(function(p){return p.field_name}).filter(function(p){return p}))))),n}},{key:"adapt",value:function(){var a=this._adaptRenderingContent(this.typesenseResponse.facet_counts||[]),o=e({hits:this.typesenseResponse.grouped_hits?this._adaptGroupedHits(this.typesenseResponse.grouped_hits):this._adaptHits(this.typesenseResponse.hits),nbHits:this.typesenseResponse.found,page:this.typesenseResponse.page-1,nbPages:this._adaptNumberOfPages(),hitsPerPage:this.typesenseResponse.request_params.per_page,facets:this._adaptFacets(this.typesenseResponse.facet_counts||[]),facets_stats:this._adaptFacetStats(this.typesenseResponse.facet_counts||{}),query:this.typesenseResponse.request_params.q,processingTimeMS:this.typesenseResponse.search_time_ms},Object.keys(a).length>0?{renderingContent:a}:null);return o}}]),r}();return de.SearchResponseAdapter=u,Object.assign(u.prototype,s.utils),de}var ve={},yr;function gi(){if(yr)return ve;yr=1;var d=be;Object.defineProperty(ve,"__esModule",{value:!0}),ve.FacetSearchResponseAdapter=void 0;var l=d(ge()),v=d(we()),y=Ur(),h=function(){function f(i,s){(0,l.default)(this,f),this.typesenseResponse=i,this.instantsearchRequest=s}return(0,v.default)(f,[{key:"_adaptFacetHits",value:function(s){var t=this,e={},u=s.find(function(r){return r.field_name===t.instantsearchRequest.params.facetName});return e=u.counts.map(function(r){return{value:r.value,highlighted:t._adaptHighlightTag(r.highlighted,t.instantsearchRequest.params.highlightPreTag,t.instantsearchRequest.params.highlightPostTag),count:r.count}}),e}},{key:"adapt",value:function(){var s={facetHits:this._adaptFacetHits(this.typesenseResponse.facet_counts),exhaustiveFacetsCount:!0,processingTimeMS:this.typesenseResponse.search_time_ms};return s}}]),f}();return ve.FacetSearchResponseAdapter=h,Object.assign(h.prototype,y.utils),ve}(function(d){var l=be;Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var v=l(Cr()),y=l(Er()),h=l(ge()),f=l(we()),i=Un(),s=di(),t=pi(),e=_i(),u=gi(),r=function(){function c(a){var o=this;(0,h.default)(this,c),this.updateConfiguration(a),this.searchClient={clearCache:function(){return o.clearCache()},search:function(p){return o.searchTypesenseAndAdapt(p)},searchForFacetValues:function(p){return o.searchTypesenseForFacetValuesAndAdapt(p)}}}return(0,f.default)(c,[{key:"searchTypesenseAndAdapt",value:function(){var a=(0,y.default)(v.default.mark(function n(p){var _=this,m,w;return v.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.prev=0,b.next=3,this._adaptAndPerformTypesenseRequest(p);case 3:return m=b.sent,w=m.results.map(function(E,q){_._validateTypesenseResult(E);var T=new e.SearchResponseAdapter(E,p[q],_.configuration,m.results);return T.adapt()}),b.abrupt("return",{results:w});case 8:throw b.prev=8,b.t0=b.catch(0),console.error(b.t0),b.t0;case 12:case"end":return b.stop()}},n,this,[[0,8]])}));function o(n){return a.apply(this,arguments)}return o}()},{key:"searchTypesenseForFacetValuesAndAdapt",value:function(){var a=(0,y.default)(v.default.mark(function n(p){var _=this,m,w;return v.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.prev=0,b.next=3,this._adaptAndPerformTypesenseRequest(p);case 3:return m=b.sent,w=m.results.map(function(E,q){_._validateTypesenseResult(E);var T=new u.FacetSearchResponseAdapter(E,p[q],_.configuration);return T.adapt()}),b.abrupt("return",w);case 8:throw b.prev=8,b.t0=b.catch(0),console.error(b.t0),b.t0;case 12:case"end":return b.stop()}},n,this,[[0,8]])}));function o(n){return a.apply(this,arguments)}return o}()},{key:"_adaptAndPerformTypesenseRequest",value:function(){var a=(0,y.default)(v.default.mark(function n(p){var _,m;return v.default.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return _=new t.SearchRequestAdapter(p,this.typesenseClient,this.configuration),R.next=3,_.request();case 3:return m=R.sent,R.abrupt("return",m);case 5:case"end":return R.stop()}},n,this)}));function o(n){return a.apply(this,arguments)}return o}()},{key:"clearCache",value:function(){return this.typesenseClient=new s.SearchClient(this.configuration.server),this.searchClient}},{key:"updateConfiguration",value:function(o){return this.configuration=new i.Configuration(o),this.configuration.validate(),this.typesenseClient=new s.SearchClient(this.configuration.server),!0}},{key:"_validateTypesenseResult",value:function(o){if(o.error)throw new Error("".concat(o.code," - ").concat(o.error));if(!o.hits&&!o.grouped_hits)throw new Error("Did not find any hits. ".concat(o.code," - ").concat(o.error))}}]),c}();d.default=r})(Rr);const wi=_r(Rr),ue=".",Ir="_facet",bi=1e3,$r=d=>{const l=new Set(d.map(y=>y.uuid));return{hits:d,merge:y=>{const h=y.filter(f=>!l.has(f.uuid));return $r([...d,...h])}}},mi=d=>({router:Hn({cleanUrlOnDispose:!1}),stateMapping:{stateToRoute:l=>{const v=l[d.index_name]||{},{range:y,refinementList:h}=v;let f={q:v.query};return h&&(f={...f,...h}),y&&(f={...f,...y}),f},routeToState:l=>{const{q:v,event_range_facet:y,...h}=l,f={[d.index_name]:{query:v}};return Object.keys(h).length>0&&(f[d.index_name].refinementList=h),y&&(f[d.index_name].range={event_range_facet:y}),f}}}),Si=(d,l={})=>new wi({server:{apiKey:d.api_key,nodes:[{host:d.host,port:d.port||443,protocol:d.protocol||"https"}],cacheSearchResultsForSeconds:120,connectionTimeoutSeconds:d.connection_timeout,timeoutSeconds:d.timeout},geoLocationField:"coordinates",additionalSearchParameters:{query_by:d.query_by,limit:d.limit||250,sort_by:d.sort_by,exclude_fields:d.exclude_fields},...l}),Ri=d=>{const l=!te.isEmpty(d.start_date)&&d.start_date[0]||!te.isEmpty(d.end_date)&&d.end_date[0];return te.isNumber(l)?new Date(l*bi):l},Oi=d=>{if(!d)return"";let l=d.replaceAll(Ir,"");return l.includes(ue)&&(l=l.substring(l.indexOf(ue)+1,l.length)),l},Ci=d=>d&&d.includes(ue)?d.replace(Ir,"").substring(0,d.indexOf(ue)):"",Gr=(d,l,v)=>{var f;const y={id:d.record_id,ccode:[],title:d.name,uuid:d.uuid,record_id:d.record_id,name:d.name,names:(f=d.names)==null?void 0:f.map(i=>({toponym:i})),type:d.type,items:[l]},h=parseInt(d.record_id,10);return Yr(v,y,{id:h})},Ei=(d,l,v={})=>{const y=[],h=l.substring(0,l.lastIndexOf(ue)),f=l.substring(l.lastIndexOf(ue)+1,l.length);return te.each(d,i=>{let s=te.isEmpty(h)?i:vt.getNestedValue(i,h);te.isArray(s)||(s=[s]),te.each(s,t=>{var r;const e=te.get(t,f);if(e&&(!v.type||e.type===v.type)){const c=te.find(y,n=>{var p;return((p=n.properties)==null?void 0:p.uuid)===t.uuid});let a=i;const o=te.get(i,h);o&&(a=vt.setNestedValue(i,h,o.map(n=>({...n,geometry:void 0}))),a._rawTypesenseHit=void 0,a._snippetResult=void 0,a._highlightResult=void 0),c?(r=c.properties)==null||r.items.push(a):y.push(Gr(t,a,e))}})}),Vr(y)},Ui={createCachedHits:$r,createRouting:mi,createTypesenseAdapter:Si,getDate:Ri,getFieldId:Oi,getRelationshipId:Ci,toFeature:Gr,toFeatureCollection:Ei};export{Ui as T};
